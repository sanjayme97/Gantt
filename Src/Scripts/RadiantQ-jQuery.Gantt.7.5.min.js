/*!
* RadiantQ jQuery Gantt
* @author RadiantQ
* @version 7.5
* http://www.radiantq.com
*
* Copyright RadiantQ
*/
if(!window['RadiantQ']) window.RadiantQ={}; RadiantQ.Version='7.5';
/*

 jquery.layout 1.4.3
 $Date: 2014-08-30 08:00:00 (Sat, 30 Aug 2014) $
 $Rev: 1.0403 $

 Copyright (c) 2014 Kevin Dalman (http://jquery-dev.com)
 Based on work by Fabrizio Balliano (http://www.fabrizioballiano.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 SEE: http://layout.jquery-dev.com/LICENSE.txt

 Changelog: http://layout.jquery-dev.com/changelog.cfm

 Docs: http://layout.jquery-dev.com/documentation.html
 Tips: http://layout.jquery-dev.com/tips.html
 Help: http://groups.google.com/group/jquery-ui-layout
*/
(function(){var f=0;$.Widget.prototype._createWidget=function(b,e){e=$(e||this.defaultElement||this)[0];this.element=$(e);this.uuid=f++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();this.classesElementLookup={};e!==this&&($.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=$(e.style?e.ownerDocument:e.document||e),this.window=$(this.document[0].defaultView||this.document[0].parentWindow));
this.options=$.widget.extend({},this.options,this._getCreateOptions(),b);-1!=this.namespace.indexOf("radiantq")&&b&&(b.data&&(this.options.data=b.data),b.Data&&(this.options.Data=b.Data),b.DataSource&&(this.options.DataSource=b.DataSource));this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()}})();
(function(f){var b=Math.min,e=Math.max,a=Math.floor,c=function(a){return"string"===f.type(a)},d=function(a,b){if(f.isArray(b))for(var d=0,e=b.length;d<e;d++){var l=b[d];try{c(l)&&(l=eval(l)),f.isFunction(l)&&l(a)}catch(n){}}};f.layout={version:"1.4.3",revision:1.0403,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},
resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",
background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},
center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(a){a=f(a);if(a=a.data("layout")||a.data("parentLayout")){a=a.container;if(a.data("layoutPane"))return a;a=a.closest("."+f.layout.defaults.panes.paneClass);if(a.data("layoutPane"))return a}return null},getParentPaneInstance:function(a){return(a=f.layout.getParentPaneElem(a))?a.data("layoutPane"):null},getParentLayoutInstance:function(a){return(a=f.layout.getParentPaneElem(a))?
a.data("parentLayout"):null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(a){var c=f.layout.getEventObject(a);c&&(c.stopPropagation(),a=f(this).data("layoutEdge"));a&&!/^(west|east|north|south|center)$/.test(a)&&(f.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+a+'"'),a="error");return a},plugins:{draggable:!!f.fn.draggable,effects:{core:!!f.effects,slide:f.effects&&(f.effects.slide||f.effects.effect&&f.effects.effect.slide)}},onCreate:[],
onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||f.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||f.layout.getScrollbarSize("height")},getScrollbarSize:function(a){var c=f('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; border: 0; overflow: scroll;"></div>').appendTo("body"),b={width:c.outerWidth-c[0].clientWidth,height:100-c[0].clientHeight};
c.remove();window.scrollbarWidth=b.width;window.scrollbarHeight=b.height;return a.match(/^(width|height)$/)?b[a]:b},disableTextSelection:function(){var a=f(document);f.fn.disableSelection&&(a.data("textSelectionInitialized")||a.on("mouseup",f.layout.enableTextSelection).data("textSelectionInitialized",!0),a.data("textSelectionDisabled")||a.disableSelection().data("textSelectionDisabled",!0))},enableTextSelection:function(){var a=f(document);f.fn.enableSelection&&a.data("textSelectionDisabled")&&a.enableSelection().data("textSelectionDisabled",
!1)},showInvisibly:function(a,c){if(a&&a.length&&(c||"none"===a.css("display"))){var b=a[0].style,b={display:b.display||"",visibility:b.visibility||""};a.css({display:"block",visibility:"hidden"});return b}return{}},getElementDimensions:function(a,c){var b={css:{},inset:{}},d=b.css,l={bottom:0},n=f.layout.cssNum,p=Math.round,q=a.offset(),r,t,s;b.offsetLeft=q.left;b.offsetTop=q.top;c||(c={});f.each(["Left","Right","Top","Bottom"],function(e,n){r=d["border"+n]=f.layout.borderWidth(a,n);t=d["padding"+
n]=f.layout.cssNum(a,"padding"+n);s=n.toLowerCase();b.inset[s]=0<=c[s]?c[s]:t;l[s]=b.inset[s]+r});d.width=p(a.width());d.height=p(a.height());d.top=n(a,"top",!0);d.bottom=n(a,"bottom",!0);d.left=n(a,"left",!0);d.right=n(a,"right",!0);b.outerWidth=p(a.outerWidth());b.outerHeight=p(a.outerHeight());b.innerWidth=e(0,b.outerWidth-l.left-l.right);b.innerHeight=e(0,b.outerHeight-l.top-l.bottom);b.layoutWidth=p(a.innerWidth());b.layoutHeight=p(a.innerHeight());return b},getElementStyles:function(a,c){var b=
{},d=a[0].style,e=c.split(","),f=["Top","Bottom","Left","Right"],p=["Color","Style","Width"],q,r,t,s,w,u;for(s=0;s<e.length;s++)if(q=e[s],q.match(/(border|padding|margin)$/))for(w=0;4>w;w++)if(r=f[w],"border"===q)for(u=0;3>u;u++)t=p[u],b[q+r+t]=d[q+r+t];else b[q+r]=d[q+r];else b[q]=d[q];return b},cssWidth:function(a,c){if(0>=c)return 0;var b=f.layout.browser,b=b.boxModel?b.boxSizing?a.css("boxSizing"):"content-box":"border-box",d=f.layout.borderWidth,l=f.layout.cssNum,n=c;"border-box"!==b&&(n-=d(a,
"Left")+d(a,"Right"));"content-box"===b&&(n-=l(a,"paddingLeft")+l(a,"paddingRight"));return e(0,n)},cssHeight:function(a,c){if(0>=c)return 0;var b=f.layout.browser,b=b.boxModel?b.boxSizing?a.css("boxSizing"):"content-box":"border-box",d=f.layout.borderWidth,l=f.layout.cssNum,n=c;"border-box"!==b&&(n-=d(a,"Top")+d(a,"Bottom"));"content-box"===b&&(n-=l(a,"paddingTop")+l(a,"paddingBottom"));return e(0,n)},cssNum:function(a,c,b){a.jquery||(a=f(a));var d=f.layout.showInvisibly(a);c=f.css(a[0],c,!0);b=
b&&"auto"==c?c:Math.round(parseFloat(c)||0);a.css(d);return b},borderWidth:function(a,c){a.jquery&&(a=a[0]);var b="border"+c.substr(0,1).toUpperCase()+c.substr(1);return"none"===f.css(a,b+"Style",!0)?0:Math.round(parseFloat(f.css(a,b+"Width",!0))||0)},isMouseOverElem:function(a,c){var b=f(c||this),d=b.offset(),e=d.top,d=d.left,n=d+b.outerWidth(),b=e+b.outerHeight(),p=a.pageX,q=a.pageY;return f.layout.browser.msie&&0>p&&0>q||p>=d&&p<=n&&q>=e&&q<=b},msg:function(a,c,b,d){f.isPlainObject(a)&&window.debugData?
("string"===typeof c?(d=b,b=c):"object"===typeof b&&(d=b,b=null),b=b||"log( <object> )",d=f.extend({sort:!1,returnHTML:!1,display:!1},d),!0===c||d.display?debugData(a,b,d):window.console&&console.log(debugData(a,b,d))):c?alert(a):window.console?console.log(a):(c=f("#layoutLogger"),c.length||(c=f('<div id="layoutLogger" style="position: '+(f.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
c.css("left",f(window).width()-c.outerWidth()-5),f.ui.draggable&&c.draggable({handle:":first-child"})),c.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};(function(){var a=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||
[],a=c[1]||"",c=c[2]||0,b="msie"===a,d=document.compatMode,e=f.support,n=void 0!==e.boxSizing?e.boxSizing:e.boxSizingReliable,p=!b||!d||"CSS1Compat"===d||e.boxModel||!1,q=f.layout.browser={version:c,safari:"webkit"===a,webkit:"chrome"===a,msie:b,isIE6:b&&6==c,boxModel:p,boxSizing:!("function"===typeof n?!n():!n)};a&&(q[a]=!0);p||d||f(function(){q.boxModel=e.boxModel})})();f.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,
resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",
centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",
contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,
resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:f.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},
showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,
onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};f.layout.optionsMap=
{layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),
noDefault:["paneSelector","resizerCursor","customHotkey"]};f.layout.transformData=function(a,c){var b=c?{panes:{},center:{}}:{},d,e,n,p,q,r,t;if("object"!==typeof a)return b;for(e in a)for(d=b,q=a[e],n=e.split("__"),t=n.length-1,r=0;r<=t;r++)p=n[r],r===t?f.isPlainObject(q)?d[p]=f.layout.transformData(q):d[p]=q:(d[p]||(d[p]={}),d=d[p]);return b};f.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",
resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain",
"cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(a){function c(b,d){for(var h=b.split("."),e=h.length-1,m={branch:a,key:h[e]},f=0,k;f<e;f++)k=h[f],m.branch=void 0==m.branch[k]?d?m.branch[k]={}:{}:m.branch[k];return m}var b=f.layout.backwardCompatibility.map,
d,e,n,p;for(p in b)d=c(p),n=d.branch[d.key],void 0!==n&&(e=c(b[p],!0),e.branch[e.key]=n,delete d.branch[d.key])},renameAllOptions:function(a){var c=f.layout.backwardCompatibility.renameOptions;c(a);a.defaults&&("object"!==typeof a.panes&&(a.panes={}),f.extend(!0,a.panes,a.defaults),delete a.defaults);a.panes&&c(a.panes);f.each(f.layout.config.allPanes,function(b,d){a[d]&&c(a[d])});return a}};f.fn.layout=function(g){function h(a){if(!a)return!0;var c=a.keyCode;if(33>c)return!0;var b={38:"north",40:"south",
37:"west",39:"east"},d=a.shiftKey,h=a.ctrlKey,g,e,m,k;h&&37<=c&&40>=c&&u[b[c]].enableCursorHotkey?k=b[c]:(h||d)&&f.each(n.borderPanes,function(a,b){g=u[b];e=g.customHotkey;m=g.customHotkeyModifier;if((d&&"SHIFT"==m||h&&"CTRL"==m||h&&d)&&e&&c===(isNaN(e)||9>=e?e.toUpperCase().charCodeAt(0):e))return k=b,!1});if(!k||!D[k]||!u[k].closable||v[k].isHidden)return!0;ja(k);a.stopPropagation();return a.returnValue=!1}function m(a){if(J()){this&&this.tagName&&(a=this);var b;c(a)?b=D[a]:f(a).data("layoutRole")?
b=f(a):f(a).parents().each(function(){if(f(this).data("layoutRole"))return b=f(this),!1});if(b&&b.length){var d=b.data("layoutEdge");a=v[d];a.cssSaved&&k(d);if(a.isSliding||a.isResizing||a.isClosed)a.cssSaved=!1;else{var h={zIndex:u.zIndexes.resizer_normal+1},g={},e=b.css("overflow"),m=b.css("overflowX"),l=b.css("overflowY");"visible"!=e&&(g.overflow=e,h.overflow="visible");m&&!m.match(/(visible|auto)/)&&(g.overflowX=m,h.overflowX="visible");l&&!l.match(/(visible|auto)/)&&(g.overflowY=m,h.overflowY=
"visible");a.cssSaved=g;b.css(h);f.each(n.allPanes,function(a,c){c!=d&&k(c)})}}}}function k(a){if(J()){this&&this.tagName&&(a=this);var b;c(a)?b=D[a]:f(a).data("layoutRole")?b=f(a):f(a).parents().each(function(){if(f(this).data("layoutRole"))return b=f(this),!1});if(b&&b.length){a=b.data("layoutEdge");a=v[a];var d=a.cssSaved||{};a.isSliding||a.isResizing||b.css("zIndex",u.zIndexes.pane_normal);b.css(d);a.cssSaved=!1}}}var l=f.layout.browser,n=f.layout.config,p=f.layout.cssWidth,q=f.layout.cssHeight,
r=f.layout.getElementDimensions,t=f.layout.getElementStyles,s=f.layout.getEventObject,w=f.layout.parsePaneName,u=f.extend(!0,{},f.layout.defaults);u.effects=f.extend(!0,{},f.layout.effects);var v={id:"layout"+f.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},z={north:null,south:null,east:null,west:null,center:null},
y={data:{},set:function(a,c,b){y.clear(a);y.data[a]=setTimeout(c,b)},clear:function(a){var c=y.data;c[a]&&(clearTimeout(c[a]),delete c[a])}},A=function(a,c,b){var d=u;(d.showErrorMessages&&!b||b&&d.showDebugMessages)&&f.layout.msg(d.name+" / "+a,!1!==c);return!1},x=function(a,b,d){var h=b&&c(b),g=h?v[b]:v,e=h?u[b]:u,m=u.name,k=a+(a.match(/_/)?"":"_end"),l=k.match(/_end$/)?k.substr(0,k.length-4):"",n=e[k]||e[l],r="NC",p=[],q=h?D[b]:0;if(h&&!q)return r;h||"boolean"!==f.type(b)||(d=b,b="");if(n)try{c(n)&&
(n.match(/,/)?(p=n.split(","),n=eval(p[0])):n=eval(n)),f.isFunction(n)&&(r=p.length?n(p[1]):h?n(b,D[b],g,e,m):n(T,g,e,m))}catch(t){A(u.errors.callbackError.replace(/EVENT/,f.trim((b||"")+" "+k)),!1),"string"===f.type(t)&&string.length&&A("Exception:  "+t,!1)}d||!1===r||(h?(e=u[b],g=v[b],q.triggerHandler("layoutpane"+k,[b,q,g,e,m]),l&&q.triggerHandler("layoutpane"+l,[b,q,g,e,m])):(I.triggerHandler("layout"+k,[T,g,e,m]),l&&I.triggerHandler("layout"+l,[T,g,e,m])));h&&"onresize_end"===a&&Pa(b+"",!0);
return r},C=function(a){if(!l.mozilla){var c=D[a];"IFRAME"===v[a].tagName?c.css(n.hidden).css(n.visible):c.find("IFRAME").css(n.hidden).css(n.visible)}},L=function(a){var c=D[a];a=n[a].dir;c={minWidth:1001-p(c,1E3),minHeight:1001-q(c,1E3)};"horz"===a&&(c.minSize=c.minHeight);"vert"===a&&(c.minSize=c.minWidth);return c},H=function(a,b,d){var h=a;c(a)?h=D[a]:a.jquery||(h=f(a));a=q(h,b);h.css({height:a,visibility:"visible"});0<a&&0<h.innerWidth()?d&&h.data("autoHidden")&&(h.show().data("autoHidden",
!1),l.mozilla||h.css(n.hidden).css(n.visible)):d&&!h.data("autoHidden")&&h.hide().data("autoHidden",!0)},B=function(b,d,h){h||(h=n[b].dir);c(d)&&d.match(/%/)&&(d="100%"===d?-1:parseInt(d,10)/100);if(0===d)return 0;if(1<=d)return parseInt(d,10);var g=u,e=0;"horz"==h?e=K.innerHeight-(D.north?g.north.spacing_open:0)-(D.south?g.south.spacing_open:0):"vert"==h&&(e=K.innerWidth-(D.west?g.west.spacing_open:0)-(D.east?g.east.spacing_open:0));if(-1===d)return e;if(0<d)return a(e*d);if("center"==b)return 0;
h="horz"===h?"height":"width";g=D[b];b="height"===h?ea[b]:!1;var e=f.layout.showInvisibly(g),m=g.css(h),k=b?b.css(h):0;g.css(h,"auto");b&&b.css(h,"auto");d="height"===h?g.outerHeight():g.outerWidth();g.css(h,m).css(e);b&&b.css(h,k);return d},F=function(a,c){var b=D[a],d=u[a],h=v[a],g=c?d.spacing_open:0,d=c?d.spacing_closed:0;return!b||h.isHidden?0:h.isClosed||h.isSliding&&c?d:"horz"===n[a].dir?b.outerHeight()+g:b.outerWidth()+g},N=function(a,c){if(J()){var d=u[a],h=v[a],g=n[a],m=g.dir;g.sizeType.toLowerCase();
var g=void 0!=c?c:h.isSliding,f=d.spacing_open,k=n.oppositeEdge[a],l=v[k],r=D[k],p=!r||!1===l.isVisible||l.isSliding?0:"horz"==m?r.outerHeight():r.outerWidth(),k=(!r||l.isHidden?0:u[k][!1!==l.isClosed?"spacing_closed":"spacing_open"])||0,l="horz"==m?K.innerHeight:K.innerWidth,r=L("center"),r="horz"==m?e(u.center.minHeight,r.minHeight):e(u.center.minWidth,r.minWidth),g=l-f-(g?0:B("center",r,m)+p+k),m=h.minSize=e(B(a,d.minSize),L(a).minSize),g=h.maxSize=b(d.maxSize?B(a,d.maxSize):1E5,g),h=h.resizerPosition=
{},f=K.inset.top,p=K.inset.left,k=K.innerWidth,l=K.innerHeight,d=d.spacing_open;switch(a){case "north":h.min=f+m;h.max=f+g;break;case "west":h.min=p+m;h.max=p+g;break;case "south":h.min=f+l-g-d;h.max=f+l-m-d;break;case "east":h.min=p+k-g-d,h.max=p+k-m-d}}},G=function(a,c){var b=f(a),d=b.data("layoutRole"),h=b.data("layoutEdge"),g=u[h][d+"Class"],h="-"+h,e=b.hasClass(g+"-closed")?"-closed":"-open",m="-closed"===e?"-open":"-closed",e=g+"-hover "+(g+h+"-hover ")+(g+e+"-hover ")+(g+h+e+"-hover ");c&&
(e+=g+m+"-hover "+(g+h+m+"-hover "));"resizer"==d&&b.hasClass(g+"-sliding")&&(e+=g+"-sliding-hover "+(g+h+"-sliding-hover "));return f.trim(e)},E=function(a,c){var b=f(c||this);a&&"toggler"===b.data("layoutRole")&&a.stopPropagation();b.addClass(G(b))},O=function(a,c){var b=f(c||this);b.removeClass(G(b,!0))},M=function(a){a=f(this).data("layoutEdge");var c=v[a];f(document);c.isResizing||v.paneResizing||u.maskPanesEarly&&qa(a,{resizing:!0})},S=function(a,c){var b=c||this,d=f(b).data("layoutEdge"),h=
d+"ResizerLeave";f(document);y.clear(d+"_openSlider");y.clear(h);c?u.maskPanesEarly&&!v.paneResizing&&ka():y.set(h,function(){S(a,b)},200)},J=function(){return v.initialized||v.creatingLayout?!0:P()},P=function(a){var c=u;if(!I.is(":visible"))return!a&&l.webkit&&"BODY"===I[0].tagName&&setTimeout(function(){P(!0)},50),!1;if(!la("center").length)return A(c.errors.centerPaneMissing);v.creatingLayout=!0;f.extend(K,r(I,c.inset));ma();c.scrollToBookmarkOnLoad&&(a=self.location,a.hash&&a.replace(a.hash));
T.hasParentLayout?c.resizeWithWindow=!1:c.resizeWithWindow&&f(window).bind("resize."+X,U);delete v.creatingLayout;v.initialized=!0;d(T,f.layout.onReady);x("onload_end");return!0},R=function(a,c){var b=w.call(this,a),d=D[b];if(d){var h=ea[b],g=v[b],e=u[b],m=u.stateManagement||{},e=c?e.children=c:e.children;if(f.isPlainObject(e))e=[e];else if(!e||!f.isArray(e))return;f.each(e,function(a,c){f.isPlainObject(c)&&(c.containerSelector?d.find(c.containerSelector):h||d).each(function(){var a=f(this),d=a.data("layout");
if(!d){Z({container:a,options:c},g);if(m.includeChildren&&v.stateData[b]){var d=(v.stateData[b].children||{})[c.instanceKey],h=c.stateManagement||(c.stateManagement={autoLoad:!0});!0===h.autoLoad&&d&&(h.autoSave=!1,h.includeChildren=!0,h.autoLoad=f.extend(!0,{},d))}(d=a.layout(c))&&Q(b,d)}})})}},Z=function(a,c){var b=a.container,d=a.options,h=d.stateManagement,g=d.instanceKey||b.data("layoutInstanceKey");g||(g=(h&&h.cookie?h.cookie.name:"")||d.name);g=g?g.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,
"_"):"layout"+ ++c.childIdx;d.instanceKey=g;b.data("layoutInstanceKey",g);return g},Q=function(a,c){var b=D[a],d=z[a],h=v[a];f.isPlainObject(d)&&(f.each(d,function(a,c){c.destroyed&&delete d[a]}),f.isEmptyObject(d)&&(d=z[a]=null));c||d||(c=b.data("layout"));c&&(c.hasParentLayout=!0,b=c.options,Z(c,h),d||(d=z[a]={}),d[b.instanceKey]=c.container.data("layout"));T[a].children=z[a];c||R(a)},U=function(){var a=u,c=Number(a.resizeWithWindowDelay);10>c&&(c=100);y.clear("winResize");y.set("winResize",function(){y.clear("winResize");
y.clear("winResizeRepeater");var c=r(I,a.inset);c.innerWidth===K.innerWidth&&c.innerHeight===K.innerHeight||ua()},c);y.data.winResizeRepeater||ca()},ca=function(){var a=Number(u.resizeWithWindowMaxDelay);0<a&&y.set("winResizeRepeater",function(){ca();ua()},a)},da=function(){x("onunload_start");d(T,f.layout.onUnload);x("onunload_end")},V=function(a){a=a?a.split(","):n.borderPanes;f.each(a,function(a,c){var b=u[c];if(b.enableCursorHotkey||b.customHotkey)return f(document).bind("keydown."+X,h),!1})},
va=function(){function a(c){var b=u[c],d=u.panes;b.fxSettings||(b.fxSettings={});d.fxSettings||(d.fxSettings={});f.each(["_open","_close","_size"],function(a,h){var g="fxName"+h,e="fxSpeed"+h,m="fxSettings"+h,k=b[g]=b[g]||d[g]||b.fxName||d.fxName||"none",l=f.effects&&(f.effects[k]||f.effects.effect&&f.effects.effect[k]);"none"!==k&&u.effects[k]&&l||(k=b[g]="none");k=u.effects[k]||{};g=k.all||null;k=k[c]||null;b[e]=b[e]||d[e]||b.fxSpeed||d.fxSpeed||null;b[m]=f.extend(!0,{},g,k,d.fxSettings,b.fxSettings,
d[m],b[m])});delete b.fxName;delete b.fxSpeed;delete b.fxSettings}var c,b,d,h,m,k;g=f.layout.transformData(g,!0);g=f.layout.backwardCompatibility.renameAllOptions(g);if(!f.isEmptyObject(g.panes)){c=f.layout.optionsMap.noDefault;h=0;for(m=c.length;h<m;h++)d=c[h],delete g.panes[d];c=f.layout.optionsMap.layout;h=0;for(m=c.length;h<m;h++)d=c[h],delete g.panes[d]}c=f.layout.optionsMap.layout;var l=f.layout.config.optionRootKeys;for(d in g)h=g[d],0>f.inArray(d,l)&&0>f.inArray(d,c)&&(g.panes[d]||(g.panes[d]=
f.isPlainObject(h)?f.extend(!0,{},h):h),delete g[d]);f.extend(!0,u,g);f.each(n.allPanes,function(h,e){n[e]=f.extend(!0,{},n.panes,n[e]);b=u.panes;k=u[e];if("center"===e)for(c=f.layout.optionsMap.center,h=0,m=c.length;h<m;h++)d=c[h],g.center[d]||!g.panes[d]&&k[d]||(k[d]=b[d]);else k=u[e]=f.extend(!0,{},b,k),a(e),k.resizerClass||(k.resizerClass="ui-layout-resizer"),k.togglerClass||(k.togglerClass="ui-layout-toggler");k.paneClass||(k.paneClass="ui-layout-pane")});h=g.zIndex;l=u.zIndexes;0<h&&(l.pane_normal=
h,l.content_mask=e(h+1,l.content_mask),l.resizer_normal=e(h+2,l.resizer_normal));delete u.panes},la=function(a){a=u[a].paneSelector;if("#"===a.substr(0,1))return I.find(a).eq(0);var c=I.children(a).eq(0);return c.length?c:I.children("form:first").children(a).eq(0)},ma=function(a){w(a);f.each(n.allPanes,function(a,c){Y(c,!0)});Da();f.each(n.borderPanes,function(a,c){D[c]&&v[c].isVisible&&(N(c),na(c))});oa("center");f.each(n.allPanes,function(a,c){ra(c)})},Y=function(a,c){if(c||J()){var d=u[a],h=v[a],
g=n[a],f=g.dir,l="center"===a,r={},s=D[a],w,x;s?Ea(a,!1,!0,!1):ea[a]=!1;s=D[a]=la(a);if(s.length){s.data("layoutCSS")||s.data("layoutCSS",t(s,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));T[a]={name:a,pane:D[a],content:ea[a],options:u[a],state:v[a],children:z[a]};s.data({parentLayout:T,layoutPane:T[a],layoutEdge:a,layoutRole:"pane"}).css(g.cssReq).css("zIndex",u.zIndexes.pane_normal).css(d.applyDemoStyles?g.cssDemo:{}).addClass(d.paneClass+
" "+d.paneClass+"-"+a).bind("mouseenter."+X,E).bind("mouseleave."+X,O);g={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};
for(x in g)s.bind("layoutpane"+x.toLowerCase()+"."+X,T[g[x]||x]);wa(a,!1);l||(w=h.size=B(a,d.size),l=B(a,d.minSize)||1,x=B(a,d.maxSize)||1E5,0<w&&(w=e(b(w,x),l)),h.autoResize=d.autoResize,h.isClosed=!1,h.isSliding=!1,h.isResizing=!1,h.isHidden=!1,h.pins||(h.pins=[]));h.tagName=s[0].tagName;h.edge=a;h.noRoom=!1;h.isVisible=!0;sa(a);"horz"===f?r.height=q(s,w):"vert"===f&&(r.width=p(s,w));s.css(r);"horz"!=f&&oa(a,!0);v.initialized&&(Da(a),V(a));d.initClosed&&d.closable&&!d.initHidden?fa(a,!0,!0):d.initHidden||
d.initClosed?xa(a):h.noRoom||s.css("display","block");s.css("visibility","visible");d.showOverflowOnHover&&s.hover(m,k);v.initialized&&ra(a)}else D[a]=!1}},ra=function(a){var c=D[a],b=v[a],d=u[a];c&&(c.data("layout")&&Q(a,c.data("layout")),b.isVisible&&(v.initialized?ua():ya(a),d.triggerEventsOnLoad?x("onresize_end",a):Pa(a,!0)),d.initChildren&&d.children&&R(a))},sa=function(a){a=a?a.split(","):n.borderPanes;f.each(a,function(a,c){var b=D[c],d=W[c],h=v[c],g=n[c].side,e={};if(b){switch(c){case "north":e.top=
K.inset.top;e.left=K.inset.left;e.right=K.inset.right;break;case "south":e.bottom=K.inset.bottom;e.left=K.inset.left;e.right=K.inset.right;break;case "west":e.left=K.inset.left;break;case "east":e.right=K.inset.right}b.css(e);d&&h.isClosed?d.css(g,K.inset[g]):d&&!h.isHidden&&d.css(g,K.inset[g]+F(c))}})},Da=function(a){a=a?a.split(","):n.borderPanes;f.each(a,function(a,c){var b=D[c];W[c]=!1;aa[c]=!1;if(b){var b=u[c],d=v[c],h="#"===b.paneSelector.substr(0,1)?b.paneSelector.substr(1):"",g=b.resizerClass,
e=b.togglerClass,m="-"+c,k=T[c],l=k.resizer=W[c]=f("<div></div>"),k=k.toggler=b.closable?aa[c]=f("<div></div>"):!1;!d.isVisible&&b.slidable&&l.attr("title",b.tips.Slide).css("cursor",b.sliderCursor);l.attr("id",h?h+"-resizer":"").data({parentLayout:T,layoutPane:T[c],layoutEdge:c,layoutRole:"resizer"}).css(n.resizers.cssReq).css("zIndex",u.zIndexes.resizer_normal).css(b.applyDemoStyles?n.resizers.cssDemo:{}).addClass(g+" "+g+m).hover(E,O).hover(M,S).mousedown(f.layout.disableTextSelection).mouseup(f.layout.enableTextSelection).appendTo(I);
f.fn.disableSelection&&l.disableSelection();b.resizerDblClickToggle&&l.bind("dblclick."+X,ja);k&&(k.attr("id",h?h+"-toggler":"").data({parentLayout:T,layoutPane:T[c],layoutEdge:c,layoutRole:"toggler"}).css(n.togglers.cssReq).css(b.applyDemoStyles?n.togglers.cssDemo:{}).addClass(e+" "+e+m).hover(E,O).bind("mouseenter",M).appendTo(l),b.togglerContent_open&&f("<span>"+b.togglerContent_open+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",
c).addClass("content content-open").css("display","none").appendTo(k),b.togglerContent_closed&&f("<span>"+b.togglerContent_closed+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(k),Qa(c));Ia(c);d.isVisible?ha(c):(za(c),ta(c,!0))}});Aa()},wa=function(a,c){if(J()){var b=u[a],d=b.contentSelector,h=T[a],g=D[a],e;d&&(e=h.content=ea[a]=b.findNestedContent?g.find(d).eq(0):g.children(d).eq(0));e&&e.length?(e.data("layoutRole","content"),
e.data("layoutCSS")||e.data("layoutCSS",t(e,"height")),e.css(n.content.cssReq),b.applyDemoStyles&&(e.css(n.content.cssDemo),g.css(n.content.cssDemoPane)),g.css("overflowX").match(/(scroll|auto)/)&&g.css("overflow","hidden"),v[a].content={},!1!==c&&ya(a)):h.content=ea[a]=!1}},Ia=function(a){var c=f.layout.plugins.draggable;a=a?a.split(","):n.borderPanes;f.each(a,function(a,d){var h=u[d];if(!c||!D[d]||!h.resizable)return h.resizable=!1,!0;var g=v[d],e=u.zIndexes,m=n[d],k="horz"==m.dir?"top":"left",
l=W[d],r=h.resizerClass,p=0,q,t,s=r+"-drag",w=r+"-"+d+"-drag",Ra=r+"-dragging",B=r+"-"+d+"-dragging",V=r+"-dragging-limit",P=r+"-"+d+"-dragging-limit",z=!1;g.isClosed||l.attr("title",h.tips.Resize).css("cursor",h.resizerCursor);l.draggable({containment:I[0],axis:"horz"==m.dir?"y":"x",delay:0,distance:1,grid:h.resizingGrid,helper:"clone",opacity:h.resizerDragOpacity,addClasses:!1,zIndex:e.resizer_drag,start:function(a,c){h=u[d];g=v[d];t=h.livePaneResizing;if(!1===x("ondrag_start",d))return!1;g.isResizing=
!0;v.paneResizing=d;y.clear(d+"_closeSlider");N(d);q=g.resizerPosition;p=c.position[k];l.addClass(s+" "+w);z=!1;qa(d,{resizing:!0})},drag:function(a,c){z||(c.helper.addClass(Ra+" "+B).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),z=!0,g.isSliding&&D[d].css("zIndex",e.pane_sliding));var m=0;c.position[k]<q.min?(c.position[k]=q.min,m=-1):c.position[k]>q.max&&(c.position[k]=q.max,m=1);m?(c.helper.addClass(V+" "+P),window.defaultStatus=0<m&&d.match(/(north|west)/)||0>m&&d.match(/(south|east)/)?
h.tips.maxSizeWarning:h.tips.minSizeWarning):(c.helper.removeClass(V+" "+P),window.defaultStatus="");t&&Math.abs(c.position[k]-p)>=h.liveResizingTolerance&&(p=c.position[k],b(a,c,d))},stop:function(a,c){f("body").enableSelection();window.defaultStatus="";l.removeClass(s+" "+w);g.isResizing=!1;v.paneResizing=!1;b(a,c,d,!0)}})});var b=function(a,c,b,d){var h=c.position,g=n[b];a=u[b];c=v[b];var e;switch(b){case "north":e=h.top;break;case "west":e=h.left;break;case "south":e=K.layoutHeight-h.top-a.spacing_open;
break;case "east":e=K.layoutWidth-h.left-a.spacing_open}e-=K.inset[g.side];d?(!1!==x("ondrag_end",b)&&Ja(b,e,!1,!0),ka(!0),c.isSliding&&qa(b,{resizing:!0})):Math.abs(e-c.size)<a.liveResizingTolerance||(Ja(b,e,!1,!0),ga.each(Ka))}},Ka=function(){var a=f(this),c=a.data("layoutMask"),c=v[c];"IFRAME"==c.tagName&&c.isVisible&&a.css({top:c.offsetTop,left:c.offsetLeft,width:c.outerWidth,height:c.outerHeight})},qa=function(a,c){var b=n[a],d=["center"],h=u.zIndexes,g=f.extend({objectsOnly:!1,animation:!1,
resizing:!0,sliding:v[a].isSliding},c),e,m;g.resizing&&d.push(a);g.sliding&&d.push(n.oppositeEdge[a]);"horz"===b.dir&&(d.push("west"),d.push("east"));f.each(d,function(a,c){m=v[c];e=u[c];m.isVisible&&(e.maskObjects||!g.objectsOnly&&e.maskContents)&&Fa(c).each(function(){Ka.call(this);this.style.zIndex=m.isSliding?h.pane_sliding+1:h.pane_normal+1;this.style.display="block"})})},ka=function(a){if(a||!v.paneResizing)ga.hide();else if(!a&&!f.isEmptyObject(v.panesSliding)){a=ga.length-1;for(var c,b;0<=
a;a--)b=ga.eq(a),c=b.data("layoutMask"),u[c].maskObjects||b.hide()}},Fa=function(a){for(var c=f([]),b,d=0,h=ga.length;d<h;d++)b=ga.eq(d),b.data("layoutMask")===a&&(c=c.add(b));if(c.length)return c;c=D[a];b=v[a];var d=u[a],h=u.zIndexes,g,e,m,k,l;if(d.maskContents||d.maskObjects){for(l=0;l<(d.maskObjects?2:1);l++)g=d.maskObjects&&0==l,e=document.createElement(g?"iframe":"div"),m=f(e).data("layoutMask",a),e.className="ui-layout-mask ui-layout-mask-"+a,k=e.style,k.background="#FFF",k.position="absolute",
k.display="block",g?(e.src="about:blank",e.frameborder=0,k.border=0,k.opacity=0,k.filter="Alpha(Opacity='0')"):(k.opacity=0.001,k.filter="Alpha(Opacity='1')"),"IFRAME"==b.tagName?(k.zIndex=h.pane_normal+1,I.append(e)):(m.addClass("ui-layout-mask-inside-pane"),k.zIndex=d.maskZindex||h.content_mask,k.top=0,k.left=0,k.width="100%",k.height="100%",c.append(e)),ga=ga.add(e);a=ga}else a=f([]);return a},Ea=function(a,c,b,d){if(J()){a=w.call(this,a);var h=D[a],g=ea[a],e=W[a],m=aa[a];h&&f.isEmptyObject(h.data())&&
(h=!1);g&&f.isEmptyObject(g.data())&&(g=!1);e&&f.isEmptyObject(e.data())&&(e=!1);m&&f.isEmptyObject(m.data())&&(m=!1);h&&h.stop(!0,!0);var k=u[a],l=z[a],n=f.isPlainObject(l)&&!f.isEmptyObject(l);d=void 0!==d?d:k.destroyChildren;n&&d&&(f.each(l,function(a,c){c.destroyed||c.destroy(!0);c.destroyed&&delete l[a]}),f.isEmptyObject(l)&&(l=z[a]=null,n=!1));h&&c&&!n?h.remove():h&&h[0]&&(c=k.paneClass,d=c+"-"+a,c=[c,c+"-open",c+"-closed",c+"-sliding",d,d+"-open",d+"-closed",d+"-sliding"],f.merge(c,G(h,!0)),
h.removeClass(c.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+X),n&&g?(g.width(g.width()),f.each(l,function(a,c){c.resizeAll()})):g&&g.css(g.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),h.data("layout")||h.css(h.data("layoutCSS")).removeData("layoutCSS"));m&&m.remove();e&&e.remove();T[a]=D[a]=ea[a]=W[a]=aa[a]=!1;b||ua()}},Ba=function(a){var c=D[a],b=c[0].style;u[a].useOffscreenClose?
(c.data(n.offscreenReset)||c.data(n.offscreenReset,{left:b.left,right:b.right}),c.css(n.offscreenCSS)):c.hide().removeData(n.offscreenReset)},Ga=function(a){var c=D[a];a=u[a];var b=n.offscreenCSS,d=c.data(n.offscreenReset),h=c[0].style;c.show().removeData(n.offscreenReset);a.useOffscreenClose&&d&&(h.left==b.left&&(h.left=d.left),h.right==b.right&&(h.right=d.right))},xa=function(a,c){if(J()){var b=w.call(this,a),d=u[b],h=v[b],g=D[b],e=W[b];"center"===b||!g||h.isHidden||v.initialized&&!1===x("onhide_start",
b)||(h.isSliding=!1,delete v.panesSliding[b],e&&e.hide(),!v.initialized||h.isClosed?(h.isClosed=!0,h.isHidden=!0,h.isVisible=!1,v.initialized||Ba(b),oa("horz"===n[b].dir?"":"center"),(v.initialized||d.triggerEventsOnLoad)&&x("onhide_end",b)):(h.isHiding=!0,fa(b,!1,c)))}},ia=function(a,c,b,d){if(J()){a=w.call(this,a);var h=v[a],g=D[a];"center"!==a&&g&&h.isHidden&&!1!==x("onshow_start",a)&&(h.isShowing=!0,h.isSliding=!1,delete v.panesSliding[a],!1===c?fa(a,!0):ba(a,!1,b,d))}},ja=function(a,c){if(J()){var b=
s(a),d=w.call(this,a),h=v[d];b&&b.stopImmediatePropagation();h.isHidden?ia(d):h.isClosed?ba(d,!!c):fa(d)}},Ma=function(a,c){var b=v[a];Ba(a);b.isClosed=!0;b.isVisible=!1;c&&za(a)},fa=function(a,c,b,d){function h(){f.isMoving=!1;ta(g,!0);var a=n.oppositeEdge[g];v[a].noRoom&&(N(a),na(a));d||!v.initialized&&!m.triggerEventsOnLoad||(l||x("onclose_end",g),l&&x("onshow_end",g),r&&x("onhide_end",g))}var g=w.call(this,a);if("center"!==g)if(!v.initialized&&D[g])Ma(g,!0);else if(J()){var e=D[g],m=u[g],f=v[g],
k,l,r;I.queue(function(a){if(!e||!m.closable&&!f.isShowing&&!f.isHiding||!c&&f.isClosed&&!f.isShowing)return a();var d=!f.isShowing&&!1===x("onclose_start",g);l=f.isShowing;r=f.isHiding;delete f.isShowing;delete f.isHiding;if(d)return a();k=!b&&!f.isClosed&&"none"!=m.fxName_close;f.isMoving=!0;f.isClosed=!0;f.isVisible=!1;r?f.isHidden=!0:l&&(f.isHidden=!1);f.isSliding?Ha(g,!1):oa("horz"===n[g].dir?"":"center",!1);za(g);k?(La(g,!0),e.hide(m.fxName_close,m.fxSettings_close,m.fxSpeed_close,function(){La(g,
!1);f.isClosed&&h();a()})):(Ba(g),h(),a())})}},za=function(a){if(W[a]){var c=W[a],b=aa[a],d=u[a],h=v[a],g=n[a].side,e=d.resizerClass,m=d.togglerClass,k="-"+a;c.css(g,K.inset[g]).removeClass(e+"-open "+e+k+"-open").removeClass(e+"-sliding "+e+k+"-sliding").addClass(e+"-closed "+e+k+"-closed");h.isHidden&&c.hide();d.resizable&&f.layout.plugins.draggable&&c.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");b&&(b.removeClass(m+"-open "+m+k+"-open").addClass(m+
"-closed "+m+k+"-closed").attr("title",d.tips.Open),b.children(".content-open").hide(),b.children(".content-closed").css("display","block"));Na(a,!1);v.initialized&&Aa()}},ba=function(a,c,b,d){function h(){f.isMoving=!1;C(g);f.isSliding||oa("vert"==n[g].dir?"center":"",!1);ha(g)}if(J()){var g=w.call(this,a),e=D[g],m=u[g],f=v[g],k,l;"center"!==g&&I.queue(function(a){if(!e||!m.resizable&&!m.closable&&!f.isShowing||f.isVisible&&!f.isSliding)return a();if(f.isHidden&&!f.isShowing)a(),ia(g,!0);else{f.autoResize&&
f.size!=m.size?pa(g,m.size,!0,!0,!0):N(g,c);var n=x("onopen_start",g);if("abort"===n)return a();"NC"!==n&&N(g,c);if(f.minSize>f.maxSize)return Na(g,!1),!d&&m.tips.noRoomToOpen&&alert(m.tips.noRoomToOpen),a();c?Ha(g,!0):f.isSliding?Ha(g,!1):m.slidable&&ta(g,!1);f.noRoom=!1;na(g);l=f.isShowing;delete f.isShowing;k=!b&&f.isClosed&&"none"!=m.fxName_open;f.isMoving=!0;f.isVisible=!0;f.isClosed=!1;l&&(f.isHidden=!1);k?(La(g,!0),e.show(m.fxName_open,m.fxSettings_open,m.fxSpeed_open,function(){La(g,!1);f.isVisible&&
h();a()})):(Ga(g),h(),a())}})}},ha=function(a,c){var b=D[a],d=W[a],h=aa[a],g=u[a],e=v[a],m=n[a].side,k=g.resizerClass,l=g.togglerClass,p="-"+a;d.css(m,K.inset[m]+F(a)).removeClass(k+"-closed "+k+p+"-closed").addClass(k+"-open "+k+p+"-open");e.isSliding?d.addClass(k+"-sliding "+k+p+"-sliding"):d.removeClass(k+"-sliding "+k+p+"-sliding");O(0,d);g.resizable&&f.layout.plugins.draggable?d.draggable("enable").css("cursor",g.resizerCursor).attr("title",g.tips.Resize):e.isSliding||d.css("cursor","default");
h&&(h.removeClass(l+"-closed "+l+p+"-closed").addClass(l+"-open "+l+p+"-open").attr("title",g.tips.Close),O(0,h),h.children(".content-closed").hide(),h.children(".content-open").css("display","block"));Na(a,!e.isSliding);f.extend(e,r(b));v.initialized&&(Aa(),ya(a,!0));!c&&(v.initialized||g.triggerEventsOnLoad)&&b.is(":visible")&&(x("onopen_end",a),e.isShowing&&x("onshow_end",a),v.initialized&&x("onresize_end",a))},Ca=function(a){function c(){h.isClosed?h.isMoving||ba(d,!0):Ha(d,!0)}if(J()){var b=
s(a),d=w.call(this,a),h=v[d];a=u[d].slideDelay_open;"center"!==d&&(b&&b.stopImmediatePropagation(),h.isClosed&&b&&"mouseenter"===b.type&&0<a?y.set(d+"_openSlider",c,a):c())}},Oa=function(a){function c(){h.isClosed?Ha(d,!1):h.isMoving||fa(d)}if(J()){var b=s(a),d=w.call(this,a);a=u[d];var h=v[d],g=h.isMoving?1E3:300;"center"===d||h.isClosed||h.isResizing||("click"===a.slideTrigger_close?c():a.preventQuickSlideClose&&h.isMoving||a.preventPrematureSlideClose&&b&&f.layout.isMouseOverElem(b,D[d])||(b?y.set(d+
"_closeSlider",c,e(a.slideDelay_close,g)):c()))}},La=function(a,c){var b=D[a],d=v[a],h=u[a],g=u.zIndexes;c?(qa(a,{animation:!0,objectsOnly:!0}),b.css({zIndex:g.pane_animate}),"south"==a?b.css({top:K.inset.top+K.innerHeight-b.outerHeight()}):"east"==a&&b.css({left:K.inset.left+K.innerWidth-b.outerWidth()})):(ka(),b.css({zIndex:d.isSliding?g.pane_sliding:g.pane_normal}),"south"==a?b.css({top:"auto"}):"east"!=a||b.css("left").match(/\-99999/)||b.css({left:"auto"}),l.msie&&h.fxOpacityFix&&"slide"!=h.fxName_open&&
b.css("filter")&&1==b.css("opacity")&&b[0].style.removeAttribute("filter"))},ta=function(a,c){var b=u[a],d=W[a],h=b.slideTrigger_open.toLowerCase();if(d&&(!c||b.slidable)){h.match(/mouseover/)?h=b.slideTrigger_open="mouseenter":h.match(/(click|dblclick|mouseenter)/)||(h=b.slideTrigger_open="click");if(b.resizerDblClickToggle&&h.match(/click/))d[c?"unbind":"bind"]("dblclick."+X,ja);d[c?"bind":"unbind"](h+"."+X,Ca).css("cursor",c?b.sliderCursor:"default").attr("title",c?b.tips.Slide:"")}},Ha=function(a,
c){function b(c){y.clear(a+"_closeSlider");c.stopPropagation()}var d=u[a],h=v[a],g=u.zIndexes,e=d.slideTrigger_close.toLowerCase(),m=c?"bind":"unbind",f=D[a],k=W[a];y.clear(a+"_closeSlider");c?(h.isSliding=!0,v.panesSliding[a]=!0,ta(a,!1)):(h.isSliding=!1,delete v.panesSliding[a]);f.css("zIndex",c?g.pane_sliding:g.pane_normal);k.css("zIndex",c?g.pane_sliding+2:g.resizer_normal);e.match(/(click|mouseleave)/)||(e=d.slideTrigger_close="mouseleave");k[m](e,Oa);"mouseleave"===e&&(f[m]("mouseleave."+X,
Oa),k[m]("mouseenter."+X,b),f[m]("mouseenter."+X,b));c?"click"!==e||d.resizable||(k.css("cursor",c?d.sliderCursor:"default"),k.attr("title",c?d.tips.Close:"")):y.clear(a+"_closeSlider")},na=function(a,c,b,d){c=u[a];var h=v[a],g=n[a],e=D[a],m=W[a],k="vert"===g.dir,l=!1;if("center"===a||k&&h.noVerticalRoom)(l=0<=h.maxHeight)&&h.noRoom?(Ga(a),m&&m.show(),h.isVisible=!0,h.noRoom=!1,k&&(h.noVerticalRoom=!1),C(a)):l||h.noRoom||(Ba(a),m&&m.hide(),h.isVisible=!1,h.noRoom=!0);"center"!==a&&(h.minSize<=h.maxSize?
(h.size>h.maxSize?pa(a,h.maxSize,b,!0,d):h.size<h.minSize?pa(a,h.minSize,b,!0,d):m&&h.isVisible&&e.is(":visible")&&(b=h.size+K.inset[g.side],f.layout.cssNum(m,g.side)!=b&&m.css(g.side,b)),h.noRoom&&(h.wasOpen&&c.closable?c.autoReopen?ba(a,!1,!0,!0):h.noRoom=!1:ia(a,h.wasOpen,!0,!0))):h.noRoom||(h.noRoom=!0,h.wasOpen=!h.isClosed&&!h.isSliding,h.isClosed||(c.closable?fa(a,!0,!0):xa(a,!0))))},Ja=function(a,c,b,d,h){if(J()){a=w.call(this,a);var g=u[a],e=v[a];h=h||g.livePaneResizing&&!e.isResizing;"center"!==
a&&(e.autoResize=!1,pa(a,c,b,d,h))}},pa=function(a,c,d,h,g){function m(){for(var a="width"===z?s.outerWidth():s.outerHeight(),a=[{pane:k,count:1,target:c,actual:a,correct:c===a,attempt:c,cssSize:da}],b=a[0],h={},l="Inaccurate size after resizing the "+k+"-pane.";!b.correct;){h={pane:k,count:b.count+1,target:c};h.attempt=b.actual>c?e(0,b.attempt-(b.actual-c)):e(0,b.attempt+(c-b.actual));h.cssSize=("horz"==n[k].dir?q:p)(D[k],h.attempt);s.css(z,h.cssSize);h.actual="width"==z?s.outerWidth():s.outerHeight();
h.correct=c===h.actual;1===a.length&&(A(l,!1,!0),A(b,!1,!0));A(h,!1,!0);if(3<a.length)break;a.push(h);b=a[a.length-1]}t.size=c;f.extend(t,r(s));t.isVisible&&s.is(":visible")&&(V&&V.css(P,c+K.inset[P]),ya(k));!d&&!y&&v.initialized&&t.isVisible&&x("onresize_end",k);d||(t.isSliding||oa("horz"==n[k].dir?"":"center",y,g),Aa());b=n.oppositeEdge[k];c<E&&v[b].noRoom&&(N(b),na(b,!1,d));1<a.length&&A(l+"\nSee the Error Console for details.",!0,!0)}if(J()){var k=w.call(this,a),l=u[k],t=v[k],s=D[k],V=W[k],P=
n[k].side,z=n[k].sizeType.toLowerCase(),y=t.isResizing&&!l.triggerEventsDuringLiveResize,G=!0!==h&&l.animatePaneSizing,E,da;"center"!==k&&I.queue(function(a){N(k);E=t.size;c=B(k,c);c=e(c,B(k,l.minSize));c=b(c,t.maxSize);if(c<t.minSize)a(),na(k,!1,d);else{if(!g&&c===E)return a();t.newSize=c;!d&&v.initialized&&t.isVisible&&x("onresize_start",k);da=("horz"==n[k].dir?q:p)(D[k],c);if(G&&s.is(":visible")){var h=f.layout.effects.size[k]||f.layout.effects.size.all,h=l.fxSettings_size.easing||h.easing,r=u.zIndexes,
w={};w[z]=da+"px";t.isMoving=!0;s.css({zIndex:r.pane_animate}).show().animate(w,l.fxSpeed_size,h,function(){s.css({zIndex:t.isSliding?r.pane_sliding:r.pane_normal});t.isMoving=!1;delete t.newSize;m();a()})}else s.css(z,da),delete t.newSize,s.is(":visible")?m():t.size=c,a()}})}},oa=function(a,c,b){a=(a?a:"east,west,center").split(",");f.each(a,function(a,d){if(D[d]){var h=u[d],g=v[d],m=D[d],k=!0,n={},t=f.layout.showInvisibly(m),s={top:F("north",!0),bottom:F("south",!0),left:F("west",!0),right:F("east",
!0),width:0,height:0};s.width=K.innerWidth-s.left-s.right;s.height=K.innerHeight-s.bottom-s.top;s.top+=K.inset.top;s.bottom+=K.inset.bottom;s.left+=K.inset.left;s.right+=K.inset.right;f.extend(g,r(m));if("center"===d){if(!b&&g.isVisible&&s.width===g.outerWidth&&s.height===g.outerHeight)return m.css(t),!0;f.extend(g,L(d),{maxWidth:s.width,maxHeight:s.height});n=s;g.newWidth=n.width;g.newHeight=n.height;n.width=p(m,n.width);n.height=q(m,n.height);k=0<=n.width&&0<=n.height;if(!v.initialized&&h.minWidth>
s.width){var h=h.minWidth-g.outerWidth,s=u.east.minSize||0,w=u.west.minSize||0,B=v.east.size,V=v.west.size,z=B,P=V;0<h&&v.east.isVisible&&B>s&&(z=e(B-s,B-h),h-=B-z);0<h&&v.west.isVisible&&V>w&&(P=e(V-w,V-h),h-=V-P);if(0===h){B&&B!=s&&pa("east",z,!0,!0,b);V&&V!=w&&pa("west",P,!0,!0,b);oa("center",c,b);m.css(t);return}}}else{g.isVisible&&!g.noVerticalRoom&&f.extend(g,r(m),L(d));if(!b&&!g.noVerticalRoom&&s.height===g.outerHeight)return m.css(t),!0;n.top=s.top;n.bottom=s.bottom;g.newSize=s.height;n.height=
q(m,s.height);g.maxHeight=n.height;k=0<=g.maxHeight;k||(g.noVerticalRoom=!0)}k?(!c&&v.initialized&&x("onresize_start",d),m.css(n),"center"!==d&&Aa(d),!g.noRoom||g.isClosed||g.isHidden||na(d),g.isVisible&&(f.extend(g,r(m)),v.initialized&&ya(d))):!g.noRoom&&g.isVisible&&na(d);m.css(t);delete g.newSize;delete g.newWidth;delete g.newHeight;if(!g.isVisible)return!0;"center"===d&&(g=l.isIE6||!l.boxModel,D.north&&(g||"IFRAME"==v.north.tagName)&&D.north.css("width",p(D.north,K.innerWidth)),D.south&&(g||"IFRAME"==
v.south.tagName)&&D.south.css("width",p(D.south,K.innerWidth)));!c&&v.initialized&&x("onresize_end",d)}})},ua=function(a){w(a);if(I.is(":visible"))if(v.initialized){if(!0===a&&f.isPlainObject(u.outset)&&I.css(u.outset),f.extend(K,r(I,u.inset)),K.outerHeight){!0===a&&sa();if(!1===x("onresizeall_start"))return!1;var c,b,d;f.each(["south","north","east","west"],function(a,c){D[c]&&(b=u[c],d=v[c],d.autoResize&&d.size!=b.size?pa(c,b.size,!0,!0,!0):(N(c),na(c,!1,!0,!0)))});oa("",!0,!0);Aa();f.each(n.allPanes,
function(a,b){(c=D[b])&&v[b].isVisible&&x("onresize_end",b)});x("onresizeall_end")}}else P()},Pa=function(a,c){var b=w.call(this,a);u[b].resizeChildren&&(c||Q(b),b=z[b],f.isPlainObject(b)&&f.each(b,function(a,c){c.destroyed||c.resizeAll()}))},ya=function(a,c){if(J()){var b=w.call(this,a),b=b?b.split(","):n.allPanes;f.each(b,function(a,b){function d(a){return e(k.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function h(){var a=u[b].contentIgnoreSelector,a=m.nextAll().not(".ui-layout-mask").not(a||
":lt(0)"),c=a.filter(":visible"),g=c.filter(":last");l={top:m[0].offsetTop,height:m.outerHeight(),numFooters:a.length,hiddenFooters:a.length-c.length,spaceBelow:0};l.spaceAbove=l.top;l.bottom=l.top+l.height;l.spaceBelow=g.length?g[0].offsetTop+g.outerHeight()-l.bottom+d(g):d(m)}var g=D[b],m=ea[b],f=u[b],k=v[b],l=k.content;if(!g||!m||!g.is(":visible"))return!0;if(!m.length&&(wa(b,!1),!m))return;if(!1!==x("onsizecontent_start",b)){if(!k.isMoving&&!k.isResizing||f.liveContentResizing||c||void 0==l.top)h(),
0<l.hiddenFooters&&"hidden"===g.css("overflow")&&(g.css("overflow","visible"),h(),g.css("overflow","hidden"));g=k.innerHeight-(l.spaceAbove-k.css.paddingTop)-(l.spaceBelow-k.css.paddingBottom);m.is(":visible")&&l.height==g||(H(m,g,!0),l.height=g);v.initialized&&x("onsizecontent_end",b)}})}},Aa=function(b){b=(b=w.call(this,b))?b.split(","):n.borderPanes;f.each(b,function(b,d){var h=u[d],g=v[d],e=D[d],m=W[d],k=aa[d],l;if(e&&m){var r=n[d].dir,t=g.isClosed?"_closed":"_open",s=h["spacing"+t],w=h["togglerAlign"+
t],t=h["togglerLength"+t],B;if(0===s)m.hide();else{g.noRoom||g.isHidden||m.show();"horz"===r?(B=K.innerWidth,g.resizerLength=B,e=f.layout.cssNum(e,"left"),m.css({width:p(m,B),height:q(m,s),left:-9999<e?e:K.inset.left})):(B=e.outerHeight(),g.resizerLength=B,m.css({height:q(m,B),width:p(m,s),top:K.inset.top+F("north",!0)}));O(h,m);if(k){if(0===t||g.isSliding&&h.hideTogglerOnSlide){k.hide();return}k.show();if(!(0<t)||"100%"===t||t>B)t=B,w=0;else if(c(w))switch(w){case "top":case "left":w=0;break;case "bottom":case "right":w=
B-t;break;default:w=a((B-t)/2)}else e=parseInt(w,10),w=0<=w?e:B-t+e;if("horz"===r){var x=p(k,t);k.css({width:x,height:q(k,s),left:w,top:0});k.children(".content").each(function(){l=f(this);l.css("marginLeft",a((x-l.outerWidth())/2))})}else{var V=q(k,t);k.css({height:V,width:p(k,s),top:w,left:0});k.children(".content").each(function(){l=f(this);l.css("marginTop",a((V-l.outerHeight())/2))})}O(0,k)}v.initialized||!h.initHidden&&!g.isHidden||(m.hide(),k&&k.hide())}}})},Qa=function(a){if(J()){var c=w.call(this,
a);a=aa[c];var b=u[c];a&&(b.closable=!0,a.bind("click."+X,function(a){a.stopPropagation();ja(c)}).css("visibility","visible").css("cursor","pointer").attr("title",v[c].isClosed?b.tips.Open:b.tips.Close).show())}},Na=function(a,c){f.layout.plugins.buttons&&f.each(v[a].pins,function(b,d){f.layout.buttons.setPinState(T,f(d),a,c)})},I=f(this).eq(0);if(!I.length)return A(u.errors.containerMissing);if(I.data("layoutContainer")&&I.data("layout"))return I.data("layout");var D={},ea={},W={},aa={},ga=f([]),
K=v.container,X=v.id,T={options:u,state:v,container:I,panes:D,contents:ea,resizers:W,togglers:aa,hide:xa,show:ia,toggle:ja,open:ba,close:fa,slideOpen:Ca,slideClose:Oa,slideToggle:function(a){a=w.call(this,a);ja(a,!0)},setSizeLimits:N,_sizePane:pa,sizePane:Ja,sizeContent:ya,swapPanes:function(a,c){function b(a){var c=D[a],d=ea[a];return c?{pane:a,P:c?c[0]:!1,C:d?d[0]:!1,state:f.extend(!0,{},v[a]),options:f.extend(!0,{},u[a])}:!1}function d(a,c){if(a){var b=a.P,h=a.C,g=a.pane,m=n[c],l=f.extend(!0,{},
v[c]),r=u[c],p={resizerCursor:r.resizerCursor};f.each(["fxName","fxSpeed","fxSettings"],function(a,c){p[c+"_open"]=r[c+"_open"];p[c+"_close"]=r[c+"_close"];p[c+"_size"]=r[c+"_size"]});D[c]=f(b).data({layoutPane:T[c],layoutEdge:c}).css(n.hidden).css(m.cssReq);ea[c]=h?f(h):!1;u[c]=f.extend(!0,{},a.options,p);v[c]=f.extend(!0,{},a.state);b.className=b.className.replace(RegExp(r.paneClass+"-"+g,"g"),r.paneClass+"-"+c);Da(c);m.dir!=n[g].dir?(b=k[c]||0,N(c),b=e(b,v[c].minSize),Ja(c,b,!0,!0)):W[c].css(m.side,
K.inset[m.side]+(v[c].isVisible?F(c):0));a.state.isVisible&&!l.isVisible?ha(c,!0):(za(c),ta(c,!0));a=null}}if(J()){var h=w.call(this,a);v[h].edge=c;v[c].edge=h;if(!1===x("onswap_start",h)||!1===x("onswap_start",c))v[h].edge=h,v[c].edge=c;else{var g=b(h),m=b(c),k={};k[h]=g?g.state.size:0;k[c]=m?m.state.size:0;D[h]=!1;D[c]=!1;v[h]={};v[c]={};aa[h]&&aa[h].remove();aa[c]&&aa[c].remove();W[h]&&W[h].remove();W[c]&&W[c].remove();W[h]=W[c]=aa[h]=aa[c]=!1;d(g,c);d(m,h);g=m=k=null;D[h]&&D[h].css(n.visible);
D[c]&&D[c].css(n.visible);ua();x("onswap_end",h);x("onswap_end",c)}}},showMasks:qa,hideMasks:ka,initContent:wa,addPane:Y,removePane:Ea,createChildren:R,refreshChildren:Q,enableClosable:Qa,disableClosable:function(a,c){if(J()){var b=w.call(this,a),d=aa[b];d&&(u[b].closable=!1,v[b].isClosed&&ba(b,!1,!0),d.unbind("."+X).css("visibility",c?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(J()){a=w.call(this,a);var c=W[a];c&&c.data("draggable")&&(u[a].slidable=
!0,v[a].isClosed&&ta(a,!0))}},disableSlidable:function(a){if(J()){a=w.call(this,a);var c=W[a];c&&(u[a].slidable=!1,v[a].isSliding?fa(a,!1,!0):(ta(a,!1),c.css("cursor","default").attr("title",""),O(null,c[0])))}},enableResizable:function(a){if(J()){a=w.call(this,a);var c=W[a],b=u[a];c&&c.data("draggable")&&(b.resizable=!0,c.draggable("enable"),v[a].isClosed||c.css("cursor",b.resizerCursor).attr("title",b.tips.Resize))}},disableResizable:function(a){if(J()){a=w.call(this,a);var c=W[a];c&&c.data("draggable")&&
(u[a].resizable=!1,c.draggable("disable").css("cursor","default").attr("title",""),O(null,c[0]))}},allowOverflow:m,resetOverflow:k,destroy:function(a,c){f(window).unbind("."+X);f(document).unbind("."+X);"object"===typeof a?w(a):c=a;I.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(u.containerClass).unbind("."+X);ga.remove();f.each(n.allPanes,function(a,b){Ea(b,!1,!0,c)});I.data("layoutCSS")&&!I.data("layoutRole")&&I.css(I.data("layoutCSS")).removeData("layoutCSS");"BODY"===
K.tagName&&(I=f("html")).data("layoutCSS")&&I.css(I.data("layoutCSS")).removeData("layoutCSS");d(T,f.layout.onDestroy);da();for(var b in T)b.match(/^(container|options)$/)||delete T[b];T.destroyed=!0;return T},initPanes:J,resizeAll:ua,runCallbacks:x,hasParentLayout:!1,children:z,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===function(){va();var a=u,c=v;c.creatingLayout=!0;d(T,f.layout.onCreate);if(!1===x("onload_start"))return"cancel";var b=I[0],h=f("html"),g=K.tagName=b.tagName,e=
K.id=b.id,m=K.className=b.className,b=u,k=b.name,n={},p=I.data("parentLayout"),q=I.data("layoutEdge"),s=p&&q,w=f.layout.cssNum,B;K.ref=(b.name?b.name+" layout / ":"")+g+(e?"#"+e:m?".["+m+"]":"");K.isBody="BODY"===g;s||K.isBody||(g=I.closest("."+f.layout.defaults.panes.paneClass),p=g.data("parentLayout"),q=g.data("layoutEdge"),s=p&&q);I.data({layout:T,layoutContainer:X}).addClass(b.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(k in g)I.bind("layout"+k.toLowerCase()+
"."+X,T[g[k]||k]);s&&(T.hasParentLayout=!0,p.refreshChildren(q,T));I.data("layoutCSS")||(K.isBody?(I.data("layoutCSS",f.extend(t(I,"position,margin,padding,border"),{height:I.css("height"),overflow:I.css("overflow"),overflowX:I.css("overflowX"),overflowY:I.css("overflowY")})),h.data("layoutCSS",f.extend(t(h,"padding"),{height:"auto",overflow:h.css("overflow"),overflowX:h.css("overflowX"),overflowY:h.css("overflowY")}))):I.data("layoutCSS",t(I,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));
try{n={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};I.css(n);b.inset&&!f.isPlainObject(b.inset)&&(B=parseInt(b.inset,10)||0,b.inset={top:B,bottom:B,left:B,right:B});if(K.isBody)b.outset?f.isPlainObject(b.outset)||(B=parseInt(b.outset,10)||0,b.outset={top:B,bottom:B,left:B,right:B}):b.outset={top:w(h,"paddingTop"),bottom:w(h,"paddingBottom"),left:w(h,"paddingLeft"),right:w(h,"paddingRight")},h.css(n).css({height:"100%",border:"none",padding:0,margin:0}),l.isIE6?(I.css({width:"100%",height:"100%",
border:"none",padding:0,margin:0,position:"relative"}),b.inset||(b.inset=r(I).inset)):(I.css({width:"auto",height:"auto",margin:0,position:"absolute"}),I.css(b.outset)),f.extend(K,r(I,b.inset));else{var z=I.css("position");z&&z.match(/(fixed|absolute|relative)/)||I.css("position","relative");I.is(":visible")&&(f.extend(K,r(I,b.inset)),1>K.innerHeight&&A(b.errors.noContainerHeight.replace(/CONTAINER/,K.ref)))}w(I,"minWidth")&&I.parent().css("overflowX","auto");w(I,"minHeight")&&I.parent().css("overflowY",
"auto")}catch(y){}V();f(window).bind("unload."+X,da);d(T,f.layout.onLoad);a.initPanes&&P();delete c.creatingLayout;return v.initialized}()?null:T}})(jQuery);
(function(f){"function"===typeof define&&define.amd?define(["jquery"],f):"object"===typeof exports?f(require("jquery")):f(jQuery)})(function(f){function b(a){return c.raw?a:encodeURIComponent(a)}function e(b,g){var h;if(c.raw)h=b;else a:{var e=b;0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{e=decodeURIComponent(e.replace(a," "));h=c.json?JSON.parse(e):e;break a}catch(k){}h=void 0}return f.isFunction(g)?g(h):h}var a=/\+/g,c=f.cookie=function(a,g,h){if(void 0!==
g&&!f.isFunction(g)){h=f.extend({},c.defaults,h);if("number"===typeof h.expires){var m=h.expires,k=h.expires=new Date;k.setTime(+k+864E5*m)}return document.cookie=[b(a),"=",b(c.json?JSON.stringify(g):String(g)),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}h=a?void 0:{};for(var m=document.cookie?document.cookie.split("; "):[],k=0,l=m.length;k<l;k++){var n=m[k].split("="),p;p=n.shift();p=c.raw?p:decodeURIComponent(p);
n=n.join("=");if(a&&a===p){h=e(n,g);break}a||void 0===(n=e(n))||(h[p]=n)}return h};c.defaults={};f.removeCookie=function(a,c){if(void 0===f.cookie(a))return!1;f.cookie(a,"",f.extend({},c,{expires:-1}));return!f.cookie(a)}});var __extends=this&&this.__extends||function(f,b){function e(){this.constructor=f}for(var a in b)b.hasOwnProperty(a)&&(f[a]=b[a]);e.prototype=b.prototype;f.prototype=new e};window.__extends=__extends;var RQArray=function(f){function b(){f.apply(this,arguments)}__extends(b,f);return b}(Array);
window.RQArray=RQArray;
(function(f,b){function e(a){var c=a||window.event,d=[].slice.call(arguments,1),g=0,e=0,p=0;a=f.event.fix(c);a.type="mousewheel";c.wheelDelta&&(g=c.wheelDelta/120);c.detail&&(g=-c.detail/3);p=g;c.axis!==b&&c.axis===c.HORIZONTAL_AXIS&&(p=0,e=-1*g);c.wheelDeltaY!==b&&(p=c.wheelDeltaY/120);c.wheelDeltaX!==b&&(e=-1*c.wheelDeltaX/120);d.unshift(a,g,e,p);return(f.event.dispatch||f.event.handle).apply(this,d)}var a=["DOMMouseScroll","mousewheel"];if(f.event.fixHooks)for(var c=a.length;c;)f.event.fixHooks[a[--c]]=f.event.mouseHooks;
f.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var c=a.length;c;)this.addEventListener(a[--c],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var c=a.length;c;)this.removeEventListener(a[--c],e,!1);else this.onmousewheel=null}};f.fn.mousewheel==b&&f.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});if(f.observable==b){f.observable=
function(a){return new g(a)};var d=[].splice,g=f.observable.Observable=function(a){this.data=a};g.prototype={data:null,_set:function(a,c){var b=a.split("."),d=b.pop();this._get(b)[d]=c},_get:function(a){a="string"===f.type(a)?a.split("."):a;var c,b=this.data;if(0===a.length)return b;for(;1<a.length;)c=a.shift(),b=b[c];return b[a[0]]},property:function(a,c){if("object"===f.type(a)){var b={},d={},g=!1,e;for(e in a){var q=this._get(e);q!=a[e]&&(g=!0,b[e]=q,d[e]=a[e])}if(g)return this._property(b,d)}else{if(1==
arguments.length)return this._get(a);q=this._get(a);if(q!=c)return b={},b[a]=q,d={},d[a]=c,this._property(b,d)}return this},_property:function(a,c){var b=this;f.each(c,function(a,c){b._set(a,c)});return this._trigger("change",{oldValues:a,newValues:c})},insert:function(a,c){"object"===f.type(a)?(c=[a],a=this.data.length):f.isArray(c)||(c=[c]);return this._insert(a,c)},_insert:function(a,c){this.data.splice.apply(this.data,[a,0].concat(c));return this._trigger("insert",{index:a,items:c})},remove:function(a,
c){var b=!1;if("array"===f.type(a)){var d,g,e,q,b=[],r=a;d=0;for(e=this.data.length;d<e;d++)for(g=0,q=r.length;g<q;g++)if(r[g]===this.data[d]){b.push({index:d,item:this.data[g]});break}d=g=0;for(e=b.length;d<e;d++)this.data.splice(b[d].index-g,1),g+=1;return this._trigger("remove",{items:b})}"number"===f.type(a)&&a<=this.data.length-1&&(b=!0);if("object"===f.type(a))for(d=0,e=this.data.length;d<e;d++)if(this.data[d]===a){a=d;b=!0;break}c||(c=1);return this._remove(a,c,b)},_remove:function(a,c,b){if(!0==
b)return b=this.data.slice(a,a+c),this.data.splice(a,c),this._trigger("remove",{index:a,items:b})},replaceAll:function(a){var c={oldItems:this.data.slice(0),newItems:a};d.apply(this.data,[0,this.data.length].concat(a));return this._trigger("replaceAll",c)}};f.each({bind:"bind",unbind:"unbind",_trigger:"triggerHandler"},function(a,c){g.prototype[a]=function(){var a=f([this.data]);a[c].apply(a,arguments);return this}})}})(jQuery);void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){RadiantQ.RQ_CollectionChangeNotifier=function(b){RQArray.call(this);if(b&&b.length){this.length=b.length;for(var e=0,a=b.length;e<a;e++)this[e]=b[e]}this.CollectionChanged=new ObjectEvent("CollectionChanged")};RadiantQ.RQ_CollectionChangeNotifier.prototype=new RQArray;RadiantQ.RQ_CollectionChangeNotifier.prototype.add=function(b){this.push(b)};RadiantQ.RQ_CollectionChangeNotifier.prototype.reset=function(b){if(b&&b.length){this.clear();this.length=b.length;for(var e=0,a=b.length;e<a;e++)this[e]=
b[e];this.CollectionChanged.raise({type:"reset",sender:this,target:this},null)}else b&&(this.length=b.length)};RadiantQ.RQ_CollectionChangeNotifier.prototype.contains=function(b){return-1!=f.inArray(b,this)};RadiantQ.RQ_CollectionChangeNotifier.prototype.push=function(b){RQArray.prototype.push.call(this,b);this.triggerCollectionChanged({Action:"Add",NewItems:[b],index:this.length-1})};RadiantQ.RQ_CollectionChangeNotifier.prototype.insert=function(b,e){"number"==typeof b?this.splice(b,0,e):this.add(b)};
RadiantQ.RQ_CollectionChangeNotifier.prototype.splice=function(b,e,a){var c=[],d=[];void 0==a?c=RQArray.prototype.splice.call(this,b,e):(c=RQArray.prototype.splice.apply(this,arguments),d=this.slice(b,arguments.length-2+b));!1==RadiantQ.CanUseDefineProperty&&void 0!=this[b]&&delete this[this.length];if(a){var g={Action:"Add"};g.index=b;g.NewItems=0==d.length?a:d;this.triggerCollectionChanged(g)}e&&0<e&&(g={Action:"Remove"},g.index=b,g.OldItems=c,this.triggerCollectionChanged(g))};RadiantQ.RQ_CollectionChangeNotifier.prototype.merge=
function(b,e){if(!1==e instanceof Array||e instanceof RQArray)e=[e];var a=e.slice(0);a.splice(0,0,b,0);RQArray.prototype.splice.apply(this,a);e&&(a={Action:"Add"},a.index=b,a.NewItems=e instanceof Array||e instanceof RQArray?e:[e],this.triggerCollectionChanged(a))};RadiantQ.RQ_CollectionChangeNotifier.prototype.pop=function(){var b=RQArray.prototype.pop.call(this);args={};b&&(args.Action="Remove",args.index=this.length,args.OldItems=[b]);this.triggerCollectionChanged(args);return b};RadiantQ.RQ_CollectionChangeNotifier.prototype.remove=
function(b){if("number"==typeof b)return this.splice(b,1);b=this.indexOf(b);if(-1!=b)return this.splice(b,1)};RadiantQ.RQ_CollectionChangeNotifier.prototype.clear=function(){this.splice(0,this.length)};RadiantQ.RQ_CollectionChangeNotifier.prototype.triggerCollectionChanged=function(b){var e={type:"",sender:this,target:this};"Add"==b.Action?(e.type="insert",b.items=b.NewItems):(e.type="remove",b.items=b.OldItems);this.CollectionChanged.raise(e,b)}})(jQuery);
(function(f){var b=f(document);if(f.fn.menu){f.jQContextMenu=function(d,g){this.options;var h=f.extend({selector:null,target:null,beforeContextMenu:null,itemClick:null,position:c},g);this.options=h;this.options.menuParent=null;this.options.menuElement=null;this.options.menuWidget=null;this.options.menuLayer=null;this.options.currentElement=null;b.on("contextmenu."+h.selector,h.selector,this.options,a.contextMenuHandler);e(this.options);this.hide=function(){"block"==this.options.menuParent.style("display")&&
a.hideMenu()};this.Dispose=function(){f(d).data("jQContextMenu",null);b.off("contextmenu."+h.selector)}};f.fn.jQContextMenu=function(a){var c=this.data("jQContextMenu");if(a.x&&a.y)this.first().trigger(jQuery.Event("contextmenu",{pageX:a.x,pageY:a.y}));else if("hide"==a&&c)c.hide();else if(void 0==c||void 0!=a.selector&&c.options.selector!=a.selector)c=new f.jQContextMenu(this,a),this.data("jQContextMenu",c),a.selector&&f(a.selector).data("jQContextMenu",c);return this};var e=function(c){var b=f(c.target),
h;0!=b.length?(c.menuElement=b,h=b.parent()):c.menuElement=f("<ul>");h&&"menuParent"==h[0].id?c.menuParent=h:(c.menuParent=f("<div id='menuParent' style='overflow: inherit; font-size: 12px; position: absolute;'>"),c.menuParent.append(c.menuElement).appendTo("body"),c.menuParent.hide(),c.menuParent.on("mouseleave",{options:c},a.onMenuMouseLeave),c.menuParent.on("mouseenter",{options:c},a.onMenuMouseEnter),c.menuElement.menu({select:a.menuSelectHandler}));c.menuWidget=c.menuElement.menu("instance");
b=f(window);c.menuLayer=f("#menuLayerDiv","body");0==c.menuLayer.length&&(c.menuLayer=f('<div id="menuLayerDiv" style="position:fixed; top:0; left:0; filter: alpha(opacity=0); opacity: 0; background-color: #000;"></div>'),c.menuLayer.css({height:b.height(),width:b.width(),display:"block"}),c.menuLayer.insertBefore(c.menuParent),c.menuLayer.on("contextmenu",{options:c},a.onLayerContextMenu),c.menuLayer.on("mousedown",{options:c},a.onLayerMouseDown),b.on("resize",{options:c},a.onWinResize),c.menuLayer.hide())},
a={options:null,contextMenuHandler:function(c){c.preventDefault();c.stopImmediatePropagation();var g=c.data;a.options=g;g.currentElement=f(c.currentTarget);g.menuWidget.target=f(c.target);0<=navigator.platform.toUpperCase().indexOf("MAC")&&g.currentElement.trigger("mouseup",[{shiftKey:c.shiftKey||!1}]);var h=c.pageX;c=c.pageY;g.beforeContextMenu&&"function"==typeof g.beforeContextMenu&&g.beforeContextMenu(g.currentElement,g.menuWidget);if(0!=g.menuElement[0].children.length){f(window);var e=b[0].body.scrollHeight,
k=b[0].body.scrollWidth,l=g.menuParent.height(),n=g.menuParent.width();h+n>k&&(h=k-n);c+l>e&&(c=e-l);g.position(g,h,c);h=0;for(c=g.currentElement;h=Math.max(h,parseInt(c.css("z-index"),10)||0),c=c.parent(),c&&c.length&&!(-1<"html body".indexOf(c.prop("nodeName").toLowerCase())););h+=1;g.menuParent.css({"z-index":h});g.menuLayer.css({"z-index":h});g.menuParent.show();g.menuLayer.show();g.menuElement.focus();b.on("keydown",a.onDocKeyDown)}},menuSelectHandler:function(c,b){if(0<f("ul",b.item).length)return!1;
a.options.itemClick&&"function"==typeof a.options.itemClick&&a.options.itemClick(a.options.currentElement,{event:c,items:b.item});a.hideMenu()},onLayerContextMenu:function(a){a.preventDefault();a.stopImmediatePropagation()},onLayerMouseDown:function(c){c.preventDefault();c.stopImmediatePropagation();opn=c.data.options;opn.menuParent.hide();f(this).hide();b.off("keydown",a.onDocKeyDow)},onDocKeyDown:function(c){switch(c.keyCode){case 27:a.hideMenu()}},onMenuMouseEnter:function(a){a.data.options.menuElement.focus()},
onMenuMouseLeave:function(a){a.data.options.menuElement.blur()},onWinResize:function(a){var c=a.data.options;a=f(a.currentTarget);c.menuLayer.css({height:a.height(),width:a.width()})},hideMenu:function(){a.options.menuParent.hide();a.options.menuLayer.hide();b.off("keydown",a.onDocKeyDow)}},c=function(a,c,b){a.menuParent.css({top:b,left:c})}}})(jQuery);
(function(f){var b=/^[\],:{}\s]*$/,e=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,a=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,c=/(?:^|:|,)(?:\s*\[)+/g,d=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?Z/i,g=/\/Date\((\d+)(?:-\d+)?\)\//i,h=/"\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?-\d{2}:\d{2}"/,m=/\/Date\((-\d+)(?:-\d+)?\)\//i,k=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(:(\d{2})(\.\d*)?)/,l=/^(\d{4})-(\d{2})-(\d{2})/,n=/"(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:[.,](\d+))?Z"/gi,
p=/"\\\/Date\((\d+)(?:-\d+)?\)\\\/"/gi,q=/^(\d*.\d{2}:\d{2}:\d{2})$/,r=/^(\d{2}:\d{2}:\d{2})/,t=window.JSON&&window.JSON.parse?!0:!1,s=t&&"Y"===window.JSON.parse('{"x":9}',function(a,c){return"Y"});f.extend({parseJSON:function(w,u,v,z,y){try{RadiantQ.Gantt.Utils.InjectGetAndSetOnData.HoldTriggeringPropertyChange=!0;if("string"!==typeof w||!w)return null;null!=Date.prototype._toString&&-1==Date.prototype._toString.toString().indexOf("[native code]")&&console.error("Multiple references to 'date.js' is found. Correct this and ensure that there is only a single reference.");
w=f.trim(w);this.jsonDateConverter=function(a,c){var b=null;if("string"===typeof c&&(!y||0<=f.inArray(a,y))){if(q.test(c)||r.test(c))b=RQTimeSpan.parse(c);if(d.test(c)){b=new Date(c);if(isNaN(b)){var e=/^(\d{4})-(\d{2})-(\d{2})((T)(\d{2}):(\d{2})(:(\d{2})(\.\d*)?)?)?(Z)?$/;if(e="string"===typeof c&&c.match(e))b=new Date(+e[1],+e[2]-1,+e[3],+e[6]||0,+e[7]||0,+e[9]||0,parseInt(1E3*+e[10])||0),-1!=c.indexOf("Z")&&!0==v&&b.addMinutes(-(new Date).getTimezoneOffset())}"Invalid Date"!=b&&!0==v&&b.addMinutes(b.getTimezoneOffset())}else h.test(c)?
b=new Date(c):g.test(c)?b=new Date(parseInt(g.exec(c)[1],10)):m.test(c)?b=Date.MinValue:k.test(c)?b=Date.parse(c):l.test(c)&&(b=Date.parse(c))}return z&&(e=z.apply(this,[a,b||c]),null!=e)?e:b||c};if(b.test(w.replace(e,"@").replace(a,"]").replace(c,""))){if(s||t&&!0!==u)return window.JSON.parse(w,!0===u?this.jsonDateConverter:void 0);w=!0===u?w.replace(n,"new Date(parseInt('$1',10),parseInt('$2',10)-1,parseInt('$3',10),parseInt('$4',10),parseInt('$5',10),parseInt('$6',10),(function(s){return parseInt(s,10)||0;})('$7'))").replace(p,
"new Date($1)"):w;return(new Function("return "+w))()}f.error("Invalid JSON: "+w)}finally{RadiantQ.Gantt.Utils.InjectGetAndSetOnData.HoldTriggeringPropertyChange=!1}}})})(jQuery);
(function(f){function b(a,c){this.type=a;this.fn=[];this._thisArgs=[];this.handlers=[];"function"==typeof c&&(this.handlers.push(new b.handlerInfo(this,c,this)),this.fn.push(c),this._thisArgs.push(this))}function e(a,c,b){this.event=a;this.fn=c;this.DataContext=b}b.prototype.isSubscribed=function(a){return a?-1==f.inArray(a,this.fn)?!1:!0:0<this.fn.length?!0:!1};b.prototype.raise=function(a,c){for(var b=this.handlers.slice(0),g=0;g<b.length;g++){var h=b[g];"function"==typeof h.fn&&h.fn.apply(h.DataContext,
arguments)}};b.prototype.subscribe=function(a,c){c=c||this._callee||this;var d=new b.handlerInfo(this,a,c);this.handlers.push(d);this.fn.push(a);this._thisArgs.push(c);return d};b.prototype.unsubscribe=function(a,c){if(c)for(var b=0;b<this._thisArgs.length;b++){if(this._thisArgs[b]===c&&this.fn[b]==a){this.handlers[b]._makeObjectsNull();this.fn.splice(b,1);this._thisArgs.splice(b,1);this.handlers.splice(b,1);break}}else for(b=0;b<this.fn.length;b++)if(this.fn[b]===a){this.fn.splice(b,1);this._thisArgs.splice(b,
1);this.handlers.splice(b,1);break}};b.prototype.Dispose=b.prototype.clear=function(){for(var a=this.handlers.slice(0),c=0;c<a.length;c++)a[c].Dispose();b.call(this,this.type)};b.prototype.IsEqual=function(a){var c=null,b=null;if(!this.isSubscribed()&&a.isSubscribed()||this.isSubscribed()&&!a.isSubscribed())return!1;if(this.isSubscribed()&&a.isSubscribed()){c=this.fn;b=a.fn;if(this.fn.length!=a.fn.length)return!1;for(a=0;a<c.length;a++)if(c[a]!=b[a])return!1}return!0};e.prototype.Dispose=function(){null!=
this.event&&this.event.unsubscribe(this.fn,this.DataContext);this._makeObjectsNull()};e.prototype._makeObjectsNull=function(){this.DataContext=this.fn=this.event=null};b.handlerInfo=e;window.ObjectEvent=b})(jQuery);
(function(f,b){Template=function(b,a){var c=b.replace(/\\\}/g,"__CURLY__").replace(/\$\{([^}]*)\}/g,"#=($1)#").split("#"),d="var x=";for(i=0;i<c.length;i++){var g;g=c[i];g=0===i%2?"'"+g.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'":"="===g.charAt(0)?"+("+g.substring(1)+")+":";"+g+";x+=";d+=g}d+=";return x;";d=d.replace("__CURLY__","}");c=new Function("data",d);return a?c(a):c};getHasValue=function(e,a){for(var c=a.split("."),
d=0;d<c.length;d++)"undefined"!=typeof e&&(e=e[c[d]+"_M"]?e[c[d]+"_M"]():e[c[d]]);if(!0==b.isFunction(e))return!0;if(void 0==e)return!1};Template.hasValueInWindow=function(b){return!1==getHasValue(window,b)?!1:!0};Template.getterCache={};Template.getter=function(b,a){if(""==b)return"";var c=null;null==Template.getterCache[b]&&(c=" if(d."+b+" != undefined)  if(typeof(d."+b+") ==='function')   return d."+b+"(); else return d."+b+";else if("+Template.hasValueInWindow(b)+" ){ if(typeof "+b+" === 'function')    return "+
b+"(d); else return "+b+";}else return null;",c=Function("d",c),Template.getterCache[b]=c);c=Template.getterCache[b];return a?c(a):c};Template.setterCache={};Template.setter=function(b,a,c){var d=null;null==Template.setterCache[b]&&(d=" if(d."+b+" != undefined) if(typeof(d."+b+") ==='function') d."+b+"(value);else d."+b+"= value;else if("+Template.hasValueInWindow(b)+" ){ if(typeof "+b+" === 'function') "+b+"(d,value); else "+b+"=value;}else d."+b+"= value;",d=Function("d","value",d),Template.setterCache[b]=
d);d=Template.setterCache[b];return a?d(a,c):d};f.Default={};f.Default.Template={};f.Template=Template;f.Default.Template.ProjectGanttExpandableTextBlockTemplate=function(b){var a=/data.Activity.ActivityName/g;return b?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${data.Activity_M().ActivityName_M()}</div>'.replace(a,
b):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${data.Activity_M().ActivityName_M()}</div>'};f.Default.Template.FlexyGanttExpandableTextBlockTemplate=
function(b){var a=/name/g;return b?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'.replace(a,
b):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'};
ExpanderOnclick=function(e,a){var c=b(e).closest("tr"),d=c.closest("table.ui-grid-body-table").find("tbody").data("VWGrid"),c=d.GetDataFromRow(c);c instanceof f.FlexyGantt.FlexyNodeData?(c.HierarchicalItem._forceToCreateNewChildList=!0,c.HierarchicalItem.IsExpanded(!c.HierarchicalItem.IsExpanded()),c.HierarchicalItem._forceToCreateNewChildList=!1,d.RefreshItem(c)):c.IsExpanded_M(!c.IsExpanded_M());void 0!=a.stopPropagation&&a.stopPropagation()}})(RadiantQ,jQuery);
function NotifyPropertyChanged(){this.PropertyChanged=new ObjectEvent("PropertyChanged")}NotifyPropertyChanged.prototype.OnPropertyChanged=function(f,b,e){e?this.PropertyChanged.raise(this,{PropertyName:f,value:b,context:e}):this.PropertyChanged.raise(this,{PropertyName:f,value:b})};NotifyPropertyChanged.prototype.Dispose=function(){this.PropertyChanged&&this.PropertyChanged.Dispose();this.PropertyChanged=null};
function Binding(f,b,e,a,c,d,g){var h=b.split(".");1<h.length&&(f=RadiantQ.Gantt.Utils.getChildObject(f,b),b=h[h.length-1]);h=a.split(".");1<h.length&&(e=RadiantQ.Gantt.Utils.getChildObject(f,a),a=h[h.length-1]);this.source=f;this.sourcePropertyName=b;this.targetPropertyName=a;this.sourceProperty=f[b+"_M"]?b+"_M":b;this.targetProperty=e[a+"_M"]?a+"_M":a;this.converterFn=c;this.ConvertBack=this.Convert=null;this.target=e;this.targetKOSubscriberInstance=this.sourceKOSubscriberInstance=null;this.bindingMode=
void 0==d?"OneWay":d;this.ConverterContext=g;null!=this.converterFn&&(this.Convert=c.Convert?c.Convert:null,this.ConvertBack=c.ConvertBack?c.ConvertBack:null);this.targetChanging=this.sourceChanging=!1;var m=this;this.SourcePropertyChangeListener=function(a,c){c.PropertyName==m.sourcePropertyName&&(m.sourceChanging=!0,!1==m.targetChanging&&m.updateTarget(),m.sourceChanging=!1)};this.TargetPropertyChangeListener=function(a,c){c.PropertyName==m.targetPropertyName&&(m.targetChanging=!0,!1==m.sourceChanging&&
m.updateSource(),m.targetChanging=!1)};this.subscribePropchangeNotifier();m.sourceChanging=!0;this.updateTarget.apply(this,arguments);m.sourceChanging=!1;this.Dispose=function(){this._sourcePropertyChangedHandler?(this._sourcePropertyChangedHandler.Dispose(),this._sourcePropertyChangedHandler=null):this.sourceKOSubscriberInstance&&(this.sourceKOSubscriberInstance.dispose(),this.sourceKOSubscriberInstance=null);this.bindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&(this._targetPropertyChangedHandler?
(this._targetPropertyChangedHandler.Dispose(),this._targetPropertyChangedHandler=null):this.targetKOSubscriberInstance&&(this.targetKOSubscriberInstance.dispose(),this.targetKOSubscriberInstance=null))}}
Binding.prototype.subscribePropchangeNotifier=function(){var f=this;"function"===typeof this.source[this.sourcePropertyName]&&this.source[this.sourcePropertyName].subscribe&&(this.sourceKOSubscriberInstance=this.source[this.sourcePropertyName].subscribe(function(b){Binding.prototype.updateTarget.apply(f,arguments)}.bind(this)));null==this.sourceKOSubscriberInstance&&this.source.PropertyChanged&&(this._sourcePropertyChangedHandler=this.source.PropertyChanged.subscribe(this.SourcePropertyChangeListener,
this));if(this.bindingMode==RadiantQ.Gantt.BindingMode.TwoWay){"function"===typeof this.target[this.targetPropertyName]&&this.target[this.targetPropertyName].subscribe&&(this.targetKOSubscriberInstance=this.target[this.targetPropertyName].subscribe(function(b){Binding.prototype.updateSource.apply(f,arguments)}.bind(this)));if(!this.target.PropertyChanged)throw Error("Binding should be used with a source that is of type NotifyPropertyChanged");null==this.targetKOSubscriberInstance&&(this._targetPropertyChangedHandler=
this.target.PropertyChanged.subscribe(this.TargetPropertyChangeListener));if(!this.ConvertBack&&this.Convert)throw Error("Two Way binding requires ConvertBack");}};Binding.prototype.updateTarget=function(){this.updateValue(this.source,this.sourceProperty,this.target,this.targetProperty,this.Convert)};Binding.prototype.updateSource=function(){this.updateValue(this.target,this.targetProperty,this.source,this.sourceProperty,this.ConvertBack)};
Binding.prototype.updateValue=function(f,b,e,a,c){var d=null,g=this.ConverterContext||this,d="function"===typeof f[b]?f[b]():f[b];null!=c&&(d=c.call(g,d,f,e));if("function"===typeof e[a])e[a](d);else e[a]=d};
(function(f){void 0==window.RadiantQ&&(window.RadiantQ={});"undefined"==typeof Function.prototype.bind&&(Function.prototype.bind=function(a,c){return void 0==c?f.proxy(this,a):f.proxy(this,a,c)});if(Object.defineProperty){RadiantQ.CanUseDefineProperty=!0;try{Object.defineProperty({},"test",{get:function(){return!0}})}catch(b){RadiantQ.CanUseDefineProperty=!1}}else RadiantQ.CanUseDefineProperty=!1;RadiantQ.Gantt={};RadiantQ.Gantt.Widget={};RadiantQ.Gantt.Utils={};RadiantQ.Gantt.TimeScaleType={Minutes:90,
Hours:180,Days:270,Weeks:360,Months:450,Years:540,Custom:630};RadiantQ.Gantt.RoundToOptions={None:"None",Auto:"Auto",Minute:"Minute",FifteenMinutes:"FifteenMinutes",ThirtyMinutes:"ThirtyMinutes",Hour:"Hour",HalfDay:"HalfDay",Day:"Day"};RadiantQ.Gantt.DependencyType={FinishToStart:"FinishToStart",StartToStart:"StartToStart",FinishToFinish:"FinishToFinish",StartToFinish:"StartToFinish",None:"None"};RadiantQ.Gantt.RowDragBehavior={DragRowHeader:1,DragEntireRow:2,DragElement:3};RadiantQ.Gantt.TimeUnitsCache=
function(){this._timeUnitsByRange=new RadiantQ.Gantt.Dictionary;this.GetRangeString=function(a,c){return a.toString()+"-"+c.toString()};this.SetTimeUnitsCacheForRange=function(a,c,b){a=this.GetRangeString(a,c);4<this._timeUnitsByRange.Keys.length&&this._timeUnitsByRange.Remove(this._timeUnitsByRange.Keys[0]);this._timeUnitsByRange.Add(a,b)};this.GetTimeUnitsCacheForRange=function(a,c){var b=this.GetRangeString(a,c);return this._timeUnitsByRange.GetItemByKey(b)};this.ClearTimeUnitsCacheForRange=function(a,
c){var b=this.GetRangeString(a,c);this._timeUnitsByRange.Remove(b)}};RadiantQ.Gantt.CustomTimeScaleTypeHint=function(a,c){this.EquivalentUnits=a;this.EquivalentType=c;this.Clone=function(){var a=new RadiantQ.Gantt.CustomTimeScaleTypeHint;a.EquivalentType=this.EquivalentType;a.EquivalentUnits=this.EquivalentUnits;return a};this.IsEqual=function(a){if(this instanceof RadiantQ.Gantt.CustomTimeScaleTypeHint&&a instanceof RadiantQ.Gantt.CustomTimeScaleTypeHint)return null==this&&null==a?!0:null==this||
null==a||this.EquivalentType!=a.EquivalentType||this.EquivalentUnits!=a.EquivalentUnits?!1:!0}};RadiantQ.Gantt.TimeScaleHeaderDefinition=function(){NotifyPropertyChanged.apply(this,arguments);this.ProvideCustomTimeIntervals=new ObjectEvent("ProvideCustomTimeIntervals");this.ProvideCustomHeaderText=new ObjectEvent("ProvideCustomHeaderText");this.RenderCallBack=new ObjectEvent("RenderCallBack");this.TimeUnitsCache=new RadiantQ.Gantt.TimeUnitsCache;this._name=null;this.Type=RadiantQ.Gantt.TimeScaleType.Days;
this.CustomTimeScaleTypeHint=null;this.BaseTimeUnitWidth=25;this.BaseTimeScaleType=RadiantQ.Gantt.TimeScaleType.Hours;this.textFormat="";this.TextFormat_M=function(a){if(0==arguments.length)return this._textFormat;this._textFormat!=a&&(this._textFormat=a,this.OnPropertyChanged("TextFormat",a))};RadiantQ.CanUseDefineProperty?Object.defineProperty(this,"TextFormat",{get:function(){return this._textFormat},set:function(a){this._textFormat!=a&&(this._textFormat=a,this.OnPropertyChanged("TextFormat",a))},
enumerable:!0,configurable:!0}):this.TextFormat="";this.HeaderHeight=22;this.name=function(a){if(void 0==a)if(null==this._name||""==this._name)if(this.Type!=RadiantQ.Gantt.TimeScaleType.Custom)for(key in RadiantQ.Gantt.TimeScaleType){if(RadiantQ.Gantt.TimeScaleType[key]==this.Type)return key.toString()}else return new String;else return this._name;else this._name=a};this.Clone=function(){var a=new RadiantQ.Gantt.TimeScaleHeaderDefinition;a.CustomTimeScaleTypeHint=this.CustomTimeScaleTypeHint;a.HeaderHeight=
this.HeaderHeight;a.TextFormat=this.TextFormat;a.Type=this.Type;a.TimeUnitTemplate=this.TimeUnitTemplate;if(this.ProvideCustomHeaderText.isSubscribed())for(var c=0;c<this.ProvideCustomHeaderText.fn.length;c++)a.ProvideCustomHeaderText.subscribe(this.ProvideCustomHeaderText.fn[c]);if(this.ProvideCustomTimeIntervals.isSubscribed())for(c=0;c<this.ProvideCustomTimeIntervals.fn.length;c++)a.ProvideCustomTimeIntervals.subscribe(this.ProvideCustomTimeIntervals.fn[c]);return a};this.IsEqual=function(a){var c=
null,b=null;if(null==this&&null==a)return!0;if(null==this||null==a)return!1;if(null!=this.CustomTimeScaleTypeHint&&null!=a.CustomTimeScaleTypeHint){if(!this.CustomTimeScaleTypeHint.IsEqual(a.CustomTimeScaleTypeHint))return!1}else{if(this.HeaderHeight!=a.HeaderHeight||this.TextFormat!=a.TextFormat||this.Type!=a.Type||this.TimeUnitTemplate!=a.TimeUnitTemplate||!this.ProvideCustomHeaderText.IsEqual(a.ProvideCustomHeaderText))return!1;if(this.ProvideCustomHeaderText.IsEqual(a.ProvideCustomHeaderText)){c=
this.ProvideCustomHeaderText.fn;b=a.ProvideCustomHeaderText.fn;if(this.ProvideCustomHeaderText.fn.length!=a.ProvideCustomHeaderText.fn.length)return!1;for(var g=0;g<c.length;g++)if(c[g]!=b[g])return!1}}if(!this.ProvideCustomTimeIntervals.IsEqual(a.ProvideCustomTimeIntervals))return!1;if(this.ProvideCustomTimeIntervals.IsEqual(a.ProvideCustomTimeIntervals)){c=this.ProvideCustomTimeIntervals.fn;b=a.ProvideCustomTimeIntervals.fn;if(this.ProvideCustomTimeIntervals.fn.length!=a.ProvideCustomTimeIntervals.fn.length)return!1;
for(g=0;g<c.length;g++)if(c[g]!=b[g])return!1}return!0};this.IsGreater=function(a){var c=this.Type,b=a.Type;if(c==RadiantQ.Gantt.TimeScaleType.Custom){if(null==this.CustomTimeScaleTypeHint)throw"Encountered a Custom TimeScaleType header with CustomTimeScaleTypeHint not set in TimeScaleHeaderDefinition's > operator.";c=this.CustomTimeScaleTypeHint.EquivalentType}if(b==RadiantQ.Gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"Encountered a Custom TimeScaleType header with CustomTimeScaleTypeHint not set in TimeScaleHeaderDefinition's > operator.";
b=a.CustomTimeScaleTypeHint.EquivalentType}return c>b?!0:c!=b||this.Type!=RadiantQ.Gantt.TimeScaleType.Custom&&a.Type!=RadiantQ.Gantt.TimeScaleType.Custom?!1:(this.Type==RadiantQ.Gantt.TimeScaleType.Custom?this.CustomTimeScaleTypeHint.EquivalentUnits:1)>(a.Type==RadiantQ.Gantt.TimeScaleType.Custom?a.CustomTimeScaleTypeHint.EquivalentUnits:1)?!0:!1}};RadiantQ.Gantt.TimeScaleHeaderDefinition.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.ProvideCustomerHeaderTextEventArgs=function(a,c,b){this.dateTime=
a;this.Text=c;this.TooltipText=null;this.width=b};RadiantQ.Gantt.ProvideCustomTimeIntervalsEventArgs=function(a,c){this.ViewStartTime=a;this.ViewEndTime=c;this.TimeIntervals=[]};RadiantQ.Gantt.RoundDownDuration=function(a){var c=RadiantQ.Gantt.Utils.TimeComputingUtils,b=Date.today();a=b.addTimeSpan(a);a=this.RoundTimeDown(a,this.GetActualRoundToOption());return c.GetTimeSpan(b,a)};RadiantQ.Gantt.RoundDown=function(a){return this.RoundTimeDown(a,this.GetActualRoundToOption())};RadiantQ.Gantt.RoundTimeDown=
function(a,c){var b=a.getHours(),g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);switch(c){case RadiantQ.Gantt.RoundToOptions.HalfDay:if(g==a||g.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours())==a)break;return 12>b?a.Date():a.Date().addHours(12);case RadiantQ.Gantt.RoundToOptions.Day:return a.Date();case RadiantQ.Gantt.RoundToOptions.Hour:return b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,0,0);case RadiantQ.Gantt.RoundToOptions.ThirtyMinutes:if(g=a.getMinutes(),!(0==g||30>
g)&&(30==g||59>=g))return g=30,new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,g,0,DateTimeKind.Utc);case RadiantQ.Gantt.RoundToOptions.FifteenMinutes:g=a.getMinutes();if(0==g||15>g)g=0;else if(15==g||30>g)g=15;else if(30==g||45>g)g=30;else if(45==g||59>=g)g=45;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,g,0,DateTimeKind.Utc);case RadiantQ.Gantt.RoundToOptions.Minute:return b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,a.Minute,0,DateTimeKind.Utc)}return a};RadiantQ.Gantt.TimeSpanHeaderMouseTracker=
function(a){this.Headers=function(){return a};this.LatestPos=function(a){if(void 0==a){if(null!=this.xLatestPos)return this.xLatestPos}else this.xLatestPos=a};this.IsDragging=function(a){if(void 0==a){if(null!=this._isDragging)return this._isDragging}else this._isDragging=a,RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal=a,this._isDragging||this.OnDoneDragging()}};RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal=!1;RadiantQ.Gantt.TimeSpanHeaderZoomTracker=function(){this.StartDragging=
function(a,c){this.LatestPos(a);this.StartBTUW=c;this.IsDragging(!0);return!0};this.MouseMovedTo=function(a,c){if(this.IsDragging()){var b=this.LatestPos()-a;c._trigger("zoomed",this,this.StartBTUW-b/5)}};this.OnDoneDragging=function(){}};RadiantQ.Gantt.TimeSpanHeaderZoomTracker.prototype=new RadiantQ.Gantt.TimeSpanHeaderMouseTracker;RadiantQ.Gantt.TimeSpanHeaderScrollTracker=function(){this.StartDragging=function(a,c,b){this.LatestPos(a);this.StartBTUW=c;b.StartPanning();this.IsDragging(!0);return!0};
this.MouseMovedTo=function(a,c){if(this.IsDragging()){var b=this.LatestPos()-a;c.ScrollBy(b);this.LatestPos(a)}};this.OnDoneDragging=function(){}};RadiantQ.Gantt.TimeSpanHeaderScrollTracker.prototype=new RadiantQ.Gantt.TimeSpanHeaderMouseTracker;RadiantQ.Gantt.AnchorTimeToStartTimeConverter=function(){};RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime=function(a,c){c>RadiantQ.Gantt.TimeScaleType.Hours?a=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)).clone():c>RadiantQ.Gantt.TimeScaleType.Minutes?
a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),0,0):c==RadiantQ.Gantt.TimeScaleType.Minutes&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0));return a.clone()};RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert=function(a){var c=a.options.BaseTimeScaleType,b;if(!0==a.options.ResizeToFit)b=a.options.AnchorTime.clone();else{b=a.options.AnchorTime.clone();var g=0,g=RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal?a.options.ViewWidth/
2/a.options.BaseTimeUnitWidth:Math.ceil(a.options.ViewWidth/2/a.options.BaseTimeUnitWidth),g=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(c,g);b=b.clone().add({millisecond:-g.millisecond||g.milliseconds_M(),seconds:-g.seconds_M(),minutes:-g.minutes_M(),hours:-g.hours_M(),days:-g.days_M()})}a=null==a?c:a.GetBTSTToRenderAgainst();return b=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime(b,a)};RadiantQ.Gantt.AnchorTimeToEndTimeConverter=function(){};RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert=
function(a){var c=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(a),b=RadiantQ.Gantt.Utils.TimeComputingUtils,g=a.options.BaseTimeScaleType;a=Math.ceil(a.options.ViewWidth/a.options.BaseTimeUnitWidth);a=b.ConvertTimeUnitsToTimeSpan(g,a);c=c.addTimeSpan(a);return c=g==RadiantQ.Gantt.TimeScaleType.Minutes?b.CeilToNextMinute(c):g==RadiantQ.Gantt.TimeScaleType.Hours?b.CeilToNextHour(c):b.CeilToNextDay(c)};RadiantQ.Gantt.GanttChartPanningUtil=function(a,c,b){var g=RadiantQ.Gantt.Utils.TimeComputingUtils;
this.IntermediateAnchorTime=a.clone();this.CurAnchorTime=a.clone();this.BaseTimeScaleType=c;this.BaseTimeUnitWidth=b;this.AnchorTimeChanged=new ObjectEvent("AnchorTimeChanged");this.ApplyXChange=function(a){a=g.ConvertTimeUnitsToTimeSpan(this.BaseTimeScaleType,a/this.BaseTimeUnitWidth);this.IntermediateAnchorTime=this.IntermediateAnchorTime.addTimeSpan(a);a=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime(this.IntermediateAnchorTime,this.BaseTimeScaleType);a.equals(this.CurAnchorTime)||
(this.CurAnchorTime=a.clone(),this.AnchorTimeChanged.raise(this,null))}};RadiantQ.Gantt.ChartZoomOptions={None:0,ShowZoomSliderInHeader:1,MouseWheelZoomOnTimeScaleHeaders:2,MouseWheelZoomOnGanttChart:4,LeftMouseButtonDownDrag:8};RadiantQ.Gantt.ChartScrollOptions={None:0,LeftMouseButtonDownDrag:1,CtrlAndLeftMouseButtonDownDrag:2};RadiantQ.Gantt.CustomRangeInformationEventArgs=function(a,c){this.ViewStartTime=a;this.ViewEndTime=c;this.CustomRanges=[]};RadiantQ.Gantt.CustomRangeInfo=function(a,c,b){this.StartTime=
a;this.EndTime=c;if(c<a)throw"endTime cannot be earlier than startTime in a call to CustomRangeInfo constructor.";this.DataTemplate=b};RadiantQ.Gantt.CustomRangesInfos=function(){this.ProvideRepeatingCustomRanges=new ObjectEvent("ProvideRepeatingCustomRanges");this.DiscreetCustomRanges=new RadiantQ.RQ_CollectionChangeNotifier;this.RaiseProvideRepeatingCustomRanges=function(a){this.ProvideRepeatingCustomRanges.raise(this,a)}};RadiantQ.Gantt.CustomRangeTimeUnit=function(a,c,b){this.Width=a;this.CanvasLeft=
c;this.CustomRangeInfo=b};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings=function(a){this.AutoHidingTimeScaleHeaders=!0;this.MaximumTimeScaleHeadersCount=2;this.DefaultBottomHeaderWidth=-1;this.BottomHeaderMaxWidth=35;this.TopHeaderMinWidth=40;this.ResizeToFit=!1;var c=a,b=a;this.IsProjectGantt=!1;this.TimeScaleHeaders=function(a){if(void 0==a)return b;b=a};var g=null;this.BoundGantt=function(a){if(void 0==a)return g;if(g!=a){if(!f(a).hasClass("rq-ganttBase"))throw"Invalid Selector";g=f(a);
this.IsProjectGantt=null!=g.data("GanttControl");null!=g&&this.ApplySettingsOnGantt()}};this.SelectedHeaders=function(a){if(void 0==a)return c;c=a};this.Clone=function(){var a=new RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings(this.SelectedHeaders);a.AutoHidingTimeScaleHeaders=this.AutoHidingTimeScaleHeaders;a.TimeScaleHeaders(this.TimeScaleHeaders().Clone());a.BottomHeaderMaxWidth=this.BottomHeaderMaxWidth;a.DefaultBottomHeaderWidth=this.DefaultBottomHeaderWidth;a.MaximumTimeScaleHeadersCount=
this.MaximumTimeScaleHeadersCount;a.TopHeaderMinWidth=this.TopHeaderMinWidth;a.ResizeToFit=this.ResizeToFit;return a};this.IsEqual=function(a){if(null==this&&null==a)return!0;if(null==this||null==a||this.AutoHidingTimeScaleHeaders!=a.AutoHidingTimeScaleHeaders||this.BottomHeaderMaxWidth!=a.BottomHeaderMaxWidth||this.DefaultBottomHeaderWidth!=a.DefaultBottomHeaderWidth||this.MaximumTimeScaleHeadersCount!=a.MaximumTimeScaleHeadersCount||this.TopHeaderMinWidth!=a.TopHeaderMinWidth||this.ResizeToFit!=
a.ResizeToFit||!this.TimeScaleHeaders().IsEqual(a.TimeScaleHeaders())||this.SelectedHeaders().length!=a.SelectedHeaders().length)return!1;for(var c=0;c<this.SelectedHeaders().length;c++)if(-1==f.inArray(this.SelectedHeaders()[c],a.SelectedHeaders()))return!1;return!0};this.ConvertWidths=function(a,c,b){if(a==c)return b;switch(a){case RadiantQ.Gantt.TimeScaleType.Minutes:return c==RadiantQ.Gantt.TimeScaleType.Years?b/525600:c==RadiantQ.Gantt.TimeScaleType.Months?b/43200:c==RadiantQ.Gantt.TimeScaleType.Weeks?
b/10080:c==RadiantQ.Gantt.TimeScaleType.Days?b/1440:b/60;case RadiantQ.Gantt.TimeScaleType.Hours:return c==RadiantQ.Gantt.TimeScaleType.Years?b/8760:c==RadiantQ.Gantt.TimeScaleType.Months?b/720:c==RadiantQ.Gantt.TimeScaleType.Weeks?b/168:b/24;case RadiantQ.Gantt.TimeScaleType.Days:return c==RadiantQ.Gantt.TimeScaleType.Years?b/365:c==RadiantQ.Gantt.TimeScaleType.Months?b/30:b/7}return b};this.GetDefaultBottomHeaderWidth=function(){if(-1==this.DefaultBottomHeaderWidth){var a=RadiantQ.Gantt.TimeScaleType.Days;
0<this.SelectedHeaders().length&&(a=GetLastItemInArray(this.SelectedHeaders()).BaseTimeScaleType);switch(a){default:return 25;case TimeScaleType.Months:return 50;case TimeScaleType.Weeks:return 65;case TimeScaleType.Years:return 100}}else return this.DefaultBottomHeaderWidth};this.GetDefaultBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();if(0==a.length)return this.GetDefaultBottomHeaderWidth();var c=GetLastItemInArray(a).BaseTimeScaleType,c=RadiantQ.Gantt.AdjustBaseScaleType(c),a=GetLastItemInArray(a).Type;
return this.ConvertWidths(c,a,this.GetDefaultBottomHeaderWidth())};this.GetPreferredMaximumBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();if(0==a.length)return 40;var c=GetLastItemInArray(a).BaseTimeScaleType,c=RadiantQ.Gantt.AdjustBaseScaleType(c),a=GetLastItemInArray(a).Type;return this.ConvertWidths(c,a,this.BottomHeaderMaxWidth)};this.GetPreferredMinimumBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();if(0==a.length)return 20;var c=GetLastItemInArray(a).BaseTimeScaleType,c=
RadiantQ.Gantt.AdjustBaseScaleType(c);return this.ConvertWidths(c,a[0].Type,this.TopHeaderMinWidth)};this.UpdateHeadersOnZoom=function(){var a=this.SelectedHeaders();if(0!=a.lenght){var c=this.getGanttChartProperty("TimeScaleHeaders"),b=this.getGanttChartProperty("BaseTimeScaleType"),d=this.getGanttChartProperty("BaseTimeUnitWidth"),g=this.getGanttChartProperty("MinTimeUnitWidthForHeaderVisibility");if(!(null==GetLastItemInArray(a)||a.lenght<=this.MaximumTimeScaleHeadersCount))for(var e=0,q=a.length-
1;0<=q;q--)e<this.MaximumTimeScaleHeadersCount?(-1==f.inArray(a[q],c)&&c.insertInOrder(a[q]),RadiantQ.Gantt.IsHeaderViewable(a[q],b,d,g)&&e++):c.remove(a[q])}};this.ApplyTimeScaleHeaderSettings=function(){for(var a=new RadiantQ.Gantt.TimeScaleHeaderDefinitions,c=this.SelectedHeaders(),b=0;b<c.length;b++)a.insertInOrder(c[b]);this.BeginUpdate();this.setGanttChartProperty("TimeScaleHeaders",a)};this.ApplySettingsOnGantt=function(){if(1>this.MaximumTimeScaleHeadersCount)throw"MaximumTimeScaleHeadersCount cannot be less than 2.";
if(10>this.BottomHeaderMaxWidth||100<this.BottomHeaderMaxWidth)throw"BottomHeaderMaxWidth cannot be less than 10 or greater than 100.";if(10>this.TopHeaderMinWidth||400<this.TopHeaderMinWidth)throw"TopHeaderMinWidth cannot be less than 10 or greater than 400.";if(-1>this.DefaultBottomHeaderWidth||100<this.DefaultBottomHeaderWidth)throw"DefaultBottomHeaderWidth cannot be less than -1 or greater than 100.";if(null==this.TimeScaleHeaders())throw"TimeScaleHeaders in GanttChartTimeScaleHeaderSettings cannot be null when BoundGantt property is set.";
if(0==this.SelectedHeaders().length)throw"There are no selected TimeScaleHeaders to apply on the gantt in the call to ApplySettingsOnGantt.";this.ApplyTimeScaleHeaderSettings();var a=this.GetPreferredMinimumBaseTimeUnitWidth(),c=this.GetPreferredMaximumBaseTimeUnitWidth(),b=this.GetDefaultBaseTimeUnitWidth();b<a&&(b=a);b>c&&(b=c);this.BeginUpdate();this.setGanttChartProperty("BaseTimeUnitWidthMinimum",a);this.setGanttChartProperty("BaseTimeUnitWidthMaximum",c);this.setGanttChartProperty("BaseTimeUnitWidth",
b);this.setGanttChartProperty("ResizeToFit",this.ResizeToFit);this.EndUpdate();var d=this,a=this.BoundGantt();this.AutoHidingTimeScaleHeaders&&(!1==this.IsProjectGantt?a.bind("flexyganttbeforezooming",function(a,c){d.UpdateHeadersOnZoom()}):a.bind("ganttcontrolbeforezooming",function(a,c){d.UpdateHeadersOnZoom()}));(a=a.data("GanttBase"))&&a.CanAllowBTUW.subscribe(this.CanAllowBTUW,this);this.UpdateHeadersOnZoom()};this.CanAllowBTUW=function(a,c){var b=a.options,d=c.NewBTUW,g=this.SelectedHeaders();
-1==b.TimeScaleHeaders.indexOf(g[0])&&(d*=a.getCurrentTimeUnitsForBaseType(g[0]),c.Allow=d>=b.MinTimeUnitWidthForHeaderVisibility)};this.BeginUpdate=function(){this.CallGanttMethod("BeginUpdate")};this.EndUpdate=function(){this.CallGanttMethod("EndUpdate")}};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.getGanttChartProperty=function(a){var c=this.BoundGantt();return!1==this.IsProjectGantt?c.FlexyGantt("option",a):c.GanttControl("option",a)};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.CallGanttMethod=
function(a){var c=this.BoundGantt();!1==this.IsProjectGantt?c.FlexyGantt(a):c.GanttControl(a)};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.setGanttChartProperty=function(a,c){var b=this.BoundGantt();!1==this.IsProjectGantt?b.FlexyGantt("option",a,c):b.GanttControl("option",a,c)};ObservableCollection=function(){Array.apply(this,arguments);this.CollectionChanged=new ObjectEvent("CollectionChanged");f.observable(this).unbind("insert remove replaceAll",this.collectionChanged);f.observable(this).bind("insert remove replaceAll",
this.collectionChanged)};window.ObservableCollection=ObservableCollection;ObservableCollection.prototype=[];ObservableCollection.prototype.OnCollectionChanged=function(a,c){this.CollectionChanged.raise(a,c)};ObservableCollection.prototype.collectionChanged=function(a,c){a.target.OnCollectionChanged(a,c)};ObservableCollection.prototype.remove=function(a,c){var b=!1;if("number"===f.type(a))if(c){if("number"===f.type(c))for(var g=a;g<c;g++)if(void 0!=this[g])b=!0;else{b=!1;break}}else void 0!=this[a]&&
(b=!0);else"string"===f.type(a)?(g=f.inArray(a,this),-1!=g&&(b=!0,a=g)):-1!=f.inArray(a,this)&&(b=!0);b&&c?f.observable(this).remove(a,c):b&&f.observable(this).remove(a)};ObservableCollection.prototype.insert=function(a,c){f.observable(this).insert(a,c)};ObservableCollection.prototype.contains=function(a){return-1!=f.inArray(a,this)};ObservableCollection.prototype.replaceAll=function(a){f.observable(this).replaceAll(a)};ObservableCollection.prototype.clear=function(){0!=this.length&&this.remove(0,
this.length)};ObservableCollection.prototype.add=function(a){f.observable(this).insert(this.length,a)};ObservableCollection.prototype.indexOf=function(a,c){var b=this.length,g=Number(c)||0,g=0>g?Math.ceil(g):Math.floor(g);for(0>g&&(g+=b);g<b;g++)if(g in this&&this[g]===a)return g;return-1};RadiantQ.Gantt.TimeScaleHeaderDefinitions=function(){RadiantQ.RQ_CollectionChangeNotifier.apply(this,arguments);this.getById=function(a){if(this.isValidateIndex(a))return this[a]};this.getByType=function(a){for(var c=
0;c<this.length;c++){var b=this[c];if(b.Type==a)return b}};this.insertInOrder=function(a){for(var c=0;c<this.length;c++)if(!this[c].IsGreater(a)){this.insert(c,a);return}this.add(a)};this.removeType=function(a){if(a==RadiantQ.Gantt.TimeScaleType)throw"RemoveType is not supported for TimeScaleType.Custom type.";for(var c=0;c<this.length;c++){var b=this.getById(c);if(b.Type==a){this.remove(b);break}}};this.IsContentEqual=function(a){if(null==this&&null==a)return!0;if(null==this&&null!=a||null!=this&&
null==a||this.length!=a.length)return!1;for(var c=0;c<this.length;c++)if(!this.getById(c).IsEqual(a.getById(c)))return!1;return!0};this.Clone=function(){for(var a=new RadiantQ.Gantt.TimeScaleHeaderDefinitions,c=0;c<this.length;c++){var b=this[c].Clone();a.add(b)}return a};this.IsEqual=function(a){if(null==this&&null==a)return!0;if(null==this||null==a||this.length!=a.length)return!1;for(var c=0;c<this.length;c++)if(!this.getById(c).IsEqual(a.getById(c)))return!1;return!0};this.isValidateIndex=function(a){return this.length>
a}};RadiantQ.Gantt.TimeScaleHeaderDefinitions.prototype=new RadiantQ.RQ_CollectionChangeNotifier;RadiantQ.Gantt.BottomTwoHeaderDefinitions=function(){RadiantQ.Gantt.TimeScaleHeaderDefinitions.apply(this,arguments);this.UpdateIndexProperties=function(){for(var a=0,b=0;b<this.length;b++)this.SetIndex(this[b],a++)};var a=this;this.collectionChanged=function(c,b){"insert"==c.type?a.UpdateIndexProperties():a.remove(b.items[0])};this.CollectionChanged.isSubscribed()?this.CollectionChanged.unsubscribe(this.collectionChanged):
this.CollectionChanged.subscribe(this.collectionChanged);this.SetIndex=function(a,b){a.IndexProperty=b};this.remove=function(a){a.IndexProperty=-1}};RadiantQ.Gantt.BottomTwoHeaderDefinitions.GetIndex=function(a){return a.IndexProperty};RadiantQ.Gantt.BottomTwoHeaderDefinitions.prototype=new RadiantQ.Gantt.TimeScaleHeaderDefinitions;RadiantQ.Gantt.IsHeaderViewable=function(a,c,b,g){var h=a.Type,e=RadiantQ.Gantt.Utils.TimeComputingUtils,f=1;if(h==ns_gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw new "CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";
h=a.CustomTimeScaleTypeHint.EquivalentType;f=a.CustomTimeScaleTypeHint.EquivalentUnits}a=e.ConvertToApproxUnitsOfBaseType(c,h,f)*b;return Math.round(a)<g?!1:!0};RadiantQ.Gantt.AdjustBaseScaleType=function(a){return a>RadiantQ.Gantt.TimeScaleType.Days?RadiantQ.Gantt.TimeScaleType.Days:a};GetLastItemInArray=function(a){return a[a.length-1]};RemoveInArray=function(a,c){var b=RQArray.prototype.indexOf.call(a,c);-1!=b&&a.splice(b,1)};RadiantQ.Gantt.isModifierKeyIsPresed=function(a){return a.ctrlKey||a.shiftKey||
a.altKey||a.metaKey};RadiantQ.Gantt.addMethod=function(a,c,b){var g=a[c];a[c]=g?function(){if(b.length==arguments.length)return b.apply(this,arguments);if("function"==typeof g)return g.apply(this,arguments)}:b};(function(a){var c=function(a){function c(){a.apply(this,arguments);this.Type=this.Width=this.ToolTipText=this.TextFormat=this.Text=this.Tag=0;this.IsWorkingTime=!0;this._binding=null;this.BindingObject=function(a){if(void 0==a||null==a)return this._binding;null!=this._binding&&this._binding.Dispose();
this._binding=a};this._isHighlighted=!1;this.IsHighlighted=function(a){if(void 0==a||null==a)return this._isHighlighted;this._isHighlighted!=a&&(this._isHighlighted=a,this.OnPropertyChanged("IsHighlighted",a))}}__extends(c,a);return c}(NotifyPropertyChanged);a.TimeUnit=c})(RadiantQ.Gantt);RadiantQ.Gantt.SpecialLineInfo=function(){this.ToolTipText="";this.LineColor=void 0;this.LineDateTime=new Date;this.ClassName=""};RadiantQ.Gantt.CancellableActivityEventArgs=function(a){this._cancel=!0;this._activity=
a};RadiantQ.Gantt.CancellableActivityEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.Gantt.CancellableActivityEventArgs.prototype.Cancel_M=function(a){if(0==arguments.length)return this._cancel;this._cancel=a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.CancellableActivityEventArgs.prototype,"Activity",{get:function(){return this._activity}}),Object.defineProperty(RadiantQ.Gantt.CancellableActivityEventArgs.prototype,"Cancel",{get:function(){return this._cancel},
set:function(a){this._cancel=a}}));RadiantQ.Gantt.TimeRangeHighlightBehavior={None:0,HighlightInChartOnHeaderMouseHover:1};RadiantQ.Gantt.ActivityTimeChangeType={StartTimeChanged:"StartTimeChanged",DurationResized:"DurationResized"};RadiantQ.Gantt.ActivityTimeChangedEventArgs=function(a,c,b){this.Activity=a;this.Type=c;this.UserSpecifiedTime=b};RadiantQ.Gantt.SelectionMode={Multiple:"Multiple",Single:"Single"};RadiantQ.Gantt.TimeIndicatorLines={None:0,Always:1,OnHover:2,OnResize:3};RadiantQ.Gantt.SelectionChanged=
function(a,c){this.AddedItems=a;this.RemovedItems=c};RadiantQ.Gantt.DefaultStyles={};var e=RadiantQ.Gantt.DefaultStyles;e.direction=["top","bottom","right","left"];e.CreateCssTxt=function(a,c,b){var g=f.isArray(c);2==c.length&&(c.splice.apply(c,[1,0].concat(c[0])),c.push(c[c.length-1]));return f.map(e.direction,function(h,e){var f=void 0==b?a+"-"+h+":":a+"-"+h+"-"+b+":";return g?f+c[e]+";":f+c+";"}).toString().replace(/,/g,"")};e.ZeroMargin=function(){return e.CreateCss("margin","0px").toString()};
e.init=function(){var a=RadiantQ.Gantt.DefaultStyles;e.GanttTableTRStyleTxt=a.CreateCssTxt("padding","0px")+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border","0px","width");e.GanttTableTDStyleTxt=a.CreateCssTxt("padding",["0.2em","0.4em"])+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border",["0px","1px","1px","0px"],"width");e.ZeroStyle=a.CreateCssTxt("padding","0px")+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border","0px","width")+"border-collapse: collapse;border-spacing: 0;width:100%;height:100%;"};
document.mouseButtonPressed=!1})(jQuery);RadiantQ.ContextMenuImpl={};
(function(f){function b(a,c){tapHoldTimer=tapDownY=tapDownX=null;canShowContextMenu=!1;timeOutFunctions=null;var b=function(a){a=a.originalEvent.touches?a.originalEvent.touches[0]:a;var c=this;c.tapDownX=a.clientX;c.tapDownY=a.clientY;c.tapHoldTimer=setTimeout(function(){c.canShowContextMenu=!0},500)},g=function(){clearTimeout(tapHoldTimer)},h=function(a){if(!0==this.canShowContextMenu){var c=a.originalEvent.changedTouches?a.originalEvent.changedTouches[0]:a;this.tapDownX==c.clientX&&this.tapDownY==
c.clientY&&(clearTimeout(this.timeOutFunctions),this.timeOutFunctions=setTimeout(function(){var b=a.originalEvent;if("mouse"!=b.pointerType&&4!=b.pointerType){var d=f.ui?f.ui.version||"1.5.2":null;d&&1.11<=parseFloat(d)&&f.isFunction(f.jQContextMenu)?f(b.target).jQContextMenu({x:c.clientX,y:c.clientY}):f.isFunction(f.contextMenu)&&f(b.target).contextMenu({x:c.clientX,y:c.clientY})}},100));this.canShowContextMenu=!1}clearTimeout(this.tapHoldTimer)},e=f(a,c);e.on("touchstart",b.bind(this));e.on("touchend",
h.bind(this));e.on("touchmove",g.bind(this));e.on("MSPointerDown",b.bind(this));e.on("MSPointerUp",h.bind(this));e.on("MSPointerMove",g.bind(this))}var e=f.ui?f.ui.version||"1.5.2":null;e&&1.11<=parseFloat(e)&&f.isFunction(f.jQContextMenu)?RadiantQ.ContextMenuImpl.ContextMenu=function(a,c){var d=this;this.ItemClicked=new ObjectEvent("ItemClicked");this.BeforeContextMenu=new ObjectEvent("BeforeContextMenu");this.ContextHandler=new ObjectEvent("ContextHandler");this.selector=a;var g=this;this._position=
{x:0,y:0};this.updateMenuItemDetails=function(a,c){!0==a.disabled&&c.addClass("ui-state-disabled");a.icon&&c.find("span.icon").addClass(a.icon);f.isFunction(a.callback)&&d.ItemCallbacks.Add(a.keyName,a.callback)};this.getSubMenuItems=function(a){for(var c=f("<ul style='width:100%;'></ul>"),b=0;b<a.items.length;b++){var h=a.items[b],g=f("<div keyName='"+h.keyName+"'><li keyName='"+h.keyName+"' ><span class='icon' ></span><span>"+h.name+"</span></li></div>");if(h.items){var e=d.getSubMenuItems(h);g.append(e)}d.updateMenuItemDetails(h,
g);c.append(g)}return c};this.Items=new RadiantQ.Dictionary;this.ItemCallbacks=new RadiantQ.Dictionary;var h=f('<ul id="context-menu"></ul>');f(document.body).append(h);f(c).jQContextMenu({target:"#context-menu",beforeContextMenu:function(a,c){f("#context-menu").empty();var b={Context:a};d.ContextHandler.raise(b,c);a=b.Context;d.BeforeContextMenu.raise(a,c);if(g.Items&&0!=g.Items.length){for(var b=g.Items.asArray,h=0;h<b.length;h++){var e=b[h],q=f("<div keyName='"+e.keyName+"'><li keyName='"+e.keyName+
"' ><span class='icon' ></span><span>"+e.name+"</span></li></div>");if(e.items){var r=d.getSubMenuItems(e);q.append(r)}d.updateMenuItemDetails(e,q);f("#context-menu").append(q)}c.refresh();return!0}},selector:a,itemClick:function(a,c){var b=f(c.items[0]).attr("keyName"),h=d.ItemCallbacks.GetItemByKey(b),g={$trigger:a,args:c,Cancel:!1};h&&h(b,g);!0!=g.Cancel&&d.ItemClicked.raise(b,a)}});this.AddNewItems=function(a,c){if(!1==c){this.Items=new RadiantQ.Dictionary;var b=0}else b=0;for(;b<a.length;b++)this.Items.Add(a[b].keyName,
a[b])};b(a,c);this.Dispose=function(){var a=f(c).data("jQContextMenu");a&&a.Dispose&&a.Dispose();this.ItemClicked&&this.ItemClicked.Dispose&&this.ItemClicked.Dispose();this.BeforeContextMenu&&this.BeforeContextMenu.Dispose&&this.BeforeContextMenu.Dispose();this.Items&&this.Items.Dispose&&this.Items.Dispose();this.Items=this.BeforeContextMenu=this.ItemClicked=null};return this}:f.isFunction(f.contextMenu)&&(RadiantQ.ContextMenuImpl.ContextMenu=function(a,c){this.ItemClicked=new ObjectEvent("ItemClicked");
this.BeforeContextMenu=new ObjectEvent("BeforeContextMenu");this.selector=a;var d=this;this._position={x:0,y:0};this.Items=new RadiantQ.Dictionary;f.contextMenu&&f.contextMenu({selector:a,position:function(a,c,b){var e=f(document.body).width(),l=f(document.body).height(),n=c+a.$menu.width(),p=b+a.$menu.height();n>e&&(c=e-a.$menu.width()-10);p>l&&(b=l-a.$menu.height()-10);d._position={x:c,y:b};"function"==typeof d.position&&d.position(d._position);a.$menu.css({top:d._position.y,left:d._position.x})},
build:function(a,c){d.BeforeContextMenu.raise(a,c);if(d.Items&&0<d.Items.length){c.Cancel=!1;if(!0==c.Cancel)return!1;for(var b=d.Items.asArray,e=0;e<b.length;e++){var l=b[e].keyName||b[e].name;!0==b[e].separator?c.data.items["separator"+e]="separator"+e:c.data.items[l]={name:b[e].name,icon:b[e].icon,callback:b[e].callback,disabled:b[e].disabled,items:b[e].items}}}return void 0==c.data.items||f.isEmptyObject(c.data.items)?!1:{GetPosition:function(){return d._position},callback:function(a,c){d.ItemClicked.raise(a,
c.$trigger)}}}});this.AddNewItems=function(a,c){if(!1==c){this.Items=new RadiantQ.Dictionary;var b=0}else b=0;for(;b<a.length;b++)this.Items.Add(a[b].keyName,a[b])};b(a,c);this.Dispose=function(){f.contextMenu("destroy",this.selector);this.Items=this.BeforeContextMenu=this.ItemClicked=null};return this})})(jQuery);var EXPANDER_WIDTH=12;RadiantQ.Gantt.LevelToIndentWidth=function(f,b){var e;return e=0+(f*EXPANDER_WIDTH+EXPANDER_WIDTH)};function Expander(){this._isExpanded=!1}Expander.prototype=new NotifyPropertyChanged;
Expander.prototype.IsExpanded=function(f){if(null==f)return this._isExpanded;this._isExpanded!=f&&(this._isExpanded=f,this.OnPropertyChanged("IsExpanded"))};
(function(f){RadiantQ.FlexyGantt={};var b=RadiantQ.FlexyGantt;(function(b){var a=function(a){function b(d){a.apply(this,arguments);this._data=d.data;this.HierarchicalItem=d;var h=1;this._displayIndex=-1;this._guid=RadiantQ.Gantt.guidGenerator();var e,k;this.MaxOverlappingBlocksRowCount=function(a){if(void 0==a||null==a)return h;h!=a&&(h=a,this.OnPropertyChanged("MaxOverlappingBlocksRowCount",a,null,!1))};this._resetMaxOverlappingBlocksRowCount=function(){h=0};this.TableRow=function(a){if(void 0==
a||null==a)return e;if(!this.IsSelected)return 0;if(void 0!=e){this.IsSelected()&&this.addSelectionClassToTable(a);this.IsMouseIn()&&this.addHoverClassToTable(a);var c=f(e).height();this.RowHeight&&(c=this.RowHeight);f(a).height(c)}e=a;this.OnPropertyChanged("TableRow",a,null,!1)};this.ChartRow=function(a){if(void 0==a||null==a)return k;k=a;this.OnPropertyChanged("ChartRow",a,null,!1)};this._isSelected=!1;this.IsSelected=function(a){if(void 0==a||null==a)return this._isSelected;this._isSelected!=
a&&(this._isSelected=a,this.OnPropertyChanged("IsSelected",a,null,!1),this.UpdateSelection(a))};this._isMouseIn=!1;this.IsMouseIn=function(a){if(void 0==a||null==a)return this._isMouseIn;this._isMouseIn!=a&&(this._isMouseIn=a,this.UpdateHoverStyle(a))};this.DataPropertyChangeListener=function(a){this.OnPropertyChanged("Data")};this._data.PropertyChanged&&this._data.PropertyChanged.subscribe();this.Dispose=function(){this.DisplayIndex(-1);this._data.PropertyChanged&&this._data.PropertyChanged.unsubscribe(this.DataPropertyChangeListener)}}
__extends(b,a);return b}(NotifyPropertyChanged);b.FlexyNodeData=a})(b);b.FlexyNodeData.prototype.UpdateHoverStyle=function(b){if(!0==b&&void 0!=b)f(this.TableRow()).addClass("rq-row-hover ui-state-hover"),f(this.ChartRow()).find("td").addClass("rq-row-hover ui-state-hover");else if(!1==b||void 0==b)f(this.TableRow()).removeClass("rq-row-hover ui-state-hover"),f(this.ChartRow()).find("td").removeClass("rq-row-hover ui-state-hover")};b.FlexyNodeData.prototype.addSelectionClassToTable=function(b){b.addClass("rq-row-selected ui-state-active")};
b.FlexyNodeData.prototype.addHoverClassToTable=function(b){b.addClass("rq-row-hover ui-state-hover")};b.FlexyNodeData.prototype.UpdateSelection=function(b){if(!0==b&&void 0!=b)f(this.TableRow()).addClass("rq-row-selected ui-state-active"),f(this.ChartRow()).find("td").addClass("rq-row-selected ui-state-active");else if(!1==b||void 0==b)f(this.TableRow()).removeClass("rq-row-selected ui-state-active"),f(this.ChartRow()).find("td").removeClass("rq-row-selected ui-state-active")};b.FlexyNodeData.prototype.IsParentType=
function(){var b=this.HierarchicalItem.GetChildList();return null!=b&&void 0!=b&&(0<b.length||!0==this.HierarchicalItem._parent._fxGantt.ForceParentTemplateEvenIfChildless)?!0:!1};b.FlexyNodeData.prototype.IsExpandable=function(){return null!=this.HierarchicalItem._childItems&&0<this.HierarchicalItem._childItems.length};b.FlexyNodeData.prototype.Data=function(){return this._data};b.FlexyNodeData.prototype.DisplayIndex=function(b){if(null==b)return this._displayIndex;this._displayIndex!=b&&(this._displayIndex=
b,this.OnPropertyChanged("DisplayIndex",b,null,!1))};b.FlexyNodeData.prototype.Level=function(){return this.HierarchicalItem._level}})(jQuery);
(function(f){RQArray.prototype.indexOf||(RQArray.prototype.indexOf=function(b,a){var c=this.length,d=Number(a)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===b)return d;return-1});var b=RadiantQ.FlexyGantt;(function(b){var a=function(a){function b(d,h,e,k){a.apply(this,arguments);this.isExpanded=!1;this.data=e;this._level=k;this.isUpdatingChildListAsync=this._childListResolved=!1;this._resolvedChildList=null;this._parent=d;this._parentItem=h;this._childItems=new ObservableCollection;
this._forceToCreateNewChildList=!1;this._chartRow=this._tableRow=null;this._forceToBindtheEvents=!0;var l=this;this.notifyChange=function(a,c,b){l.OnPropertyChanged("Data."+a,b,c)};this.subscribChangeListener=function(a){for(var c in a){var b=a[c];if(!b)break;if(b.subscribe&&void 0!=b.getSubscriptionsCount&&0==b.getSubscriptionsCount())if(f.isArray(b())&&!this.isExpandable())for(var d=0;d<b().length;d++)this.subscribChangeListener(b()[d]);else b.subscribe(this.notifyChange.bind(b,c,a))}};this.subscribChangeListener(this.data);
this.listenChanges&&this.listenChanges(this.data);var n=!1;this.CanShowCue=function(a){if(void 0==a||null==a)return!1==n&&!1==this._parent._fxGantt.AutoExpandNodes?this.corrFlexyNodeData.IsParentType():n;n!=a&&(n=a,this.OnPropertyChanged("CanShowCue",a))};this.isSelected=!1;this.IsSelected=function(a){if(!0==a&&void 0!=a)f(this.TableRow).addClass("rq-row-selected ui-state-active"),f(this.ChartRow).addClass("rq-row-selected ui-state-active"),this.isSelected=!0;else if(!1==a&&void 0!=a)f(this.TableRow).removeClass("rq-row-selected ui-state-active"),
f(this.ChartRow).removeClass("rq-row-selected ui-state-active"),this.isSelected=!1;else if(void 0==a)return this.isSelected};this.isExpanding=!1}__extends(b,a);return b}(NotifyPropertyChanged);b.HierarchicalItem=a})(b);b.HierarchicalItem.prototype.ResourceSchedule_M=function(){if(null!=this._resourceSchedule)return this._resourceSchedule;var b=this._parent._fxGantt.RowRenderingScheduleBinding;if(b){var a=this._getNestedValue(this.data,b.Property);this._resourceSchedule=b.Converter?b.Converter.Convert.call(this.data,
a,b.Property):""==f.trim(a)?null:a;void 0===this._resourceSchedule&&(this._resourceSchedule=this._parent._fxGantt.WorkTimeSchedule)}else this._resourceSchedule=this._parent._fxGantt.WorkTimeSchedule;return this._resourceSchedule};b.HierarchicalItem.prototype._getNestedValue=function(b,a){for(var c=a.split("."),d=0;d<c.length;d++)"undefined"!=typeof b&&(b=b[c[d]+"_M"]?b[c[d]+"_M"]():b[c[d]]);return!0==f.isFunction(b)?b():b||""};b.HierarchicalItem.prototype.FlatItemsSource=function(){return this._parent.FlatItemsSource};
b.HierarchicalItem.prototype.FlatHierarchicalItemsList=function(){return this._parent.FlatHierarchicalItemsList};b.HierarchicalItem.prototype.isExpandable=function(){var b=this.GetChildList();return!0==this._forceToBindtheEvents&&void 0!=b&&null!=b?!0:void 0==b||null==b||0==b.length?!1:!0};b.HierarchicalItem.prototype.GetChildList=function(){!1==this._childListResolved?(this._childListResolved=!0,this._resolvedChildList=null,null!=this._parent._fnChildListResolver&&(this._resolvedChildList=this._parent._fnChildListResolver(this.data,
this))):null!=this._parent.dynamicResolver&&!0==this._forceToCreateNewChildList&&(this._forceToCreateNewChildList=!1,this._resolvedChildList=this._parent.dynamicResolver(this.data,this));return this._resolvedChildList};b.HierarchicalItem.prototype.IsExpanded=function(b){if(null==b)return this.isExpanded;if(this._parent._expansionStateHandler){var a=this._parent._expansionStateHandler(this.data);if(!1==a){var c=this.GetChildList();this.CanShowCue(c&&0<c.length)}if(void 0==a||null==a)a=b;b=a}this.isExpanded!=
b&&(!0==b?this.PrepareChildrenHierarchicalList(!0):(this._parent.ClearHierarchyFromList(this,!1),this.isExpanded=!1,this.OnPropertyChanged("IsExpanded",!1)),0!=this._parent.NodeExpansionStateChanged.fn.length&&this._parent.NodeExpansionStateChanged.raise(this));this._parent.IsCollapsed.raise(this)};b.HierarchicalItem.prototype.PrepareChildrenHierarchicalList=function(b){b&&(this.isExpanding=!0);if(this.isExpandable()){this.isExpanding=this.isExpanded=!0;if(0==this._childItems.length)this.CreateChildList();
else{b=this._prepareChildren();var a=this._parent.FlatHierarchicalItemsList,c=this._parent.FlatItemsSource,d=a.indexOf(this);b.HierItems.splice(0,0,d+1,0);b.FlatItems.splice(0,0,d+1,0);a.splice.apply(a,b.HierItems);c.splice.apply(c,b.FlatItems);for(a=0;a<b.Parents.length;a++)c=b.Parents[a],c.OnPropertyChanged("IsExpanded",!0),0!=c._parent.NodeExpansionStateChanged.fn.length&&c._parent.NodeExpansionStateChanged.raise(c)}this.isExpanding=!1;this.OnPropertyChanged("IsExpanded",!0)}this.isExpanding=!1};
b.HierarchicalItem.prototype.CreateChildList=function(){var b=this.GetChildList(),a=this;if(null==this.onChildCollectionChanged||void 0==this.onChildCollectionChanged)this.onChildCollectionChanged=function(c,b){if("insert"==c.type)a.AddItemToChildList(b.index,b.items[0]);else if("remove"==c.type){var d=a._parent.GetFlatHierarchicalItemByData(b.items[0]);a._childItems.remove(d);a._parent.ClearHierarchyFromList(d,!0)}a.CanShowCue(0<a._childItems.length)};f.observable(b).bind("insert remove replaceAll",
this.onChildCollectionChanged);var b=this._createChildList(b),c=this._parent.FlatHierarchicalItemsList,d=this._parent.FlatItemsSource,g=c.indexOf(this);b.HierItems.splice(0,0,g+1,0);b.FlatItems.splice(0,0,g+1,0);c.splice.apply(c,b.HierItems);d.splice.apply(d,b.FlatItems);for(c=0;c<b.Parents.length;c++)d=b.Parents[c],d.OnPropertyChanged("IsExpanded",!0),0!=d._parent.NodeExpansionStateChanged.fn.length&&d._parent.NodeExpansionStateChanged.raise(d);a._parent.hasDynamicResolver?a.CanShowCue(0<=a._childItems.length?
!0:!1):a.CanShowCue(0<a._childItems.length)};b.HierarchicalItem.prototype._createChildList=function(e){var a={HierItems:[],FlatItems:[],Parents:[]};if(this.isExpanded){this.isExpanding=!0;for(var c=0;c<e.length;c++){var d=new b.HierarchicalItem(this._parent,this,e[c],this._level+1);this._childItems.insert(c,d);var g=new b.FlexyNodeData(d);d.corrFlexyNodeData=g;a.HierItems.push(d);a.FlatItems.push(g);if(d.isExpandable()&&this._parent._fxGantt.AutoExpandNodes){d.isExpanded=!0;a.Parents.push(d);if(0==
d._childItems.length){g=d.GetChildList();if(null==d.onChildCollectionChanged||void 0==d.onChildCollectionChanged)d.onChildCollectionChanged=function(a,c){if("insert"==a.type)this.AddItemToChildList(c.index,c.items[0]);else if("remove"==a.type){var b=this._parent.GetFlatHierarchicalItemByData(c.items[0]);this._childItems.remove(b);this._parent.ClearHierarchyFromList(b,!0)}this.CanShowCue(0<this._childItems.length)};f.observable(g).bind("insert remove replaceAll",d.onChildCollectionChanged.bind(d));
d._createChildList(g)}g=d._prepareChildren();a.HierItems=a.HierItems.concat(g.HierItems);a.FlatItems=a.FlatItems.concat(g.FlatItems);a.Parents=a.Parents.concat(g.Parents);d._parent.hasDynamicResolver?d.CanShowCue(0<=d._childItems.length?!0:!1):d.CanShowCue(0<d._childItems.length)}}this.isExpanding=!1}return a};b.HierarchicalItem.prototype.UpdateDynamicResolvedChildList=function(b){this.isUpdatingChildListAsync=!1;this._resolvedChildList=b;this.ExpandAll()};b.HierarchicalItem.prototype.AddItemToChildList=
function(e,a){a=new b.HierarchicalItem(this._parent,this,a,this._level+1);this._childItems.insert(e,a);this.isExpanded&&this.PrepareNewFlexyTreeViewItem(a)};b.HierarchicalItem.prototype.PrepareChildren=function(){if(this.isExpanded){this.isExpanding=!0;for(var b=0;b<this._childItems.length;b++)this.PrepareNewFlexyTreeViewItem(this._childItems[b]);this.isExpanding=!1}};b.HierarchicalItem.prototype._prepareChildren=function(){var e={HierItems:[],FlatItems:[],Parents:[]};if(this.isExpanded){this.isExpanding=
!0;for(var a=0;a<this._childItems.length;a++){var c=this._childItems[a];c.corrFlexyNodeData=c.corrFlexyNodeData?c.corrFlexyNodeData:new b.FlexyNodeData(c);e.HierItems.push(c);e.FlatItems.push(c.corrFlexyNodeData);c.isExpandable()&&this._parent._fxGantt.AutoExpandNodes&&(c.isExpanded=!0,e.Parents.push(c),c=c._prepareChildren(),e.HierItems=e.HierItems.concat(c.HierItems),e.FlatItems=e.FlatItems.concat(c.FlatItems),e.Parents=e.Parents.concat(c.Parents))}this.isExpanding=!1}return e};b.HierarchicalItem.prototype.PrepareNewFlexyTreeViewItem=
function(e){if(0==this._childItems.indexOf(e)){var a=this.FlatHierarchicalItemsList().indexOf(this);this.FlatHierarchicalItemsList().insert(a+1,e);var c=new b.FlexyNodeData(e);this.FlatItemsSource().insert(a+1,c)}else{c=e;a=-1;do if(a=-1,null!=c._parentItem){var d=c._parentItem,c=c._parentItem.GetNextItem(c);null!=c?(a=this.FlatHierarchicalItemsList().indexOf(c),-1==a&&(c=c._parentItem)):c=d}else c=this._parent.GetNextItem(c),null!=c&&(a=this.FlatHierarchicalItemsList().indexOf(c),-1==a&&(c=null));
while(null!=c&&-1==a);null!=c?(this.FlatHierarchicalItemsList().insert(a,e),c=new b.FlexyNodeData(e),this.FlatItemsSource().insert(a,c)):(this.FlatHierarchicalItemsList().add(e),c=new b.FlexyNodeData(e),this.FlatItemsSource().add(c))}e.corrFlexyNodeData=c;e.isExpandable()&&this._parent._fxGantt.AutoExpandNodes&&e.IsExpanded(!0)};b.HierarchicalItem.prototype.GetNextItem=function(b){b=this._childItems.indexOf(b);return!this.isExpanding&&b+1<this._childItems.length?this._childItems[b+1]:null!=this._parentItem?
this._parentItem.GetNextItem(this):this._parent.GetNextItem(this)};b.HierarchicalItem.prototype.ExpandAll=function(){var e=0;if(!1==this.isExpanded&&this.isExpandable()){this.isExpanding=this.isExpanded=!0;if(0==this._childItems.length)for(var a=this.GetChildList(),c=0;c<a.length;c++){var d=new b.HierarchicalItem(this._parent,this,a[c],this._level+1);d._forceToBindtheEvents=!1;this._childItems.add(d);this.isExpanded&&(this.PrepareNewFlexyTreeViewItem(d),d=d.ExpandAll(),e+=d)}else this.PrepareChildren();
this.isExpanding=!1;this.OnPropertyChanged("IsExpanded")}return++e};b.HierarchicalItem.prototype.CollapseAll=function(){if(this.isExpandable()){for(var b=0;b<this._childItems.length;b++)this._childItems[b].CollapseAll();this.IsExpanded(!1)}};b.HierarchicalItem.prototype.GetFlexyNodeData=function(){return this.corrFlexyNodeData};b.HierarchyToList=function(e,a,c,d){if(null==e)return null;this._fnChildListResolver=a;this._expansionStateHandler=c.ExpansionStateHandler;this.hasDynamicResolver=null!=c.dynamicResolverFunction?
f.isFunction(c.dynamicResolverFunction):!1;this._fxGantt=c;this.data=e;this.IsCollapsed=new ObjectEvent("IsCollapsed");this.NodeExpansionStateChanged=new ObjectEvent("NodeExpansionStateChanged");this.FlatHierarchicalItemsList=new RadiantQ.RQ_CollectionChangeNotifier;this.FlatItemsSource=new RadiantQ.RQ_CollectionChangeNotifier;this._topLevelItems=new RadiantQ.RQ_CollectionChangeNotifier;this.FlatItemsSource.CollectionChanged.subscribe(this.FlatItemsSourceCollectionChange,this);this.FlatHierarchicalItemsList.CollectionChanged.subscribe(this.FlatHierarchicalItemsListCollectionChange);
this.init(e);var g=this;e.CollectionChanged&&e.CollectionChanged instanceof ObjectEvent&&e.CollectionChanged.subscribe(function(a,c){if("insert"==c.type)for(var d=0;d<c.NewItems.length;d++){var e=new b.HierarchicalItem(g,null,c.NewItems[d],0);g._topLevelItems.insert(c.NewStartingIndex+d,e);g.createList(e,c.NewStartingIndex+d)}if("remove"==c.type)for(d=0;d<c.OldItems.length;d++){var e=g.GetFlatHierarchicalItemByData(c.OldItems[d]),n=e.GetChildList();null!=n&&f.observable(n).unbind("insert remove replaceAll",
e.onChildCollectionChanged);g._topLevelItems.remove(e);g.ClearHierarchyFromList(e,!0)}},this);f.observable(e).bind("insert remove replaceAll",function(a,c){if("insert"==a.type){var d=new b.HierarchicalItem(g,null,c.items[0],0);g._topLevelItems.insert(c.index,d);g.createList(d,c.index)}if("remove"==a.type){var d=g.GetFlatHierarchicalItemByData(c.items[0]),e=d.GetChildList();null!=e&&f.observable(e).unbind("insert remove replaceAll",d.onChildCollectionChanged);g._topLevelItems.remove(d);g.ClearHierarchyFromList(d,
!0)}})};b.HierarchyToList.prototype.UpdateDisplayIndex=function(){for(var b=-1,a=0;a<this.FlatItemsSource.length;a++)b++,this.FlatItemsSource[a].DisplayIndex(b)};b.HierarchyToList.prototype.GetItemFromDataSource=function(b){if((b=this.GetFlatHierarchicalItemByData(b))&&b.corrFlexyNodeData)return b.corrFlexyNodeData};b.HierarchyToList.prototype.GetFlatHierarchicalItemByData=function(b){for(var a=this.FlatHierarchicalItemsList,c=0;c<a.length;c++){var d=a[c];if(d.data===b)return d}};b.HierarchyToList.prototype.isArray=
function(b){return b instanceof Array};b.HierarchyToList.prototype.init=function(e){0<this.FlatItemsSource.length&&0<this.FlatHierarchicalItemsList.length&&(this.FlatItemsSource.remove(0,this.FlatItemsSource.length),this.FlatHierarchicalItemsList.remove(0,this.FlatHierarchicalItemsList.length));if(this.isArray(e))for(var a=0;a<e.length;a++){var c=new b.HierarchicalItem(this,null,e[a],0);this._topLevelItems.add(c);this.createList(c,a);c._forceToBindtheEvents=!1}else e=new b.HierarchicalItem(this,null,
e,0),this._topLevelItems.add(e),this.FlatHierarchicalItemsList.add(e),e=new b.FlexyNodeData(e),this.FlatItemsSource.add(e)};b.HierarchyToList.prototype.createList=function(e,a){void 0==this._fxGantt.AutoExpandNodes&&(this._fxGantt.AutoExpandNodes=!0);var c=null;if(0==a)this.FlatHierarchicalItemsList.insert(0,e),c=new b.FlexyNodeData(e),this.FlatItemsSource.insert(0,c);else if(c=this.GetNextItem(e),null!=c){var d=this.FlatHierarchicalItemsList.indexOf(c),c=new b.FlexyNodeData(e);this.FlatHierarchicalItemsList.insert(d,
e);this.FlatItemsSource.insert(d,c)}else this.FlatHierarchicalItemsList.add(e),c=new b.FlexyNodeData(e),this.FlatItemsSource.add(c);null!=c&&this._fxGantt.AutoExpandNodes&&c.HierarchicalItem.IsExpanded(!0)};b.HierarchyToList.prototype.FlatHierarchicalItemsListCollectionChange=function(b,a){for(var c=0;c<a.items.length;c++);};b.HierarchyToList.prototype.FlatItemsSourceCollectionChange=function(b,a){if("insert"==b.type)for(var c=0;c<a.items.length;c++)a.items[c].HierarchicalItem.corrFlexyNodeData=a.items[c];
else for(c=0;c<a.items.length;c++){var d=a.items[c].HierarchicalItem._parentItem;d&&0==d._childItems.length&&(d._childListResolved=!1)}this.UpdateDisplayIndex()};b.HierarchyToList.prototype.ClearHierarchyFromList=function(b,a){if(a){var c=this.FlatHierarchicalItemsList,d=c.indexOf(b),d=c[d];c.remove(d);c=this.FlatItemsSource;d=c.indexOf(b.corrFlexyNodeData);d=c[d];c.remove(d);if(b.isExpanded)for(b.isExpanded=!1,c=0;c<b._childItems.length;c++)this.ClearHierarchyFromList(b._childItems[c],!0)}else{var g=
this._clearHierarchyFromList(b);0<g&&(c=this.FlatHierarchicalItemsList,d=c.indexOf(b),c.splice(d+1,g),c=this.FlatItemsSource,d=c.indexOf(b.corrFlexyNodeData),c.splice(d+1,g))}};b.HierarchyToList.prototype._clearHierarchyFromList=function(b){if(b.isExpanded){b.isExpanded=!1;for(var a=length=b._childItems.length,c=0;c<a;c++){var d=b._childItems[c];d.isExpanded&&(length+=this._clearHierarchyFromList(d))}return length}return 0};b.HierarchyToList.prototype.GetNextItem=function(b){b=RQArray.prototype.indexOf.call(this._topLevelItems,
b);return this._topLevelItems.length>b+1?this._topLevelItems[b+1]:null};b.HierarchyToList.prototype.ExpandAll=function(){for(var b=0;b<this.FlatHierarchicalItemsList.length;){var a=this.FlatHierarchicalItemsList[b];a.isExpandable()&&(a=a.ExpandAll(),b+=a-1);b++}};b.HierarchyToList.prototype.CollapseAll=function(){};b.HierarchicalItem.prototype.TableRow=function(b){if(void 0==b||null==b)return this._tableRow;void 0!=this._tableRow&&(this.IsSelected()&&newValue.addClass("rq-row-selected ui-state-active"),
b=f(this._tableRow).height(),f(newValue).height(b));this._tableRow=newValue};b.HierarchicalItem.prototype.ChartRow=function(b){if(void 0==b||null==b)return this._chartRow;void 0!=this._chartRow&&(this.IsSelected()&&newValue.addClass("rq-row-selected ui-state-active"),b=f(this._chartRow).height(),f(newValue).height(b));this._chartRow=newValue}})(jQuery);
(function(f){RadiantQ.FlexyGantt.ConvertToValidTimes=function(a,c,b,g,h){g.Value=c.clone();h.Value=c.clone().addMilliseconds(b.totalMilliseconds_M())};RadiantQ.FlexyGantt.TaskItemControl={};RadiantQ.FlexyGantt.TaskItemControl.TaskBar_BorderTopWidth=1;RadiantQ.FlexyGantt.TaskItemControl.TaskBar_BorderBottomWidth=1;RadiantQ.FlexyGantt.TaskItemControl.ParentBar_BorderTopWidth=0;RadiantQ.FlexyGantt.TaskItemControl.ParentBar_BorderBottomWidth=0;"Microsoft Internet Explorer"==navigator.appName&&(f=parseInt(navigator.userAgent.split(";")[1].split(" ")[2]),
window.msie={version:f},9>f&&window.console&&console.error&&console.log("It appears that the gantt is loaded in a IE browser version earlier than IE9. Some features are not supported in earlier than IE9. Or you might be running IE 9+ in Compatibility View mode, which is also not supported by the gantt."));!1==RadiantQ.CanUseDefineProperty&&(RadiantQ.FlexyGantt.TaskItemControl.MarginForBars=2);var b=2;RadiantQ.FlexyGantt.TaskItemControl.MarginForBars_M=function(){if(0==arguments.length)return b;0>
value||5<value||(b=value)};if(RadiantQ.CanUseDefineProperty)try{Object.defineProperty(RadiantQ.FlexyGantt.TaskItemControl,"MarginForBars",{get:function(){return b},set:function(a){0>a||5<a||(b=a)}})}catch(e){window.console&&console.error("Gantt will load only in browsers: IE: 9+, FF: 11+, Chrome: 11+, Safari: 4.0.4(531.21.10)+. \n Or you might be running IE 9+ in Compatibility View mode, which is also not supported by the gantt.")}})(jQuery);
RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization={None:"None",ShrinkHeight:"ShrinkHeight"};
(function(f){(function(b){var e=function(a){function c(c,b,h,e){a.apply(this,arguments);this._fg=c;this._sourceItems=b;this._startTimeBinding=h;this._endTimeBinding=e;if(b&&this._sourceItems.CollectionChanged)this._sourceItems.CollectionChanged.subscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);else{var k=this;f.observable(b).bind("insert remove replaceAll",function(a,c){if(eventType=a.type)"insert"==eventType&&k.OnSourceItemsCollectionChanged(this,{Action:RadiantQ.NotifyCollectionChangedAction.Add,
NewItems:c.items}),"remove"==eventType&&k.OnSourceItemsCollectionChanged(this,{Action:RadiantQ.NotifyCollectionChangedAction.Remove,OldItems:c.items}),"Reset"==eventType&&k.OnSourceItemsCollectionChanged(this,{Action:RadiantQ.NotifyCollectionChangedAction.Reset})})}}__extends(c,a);return c}(ObservableCollection);b.ItemsSourceListening=e})(RadiantQ.FlexyGantt);RadiantQ.FlexyGantt.ItemsSourceListening.prototype.FlexyGantt_M=function(){return this._fg};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.SourceItems_M=
function(){return this._sourceItems};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.StartTimeBinding_M=function(){return this._startTimeBinding};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.EndTimeBinding_M=function(){return this._endTimeBinding};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"FlexyGantt",{get:function(){return this._fg}}),Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"SourceItems",{get:function(){return this._sourceItems}}),
Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"StartTimeBinding",{get:function(){return this._startTimeBinding}}),Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"EndTimeBinding",{get:function(){return this._endTimeBinding}}));RadiantQ.FlexyGantt.ItemsSourceListening.prototype.TimeRangeBasedItemsFilter_CollectionChanged=function(b,e){this.OnSourceItemsCollectionChanged(b,e)};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.OnSourceItemsCollectionChanged=
function(b){};(function(b){var e=function(a){function c(c,b,h,e){a.apply(this,arguments);this._fg=c;this._sourceItems=b;this._startTime=h;this._endTime=e;var k=this,l=f(".rq-ganttChart",this._fg.element).data("GanttChart");this.Filter=function(){this.splice(0,this.length);var a=this._fg.RaiseFilterTasksByTimeRange(this._sourceItems);if(null!=a&&void 0!=a)this.splice.apply(this,[0,a.length].concat(a));else for(a=0;a<this._sourceItems.length;a++)this.IsInTimeRange(this._sourceItems[a])&&this.insert(this.length,
this._sourceItems[a]);this.OnCollectionChanged({type:"Reset"},null)};this.refreshUIEventHandler=l.RefreshUIEvent.subscribe(this.Filter,this);this._fg.GanttChartIsLoaded&&this.Filter();this.GanttChart_Loaded=function(a,c){k._fg.GanttChartLoaded.unsubscribe(this.GanttChart_Loaded);k.Filter()};this.IsInTimeRange=function(a){var c=a.StartTime;a=a.EndTime;var b=RQTimeSpan.parse(this._fg.options.TimeRangeFilteredTasksTimeBuffer),d=new RQTimeSpan(-b.totalMilliseconds_M());return c==DateTime.MinValue||a==
DateTime.MinValue||c<f(this._fg.GetGanttChart()).data().GanttChart.options.ComputedStartTime.addTimeSpan(d)&&a<f(this._fg.GetGanttChart()).data().GanttChart.options.ComputedStartTime.addTimeSpan(d)||c>f(this._fg.GetGanttChart()).data().GanttChart.options.ComputedEndTime.addTimeSpan(b)&&a>f(this._fg.GetGanttChart()).data().GanttChart.options.ComputedEndTime.addTimeSpan(b)?!1:!0};this.OnSourceItemsCollectionChanged=function(a,c){switch(c.Action){case RadiantQ.NotifyCollectionChangedAction.Add:for(var b=
0;b<c.NewItems.length;b++){var d=c.NewItems[b];this.IsInTimeRange(d)&&this.add(d)}break;case RadiantQ.NotifyCollectionChangedAction.Remove:for(b=0;b<c.OldItems.length;b++)d=c.OldItems[b],this.remove(d);break;case RadiantQ.NotifyCollectionChangedAction.Reset:case RadiantQ.NotifyCollectionChangedAction.Replace:this.Filter()}};this.Destroy=function(a,c){this.refreshUIEventHandler&&this.refreshUIEventHandler.Dispose();this.OnSourceItemsCollectionChanged=this.IsInTimeRange=this.GanttChart_Loaded=null}}
__extends(c,a);return c}(RadiantQ.FlexyGantt.ItemsSourceListening);b.TimeRangeFilteredItems=e})(RadiantQ.FlexyGantt);RadiantQ.FlexyGantt.FilterTasksByTimeRangeEventArgs=function(b,e,a){var c=b,d=e,g=a,h=null;this.SourceList_M=function(a){if(0==arguments.length){if(c)return c;c=null}else c=a};this.TimeRangeStart_M=function(a){if(0==arguments.length){if(d)return d;d=null}else d=a};this.TimeRangeEnd_M=function(a){if(0==arguments.length){if(g)return g;g=null}else g=a};this.FilteredList_M=function(a){if(0==
arguments.length){if(h)return h;h=null}else h=a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(this,"SourceList",{get:function(){if(c)return c;c=null},set:function(a){c=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,"TimeRangeStart",{get:function(){if(d)return d;d=null},set:function(a){d=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,"TimeRangeEnd",{get:function(){if(g)return g;g=null},set:function(a){g=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,
"FilteredList",{get:function(){if(h)return h;h=null},set:function(a){h=a},enumerable:!0,configurable:!0}))}})(jQuery);
function RQTimeSpan(f,b,e,a,c,d){this._isInit=!0;var g=arguments.length;if(1==g){g=0>f?-1:1;this._totalMS=f;var h=Math.abs(f);this.days=Math.floor(h/864E5)*g;h%=864E5;this.milliseconds=this._seconds=this._minutes=this._hours=0;if(0==h)return this;this._hours=Math.floor(h/36E5)*g;h%=36E5;if(0==h)return this;this._minutes=Math.floor(h/6E4)*g;h%=6E4;if(0==h)return this;this._seconds=Math.floor(h/1E3)*g;this.milliseconds=h%1E3*g}else 4==g?(this.days=f,this._hours=b,this._minutes=e,this._seconds=a,this.milliseconds=
0,this._totalMS=864E5*f+36E5*b+6E4*e+1E3*a):5<=g?(this.days=f,this._hours=b,this._minutes=e,this._seconds=a,this.milliseconds=c,this._totalMS=5<g?d:864E5*f+36E5*b+6E4*e+1E3*a+c):this._totalMS=this.milliseconds=this._seconds=this._minutes=this._hours=0;return this}window.RQTimeSpan=RQTimeSpan;
(function(){var f=null,b=null,e=null;RQTimeSpan.MaxValue_M=function(){return f};RQTimeSpan.MinValue_M=function(){return b};RQTimeSpan.Zero_M=function(){return e};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RQTimeSpan,"MaxValue",{get:function(){return f},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(RQTimeSpan,"MinValue",{get:function(){return b},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(RQTimeSpan,"Zero",{get:function(){return e},set:function(){},
enumerable:!0,configurable:!1}));RQTimeSpan.parse=function(a){if(a instanceof RQTimeSpan)return a;if("string"!=typeof a)return RQTimeSpan.Zero;try{var c=a.split(".");if(2==c.length){var b=parseInt(c[0]),g=c[1].split(":"),h=parseInt(g[0]),e=parseInt(g[1]),f=parseInt(g[2]);return new RQTimeSpan(b,h,e,f,0)}g=c[0].split(":");if(1==g.length){var l=g[0];a="";for(var n=null,p="",f=e=h=b=g=c=0,q=!1,r=!1,t=!1,s=0;s<=l.length;s++){var w=l.charAt(s);if(isInteger(w))q=!0,a+=w;else{if(""!=p&&!0==q){t=!0;switch(p){case "PT":p=
"";break;case "P":p="";break;case "Y":p="";c=n;r=!0;break;case "M":p="";r?(g=n,r=!1):e=n;break;case "DT":p="";b=n;break;case "H":p="";h=n;break;case "S":p="",f=n}n=parseInt(a);a=""}p+=w}}l=0;return!0!=t?(l=parseInt(a),RQTimeSpan.Zero_M().addMilliseconds(l)):new RQTimeSpan(b+365*c+30*g,h,e,f,l)}h=parseInt(g[0],10);e=parseInt(g[1],10);f=parseInt(g[2],10);return new RQTimeSpan(0,h,e,f,0)}catch(u){return RQTimeSpan.Zero}};isInteger=function(a){return"NaN"!=parseInt(a).toString()?!0:!1};RQTimeSpan.fromTicks=
function(a){return new RQTimeSpan(a/1E4)};RQTimeSpan.FromDays=function(a){if(!a)return RQTimeSpan.Zero;var c=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(c*Math.floor(a),24*c*(a%1),0,0)};RQTimeSpan.FromHours=function(a){if(!a)return RQTimeSpan.Zero;var c=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(0,c*Math.floor(a),60*c*(a%1),0)};RQTimeSpan.FromMinutes=function(a){if(!a)return RQTimeSpan.Zero;var c=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(0,0,c*Math.floor(a),60*c*(a%1))};RQTimeSpan.prototype.days_M=
function(a){if(0==arguments.length)return this.days;this.days=a};RQTimeSpan.prototype.hours_M=function(a){if(0==arguments.length)return this._hours;if(-24<a&&24>a)this._hours=a;else{var c=a%1;for(c&&this.minutes_M(60*c);24<=a;)this.days++,a-=24;c=0>a?-1:1;a=Math.abs(a);this._hours=c*Math.floor(a)}};RQTimeSpan.prototype.minutes_M=function(a){if(0==arguments.length)return this._minutes;if(-60<a&&60>a)this._minutes=a;else{var c=a%1;for(c&&this.seconds_M(60*c);60<=a;)c=this.hours_M(),this.hours_M(++c),
a-=60;this._isInit&&(a+=this._minutes);c=0>a?-1:1;a=Math.abs(a);this._minutes=c*Math.floor(a)}};RQTimeSpan.prototype.seconds_M=function(a){if(0==arguments.length)return this._seconds;if(-60<a&&60>a)this._seconds=a;else{for(;60<=a;){var c=this.minutes_M();this.minutes_M(c++);a-=60}this._isInit&&(a+=this._seconds);this._seconds=Math.round(a)}};RQTimeSpan.prototype.milliseconds_M=function(a){if(0==arguments.length)return this.milliseconds;this.milliseconds=a};RQTimeSpan.prototype.totalMilliseconds_M=
function(){return this._totalMS};RQTimeSpan.prototype.Ticks_M=function(){return 1E4*this.totalMilliseconds_M()};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RQTimeSpan.prototype,"hours",{get:function(){return this._hours},set:function(a){var c=a%1;c&&(this.minutes=60*c);for(;24<=a;)this.days++,a-=24;c=0>a?-1:1;a=Math.abs(a);this._hours=c*Math.floor(a)}}),Object.defineProperty(RQTimeSpan.prototype,"minutes",{get:function(){return this._minutes},set:function(a){var c=a%1;c&&(this.seconds=60*
c);for(;60<=a;)this.hours++,a-=60;this._isInit&&(a+=this._minutes);c=0>a?-1:1;a=Math.abs(a);this._minutes=c*Math.floor(a)}}),Object.defineProperty(RQTimeSpan.prototype,"seconds",{get:function(){return this._seconds},set:function(a){for(;60<=a;)this.minutes++,a-=60;this._isInit&&(a+=this._seconds);this._seconds=Math.round(a)}}),Object.defineProperty(RQTimeSpan.prototype,"totalMilliseconds",{get:function(){return 864E5*this.days+36E5*this._hours+6E4*this._minutes+1E3*this._seconds},set:function(){},
enumerable:!0,configurable:!0}),Object.defineProperty(RQTimeSpan.prototype,"Ticks",{get:function(){return 1E4*this.totalMilliseconds},set:function(){},enumerable:!0,configurable:!0}));RQTimeSpan.prototype.valueOf=function(){return this.totalMilliseconds_M()};RQTimeSpan.prototype.getTotalDays=function(){return this.totalMilliseconds_M()/864E5};RQTimeSpan.prototype.getTotalHours=function(){return this.totalMilliseconds_M()/36E5};RQTimeSpan.prototype.getTotalMinutes=function(){return this.totalMilliseconds_M()/
6E4};RQTimeSpan.prototype.getTotalSeconds=function(){return this.totalMilliseconds_M()/1E3};RQTimeSpan.prototype.equals=function(a){return 0===this.compareTo(a)};RQTimeSpan.prototype.add=function(a){return null===a?this:this.addSeconds(a.totalMilliseconds_M()/1E3)};RQTimeSpan.prototype.subtract=function(a){return null===a?this:new RQTimeSpan(this._totalMS-a._totalMS)};RQTimeSpan.prototype.addDays=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+864E5*a)};RQTimeSpan.prototype.addHours=
function(a){return new RQTimeSpan(this.totalMilliseconds_M()+36E5*a)};RQTimeSpan.prototype.addMinutes=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+6E4*a)};RQTimeSpan.prototype.addSeconds=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+1E3*a)};RQTimeSpan.prototype.addMilliseconds=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+a)};RQTimeSpan.prototype.get12Hour=function(){return 12<this.hours?this.hours-12:0===this.hours?12:this.hours};RQTimeSpan.prototype.getDesignator=
function(){return 12>this.hours?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator};RQTimeSpan.prototype.isGreaterThan=function(a){return this.totalMilliseconds_M()>a.totalMilliseconds_M()?!0:!1};RQTimeSpan.prototype.isGreaterThanOrEqualTo=function(a){return this.totalMilliseconds_M()>=a.totalMilliseconds_M()?!0:!1};RQTimeSpan.prototype.isLessThan=function(a){return this.totalMilliseconds_M()<a.totalMilliseconds_M()?!0:!1};RQTimeSpan.prototype.compareTo=function(a){a||(a=RQTimeSpan.Zero_M());
return this>a?1:this<a?-1:0};RQTimeSpan.prototype.toString=function(){var a=this.days_M(),c=this.hours_M(),b=this.minutes_M(),g=this.seconds_M(),c=10>c?"0"+c:c,b=10>b?"0"+b:b,g=10>g?"0"+g:g;return 0<a?""+a+"."+c+":"+b+":"+g+"":""+c+":"+b+":"+g+""};RQTimeSpan.prototype.toJSON=function(){return this.toString()};window.TimeSpan||(TimeSpan=RQTimeSpan);RQTimeSpan.prototype.getEqualNegative=function(){return new RQTimeSpan(-this.days,-this._hours,-this._minutes,-this._seconds,-this.milliseconds,-this._totalMS)};
f=new RQTimeSpan(10675199,2,48,5,477);b=new RQTimeSpan(-10675199,-2,-48,-5,-477);e=new RQTimeSpan(0,0,0,0,0)})();
(function(f){RadiantQ.Gantt.Utils.TimeComputingUtils={};RadiantQ.Gantt.Utils.TimeComputingUtils.AddLagToStartTime=function(a,c,b){return null==b?a.addTimeSpan(c):c.isGreaterThanOrEqualTo(RQTimeSpan.Zero_M())?b.GetEnd(a,c):b.GetStart(a,new RQTimeSpan(-c.totalMilliseconds_M()))};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType=function(a,c,b){var g=RadiantQ.Gantt;if(c==g.TimeScaleType.Weeks)switch(a){case g.TimeScaleType.Minutes:return 10080*b;case g.TimeScaleType.Hours:return 168*b;
case g.TimeScaleType.Days:return 7*b;case g.TimeScaleType.Weeks:return b;case g.TimeScaleType.Months:case g.TimeScaleType.Years:return 1}else if(c==g.TimeScaleType.Days)switch(a){case g.TimeScaleType.Minutes:return 1440*b;case g.TimeScaleType.Hours:return 24*b;case g.TimeScaleType.Days:return b;case g.TimeScaleType.Weeks:return b/7;case g.TimeScaleType.Months:case g.TimeScaleType.Years:return 1}else if(c==g.TimeScaleType.Hours)switch(a){case g.TimeScaleType.Minutes:return 60*b;case g.TimeScaleType.Hours:return b;
case g.TimeScaleType.Days:return b/24;case g.TimeScaleType.Weeks:return b/168;case g.TimeScaleType.Months:case g.TimeScaleType.Years:return 1}else if(c==g.TimeScaleType.Minutes)switch(a){case g.TimeScaleType.Minutes:return b;case g.TimeScaleType.Hours:return b/60;case g.TimeScaleType.Days:return b/1440;case g.TimeScaleType.Weeks:return b/10080;case g.TimeScaleType.Months:case g.TimeScaleType.Years:return 1}throw"Not yet supported 2";};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeSpanToTimeUnits=
function(a,c){var b=RadiantQ.Gantt;switch(a){case b.TimeScaleType.Minutes:return c.getTotalMinutes();case b.TimeScaleType.Hours:return c.getTotalHours();case b.TimeScaleType.Days:return c.getTotalDays();case b.TimeScaleType.Months:return c.getTotalDays()/30;case b.TimeScaleType.Weeks:return c.getTotalDays()/7;case b.TimeScaleType.Years:return c.getTotalDays()/365;default:throw"Missing case for TimeScaleType: "+a+" in ConvertTimeSpanToTimeUnits";}};RadiantQ.Gantt.Utils.TimeComputingUtils.IsWorkingTime=
function(a,c,b){var g=RadiantQ.Gantt;if(null!=b)switch(b=null==b?a:b.ConvertToNextWorkingTime(a),c){case g.TimeScaleType.Minutes:return!a.Date().compareTo(b.Date())&&b.getHours()==a.getHours()&&b.getMinutes()==a.getMinutes();case g.TimeScaleType.Hours:return!a.Date().compareTo(b.Date())&&b.getHours()==a.getHours();case g.TimeScaleType.Days:return!a.Date().compareTo(b.Date());case g.TimeScaleType.Weeks:return this.FirstDayOfWeek(b).equals(this.FirstDayOfWeek(a));case g.TimeScaleType.Months:return b.getFullYear()==
a.getFullYear()&&b.getMonth()==a.getMonth();case g.TimeScaleType.Years:return b.getFullYear()==a.getFullYear()}return!0};RadiantQ.Gantt.Utils.TimeComputingUtils.FirstDayOfWeek=function(a){var c=a.getDay();return c==Date.CultureInfo.firstDayOfWeek?a.Date():0==Date.CultureInfo.firstDayOfWeek?a.Date().clone().addDays(-c):0>c-Date.CultureInfo.firstDayOfWeek?a.Date().moveToDayOfWeek(Date.CultureInfo.firstDayOfWeek,-1):a.Date().moveToDayOfWeek(Date.CultureInfo.firstDayOfWeek,1)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInWeek=
function(a){var c=a.getDay(),c=c-Date.CultureInfo.firstDayOfWeek;0>c&&(c=7+c);return 7-c-a.getHours()/24-a.getMinutes()/1440};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInMonth=function(a){var c=(new Date(a.getFullYear(),a.getMonth(),1)).addMonths(1).addDays(-1);return rqTCUtils.GetTimeSpan(a,c).getTotalDays()+1};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInYear=function(a){var c=(new Date(a.getFullYear(),0,1)).clone().addYears(1).addDays(-1);return rqTCUtils.GetTimeSpan(a,
c).getTotalDays()+1};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToFractionalWorkingDay=function(a,c,b,g){if(c.equals(b))return 0;if(null==g){var h=b.totalMilliseconds_M(),e=c.totalMilliseconds_M();return(new RQTimeSpan(h-e)).getTotalHours()/24}h=new RadiantQ.Gantt.TimePeriod(a.addTimeSpan(c),a.addTimeSpan(b));e=RQTimeSpan.Zero_M();a=g.WorkTimeScheduleProvider(a);if(null!=a){c=a._intervals;for(b=0;b<c.length;b++)(g=c[b].Intersect(h))&&(e=e.add(g.Duration_M()));return isNaN(e.getTotalHours()/a.Duration.getTotalHours())?
0:e.getTotalHours()/a.Duration.getTotalHours()}return(b.Ticks_M()-c.Ticks_M())/RQTimeSpan.FromDays(1).Ticks_M()};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToFractionalDurationInHours=function(a,c,b){if(null==b)return 24*c;a=b.WorkTimeScheduleProvider(a);return null!=a?a.Duration.getTotalHours()*c:0};RadiantQ.Gantt.Utils.TimeComputingUtils.GetLeadingNonWorkingHours=function(a,c){if(null==c)return RQTimeSpan.Zero_M();var b=c.WorkTimeScheduleProvider(a.Date());return null!=b?new RQTimeSpan(b.Start-
a.Date()):RQTimeSpan.Zero_M()};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType=function(a,c,b){var g=RadiantQ.Gantt;if(c==g.TimeScaleType.Years)switch(a){case g.TimeScaleType.Minutes:return 525600*b;case g.TimeScaleType.Hours:return 8760*b;case g.TimeScaleType.Days:return 365*b;case g.TimeScaleType.Weeks:return 52*b;case g.TimeScaleType.Months:return 12*b;case g.TimeScaleType.Years:return b}else if(c==g.TimeScaleType.Months)switch(a){case g.TimeScaleType.Minutes:return 44640*
b;case g.TimeScaleType.Hours:return 744*b;case g.TimeScaleType.Days:return 31*b;case g.TimeScaleType.Weeks:return 4*b;case g.TimeScaleType.Months:return b;case g.TimeScaleType.Years:return 1}return g.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(a,c,b)};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextDay=function(a){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);return 0<a.compareTo(c)?c.clone().addDays(1):a};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextHour=function(a){var c=
new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),0,0);0<a.compareTo(c)&&c.addHours(1);return c};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextMinute=function(a){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0);0<a.compareTo(c)&&c.addMinutes(1);return c};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextYear=function(a){return(new Date(a.getFullYear(),0,1,0,0,0)).addYears(1)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextWeek=function(a){a=
a.addDays(RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInWeek(a));return RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextDay(a)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextMonth=function(a){var c=a.getMonth(),b=new Date(a.getFullYear(),c+1,1);c==b.getMonth()&&(b=new Date(a.getFullYear(),c+1,1,1,0,0));return b};RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeBreaks=function(a,c,b,g){if(!1!=a instanceof Date&&!1!=c instanceof Date){g||(g=[]);var h=new RQTimeSpan(c-a);if(h<=RQTimeSpan.Zero_M())return!1;
if(null!=b){var e=b.ConvertToNextWorkingTime(a).equals(a)?!0:!1;g.push(a);a=b.ConvertToNextWorkingTimeIntervals(a,h);if(0==a.length)return!1;!e&&a[0].Start_M().isLessThan(c)&&g.push(a[0].Start_M());for(b=1;b<a.length;b++)if(!1==a[b].Start_M().equals(a[b-1].End_M())){if(0<=a[b-1].End_M().compareTo(c))break;g.push(a[b-1].End_M());if(0<=a[b].Start_M().compareTo(c))break;g.push(a[b].Start_M())}b==a.length&&a[b-1].End_M().isLessThan(c)&&g.push(a[b-1].End_M());g.push(c);return e}g.push(a);g.push(c);return!0}};
RadiantQ.Gantt.BindingMode={OneWay:"OneWay",TwoWay:"TwoWay"};void 0==window.__rqGanttInSP&&void 0==Array.prototype.filter&&(RadiantQ.canLogMessages&&window.console&&console.log&&console.log("'__rqGanttInSP' value is undefined."),Array.prototype.filter=function(a,c){if(void 0===this||null===this)throw new TypeError;var b=Object(this),g=b.length>>>0;if("function"!==typeof a)throw new TypeError;for(var h=[],e=0;e<g;e++)if(e in b){var f=b[e];a.call(c,f,e,b)&&h.push(f)}return h});Date.prototype.Date=function(){return new Date(this.getFullYear(),
this.getMonth(),this.getDate(),0,0,0)};Date.prototype.addTimeSpan=function(a){return a?this.clone().add({millisecond:a.millisecond||a.milliseconds_M(),seconds:a.seconds_M(),minutes:a.minutes_M(),hours:a.hours_M(),days:a.days_M()}):this};Date.MaxValue=new Date(9999,11,30,11,59,59);Date.MinValue=new Date(1E3,0,1,12,0,0);var b={};window.DateTime=b;b.MaxValue=new Date(9999,11,30,11,59,59);b.MinValue=new Date(1E3,0,1,12,0,0);Date.prototype.isGreaterThan=function(a){return 1==this.compareTo(a)?!0:!1};Date.prototype.isLessThan=
function(a){return-1==this.compareTo(a)?!0:!1};Date.prototype.subtract=function(a){return this-a};String.prototype.trim=function(){if(0==arguments.length)return this.replace(/^\s+|\s+$/,"");for(var a=this,c=0;c<arguments.length;c++)a=a.replace(arguments[c],"");return a};String.prototype.trimEnd=function(){if(0==arguments.length)return this.replace(/^\s+|\s+$/,"");var a=this.lastIndexOf(arguments[0]),c=this.slice(0,a),a=this.slice(a+1);return c+a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(String,
"trim",{enumerable:!1}),Object.defineProperty(String,"trimEnd",{enumerable:!1}));try{window.JSON.toXML=function(a,c,b){if(a instanceof Array){for(var g="<"+c+">",h=0;h<a.length;h++){var e=a[h],g=g+"\n",f="<"+b+" ",l;for(l in e)void 0!=e[l]&&(f+=l+'="'+e[l]+'" ');f+="/>";g+=f}return'<?xml version="1.0" encoding="utf-8" ?>\n'+(g+("\n</"+c+">"))}}}catch(e){}RadiantQ.RQ_ObservableCollection=function(a){Array.call(a);a.DataSource=a;a.CollectionChanged=new ObjectEvent("CollectionChanged");a.push=function(a){Array.prototype.push.call(this,
a);args={Action:"Add",NewItems:[a]};this.CollectionChanged.raise(this,args)};a.splice=function(a,b,g){var h=[],h=void 0==g?Array.prototype.splice.call(this,a,b):Array.prototype.splice.call(this,a,b,g);args={};g&&(args.Action="Add",args.NewItems=g instanceof Array?g:[g]);b&&0<b&&(args.Action="Remove",args.OldItems=h);this.CollectionChanged.raise(this,args)};a.pop=function(){var a=Array.prototype.pop.call(this);args={};a&&(args.Action="Remove",args.OldItems=[a]);this.CollectionChanged.raise(this,args);
return a};a.remove=function(a){return RemoveInArray(this,a)};return a};RadiantQ.RQ_ObservableCollection.prototype=[];window.ko&&(ko.bindingHandlers.GanttControl={init:function(a,c,b,g,h){f(a).GanttControl(c())},update:function(a,c,b,g,h){}},ko.bindingHandlers.FlexyGantt={init:function(a,c,b,g,h){f(a).FlexyGantt(c())},update:function(a,c,b,g,h){}});RadiantQ.Gantt.Utils.SaveCanvasAsImage=function(a,c,b){if(a.msToBlob&&window.navigator.msSaveOrOpenBlob)window.ganttBlob=a.msToBlob(),window.navigator.msSaveOrOpenBlob(ganttBlob,
c);else if(window.Blob||window.webkitURL){window.readyState=0;var g=document.createElementNS("http://www.w3.org/1999/xhtml","a");g.target="_blank";g.href=a.toDataURL("image/png");g.download=c;a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);g.dispatchEvent(a);window.readyState=2;b&&setTimeout(function(){window.close()},1E3)}};RadiantQ.Gantt.Utils.getChildObject=function(a,c){for(var b=c.split("."),g=a,h=0;h<b.length-1;h++)var e=b[h],g=g[e+"_M"]?
g[e+"_M"]():g[e];return g};RadiantQ.Gantt.Utils.FilterOptions=function(){this.IncludeParent=this.AlwaysShowSummaryTask=!1};RadiantQ.Gantt.Utils.GetEarliestStartAndLatestEndTimes=function(a){if("FlexyGantt"==a.GanttType){a=a.options.DataSource;for(var c=Date.MaxValue,b=Date.MinValue,g=0;g<a.length;g++){var h=a[g].Tasks.length;if(0<h)for(var e=0;e<h;e++){var f=a[g].Tasks[e].StartTime,l=a[g].Tasks[e].EndTime;f<c&&(c=f);l>b&&(b=l)}}return{EarliestStart:c,LatestEnd:b}}};RadiantQ.Gantt.Utils.GetTotalHorizontalPages=
function(a,c,b,g){return a&&c&&b&&g?(a=g.ConvertTimeToX(a),c=g.ConvertTimeToX(c)-a,totalScrollPages=Math.ceil(c/b)):-1}})(jQuery);
(function(){function f(a,c,h,e,f){null==c?(this._binding=c,this.IsBound=!1):(this.model=f,this._isValueUpdating=this._isSrcUpdating=!1,h=c.Property.split("."),1<h.length&&(c.Property=h.pop(),h=h.join(),a=RadiantQ.Template.getter(h,a)),this.property=c.Property,c.Converter&&(c.Convert=c.Converter.Convert,c.ConvertBack=c.Converter.ConvertBack),this.BindingMode=e=c.Mode||RadiantQ.Gantt.BindingMode.OneWay,this.boundedObj=a,this._binding=this.OriginalBinding=c,this._isdisposed=!1,this._value=null,this.ValueChanged=
new ObjectEvent("ValueChanged"),f&&f.canInsertPropertyChangeTriggeringPropertiesInData&&(this._isdisposed=!1,a&&a._boundProps&&this.property&&a._boundProps[this.property]&&"function"!=typeof a[this.property]&&a._boundProps[this.property].PropertyChangedTrigger.Dispose(),this.PropertyChangedTrigger=new b(a,this.property)),this._value=c.Convert&&"function"==typeof c.Convert?"function"==typeof a[this.property]?c.Convert.call(a,a[this.property]()):c.Convert.call(a,a[this.property],a):"function"==typeof a[this.property]?
a[this.property]():"function"==typeof a[this.property+"_M"]?a[this.property+"_M"]():a[this.property],a.PropertyChanged&&!1==a.PropertyChanged.isSubscribed(this.onSourcePropertyChanged,a)&&a.PropertyChanged.subscribe(this.onSourcePropertyChanged,a),a._boundProps||(a._boundProps={},RadiantQ.CanUseDefineProperty&&Object.defineProperty(a,"_boundProps",{enumerable:!1,configurable:!0})),a._boundProps[this.property]=this)}function b(a,c,b){this.originalData=a;this.originalProperty=c;var m=c.split(".");1<
m.length&&(c=m.pop(),m=m.join(),a=RadiantQ.Template.getter(m,a));this.data=a;this.property=c;a.PropertyChanged||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));var m=a,f=a[c];void 0===b&&"function"===typeof a.ID&&(b=!0);if("function"===typeof f)b=!0,b=function(b){a.PropertyChanged.raise(a,{PropertyName:c,Value:b})},a[c].subscribe(b);else{if(!0==RadiantQ.CanUseDefineProperty){var l=e(a,c);a["Bounded_"+c]=l;b&&(m={});Object.defineProperty(m,c,{get:function(){return l.get?l.get.call(this):"function"===
typeof l.value?l.value.call(this):l.value},set:function(a){l.set?l.set.call(this,a):"function"===typeof l.value?l.value.call(this,a):l.value=a;this.PropertyChanged.raise(this,{PropertyName:c,Value:a})},enumerable:!0,configurable:!0})}void 0===f&&b&&(b=ko.mapping.fromJS(m[c]),a[c]=b,b=function(b){a.PropertyChanged.raise(a,{PropertyName:c,Value:b})},a[c].subscribe(b))}}function e(a,c){var b=a,e=a[c],f=Object.getOwnPropertyDescriptor(b,c);if(void 0===e&&void 0===f)return{value:void 0};for(;void 0===
f&&void 0!==e;)b=Object.getPrototypeOf(b),f=Object.getOwnPropertyDescriptor(b,c),e=a[c];return f}function a(a,c,b){var e=a,f=c,l=c.split(".");1<l.length&&(c=l.pop(),l=l.join(),a=RadiantQ.Template.getter(l,a));a.PropertyChanged||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));var n=a[c];RadiantQ.CanUseDefineProperty&&Object.defineProperty(a,c,{get:function(){return n},set:function(a){if(a&&a.equals&&n&&n.equals){if(!1==a.equals(n)){var b=n;n=a;this.PropertyChanged.raise(this,{PropertyName:c,
OldValue:b,Value:a,ActualData:e,ActualProperty:f})}}else a!=n&&(b=n,n=a,!1==RadiantQ.Gantt.Utils.InjectGetAndSetOnData.HoldTriggeringPropertyChange&&this.PropertyChanged instanceof ObjectEvent&&this.PropertyChanged.raise(this,{PropertyName:c,OldValue:b,Value:a,ActualData:e,ActualProperty:f}))},enumerable:!0,configurable:!0});b&&(a[c+"_M"]=function(a){if(0==arguments.length)return n;if(a&&a.equals){if(!1==a.equals(n)){var b=n;this[c]=n=a;this.PropertyChanged.raise(this,{PropertyName:c,OldValue:b,Value:a,
ActualData:e,ActualProperty:f})}}else a!=n&&(b=n,this[c]=n=a,this.PropertyChanged.raise(this,{PropertyName:c,OldValue:b,Value:a,ActualData:e,ActualProperty:f}))})}function c(a,c,b){this.Property=a;this.Mode=c;this.Converter=b}f.prototype.IsBound_M=function(){return null!=this._binding};f.prototype.Binding_M=function(){return this._binding};f.prototype.Value_M=function(a){if(0==arguments.length)return this._value;!1!=this.IsBound_M()&&this._value!==a&&(this._isValueUpdating=!0,this.BindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&
!1==this._isSrcUpdating&&(a=this.updateSrc(a)),this._value=this._binding.Convert?this._binding.Convert.call(this,a,this.boundedObj):a,this._isValueUpdating&&this.ValueChanged&&this.ValueChanged.raise(this,this._value),this._isValueUpdating=!1)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.prototype,"IsBound",{get:function(){return this.IsBound_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Binding",{get:function(){return this.Binding_M()},set:function(){},
enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Value",{get:function(){return this.Value_M()},set:function(a){this.Value_M(a)},enumerable:!0,configurable:!0}));f.prototype.updateSrc=function(a){if(this.BindingMode!=RadiantQ.Gantt.BindingMode.TwoWay)return a;this._isSrcUpdating=!0;var c=this.boundedObj[this.property],b=this._binding;a=b.ConvertBack?b.ConvertBack.call(this,a,this.boundedObj):a;if(null==c||void 0==c)this.boundedObj[this.property]=a;else if("function"==typeof c)this.boundedObj[this.property](a);
else this.boundedObj[this.property]=a;this._isSrcUpdating=!1;return a};f.prototype.onSourcePropertyChanged=function(a,c){var b=this._boundProps[c.PropertyName];b&&(b._isSrcUpdating=!0,!1==b._isValueUpdating&&b.Value_M(c.Value),b._isSrcUpdating=!1)};f.prototype.Dispose=function(){this._isdisposed=!0;if(!1!=this.IsBound){this.model&&this.model.canInsertPropertyChangeTriggeringPropertiesInData&&this.UnBindDataWithGantt();this.PropertyChanged&&this.PropertyChanged.Dispose();this.ValueChanged&&this.ValueChanged.Dispose();
delete this.PropertyChanged;delete this.ValueChanged;delete this.Value;var a=this.boundedObj._boundProps,c=!0,b;for(b in a){c=!1;break}c&&(this.boundedObj.PropertyChanged&&this.boundedObj.PropertyChanged.unsubscribe(this.onSourcePropertyChanged,this.boundedObj),delete this.boundedObj._boundProps)}};f.prototype.UnBindDataWithGantt=function(){var a=this._value,c=this._binding.Property;this.PropertyChangedTrigger&&this.PropertyChangedTrigger.Dispose(a);delete this[c+"_Binder"];delete this.boundedObj[c+
"_Binder"];delete this.boundedObj._boundProps[c]};RadiantQ.Gantt.Utils.ValueBinder=f;b.prototype.Dispose=function(a){var c=this.data,b=this.property,e=c["Bounded_"+b];!1==RadiantQ.CanUseDefineProperty&&(a=c[b]);delete c[b];delete c["Bounded_"+b];RadiantQ.CanUseDefineProperty&&void 0!==e?(void 0===e.configurable&&(e.configurable=!0),Object.defineProperty(c,b,e)):c[b]=a};RadiantQ.Gantt.Utils.InsertPropertyChangedTriggeringProperty=function(c,b,h,e){if(c&&b&&!1!=b instanceof Array)for(c.PropertyChanged||
(c.PropertyChanged=new ObjectEvent("PropertyChanged")),e&&"function"==typeof e&&c.PropertyChanged.subscribe(e),e=0;e<b.length;e++)new a(c,b[e],h)};RadiantQ.Gantt.Utils.InjectGetAndSetOnData=function(c,b,h,e){c.PropertyChanged||(c.PropertyChanged=new ObjectEvent("PropertyChanged"));e&&"function"==typeof e&&c.PropertyChanged.subscribe(e);return new a(c,b,h)};RadiantQ.Gantt.Utils.InjectGetAndSetOnData.HoldTriggeringPropertyChange=!1;RadiantQ.BindingOptions=function(a,b,h){if(a)return b||(b=RadiantQ.Gantt.BindingMode.TwoWay),
new c(a,b,h);window.console&&console.error&&console.error(a+" is not a vaild PropertyName for BindingOptions")};RadiantQ.ValueConverter=function(){};RadiantQ.ValueConverter.prototype.Convert=function(a,c){return a};RadiantQ.ValueConverter.prototype.ConvertBack=function(a,c){return a}})();var ns_gantt=RadiantQ.Gantt;window.ns_gantt=ns_gantt;var rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;
(function(f){RadiantQ.Gantt.Global={};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseScaleType=function(b,e,a,c){var d=e>a,g=0;if(d){var h=a;a=e;e=h}var h=e.Date(),m=a.Date();switch(b){case ns_gantt.TimeScaleType.Minutes:g=rqTCUtils.GetTimeSpan(e,a).getTotalMinutes();break;case ns_gantt.TimeScaleType.Hours:g=rqTCUtils.GetTimeSpan(e,a).getTotalHours();break;case ns_gantt.TimeScaleType.Days:m.equals(h)?g=rqTCUtils.ConvertToFractionalWorkingDay(m,rqTCUtils.GetTimeSpan(h,e),rqTCUtils.GetTimeSpan(m,
a),c):(b=rqTCUtils.ConvertToFractionalWorkingDay(h,rqTCUtils.GetTimeSpan(h,e),new RQTimeSpan(0,24,0,0),c),b+=rqTCUtils.GetTimeSpan(h,a).days-1,g=b+=rqTCUtils.ConvertToFractionalWorkingDay(m,RQTimeSpan.Zero_M(),rqTCUtils.GetTimeSpan(m,a),c));break;case ns_gantt.TimeScaleType.Weeks:g=rqTCUtils.ConvertToUnitsOfBaseScaleType(ns_gantt.TimeScaleType.Days,e,a,c)/7;break;case ns_gantt.TimeScaleType.Years:g=rqTCUtils.ConvertToUnitsOfBaseScaleType(ns_gantt.TimeScaleType.Days,e,a,c)/365}d&&(g=-g);return g};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan=function(b,e){e=rqTCUtils.GetAdjustEndForDSTChange(b,e);return new RQTimeSpan(e-b)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetAdjustEndForDSTChange=function(b,e){var a=b.getTimezoneOffset(),c=e.getTimezoneOffset();return a!=c?e.clone().addHours((a-c)/60):e};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan=function(b,e){switch(b){case ns_gantt.TimeScaleType.Minutes:return new RQTimeSpan(0,0,e,0);case ns_gantt.TimeScaleType.Hours:return new RQTimeSpan(0,
e,0,0);case ns_gantt.TimeScaleType.Days:return new RQTimeSpan(e,0,0,0);case ns_gantt.TimeScaleType.Months:return new RQTimeSpan(30*e,0,0,0);case ns_gantt.TimeScaleType.Weeks:return new RQTimeSpan(7*e,0,0,0);case ns_gantt.TimeScaleType.Years:return new RQTimeSpan(365*e,0,0,0);default:throw"Missing case for TimeScaleType: {0} in ConvertTimeUnitsToTimeSpan"+b.toString();}};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertUnitsInBaseScaleTypeToDurationInHours=function(b,e,a,c,d){var g=0;if(null!=e)switch(g=
new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),b){case ns_gantt.TimeScaleType.Minutes:if(null==d)return(c-a)/60;c=e.clone().addTimeSpan(new RQTimeSpan(0,c-a,0,0));d=d.GetEffort(e,c);return d.getTotalHours();case ns_gantt.TimeScaleType.Hours:if(null==d)return c-a;c=e.clone().addTimeSpan(new RQTimeSpan(0,c-a,0,0));d=d.GetEffort(e,c);return d.getTotalHours();case ns_gantt.TimeScaleType.Days:var h=Math.round(a);b=Math.round(c);if(h==b)return rqTCUtils.ConvertToFractionalDurationInHours(e,
c-a,d);if(c>a){e=g;var m=e.Date(),g=rqTCUtils.ConvertToFractionalDurationInHours(m,1-(a-h),d);a=parseInt(Math.round(c-h))-1;for(h=1;h<=a;h++)e=e.addDays(1),m=e.Date(),g+=rqTCUtils.ConvertToFractionalDurationInHours(m,1,d);e=e.addDays(1);m=e.Date();g+=rqTCUtils.ConvertToFractionalDurationInHours(m,c-b,d)}else{e=g;m=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());g=rqTCUtils.ConvertToFractionalDurationInHours(m,a-h,d);a=Math.abs(parseInt(Math.round(c-h))-
1);for(h=1;h<=a;h++)e=e.addDays(-(new RQTimeSpan(1,0,0,0)).getTotalDays()),m=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),g+=rqTCUtils.ConvertToFractionalDurationInHours(m,1,d);e=e.addDays(-(new RQTimeSpan(1,0,0,0)).getTotalDays());m=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());g+=rqTCUtils.ConvertToFractionalDurationInHours(m,1-(c-b),d);g=-g}break;default:throw new Exception("Not supported yet.");}return g};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToEndTimeInBaseScaleType=function(b,e,a,c,d){var g=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);switch(b){case ns_gantt.TimeScaleType.Minutes:if(null==d)return e.addMinutes((new RQTimeSpan(0,c-a,0,0)).getTotalHours());c=new RQTimeSpan(0,0,c-a,0);c=e.addTimeSpan(c);return d.ConvertToNextWorkingTime(c);case ns_gantt.TimeScaleType.Hours:if(null==d)return e.addHours((new RQTimeSpan(0,c-a,0,0)).getTotalHours());c=new RQTimeSpan(0,c-a,0,0);c=e.addTimeSpan(c);
return d.ConvertToNextWorkingTime(c);case ns_gantt.TimeScaleType.Days:var h=Math.round(a);b=Math.round(c);if(h==b)return e.addHours((new RQTimeSpan(0,rqTCUtils.ConvertToFractionalDurationInHours(e,c-a,d),0,0)).getTotalHours());c>a?(e=g,a=parseInt(Math.round(c-h)),e.addDays(a),a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())):(e=g,a=parseInt(Math.ceil(h-c)),e.addDays(-a),a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0));g=rqTCUtils.GetLeadingNonWorkingHours(a,
d);e=e.addHours(rqTCUtils.ConvertToFractionalDurationInHours(a,c-b,d));return e=e.addHours(g.getTotalHours());default:throw"Not supported yet.";}};RadiantQ.Gantt.Utils.TimeComputingUtils.GetDesiredBaseTimeUnitWidthForEndTime=function(b,e,a,c,d,g){var h=RadiantQ.Gantt.Utils.TimeComputingUtils;a=h.ConvertTimeSpanToTimeUnits(d,h.GetTimeSpan(a,c));b=h.ConvertTimeSpanToTimeUnits(d,h.GetTimeSpan(b,e));return a*g/b};RadiantQ.Gantt.Print=function(b,e){function a(a){if(b&&b.AfterCanvasGenerated&&"function"==
typeof b.AfterCanvasGenerated&&(canProcessDefault=b.AfterCanvasGenerated(a[0]),!1==canProcessDefault))return!1}!1!=("FlexyGantt"==e.widgetName?!0:"GanttControl"==e.widgetName?!0:!1)&&(b||(b={}),e&&"FlexyGantt"==e.GanttType?b.NoOfRowsInPage=e.FlatItemsSource.FlatItemsSource.length:e&&e.options.DataSource&&(b.NoOfRowsInPage=e.options.DataSource.length),RadiantQ.Gantt.RQPrint(e,b,a))};RadiantQ.Gantt.ConvertHTMLToCanvas=function(b,e,a){function c(a,c,b,h){c="";f(".resizer-style",a).remove();f(".rq-gc-progressbar-resizer",
a).remove();if(!0==e.IsGridVisible){var d=f(".ui-grid-body",a),g=f(".ui-grid-head",a),m=f(".timeSpanHeader",a);if(e.VisibleColumnIndices&&e.VisibleColumnIndices instanceof Array){var k=e.VisibleColumnIndices;f("col",a).css("display","none");d.find("tr").find("td").hide();g.find("th").hide();f("th.rq-column-width-readonly",f(".ui-head-frozen-div",g)).css("display","block");for(var l=0;l<k.length;l++){var n=(parseInt(k[l])+1).toString();c+=" .ui-grid-body-table tbody td:nth-of-type("+n+") {display:table-cell !important;}";
c+=".ui-grid-head-table thead th:nth-of-type("+n+") {display:table-cell !important;}"}}k=f(".ui-grid-head-table",a);f("tr",k).height(m.outerHeight());m=f(".rq-grid-head-parent",a);m=f(".ui-grid-head",m);m.css("padding-right","0px");f("td#gridContainer>:first-child",a);var k=f(".ui-grid-body-table",a),r=k.eq(0),l=k.eq(1),n=r.width();r.parent().css("width",n+"px");r.parent().css("height","100%");f(".ui-head-frozen-div",a).css("width",n+"px");r=l.width();l.parent().css("width",r+"px");var p=f(".ui-head-div",
a);p.css("width",r+"px");p.css("margin-left",n+"px");p.css("position","absolute");m.css("height",p.height()+"px");d.css({height:"100%"});l.css({height:"100%"});g.css("width","100%");d.height(b);d.parent().height(h);f(".ui-gridpanel",a).height(h);0<k.length&&k[1].style.setProperty("margin-top","0px","important")}a.height(h);if(void 0===e.IsChartVisible||!1!==e.IsChartVisible)f(".rq-gc-rowsParent-table",a).height(b),f(".rq-gc-rowsParent",a).css({height:b+"px"}),f(".rq-gc-chartArea-div",a).height(b),
f(".rq-gc-chartArea",a).height(h),f(".rq-ganttChart",a)[0].style.setProperty("height",h+"px","important"),f(".ui-GanttTimeUnitBackground-unit",a).css("height","100%"),f(".ui-GanttChartScaleBackground",a).height(b),f(".rq-gc-dependencysParent",a).height(b),f(a).append("<style>td.rq-fg-gc-row{overflow: inherit !important;}\n"+c+"</style>")}if(!b){var d=f(".rq-ganttBase");b=d.data("FlexyGantt")||d.data("GanttControl")}if(b&&b.widgetName&&!1!=("FlexyGantt"==b.widgetName?!0:"GanttControl"==b.widgetName?
!0:!1)){var g=b.element;e=e||{};var d=f(".ui-gridpanel",g),h=f(".rq-ganttChart",g),m=g.data(),k=m.GanttControl||m.FlexyGantt,l=f.extend(!0,l,h.data("GanttChart").options);l.Parent.UseTimeRangeFilteredTasksInRows?(_useTimeRangeFilteredTasksInRows=l.Parent.UseTimeRangeFilteredTasksInRows(),l.Parent={UseTimeRangeFilteredTasksInRows:function(){return _useTimeRangeFilteredTasksInRows}}):l.Parent={};k.ActivityViews&&(l.Parent.ActivityViews=k.ActivityViews,l.Parent.DependencyViews=k.DependencyViews);l.Parent.getVirtualizedChartHeight=
k.getVirtualizedChartHeight;l.ResizeToFit=!0;l.IsPrinting=!0;l.UseChartVirtualization=!1;l.UseVirtualization=!1;l.BaseTimeUnitWidthMinimum=0.1;var n=f("<div id='printableGanttChart'></div>"),p=d.clone(),m=0;e.IsGridVisible=void 0==e.IsGridVisible&&k.options.ShowGridTable?!0:!1;if(e.VisibleColumnIndices===[]||null===e.VisibleColumnIndices||!1===e.VisibleColumnIndices)e.IsGridVisible=!1;var q=f("div.ui-grid-body",p);if(!1!==e.IsGridVisible){var r=f("tr.ui-widget-header",g),g=f("tr.ui-widget-header>th",
g),t=e.VisibleColumnIndices;if(t&&f.isArray(t)&&t.length<g.length)for(r=m=0;r<t.length;r++)m+=f(g[t[r]]).outerWidth(!0);else void 0==t&&(m=r.outerWidth(!0));r=f("table.ui-grid-body-table",d);g=r.outerWidth(!0)-r.width();m+=g;g=r.find("tbody").data("VWGrid");t=g.rowHtml(!0);g.appendInnerHtml(r.find("tbody"),t)}var s=f("tr",q),w=RadiantQ.Gantt.View.IActivityView.prototype.TableRow,u=RadiantQ.Gantt.View.IActivityView.prototype.ChartRow,v=RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow,z=RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow;
RadiantQ.Gantt.View.IActivityView.prototype.TableRow=function(){var a=this.DisplayIndex;return-1==a||a>=s.length?null:f(s[a])};RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow=function(){var a=this.corrFlexyNodeData.DisplayIndex();return-1==a||a>=s.length?null:f(s[a])};var y=f(".rq-gc-rowsParent-table",n);RadiantQ.Gantt.View.IActivityView.prototype.ChartRow=function(){0==y.length&&(y=f(".rq-gc-rowsParent-table",n));var a=f("tr",y),c=this.DisplayIndex;return-1==c||c>=a.length?null:f(a[c])};
RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow=function(){0==y.length&&(y=f(".rq-gc-rowsParent-table",n));var a=f("tr",y),c=this.corrFlexyNodeData.DisplayIndex();return-1==c||c>=a.length?null:f(a[c])};q=f("table.ui-grid-body-table",d);q=q.eq(0).width()+q.eq(1).width();m=!1===e.IsGridVisible?0:m||q;$tempCont=f("<div id='tempCont'></div>").append(p);!1!==e.IsChartVisible&&($tempCont.append(n),n.css({"margin-left":"6px",width:h.width()-6+"px",height:h.height()+"px",position:"absolute","z-index":0}),
l=n.GanttChart(l).data("GanttChart"),e.ViewStartTime?l.SetStartTime(e.ViewStartTime):l.SetStartTime(h.data("GanttChart").VisualStartTime.clone()),e.ViewEndTime&&l.TrySetEndTime(e.ViewEndTime),l.initializeGanttComponents(),k&&k.options.KnockoutObjectName&&setTimeout(function(){n.css("display","none");f(document.body).append(n);var a=eval(k.options.KnockoutObjectName);ko.applyBindings(a,n[0]);a=n[0].innerHTML;ko.cleanNode(n[0]);n.remove();n[0].innerHTML=a;n.css("display","block")},0));b.element.width();
p.css({width:m+"px",position:"absolute"});p.find(".ui-head-div").css({width:m+"px"}).addClass("utrst");n.css({left:m+"px"});f("script[src*=jquery]",document);f("script[src*=html2canvas]",document);if(html2canvas){b=f("link",document);for(var h=f("style"),A="",r=0;r<b.length;r++)A+=b[r].outerHTML+"\n";for(r=0;r<h.length;r++)location.href.replace(/([^\/]*$)/,""),A+=h[r].outerHTML;!1===e.IsChartVisible?f('<div id="__gantt__test" style="height:'+f("tbody",d).height()+'px;">\n'+p[0].outerHTML+"\n</div>\n"):
f('<div id="__gantt__test" style="height:'+n.height()+'px;">\n'+(!0==e.IsGridVisible?p[0].outerHTML:"")+"\n"+n[0].outerHTML+"\n</div>\n");var x=function(a,c){var b=void 0==e.Format?"png":e.Format,h=!0;try{if(e.AfterCanvasGenerated&&"function"==typeof e.AfterCanvasGenerated&&(h=e.AfterCanvasGenerated(a)),!1!=h){var d=a.toDataURL("image/"+b+"");$image=f("<img src="+d+"></img>");f(newWindow.document.body).html("<img id='__RQ_PrintImage' src="+d+" style='width:100%;'></img>").ready(function(){var h=this.document.title;
if(c){var g=function(){f("#__RQ_iframeCont").remove()};window.__RQ_iframe?(__RQ_iframe.onafterprint=g,setTimeout(function(){"function"==typeof __RQ_iframe.print?(__RQ_iframe.focus(),__RQ_iframe.print()):(__RQ_iframe.contentWindow.focus(),__RQ_iframe.contentWindow.print(),g())},1)):(this.onafterprint=g,this.print());this.close()}else if(window.Blob)RadiantQ.Gantt.Utils.SaveCanvasAsImage(a,h+"."+b+""),f("#__RQ_iframeCont").remove(),L||alert("Please close this new window when download is complete.");
else{var e=window.open("","_blank");e.document.write("<!DOCTYPE html>\n",'<html xmlns="http://www.w3.org/1999/xhtml">\n',"<head>\n","<title>"+h+"</title>\n","</head>\n","<body>\n","<img src="+d+"/>\n","</body>\n","</html>");e.document.close()}}.bind(newWindow))}}catch(g){window.console&&console.error(g.message+" in afterCanvasGenerated.")}},C=e.Title||document.title,L;(function(){window.RadiantQ.Gantt.Utils.AfterIframeContentLoad=function(b){delete window.RadiantQ.Gantt.Utils.AfterIframeContentLoad;
var h=f("#__gantt__test",b.document),d=f(".ui-grid",b.document),g=0,m=0;0==d.length?(g=f(".rq-gc-rowsParent-table",b.document)[0].scrollHeight,m=f(".rq-tsh-div",b.document).height()+g):(g=f(".grid-body-actualContent",b.document)[1].scrollHeight,m=f(".rq-grid-head-parent",b.document).height()+f(".ui-grid-foot",b.document).height()+g);c(h,a,g,m);f(b.document).ready(function(){function c(){f(".ui-gridpanel",b.document).css("visibility","hidden");var d=f("#printableGanttChart",b.document).css({left:0});
html2canvas(d,{allowTaint:!0,useCORS:!0,onrendered:function(c){c=c.getContext("2d");g.putImageData(c.getImageData(0,0,d.width(),m),k+6,0);x(h,a)}})}var h=document.createElement("canvas");h.width=p.width()+n.width();h.height=m;var g=h.getContext("2d"),k=d.width();0<window.navigator.userAgent.toLowerCase().indexOf("trident")&&(8192<m||8192<d.width()+n.width())?alert(RadiantQ_PrintErrorString):e.IsGridVisible?html2canvas(d,{allowTaint:!0,useCORS:!0,onrendered:function(b){b=b.getContext("2d");g.putImageData(b.getImageData(0,
0,k,m),0,0);!1!=e.IsChartVisible?c():x(h,a)}}):!1!=e.IsChartVisible&&c()})};L=document.createElement("iframe");L.id="__RQ_iframe";L.width=window.innerWidth;L.height=window.innerHeight;f("#__RQ_iframeCont").remove();var b=f("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(L);f(document.body).append(b);setTimeout(function(){L.contentWindow.document.open();newWindow=L.contentWindow;L.contentWindow.document.write("<!DOCTYPE html>\n",'<html xmlns="http://www.w3.org/1999/xhtml">\n',
"<head>\n","<title>"+C+"</title>\n",""+A+"\n","<style>\n","div.rq-gc-progressbar, div.progressbarStyle {border-radius: 0px !important;}",".rq-timeUnit-div{overflow:initial !important;}\n",".ui-grid-body {overflow-x: hidden !important; overflow-y: hidden !important;}\n","</style>\n",'<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\n','<body onload="window.parent.RadiantQ.Gantt.Utils.AfterIframeContentLoad(this)">\n','<div id="__gantt__test" style="height:'+n.height()+"px; width:"+
window.innerWidth+'px;">\n',""+(!0==e.IsGridVisible?p[0].outerHTML:"")+"\n",""+n[0].outerHTML+"\n","</div>\n","</body>\n","</html>");L.contentWindow.document.close();p.empty();n.empty();n.empty()},0);return L.contentWindow})();setTimeout(function(){RadiantQ.Gantt.View.IActivityView.prototype.TableRow=w;RadiantQ.Gantt.View.IActivityView.prototype.ChartRow=u;RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow=v;RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow=z},100)}else window.console?
console.error("html2canvas.js file is not found."):alert("html2canvas.js file is not found.")}};RadiantQ.Gantt.ExportToImage=function(b,e){b||(b={});"FlexyGantt"==e.GanttType?b.NoOfRowsInPage=e.FlatItemsSource.FlatItemsSource.length:e.options.DataSource&&(b.NoOfRowsInPage=e.options.DataSource.length);RadiantQ.Gantt.RQPrint(e,b,function(a){var c=document.title,d="png";if(b){if(b.AfterCanvasGenerated&&"function"==typeof b.AfterCanvasGenerated&&(canProcessDefault=b.AfterCanvasGenerated(a[0]),!1==canProcessDefault))return!1;
b.Title&&(c=b.Title);b.Format&&(d=b.Format)}RadiantQ.Gantt.Utils.SaveCanvasAsImage(a[0],c+"."+d+"");return!1})};RadiantQ.Gantt.PrintWYSIWYG=function(b,e){function a(a,c){var b=document.createElement("canvas");b.width=c.width();b.height=c.height();var d=b.getContext("2d");html2canvas(c,{allowTaint:!0,useCORS:!0,onrendered:function(e){var f=e.getContext("2d");d.putImageData(f.getImageData(0,0,c.width(),c.height()),0,0);a(e,b,c)}})}function c(a,c,b){a=d="<img class='printableImg' src="+a.toDataURL("image/png")+
" style='width:100%;'></img>";c=e;iframe=document.createElement("iframe");iframe.id="__RQ_iframe";iframe.width=window.innerWidth;iframe.height=window.innerHeight;f("#__RQ_iframeCont").remove();b=f("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(iframe);f(document.body).append(b);iframe.contentWindow.document.open();iframe.contentWindow.document.write('<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<title>'+c+'</title>\n<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\n</head><script>function printGantt(){  parent.restorePrintDefaultSettings(); }\x3c/script><body onload="this.window.printGantt()">\n'+
a+"</body>\n</html>");iframe.contentWindow.document.close()}var d;e=e?e:document.title;b&&(window.restorePrintDefaultSettings=function(){function a(){f("#__RQ_iframeCont").remove()}window.__RQ_iframe?setTimeout(function(){"function"==typeof __RQ_iframe.print?(__RQ_iframe.focus(),__RQ_iframe.print()):(__RQ_iframe.contentWindow.focus(),__RQ_iframe.contentWindow.print());a()},1):(this.onafterprint=a,this.print())},a(c,b))};RadiantQ.Gantt.PrintImageUsingIframe=function(b,e,a){window.restorePrintDefaultSettings=
function(){function c(){f("#__RQ_iframeCont").remove();a.AfterPrintComplete.raise()}window.__RQ_iframe?setTimeout(function(){"function"==typeof __RQ_iframe.print?(__RQ_iframe.focus(),__RQ_iframe.print()):(__RQ_iframe.contentWindow.focus(),__RQ_iframe.contentWindow.print());c()},1):(this.onafterprint=c,this.print())};(function(a,b){iframe=document.createElement("iframe");iframe.id="__RQ_iframe";iframe.width="100%";iframe.height="100%";f("#__RQ_iframeCont").remove();var g=f("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(iframe);
f(document.body).append(g);iframe.contentWindow.document.open();iframe.contentWindow.document.write('<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<title>'+b+'</title>\n<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\n<style type="text/css">\n@media print {button, .ui-grid, #ChartRow {display: none;}.printableImg {display: block;}.printableImg:nth-child(n+2) {page-break-before: always;}}</style></head><script>function printGantt(){ parent.restorePrintDefaultSettings();}\x3c/script><body onload="this.window.printGantt()" style="margin:0px;">\n'+
a+"</body>\n</html>");iframe.contentWindow.document.close();f(".rq-busyIndicator").remove()})(b,e)}})(jQuery);
(function(){Dictionary=function(){this._collections=[];this.currIndex=-1;this.keys=[];this._asArray=[];this.CollectionChanged=new ObjectEvent("CollectionChanged");this._asArray.CollectionChanged=new ObjectEvent("CollectionChanged");this.keys.indexOf=function(f){if(f&&f.equals){for(var b=0;b<this.length;b++)if(this[b].equals(f))return b;return-1}return Array.prototype.indexOf?Array.prototype.indexOf.call(this,f):Array.indexOf(this,f)};this.length=this._collections.length;this.asArray=this._asArray;
this.Keys=this.keys;return this};Dictionary.prototype.Add=function(f,b){null==f||void 0==f?window.console&&console.log(f+" is not a valid key for Dictionary."):("string"===typeof f||"number"===typeof f?this[f]=b:"function"==typeof f.ID_M?this[f.ID_M()]=b:void 0!=f.ID&&(this[f.ID]=b),this.currIndex=this.keys.indexOf(f),-1==this.currIndex?(this.currIndex=this._asArray.length,this.keys.push(f),this._collections.push({key:f,value:b}),this._asArray.push(b)):(this._collections[this.currIndex].value=b,this._asArray[this.currIndex]=
b),this.length=this._collections.length,this.asArray=this._asArray,this.Keys=this.keys,this.OnCollectionChanged(null,b,this.currIndex))};Dictionary.prototype.Contains=function(f){this.currIndex=this.keys.indexOf(f);return-1==this.currIndex?!1:!0};Dictionary.prototype.indexOf=function(f){return this._asArray.indexOf(f)};Dictionary.prototype.Remove=function(f){"string"===typeof f||"number"===typeof f?delete this[f]:f.ID_M?delete this[f.ID_M()]:f.ID&&delete this[f.ID];f=this.keys.indexOf(f);if(-1!=f){var b=
this._asArray[f];this._collections.splice(f,1);this.keys.splice(f,1);this._asArray.splice(f,1)}this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;-1!=f&&this.OnCollectionChanged(b,null,f);return!1};Dictionary.prototype.RemoveAt=function(f){if(-1!=f&&0<=f&&f<this.length){var b=this._asArray[f];this._collections.splice(f,1);var e=this.keys.splice(f,1);"string"===typeof e||"number"===typeof e?delete this[e]:e.ID_M?delete this[e.ID_M()]:e.ID&&delete this[e.ID];this._asArray.splice(f,
1)}this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;-1!=f&&this.OnCollectionChanged(b,null,f);return!1};Dictionary.prototype.Clear=function(){var f=this.keys.indexOf;this.keys=[];this.keys.indexOf=f;this._collections=[];this._asArray=[];this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;this.OnCollectionChanged()};Dictionary.prototype.GetItemByKey=function(f){f=this.keys.indexOf(f);return-1==f||f>=this.length?null:this._collections[f].value};
Dictionary.prototype.GetItemByIndex=function(f){return this._collections.length<=f||0>f?null:this._collections[f].value};Dictionary.prototype.CollectionChanged=new ObjectEvent("CollectionChanged");Dictionary.prototype.OnCollectionChanged=function(f,b,e){var a={};if(0<this.CollectionChanged.fn.length||this._asArray.CollectionChanged&&0<this._asArray.CollectionChanged.fn.length)f||b?f?a=new NotifyCollectionChangedEventArgs(f,null,e):b&&(a=new NotifyCollectionChangedEventArgs(null,b,e)):a=new NotifyCollectionChangedEventArgs,
0<this.CollectionChanged.fn.length&&this.CollectionChanged.raise(this.asArray,a),0<this._asArray.CollectionChanged.fn.length&&this._asArray.CollectionChanged.raise(this.asArray,a)};Dictionary.prototype.subscribe=function(f){this.CollectionChanged.subscribe(f)};Dictionary.prototype.Dispose=function(){this._collections=[];this.currIndex=-1;this.keys=[];this._asArray=[];this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null;this.length=this._collections.length;this.asArray=
this._asArray;this.Keys=this.keys};NotifyCollectionChangedEventArgs=function(f,b,e){f||b||(this.NewItems=this.OldItems=null,this.type="reset",this.Action=NotifyCollectionChangedAction.Reset);f&&(this.type="remove",this.OldStartingIndex=e,f instanceof Array?this.OldItems=f.slice(0):(this.OldItems=[],this.OldItems.push(f)));b&&(this.type="insert",this.NewStartingIndex=e,b instanceof Array?this.NewItems=b.slice(0):(this.NewItems=[],this.NewItems.push(b)))};NotifyCollectionChangedAction={Add:0,Remove:1,
Replace:2,Reset:4};RadiantQ.Gantt&&(RadiantQ.Gantt.Dictionary=Dictionary,RadiantQ.Gantt.NotifyCollectionChangedEventArgs=NotifyCollectionChangedEventArgs);RadiantQ&&(RadiantQ.Dictionary=Dictionary,RadiantQ.NotifyCollectionChangedEventArgs=NotifyCollectionChangedEventArgs,RadiantQ.NotifyCollectionChangedAction=NotifyCollectionChangedAction)})();var Utils=RadiantQ.Gantt.Utils;Utils.DelayUpdateUtil={};Utils.DelayUpdateUtil._dirtyDic=new RadiantQ.Gantt.Dictionary;Utils.DelayUpdateUtil._dirtyList=[];
Utils.DelayUpdateUtil._isUpdating=!1;Utils.DelayUpdateUtil.IsUpdating=function(){return Utils.DelayUpdateUtil._isUpdating};Utils.DelayUpdateUtil.BeginUpdate=function(){if(Utils.DelayUpdateUtil.IsUpdating())return!1;Utils.DelayUpdateUtil._dirtyDic.Clear();Utils.DelayUpdateUtil._dirtyList=[];return Utils.DelayUpdateUtil._isUpdating=!0};Utils.DelayUpdateUtil.TryDelayedUpdate=function(f,b,e){Utils.DelayUpdateUtil.IsUpdating()?Utils.DelayUpdateUtil.DelayUpdate(f,b,e):f.PartialUpdate(b)};
Utils.DelayUpdateUtil.RemoveUpdates=function(f){RemoveInArray(Utils.DelayUpdateUtil._dirtyList,f)};
Utils.DelayUpdateUtil.DelayUpdate=function(f,b,e){var a=Utils.DelayUpdateUtil._dirtyList;try{if(!1==ContainsValueInArray(Utils.DelayUpdateUtil._dirtyList,f)){if(null!=e)for(var c=-1,d=0;d<a.length;d++){if(g=a[d],c++,g instanceof e){a.splice(c,0,f);break}}else a.push(f);null!=b&&Utils.DelayUpdateUtil._dirtyDic.Add(f,b)}else{var g=Utils.DelayUpdateUtil._dirtyDic.GetItemByKey(f);g&&g!=b&&Utils.DelayUpdateUtil._dirtyDic.Remove(f)}}catch(h){window.console&&console.error(h.message+" from Utils.DelayUpdateUtil.DelayUpdate method.")}};
Utils.DelayUpdateUtil.EndUpdate=function(){Utils.DelayUpdateUtil._isUpdating=!1;var f=Utils.DelayUpdateUtil._dirtyList,b=Utils.DelayUpdateUtil._dirtyDic;Utils.DelayUpdateUtil._dirtyDic=new RadiantQ.Gantt.Dictionary;Utils.DelayUpdateUtil._dirtyList=[];for(var e=f.length-1;0<=e;e--){var a=f[e],c=b.GetItemByKey(a);c?a.PartialUpdate(c):a.TotalUpdate()}};Utils.DelayUpdateUtil.CopyDictionary=function(f,b){for(var e=0;e<f.Keys.length;e++){var a=f.Keys[e];b[a]=f[a]}};
Utils.DelayUpdates=function(){this.startedBeginUpdate=Utils.DelayUpdateUtil.BeginUpdate();this.Dispose=function(){this.startedBeginUpdate&&Utils.DelayUpdateUtil.EndUpdate()}};Utils.IUIUpdateable=function(){this.PartialUpdate=function(f){};this.TotalUpdate=function(){}};
(function(f){RadiantQ.FlexyGantt.TasksPositionTracker=function(b,e,a){this._fg=b;this._sourceItems=e;this._startTimeBinding=a;this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.subscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);this._startTimesList=new RadiantQ.FlexyGantt.StartTimesList;this.InitOrderedList()};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.FlexyGantt_M=function(){return this._fg};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.SourceItems_M=
function(){return this._sourceItems};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.StartTimeBinding_M=function(){return this._startTimeBinding};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"FlexyGantt",{get:function(){return this._fg}}),Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"SourceItems",{get:function(){return this._sourceItems}}),Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,
"StartTimeBinding",{get:function(){return this._startTimeBinding}}));RadiantQ.FlexyGantt.TasksPositionTracker.prototype.UpdateTimes=function(b,e){this._startTimesList.RemoveStartTimeFromList(e);this._startTimesList.AddStartTimeToList(b)};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.AreTasksAvailableBefore=function(b){var e=this._startTimesList.GetMatchingEntry(b);return-1==e?!1:b<=this._startTimesList.GetTimeAtIndex(e)&&0<e?!0:b>this._startTimesList.GetTimeAtIndex(e)?!0:!1};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetNextTaskStartTimeLeft=
function(b){var e=this._startTimesList.GetMatchingEntry(b);return-1==e?Date.MinValue:b<=this._startTimesList.GetTimeAtIndex(e)&&0<e?this._startTimesList.GetTimeAtIndex(e-1):b>this._startTimesList.GetTimeAtIndex(e)?this._startTimesList.GetTimeAtIndex(e):Date.MinValue};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.AreTasksAvailableAfter=function(b){var e=this._startTimesList.GetMatchingEntry(b);return-1==e?!1:b<=this._startTimesList.GetTimeAtIndex(e)?!0:!1};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetNextTaskStartTimeRight=
function(b){var e=this._startTimesList.GetMatchingEntry(b);return-1==e?Date.MinValue:b<=this._startTimesList.GetTimeAtIndex(e)?this._startTimesList.GetTimeAtIndex(e):Date.MinValue};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetStartTime=function(b){if(null==b)return Date.MinValue;var e=this._startTimeBinding.Property;b=(new RadiantQ.Gantt.Utils.ValueBinder(b,this.StartTimeBinding_M(),null,RadiantQ.Gantt.BindingMode.OneWay))._value;this._startTimeBinding.Property=e;return b};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.TimeRangeBasedItemsFilter_CollectionChanged=
function(b,e){this.OnSourceItemsCollectionChanged(e)};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.OnSourceItemsCollectionChanged=function(b){if("Add"==b.Action)for(var e=0;e<b.NewItems.length;e++){var a=b.NewItems[e];this._startTimesList.AddStartTimeToList(this.GetStartTime(a))}else if("Remove"==b.Action)for(e=0;e<b.OldItems.length;e++)a=b.OldItems[e],this._startTimesList.RemoveStartTimeFromList(this.GetStartTime(a));else this.InitOrderedList()};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.InitOrderedList=
function(){this._startTimesList.Clear();for(var b=this.SourceItems_M(),e=0;e<b.length;e++)this._startTimesList.AddStartTimeToList(this.GetStartTime(b[e]))};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.Dispose=function(){this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.unsubscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);this._startTimesList.Clear()};RadiantQ.FlexyGantt.StartTimesList=function(){this._orderedStartTimes=[];this._timeVsEntries=new RadiantQ.Gantt.Dictionary};
RadiantQ.FlexyGantt.StartTimesList.prototype.GetTimeAtIndex=function(b){return this._orderedStartTimes.length<=b?Date.MinValue:this._orderedStartTimes[b]};RadiantQ.FlexyGantt.StartTimesList.prototype.AddStartTimeToList=function(b){if(0==this._orderedStartTimes.length)this._orderedStartTimes.push(b),this._timeVsEntries.Add(b,1);else{var e=this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,b);this._orderedStartTimes[e].equals(b)?(b=this._timeVsEntries.keys.indexOf(b),b=this._timeVsEntries._collections[b],
this._timeVsEntries.Add(b.key,++b.value)):this._orderedStartTimes[e]<b?(this._orderedStartTimes.splice(e+1,0,b),this._timeVsEntries.Add(b,1)):this._orderedStartTimes[e]>b&&(this._orderedStartTimes.splice(e,0,b),this._timeVsEntries.Add(b,1))}};RadiantQ.FlexyGantt.StartTimesList.prototype.RemoveStartTimeFromList=function(b){if(0!=this._orderedStartTimes.length){var e=this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,b);if(this._orderedStartTimes[e].equals(b)){var a=this._timeVsEntries.GetItemByKey(b);
a--;0==a?(this._orderedStartTimes.splice(e,1),this._timeVsEntries.Remove(b)):this._timeVsEntries.Add(b,a)}}};RadiantQ.FlexyGantt.StartTimesList.prototype.Clear=function(){this._timeVsEntries.Clear();this._orderedStartTimes=[]};RadiantQ.FlexyGantt.StartTimesList.prototype.GetMatchingEntry=function(b){return 0==this._orderedStartTimes.length?-1:this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,b)};RadiantQ.FlexyGantt.StartTimesList.prototype.GetMatchingEntryRecursively=function(b,
e,a){if(a<this._orderedStartTimes[b])return b;if(this._orderedStartTimes[e]<a)return e;if(a.equals(this._orderedStartTimes[b]))return b;if(a.equals(this._orderedStartTimes[e]))return e;var c=Math.floor((e+b)/2);return this._orderedStartTimes[c].equals(a)?c:this._orderedStartTimes[c]<a?this.GetMatchingEntryRecursively(c+1,e,a):this.GetMatchingEntryRecursively(b,c,a)}})(jQuery);
(function(){var f=RadiantQ.Gantt;f.TimePeriod={};f.TimePeriod=function(b,e,a,c){if(2>arguments.length)throw Error("Please pass the start and finish date or start and duration as args");this._start=b;e&&!a&&(a=new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(b,e));a&&!e&&(e=b.addTimeSpan(a));this._end=e;this._duration=a;this.IsReadOnly=c;return this};f.TimePeriod.prototype.notifyChange=function(b,e){"Start"==b?this.UpdateEnd():"End"==b?this.UpdateDuration():"Duration"==b&&this.UpdateEnd()};
f.TimePeriod.prototype.Start_M=function(b){if(0==arguments.length)return this._start;if(!this._start||!this._start.equals(b)){if(this.IsReadOnly)throw Error("Cannot set Start on a ReadOnly TimePeriod.");this._start=b;this.notifyChange("Start",b)}};f.TimePeriod.prototype.End_M=function(b){if(0==arguments.length)return this._end;if(!this._end||!this._end.equals(b)){if(this.IsReadOnly)throw Error("Cannot set Duration on a ReadOnly TimePeriod.");this._end=b;this.notifyChange("End",b)}};f.TimePeriod.prototype.Duration_M=
function(b){if(0==arguments.length)return this._duration;if(!this._duration||!this._duration.equals(b)){if(this.IsReadOnly)throw Error("Cannot set End on a ReadOnly TimePeriod.");this._duration=b;this.notifyChange("Duration",b)}};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.TimePeriod.prototype,"Start",{get:function(){return this._start},set:function(b){if(!this._start||!Start.equals(b)){if(this.IsReadOnly)throw Error("Cannot set Start on a ReadOnly TimePeriod.");this._start=b;this.notifyChange("Start",
b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.TimePeriod.prototype,"End",{get:function(){return this._end},set:function(b){if(!this._end||!this._end.equals(b)){if(this.IsReadOnly)throw Error("Cannot set Duration on a ReadOnly TimePeriod.");this._end=b;this.notifyChange("End",b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.TimePeriod.prototype,"Duration",{get:function(){return this._duration},set:function(b){if(!this._duration||!this._duration.equals(b)){if(this.IsReadOnly)throw Error("Cannot set End on a ReadOnly TimePeriod.");
this._duration=b;this.notifyChange("Duration",b)}},enumerable:!0,configurable:!0}));f.TimePeriod.prototype.UpdateEnd=function(){this._end=this._start.clone().addTimeSpan(this._duration)};f.TimePeriod.prototype.UpdateDuration=function(){this._duration=new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(this._start,this._end)};f.TimePeriod.prototype.Equals=function(b){return this.Start_M().equals(b.Start_M())&&this._duration.equals(b._duration)};f.TimePeriod.prototype.CompareTo=function(b){return this.Start.compareTo(b.Start)};
f.TimePeriod.prototype.clone=function(b){return new TimePeriod(b.Start,b.End,null,b.IsReadOnly)};f.TimePeriod.prototype.Intersect=function(b){if(!b)return null;var e,a,c,d=0<=this._duration._totalMS,g=0<=b._duration._totalMS;d?(a=this._start,c=this._end):(a=this._end,c=this._start);g?(e=b._start,b=b._end):(e=b._end,b=b._start);if(a>=b||c<=e)return null;e=a>e?a:e;c=c<b?c:b;return d==g?new RadiantQ.Gantt.TimePeriod(e,c):new RadiantQ.Gantt.TimePeriod(c,e)};f.TimePeriod.IsPositiveDuration=function(b){return 0<=
b._duration.totalMilliseconds_M()};f.TimePeriod.prototype.Union=function(b){if(!b)return this;var e=RQTimeSpan.Zero_M(),a,c,d,g;this._duration>=e?(d=this.Start_M(),g=this.End_M()):(d=this.End_M(),g=this.Start_M());b._duration>=e?(a=b.Start_M(),c=b.End_M()):(a=b.End_M(),c=b.Start_M());a=d<a?d:a;c=g>c?g:c;return this._duration>=e==b._duration>=e?new f.TimePeriod(a,c):new f.TimePeriod(c,a)}})();
(function(f){var b=RadiantQ.Gantt;b.TimePeriodCollection={};b.TimePeriodCollection=function(b){b&&!f.isArray(b)?(this._intervals=[],this._intervals.push(b),this.Start=b._start,this.Duration=b._duration,this.Finish=b._end,this.length=1):(this._intervals=[],this.Start=Date.MaxValue,this.Duration=new RQTimeSpan(0,0,0,0,0,0),this.Finish=Date.MinValue,this.length=this._intervals.length,b&&this.AddRange(b));return this};b.TimePeriodCollection.prototype.Add=function(e){e.IsReadOnly=!0;e._duration<RQTimeSpan.Zero_M()&&
(e=new b.TimePeriod(e._end,e._start,null,!0));this.length=this._intervals.length;if(e._start<this.Finish)for(var a=0;a<this.length;a++){var c=this._intervals[a];if(e._end<c.Start){this._intervals.splice(a,0,e);this.length=this._intervals.length;e._start<this.Start&&(this.Start=e._start);this.Duration=this.Duration.add(e._duration);return}if(e._start<c.Start){var d=0<a?this._intervals[a-1]:null;if(!d||e._start>d.Value.End){e=c.Union(e);this._intervals[a]=e;e.Start<this.Start&&(this.Start=e.Start);
this.Duration=this.Duration.add(e.Duration_M().subtract(c.Duration_M()));e.End>this.Finish&&(this.Finish=e.End);return}e=c.Union(d.Value);this._intervals.splice(a,1);this.length=this._intervals.length;this._intervals[a-1]=e;this.Duration=this.Duration.add(e.Duration.subtract(c.Duration));e.End>this.Finish&&(this.Finish=e.End);return}if(e._start<c.End){if((d=a<this.length-1?this._intervals[a+1]:null)&&e._end<d.Start){e=c.Union(e);this._intervals[a]=e;this.Duration=this.Duration.add(e.Duration.subtract(c.Duration));
e.End>this.Finish&&(this.Finish=e.End);return}e=c.Union(d);this._intervals.splice(a,1);this.length=this._intervals.length;this._intervals[a]=e;this.Duration=this.Duration.add(e.Duration.subtract(c.Duration));e.End>this.Finish&&(this.Finish=e.End);return}}this._intervals.push(e);e._start<this.Start&&(this.Start=e._start);this.Finish=e._end;this.Duration=this.Duration.add(e._duration)};b.TimePeriodCollection.prototype.AddRange=function(b){for(var a=0;a<b.length;a++)this.Add(b[a])};b.TimePeriodCollection.prototype.Ascending=
function(){return this._intervals.sort};b.TimePeriodCollection.prototype.Descending=function(){this._intervals.sort();return this._intervals.sort()};b.TimePeriodCollection.prototype.getItemByIndex=function(b){return this._intervals[b]};b.TimePeriodCollection.prototype.Count=function(){return this._intervals.length}})(jQuery);
(function(){function f(){RadiantQ.ValueConverter.call(this)}var b=RadiantQ.Gantt;b.WorkTimeSchedule={};b.WorkTimeSchedule.TaskResolutionInfo={};RadiantQ.Gantt.guidGenerator=function(){var b=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};b.WorkTimeSchedule=function(b,a){this.IsCachingEnabled=!0;this._guid=RadiantQ.Gantt.guidGenerator();this._cachedResolvedIntervals={};if(null==a)throw Error("dayCalendarProvider","The specified CalendarProvider delegate cannot be null.");
this.Name=b;this.scheduleProvider=a;this.WorkTimeScheduleProvider=function(a){return this.scheduleProvider(a)};return this};b.WorkTimeSchedule.prototype.ClearCache=function(){this._cachedResolvedIntervals={}};b.WorkTimeSchedule.CachedResolvedIntervals=function(){this._cachedResolvedIntervals={}};b.WorkTimeSchedule.CachedResolvedIntervals.prototype.Add=function(b,a,c){this._cachedResolvedIntervals[b._testName]||(this._cachedResolvedIntervals[b._testName]=a)};b.WorkTimeSchedule.CachedResolvedIntervals.prototype.ContainsKey=
function(b,a){return this._cachedResolvedIntervals[b._testName]?!0:!1};b.WorkTimeSchedule.CachedResolvedIntervals.prototype.GetIntervalsFromCache=function(b,a){var c=this._cachedResolvedIntervals[b._testName];return c?c:null};b.WorkTimeSchedule.CachedContWorkingTimes=function(){this._cachedContWorkingTimes={}};b.WorkTimeSchedule.CachedContWorkingTimes.prototype.Add=function(b,a){this._cachedContWorkingTimes[b]||(this._cachedContWorkingTimes[b]=a)};b.WorkTimeSchedule.CachedContWorkingTimes.prototype.ContainsKey=
function(b){return this._cachedContWorkingTimes[b]?!0:!1};b.WorkTimeSchedule.CachedContWorkingTimes.prototype.GetIntervalsFromCache=function(b){return(b=this._cachedContWorkingTimes[b])?b:null};b.WorkTimeSchedule._cachedStdWorkingTimes=new b.WorkTimeSchedule.CachedContWorkingTimes;b.WorkTimeSchedule._continuousSchedule=null;b.WorkTimeSchedule.cachedContWorkingTimes={};b.WorkTimeSchedule.prototype.GetResolvedIntervals=function(e,a,c,d,g){e=e.clone();var h=RQTimeSpan.Zero_M();0>a._totalMS&&window.console&&
console.error("requiredWorkEffort: Required work effort must be a positive TimeSpan.");0>d._totalMS&&window.console&&console.error("maxSearchEffort: Maximum search effort must be a positive TimeSpan.");var m=this.IsCachingEnabled?new b.WorkTimeSchedule.TaskResolutionInfo(e,a,c,d,g):null;if(m){var f=this._cachedResolvedIntervals[m._testName];if(f)return f}var f=[],l=new RadiantQ.Gantt.TimePeriod(e,null,g?d:h.subtract(d)),n=!1,p=Date.MaxValue;if(g&&e<p||!g&&e>Date.MinValue)for(p=e.Date();0<=a._totalMS&&
!n&&!(g&&p-e>d._totalMS||!g&&e-p.clone().addDays(1)>d._totalMS);p=p.addDays(g?1:-1)){var q=this.WorkTimeScheduleProvider(p);if(null!=q){if(q.Start<p||864E5<q.Duration._ticks)throw Error("CalendarProvider must provide time intervals that start and finish on the specified date.");for(var q=q._intervals,r=0;r<q.length&&!n;r++)if(workingTime=q[r],(!g||workingTime._end>l._start)&&(g||workingTime._start<l._start)){var t=workingTime.Intersect(l);if(!t){n=!0;break}var s=[];s.push(t);if(null!=c)for(var w=
0;w<c.length&&!n;w++)if(schedule=c[w],null!=schedule){for(var u=[],t=0;t<s.length;t++)for(var v=s[t],v=schedule.GetResolvedIntervals(v.Start,RQTimeSpan.MaxValue_M(),null,v._duration>=h?v.Duration:new RQTimeSpan(-v.Duration.totalMilliseconds_M()),g),z=0;z<v.length;z++)u.push(v[z]);s=u}for(t=0;t<s.length&&!n;t++)if(w=s[t],u=w._duration,0!=u._totalMS||0>=a._totalMS){v=a.getEqualNegative();if(g&&u._totalMS>a._totalMS||!g&&u._totalMS<v._totalMS)w.Duration_M(0<=u._totalMS?a:v),u=w._duration;0==u._totalMS&&
0!=a._totalMS||f.push(w);a=g?a.subtract(u):a.add(u);if(0==a._totalMS){n=!0;break}}}}}void 0!=m&&(this._cachedResolvedIntervals[m._testName]=f);return f};b.WorkTimeSchedule.TwentyFourByFiveScheduleProvider=function(e){e||(e=new Date);_cachedContWorkingTimes=b.WorkTimeSchedule.cachedContWorkingTimes;e=e.Date();var a=e.toDateString(),c=_cachedContWorkingTimes[a];return void 0===c?(c=e.getDay(),0<c&&5>=c?(e=new b.TimePeriodCollection(new b.TimePeriod(e,e.clone().addDays(1),new RQTimeSpan(1,0,0,0,0,864E5))),
_cachedContWorkingTimes[a]=e):_cachedContWorkingTimes[a]=null):c};b.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider=function(e){e=e.Date();if(!b.WorkTimeSchedule._cachedStdWorkingTimes.ContainsKey(e)){var a=e.getDay();if(0<a&&5>=a)return a=new b.TimePeriodCollection,a.Add(new b.TimePeriod(e.clone().addHours(8),null,new RQTimeSpan(0,8,0,0,0))),b.WorkTimeSchedule._cachedStdWorkingTimes.Add(e,a),a;b.WorkTimeSchedule._cachedStdWorkingTimes.Add(e,null);return null}return b.WorkTimeSchedule._cachedStdWorkingTimes.GetIntervalsFromCache(e)};
b.WorkTimeSchedule.SearchBreakTimeSpan=new RQTimeSpan(3650,0,0,0,0);b.WorkTimeSchedule.prototype.GetEffort=function(e,a,c){a=b.Utils.TimeComputingUtils.GetTimeSpan(e,a);return(new b.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(e,RQTimeSpan.MaxValue_M(),c,a))).Duration};b.WorkTimeSchedule.prototype.GetWorkingDayIntervals=function(e,a,c){a=b.Utils.TimeComputingUtils.GetTimeSpan(e,a);return(new b.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(e,RQTimeSpan.MaxValue_M(),c,a)))._intervals};
b.WorkTimeSchedule.prototype.GetStart=function(e,a,c){return(new b.TimePeriodCollection(this.ConvertToPreviousWorkingTimeIntervals(e,a,c))).Start};b.WorkTimeSchedule.prototype.GetEnd=function(e,a,c){return(new b.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(e,a,c))).Finish};b.WorkTimeSchedule.prototype.ConvertToNextWorkingTime=function(b,a){var c=this.ConvertToNextWorkingTimeIntervals(b,RQTimeSpan.Zero_M(),a);return 0<c.length?c[0]._start:Date.MaxValue};b.WorkTimeSchedule.prototype.ConvertToNextWorkingTimeIntervals=
function(e,a,c,d){return d?this.GetResolvedIntervals(e,a,c,d,!0):this.GetResolvedIntervals(e,a,c,b.WorkTimeSchedule.SearchBreakTimeSpan,!0)};b.WorkTimeSchedule.prototype.ConvertToPreviousWorkingTime=function(b,a){var c=this.ConvertToPreviousWorkingTimeIntervals(b,RQTimeSpan.Zero_M(),a);return 0<c.length?c[0].Start_M():Date.MinValue};b.WorkTimeSchedule.prototype.ConvertToPreviousWorkingTimeIntervals=function(e,a,c,d){return d?this.GetResolvedIntervals(e,a,c,d,!1):this.GetResolvedIntervals(e,a,c,b.WorkTimeSchedule.SearchBreakTimeSpan,
!1)};b.WorkTimeSchedule.prototype.ConverToPreviousWorkingTime=function(b,a){var c=this.ConvertToPreviousWorkingTimeIntervals(b,RQTimeSpan.Zero_M(),a);return 0<c.length?c[0]._start:Date.MinValue};b.WorkTimeSchedule.prototype.toString=function(){return null==this.Name?"":this.Name};b.WorkTimeSchedule._continuousSchedule||(b.WorkTimeSchedule._continuousSchedule=new b.WorkTimeSchedule("24X5 Schedule",b.WorkTimeSchedule.TwentyFourByFiveScheduleProvider));b.WorkTimeSchedule.Schedule24X5=b.WorkTimeSchedule._continuousSchedule;
null==b.WorkTimeSchedule._cached8X5ScheduleTimes&&(b.WorkTimeSchedule._cached8X5ScheduleTimes=new b.WorkTimeSchedule("8X5 Schedule",b.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider));b.WorkTimeSchedule.Schedule8X5=b.WorkTimeSchedule._cached8X5ScheduleTimes;b.WorkTimeSchedule.TaskResolutionInfo=function(b,a,c,d,g){this._start=b;b||(this._start=Date.MinValue);this._duration=a;a||(this._duration=RQTimeSpan.Zero_M());this._calenders=c;this._searchDuration=d;this.isForward=g;this._testName="start="+
b.toString()+", duration="+a.toString()+", searchDuration="+d.toString()+", isForward="+g};b.WorkTimeSchedule.TaskResolutionInfo.prototype.CompareTo=function(b){var a=0;0==a&&(a=this._start.compareTo(b._start));0==a&&(a=this._duration.compareTo(b._duration));if(0==a&&null!=this._calenders&&null!=b._calenders&&(a=this._calenders.length-b._calenders.length,a=0<a?1:0>a?-1:0,0==a))for(var c=0;c<this._calenders.length;c++){var d=this._calenders[c],g=b._calenders[c];if(d!=g&&(null!=d&&null!=g?(a=d._guid-
g._guid,a=0<a?1:0>a?-1:0):a=null==d?-1:1,0!=a))break}0==a&&(a=this._searchDuration.compareTo(b._searchDuration));0==a&&this.isForward==b.isForward&&(a=0);return a};b.WorkTimeSchedule.TaskResolutionInfo.prototype.equals=function(b){if(this._testName!=b._testName||this.isForward!=b.isForward)return!1;var a=0;if(0==a&&null!=this._calenders&&null!=b._calenders&&(a=this._calenders.length-b._calenders.length,a=0<a?1:0>a?-1:0,0==a))for(var c=0;c<this._calenders.length;c++){var d=this._calenders[c],g=b._calenders[c];
if(d!=g&&(null!=d&&null!=g?(a=d._guid-g._guid,a=0<a?1:0>a?-1:0):a=null==d?-1:1,0!=a))break}return 0==a?!0:!1};RadiantQ.Gantt.Calendar={};RadiantQ.Gantt.Calendar=function(b,a,c){this.id=b;this.Name=this.WeekDays=null;this.HolidayList=new RadiantQ.Gantt.Dictionary;this._schedule=null;3==arguments.length?(this.WeekDays=a,this.id=b,this.Name=c):1==arguments.length?(this.WeekDays=this.CreateWeekDayList(arguments[0]),this.CreateCalendarFromScheduleString(arguments[0]),this.id=-1,this.Name=""):2==arguments.length&&
(this.WeekDays=this.CreateWeekDayList(arguments[1]),this.CreateCalendarFromScheduleString(arguments[1]),this.id=-1,this.Name=arguments[0])};RadiantQ.Gantt.Calendar.prototype.Schedule_M=function(){null==this._schedule&&(this._schedule=RadiantQ.Gantt.Calendar.CreateSchedule(this));return this._schedule};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.Calendar.prototype,"Schedule",{get:function(){null==this._schedule&&(this._schedule=RadiantQ.Gantt.Calendar.CreateSchedule(this));
return this._schedule}});b.Calendar.prototype.CreateCalendarFromScheduleString=function(e){var a=e.split("HOL"),c=null;a[0].replace(/[ ,;]+$/,"").split(";");-1!=e.indexOf("HOL")&&(c=a[1].trim().replace(/[ ,;]+$/,"").split(";"));if(null!=c)try{for(a=0;a<c.length;a++){var d=b.ExceptionDay.ParseExceptionDay(c[a]),g=d.Date.getTime();!1==this.HolidayList.Contains(g)&&this.HolidayList.Add(g,d)}}catch(h){throw Error("Invalid  Date value encountered in this Calendar definition string: "+e);}};b.Calendar.prototype.CreateWeekDayList=
function(e){e=e.toLowerCase().split("hol");return b.Calendar.ParseWeekDays(e[0])};b.Calendar.CreateSchedule=function(e){if(e instanceof b.Calendar)return this.scheduleProvider=function(a){return e.GetWorkingTimes(a)},new b.WorkTimeSchedule(e.Name,this.scheduleProvider);if("string"===typeof e){var a=new b.Calendar(e);return b.Calendar.CreateSchedule(a)}};b.Calendar.prototype.GetWorkingTimes=function(e){var a=this.WeekDays[parseInt(Date.getDayNumberFromName(e.getDayName()))];if(this.IsHoliday(e))return null;
for(var c=new b.TimePeriodCollection,d=0;d<a.WorkingTimes.length;d++){var g=a.WorkingTimes[d],h=e.clone().Date();c.Add(new b.TimePeriod(h.addTimeSpan(g.From),h.addTimeSpan(g.To)))}return c};b.Calendar.prototype.IsHoliday=function(b){return!1==this.WeekDays[parseInt(Date.getDayNumberFromName(b.getDayName()))].IsWorkingDay||!0==this.HolidayList.Contains(b.getTime())};b.Calendar.prototype.GetWorkDayWorkingTimes=function(e){e=this.WeekDays[e];return 0<e.WorkingTimes.length?e.WorkingTimes:[new b.WorkDayWorkingTime(RQTimeSpan.Zero_M(),
new RQTimeSpan(0,24,0,0))]};b.Calendar.ParseWeekDays=function(e){for(var a=e.replace(/[ ,;]+$/,"").split(";"),c=[],d=0;7>d;d++)0==e.length?c.push(new b.WeekDay(!0,b.Calendar.GetWorkingTimes())):c.push(new b.WeekDay(!1));if(0==e.length)return c;for(d=0;d<a.length;d++)if(e=a[d],0!=e.length){e=e.trim();if(3>e.length)throw Error("Encoutered a day value string: '"+e.toString()+"' that is smaller than 3 days.");var g=e.substring(0,3);switch(g.toLowerCase()){case "sun":c[0]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(e.substring(3)));
break;case "mon":c[1]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(e.substring(3)));break;case "tue":c[2]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(e.substring(3)));break;case "wed":c[3]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(e.substring(3)));break;case "thu":c[4]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(e.substring(3)));break;case "fri":c[5]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(e.substring(3)));break;case "sat":c[6]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(e.substring(3)));break;
default:throw Error("Invalid day name encountered: '"+g+"'. Expected a day name of the form 'SUN', 'MON', etc.");}}return c};b.Calendar.GetWorkingTimes=function(e){var a=[];if(e){e=e.trim();for(var c=e.split(","),d=0;d<c.length;d++){var g=c[d].trim(),h=g.split(" ");if(2>h.length)throw Error("Expected 2 time span strings of the form '09:00:00 17:00:00'. Encountered string '"+g+"'");try{var m=h[0].split(":");if(3>m.length)throw Error();var f=new RQTimeSpan(0,m[0],m[1],m[2])}catch(l){throw Error("Cannot parse working time string '"+
h[0]+"'. Should be of the format 09:00:00.");}try{m=h[1].split(":");if(3>m.length)throw Error();var n=new RQTimeSpan(0,m[0],m[1],m[2])}catch(p){throw Error("Cannot parse working time string '"+h[1]+"'. Should be of the format 09:00:00.");}if(n.isLessThan(f))throw Error(string.Format("Error in '{0}' syntax. The end time for a day is earlier than the start time.",e));a.push(new b.WorkDayWorkingTime(f,n))}}else a.push(new b.WorkDayWorkingTime(new RQTimeSpan(0,0,0,0),new RQTimeSpan(0,24,0,0)));return a};
b.Calendar.prototype.getWorkingTimesString=function(b){for(var a="",c=0;c<b.length;c++)a+=b[c].toString()+",";return a.replace(/[ ,]+$/,"")};b.Calendar.prototype.toString=function(){for(var b="",a=0;a<this.WeekDays.length;a++){var c=this.WeekDays[a];if(!0==c.IsWorkingDay)switch(a){case 0:b+="SUN "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 1:b+="MON "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 2:b+="TUE "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 3:b+=
"WED "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 4:b+="THU "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 5:b+="FRI "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 6:b+="SAT "+this.getWorkingTimesString(c.WorkingTimes)+";"}}if(0<this.HolidayList.length){b+="HOL ";for(a=0;a<this.HolidayList.asArray.length;a++)b+=this.HolidayList.asArray[a].toString("yyyy-M-d")+";";b=b.replace(/[;]+$/,"").trim()}return b.trim()};f.prototype=new RadiantQ.ValueConverter;f.prototype.Convert=
function(e,a,c,d){return e?b.Calendar.CreateSchedule(e):null};b.StringToWorkTimeScheduleConverter=new f;b.WeekDay=function(b,a){this.IsWorkingDay=b;this.WorkingTimes=a?a:[];this.IsUndefined=!1};b.WeekDay.Undefined=new b.WeekDay(!0);b.WeekDay.Undefined.IsUndefined=!0;b.WeekDay.prototype.clone=function(){for(var b=new WeekDay(this.IsWorkingDay),a=0;a<this.WorkingTimes.length;a++)workingTime=this.WorkingTimes[a],b.WorkingTimes.Add(workingTime.clone());return b};b.WorkDayWorkingTime=function(b,a){this.From=
b;this.To=a};b.WorkDayWorkingTime.clone=function(){return new b.WorkDayWorkingTime(this.From,this.To)};b.WorkDayWorkingTime.prototype.toString=function(){return this.From.toString()+" "+this.To.toString()};b.ExceptionDay=function(b,a,c){this.Name=b;this.Date=a.Date();this.TimePeriods=c?c:[]};b.ExceptionDay.ParseExceptionDay=function(e){var a=null,c="",d=Date.MinValue;e=e.split("TimePeriod");var g=e[0].split(":");2==g.length?(a=g[1].split("-"),d=new Date(a[0],a[1]-1,a[2]),c=g[0],a=new b.ExceptionDay(c,
d)):1==g.length&&(a=g[0].split("-"),d=new Date(a[0],a[1]-1,a[2]),a=new b.ExceptionDay("",d));2==e.length&&(a=new b.ExceptionDay(c,d,b.Calendar.GetWorkingTimes(e[1])));return a};b.ExceptionDay.prototype.toString=function(){var b="",b="";if(null!=this.TimePeriods&&0<this.TimePeriods.length){for(var a=0;a<this.TimePeriods.length;a++)b+=this.TimePeriods[a].toString()+",";b=" TimePeriod "+b.replace(/[,]+$/,"").trim()}a=this.Date.toString("yyyy-M-d");return b=""===this.Name?a+" "+b:this.Name+":"+a+" "+
b};RadiantQ.Gantt.addMethod(RadiantQ.Gantt,"CalendarWithExceptions",function(e,a){this.WorkingDayExceptions=new RadiantQ.Gantt.Dictionary;this.NonWorkingdayExceptions=new b.Dictionary;this.ExceptionWeekDays=[];this.BaseCalendar=e;this.Tag=null;var c=this.IsBaseCalendarUndefined=!1;"string"===typeof e&&(a=e,c=!0);var d=b.CalendarWithExceptions.ParseExceptionsList(a,this.WorkingDayExceptions,this.NonWorkingdayExceptions,this.ExceptionWeekDays,c);c&&(this.IsBaseCalendarUndefined=!0,c=a.replace(d,""),
this.BaseCalendar=new RadiantQ.Gantt.Calendar(c))});RadiantQ.Gantt.addMethod(RadiantQ.Gantt,"CalendarWithExceptions",function(b,a,c,d){if(7!=a.length)throw new Exception("weekDayExceptions should be a list of exactly 7 in the call to CalendarWithExceptions constructor.");this.BaseCalendar=b;this.WorkingDayExceptions=c;this.NonWorkingdayExceptions=d;this.ExceptionWeekDays=a});b.CalendarWithExceptions.ParseExceptionDays=function(e,a){for(var c=0;c<e.length;c++){var d=b.ExceptionDay.ParseExceptionDay(e[c]);
if(null!=d){var g=d.Date.getTime();!1==a.Contains(g)&&a.Add(g,d)}}return a};b.CalendarWithExceptions.ParseExceptionsList=function(e,a,c,d){e||(e="");var g=[],h=b.CalendarWithExceptions.splitString(e,g);try{null!=g.WorkDaySpecific&&b.CalendarWithExceptions.ParseExceptionDays(g.WorkDaySpecific,a),null!=g.NonWorkDaySpecific&&b.CalendarWithExceptions.ParseExceptionDays(g.NonWorkDaySpecific,c)}catch(m){throw Error("Invalid Date format encountered in this CalendarWithException definition string: "+e);}for(e=
0;e<c.asArray.length;e++){var f=c.asArray[e].Date.getTime();null!=a.Contains(f)&&a.Remove(f)}if(null!=g.WeekDaySpecific)b.CalendarWithExceptions.ParseWeekDays(g.WeekDaySpecific,d);else for(e=0;7>e;e++)d.push(b.WeekDay.Undefined);return h};b.CalendarWithExceptions.splitString=function(b,a){var c=[],d=b.indexOf("WeekDaySpecific"),g=b.indexOf("NonWorkDaySpecific");b=b.replace("NonWorkDaySpecific","__NoNWorkDay__");var h=b.indexOf("WorkDaySpecific");b=b.replace("__NoNWorkDay__","NonWorkDaySpecific");
-1!=d&&c.push(d);-1!=g&&c.push(g);-1!=h&&c.push(h);d="";c.sort(function(a,b){return a-b});for(g=0;g<c.length;g++)g+1<=c.length&&(h=b.substring(c[g],c[g+1]),-1!=h.indexOf("WeekDaySpecific")?a.WeekDaySpecific=h.replace("WeekDaySpecific","").replace(/[ ; ]+$/,"").trim():-1!=h.indexOf("NonWorkDaySpecific")?a.NonWorkDaySpecific=h.replace("NonWorkDaySpecific","").replace(/[ ; ]+$/,"").trim().split(";"):-1!=h.indexOf("WorkDaySpecific")&&-1==h.indexOf("NonWorkDaySpecific")&&(a.WorkDaySpecific=h.replace("WorkDaySpecific",
"").replace(/[ ; ]+$/,"").trim().split(";")),d+=h);return d};b.CalendarWithExceptions.prototype.IsHoliday=function(b){if(this.WorkingDayExceptions.Contains(b.getTime()))return!1;if(this.NonWorkingdayExceptions.Contains(b.getTime()))return!0;var a=this.ExceptionWeekDays[parseInt(Date.getDayNumberFromName(b.getDayName()))];return!1==a.IsUndefined?!1==a.IsWorkingDay?!0:!1:this.BaseCalendar.IsHoliday(b)};b.CalendarWithExceptions.prototype.GetWorkingTimes=function(b){var a=this.WorkingDayExceptions.GetItemByKey(b.getTime());
if(null!=a&&a.TimePeriods&&0<a.TimePeriods.length)return a.TimePeriods;b=parseInt(Date.getDayNumberFromName(b.getDayName()));return!1==this.ExceptionWeekDays[b].IsUndefined&&(a=this.ExceptionWeekDays[b].WorkingTimes,0<a.Count)?a:this.BaseCalendar.GetWorkDayWorkingTimes(b)};b.CalendarWithExceptions.ParseWeekDays=function(e,a){for(var c=e.replace(/[ ,;]+$/,"").split(";"),d=0;7>d;d++)a.push(b.WeekDay.Undefined);if(0==e.length)return a;for(d=0;d<c.length;d++){var g=c[d];if(0!=g.length){var h=g.trim();
if(3>h.length)throw Error("Encoutered a day value string: '"+h.toString()+"' that is smaller than 3 days.");g=h.substring(0,3);h=h.substring(3);"nwork"==h.trim().toLowerCase()?h=new b.WeekDay(!1):(""===h&&(h="00:00:00 1.00:00:00"),h=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(h)));switch(g.toLowerCase()){case "sun":a[0]=h;break;case "mon":a[1]=h;break;case "tue":a[2]=h;break;case "wed":a[3]=h;break;case "thu":a[4]=h;break;case "fri":a[5]=h;break;case "sat":a[6]=h;break;default:throw Error("Invalid day name encountered: '"+
g+"'. Expected a day name of the form 'SUN', 'MON', etc.");}}}return a};b.CalendarWithExceptions.CreateWorkTimeSchedule=function(e){this.scheduleProvider=function(a){if(!0==e.IsHoliday(a.Date()))return null;for(var c=new b.TimePeriodCollection,d=e.GetWorkingTimes(a.Date()),g=0;g<d.length;g++){var h=d[g];c.Add(new b.TimePeriod(a.Date().addTimeSpan(h.From),a.Date().addTimeSpan(h.To),!1))}return c};return new b.WorkTimeSchedule(e.BaseCalendar.Name,this.scheduleProvider)};b.CalendarWithExceptions.Merge=
function(b,a){for(var c=new RadiantQ.Gantt.CalendarWithExceptions(a),d=c.WorkingDayExceptions,g=c.NonWorkingdayExceptions,c=c.ExceptionWeekDays,h=new RadiantQ.Gantt.CalendarWithExceptions(b.BaseCalendar,b.toString()),m=0;m<d.keys.length;m++){var f=d.keys[m],l=d.GetItemByKey(f),n=l.Date.getTime();!0==h.NonWorkingdayExceptions.Contains(n)&&h.NonWorkingdayExceptions.Remove(n);!1==h.WorkingDayExceptions.Contains(f)&&h.WorkingDayExceptions.Add(f,l)}for(m=0;m<g.keys.length;m++)f=g.keys[m],l=g.GetItemByKey(f),
l.Date.getTime(),!0==h.WorkingDayExceptions.Contains(f)&&h.WorkingDayExceptions.Remove(f),!1==h.NonWorkingdayExceptions.Contains(f)&&h.NonWorkingdayExceptions.Add(f,l);for(m=0;m<c.length;m++)d=c[m],!1==d.IsUndefined&&h.ExceptionWeekDays.splice(m,1,d);return h};b.CalendarWithExceptions.prototype.toString=function(){for(var b="",a="",c="",d="",g=0;g<this.WorkingDayExceptions.asArray.length;g++)b+=this.WorkingDayExceptions.asArray[g].toString()+";";b.trim();for(g=0;g<this.NonWorkingdayExceptions.asArray.length;g++)a+=
this.NonWorkingdayExceptions.asArray[g].toString()+";";a.trim();for(var h=!0,g=0;g<this.ExceptionWeekDays.length&&(h=this.ExceptionWeekDays[g].IsUndefined,h);g++);if(!1==h)for(c+=" WeekDaySpecific ",g=0;g<this.ExceptionWeekDays.length;g++){var h=this.ExceptionWeekDays[g],m=Date.CultureInfo.dayNames[g].substring(0,3);if(!1==h.IsUndefined)if(!0==h.IsWorkingDay){for(var f="",l=0;l<h.WorkingTimes.length;l++)f+=h.WorkingTimes[l].toString()+",";f=f.replace(/[,]+$/,"").trim();c+=m+" "+f+";"}else c+=m+" NWork;"}""!=
b&&(d+="WorkDaySpecific "+b);""!=a&&(d+=" NonWorkDaySpecific "+a);""!=c&&(d+=c);return d.trim()};b.SubCalendar=function(b,a){this.Calendar=b;this.CalendarValidUntil=a;this.IsValidDateUndefined=!1;void 0==a&&(this.CalendarValidUntil=Date.MaxValue,this.IsValidDateUndefined=!0)};b.SubCalendarList=function(){b.Dictionary.call(this);this.OnCollectionChanged=function(){this._keys=this.Keys.slice(0).sort();b.Dictionary.prototype.OnCollectionChanged.apply(this,arguments)};this.IsHoliday=function(b){return this.getSubCalendar(b).Calendar.IsHoliday(b)};
this.getSubCalendar=function(b){for(var a=Date.MinValue,c=0;c<this._keys.length;c++){var d=this._keys[c];if(d.equals(b)||d.isGreaterThan(b)){a=d;break}}return this.GetItemByKey(a)};this.GetWorkDayWorkingTimes=function(b){var a=this.getSubCalendar(b);b=parseInt(Date.getDayNumberFromName(b.getDayName()));return a.Calendar.GetWorkDayWorkingTimes(b)}};b.SubCalendarList.prototype=new b.Dictionary;b.CombinedCalendarWithExceptions=function(e,a){this.SubCalendars=e;this.WorkingDayExceptions=new b.Dictionary;
this.NonWorkingdayExceptions=new b.Dictionary;this.ExceptionWeekDays=[];this.Tag=null;b.CalendarWithExceptions.ParseExceptionsList(a,this.WorkingDayExceptions,this.NonWorkingdayExceptions,this.ExceptionWeekDays)};b.CombinedCalendarWithExceptions.prototype.IsHoliday=function(b){if(this.WorkingDayExceptions.Contains(b.getTime()))return!1;if(this.NonWorkingdayExceptions.Contains(b.getTime()))return!0;var a=this.ExceptionWeekDays[parseInt(Date.getDayNumberFromName(b.getDayName()))];return!1==a.IsUndefined?
!1==a.IsWorkingDay?!0:!1:this.SubCalendars.IsHoliday(b)};b.CombinedCalendarWithExceptions.prototype.GetWorkingTimes=function(b){var a=this.WorkingDayExceptions.GetItemByKey(b.getTime());if(null!=a&&a.TimePeriods&&0<a.TimePeriods.length)return a.TimePeriods;a=parseInt(Date.getDayNumberFromName(b.getDayName()));return!1==this.ExceptionWeekDays[a].IsUndefined&&(a=this.ExceptionWeekDays[a].WorkingTimes,0<a.Count)?a:this.SubCalendars.GetWorkDayWorkingTimes(b)};b.CombinedCalendarWithExceptions.prototype.GetCalendarName=
function(b){b=this.SubCalendars.getSubCalendar(b);return null!=b?b.Calendar.Name:""};b.CombinedCalendarWithExceptions.CreateWorkTimeSchedule=function(e){this.scheduleProvider=function(a){if(!0==e.IsHoliday(a.Date()))return null;for(var c=new b.TimePeriodCollection,d=e.GetWorkingTimes(a.Date()),g=0;g<d.length;g++){var h=d[g];c.Add(new b.TimePeriod(a.Date().addTimeSpan(h.From),a.Date().addTimeSpan(h.To),!1))}return c};return new b.WorkTimeSchedule(e.GetCalendarName(new Date),this.scheduleProvider)}})();
(function(){var f=RadiantQ.Gantt.DependencyType;RadiantQ.Gantt.ValueConverters={};RadiantQ.Gantt.ValueConverters.ConverterUtils={};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText=function(b,e,a){for(var c="",d=0;d<b.length;d++)var g=b[d],h=g.Resource_M(),h=e?h.ResourceID_M():h.ResourceName_M(),c=c+(h+" "+RadiantQ.Gantt.ValueConverters.ConverterUtils.AllocationUnitText(g,a)),c=c.trim(),c=c+",";return c.trimEnd(",")};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetAssignedResourceInstances=
function(b){for(var e=[],a=0;a<b.length;a++)e.push(b[a].Resource_M());return e};RadiantQ.Gantt.ValueConverters.ConverterUtils.AllocationUnitText=function(b,e){var a=b.AllocationUnits_M();if(100==a)return"";a=100*(a/100);return"["+(e?Math.round(a).toString():a.toString())+"%]"};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetMissingResourceKeys=function(b,e){var a=[];if(void 0!=b&&null!=b&&""!=b)for(var c=b.split(","),d=c.length,g=0;g<d;g++){var h=c[g],m=h;-1!=m.indexOf("[")&&(this.ParseAllocUnitsString(m.substring(h.indexOf("["))),
m=h.substring(0,m.indexOf("[")));m=m.trim();h=e[m];null==h&&(h=e.GetResourceByName(m.trim()));null==h&&0<m.length&&a.push(m)}return a};RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertResourceTextToAssignments=function(b,e,a){var c=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);if(b){var d=b.split(",");for(b=0;b<d.length;b++){var g=d[b],h=g,m=100;-1!=h.indexOf("[")&&(m=this.ParseAllocUnitsString(h.substring(g.indexOf("["))),h=g.substring(0,h.indexOf("[")));g=e._resByID[h.trim()];
null==g&&(g=e.GetResourceByName(h.trim()));g&&!1==c.ContainsResource(g)&&c.add(new RadiantQ.Gantt.Model.ResourceAssignment(g,m))}}if(!1==this.IsContentEqual(c,a)){e=new RadiantQ.Gantt.Utils.DelayUpdates;a.clear();for(b=0;b<c.length;b++)a.add(c[b]);e.Dispose()}};RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments=function(b,e){for(var a=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null),c=0;c<b.length;c++){var d=b[c];!1==a.ContainsResource(d)&&a.add(new RadiantQ.Gantt.Model.ResourceAssignment(d))}if(!1==
this.IsContentEqual(a,e)){d=new RadiantQ.Gantt.Utils.DelayUpdates;e.clear();for(c=0;c<a.length;c++)e.add(a[c]);d.Dispose()}};RadiantQ.Gantt.ValueConverters.ConverterUtils.IsContentEqual=function(b,e){if(b.length!=e.length)return!1;for(var a=0;a<b.length;a++)if(b[a]!=e[a]||b[a].AllocationUnits_M()!=e[a].AllocationUnits_M())return!1;return!0};RadiantQ.Gantt.ValueConverters.ConverterUtils.ParseAllocUnitsString=function(b){b=b.trim(" ","[","]","%");var e=100;return e=parseFloat(b)};RadiantQ.Gantt.ValueConverters.ConverterUtils.AddAssignmentToActivity=
function(b,e){var a=b.Assignments_M(),c=b.Model.GanttResources_M().getResourceByID(e);c&&!1==a.ContainsResource(c)&&a.add(new RadiantQ.Gantt.Model.ResourceAssignment(c))};RadiantQ.Gantt.ValueConverters.ParentViewToIndentConverter={Convert:function(b,e,a){return null==b?0:b+1},ConvertBack:function(){throw Error("Not Implemented");}};RadiantQ.Gantt.ValueConverters.SortIDAsPredIDConverter={GC:null,Convert:function(b,e,a){if(null==b)return b;e=[];a=[];var c=[],d=this.GC.options.LagStringUnitsInHours;
RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(b,d,e,a,c,[]);b="";if(0<e.length)for(var g=0;g<e.length;g++){var h=this.GC.Model.GetActivityById(e[g]);null!=h&&(h=this.CreateDepStringFor(h.SortOrder_M(),a[g],c[g],d),b+=h,b+=",")}return b.trimEnd(",")},ConvertBack:function(b,e,a){e=[];a=[];var c=[],d=this.GC.options.LagStringUnitsInHours;RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(b.toString(),d,e,a,c,"");b="";if(0<e.length)for(var g=0;g<e.length;g++){var h=
this.GetActivityFromSortID(e[g]);null!=h&&(h=this.CreateDepStringFor(h.ID_M(),a[g],c[g],d),b+=h,b+=",")}return b.trimEnd(",")},CreateDepStringFor:function(b,e,a,c){var d=RQTimeSpan.Zero_M();b=b.toString();switch(e){case f.FinishToFinish:b+="FF";break;case f.StartToFinish:b+="SF";break;case f.StartToStart:b+="SS"}a.isGreaterThan(d)?b+="+"+(a.getTotalHours()/c).toString():a.isLessThan(d)&&(b+="-"+(-(a.getTotalHours()/c)).toString());return b},GetActivityFromSortID:function(b){return this.RecursivelyFindSortID(this.GC.Model.Activities_M(),
b)},RecursivelyFindSortID:function(b,e){for(var a=0;a<b.length;a++){var c=b[a];if(c.SortOrder_M()==e)return c;c=c.ChildActivities_M();if(null!=c&&0<c.length&&(c=this.RecursivelyFindSortID(c,e),null!=c))return c}return null}}})();
(function(){var f=RadiantQ.Gantt.Model={};RadiantQ.Gantt.Model.IGanttModel=function(){this.OnPropertyChanged=function(b,e){"Start"==b&&UpdateEnd()};this.GetNewID||(this.GetNewID=function(){});this._lagStringUnitsInHours=null;this.canShiftInProgressTasks=this.autoCalculateSummaryTaskTimes=!1;return this};RadiantQ.Gantt.Model.IGanttModel.prototype.LagStringUnitsInHours_M=function(b){if(0==arguments.length)return this._lagStringUnitsInHours;this._lagStringUnitsInHours!=b&&(this._lagStringUnitsInHours=
b)};RadiantQ.Gantt.Model.IGanttModel.prototype.AllActivities_M=function(){return this._dictActivityById};RadiantQ.Gantt.Model.IGanttModel.prototype.Activities_M=function(){return this._activities};RadiantQ.Gantt.Model.IGanttModel.prototype.Dependencies_M=function(){return this._dependencies};RadiantQ.Gantt.Model.IGanttModel.prototype.GanttResources_M=function(){return this._resources};RadiantQ.Gantt.Model.IGanttModel.prototype.WorkTimeSchedule_M=function(b){if(0==arguments.length)return this._schedule;
this._schedule!=b&&(this._schedule=b,this.OnPropertyChanged("WorkTimeSchedule"))};RadiantQ.Gantt.Model.IGanttModel.prototype.EnforceDependencyConstraints_M=function(b){if(0==arguments.length)return this.enforceDependencyConstraints;b!=this.enforceDependencyConstraints&&(this.enforceDependencyConstraints=b,this.OnPropertyChanged("EnforceDependencyConstraints",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.ValidateDependencySetting_M=function(b){if(0==arguments.length)return this.validateDependencySetting;
b!=this.validateDependencySetting&&(this.validateDependencySetting=b,this.OnPropertyChanged("ValidateDependencySetting",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.AutoCalculateSummaryTaskTimes_M=function(b){if(0==arguments.length)return this.autoCalculateSummaryTaskTimes;b!=this.autoCalculateSummaryTaskTimes&&(this.autoCalculateSummaryTaskTimes=b,this.OnPropertyChanged("AutoCalculateSummaryTaskTimes",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.CanShiftInProgressTasks_M=function(b){if(0==
arguments.length)return this.canShiftInProgressTasks;b!=this.canShiftInProgressTasks&&(this.canShiftInProgressTasks=b,this.OnPropertyChanged("CanShiftInProgressTasks",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustDurationOnAssignment_M=function(b){if(0==arguments.length)return this.adjustDurationOnAssignment;b!=this.adjustDurationOnAssignment&&(this.adjustDurationOnAssignment=b,this.OnPropertyChanged("AdjustDurationOnAssignment",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.CustomProgressCalculation_M=
function(){return this._customProgressCalculation};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"LagStringUnitsInHours",{get:function(){return this.LagStringUnitsInHours_M()},set:function(b){this.LagStringUnitsInHours_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AllActivities",{get:function(){return this.AllActivities_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"Activities",{get:function(){return this.Activities_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"Dependencies",{get:function(){return this.Dependencies_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"GanttResources",{get:function(){return this.GanttResources_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"WorkTimeSchedule",{get:function(){return this.WorkTimeSchedule_M()},set:function(b){this.WorkTimeSchedule_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"EnforceDependencyConstraints",{get:function(){return this.EnforceDependencyConstraints_M()},set:function(b){this.EnforceDependencyConstraints_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"ValidateDependencySetting",{get:function(){return this.ValidateDependencySetting_M()},
set:function(b){this.ValidateDependencySetting_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AutoCalculateSummaryTaskTimes",{get:function(){return this.AutoCalculateSummaryTaskTimes_M()},set:function(b){this.AutoCalculateSummaryTaskTimes_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CanShiftInProgressTasks",{get:function(){return this.CanShiftInProgressTasks_M()},set:function(b){this.CanShiftInProgressTasks_M(b)},
enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AdjustDurationOnAssignment",{get:function(){return this.AdjustDurationOnAssignment_M()},set:function(b){this.AdjustDurationOnAssignment_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CustomProgressCalculation",{get:function(){return this.CustomProgressCalculation_M()},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IGanttModel.prototype.GetNewSortOrder=
function(){};RadiantQ.Gantt.Model.IGanttModel.prototype.CreateNewActivity=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.CreateNewDependency=function(b,e,a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.RemoveActivity=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.CanAddNewDependency=function(b,e,a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.DependencyFailedNotifierCallBack=function(b,e,a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.PrepareParenting=function(b,e){};
RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertToValidTimes=function(b,e,a,c,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertToValidStartTime=function(b,e,a){};RadiantQ.Gantt.Model.IGanttModel.prototype.GetStart=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.ApplyPreferredStartTimeOnActivity=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustStartTimeWithEffort=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustStartTime=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustEffort=
function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeEndTime=function(b){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeDuration=function(b){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeEffort=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertDurationToEffort=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.UpdateSortOrderFrom=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.UpdateSortOrders=function(){};RadiantQ.Gantt.Model.IGanttModel.prototype.GetCriticalActivities=
function(b){};RadiantQ.Gantt.Model.IGanttModel.prototype.LevelResources=function(b,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.Filter=function(b,e){};RadiantQ.Gantt.Model.IActivity=function(){NotifyPropertyChanged.call(this);this.PropertyChanged=new ObjectEvent("PropertyChanged");this.VerticalPositionChanged=new ObjectEvent("VerticalPositionChanged");this._assignments=[];this.propertiesDict=[];this.ChildCollectionChanged=new ObjectEvent("ChildCollectionChanged");this.AdjustStartTimeForConstraints=
new ObjectEvent("AdjustStartTimeForConstraints");this.isIActivity=!0;this.id=0;this._sortOrder=-1;this._prefStartTime=this._startTime=Date.MinValue;this._effort=RQTimeSpan.Zero_M();this._cumEffort=RQTimeSpan.Zero_M();this._progressPercent=0;this._isMilestone=!1;this._isVisible=this._isExpanded=!0;this._isFilteredOut=!1;this._displayIndex=-1;return this};RadiantQ.Gantt.Model.IActivity.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.Model.IActivity.prototype.OnPropertyChanged=function(b,e){this.PropertyChanged.raise(this,
{PropertyName:b,Value:e})};RadiantQ.Gantt.Model.IActivity.prototype.OnVerticalPositionChanged=function(){this.VerticalPositionChanged.raise(this,{})};RadiantQ.Gantt.Model.IActivity.prototype.ID_M=function(b){if(0==arguments.length)return this.id;if(this.id!=b){var e=this.id;this.id=b;this.OnPropertyChanged("ID",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.ActivityName_M=function(b){if(0==arguments.length)return this._name;var e=this._name;this._name=b;this.OnPropertyChanged("ActivityName",e,b)};
RadiantQ.Gantt.Model.IActivity.prototype.SortOrder_M=function(b){if(0==arguments.length)return this._sortOrder;if(b&&this._sortOrder!=b){var e=this._sortOrder;this._sortOrder=b;this.OnPropertyChanged("SortOrder",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.StartTime_M=function(b){if(0==arguments.length)return this._startTime;this._startTime.equals(b)||(this._startTime=b)};RadiantQ.Gantt.Model.IActivity.prototype.PreferredStartTime_M=function(b){if(0==arguments.length)return null==this._prefStartTime||
void 0==this._prefStartTime?this.Model.ProjectStartDate:this._prefStartTime;if(!(this._prefStartTime&&b&&this._prefStartTime.equals(b))){var e=this._prefStartTime;this._prefStartTime=b;this.OnPropertyChanged("PreferredStartTime",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.Effort_M=function(b){if(0==arguments.length)return this._effort;this._effort!=b&&(this._effort=b)};RadiantQ.Gantt.Model.IActivity.prototype.Times_M=function(){var b=this.Parent_M();return null==b?!0:b.IsExpanded_M()};RadiantQ.Gantt.Model.IActivity.prototype.PredecessorIndexString_M=
function(b){if(0==arguments.length)return this._predecssorIndexString;if(this._predecssorIndexString!=b){var e=this._predecssorIndexString;this._predecssorIndexString=b;this.OnPropertyChanged("PredecessorIndexString",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.CumulativeEffort_M=function(b){if(0==arguments.length){var e=this.ChildActivities_M();return e&&0!=e.length?this._cumEffort:this._effort}this._cumEffort!=b&&(e=this._cumEffort,this._cumEffort=b,this.OnPropertyChanged("CumulativeEffort",
e,b))};RadiantQ.Gantt.Model.IActivity.prototype.ProgressPercent_M=function(b){if(0==arguments.length)return this._progressPercent||(this._progressPercent=0),this._progressPercent;if(this._progressPercent!=b){0>b&&(b=0);100<b&&(b=100);var e=parseInt(b),a=this._progressPercent;this._progressPercent=isNaN(e)?0:e;this.OnPropertyChanged("ProgressPercent",a,b)}};RadiantQ.Gantt.Model.IActivity.prototype.ProgressEndTime_M=function(){var b=this.StartTime_M();if(b==Date.MaxValue||b==Date.MinValue)return b;
var e=this.ProgressPercent_M();if(0>=e)return b;var a=this.GetWorkingHoursTimeSpan(),e=new RQTimeSpan(0,0,e/100*a.getTotalMinutes(),0),a=this.Schedule_M();return f.BaseGanttModel.ComputeEndTime(b,e,null!=a?a:this.Model.WorkTimeSchedule_M())};RadiantQ.Gantt.Model.IActivity.prototype.Description_M=function(b){if(0==arguments.length)return this._description;b!=this._description&&(this._description=b,this.OnPropertyChanged("Description",b))};RadiantQ.Gantt.Model.IActivity.prototype.Parent_M=function(b){if(0==
arguments.length)return this._parent;if(this._parent!=b){var e=this._parent;this._parent=b;this.IsVisible_M(this.IsParentExpanded_M()&&this.IsParentVisible_M());this.OnPropertyChanged("Parent",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.IsMilestone_M=function(b){if(0==arguments.length)return this._isMilestone;if(this._isMilestone!=b){var e=this._isMilestone;this._isMilestone=b;this.OnPropertyChanged("IsMilestone",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.IsExpanded_M=function(b){if(0==arguments.length)return this._isExpanded;
if(this._isExpanded!=b){var e=this._isExpanded;this._isExpanded=b;for(var a=this.ChildActivities_M(),c=this.IsVisible_M(),d=0;d<a.length;d++)a[d].IsVisible_M(this._isExpanded&&c);this.OnPropertyChanged("IsExpanded",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.IsVisible_M=function(b){if(0==arguments.length)return this._isVisible&!this._isFilteredOut;if(this._isVisible!=b){var e=this._isVisible;this._isVisible=b;for(var a=this.ChildActivities_M(),c=this.IsVisible_M(),d=0;d<a.length;d++)a[d].IsVisible_M(this._isExpanded&&
c);this.OnPropertyChanged("IsVisible",e,c)}};RadiantQ.Gantt.Model.IActivity.prototype.IsFilteredOut_M=function(b){if(0==arguments.length)return this._isFilteredOut;if(this._isFilteredOut!=b){var e=this._isFilteredOut;this._isFilteredOut=b;this.OnPropertyChanged("IsFilteredOut",e,b);this.OnPropertyChanged("IsVisible",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.DisplayIndex_M=function(b){if(0==arguments.length)return this._displayIndex;if(this._displayIndex!=b){var e=this._displayIndex;this._displayIndex=
b;this.OnVerticalPositionChanged();this.OnPropertyChanged("DisplayIndex",e,b)}};RadiantQ.Gantt.Model.IActivity.prototype.Schedule_M=function(b){if(0==arguments.length)return this._schedule;if(this._schedule!=b){var e=this._schedule;this._schedule=b;this.OnPropertyChanged("Schedule",e,b)}};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ID",{get:function(){return this.ID_M()},set:function(b){this.ID_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"ActivityName",{get:function(){return this.ActivityName_M()},set:function(b){this.ActivityName_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"SortOrder",{get:function(){return this.SortOrder_M()},set:function(b){this.SortOrder_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"StartTime",{get:function(){return this.StartTime_M()},set:function(b){this.StartTime_M(b)},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"PreferredStartTime",{get:function(){return this.PreferredStartTime_M()},set:function(b){this.PreferredStartTime_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Effort",{get:function(){return this.Effort_M()},set:function(b){this.Effort_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Times",{get:function(){return this.Times_M()},
set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"PredecessorIndexString",{get:function(){return this.PredecessorIndexString_M()},set:function(b){this.PredecessorIndexString_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"CumulativeEffort",{get:function(){return this.CumulativeEffort_M()},set:function(b){this.CumulativeEffort_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"ProgressPercent",{get:function(){return this.ProgressPercent_M()},set:function(b){this.ProgressPercent_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Schedule",{get:function(){return this.Schedule_M()},set:function(b){this.Schedule_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ProgressEndTime",{get:function(){return this.ProgressEndTime_M()},set:function(){},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Description",{get:function(){return this.Description_M()},set:function(b){this.Description_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Parent",{get:function(){return this.Parent_M()},set:function(b){this.Parent_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsMilestone",{get:function(){return this.IsMilestone_M()},set:function(b){this.IsMilestone_M(b)},
enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsExpanded",{get:function(){return this.IsExpanded_M()},set:function(b){this.IsExpanded_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsVisible",{get:function(){return this.IsVisible_M()},set:function(b){this.IsVisible_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsFilteredOut",{get:function(){return this.IsFilteredOut_M()},
set:function(b){this.IsFilteredOut_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"DisplayIndex",{get:function(){return this.DisplayIndex_M()},set:function(b){this.DisplayIndex_M(b)},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IActivity.prototype.GetWorkingHoursTimeSpan=function(){};RadiantQ.Gantt.Model.IActivity.prototype.ShiftForwardTo=function(b){};RadiantQ.Gantt.Model.IActivity.prototype.CreateNewChildActivity=function(b){};RadiantQ.Gantt.Model.IActivity.prototype.OnAddedPredecessorDependency=
function(b){};RadiantQ.Gantt.Model.IActivity.prototype.OnRemovedPredecessorDependency=function(b){};RadiantQ.Gantt.Model.IActivity.prototype.IsCritical=function(b,e,a){};RadiantQ.Gantt.Model.IActivity.prototype.GetScheduleToPlotWith=function(b){};RadiantQ.Gantt.Model.IActivity.prototype.Dispose=function(){this.PropertyChanged&&this.PropertyChanged.Dispose();this.VerticalPositionChanged&&this.VerticalPositionChanged.Dispose();this.ChildCollectionChanged&&this.ChildCollectionChanged.Dispose();this.AdjustStartTimeForConstraints&&
this.AdjustStartTimeForConstraints.Dispose();this.AdjustStartTimeForConstraints=this.ChildCollectionChanged=this.VerticalPositionChanged=this.PropertyChanged=null};RadiantQ.Gantt.Model.IActivityDependency=function(){this.OnPropertyChanged=function(b,e){this.PropertyChanged.raise(this,{PropertyName:b,Value:e})};return this};RadiantQ.Gantt.Model.IActivityDependency.prototype.FromActivity_M=function(){return this._fromActivity};RadiantQ.Gantt.Model.IActivityDependency.prototype.ToActivity_M=function(){return this._toActivity};
RadiantQ.Gantt.Model.IActivityDependency.prototype.Type_M=function(b){if(0==arguments.length)return this._type;this._type=b;this.OnPropertyChanged("Type",b)};RadiantQ.Gantt.Model.IActivityDependency.prototype.Lag_M=function(b){if(0==arguments.length)return this._lag;this._lag=b;this.OnPropertyChanged("Lag",b)};RadiantQ.Gantt.Model.IActivityDependency.prototype.Tag_M=function(b){if(0==arguments.length)return this._tag;this._tag=b;this.OnPropertyChanged("Tag",b)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,
"FromActivity",{get:function(){return this.FromActivity_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"ToActivity",{get:function(){return this.ToActivity_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Type",{get:function(){return this.Type_M()},set:function(b){this.Type_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,
"Lag",{get:function(){return this.Lag_M()},set:function(b){this.Lag_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Tag",{get:function(){return this.Tag_M()},set:function(b){this.Tag_M(b)},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IActivityDependency.prototype.ComputeLatestToActivityStartTime=function(){};RadiantQ.Gantt.Model.IActivityDependency.prototype.EnsureActivityOrder=function(){};RadiantQ.Gantt.Model.IGanttResource=
function(){this.PropertyChanged=new ObjectEvent("PropertyChanged");return this};RadiantQ.Gantt.Model.IGanttResource.prototype.ResourceName_M=function(b){if(0==arguments.length)return this._resNamebinder?this._resNamebinder.Value_M():this._resIDbinder?this._resIDbinder.Value_M():this._boundObj?this._boundObj.toString():"";this.ResourceName_M()!=b&&null!=this._resNamebinder&&this._resNamebinder.Value_M(b)};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.Model.IGanttResource.prototype,
"ResourceName",{get:function(){return this.ResourceName_M()},set:function(b){this.ResourceName_M(b)},enumerable:!0,configurable:!0});RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs=function(b,e,a,c){this._activity=b||null;this.NewWBSID_M(e||"");this._collection=c||[];this.childIndex=a||-1};RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.NewWBSID_M=function(b){if(0==arguments.length)return this.newWbs;
this.newWbs=b};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype,"Activity",{get:function(){return this.Activity_M()}}),Object.defineProperty(RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype,"NewWBSID",{get:function(){return this.NewWBSID_M()},set:function(b){this.NewWBSID_M(b)}}));RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.GetActivityChildIndex=function(){return-1!=this.childIndex?this.childIndex:this._collection.indexOf(this._activity)};
RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs=function(b){this._enforce=!0;this._activity=b};RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype.Enforce_M=function(b){if(0==arguments.length)return this._enforce;this._enforce=b};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype,"Activity",
{get:function(){return this.Activity_M()}}),Object.defineProperty(RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype,"Enforce",{get:function(){return this.Enforce_M()},set:function(b){this.Enforce_M(b)}}))})();
(function(f){var b=RadiantQ.Gantt.Model;b.ResourceLoadTracker=function(e,a){this._resourceLoadLists=this._model=null;this._enableRoundingToDays=!0;this._enableRoundingToDays=a;null==e&&alert("model cannot be null in ResourceLoadTracker constructor.");this._model=e;this._resourceLoadLists=new RadiantQ.Gantt.Dictionary;for(var c=this._model.GanttResources_M(),d=0;d<c.length;d++){var g=c[d],h=new b.ResourceLoadList(g,this._model,this._dispatcher,this._enableRoundingToDays);this._resourceLoadLists.Add(g,
h)}c.CollectionChanged.subscribe(this.ganttResources_CollectionChanged,this)};b.ResourceLoadTracker.prototype.ganttResources_CollectionChanged=function(e,a){if("insert"==a.type)for(var c=0;c<a.NewItems.length;c++){var d=a.NewItems[c],g=new b.ResourceLoadList(d,this._model,this._dispatcher,this._enableRoundingToDays);this._resourceLoadLists.Add(d,g)}if("remove"==a.type)for(c=0;c<a.OldItems.length;c++)d=a.OldItems[c],this._resourceLoadLists.Remove(d)};b.ResourceLoadTracker.prototype.ResourceLoadLists_M=
function(){return this._resourceLoadLists};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.ResourceLoadTracker.prototype,"ResourceLoadLists",{get:function(){return this._resourceLoadLists},set:function(){},enumerable:!0,configurable:!0});b.LoadInfo=function(b,a,c){this.TimePeriod=new RadiantQ.Gantt.TimePeriod(b,null,new RQTimeSpan(a-b));this.LoadPerc=c};b.LoadInfo.prototype.ToString=function(){return"Start: "+this.TimePeriod.Start_M()+", End: "+this.TimePeriod.End_M()+", Load: "+this.LoadPerc};
b.ResourceLoadList=function(b,a,c,d){this._enableRoundToDays=d;this._model=a;this._resource=b;this._orderedLoadInfos=new RadiantQ.RQ_ObservableCollection([]);this._temLoadLists=new RadiantQ.RQ_ObservableCollection([]);this.refreshTimer=null;this._dispatcher=c;this._activities=a.GetResourceActivityList(b.DataSource);f.observable(this._activities).bind("insert remove replaceAll",this._activities_CollectionChanged.bind(this));for(b=0;b<this._activities.length;b++)this._activities[b].PropertyChanged.subscribe(this.activity_PropertyChanged,
this);this.LoadInfos=this._orderedLoadInfos;this.AssignedActivities=this._activities;this.Resource=this._resource;this.initLoadInfo()};b.ResourceLoadList.prototype.activity_PropertyChanged=function(b,a){"Times"==a.PropertyName&&this.delayedRefresh()};b.ResourceLoadList.prototype._activities_CollectionChanged=function(b,a){if("insert"==b.type)for(var c=0;c<a.items.length;c++)a.items[c].PropertyChanged.subscribe(this.activity_PropertyChanged,this);if("remove"==b.type)for(c=0;c<a.items.length;c++)a.items[c].PropertyChanged.unsubscribe(this.activity_PropertyChanged,
this);this.delayedRefresh()};b.ResourceLoadList.prototype.delayedRefresh=function(){var b=this;null!=this.refreshTimer&&clearTimeout(this.refreshTimer);this.refreshTimer=setTimeout(function(){b.refresh()},200)};b.ResourceLoadList.prototype.refresh=function(){this._orderedLoadInfos.splice(0,this._orderedLoadInfos.length);this.initLoadInfo()};b.ResourceLoadList.prototype.initLoadInfo=function(){for(var e=[],a=0;a<this.AssignedActivities.length;a++){var c=this.AssignedActivities[a],d=c.Assignments_M(),
g=d.GetAssignmentForResource(this.Resource),h=g.AllocationUnits_M(),m=c.StartTime_M(),c=c.Effort_M();this._model.AdjustDurationOnAssignment&&c!=RQTimeSpan.Zero_M()&&(d=c.Ticks_M()/d.length,d*=100/g.AllocationUnits,c=TimeSpan.fromTicks(d));g=null!=this.Resource.Schedule_M()?this.Resource.Schedule_M():this._model.WorkTimeSchedule_M();if(null!=g)for(m=g.ConvertToNextWorkingTimeIntervals(m,c),d=0;d<m.length;d++){var c=m[d],f=c.Start_M(),l=c.End_M();this._enableRoundToDays&&(f=g.ConverToPreviousWorkingTime(c.Start_M().clone().addMinutes(-1)),
l=g.ConvertToNextWorkingTime(c.End_M().clone().addMinutes(1)),f.Date().equals(c.Start_M().Date())||(f=c.Start_M().Date()),l.Date().equals(c.End_M().Date())||(l=c.End_M().Date().clone().addDays(1)));e.push(new b.LoadInfo(f,l,h))}else e.push(new b.LoadInfo(m,m.addTimeSpan(c),h))}this.addLoadInfos(e)};b.ResourceLoadList.prototype.addLoadInfos=function(b){for(var a=0;a<b.length;a++)this.addLoadInfo(b[a]);for(b=0;b<this._temLoadLists.length;b++)this._orderedLoadInfos.push(this._temLoadLists[b]);this._temLoadLists=
new RadiantQ.RQ_ObservableCollection([])};b.ResourceLoadList.prototype.addLoadInfo=function(e){var a=this._temLoadLists.length;if(0!=a)for(var c=0;c<=a-1;c++){var d=this._temLoadLists[c];if(e.TimePeriod.End_M()<=d.TimePeriod.Start_M()){this.combineOrInsert(c,e);return}if(c==a-1&&d.TimePeriod.End_M()<=e.TimePeriod.Start_M()){this.combineWithPrevOrInsert(c+1,e);return}var g=d.TimePeriod.Intersect(e.TimePeriod);if(null!=g&&g.Duration_M()>RQTimeSpan.Zero_M())if(d.TimePeriod.Equals(g)){d.LoadPerc+=e.LoadPerc;
if(e.TimePeriod.Start_M().isLessThan(g.Start_M()))var h=this.combineWithPrevOrInsert(c,new b.LoadInfo(e.TimePeriod.Start_M(),g.Start_M(),e.LoadPerc)),c=c+1-h;if(g.End_M().isLessThan(e.TimePeriod.End_M()))e=new b.LoadInfo(g.End_M(),e.TimePeriod.End_M(),e.LoadPerc);else return}else if(e.TimePeriod.Equals(g)){if(d.TimePeriod.Start_M().isLessThan(e.TimePeriod.Start_M())){this._temLoadLists.splice(c,0,new b.LoadInfo(d.TimePeriod.Start_M(),e.TimePeriod.Start_M(),d.LoadPerc));a=new b.LoadInfo(g.Start_M(),
g.End_M(),d.LoadPerc+e.LoadPerc);this._temLoadLists.splice(c+1,1);this._temLoadLists.splice(c+1,0,a);d.TimePeriod.End_M().isGreaterThan(e.TimePeriod.End_M())&&this._temLoadLists.splice(c+2,0,new b.LoadInfo(g.End_M(),d.TimePeriod.End_M(),d.LoadPerc));return}if(d.TimePeriod.End_M().isGreaterThan(e.TimePeriod.End_M()))h=new b.LoadInfo(g.End_M(),d.TimePeriod.End_M(),d.LoadPerc),d=new b.LoadInfo(g.Start_M(),g.End_M(),d.LoadPerc+e.LoadPerc),this._temLoadLists.splice(c,1),this._temLoadLists.splice(c,0,d),
e=h;else{d.LoadPerc+=e.LoadPerc;return}}else{if(e.TimePeriod.Start_M().isLessThan(g.Start_M())){h=this.combineWithPrevOrInsert(c,new b.LoadInfo(e.TimePeriod.Start_M(),g.Start_M(),e.LoadPerc));c=c+1-h;this._temLoadLists.splice(c,0,new b.LoadInfo(g.Start_M(),g.End_M(),d.LoadPerc+e.LoadPerc));c++;this._temLoadLists.splice(c,1);this._temLoadLists.splice(c,0,new b.LoadInfo(g.End_M(),d.TimePeriod.End_M(),d.LoadPerc));return}this._temLoadLists.splice(c,1);h=this.combineWithPrevOrInsert(c,new b.LoadInfo(d.TimePeriod.Start_M(),
g.Start_M(),d.LoadPerc));c=c+1-h;this._temLoadLists.splice(c,0,new b.LoadInfo(g.Start_M(),g.End_M(),d.LoadPerc+e.LoadPerc));e=new b.LoadInfo(g.End_M(),e.TimePeriod.End_M(),e.LoadPerc)}}this._temLoadLists.push(e)};b.ResourceLoadList.prototype.combineWithPrevOrInsert=function(e,a){var c=0;if(0<e){var d=this._temLoadLists[e-1];d.TimePeriod.End_M().equals(a.TimePeriod.Start_M())&&d.LoadPerc==a.LoadPerc&&(this._temLoadLists.splice(e-1,1),e--,a=new b.LoadInfo(d.TimePeriod.Start_M(),a.TimePeriod.End_M(),
a.LoadPerc),c++)}this._temLoadLists.splice(e,0,a);return c};b.ResourceLoadList.prototype.combineOrInsert=function(e,a){var c=0;if(0<e){var d=this._temLoadLists[e-1];d.TimePeriod.End_M().equals(a.TimePeriod.Start_M())&&d.LoadPerc==a.LoadPerc&&(this._temLoadLists.splice(e-1,1),e--,a=new b.LoadInfo(d.TimePeriod.Start_M(),a.TimePeriod.End_M(),a.LoadPerc),c++)}e<this._temLoadLists.Count-1&&(d=this._temLoadLists[e],a.TimePeriod.End_M().equals(d.TimePeriod.Start_M())&&a.LoadPerc==d.LoadPerc&&(this._temLoadLists.splice(e,
1),a=new b.LoadInfo(a.TimePeriod.Start_M(),d.TimePeriod.End_M(),a.LoadPerc),c++));this._temLoadLists.splice(e,0,a);return c}})(jQuery);
(function(){var f=RadiantQ.Gantt.Model;RadiantQ.Gantt.Model.Dependency=function(b,e,a,c){RadiantQ.Gantt.Model.IActivityDependency.call(this);RadiantQ.Gantt.Utils.IUIUpdateable.call(this);c||(c=RadiantQ.Gantt.DependencyType.FinishToStart);this.PropertyChanged=new ObjectEvent("PropertyChanged");this.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a);this.MonitorThisChanges(a)};this.PartialUpdate=function(a){this.TotalUpdate()};this.TotalUpdate=function(){this.EnsureActivityOrder()};
this.ensuringActivityOrder=!1;this.Model=null;b&&e&&a&&c&&(this.Model=b,this._fromActivity=e,this._toActivity=a,this.Type_M(c),this.Lag_M(RQTimeSpan.Zero_M()),this.FromActivity_M().PropertyChanged.subscribe(this.Activity_PropertyChanged,this),this.ToActivity_M().PropertyChanged.subscribe(this.Activity_PropertyChanged,this),this.TryUpdate());return this};RadiantQ.Gantt.Model.Dependency.prototype=new RadiantQ.Gantt.Utils.IUIUpdateable;RadiantQ.Gantt.Model.Dependency.prototype=new RadiantQ.Gantt.Model.IActivityDependency;
RadiantQ.Gantt.Model.Dependency.prototype.ComputeErrorTimeSpan=function(b,e,a,c){var d=RQTimeSpan.Zero_M();switch(this.Type_M()){case RadiantQ.Gantt.DependencyType.FinishToFinish:d=c-e;break;case RadiantQ.Gantt.DependencyType.StartToFinish:d=c-b;break;case RadiantQ.Gantt.DependencyType.StartToStart:d=a-b;break;default:a.equals(e)||(d=a-e)}return d};RadiantQ.Gantt.Model.Dependency.prototype.TryUpdate=function(){!1==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
null)};RadiantQ.Gantt.Model.Dependency.prototype.MonitorThisChanges=function(b){"Type"!=b&&"Lag"!=b||this.TryUpdate()};RadiantQ.Gantt.Model.Dependency.prototype.Activity_PropertyChanged=function(b,e){if("StartTime"==e.PropertyName||"EndTime"==e.PropertyName)this.TryUpdate();else if(b==this.FromActivity_M()&&"SortOrder"==e.PropertyName){var a=this.ToActivity_M();(a instanceof f.BaseActivity||!0==this.isBaseActivity)&&a.OnPropertyChanged("PredecessorIndexString")}};RadiantQ.Gantt.Model.Dependency.prototype.toString=
function(){return this.FromActivity_M().ActivityName_M()+" / "+this.ToActivity_M().ActivityName_M()+"; "+this.Type_M()};RadiantQ.Gantt.Model.Dependency.prototype.Dispose=function(){var b=this.ToActivity_M();this.FromActivity_M().PropertyChanged.unsubscribe(this.Activity_PropertyChanged,this);b.PropertyChanged.unsubscribe(this.Activity_PropertyChanged,this);RadiantQ.Gantt.Utils.DelayUpdateUtil.RemoveUpdates(this);b instanceof RadiantQ.Gantt.Model.BaseActivity&&b.IsDisposed||this.Model.ApplyPreferredStartTimeOnActivity(b,
b.PreferredStartTime_M())};RadiantQ.Gantt.Model.Dependency.prototype.CanMoveActivityTo=function(b,e){if(b==this.ToActivity_M()){var a=Date.MinValue,a=this.Model.ConvertToValidTimes(e,b.Effort_M(),e,a);e=a.adjustedStart;var a=a.adjustedEnd,c=this.FromActivity_M(),a=this.ComputeErrorTimeSpan(c.StartTime_M(),c.EndTime_M(),e,a);if(a<RQTimeSpan.Zero_M())return!1;a=this.Model.ConvertToValidStartTime(e-a,this.Lag_M(),b.Effort_M());if(e<a)return!1}return!0};RadiantQ.Gantt.Model.Dependency.prototype.ComputeLatestToActivityStartTime=
function(){var b=Date.MinValue,b=this.FromActivity_M(),e=this.ToActivity_M(),a=this.Lag_M();switch(this.Type_M()){default:case RadiantQ.Gantt.DependencyType.None:case RadiantQ.Gantt.DependencyType.FinishToStart:return this.Model.ConvertToValidStartTime(b.EndTime_M(),a,e.Effort_M());case RadiantQ.Gantt.DependencyType.StartToStart:return this.Model.ConvertToValidStartTime(b.StartTime_M(),a,e.Effort_M());case RadiantQ.Gantt.DependencyType.FinishToFinish:return b=this.Model.GetStart(b.EndTime_M(),e.Effort_M()),
this.Model.ConvertToValidStartTime(b,a,e.Effort_M());case RadiantQ.Gantt.DependencyType.StartToFinish:return b=this.Model.GetStart(b.StartTime_M(),e.Effort_M()),this.Model.ConvertToValidStartTime(b,a,e.Effort_M())}};RadiantQ.Gantt.Model.Dependency.prototype.EnsureActivityOrder=function(){if(!1!=this.Model.EnforceDependencyConstraints_M()&&!this.ensuringActivityOrder)try{this.ensuringActivityOrder=!0;var b=this.ToActivity_M();if(!1!=f.BaseGanttModel.ShouldEnforceDependency(b,this.Model)){var e=this.FromActivity_M(),
a=new RQTimeSpan(this.ComputeErrorTimeSpan(e.StartTime_M(),e.EndTime_M(),b.StartTime_M(),b.EndTime_M())),c=this.ComputeLatestToActivityStartTime();b.StartTime_M()<c?(a=a.getEqualNegative(),a.isLessThan(RQTimeSpan.Zero_M())&&RQTimeSpan.Zero_M(),b.ShiftForwardTo(c)):b.StartTime_M()>c&&!1==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel&&this.Model.ApplyPreferredStartTimeOnActivity(b,c)}}finally{this.ensuringActivityOrder=!1}};RadiantQ.Gantt.Model.DependenciesCollection=function(){this._depByActivities=
new RadiantQ.Gantt.Dictionary;this._predsByActivity=new RadiantQ.Gantt.Dictionary;this._succsByActivity=new RadiantQ.Gantt.Dictionary;this._fromActs={};this._toActs={};this._directPredActsByAct={};Array.call(this);this.CollectionChanged=new ObjectEvent("CollectionChanged");this._inCollectionChanged=!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype=[];RadiantQ.Gantt.Model.DependenciesCollection.prototype.add=function(b){this.push(b);this.updatePredsAndSuccessors(b);this.updateBaseActsAndDepActsCollection(b);
this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,b,this.length-1))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.updatePredsAndSuccessors=function(b,e){var a=b.FromActivity_M(),c=b.ToActivity_M(),d=this._predsByActivity[c.ID_M()],g=this._succsByActivity[a.ID_M()];e?(d&&1<d.length?(c=d.indexOf(b),-1!=c&&d.splice(c,1)):this._predsByActivity.Remove(c),g&&1<g.length?(c=g.indexOf(b),-1!=c&&g.splice(c,1)):this._succsByActivity.Remove(a)):(d||(d=new RQArray,this._predsByActivity.Add(c,
d)),d.push(b),g||(g=new RQArray,this._succsByActivity.Add(a,g)),g.push(b))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.updateFromAndToActs=function(b,e){var a=b.ID_M(),c=e.ID_M(),d=this._fromActs[a];d?void 0!=d._repeatingCnt[c]?d._repeatingCnt[c]++:(d.push(e),d._repeatingCnt[c]=0):(d=new RQArray,d.push(e),this._fromActs[a]=d,this._fromActs[a]._repeatingCnt={},this._fromActs[a]._repeatingCnt[c]=0);(d=this._toActs[c])?void 0!=d._repeatingCnt[a]?d._repeatingCnt[a]++:(d.push(b),d._repeatingCnt[a]=
0):(this._toActs[c]=d=new RQArray,d.push(b),this._toActs[c]._repeatingCnt={},this._toActs[c]._repeatingCnt[a]=0)};RadiantQ.Gantt.Model.DependenciesCollection.prototype.updateBaseActsAndDepActsCollection=function(b){var e=b.FromActivity_M();b=b.ToActivity_M();var a=e.ID_M(),c=b.ID_M(),d=this._directPredActsByAct[a];d?d.push(b):(d=new RQArray,d.push(b),this._directPredActsByAct[a]=d);this.updateFromAndToActs(e,b);a=this._toActs[a];c=this._fromActs[c];if(a)for(d=0;d<a.length;d++){if(a[d].ID_M(),this.updateFromAndToActs(a[d],
b),c)for(var g=0;g<c.length;g++)c[g].ID_M(),this.updateFromAndToActs(e,c[g]),this.updateFromAndToActs(a[d],c[g])}else if(c)for(g=0;g<c.length;g++)c[g].ID_M(),this.updateFromAndToActs(e,c[g])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.remove=function(b){if(b instanceof f.IActivity)return this.removeDependenciesOf(b);this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(b,null))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.removeDependenciesOf=function(b){b&&
b instanceof f.IActivity&&(b=this._depByActivities[b.ID_M()],this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(b,null)))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.removeBaseActsAndDepActsCollection=function(b){var e=b.FromActivity_M();b=b.ToActivity_M();var a=e.ID_M(),c=b.ID_M(),d=this._directPredActsByAct[e.ID_M()];if(1<d.length){var g=d.indexOf(b);d.splice(g,1)}else delete this._directPredActsByAct[e.ID_M()];var d=this._toActs[a],h=this._fromActs[c];if(d)for(var m=
0;m<d.length;m++){var f=d[m].ID_M();0==this._fromActs[f]._repeatingCnt[c]?1<this._fromActs[f].length?(delete this._fromActs[f]._repeatingCnt[c],g=this._fromActs[f].indexOf(b),this._fromActs[f].splice(g,1)):delete this._fromActs[f]:0<this._fromActs[f]._repeatingCnt[c]&&this._fromActs[f]._repeatingCnt[c]--;0==this._toActs[c]._repeatingCnt[f]?1<this._toActs[c].length?(delete this._toActs[c]._repeatingCnt[f],g=this._toActs[c].indexOf(d[m]),this._toActs[c].splice(g,1)):delete this._toActs[c]:0<this._toActs[c]._repeatingCnt[f]&&
this._toActs[c]._repeatingCnt[f]--;if(h)for(var l=0;l<h.length;l++){var n=h[l].ID_M();0==this._fromActs[a]._repeatingCnt[n]?1<this._fromActs[a].length?(delete this._fromActs[a]._repeatingCnt[n],g=this._fromActs[a].indexOf(h[l]),this._fromActs[a].splice(g,1)):delete this._fromActs[a]:0<this._fromActs[a]._repeatingCnt[n]&&this._fromActs[a]._repeatingCnt[n]--;0==this._toActs[n]._repeatingCnt[a]?1<this._toActs[n].length?(delete this._toActs[n]._repeatingCnt[a],g=this._toActs[n].indexOf(e),this._toActs[n].splice(g,
1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[a]&&this._toActs[n]._repeatingCnt[a]--;0==this._fromActs[f]._repeatingCnt[n]?1<this._fromActs[f].length?(delete this._fromActs[f]._repeatingCnt[n],g=this._fromActs[f].indexOf(h[l]),this._fromActs[f].splice(g,1)):delete this._fromActs[f]:0<this._fromActs[f]._repeatingCnt[n]&&this._fromActs[f]._repeatingCnt[n]--;0==this._toActs[n]._repeatingCnt[f]?1<this._toActs[n].length?(delete this._toActs[n]._repeatingCnt[f],g=this._toActs[n].indexOf(d[m]),
this._toActs[n].splice(g,1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[f]&&this._toActs[n]._repeatingCnt[f]--}}else if(h)for(l=0;l<h.length;l++)n=h[l].ID_M(),0==this._fromActs[a]._repeatingCnt[n]?1<this._fromActs[a].length?(delete this._fromActs[a]._repeatingCnt[n],g=this._fromActs[a].indexOf(h[l]),this._fromActs[a].splice(g,1)):delete this._fromActs[a]:0<this._fromActs[a]._repeatingCnt[n]&&this._fromActs[a]._repeatingCnt[n]--,0==this._toActs[n]._repeatingCnt[a]?1<this._toActs[n].length?
(delete this._toActs[n]._repeatingCnt[a],g=this._toActs[n].indexOf(e),this._toActs[n].splice(g,1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[a]&&this._toActs[n]._repeatingCnt[a]--;d=this._fromActs[a];h=this._toActs[c];d&&(0==d._repeatingCnt[c]?(delete d._repeatingCnt[c],g=d.indexOf(b),d.splice(g,1)):0<d._repeatingCnt[c]&&d._repeatingCnt[c]--,0==d.length&&delete this._fromActs[a]);h&&(0==h._repeatingCnt[a]?(delete h._repeatingCnt[a],g=h.indexOf(e),h.splice(g,1)):0<h._repeatingCnt[a]&&
h._repeatingCnt[a]--,0==h.length&&delete this._toActs[c])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.contains=function(b){return this._depByActivities.Contains(b)};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearItems=function(){for(var b=0;b<this.length;b++)this[b].Dispose();this.splice(0,this.length);this._depByActivities=new RadiantQ.Gantt.Dictionary};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetDependenciesByActivity=function(b){return this._depByActivities[b.ID_M()]};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetDepenedenciesByIndex=function(b){return b<this.length?this._depByActivities.GetItemByIndex(b):null};RadiantQ.Gantt.Model.DependenciesCollection.prototype.OnCollectionChanged=function(b){if(null!=b.OldItems)for(var e=0;e<b.OldItems.length;e++){var a=b.OldItems[e];this.UnsubscribeToChildEvents(a);this.ClearDependencyCacheInfo(a);this.removeBaseActsAndDepActsCollection(a);this.updatePredsAndSuccessors(a,!0);a.Dispose()}if(null!=b.NewItems)for(e=
0;e<b.NewItems.length;e++)a=b.NewItems[e],this.CacheDependencyInfo(a),this.SubscribeToChildEvents(a);try{this._inCollectionChanged=!0,this.CollectionChanged&&this.CollectionChanged.raise(this,b)}finally{this._inCollectionChanged=!1}};RadiantQ.Gantt.Model.DependenciesCollection.prototype.SubscribeToChildEvents=function(b){};RadiantQ.Gantt.Model.DependenciesCollection.prototype.UnsubscribeToChildEvents=function(b){};RadiantQ.Gantt.Model.DependenciesCollection.prototype.SetItem=function(b,e){this.ClearDependencyCacheInfo(this[b]);
this[b].Dispose();this.CacheDependencyInfo(this[b])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.CacheDependencyInfo=function(b){var e=b.FromActivity_M(),a=b.ToActivity_M(),c=this._depByActivities[e.ID_M()];if(c){if(ContainsValueInArray(c,b))return;c.push(b)}else this._depByActivities.Add(e,Array(b));(c=this._depByActivities[a.ID_M()])?ContainsValueInArray(c,b)||c.push(b):this._depByActivities.Add(a,Array(b))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearDependencyCacheInfo=
function(b){var e=b.FromActivity_M(),a=b.ToActivity_M(),c=this._depByActivities[e.ID_M()];if(c){var d=RQArray.prototype.indexOf.call(c,b);c.splice(d,1)}0==c.length&&this._depByActivities.Remove(e);if(c=this._depByActivities[a.ID_M()])d=RQArray.prototype.indexOf.call(c,b),c.splice(d,1);0==c.length&&this._depByActivities.Remove(a);d=RQArray.prototype.indexOf.call(this,b);this.splice(d,1)};RadiantQ.Gantt.Model.DependenciesCollection.prototype.IsActivityFinishDependentOnAnother=function(b){var e=this._depByActivities[b.ID_M()];
if(e)for(var a=0;a<e.length;a++){var c=e[a];if(c.ToActivity_M()==b&&(c.Type_M()==RadiantQ.Gantt.DependencyType.FinishToFinish||c.Type_M()==RadiantQ.Gantt.DependencyType.StartToFinish))return!0}return!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.DoesDependencyExist=function(b,e,a){return this.DoesConstraintExist(b,e,a)||this.DoesConstraintExist(e,b,a)?!0:!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.DoesConstraintExist=function(b,e,a){if(0==this.length)return!1;var c=this._predsByActivity[e.ID_M()];
if(a){if(c){if((a=this._directPredActsByAct[b.ID_M()])&&-1!=a.indexOf(e))return!0;for(e=0;e<c.length;e++)if(c[e].FromActivity_M()==b)return!0}}else{if((c=this._fromActs[b.ID_M()])&&-1!=c.indexOf(e)||(c=this._toActs[e.ID_M()])&&-1!=c.indexOf(b))return!0;if(b.Parent_M()){if(e.Parent_M()){if((c=this.DoesConstraintExist(b.Parent_M(),e,a))||(c=this.DoesConstraintExist(b,e.Parent_M(),a)))return!0;c=this.DoesConstraintExist(b.Parent_M(),e.Parent_M(),a)}else c=this.DoesConstraintExist(b.Parent_M(),e,a);if(c)return!0}else if(e.Parent_M()&&
(c=this.DoesConstraintExist(b,e.Parent_M(),a)))return!0}return!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearDependencies=function(b){b=(this._predsByActivity[b.ID_M()]||[]).slice();for(var e=0;e<b.length;e++)this.remove(b[e])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetPredecessors=function(b){return(b=this._predsByActivity[b.ID_M()])?b:[]};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetSuccessors=function(b){return(b=this._succsByActivity[b.ID_M()])?b:[]};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.Dispose=function(){this._depByActivities&&this._depByActivities.Dispose();this._depByActivities=null;this._predsByActivity&&this._predsByActivity.Dispose();this._predsByActivity=null;this._succsByActivity&&this._succsByActivity.Dispose();this._succsByActivity=null;this._fromActs={};this._toActs={};this._directPredActsByAct={};Array.call(this);this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null;this._inCollectionChanged=
!1}})();
(function(f){var b=RadiantQ.Gantt.Model,e=RadiantQ.Gantt.DependencyType;b.BaseGanttModel=function(a,c,d){this.isBaseGanttModel=!0;b.IGanttModel.call(this);b.BaseGanttModel.IdCounter=1;this.topID=-1;this.AdjustDurationOnAssignment_M(null);this.EnforceDependencyConstraints_M(null);this.ResourceCapacityProvider=null;this.GetActivityById=function(a){return this._dictActivityById.GetItemByKey(a)};this._topSortOrder=0;this.BeforeEffortChanging=new ObjectEvent("BeforeEffortChanging");this.PropertyChanged=new ObjectEvent("PropertyChanged");
this.NewActivityAdded=new ObjectEvent("NewActivityAdded");this.ActivityEventHandler=new ObjectEvent("ActivityEventHandler");this.ActivityRemoved=new ObjectEvent("ActivityRemoved");this.BeforeStartTimeChanging=new ObjectEvent("BeforeStartTimeChanging");this._dictActivityById=new RadiantQ.Gantt.Dictionary;this.ShouldEnforceDependencyConstraintsOnActivity=new ObjectEvent("ShouldEnforceDependencyConstraintsOnActivity");this.ProvideDefaultWBSID=new ObjectEvent("ProvideDefaultWBSID");if(this&&0!=arguments.length)return this.ValidateDependencySetting_M(!0),
this.EnforceDependencyConstraints_M(!0),this.AutoCalculateSummaryTaskTimes_M(!0),this.CanShiftInProgressTasks_M(!0),this.AdjustDurationOnAssignment_M(!0),this.LagStringUnitsInHours_M(1),this._dictActivityById=new RadiantQ.Gantt.Dictionary,this._activities=this.CreateActivitiesCollection(),this._dependencies=new RadiantQ.Gantt.Model.DependenciesCollection,this._resources=new b.GanttResourcesCollection,this._childCollectionChangedHandler=this._activities.ChildCollectionChanged.subscribe(this.actitivites_ChildCollectionChanged,
this),this._actsCollectionChangedHandler=this._activities.CollectionChanged.subscribe(this.actitivites_ChildCollectionChanged,this),this._depsCollectionChangedHandler=this._dependencies.CollectionChanged.subscribe(this._dependencies_CollectionChanged,this),this.WorkTimeSchedule_M(a),c&&("function"==typeof c?this.ShouldEnforceDependencyConstraintsOnActivity.subscribe(c,this):"function"==typeof c.Handler&&this.ShouldEnforceDependencyConstraintsOnActivity.subscribe(c.Handler,c.Context||this)),d&&("function"==
typeof d?this.ProvideDefaultWBSID.subscribe(d,this):"function"==typeof d.Handler&&this.ProvideDefaultWBSID.subscribe(d.Handler,d.Context||this)),this};b.BaseGanttModel.prototype=new b.IGanttModel;RadiantQ.Gantt.addMethod(b.BaseGanttModel.prototype,"UpdateSortOrderFrom",function(a){a=this.Activities_M();0<a.length&&this.UpdateSortOrderFrom(a[0],1)});RadiantQ.Gantt.addMethod(b.BaseGanttModel.prototype,"UpdateSortOrderFrom",function(a,b){for(var c=a.Parent_M(),c=null!=c?c.ChildActivities_M():this.Activities_M(),
d=c.indexOf(a);d<c.length;d++){0>d&&(d=0);c[d].SortOrder_M(b);b++;var g=c[d].ChildActivities_M();0<g.length&&(b=this.UpdateSortOrderFrom(g[0],b))}return b});b.BaseGanttModel.prototype._depTestResults=new RadiantQ.Gantt.Dictionary;b.BaseGanttModel.prototype._depInParents=new RadiantQ.Gantt.Dictionary;b.BaseGanttModel.prototype.ActivitiesCount_M=function(){return this._dictActivityById.length};b.BaseGanttModel.prototype.ActivityById_M=function(){return this._dictActivityById};b.BaseGanttModel.prototype.ResourceAssignmentTracker_M=
function(){this._resourceAssignmentTracker||(this._resourceAssignmentTracker=this.CreateResourceAssignmentTracker(this));return this._resourceAssignmentTracker};b.BaseGanttModel.prototype.CustomProgressCalculation_M=function(){return this._customProgressCalculation};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.BaseGanttModel.prototype,"ActivitiesCount",{get:function(){return this.ActivitiesCount_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseGanttModel.prototype,
"ActivityById",{get:function(){return this.ActivityById_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseGanttModel.prototype,"ResourceAssignmentTracker",{get:function(){return this.ResourceAssignmentTracker_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CustomProgressCalculation",{get:function(){return this.CustomProgressCalculation_M()},enumerable:!0,configurable:!0}));b.BaseGanttModel.prototype.OnShouldEnforceDependencyConstraints=
function(a){0<this.ShouldEnforceDependencyConstraintsOnActivity.fn.length&&this.ShouldEnforceDependencyConstraintsOnActivity.raise(this,a)};b.BaseGanttModel.ShouldEnforceDependency=function(a,c){if(!1==c.CanShiftInProgressTasks_M()&&0<a.ProgressPercent_M())return!1;var d=new b.EnforceDependencyConstraintsEventArgs(a);return c?(c.OnShouldEnforceDependencyConstraints(d),d.Enforce_M()):!0};b.BaseGanttModel.prototype.CanProvideWBSID=function(a,b){0<this.ProvideDefaultWBSID.fn.length};b.BaseGanttModel.prototype.RaiseProvideWBSID=
function(a){0<this.ProvideDefaultWBSID.fn.length&&this.ProvideDefaultWBSID.raise(this,a)};b.BaseGanttModel.prototype._dependencies_CollectionChanged=function(a,b){if(null!=b.OldItems)for(var c=0;c<b.OldItems.length;c++){var d=b.OldItems[c];d.ToActivity_M().OnRemovedPredecessorDependency(d)}if(null!=b.NewItems)for(c=0;c<b.NewItems.length;c++)d=b.NewItems[c],d.ToActivity_M().OnAddedPredecessorDependency(d)};b.BaseGanttModel.prototype.GetPredecessorsHierarchy=function(a){var b=[];a=this.Dependencies_M().GetPredecessors(a);
for(var c=0;c<a.length;c++)dep=a[c],this.AddActivityHierarchyToList(b,dep.FromActivity_M());return b};b.BaseGanttModel.prototype.AddActivityHierarchyToList=function(a,b){var c=b.ChildActivities_M();if(0==c.length)ContainsValueInArray(a,b)||a.push(b);else for(var d=0;d<c.length;d++)this.AddActivityHierarchyToList(a,c[d])};b.BaseGanttModel.prototype.GetResourcesDictionary=function(a){var b=new RadiantQ.Gantt.Dictionary;a=a.Assignments_M();for(var c=0;c<a.length;c++){var d=a[c];b.Add(d.Resource_M(),
d.AllocationUnits_M())}return b};b.BaseGanttModel.prototype.GetActivitiesWithConflictingAssignments=function(){var a=[],b=this.AllActivities_M();if(0<b.length){for(var c=new RadiantQ.Gantt.Dictionary,d=0;d<b.length;d++){var g=b[d],e=g.Assignments_M();if(0==g.ChildActivities_M().length&&null!=e&&0!=e.length)for(var f=0;f<e.length;f++){var r=e[f].Resource_M(),t=c.GetItemByKey(r);t||(t=[],c.Add(r,t));t.push(g)}}for(b=0;b<c.Keys.length;b++)for(g=c.GetItemByKey(c.Keys[d]),d=0;d<g.length-1;){e=!1;r=g[d];
t=new TimePeriod(r.StartTime_M(),r.EndTime_M());for(f=d+1;f<g.length;){var s=g[f],w=new TimePeriod(s.StartTime_M(),s.EndTime_M()),w=t.Intersect(w);null!=w&&w.Value.Duration_M()>RQTimeSpan.Zero_M()?(e=!0,a.push(s),g.RemoveAt(f)):f++}e?(a.push(r),g.RemoveAt(d)):d++}}return a};b.BaseGanttModel.GetEndTimeForAssignmentInActivity=function(a,b,c,d){if(b.equals(RQTimeSpan.Zero_M()))return a.StartTime_M();b=b.Ticks_M()/a.Assignments_M().length;b*=100/c.AllocationUnits_M();c=c.Resource_M().Schedule_M();c=null==
c?d:c;return null!=c?c.GetEnd(a.StartTime_M(),RQTimeSpan.fromTicks(b)):a.StartTime_M().addTimeSpan(RQTimeSpan.fromTicks(b))};b.BaseGanttModel.prototype.OnBeforeEffortChanging=function(a,c){if(this.BeforeEffortChanging&&0<this.BeforeEffortChanging.fn.length){var d=new b.BeforeEffortChangingEventArgs(a,c);this.BeforeEffortChanging.raise(this,d);return d.NewEffort}return c};b.BaseGanttModel.ConvertEffortToDuration=function(a,b,c,d){a=a.Assignments_M();if(!1==c||0==a.length)return b;for(d=c=0;d<a.length;d++){var g=
a[d];c+=g.AllocationUnits_M();g.Resource_M().Schedule_M()}b=b.Ticks_M();b=Math.ceil(b/(c/100));return RQTimeSpan.fromTicks(b)};b.BaseGanttModel.prototype.OnBeforeStartTimeChanging=function(a,c){if(this.BeforeStartTimeChanging&&0<this.BeforeStartTimeChanging.fn.length){var d=new b.BeforeStartTimeChangingEventArgs(a,c);this.BeforeStartTimeChanging.raise(this,d);return d.NewStartTime}return c};b.BaseGanttModel.prototype.actitivites_ChildCollectionChanged=function(a,b){if(null!=b.NewItems)for(var c=0;c<
b.NewItems.length;c++){var d=b.NewItems[c];(a instanceof RadiantQ.Gantt.Model.IActivity||a.isIActivity)&&this.RemoveAnyParentChildDependencies(a,d);this.RecursivelyRegisterActivities(d)}else if(null!=b.OldItems)for(c=0;c<b.OldItems.length;c++)d=b.OldItems[c],this.RecursivelyUnRegisterActivities(d)};b.BaseGanttModel.prototype.RemoveActivity=function(a,c){this.RecursivelyClearDependencies(c);null!=a?a.ChildActivities_M().remove(c):this.Activities_M().remove(c);this.OnActivityRemoved(new b.ActivityEventArgs(c))};
b.BaseGanttModel.prototype.RecursivelyClearDependencies=function(a){var b=this._dependencies.GetDependenciesByActivity(a);if(null!=b)for(var c=b.length-1;0<=c;c--){var d=b[c];this.Dependencies_M().remove(d)}a=a.ChildActivities_M();for(c=0;c<a.length;c++)this.RecursivelyClearDependencies(a[c])};b.BaseGanttModel.prototype.RecursivelyRegisterActivities=function(a){var b=a.ID_M(),c=this._dictActivityById.GetItemByKey(b);if(null!=c&&c!=a)throw Error("A new activity () with the ID ("+b+") same as another activity ("+
c.ActivityName_M()+") was added. This is not supported.");this._dictActivityById.Add(b,a);this.topID<b&&(this.topID=b);a=a.ChildActivities_M();for(b=0;b<a.length;b++)this.RecursivelyRegisterActivities(a[b])};b.BaseGanttModel.prototype.RecursivelyUnRegisterActivities=function(a){var b=null,c=a.ID_M();this._dictActivityById.Contains(c)&&(b=this.GetActivityById(c));null!=b&&b==a&&this._dictActivityById.Remove(c);a=a.ChildActivities_M();for(b=0;b<a.length;b++)this.RecursivelyUnRegisterActivities(a[b])};
b.BaseGanttModel.prototype.RemoveAnyParentChildDependencies=function(a,b){var c=this._dependencies.GetDependenciesByActivity(b);if(null!=c)for(var d=c.length-1;0<=d;d--){var g=c[d];g.FromActivity_M()!=a&&g.ToActivity_M()!=a||this.Dependencies_M().remove(g)}c=b.ChildActivities_M();for(d=0;d<c.length;d++)this.RemoveAnyParentChildDependencies(a,c[d])};b.BaseGanttModel.prototype.CreateNewDependencyInternal=function(a,c,d,g,e){if(!1==e&&!1==this.CanAddNewDependency(a,c,b.NewDependencyAddScenarioType.None,
d))return a="Cannot add a dependency between activities "+a.ActivityName_M()+" and "+c.ActivityName_M()+". They are either already directly or indirectly dependent or one of them is, directly or indirectly, a summary task of another. Use the Model.CanAddNewDependency method to determine if dependencies can be added between two tasks, before adding a new dependency.",window.console&&console.log(a),!1;try{var f=new RadiantQ.Gantt.Utils.DelayUpdates,q=new RadiantQ.Gantt.Model.Dependency(this,a,c,d);
q.Lag_M(g);this.Dependencies_M().add(q);return q}finally{f.Dispose()}};b.BaseGanttModel.prototype.RemoveDependenciesLeadingTo=function(a,b){var c=this.Dependencies_M(),d=a.ToActivity_M();if(d==b)c.remove(a);else{for(var g=c.GetSuccessors(d),e=0;e<g.length;e++)this.RemoveDependenciesLeadingTo(g[e],b);d=d.ChildActivities_M();for(e=0;e<d.length;e++){g=d[e];if(this.IsAncestor(g,b)){c.Remove(a);break}for(var g=c.GetSuccessors(g),f=0;f<g.length;f++)this.RemoveDependenciesLeadingTo(g[f],b)}}};b.BaseGanttModel.prototype.InitDepResultsCache=
function(){this._depTestResults=new RadiantQ.Gantt.Dictionary};b.BaseGanttModel.prototype.ClearDepResultsCache=function(){this._depTestResults.Clear();this._depTestResults=new RadiantQ.Gantt.Dictionary};b.BaseGanttModel.prototype.AddToDepResultsCache=function(a,b){this._depTestResults.Add(a.ID_M()+"+"+b.ID_M(),!0)};b.BaseGanttModel.prototype.IsInDepResultsCache=function(a,b){return this._depTestResults.Contains(a.ID_M()+"+"+b.ID_M())?!0:!1};b.BaseGanttModel.prototype.InitDepInParentsResultsCache=
function(){this._depInParents=new RadiantQ.Gantt.Dictionary};b.BaseGanttModel.prototype.ClearDepInParentsResultsCache=function(){this._depInParents.Clear();this._depInParents=null};b.BaseGanttModel.prototype.AddToDepInParentsResultsCache=function(a,b){this._depInParents.Add(a.ID_M()+"+"+b.ID_M(),!0)};b.BaseGanttModel.prototype.IsInDepInParentsResultsCache=function(a,b){return this._depInParents.Contains(a.ID_M()+"+"+b.ID_M())?!0:!1};b.BaseGanttModel.prototype.CanAddNewDependencyRecursive=function(a,
b,c){function d(a,b){var c=b.ID_M();if(f[c]&&f.Dependencies==a)return f[c];for(var g=new RQArray,h=a._fromActs[c]||[],e=0;e<h.length;e++){var m=h[e],k=m.ChildActivities_M();if(k.length)for(var n=0;n<k.length;n++){var r=d(a,k[n]);if(r.length)for(var p=0;p<r.length;p++)g.push(r[p])}g.push(m)}return f[c]=g}function g(a){var b=new RQArray;for(a=a.Parent_M();a;)b.push(a),a=a.Parent_M();return b.reverse()}function e(a){var b=a.ID_M();if(r[b])return r[b];var c=new RQArray;a=a.ChildActivities_M();for(var d=
0;d<a.length;d++){var g=a[d];c.push(g);g=e(g);if(0<g.length)for(var h=0;h<g.length;h++)c.push(g[h])}return r[b]=c}if(!1==this.ValidateDependencySetting_M())return!0;if(0==c)this.InitDepResultsCache();else if(this.IsInDepResultsCache(a,b))return!0;if(this.IsAncestor(a,b)||this.IsAncestor(b,a))return!1;var f={Dependencies:this._dependencies},r={};if(function(a,b){var c=this._fromActs[a.ID_M()];return c&&-1!=c.indexOf(b)?!0:(c=this._toActs[b.ID_M()])&&-1!=c.indexOf(a)?!0:!1}.call(this._dependencies,
b,a))return!1;var t=a.Parent_M(),s=b.Parent_M();t&&s&&t==s?(t=a,s=b):(t=a.Parent_M()?g(a)[0]:a,s=b.Parent_M()&&b.Parent_M()!=a.Parent_M()?g(b)[0]:b);fromChilds=e(t);toChilds=e(s);var w=d(this._dependencies,b);if(-1!=w.indexOf(a)||-1!=w.indexOf(t))return!1;s=d(this._dependencies,s);if(-1!=s.indexOf(a)||-1!=s.indexOf(t))return!1;if(fromChilds.length&&fromChilds!=toChilds)for(var u=0;u<fromChilds.length;u++){var v=fromChilds[u];if(-1!=w.indexOf(v)||-1!=s.indexOf(v))return!1;_toChilds=e(b);if(0<_toChilds.length)for(var z=
0;z<_toChilds.length;z++){var y=_toChilds[z];if(v!=y&&(y=d(this._dependencies,y),-1!=y.indexOf(a)||-1!=y.indexOf(t)||-1!=y.indexOf(v)))return!1}}else for(toChilds=e(b),u=0;u<toChilds.length;u++)if(y=toChilds[u],y=d(this._dependencies,y),-1!=y.indexOf(a)||-1!=y.indexOf(t))return!1;this.AddToDepResultsCache(a,b);0==c&&this.ClearDepResultsCache();return!0};b.BaseGanttModel.prototype.HasDependencyInParentsRecursive=function(a,b,c,d){if(0==d)this.InitDepInParentsResultsCache();else if(this.IsInDepInParentsResultsCache(a,
b))return!1;var g=this.Dependencies_M();if(0==g.length)return!1;if(c&&g.DoesDependencyExist(a,b,!0))return!0;c=a.Parent_M();g=b.Parent_M();if(null!=c&&void 0!=c&&this.HasDependencyInParentsRecursive(c,b,!0,d+1)||null!=g&&void 0!=g&&this.HasDependencyInParentsRecursive(a,g,!0,d+1))return!0;this.AddToDepInParentsResultsCache(a,b);return!1};b.BaseGanttModel.prototype.OnNewActivityAdded=function(a){null!=this.NewActivityAdded&&this.NewActivityAdded.raise(this,a)};b.BaseGanttModel.prototype.OnActivityRemoved=
function(a){null!=this.ActivityRemoved&&this.ActivityRemoved.raise(this,a);a.Dispose()};b.BaseGanttModel.prototype.OnPropertyChanged=function(a,b){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,{propertyName:a,value:b})};b.BaseGanttModel.prototype.CreateResourceAssignmentTracker=function(a){return new b.ResourceAssignmentTracker(a)};b.BaseGanttModel.prototype.CreateActivitiesCollection=function(){return new b.ActivitiesCollection(null,this)};b.BaseGanttModel.prototype.GetActivityById=
function(a){return this._dictActivityById.ContainsKey(a)?this._dictActivityById[a]:null};b.BaseGanttModel.prototype.Dispose=function(){for(var a=this.AllActivities_M(),b=0;b<a.length;b++)a.asArray[b].Dispose();this._dictActivityById=null;this._childCollectionChangedHandler&&(this._childCollectionChangedHandler.Dispose(),this._childCollectionChangedHandler=null);this._actsCollectionChangedHandler&&(this._actsCollectionChangedHandler.Dispose(),this._actsCollectionChangedHandler=null);this._depsCollectionChangedHandler&&
(this._depsCollectionChangedHandler.Dispose(),this._depsCollectionChangedHandler=null);this._activities&&this._activities.Dispose();this._activities=null;this._dependencies&&this._dependencies.Dispose();this._dependencies=null;this._resources&&this._resources.Dispose();this._resources=null;this.BeforeEffortChanging&&this.BeforeEffortChanging.Dispose();this.BeforeEffortChanging=null;this.PropertyChanged&&this.PropertyChanged.Dispose();this.PropertyChanged=null;this.NewActivityAdded&&this.NewActivityAdded.Dispose();
this.NewActivityAdded=null;this.ActivityEventHandler&&this.ActivityEventHandler.Dispose();this.ActivityEventHandler=null;this.ActivityRemoved&&this.ActivityRemoved.Dispose();this.ActivityRemoved=null;this.BeforeStartTimeChanging&&this.BeforeStartTimeChanging.Dispose();this.BeforeStartTimeChanging=null;this._dictActivityById&&this._dictActivityById.Dispose();this._dictActivityById=null;this.ShouldEnforceDependencyConstraintsOnActivity&&this.ShouldEnforceDependencyConstraintsOnActivity.Dispose();this.ShouldEnforceDependencyConstraintsOnActivity=
null;this.ProvideDefaultWBSID&&this.ProvideDefaultWBSID.Dispose();this.base=this.ProvideDefaultWBSID=null};b.BaseGanttModel.prototype.GetCriticalActivities=function(a){for(var b=Date.MinValue,c=this.AllActivities_M()._collections,d=0;d<c.length;d++){var g=c[d].value,g=g.EndTime_M();g>b&&(b=g)}for(var e=new RQArray,d=0;d<c.length;d++)g=c[d].value,g.IsCritical(b,a,null)&&e.push(g);return e};b.BaseGanttModel.prototype.LevelResources=function(a,c){var d=this.AllActivities_M();if(0<d.length){for(var g=
new RadiantQ.Gantt.Dictionary,e=new RadiantQ.Gantt.Dictionary,f=0;f<d.length;f++){var q=d.GetItemByIndex(f),r=q.Assignments_M();0==q.ChildActivities_M().length&&null!=r&&0!=r.length&&(g.Add(q,this.GetPredecessorsHierarchy(q)),e.Add(q,this.GetResourcesDictionary(q)))}d=new RadiantQ.Gantt.Dictionary;for(f=g.length;0<f;f=g.length){for(var r=[],t=0;t<g.length;t++){for(var q=g._collections[t].key,s=!0,w=g.GetItemByKey(q),u=0;u<w.length;u++){var v=w[u];if(g.Contains(v)&&!ContainsValueInArray(r,v)){s=!1;
break}}if(s){s=c;w=e.GetItemByKey(q);for(u=0;u<w.length;u++){var v=w._collections[u],z=v.key,y=v.value,A=d.GetItemByKey(z);if(A)for(v=0;v<A.length;v++){var x=A._collections[v],C=x.key,x=this.GetResourceCapacity(z);C+y>x&&(C=A.GetItemByKey(C),C.isGreaterThan(s)&&(s=C))}}!a&&0!=q.ProgressPercent_M()||s==q.StartTime_M()||(q.PreferredStartTime_M(s),q.StartTime_M(s));y=this.AdjustDurationOnAssignment_M();for(u=0;u<w.length;u++){v=w._collections[u];z=v.key;x=v.value;d.Contains(z)||d.Add(z,new RadiantQ.Gantt.Dictionary);
var A=d.GetItemByKey(z),C=new RadiantQ.Gantt.Dictionary,L=y?b.BaseGanttModel.GetEndTimeForAssignmentInActivity(q,q.Effort_M(),q.Assignments_M().GetAssignmentForResource(z),this.WorkTimeSchedule_M()):q.EndTime_M();C.Add(x,L);for(v=0;v<A.length;v++){var z=A._collections[v].key,H=A.GetItemByKey(z);H.isGreaterThan(s)&&(H.isLessThan(L)?C.Add(z+x,H):C.Add(z+x,L))}for(v=0;v<C.length;v++)x=C._collections[v],z=x.key,x=x.value,L=A.indexOf(z),-1==L?A.Add(z,x):x>A._collections[L].value&&(A._collections[L].value=
x)}r.push(q)}}for(v=0;v<r.length;v++)g.Remove(r[v]);if(g.length==f)break}}};b.BaseGanttModel.prototype.GetResourceCapacity=function(a){return this.ResourceCapacityProvider?this.ResourceCapacityProvider(a):100};b.BaseGanttModel.prototype.ConvertToValidTimes=function(a,b,d,g,e){b||(b=RQTimeSpan.Zero_M());g=a;g.addTimeSpan(b);g=this.AdjustStartTimeWithEffort(g,b);e=c(g,b,null!=d?d:this.WorkTimeSchedule_M());return{adjustedStart:g,adjustedEnd:e}};b.BaseGanttModel.prototype.ConvertToValidStartTime=function(b,
c,d){return c.equals(RQTimeSpan.Zero_M())&&a(b,d,this.WorkTimeSchedule_M())?b:RadiantQ.Gantt.Utils.TimeComputingUtils.AddLagToStartTime(b,c,this.WorkTimeSchedule_M())};var a=b.BaseGanttModel.ApplyMilestoneExceptionToStartTime=function(a,b,c){b||(b=RQTimeSpan.Zero_M());return b.equals(RQTimeSpan.Zero_M())&&(null==c?a:c.GetStart(a,RQTimeSpan.Zero_M())).equals(a)?!0:!1};b.BaseGanttModel.ComputeStartTime=function(a,b,c){return null==c?(b=b.getEqualNegative(),a.addTimeSpan(b)):c.GetStart(a,b)};var c=b.BaseGanttModel.ComputeEndTime=
function(a,c,g,e,f){if(!(a.isBaseActivity||a instanceof b.IActivity))return d(a,c,g,e);var p=a.ChildActivities_M();if(0<p.length&&f)return p.EndTime_M();f=a.Assignments_M();p=a.Schedule_M();if(!1==e||0==f.length)return d(a.StartTime_M(),c,null==p?g:p);e=Date.MinValue;for(var q=0;q<f.length;q++){var r=b.BaseGanttModel.GetEndTimeForAssignmentInActivity(a,c,f[q],null==p?g:p);r>e&&(e=r)}return e},d=function(b,c,d){var g=RQTimeSpan.Zero_M();c||(c=g);return c.equals(g)&&a(b,g,d)?b:null==d?b.addTimeSpan(c):
d.GetEnd(b,c)};b.BaseGanttModel.prototype.ComputeEndTime=function(a){return c(a,a.Effort_M(),this.WorkTimeSchedule_M(),this.AdjustDurationOnAssignment_M(),this.AutoCalculateSummaryTaskTimes_M())};b.BaseGanttModel.prototype.ComputeEffort=function(a,b){var c=a.StartTime_M();if(c==Date.MinValue||c==Date.MaxValue)return RQTimeSpan.Zero_M();var d=a.Assignments_M(),g=a.Schedule_M(),g=null!=g?g:this.WorkTimeSchedule_M();if(!1==this.AdjustDurationOnAssignment_M()||0==d.length||0<a.ChildActivities_M().length)return null==
g?new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(c,b):g.GetEffort(c,b);for(var e=RQTimeSpan.MaxValue_M(),f=0;f<d.length;f++){var r=d[f],t=r.Resource_M().Schedule_M(),t=null==t?g:t,s=RQTimeSpan.MinValue_M();t?(s=t.GetEffort(c,b),s=RQTimeSpan.fromTicks(s.Ticks_M()*(r.AllocationUnits_M()/100))):s=new RQTimeSpan(b-c);s.isLessThan(e)&&(e=s)}return RQTimeSpan.fromTicks(e.Ticks_M()*d.length)};b.BaseGanttModel.prototype.AdjustEffort=function(a,b){return this.OnBeforeEffortChanging(a,b)};b.BaseGanttModel.prototype.ConvertDurationToEffort=
function(a,b){var c=b.Assignments_M();if(!1==this.AdjustDurationOnAssignment_M()||0==c.length)return a;for(var d=0,g=0;g<c.length;g++)d+=c[g].AllocationUnits_M();c=Math.ceil(a.Ticks_M()*(d/100));return RQTimeSpan.fromTicks(c)};b.BaseGanttModel.prototype.ComputeDuration=function(a){return g(a,a.Effort_M(),this.AdjustDurationOnAssignment_M())};var g=b.BaseGanttModel.ComputeDuration=function(a,c,d){return!1==d||0==a.Assignments_M().length?a.Effort_M():b.BaseGanttModel.ConvertEffortToDuration(a,c,d,!1)};
b.BaseGanttModel.prototype.GetStart=function(a,b){var c=this.WorkTimeSchedule_M();return null==c?a.addTimeSpan(RQTimeSpan.Zero_M().subtract(b)):c.GetStart(a,b)};b.BaseGanttModel.AdjustEndTime=function(a,b){return a<=DateTime.MinValue||a>=DateTime.MaxValue?a:null==b?a:b.ConverToPreviousWorkingTime(a)};b.BaseGanttModel.prototype.AdjustStartTime=function(a,c){var d=!1;if(!0==this.adjustDurationOnAssignment&&0<a._assignments.length&&0==a._childActivities.length){for(var g=Date.MaxValue,e=a._assignments.length,
f=0;f<e;f++){var q=a._assignments[f]._resource.Schedule_M();null!=q&&(d=b.BaseGanttModel.AdjustStartTime(c,a._effort,q),g.isGreaterThan(d)&&(g=d),d=!0)}d&&(c=g)}!1!=d||0!=a._childActivities.length&&!1!=this.AutoCalculateSummaryTaskTimes_M()||(g=a.Schedule_M(),c=null!=g?b.BaseGanttModel.AdjustStartTime(c,a._effort,g):this.AdjustStartTimeWithEffort(c,a._effort));return this.OnBeforeStartTimeChanging(a,c)};b.BaseGanttModel.prototype.AdjustStartTimeWithEffort=function(a,c){return b.BaseGanttModel.AdjustStartTime(a,
c,this.WorkTimeSchedule_M())};b.BaseGanttModel.AdjustStartTime=function(b,c,d){return b==Date.MinValue||b==Date.MaxValue||a(b,c,d)?b:null==d?b:d.ConvertToNextWorkingTime(b)};b.BaseGanttModel.prototype.RemoveActivity=function(a,b){this.RecursivelyClearDependencies(b);null!=a?a.ChildActivities_M().remove(b):this.Activities_M().remove(b);this.OnActivityRemoved(b)};b.BaseGanttModel.prototype.GetNewID=function(){return this.topID+1};b.BaseGanttModel.prototype.SetTopSortOrder=function(a){var b=this.ActivitiesCount_M();
this._topSortOrder<b-1&&(this._topSortOrder=b-1);this._topSortOrder<a&&(this._topSortOrder=a)};b.BaseGanttModel.prototype.GetNewSortOrder=function(){return this.ActivitiesCount_M()+1};b.BaseGanttModel.prototype.UpdateSortOrders=function(){this.UpdateSortOrderFrom(null)};b.BaseGanttModel.prototype.IsAncestor=function(a,b){for(var c=a.ChildActivities_M(),d=0;d<c.length;d++){var g=c[d];if(g==b||this.IsAncestor(g,b))return!0}return!1};b.BaseGanttModel.prototype.CreateNewActivity=function(a,b){};b.BaseGanttModel.prototype.CreateNewDependency=
function(a,b,c,d){c||(c=RadiantQ.Gantt.DependencyType.FinishToStart);d||(d=RQTimeSpan.Zero_M());return this.CreateNewDependencyInternal(a,b,c,d,!1)};b.BaseGanttModel.prototype.PrepareParenting=function(a,b){var c=this.Dependencies_M();this.RemoveAnyParentChildDependencies(a,b);for(var d=c.GetSuccessors(a),g=0;g<d.length;g++)this.RemoveDependenciesLeadingTo(d[g],b);c=c.GetSuccessors(b);for(g=0;g<c.length;g++)this.RemoveDependenciesLeadingTo(c[g],a);c=b.ChildActivities_M();for(g=0;g<c.length;g++)this.PrepareParenting(a,
c[g]);for(;null!=(a=a.Parent);)this.RemoveAnyParentChildDependencies(a,b)};b.BaseGanttModel.prototype.CanAddNewDependency=function(a,c,d,g){d||(d=b.NewDependencyAddScenarioType.None);if(!1==this.ValidateDependencySetting_M())return!0;var e=this.Dependencies_M();return a==c||!0==e.DoesConstraintExist(a,c,!0)||!0==e.DoesConstraintExist(c,a,!1)||!1==this.CanAddNewDependencyRecursive(a,c,0)?!1:null!=this.NewDependencyValidator&&"function"==typeof this.NewDependencyValidator?this.NewDependencyValidator(a,
c,d,g):!0};b.BaseGanttModel.prototype.NewDependencyValidator=null;b.BaseGanttModel.prototype.ApplyPreferredStartTimeOnActivity=function(a,b){var c=a.ChildActivities_M();if(0<c.length&&this.AutoCalculateSummaryTaskTimes_M())for(var d=0;d<c.length;d++)this.ApplyPreferredStartTimeOnActivity(c[d],b);else c=a.PreferredStartTime_M(),c>b&&(b=c),a.StartTime_M(b)};b.BaseGanttModel.prototype.GetEnumerator=function(){return null!=this._actitivites?this._actitivites.GetEnumerator():null};b.BaseGanttModel.prototype.GetResourceActivityList=
function(a){return this.ResourceAssignmentTracker_M().GetResourceActivityList(a)};b.BaseGanttModel.prototype.Filter=function(a,b){var c=this.Activities_M();null==b&&(b=new RadiantQ.Gantt.Utils.FilterOptions);for(var d=0;d<c.length;d++)this.ApplyFilterOnActivity(c[d],a,b)};b.BaseGanttModel.prototype.ApplyFilterOnActivity=function(a,b,c){var d=a.ChildActivities_M(),g=!1;if(0<d.length){for(var e=0;e<d.length;e++)var f=!this.ApplyFilterOnActivity(d[e],b,c),g=g|f;a.IsFilteredOut_M(!g)}null==b||0<d.length&&
!0==c.AlwaysShowSummaryTask?a.IsFilteredOut_M(!1):!1!=g||0!=d.length&&!c.IncludeParent||(b=!b(a),a.IsFilteredOut_M(b));return a.IsFilteredOut_M()};b.ActivitiesCollection=function(a,c){this.isActivitiesCollection=!0;this._actColl=new RQArray;this.isRecalculatingTimes=!1;this.AdjustStartTimeForConstraints=new ObjectEvent("AdjustStartTimeForConstraints");this.CollectionChanged=new ObjectEvent("CollectionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.ChildCollectionChanged=new ObjectEvent("ChildCollectionChanged");
this.base=RadiantQ.Gantt.Utils.IUIUpdateable;this.base();Array.call(this);this._parent=a;this._model=c;this._progressPercent=0;this._startTime=Date.MaxValue;this._endTime=Date.MinValue;this._cumEffort=RQTimeSpan.Zero_M();this._prefStartTime=Date.MinValue;null!=this._parent&&(this._parent_PropertyChangedHandler=this._parent.PropertyChanged.subscribe(this._parent_PropertyChanged,this));this.OnAdjustStartTimeForConstraints=function(a){null!=this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.raise(this,
a)};this.OnChildCollectionChanged=function(a,b){null!=this.ChildCollectionChanged&&this.ChildCollectionChanged.raise(a,b)};this.OnPropertyChanged=function(a){this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:a})};this.PartialUpdate=function(a){this._disposed||(a&&(!0==a.isIActivity||a instanceof RadiantQ.Gantt.Model.IActivity)?(this.UpdateTimes(a),this.UpdateProgressPercent()):this.TotalUpdate())};this.TotalUpdate=function(){this._disposed||(this.RecalculateTimes(),
this.UpdateProgressPercent())};this._disposed=!1;b.ActivitiesCollection.prototype.Dispose=this.Dispose=function(){for(var a=0;a<this.length;a++)this[a].Dispose();this._disposed=!0;null!=this._parent&&this._parent_PropertyChangedHandler&&(this._parent_PropertyChangedHandler.Dispose(),this._parent_PropertyChangedHandler=null);this._actChildCollectionChangedHandler&&(this._actChildCollectionChangedHandler.Dispose(),this._actChildCollectionChangedHandler=null);this._actPropertyChangedHandler&&(this._actPropertyChangedHandler.Dispose(),
this._actPropertyChangedHandler=null);this._actAdjustStartTimeForConstraintsHandler&&(this._actAdjustStartTimeForConstraintsHandler.Dispose(),this._actAdjustStartTimeForConstraintsHandler=null);this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.Dispose();this.AdjustStartTimeForConstraints=null;this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null;this.PropertyChanged&&this.PropertyChanged.Dispose();this.PropertyChanged=null;this.ChildCollectionChanged&&
this.ChildCollectionChanged.Dispose();this.ChildCollectionChanged=null};return this};b.ActivitiesCollection.prototype=new RadiantQ.Gantt.Utils.IUIUpdateable;b.ActivitiesCollection.prototype=[];b.ActivitiesCollection.prototype.Model_M=function(){return this._model};b.ActivitiesCollection.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;!1==this._startTime.equals(a)&&(this._startTime=a,this.OnPropertyChanged("StartTime",a))};b.ActivitiesCollection.prototype.PreferredStartTime_M=
function(a){if(0==arguments.length)return this._prefStartTime;!1==this._prefStartTime.equals(a)&&(this._prefStartTime=a,this.OnPropertyChanged("PreferredStartTime",a))};b.ActivitiesCollection.prototype.EndTime_M=function(a){if(0==arguments.length)return this._endTime;!1==this._endTime.equals(a)&&(this._endTime=a,this.OnPropertyChanged("EndTime",a))};b.ActivitiesCollection.prototype.CumulativeEffort_M=function(){if(0==arguments.length)return this._cumEffort};b.ActivitiesCollection.prototype.ProgressPercent_M=
function(a){if(0==arguments.length)return this._progressPercent;this._progressPercent!=a&&(this._progressPercent=a,this.OnPropertyChanged("ProgressPercent",a))};b.ActivitiesCollection.prototype.Schedule_M=function(a){if(0==arguments.length)return this._schedule;this._schedule!=a&&(this._schedule=a,this.OnPropertyChanged("Schedule",a))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.ActivitiesCollection.prototype,"Model",{get:function(){return this.Model_M()},set:function(){},enumerable:!0,
configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"StartTime",{get:function(){return this.StartTime_M()},set:function(a){this.StartTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"PreferredStartTime",{get:function(){return this.PreferredStartTime_M()},set:function(a){this.PreferredStartTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"EndTime",{get:function(){return this.EndTime_M()},
set:function(a){this.EndTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"CumulativeEffort",{get:function(){return this.CumulativeEffort_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"ProgressPercent",{get:function(){return this.ProgressPercent_M()},set:function(a){this.ProgressPercent_M(a)},enumerable:!0,configurable:!0}));b.ActivitiesCollection.prototype._parent_PropertyChanged=function(a,
b){"DefaultWBSID"==b.PropertyName&&this.UpdateChildWBSIDs()};b.ActivitiesCollection.prototype.UpdateChildWBSIDs=function(){if(!1!=this.IsWBSCalcEnabled())for(var a=0;a<this.length;a++)this.UpdateChildWBSID(a)};b.ActivitiesCollection.prototype.UpdateChildWBSID=function(a){var c=this[a];a=new b.ProvideDefaultWBSIDEventArgs(c,c.WBSID_M(),a,this);this._model.RaiseProvideWBSID(a);c.DefaultWBSID_M(a.NewWBSID_M())};b.ActivitiesCollection.prototype.IsWBSCalcEnabled=function(){var a=this._model;return null==
a||!1==a.CanProvideWBSID()?!1:!0};b.ActivitiesCollection.prototype.add=function(a){0<=this.indexOf(a)||(this.push(a),this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(null,a,this.length-1)))};b.ActivitiesCollection.prototype.insert=function(a,b){if(a<=this.length||0==a)this.splice(a,0,b),this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(null,b,a))};b.ActivitiesCollection.prototype.remove=function(a){var b=this.indexOf(a);0>b||(this.splice(b,1),this.OnCollectionChanged(this,
new RadiantQ.NotifyCollectionChangedEventArgs(a,null,b)))};b.ActivitiesCollection.prototype.indexOf=function(a){return f.inArray(a,this)};b.ActivitiesCollection.prototype.contains=function(a){return-1===this.indexOf(a)?!0:!1};b.ActivitiesCollection.prototype.ClearItems=function(){if(b.AutoCalculateSummaryTaskTimes_M())for(var a=0;a<this.collections.length;a++){var c=this.collections.GetItemByIndex(a);this.UnsubscribeToChildEvents(c)}this.splice(0,this._length)};b.ActivitiesCollection.prototype.OnCollectionChanged=
function(a,b){this.CollectionChanged.raise(this,b);var c=2147483647;if(null!=b.OldItems)for(var c=b.OldStartingIndex,d=0;d<b.OldItems.length;d++){var g=b.OldItems[d];this.UnsubscribeToChildEvents(g)}if(null!=b.NewItems)for(c=c<b.NewStartingIndex?c:b.NewStartingIndex,d=0;d<b.NewItems.length;d++)g=b.NewItems[d],this.SubscribeToChildEvents(g);if(2147483647!=c&&this.IsWBSCalcEnabled())for(d=c;d<this.length;d++)this.UpdateChildWBSID(d);"remove"==b.type&&0==this.length&&this._model.AutoCalculateSummaryTaskTimes_M()&&
(this.StartTime_M(Date.MaxValue),this.EndTime_M(Date.MinValue),this.PreferredStartTime_M(Date.MaxValue))};RadiantQ.Gantt.Model.ActivitiesCollection.prototype.SubscribeToChildEvents=function(a){b.DataBoundGanttModel.IsBuildingModel||this.UpdateProgressPercentForChild(a,!0);(!0==a.isBaseActivity||a instanceof RadiantQ.Gantt.Model.BaseActivity)&&a.Parent_M(this._parent);this._actChildCollectionChangedHandlers||(this._actChildCollectionChangedHandlers={});this._actPropertyChangedHandlers||(this._actPropertyChangedHandlers=
{});this._actAdjustStartTimeForConstraintsHandlers||(this._actAdjustStartTimeForConstraintsHandlers={});var c=a.ChildCollectionChanged.subscribe(this.activity_ChildCollectionChanged,this);this._actChildCollectionChangedHandlers[a.id]=c;var d=this._model;!1!=d.AutoCalculateSummaryTaskTimes_M()&&(c=a.PropertyChanged.subscribe(this.activity_PropertyChanged,this),this._actPropertyChangedHandlers[a.id]=c,c=a.AdjustStartTimeForConstraints.subscribe(this.activity_AdjustStartTimeForConstraints,this),this._actAdjustStartTimeForConstraintsHandlers[a.id]=
c,!1==a.isBaseActivity&&!1==a instanceof RadiantQ.Gantt.Model.BaseActivity&&RadiantQ.Gantt.Model.BaseActivity.call(a,d),c=a.ComputeConstrainedStartTime(),a.StartTime_M()<=c&&a.ShiftForwardTo(c),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a),(a=a.CumulativeEffort_M())&&this.UpdateEffort(RQTimeSpan.Zero_M(),a))};b.ActivitiesCollection.prototype.UnsubscribeToChildEvents=RadiantQ.Gantt.Model.ActivitiesCollection.prototype.UnsubscribeToChildEvents=function(a){(a instanceof RadiantQ.Gantt.Model.BaseActivity||
a.isBaseActivity)&&a.Parent_M(null);if(this._actChildCollectionChangedHandlers&&this._actChildCollectionChangedHandlers[a.id]){var b=this._actChildCollectionChangedHandlers[a.id];b.Dispose();delete this._actChildCollectionChangedHandlers[a.id]}this._actPropertyChangedHandlers&&this._actPropertyChangedHandlers[a.id]&&(b=this._actPropertyChangedHandlers[a.id],b.Dispose(),delete this._actPropertyChangedHandlers[a.id]);this._actAdjustStartTimeForConstraintsHandlers&&this._actAdjustStartTimeForConstraintsHandlers[a.id]&&
(b=this._actAdjustStartTimeForConstraintsHandlers[a.id],b.Dispose(),delete this._actAdjustStartTimeForConstraintsHandlers[a.id]);!1!=this._model.AutoCalculateSummaryTaskTimes_M()&&(RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,null),this.UpdateEffort(a.CumulativeEffort_M(),RQTimeSpan.Zero_M()))};b.ActivitiesCollection.prototype.activity_PropertyChanged=function(a,b){this.OnChildPropertyChanged(a,b)};b.ActivitiesCollection.prototype.OnChildPropertyChanged=function(a,b){"StartTime"!=b.PropertyName&&
"EndTime"!=b.PropertyName&&"PreferredStartTime"!=b.PropertyName||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a);"CumulativeEffort"==b.PropertyName&&this.UpdateEffort(b.OldValue,a.CumulativeEffort_M());if("ProgressPercent"==b.PropertyName||null!=this._model.CustomProgressCalculation_M()&&("Effort"==b.PropertyName||"CumulativeEffort"==b.PropertyName))RadiantQ.Gantt.Utils.DelayUpdateUtil.IsUpdating()||this.UpdateProgressPercent()};b.ActivitiesCollection.prototype.DelayUpdate=function(a){RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
a)};b.ActivitiesCollection.prototype.UpdateEffort=function(a,b){var c=this.CumulativeEffort_M();b&&c&&(c=c.add(b));a&&c&&(c=c.subtract(a));c&&b||(c=b);this._cumEffort&&this._cumEffort.equals&&!1!=this._cumEffort.equals(c)||(this._cumEffort=c,this.OnPropertyChanged("CumulativeEffort",a,b))};b.ActivitiesCollection.prototype.UpdateTimes=function(a){if(!1!=this._model.AutoCalculateSummaryTaskTimes_M()){this.isRecalculatingTimes=!0;var b=!1,c=this.StartTime_M(),d=a.StartTime_M();d<=c?this.StartTime_M(d):
b=!0;c=a.PreferredStartTime_M();c<=this.PreferredStartTime_M()?this.PreferredStartTime_M(c):b=!0;!1==b&&(a=a.EndTime_M(),a>=this.EndTime_M()?this.EndTime_M(a):b=!0);this.isRecalculatingTimes=!1;b&&this.RecalculateTimes()}};b.ActivitiesCollection.prototype.UpdateProgressPercent=function(){if(null!=this._parent&&!1!=this._model.AutoCalculateSummaryTaskTimes_M())if(0==this.length)this.ProgressPercent_M(0);else{var a=this._model.CustomProgressCalculation_M();if(null!=a)this.ProgressPercent_M(a(this._parent));
else{for(var b=a=0;b<this.length;b++)a+=this[b].ProgressPercent_M();this.ProgressPercent_M(a/this.length)}}};b.ActivitiesCollection.prototype.UpdateProgressPercentForChild=function(a,b){var c=this._model.CustomProgressCalculation_M();null!=c&&null!=this._parent?this.ProgressPercent_M(c(this._parent)):b?(c=this.ProgressPercent_M()*(this.length-1),c+=a.ProgressPercent_M(),this.ProgressPercent_M(c/this.length)):0==this.length?this.ProgressPercent_M(0):(c=this.ProgressPercent_M()*(this.length+1),c-=a.ProgressPercent_M(),
this.ProgressPercent_M(c/this.length))};b.ActivitiesCollection.prototype.activity_AdjustStartTimeForConstraints=function(a,b){this.OnAdjustStartTimeForConstraints(b)};b.ActivitiesCollection.prototype.activity_ChildCollectionChanged=function(a,b){this.OnChildCollectionChanged(a,b)};b.ActivitiesCollection.prototype.RecalculateTimes=function(){if(!1!=this._model.autoCalculateSummaryTaskTimes){this.isRecalculatingTimes=!0;if(0<this.length){for(var a=Date.MaxValue,b=Date.MinValue,c=Date.MaxValue,d=0;d<
this.length;d++){var g=this[d];g._startTime<a&&(a=g._startTime);var e=g.PreferredStartTime_M();e<c&&(c=e);g=g.EndTime_M();g>b&&(b=g)}d=new RadiantQ.Gantt.Utils.DelayUpdates;this.StartTime_M(a);this.EndTime_M(b);this.PreferredStartTime_M(c);d.Dispose()}this.isRecalculatingTimes=!1}};b.BaseActivity=function(a){this.processingPredString=!1;this.isBaseActivity=!0;RadiantQ.Gantt.Model.IActivity.call(this);this.IsDisposed=!1;this.Model=a;this._assignments=new b.ResourceAssignmentCollection(this);this.propertiesDict=
null;this._updatedProps={};0==arguments.length&&(RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled=!0);this.cachedEndTime=null;RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled=!0;this.CreateChildActivitiesCollection||(b.BaseActivity.prototype.CreateChildActivitiesCollection=function(){return new b.ActivitiesCollection(this,this.Model)});this.PartialUpdate=function(a){"AssignmentsCollectionChanged"==a?(this.OnPropertyChanged("Assignments"),this.OnPropertyChanged("EndTime")):this.TotalUpdate()};
this.TotalUpdate=function(){var a=this.ChildActivities_M();if(0<a.length&&this.Model.AutoCalculateSummaryTaskTimes_M()){var b=this.StartTime_M(),c=a.StartTime_M(),d=a.EndTime_M();this.StartTime_M(c);var g=this.EndTime_M();!1==a.PreferredStartTime_M().equals(Date.MinValue)&&this.PreferredStartTime_M(a.PreferredStartTime_M());!0==a.isRecalculatingTimes&&!1==b.equals(c)&&!1==g.equals(Date.MinValue)&&g.equals(d)?this.UpdateEndTime(g):this.EndTime_M(d)}};this._defWbsID=this._wbsID="";this._isAutoWBSID=
!0;a&&(this.Model=a,this.id=b.BaseGanttModel.IdCounter++,this.propertiesDict=new RQArray,this._childActivities=this.CreateChildActivitiesCollection(),this._childActsPropertyChangedHandler=this._childActivities.PropertyChanged.subscribe(this.childActivities_PropertyChanged,this),this._childActsCollectionChangedHandler=this._childActivities.CollectionChanged.subscribe(this.childActivities_CollectionChanged,this),this._childActsChildCollectionChangedHandler=this._childActivities.ChildCollectionChanged.subscribe(this.childActivities_ChildCollectionChanged,
this),this._childActsAdjustStartTimeForConstraintsHandler=this._childActivities.AdjustStartTimeForConstraints.subscribe(this._childActivities_AdjustStartTimeForConstraints,this),this._assignsCollectionChangedHandler=this._assignments.CollectionChanged.subscribe(this._assignments_CollectionChanged,this),this._assignsPropertyChangedHandler=this._assignments.PropertyChanged.subscribe(this.Assignments_PropertyChanged,this),this._startTime=a.AdjustStartTimeWithEffort(Date.today(),new RQTimeSpan(1,0,0,
0,0)),this._prefStartTime=this.GetDefaultStartTime());return this};b.BaseActivity.prototype=new RadiantQ.Gantt.Model.IActivity;b.BaseActivity.prototype.OnTimesChanged=function(){this.cachedEndTime=null;this.UpdateIsMileStone()};b.BaseActivity.prototype.UpdateIsMileStone=function(){this.StartTime_M().equals(this.EndTime_M())?this.IsMilestone_M(!0):this.IsMilestone_M(!1)};b.BaseActivity.prototype.Dispose=function(){!0!=this.IsDisposed&&(RadiantQ.Gantt.Model.IActivity.prototype.Dispose.call(this),this._childActsPropertyChangedHandler&&
(this._childActsPropertyChangedHandler.Dispose(),this._childActsPropertyChangedHandler=null),this._childActsCollectionChangedHandler&&(this._childActsCollectionChangedHandler.Dispose(),this._childActsCollectionChangedHandler=null),this._childActsChildCollectionChangedHandler&&(this._childActsChildCollectionChangedHandler.Dispose(),this._childActsChildCollectionChangedHandler=null),this._childActsAdjustStartTimeForConstraintsHandler&&(this._childActsAdjustStartTimeForConstraintsHandler.Dispose(),this._childActsAdjustStartTimeForConstraintsHandler=
null),this._assignsCollectionChangedHandler&&(this._assignsCollectionChangedHandler.Dispose(),this._assignsCollectionChangedHandler=null),this._assignsPropertyChangedHandler&&(this._assignsPropertyChangedHandler.Dispose(),this._assignsPropertyChangedHandler=null),this._depPropertyChangedHandler&&(this._depPropertyChangedHandler.Dispose(),this._depPropertyChangedHandler=null),this._childActivities.Dispose(),this._assignments.Dispose(),this.IsDisposed=!0)};b.BaseActivity.prototype.IsParentExpanded_M=
function(){var a=this.Parent_M();return null==a?!0:a.IsExpanded_M()};b.BaseActivity.prototype.IsParentVisible_M=function(){var a=this.Parent_M();return null==a?!0:a.IsVisible_M()};b.BaseActivity.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;this._startTime.equals(a)||this.ValidateAndSetStartTime(a)};b.BaseActivity.prototype.ValidateAndSetStartTime=function(a){a=new b.AdjustStartTimeEventArgs(this,a);this.OnAdjustStartTimeForConstraints(a);a=a.StartTime;a=this.Model.AdjustStartTime(this,
a);if(!this._startTime.equals(a)){var c=this._startTime instanceof Date?this._startTime.clone():this._startTime;this._startTime=a.clone();var d=new RadiantQ.Gantt.Utils.DelayUpdates;this.OnPropertyChanged("EndTime",this.cachedEndTime);this.OnPropertyChanged("StartTime",c,a);d.Dispose()}};b.BaseActivity.prototype.EndTime_M=function(a){if(0==arguments.length)return RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled?(null==this.cachedEndTime&&(this.cachedEndTime=this.Model.ComputeEndTime(this)),
this.cachedEndTime):this.Model.ComputeEndTime(this);var b=this.EndTime_M();b&&a&&b.equals(a)||(null==a?this.cachedEndTime=a:0<=a.compareTo(this.StartTime_M())&&this.UpdateEndTime(a))};b.BaseActivity.prototype.Effort_M=function(a){if(0==arguments.length)return this._effort?this._effort:RQTimeSpan.Zero_M();"string"==typeof a&&(a=RQTimeSpan.parse(a));if(!1==this._effort.equals(a)){var b=this._effort,c=this.CumulativeEffort_M(),d=this.Duration_M(),g=this.EndTime_M(),e=this.Model.AdjustEffort(this,a);
this._effort=e;this._isUpdating=!0;this.OnPropertyChanged("Effort",b,e);this.OnPropertyChanged("Duration",d);this._isUpdating=!1;this.OnPropertyChanged("EndTime",g);this.OnPropertyChanged("CumulativeEffort",c,e)}};b.BaseActivity.prototype.Duration_M=function(a){if(0==arguments.length)return this.Model.ComputeDuration(this);this.Duration_M()!=a&&this.Effort_M(this.Model.ConvertDurationToEffort(a,this))};b.BaseActivity.prototype.Properties_M=function(){return this.propertiesDict};b.BaseActivity.prototype.Assignments_M=
function(a){if(0==arguments.length)return this._assignments;this._assignments=a};b.BaseActivity.prototype.ChildActivities_M=function(){return this._childActivities};b.BaseActivity.prototype.WBSID_M=function(a){if(0==arguments.length)return this.IsAutoWBSID_M()?this._defWbsID:this._wbsID;this.IsAutoWBSID_M(null==a||void 0==a||""==a);this._wbsID!=a&&(this._wbsID=a,this.OnPropertyChanged("WBSID"))};b.BaseActivity.prototype.DefaultWBSID_M=function(a){if(0==arguments.length)return this._defWbsID;this._defWbsID!=
a&&(this._defWbsID=a,this.OnPropertyChanged("DefaultWBSID"),this.IsAutoWBSID_M()&&this.OnPropertyChanged("WBSID"))};b.BaseActivity.prototype.IsAutoWBSID_M=function(a){if(0==arguments.length)return this._isAutoWBSID;this._isAutoWBSID!=a&&(this._isAutoWBSID=a,this.OnPropertyChanged("IsAutoWBSID"))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.BaseActivity.prototype,"IsParentExpanded",{get:function(){return this.IsParentExpanded_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,
"IsParentVisible",{get:function(){return this.IsParentVisible_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"StartTime",{get:function(){return this.StartTime_M()},set:function(a){this.StartTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"EndTime",{get:function(){return this.EndTime_M()},set:function(a){this.EndTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"Effort",
{get:function(){return this.Effort_M()},set:function(a){this.Effort_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"Duration",{get:function(){return this.Duration_M()},set:function(a){this.Duration_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"Properties",{get:function(){return this.Properties_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"Assignments",{get:function(){return this.Assignments_M()},
set:function(a){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"ChildActivities",{get:function(){return this.ChildActivities_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"WBSID",{get:function(){return this.WBSID_M()},set:function(a){this.WBSID_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"DefaultWBSID",{get:function(){return this.DefaultWBSID_M()},set:function(a){this.DefaultWBSID_M(a)},
enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"IsAutoWBSID",{get:function(){return this.IsAutoWBSID_M()},set:function(a){this.IsAutoWBSID_M(a)},enumerable:!0,configurable:!0}));b.BaseActivity.prototype.SetPreCalculatedEndTime=function(a,b){this.cachedEndTime=a;this._childActivities.EndTime_M(a);this.Effort_M(b)};b.BaseActivity.prototype.UpdateEndTime=function(a){this.cachedEndTime=null;var b=this.Model.ComputeEffort(this,a);!1==this.Effort_M().equals(b)?this.Effort_M(b):
this.OnPropertyChanged("EndTime",a)};b.BaseActivity.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this,null)};b.BaseActivity.prototype.AdjustFinishForLag=function(a,b,c){if(null==c)return a.addTimeSpan(b);a=b.isGreaterThanOrEqualTo(RQTimeSpan.Zero_M())?(new RadiantQ.Gantt.TimePeriodCollection(c.ConvertToNextWorkingTimeIntervals(a,b))).Finish:(new RadiantQ.Gantt.TimePeriodCollection(c.ConvertToPreviousWorkingTimeIntervals(a,new RQTimeSpan(-b.totalMilliseconds_M())))).Finish;
return c.ConvertToNextWorkingTime(a)};b.BaseActivity.prototype.GetScheduleToPlotWith=function(a){var b=this.Assignments_M(),c=this.Schedule_M();a=null!=c?c:a;if(null==b||0==b.length||1<b.length||1!=b.length)return a;b=b[0].Resource_M().Schedule_M();return null!=b?b:a};RadiantQ.Gantt.Model.BaseActivity.prototype.WorkTimeSchedule_M=function(a){if(0==arguments.length)return this._schedule;this._schedule!=a&&(this._schedule=a,this.OnPropertyChanged("WorkTimeSchedule"))};RadiantQ.Gantt.Model.BaseActivity.prototype.Schedule_M=
function(a){if(0==arguments.length)return this._schedule;this._schedule!=a&&a instanceof RadiantQ.Gantt.WorkTimeSchedule&&(this._schedule=a,this.OnPropertyChanged("Schedule"),this.ValidateAndSetStartTime(this._startTime),this.OnPropertyChanged("EndTime"))};b.BaseActivity.prototype._childActivities_AdjustStartTimeForConstraints=function(a,b){this.OnAdjustStartTimeForConstraints(b)};b.BaseActivity.prototype.childActivities_ChildCollectionChanged=function(a,b){this.OnChildCollectionChanged(a,b)};b.BaseActivity.prototype.childActivities_CollectionChanged=
function(a,b){this.OnChildCollectionChanged(this,b);var c=this.ChildActivities_M();"remove"==b.type&&0==c.length?this.Model.ApplyPreferredStartTimeOnActivity(this,this.PreferredStartTime_M()):"insert"==b.type&&1==c.length&&this.OnPropertyChanged("CumulativeEffort",this.Effort_M())};b.BaseActivity.prototype.childActivities_PropertyChanged=function(a,b){"StartTime"==b.PropertyName||"EndTime"==b.PropertyName||"Effort"==b.PropertyName?this.Model.AutoCalculateSummaryTaskTimes_M()&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
null):"ProgressPercent"==b.PropertyName?this.ProgressPercent_M(this.ChildActivities_M().ProgressPercent_M()):"CumulativeEffort"==b.PropertyName&&this.CumulativeEffort_M(this.ChildActivities_M().CumulativeEffort_M())};b.BaseActivity.prototype.OnChildCollectionChanged=function(a,b){null!=this.ChildCollectionChanged&&this.ChildCollectionChanged.raise(a,b)};b.BaseActivity.prototype.OnPropertyChanged=function(a,b){if("EndTime"==a||"StartTime"==a||"Effort"==a||"Duration"==a||"Assignments"==a||"IsMilestone"==
a)this.OnTimesChanged(),this.OnPropertyChanged("Times",b);"Assignments"==a&&this.OnPropertyChanged("EndTime");null!=this.PropertyChanged&&this.PropertyChanged.raise(_baseActivity,a,b)};b.BaseActivity.prototype.Assignments_PropertyChanged=function(a,b){"ResourceInfo"==b.PropertyName&&this.OnPropertyChanged("Assignments")};b.BaseActivity.prototype._assignments_CollectionChanged=function(a,b){null==b.NewItems&&null==b.OldItems&&b.Action!=RadiantQ.NotifyCollectionChangedAction.Reset||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
"AssignmentsCollectionChanged")};b.BaseActivity.prototype.dependency_PropertyChanged=function(a,b){this.UpdatePredecessorString()};b.BaseActivity.prototype.processingPredString=!1;b.BaseActivity.prototype.UpdatePredecessorString=function(){if(this.Model&&!0!=this.processingPredString){var a=this.Model.Dependencies_M().GetPredecessors(this),a=b.DataBoundGanttModel.ConstructPredecessorString(a,this.Model.LagStringUnitsInHours_M());this.PredecessorIndexString_M(a)}};b.BaseActivity.prototype.OnPropertyChanged=
function(a,b,c){if(!1==this.Model._onInit)switch(a){case "Times":case "StartTime":case "EndTime":case "PreferredStartTime":case "Effort":case "Parent":case "PredecessorIndexString":case "ProgressPercent":case "ID":case "ActivityName":case "SortOrder":case "Description":case "Assignments":var d=this._updatedProps[a];d||(d=this._updatedProps[a]={});d.OldValue=b;this._propertyChangeTimer&&clearTimeout(this._propertyChangeTimer);this._propertyChangeTimer=setTimeout(function(){var b=this.Parent_M(),b=
b?b:this.Model._activities;this.Model.ActivityUpdated.raise(b._childActivities,this,this._updatedProps);this.triggerEvent&&this.triggerEvent(a);this._updatedProps={}}.bind(this),0)}if("EndTime"==a||"StartTime"==a||"Effort"==a||"Duration"==a||"Assignments"==a)this.OnTimesChanged(),this.OnPropertyChanged("Times",b,c);"Assignments"==a&&this.OnPropertyChanged("EndTime");this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:a,OldValue:b,value:c})};b.BaseActivity.prototype.ComputeConstrainedStartTime=
function(){var a=new b.AdjustStartTimeEventArgs(this,this.StartTime_M());this.OnAdjustStartTimeForConstraints(a);return a.StartTime};b.BaseActivity.prototype.OnAdjustStartTimeForConstraints=function(a){if(!1!=this.Model.EnforceDependencyConstraints_M()&&!1!=b.BaseGanttModel.ShouldEnforceDependency(this,this.Model)){for(var c=a.StartTime,d=0<this.Model.Dependencies_M().length?this.Model.Dependencies_M().GetPredecessors(this):[],g=0;g<d.length;g++){var e=d[g];e.FromActivity_M()!=this&&(e=e.ComputeLatestToActivityStartTime(),
e>c&&(c=e))}a.StartTime=c;null!=this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.raise(this,a)}};b.BaseActivity.prototype.GetDefaultStartTime=function(){return Date.today()};b.BaseActivity.prototype.CreateNewChildActivity=function(a){};b.BaseActivity.prototype.IsCritical=function(a,b,c){if(null!=this.Model){var d=this.Model.AllActivities_M().asArray,g=this.Model.WorkTimeSchedule_M(),f=null==g?this.EndTime_M().addTimeSpan(b):(new RadiantQ.Gantt.TimePeriodCollection(g.ConvertToNextWorkingTimeIntervals(this.EndTime_M(),
b))).Finish;if(f>=a||null!=c&&c.ContainsKey(this)&&f>=c[this])return!0;if(0==this.ChildActivities_M().length)for(var q=this;null!=q;q=q.Parent_M())for(var r=0;r<d.length;r++){var t=d[r];if(q!=t)for(var s=this.Model.Dependencies_M().GetPredecessors(t),w=0;w<s.length;w++){var u=s[w];if(u.FromActivity_M()==q&&(u.Type_M()==e.FinishToStart||u.Type_M()==e.StartToStart)&&this.AdjustFinishForLag(f,u.Lag_M(),g)>=t.StartTime_M()&&t.IsCritical(a,b,c))return!0}}else for(d=this.ChildActivities_M(),r=0;r<d.length;r++)if(d[r].IsCritical(a,
b,c))return!0}return!1};b.BaseActivity.prototype.GetWorkingHoursTimeSpan=function(){var a=this.Effort_M(),b=this.Schedule_M(),b=null!=b?b:this.Model.WorkTimeSchedule_M();0<this.Assignments_M().length&&null!=b&&(a=b.GetEffort(this.StartTime_M(),this.EndTime_M()));return a};b.BaseActivity.prototype.OnAddedPredecessorDependency=function(a){a.ToActivity_M()==this&&(this._depPropertyChangedHandler=a.PropertyChanged.subscribe(this.dependency_PropertyChanged,this),this.UpdatePredecessorString())};b.BaseActivity.prototype.OnRemovedPredecessorDependency=
function(a){a.PropertyChanged.unsubscribe(this.dependency_PropertyChanged,this);this.UpdatePredecessorString()};b.BaseActivity.prototype.ShiftForwardTo=function(a){this.StartTime_M();var b=this.ChildActivities_M();if(0<b.length&&this.Model.AutoCalculateSummaryTaskTimes_M()){for(var c=new RadiantQ.Gantt.Utils.DelayUpdates,d=0;d<b.length;d++)b[d].ShiftForwardTo(a);c.Dispose()}else this.Model&&this.StartTime_M()<a&&(a=this.Model.ConvertToValidStartTime(a,RQTimeSpan.Zero_M(),this.Effort_M()),this.StartTime_M(a))};
b.BaseActivity.prototype.toString=function(){return this.ID_M()+"; "+this.ActivityName_M()+"; "+this.StartTime_M().Date()+"/"+(this.Effort_M()?this.Effort_M().hours_M():void 0)+"hrs; ChildCount: "+this.ChildActivities_M().length+" "};b.BaseGanttResource=function(){this.BaseGanttResource=!0;this.base=b.IGanttResource;this.base();return this};b.BaseGanttResource.prototype=new b.IGanttResource;b.BaseGanttResource.prototype.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,
a)};b.BaseGanttResource.prototype.toString=function(){return this.ResourceName_M()};b.BaseGanttResource.prototype.Dispose=function(){};b.ResourceAssignment=function(a,b){this.ResourceAssignment=!0;this._allocUnits=0;b||(b=100);this._allocUnits=b;a&&(this._resource=a,this._allocUnits=1E5>b?this._allocUnits:1E5);return this};b.ResourceAssignment.prototype.Resource_M=function(){return this._resource};b.ResourceAssignment.prototype.AllocationUnits_M=function(){return this._allocUnits};b.ResourceAssignment.prototype.toString=
function(a,b){var c=a?this._resource.ResourceID_M():this._resource.ResourceName_M(),d=this._allocUnits;if(100==d)return c;d=100*(d/100);return c+"["+(Math.round?Math.round(d).toString():d.toString())+"%]"};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.ResourceAssignment.prototype,"Resource",{get:function(){return this.Resource_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.ResourceAssignment.prototype,"AllocationUnits",{get:function(){return this.AllocationUnits_M()},
set:function(){},enumerable:!0,configurable:!0}));b.ResourceAssignmentCollection=function(a){this.base=Array;this.base();this.parentActivity=a;this.CollectionChanged=new ObjectEvent("CollectionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.push=b.ResourceAssignmentCollection.prototype.add;this.schedules=[];return this};b.ResourceAssignmentCollection.prototype=[];b.ResourceAssignmentCollection.prototype.ParentActivity_M=function(){return this.parentActivity};RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(b.ResourceAssignmentCollection.prototype,"ParentActivity",{get:function(){return this.ParentActivity_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.ResourceAssignmentCollection.prototype,"AsText",{get:function(){return this.AsText_M()},set:function(a){this.AsText_M(a)},enumerable:!0,configurable:!0}));b.ResourceAssignmentCollection.prototype.AsText_M=function(a){if(0==arguments.length){if(0==this.length)return"";for(var c=new b.ConvertResourceListFromResourceStringEventArgs("",
!0),d=0;d<this.length;d++){var g=this[d];c._assignments.add(g)}this.parentActivity.OnConvertResourceListFromResourceString(c);return c.ResourceText}this.clear();if(a&&""!=a)for(c=new b.ConvertResourceListFromResourceStringEventArgs(a,!1),this.parentActivity.OnConvertResourceListFromResourceString(c),d=0;d<c._assignments.length;d++)g=c._assignments[d],this.add(g)};b.ResourceAssignmentCollection.prototype.add=function(a){if(a){var b=a.Resource_M().Schedule_M();b&&this.schedules.push(b);Array.prototype.push.call(this,
a);this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(null,a))}};b.ResourceAssignmentCollection.prototype.remove=function(a){var b=this.indexOf(a);if(!(0>b)){var c=a.Resource_M().Schedule_M();if(c){c=this.schedules.indexOf(c);if(0>c)return;this.schedules.splice(c,1)}this.splice(b,1);this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(a,null))}};b.ResourceAssignmentCollection.prototype.clear=function(){0!=this.length&&(this.splice(0,this.length),this.OnCollectionChanged(this,
new RadiantQ.NotifyCollectionChangedEventArgs(null,null)))};b.ResourceAssignmentCollection.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1};b.ResourceAssignmentCollection.prototype.ContainsResource=function(a){return null!=this.GetAssignmentForResource(a)?!0:!1};b.ResourceAssignmentCollection.prototype.GetAssignmentForResource=function(a){for(var b=0;b<this.length;b++){var c=this[b],d=c.Resource_M();if(d==a||d._boundObj==a)return c}return null};b.ResourceAssignmentCollection.prototype.OnCollectionChanged=
function(a,b){if(null!=b.NewItems)for(var c=0;c<b.NewItems.length;c++){var d=b.NewItems[c];this._resPropertyChangedHandler=d.Resource_M().PropertyChanged.subscribe(this.Resource_PropertyChanged,this)}if(null!=b.OldItems)for(c=0;c<b.OldItems.length;c++)d=b.OldItems[c],d.Resource_M().PropertyChanged.unsubscribe(this.Resource_PropertyChanged,this);this.CollectionChanged.raise(a,b)};b.ResourceAssignmentCollection.prototype.Resource_PropertyChanged=function(a,b){this.OnPropertyChanged("ResourceInfo")};
b.ResourceAssignmentCollection.prototype.Dispose=function(){this._resPropertyChangedHandler&&(this._resPropertyChangedHandler.Dispose(),this._resPropertyChangedHandler=null);this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null;this.PropertyChanged&&this.PropertyChanged.Dispose();this.parentActivity=this.PropertyChanged=null;this.splice(0,this.length)};b.GanttResourcesCollection=function(){this.CollectionChanged=new ObjectEvent("CollectionChanged");Array.call(this);
this._resByID=new RadiantQ.Gantt.Dictionary;this._resByName=new RadiantQ.Gantt.Dictionary;this.getResourceByID=function(a){return this._resByID[a]};return this};b.GanttResourcesCollection.prototype=[];b.GanttResourcesCollection.prototype.ClearItems=function(){0!=this.length&&(this.splice(0,this.length),this._resByID=new RadiantQ.Gantt.Dictionary,this._resByName=new RadiantQ.Gantt.Dictionary)};b.GanttResourcesCollection.prototype.OnCollectionChanged=function(a){if(null!=a.OldItems)for(var b=0;b<a.OldItems.length;b++){var c=
a.OldItems[b];this._resByID.Remove(c.ResourceID_M());var d=c.ResourceName_M();!1==(""==d||null==d)&&this._resByName.Remove(c.ResourceName_M());c.Dispose()}if(null!=a.NewItems)for(b=0;b<a.NewItems.length;b++)c=a.NewItems[b],d=c.ResourceName_M(),this._resByID.Add(c.ResourceID_M(),c),!1==(""==d||null==d)&&this._resByName.Add(c.ResourceName_M(),c);this.CollectionChanged.raise(this,a)};b.GanttResourcesCollection.prototype.SetItem=function(a,b){if(a>this.length)alert("Can't add the item to the "+a+"index which is greater than the length");
else if(-1!=a){var c=this[a],d=c.ResourceName_M();this._resByID.Remove(c.ResourceID_M());!1==(""==d||null==d)&&this._resByName.Remove(d);c.Dispose();this.splice(a,1,b);c=b.ResourceName_M();this._resByID[b.ResourceID_M()]=b;!1==(""==c||null==c)&&(this._resByName[c]=b)}};b.GanttResourcesCollection.prototype.Add=function(a){var b=a.ResourceID_M();if(this._resByID[b]){var c=this.indexOf(a);this.splice(c,0,a)}else this.push(a);this._resByID[b]=a;this.OnCollectionChanged(new RadiantQ.NotifyCollectionChangedEventArgs(null,
a))};b.GanttResourcesCollection.prototype.Remove=function(a){var b=this.indexOf(a);-1!=b&&(this.splice(b,1),delete this._resByID[a.ResourceID_M()],this.OnCollectionChanged(new RadiantQ.NotifyCollectionChangedEventArgs(a,null)))};b.GanttResourcesCollection.prototype.GetResourceByName=function(a){return this._resByName.Contains(a)?this._resByName[a]:null};b.GanttResourcesCollection.prototype.Dispose=function(){this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null};b.AdjustStartTimeEventArgs=
function(a,b){this.StartTime=this.Activity=null;a&&b&&(this.Activity=a,this.StartTime=b);return this};b.ActivityEventHandler=function(a,b){};b.ActivityEventArgs=function(a){a&&(this._activity=a);return this};b.ActivityEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.ActivityEventArgs.prototype,"Activity",{get:function(){return this.Activity_M()},set:function(){},enumerable:!0,configurable:!0});b.NewActivityAddedEventArgs=function(a,
b,c){a&&(this._activity=a,this._parent=b,this._childIndex=c);return this};b.NewActivityAddedEventArgs.prototype.NewActivity_M=function(){return this._activity};b.NewActivityAddedEventArgs.prototype.Parent_M=function(){return this._parent};b.NewActivityAddedEventArgs.prototype.ChildIndex_M=function(){return this._childIndex};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.NewActivityAddedEventArgs.prototype,"NewActivity",{get:function(){return this.NewActivity_M()},set:function(){},enumerable:!0,
configurable:!0}),Object.defineProperty(b.NewActivityAddedEventArgs.prototype,"Parent",{get:function(){return this.Parent_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.NewActivityAddedEventArgs.prototype,"ChildIndex",{get:function(){return this.ChildIndex_M()},set:function(){},enumerable:!0,configurable:!0}));b.BeforeStartTimeChangingEventArgs=function(a,b){this.NewStartTime=null;a&&b&&(this.Activity=a,this.NewStartTime=b);return this};b.BeforeEffortChangingEventArgs=
function(a,b){this.NewEffort=null;a&&b&&(this.Activity=a,this.NewEffort=b);return this};b.ResourceAssignmentTracker=function(a){this.activitiesByResources=new RadiantQ.Gantt.Dictionary;this.OnActivityAdded=function(a){this._activityPropertyChangedHandler=a.PropertyChanged.subscribe(this.activity_PropertyChanged,this);for(var b=a.Assignments_M(),c=0;c<b.length;c++){var d=this.GetResourceActivityList(b[c].Resource_M()._boundObj);f.observable(d).insert(a)}};if(a){this.Model=a;this._modelNewActivityAddedHandler=
a.NewActivityAdded.subscribe(this.model_NewActivityAdded,this);this._modelActivityRemovedHandler=a.ActivityRemoved.subscribe(this.model_ActivityRemoved,this);a=a.AllActivities_M();for(var b=0;b<a.length;b++){var c=a.GetItemByIndex(b);this.OnActivityAdded(c)}}};b.ResourceAssignmentTracker.prototype.model_ActivityRemoved=function(a,b){this.ProcessActivityRemovedRecursively(b)};b.ResourceAssignmentTracker.prototype.model_NewActivityAdded=function(a,b){this.OnActivityAdded(b.NewActivity_M())};b.ResourceAssignmentTracker.prototype.GetResourceActivityList=
function(a){var b=this.activitiesByResources.GetItemByKey(a);b||(b=new RQArray,this.activitiesByResources.Add(a,b));return b};b.ResourceAssignmentTracker.prototype.activity_PropertyChanged=function(a,b){"Assignments"==b.PropertyName&&(this.OnActivityRemoved(a),this.OnActivityAdded(a))};b.ResourceAssignmentTracker.prototype.ProcessActivityRemovedRecursively=function(a){if(a){this.OnActivityRemoved(a);a=a.ChildActivities_M();for(var b=0;b<a.length;b++)this.ProcessActivityRemovedRecursively(a[b])}};
b.ResourceAssignmentTracker.prototype.Dispose=function(){this._activityPropertyChangedHandler&&this._activityPropertyChangedHandler.Dispose();this._activityPropertyChangedHandler=null;this._modelNewActivityAddedHandler&&this._modelNewActivityAddedHandler.Dispose();this._modelNewActivityAddedHandler=null;this._modelActivityRemovedHandler&&this._modelActivityRemovedHandler.Dispose();this._modelActivityRemovedHandler=null};b.ResourceAssignmentTracker.prototype.OnActivityRemoved=function(a){for(var b=
this.Model.GanttResources_M(),c=0;c<b.length;c++){var d=this.GetResourceActivityList(b[c]._boundObj),g=d.indexOf(a);-1!=g&&(f.observable(d).remove(g,1),a.PropertyChanged.unsubscribe(this.activity_PropertyChanged,this))}};b.ResourceToActivitiesListConverter=function(){this.Model=null;this.Convert=function(a,b,c,d){if(null==this.Model)throw Error("ResourceToActivitiesListConverter's Convert is called before setting it's Model property.");if(null==a)throw Error("value passed to ResourceToActivitiesListConverter's Convert method must be of type IGanttResource.");
return this.Model.GetResourceActivityList(a)}};b.PropertyChangedWithOldValueEventArgs=function(a,b){b&&(this._oldValue=b);return this};b.PropertyChangedWithOldValueEventArgs.prototype.OldValue=function(){return this._oldValue};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.PropertyChangedWithOldValueEventArgs.prototype,"OldValue",{get:function(){return this._oldValue},set:function(){},enumerable:!0,configurable:!0});b.NewDependencyAddScenarioType={None:"None",UserDragOver:"UserDragOver",UserDragDrop:"UserDragDrop",
UserGridEdit:"UserGridEdit"}})(jQuery);
(function(f){function b(a,b){this.ResourceText=a;this._assignments=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);this.ConvertBack=!1;b&&(this.ConvertBack=b);return this}function e(a){this._dict=new RadiantQ.Gantt.Dictionary;this._cachedItem={};this.last=this.first=null;if(a){this._deps=a;for(var b=0;b<a.length;b++)this.ProcessDependency(a[b])}this.GetEnumerator=function(){return new c(this)};return this}function a(a){this.Next=this.Previous=null;this.Activity=a;this._index=-1;return this}
function c(a){this._list=a;this.current=null;return this}var d=RadiantQ.Gantt,g=RadiantQ.Gantt.Model,h=RadiantQ.Gantt.Utils.ValueBinder;g.DataBoundGanttModel=function(a,b,c,e,f,q,r,t,s,w,u,v,z,y,A,x,C,L,H,B,F,N,G,E,O,M,S,J,P,R,Z,Q,U,ca,da,V){this.DependencyFailedNotifierCallBack=V;this.CreateActivitiesCollection=function(){return new g.DataBoundActivitiesCollection(null,this)};g.BaseGanttModel.prototype.CreateActivitiesCollection=this.CreateActivitiesCollection;this.base=g.BaseGanttModel;g.BaseGanttModel.call(this,
P,R,Z);if(!a)return null;this._boundColl=a;this.canInsertPropertyChangeTriggeringPropertiesInData=!1;this.ScheduleFrom=this.ProjectEndDate=this.ProjectStartDate=this._resAssgnStringConverter=null;this._onInit=!0;this.ProcessPredecessorString=g.DataBoundGanttModel.ProcessPredecessorString;this.ActivityUpdated=new ObjectEvent("ActivityUpdated");this.canInsertPropertyChangeTriggeringPropertiesInData=Q?!0:!1;this.ScheduleFrom=e;this.ProjectStartDate=b;this.ProjectEndDate=c;this.ValidateDependencySetting_M(f);
this.EnforceDependencyConstraints_M(q);this.AutoCalculateSummaryTaskTimes_M(r);this._customProgressCalculation=J;this.AutoExpandNodes=U;this._resAssgnStringConverter=ca;RadiantQ.Gantt.WorkTimeSchedule._cachedStdWorkingTimes=new d.WorkTimeSchedule.CachedContWorkingTimes;RadiantQ.Gantt.WorkTimeSchedule._continuousSchedule=null;RadiantQ.Gantt.WorkTimeSchedule.cachedContWorkingTimes=new d.WorkTimeSchedule.CachedContWorkingTimes;this._resList=N;this.AdjustDurationOnAssignment_M(t);this.LagStringUnitsInHours_M(s);
this.parentActivities=[];a=null;b=0;this.IDBinding=w;this.NameBinding=v;this.SortOrderBinding=u;this.IndentLevelBinding=z;this.StartTimeBinding=y;this.PrefStartTimeBinding=A;this.EffortBinding=x;this.EndTimeBinding=C;this.PredecessorBinding=L;this.ProgressPercentBinding=H;this.ScheduleBinding=B;this.DescBinding=F;this.ResourceNameBinding=G;this.ResourceIDBinding=E;this.ResourceScheduleBinding=O;this.AssignedResourcesBinding=M;this.WBSIDBinding=S;this._convertResListFromResStringHandler=this.DataBoundActivities_M().ConvertResourceListFromResourceString.subscribe(this.DataBoundGanttModel_ConvertResourceListFromResourceString,
this);w=[];v=new RadiantQ.Gantt.Utils.DelayUpdates;try{for(g.DataBoundGanttModel.IsBuildingModel=!0,null!=this._resList&&this.AddNewResources(this._resList),y=1,u=0;u<this._boundColl.length;u++){var va=this._boundColl[u],la=new h(va,z,null,RadiantQ.Gantt.BindingMode.OneWay,this);la._value||(la._value=0);var ma=la._value;if(0>ma)throw new NotSupportedException("Specified Indent is < 0 and not supported.");var Y=this.CreateNewDataBoundActivity(va,U);Y.TransferIDFromBoundToSelf();Y.TransferWBSFromBoundToSelf();
if(0==ma||null==a)this._activities.add(Y),a=Y,b=0,this.parentActivities=[];else if(ma>b)a.ChildActivities_M().add(Y),this.parentActivities.push(a),a=Y,b++;else{A=b-ma;for(x=1;x<=A;x++)this.parentActivities.pop();this.parentActivities[this.parentActivities.length-1].ChildActivities_M().add(Y);a=Y;b-=A}Y.TransferDataFromBoundToSelf();Y.PredecessorIndexString_M()&&w.push(Y);null==this.SortOrderBinding&&Y.SortOrder_M(y);y++}}catch(ra){throw window.console&&window.console.error&&window.console.error("DataBoundGanttModel constructor throws "+
ra+" in ID:"+Y.id),Error(ra);}finally{g.DataBoundGanttModel.IsBuildingModel=!1}v.Dispose();z=new RadiantQ.Gantt.Utils.DelayUpdates;try{g.DataBoundGanttModel.IsBuildingModel=!0;for(u=0;u<w.length;u++)this.ProcessPredecessorsAndAddDependencies(w[u]);this.ApplyDependencyConstraintsForAllDependencies();this.Activities_M().UpdateChildWBSIDs()}catch(sa){throw window.console&&window.console.error&&window.console.error("DataBoundGanttModel constructor throws "+sa),Error(sa);}finally{g.DataBoundGanttModel.IsBuildingModel=
!1}z.Dispose();this._onInit=!1;return this};g.DataBoundGanttModel.IsBuildingModel=!1;g.DataBoundGanttModel.prototype=new g.BaseGanttModel;g.DataBoundGanttModel.prototype.ApplyDependencyConstraintsForAllDependencies=function(){if(!0==this.EnforceDependencyConstraints_M())for(var a=new e(this.Dependencies_M()),b=0;b<a.length_M();b++){var c=a.GetItemByIndex(b);this.ApplyDependencyConstraints(c.Activity)}};g.DataBoundGanttModel.prototype.BoundCollAsList_M=function(){return this._boundColl};g.DataBoundGanttModel.prototype.DataBoundActivities_M=
function(){return this.Activities_M()};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(g.DataBoundGanttModel.prototype,"BoundCollAsList",{get:function(){return this.BoundCollAsList_M()},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(g.DataBoundGanttModel.prototype,"DataBoundActivities",{get:function(){return this.DataBoundActivities_M()},set:function(){},enumerable:!0,configurable:!0}));g.DataBoundGanttModel.prototype.ApplyDependencyConstraints=function(a){if(a=this.Dependencies_M()._predsByActivity[a.ID_M()])for(var b=
0;b<a.length;b++)a[b].EnsureActivityOrder()};g.DataBoundGanttModel.prototype.CreateNewDataBoundActivity=function(a,b){return new g.DataBoundActivity(this,a,this.IDBinding,this.SortOrderBinding,this.NameBinding,this.IndentLevelBinding,this.StartTimeBinding,this.PrefStartTimeBinding,this.EffortBinding,this.EndTimeBinding,this.PredecessorBinding,this.ProgressPercentBinding,this.ScheduleBinding,this.DescBinding,this.AssignedResourcesBinding,this.WBSIDBinding,this.AutoExpandNodes)};g.DataBoundGanttModel.prototype.DataBoundGanttModel_ConvertResourceListFromResourceString=
function(a,b){var c=d.ValueConverters.ConverterUtils;if(!1==b.ConvertBack)if(null!=this._resAssgnStringConverter)this._resAssgnStringConverter.Convert(b,null,this,null);else{var g=b.Assignments_M();g.clear();c.ConvertResourceTextToAssignments(b.ResourceText,this.GanttResources_M(),g)}else null!=this._resAssgnStringConverter?this._resAssgnStringConverter.ConvertBack(b,null,this,null):b.ResourceText=c.GetResourcesText(b.Assignments_M(),!0,!1)};g.DataBoundGanttModel.prototype.ProcessPredecessorsAndAddDependencies=
function(a){var b=a.PredecessorIndexString_M();if(b){var c=[],d=[],g=[],e=this.ProcessPredecessorString(b,this.LagStringUnitsInHours_M(),c,d,g,e);a.processingPredString=!0;for(b=0;b<c.length;b++)e=this.GetActivityById(c[b]),null!=e&&(this.CanAddNewDependency(e,a,null,d[b])?this.CreateNewDependencyInternal(e,a,d[b],g[b],!0):null!=this.DependencyFailedNotifierCallBack&&"function"==typeof this.DependencyFailedNotifierCallBack&&this.DependencyFailedNotifierCallBack(e,a,null,d[b]));a.processingPredString=
!1;a.UpdatePredecessorString()}};g.DataBoundGanttModel.prototype.ValidatePredecessorString=function(a,b,c){if(a){b=[];if(c=this.ProcessPredecessorString(a,b,[],[],c))return!1;for(a=0;a<b.Length;a++)if(null==this[b[a]])return!1}return!0};g.DataBoundGanttModel.ProcessPredecessorString=function(a,b,c,d,e,h){h="";if(a){a=a.split(",");for(var f=0;f<a.length;f++){var t=a[f].trim();if(0!=t.length){var s=null,w=!0;-1!=t.indexOf("-")?(s=t.split("-"),w=!1):s=t.split("+");var t=-1,u=RadiantQ.Gantt.DependencyType.FinishToStart,
v=RQTimeSpan.Zero_M(),z=s[0].trim(),t=parseInt(z),y=z.toLowerCase().search("s"),A=z.toLowerCase().search("f");if(0<y||0<A)if(2>z.length){h+="Unexpected string encountered: "+z+". (Valid examples: 10, 10SS, 5FS, etc.)";continue}else y=z.substring(z.length-2,z.length),z=z.substring(0,z.length-2),t=parseInt(z),void 0==t||-1==t?(t=-1,h+=z+" is not a valid ID (number)."):void 0!=t&&-1!=t&&(A=g.DataBoundGanttModel.TryParse(y,u),u=A.Type,!1==A.status&&(h+=y+" is not a valid Dependency Type"));void 0!=t&&
-1!=t?(1<s.length&&(v=0,(v=parseFloat(s[1].trim()))||(h+=s[1].trim()+" is not a valid lag string. Specify a valid number."),v=new RQTimeSpan(0,v*b,0,0,0),!1==w&&(v=v.getEqualNegative())),-1==RQArray.prototype.indexOf.call(c,t)&&(c.push(t),d.push(u),e.push(v))):h+="Unexpected string encountered: "+z+". (Valid examples: 10, 10SS, 5FS, etc.)"}}}return h};g.DataBoundGanttModel.ConstructPredecessorString=function(a,b){var c=RQTimeSpan.Zero_M(),d="";if(null!=a)for(var g=0;g<a.length;g++){var e=a[g],h=e.FromActivity_M().ID_M().toString();
switch(e.Type_M()){case RadiantQ.Gantt.DependencyType.FinishToFinish:h+="FF";break;case RadiantQ.Gantt.DependencyType.StartToFinish:h+="SF";break;case RadiantQ.Gantt.DependencyType.StartToStart:h+="SS"}e=e.Lag_M();e>c?h+="+"+(e.getTotalHours()/b).toString():e<c&&(h+="-"+-(e.getTotalHours()/b).toString());d+=h;d+=","}return d?d.slice(0,d.length-1):d};g.DataBoundGanttModel.TryParse=function(a,b){a=a.toLowerCase();switch(a){case "ss":return{Type:RadiantQ.Gantt.DependencyType.StartToStart,status:!0};
case "sf":return{Type:RadiantQ.Gantt.DependencyType.StartToFinish,status:!0};case "fs":return{Type:RadiantQ.Gantt.DependencyType.FinishToStart,status:!0};case "ff":return{Type:RadiantQ.Gantt.DependencyType.FinishToFinish,status:!0}}return{Type:RadiantQ.Gantt.DependencyType.FinishToStart,status:!1}};g.DataBoundGanttModel.prototype.GetIndent=function(a,b){return ModelExtensions.GetValue(a,b,new StringToIntConverter)};g.DataBoundGanttModel.prototype.CreateNewActivity=function(a,b){null==b&&(b=!0);if(b)if(null!=
this._boundColl)a&&f.observable(this._boundColl).insert(this._boundColl.length,a);else throw new NotSupportedException("The bound ItemsSource should be of type IList to be able to add the new item into it.");var c=this.GetNewSortOrder(),d=this.CreateNewDataBoundActivity(a,this.AutoExpandNodes);d.TransferIDFromBoundToSelf();d.TransferWBSFromBoundToSelf();this.Activities_M().add(d);this._isNewActInit=!0;d.TransferDataFromBoundToSelf();this._isNewActInit=!1;d.SortOrder_M(c);this.OnNewActivityAdded(new g.NewActivityAddedEventArgs(d,
null,-1));this.ProcessPredecessorsAndAddDependencies(d);return d};g.DataBoundGanttModel.prototype.AddNewResources=function(a){var b=this,c=this.GanttResources_M();if(null!=a){f.isArray(a)||(a=[a]);f.observable(a).bind("insert remove replaceAll",function(a,d){if("insert"==a.type){var e=d.items;if(null!=e)for(var h=0;h<e.length;h++)c.Add(new g.DataBoundGanttResource(e[h],b.ResourceNameBinding,b.ResourceIDBinding,b.ResourceScheduleBinding))}});for(var d=0;d<a.length;d++)c.Add(new g.DataBoundGanttResource(a[d],
b.ResourceNameBinding,b.ResourceIDBinding,b.ResourceScheduleBinding));return a}};g.DataBoundGanttModel.prototype.CreateNewDependency=function(a,b,c,d){a=g.BaseGanttModel.prototype.CreateNewDependency.call(this,a,b,c,d);if(!a)return!1;b.OnAddedPredecessorDependency(a);return a};g.DataBoundGanttModel.prototype.Dispose=function(){g.BaseGanttModel.prototype.Dispose.call(this);this._convertResListFromResStringHandler&&(this._convertResListFromResStringHandler.Dispose(),this._convertResListFromResStringHandler=
null);this._schedule=this._resources=null;this._activities&&this._activities.Dispose();this._boundColl=this._activities=null;this.canInsertPropertyChangeTriggeringPropertiesInData=!1;this.ScheduleFrom=this.ProjectEndDate=this.ProjectStartDate=this._resAssgnStringConverter=null;this._onInit=!1;this.ActivityUpdated=this.ProcessPredecessorString=null;this.canInsertPropertyChangeTriggeringPropertiesInData=!1;this._resAssgnStringConverter=this.AutoExpandNodes=this._customProgressCalculation=this.ProjectEndDate=
this.ProjectStartDate=this.ScheduleFrom=null;d.WorkTimeSchedule._cachedStdWorkingTimes=new d.WorkTimeSchedule.CachedContWorkingTimes;d.WorkTimeSchedule._continuousSchedule=null;d.WorkTimeSchedule.cachedContWorkingTimes={};this.WBSIDBinding=this.AssignedResourcesBinding=this.ResourceScheduleBinding=this.ResourceIDBinding=this.ResourceNameBinding=this.DescBinding=this.ScheduleBinding=this.ProgressPercentBinding=this.PredecessorBinding=this.EndTimeBinding=this.EffortBinding=this.PrefStartTimeBinding=
this.StartTimeBinding=this.IndentLevelBinding=this.SortOrderBinding=this.NameBinding=this.IDBinding=this.parentActivities=this._resList=null;RadiantQ.Gantt.WorkTimeSchedule._cached8X5ScheduleTimes=new d.WorkTimeSchedule("8X5 Schedule",d.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider)};g.DataBoundActivitiesCollection=function(a,b){g.ActivitiesCollection.call(this,a,b);this._model=b;this._parent=a;!1==this.isActivitiesCollection&&!1==this instanceof g.ActivitiesCollection&&g.ActivitiesCollection.call(this,
a,b);this.ConvertResourceListFromResourceString=new ObjectEvent("ConvertResourceListFromResourceString");this.OnChildPropertyChanged=function(a,b){g.ActivitiesCollection.prototype.OnChildPropertyChanged.call(this,a,b);if("ID"==b.PropertyName){var c=this._idByActivity.GetItemByKey(a);c&&(this._activityByID.Remove(c),this._idByActivity.Remove(a));c=a.ID_M();this._activityByID.Add(c,a);this._idByActivity.Add(a,c)}};this._indentLevel=0;g.DataBoundActivitiesCollection.prototype.Dispose=this.Dispose=function(){g.ActivitiesCollection.prototype.Dispose.call(this);
this._parent=this._model=null;this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.Dispose();this.ConvertResourceListFromResourceString=null;this._actConvertResListFromResStrHandlerByID&&(this._actConvertResListFromResStrHandlerByID={})};return this};g.DataBoundActivitiesCollection.prototype=new g.ActivitiesCollection;g.DataBoundActivitiesCollection.prototype._activityByID=new RadiantQ.Gantt.Dictionary;g.DataBoundActivitiesCollection.prototype._idByActivity=new RadiantQ.Gantt.Dictionary;
g.DataBoundActivitiesCollection.prototype.IndentLevel_M=function(a){if(0==arguments.length)return this._indentLevel;if(this._indentLevel!=a){this._indentLevel=a;this.OnPropertyChanged("IndentLevel");for(var b=0;b<this.length;b++)this[b].IndentLevel_M(a)}};RadiantQ.CanUseDefineProperty&&Object.defineProperty(g.DataBoundActivitiesCollection.prototype,"IndentLevel",{get:function(){return this.IndentLevel_M()},set:function(a){this.IndentLevel_M(a)},enumerable:!0,configurable:!0});g.DataBoundActivitiesCollection.prototype.SubscribeToChildEvents=
function(a){this._actConvertResListFromResStrHandlerByID||(this._actConvertResListFromResStrHandlerByID={});var b=a.ConvertResourceListFromResourceString.subscribe(this.dbActivity_ConvertResourceListFromResourceString,this);this._actConvertResListFromResStrHandlerByID[a.id]=b;a.IndentLevel_M(this.IndentLevel_M());RadiantQ.Gantt.Model.ActivitiesCollection.prototype.SubscribeToChildEvents.call(this,a)};g.DataBoundActivitiesCollection.prototype.dbActivity_ConvertResourceListFromResourceString=function(a,
b){this.OnConvertResourceListFromResourceString(b)};g.DataBoundActivitiesCollection.prototype.UnsubscribeToChildEvents=function(a){this._actConvertResListFromResStrHandlerByID&&this._actConvertResListFromResStrHandlerByID[a.id]&&(this._actConvertResListFromResStrHandlerByID[a.id].Dispose(),delete this._actConvertResListFromResStrHandlerByID[a.id]);g.ActivitiesCollection.prototype.UnsubscribeToChildEvents.call(this,a)};g.DataBoundActivitiesCollection.prototype.OnConvertResourceListFromResourceString=
function(a){null!=this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.raise(this,a)};g.DataBoundActivitiesCollection.prototype.GetActivityById=function(a){return this._activityByID.GetItemByKey(a)};g.DataBoundActivitiesCollection.prototype.GetIdByActivity=function(a){a=this._idByActivity.GetItemByKey(a);return null==a||void 0==a?-1:a};g.DataBoundActivity=function(a,b,c,d,e,f,r,t,s,w,u,v,z,y,A,x,C){this.CreateChildActivitiesCollection=function(){return new g.DataBoundActivitiesCollection(this,
this.Model)};g.BaseActivity.call(this,a);this.ConvertResourceListFromResourceString=new ObjectEvent("ConvertResourceListFromResourceString");this._indentLevel=-1;this._isExpanded=C;this._isOverlapping=!1;a&&b&&(this._boundObject=b,this._boundProps={},this._ignoreSelfUpdates=this.IgnoreBDUpdates=!1,this._idBinder=new h(this._boundObject,c,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._nameBinder=new h(this._boundObject,e,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._sortOrderBinder=new h(this._boundObject,
d,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._indentBinder=new h(this._boundObject,f,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._startTimeBinder=new h(this._boundObject,r,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._prefStartTimeBinder=new h(this._boundObject,t,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._effortBinder=new h(this._boundObject,s,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._endTimeBinder=new h(this._boundObject,w,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._predIndexBinder=
new h(this._boundObject,u,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._progressPercentBinder=new h(this._boundObject,v,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._scheduleBinder=new h(this._boundObject,z,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._descBinder=new h(this._boundObject,y,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._assignedResourcesBinder=new h(this._boundObject,A,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._wbsIdBinder=new h(this._boundObject,x,null,RadiantQ.Gantt.BindingMode.TwoWay,
a),this._idBinder.IsBound_M()&&(this._boundProps[this._idBinder._binding.Property]=this._idBinder,this._idBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._nameBinder.IsBound_M()&&(this._boundProps[this._nameBinder._binding.Property]=this._nameBinder,this._nameBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._sortOrderBinder.IsBound_M()&&(this._boundProps[this._sortOrderBinder._binding.Property]=this._sortOrderBinder,this._sortOrderBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,
this)),this._indentBinder.IsBound_M()&&(this._boundProps[this._indentBinder._binding.Property]=this._indentBinder,this._indentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._assignedResourcesBinder.IsBound_M()&&(this._boundProps[this._assignedResourcesBinder._binding.Property]=this._assignedResourcesBinder,this._assignedResourcesBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._startTimeBinder.IsBound_M()&&(this._boundProps[this._startTimeBinder._binding.Property]=
this._startTimeBinder,this._startTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._prefStartTimeBinder.IsBound_M()&&(this._boundProps[this._prefStartTimeBinder._binding.Property]=this._prefStartTimeBinder,this._prefStartTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._effortBinder.IsBound_M()&&(this._boundProps[this._effortBinder._binding.Property]=this._effortBinder,this._effortBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._endTimeBinder.IsBound_M()&&
(this._boundProps[this._endTimeBinder._binding.Property]=this._endTimeBinder,this._endTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._predIndexBinder.IsBound_M()&&(this._boundProps[this._predIndexBinder._binding.Property]=this._predIndexBinder,this._predIndexBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._progressPercentBinder.IsBound_M()&&(this._boundProps[this._progressPercentBinder._binding.Property]=this._progressPercentBinder,this._progressPercentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,
this)),this._scheduleBinder.IsBound_M()&&(this._boundProps[this._scheduleBinder._binding.Property]=this._scheduleBinder,this._scheduleBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._descBinder.IsBound_M()&&(this._boundProps[this._descBinder._binding.Property]=this._descBinder,this._descBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._wbsIdBinder.IsBound_M()&&(this._boundProps[this._wbsIdBinder._binding.Property]=this._wbsIdBinder,this._wbsIdBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,
this)),this._childActivities.ConvertResourceListFromResourceString.subscribe(this.ChildActivity_ConvertResourceListFromResourceString,this));this._ignoreSelfUpdates=!1;this.OnPropertyChanged=function(a,b,c){if(!1==this._ignoreSelfUpdates)try{switch(this.IgnoreBDUpdates=!0,a){case "ActivityName":this._nameBinder.Value_M(this.ActivityName_M());break;case "IndentLevel":this._indentBinder&&this._indentBinder.Value_M(this.IndentLevel_M());break;case "StartTime":this._startTimeBinder.Value_M(this.StartTime_M());
break;case "PreferredStartTime":this._prefStartTimeBinder.Value_M(c);break;case "Effort":this._effortBinder.Value_M(this.Effort_M());break;case "ProgressPercent":this._progressPercentBinder.Value_M(this.ProgressPercent_M());break;case "Schedule":this._scheduleBinder.Value_M(this.Schedule_M());break;case "Description":this._descBinder.Value_M(this.Description_M());break;case "ID":this._idBinder.Value_M(this.ID_M());break;case "SortOrder":this._sortOrderBinder.Value_M(this.SortOrder_M());break;case "PredecessorIndexString":this._predIndexBinder.Value_M(this.PredecessorIndexString_M());
break;case "Assignments":this.UpdateResourcesString();break;case "DefaultWBSID":case "WBSID":case "IsAutoWBSID":this.PersistWBSInData();break}}finally{this.IgnoreBDUpdates=!1}g.BaseActivity.prototype.OnPropertyChanged.call(this,a,b,c);if(!1==this._ignoreSelfUpdates)try{switch(this.IgnoreBDUpdates=!0,a){case "EndTime":null!=this._endTimeBinder&&null!=this._endTimeBinder._binding&&this._endTimeBinder.Value_M(this.EndTime_M());break}}finally{this.IgnoreBDUpdates=!1}};return this};g.DataBoundActivity.prototype=
new g.BaseActivity;g.DataBoundActivity.prototype.DataSource_M=function(){return this._boundObject};g.DataBoundActivity.prototype.IndentLevel_M=function(a){if(0==arguments.length)return this._indentLevel;if(this._indentLevel!=a){var b=this._indentLevel;this._indentLevel=a;this.OnPropertyChanged("IndentLevel",b,a);this._childActivities.IndentLevel_M(a+1)}};g.DataBoundActivity.prototype.IgnoreSelfUpdates_M=function(a){if(0==arguments.length)return this._ignoreSelfUpdates;this._ignoreSelfUpdates=a};g.DataBoundActivity.prototype.IsOverlapping_M=
function(a){if(0==arguments.length)return this._isOverlapping;this._isOverlapping!=a&&(this._isOverlapping=a,this.OnPropertyChanged("IsOverlapping"))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(g.DataBoundActivity.prototype,"DataSource",{get:function(){return this.DataSource_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(g.DataBoundActivity.prototype,"IndentLevel",{get:function(){return this.IndentLevel_M()},set:function(a){this.IndentLevel_M(a)},enumerable:!1,
configurable:!0}),Object.defineProperty(g.DataBoundActivity.prototype,"IgnoreSelfUpdates",{get:function(){return this.IgnoreSelfUpdates_M()},set:function(a){this.IgnoreSelfUpdates_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(g.DataBoundActivity.prototype,"IsOverlapping",{get:function(){return this.IsOverlapping_M()},set:function(a){this.IsOverlapping_M(a)},enumerable:!0,configurable:!0}));g.DataBoundActivity.prototype.BoundData_ValueChanged=function(a,b){if(!this.IgnoreBDUpdates)try{switch(this._ignoreSelfUpdates=
!0,a){case this._idBinder:this.ID_M(parseInt(this._idBinder._value));break;case this._sortOrderBinder:this.SortOrder_M(this._sortOrderBinder._value);break;case this._nameBinder:this.ActivityName_M(this._nameBinder._value);break;case this._startTimeBinder:this._startTimeBinder._value&&this._startTimeBinder._value!=Date.MinValue?(this.StartTime_M(this._startTimeBinder._value),!1==this._prefStartTimeBinder.IsBound_M()&&this.PreferredStartTime_M(this.StartTime_M())):this.StartTime_M(this.GetDefaultStartTime());
break;case this._prefStartTimeBinder:this._prefStartTimeBinder._value!=Date.MinValue&&this._prefStartTimeBinder._value?this.PreferredStartTime_M(this._prefStartTimeBinder._value):this.PreferredStartTime_M(this.GetDefaultStartTime());break;case this._indentBinder:this.IndentLevel_M(this._indentBinder._value);break;case this._progressPercentBinder:var c=parseInt(this._progressPercentBinder._value);this.ProgressPercent_M(isNaN(c)?0:c);break;case this._scheduleBinder:this.Schedule_M(this._scheduleBinder._value);
break;case this._effortBinder:this.Effort_M(this._effortBinder._value);break;case this._endTimeBinder:this._endTimeBinder._isValueUpdating&&(this._ignoreSelfUpdates=!1);this.EndTime_M(this._endTimeBinder._value);break;case this._descBinder:this._description=this._descBinder._value;break;case this._predIndexBinder:this.PredecessorIndexString_M(this._predIndexBinder._value);break;case this._assignedResourcesBinder:this.UpdateResourcesCollection(this._assignedResourcesBinder._value);break;case this._wbsIdBinder:this.ProcessWBSIDInData(this._wbsIdBinder._value);
break}}finally{this._ignoreSelfUpdates=!1}};g.DataBoundActivity.prototype.ProcessWBSIDInData=function(a){var b=!0;!1==(null==a||void 0==a||""==a)&&"*"==a[0]&&1<a.length&&(this.WBSID_M(a.substring(1)),b=!1);this.IsAutoWBSID_M(b)};g.DataBoundActivity.prototype.Dispose=function(){g.BaseActivity.prototype.Dispose.call(this);null!=this._idBinder&&(this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.Dispose(),this.ConvertResourceListFromResourceString=null,this._idBinder.Dispose(),
this._idBinder=null,this._nameBinder.Dispose(),this._nameBinder=null,this._sortOrderBinder.Dispose(),this._sortOrderBinder=null,this._indentBinder.Dispose(),this._indentBinder=null,this._startTimeBinder.Dispose(),this._startTimeBinder=null,this._prefStartTimeBinder.Dispose(),this._prefStartTimeBinder=null,this._effortBinder.Dispose(),this._effortBinder=null,this._endTimeBinder.Dispose(),this._endTimeBinder=null,this._predIndexBinder.Dispose(),this._predIndexBinder=null,this._progressPercentBinder.Dispose(),
this._progressPercentBinder=null,this._scheduleBinder.Dispose(),this._scheduleBinder=null,this._descBinder.Dispose(),this._descBinder=null,this._assignedResourcesBinder.Dispose(),this._assignedResourcesBinder=null,this._wbsIdBinder.Dispose(),this._wbsIdBinder=null,this.Model.canInsertPropertyChangeTriggeringPropertiesInData&&delete this._boundObject.PropertyChanged,delete this._boundObject._boundProps,delete this._boundProps)};g.DataBoundActivity.prototype.GetDefaultStartTime=function(){g.BaseActivity.prototype.GetDefaultStartTime=
this.GetDefaultStartTime;return this.Model.ScheduleFrom==g.ScheduleFrom.ProjectStartDate?this.Model.ProjectStartDate:this.Model.WorkTimeSchedule_M().GetStart(this.Model.ProjectEndDate,this.Effort_M())};g.DataBoundActivity.prototype.ChildActivity_ConvertResourceListFromResourceString=function(a,b){this.OnConvertResourceListFromResourceString(b)};g.DataBoundActivity.prototype.TransferIDFromBoundToSelf=function(){this._idBinder.IsBound_M()&&this.BoundData_ValueChanged(this._idBinder)};g.DataBoundActivity.prototype.TransferWBSFromBoundToSelf=
function(){this._wbsIdBinder.IsBound_M()&&this.BoundData_ValueChanged(this._wbsIdBinder)};g.DataBoundActivity.prototype.TransferDataFromBoundToSelf=function(){this._sortOrderBinder.IsBound_M()&&this.BoundData_ValueChanged(this._sortOrderBinder);this._nameBinder.IsBound_M()&&this.BoundData_ValueChanged(this._nameBinder);this._descBinder.IsBound_M()&&this.BoundData_ValueChanged(this._descBinder);this._scheduleBinder.IsBound_M()&&this.BoundData_ValueChanged(this._scheduleBinder);this._assignedResourcesBinder.IsBound_M()&&
this.BoundData_ValueChanged(this._assignedResourcesBinder);var a=!1;if(this._endTimeBinder.IsBound_M()){this._ignoreSelfUpdates=!0;var b=this._endTimeBinder.Value_M();if(b!=DateTime.MinValue){var c=RQTimeSpan.Zero_M();this._effortBinder.IsBound_M()&&((c=this._effortBinder.Value_M())||(c=RQTimeSpan.Zero_M()),"string"==typeof c&&(c=RQTimeSpan.parse(c)));a=!0;this.SetPreCalculatedEndTime(b,c)}this._ignoreSelfUpdates=!1}this._effortBinder.IsBound_M()&&!a&&this.BoundData_ValueChanged(this._effortBinder);
this._startTimeBinder.IsBound_M()&&(this.BoundData_ValueChanged(this._startTimeBinder),this.UpdateIsMileStone());this._prefStartTimeBinder.IsBound_M()&&this.BoundData_ValueChanged(this._prefStartTimeBinder);this._indentBinder.IsBound_M()&&this.BoundData_ValueChanged(this._indentBinder);this._progressPercentBinder.IsBound_M()&&this.BoundData_ValueChanged(this._progressPercentBinder);this._predIndexBinder.IsBound_M()&&this.BoundData_ValueChanged(this._predIndexBinder);this._wbsIdBinder.IsBound_M()&&
this.BoundData_ValueChanged(this._wbsIdBinder);this.Model.SetTopSortOrder(this.SortOrder_M())};g.DataBoundActivity.prototype.UpdateResourcesString=function(){var a=this._assignments.AsText_M();this._assignedResourcesBinder.Value_M(a)};g.DataBoundActivity.prototype.UpdateResourcesCollection=function(a){this._assignments.AsText_M(a)};g.DataBoundActivity.prototype.OnConvertResourceListFromResourceString=function(a){null!=this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.raise(this,
a)};g.DataBoundActivity.prototype.OnTimesChanged=function(){this._ignoreSelfUpdates&&this._endTimeBinder.IsBound_M()||g.BaseActivity.prototype.OnTimesChanged.call(this)};g.DataBoundActivity.prototype.PersistWBSInData=function(){var a=this.WBSID_M();!1==this.IsAutoWBSID_M()&&(a="*"+a);this._wbsIdBinder.Value_M(a)};g.DataBoundActivity.prototype.CreateNewChildActivity=function(a){a=new RadiantQ.Gantt.Model.DataBoundActivity(this.Model,a,this._idBinder.OriginalBinding,this._sortOrderBinder.OriginalBinding,
this._nameBinder.OriginalBinding,this._indentBinder.OriginalBinding,this._startTimeBinder.OriginalBinding,this._prefStartTimeBinder.OriginalBinding,this._effortBinder.OriginalBinding,this._endTimeBinder.OriginalBinding,this._predIndexBinder.OriginalBinding,_progressPercentBinder.OriginalBinding,this._scheduleBinder.OriginalBinding,this._descBinder.OriginalBinding,this._assignedResourcesBinder.OriginalBinding,this._wbsIdBinder.OriginalBinding);a.TransferIDFromBoundToSelf();a.TransferWBSFromBoundToSelf();
this.ChildActivities_M().Add(a);a.TransferDataFromBoundToSelf();return a};g.ConvertResourceListFromResourceStringEventArgs=b;b.prototype.Assignments_M=function(){return this._assignments};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.prototype,"Assignments",{get:function(){return this.Assignments_M()},set:function(){},enumerable:!0,configurable:!0});g.DataBoundGanttResource=function(a,b,c,d){this.base=g.BaseGanttResource;this.base();this._resScheduleBinder=null;this.DataSource=this._boundObj=
a;null!=c&&(this._resIDbinder=new h(a,c));null!=b&&(this._resNamebinder=new h(a,b),this._resNamebinder.ValueChanged.subscribe(this._resNamebinder_ValueChanged,this));null!=d&&(this._resScheduleBinder=new h(a,d),this._resScheduleBinder.ValueChanged.subscribe(this._resScheduleBinder_ValueChanged));return this};g.DataBoundGanttResource.prototype=new g.BaseGanttResource;g.DataBoundGanttResource.prototype.ResourceID_M=function(){if(0==arguments.length)return this._resIDbinder?this._resIDbinder._value:
this.ResourceName;window.console&&console.error&&console.error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");throw Error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");};g.DataBoundGanttResource.prototype.Schedule_M=function(){if(0==arguments.length)return null!=this._resScheduleBinder?this._resScheduleBinder.Value_M():null;window.console&&console.error&&console.error("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");
throw Error("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(g.DataBoundGanttResource.prototype,"ResourceID",{get:function(){return this.ResourceID_M()},set:function(a){throw Error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");},enumerable:!0,configurable:!0}),Object.defineProperty(g.DataBoundGanttResource.prototype,"Schedule",{get:function(){return this.Schedule_M()},
set:function(){throw new Exception("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");},enumerable:!0,configurable:!0}));g.DataBoundGanttResource.prototype.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a)};g.DataBoundGanttResource.prototype.toString=function(){return this.ResourceName_M()};g.DataBoundGanttResource.prototype._resNamebinder_ValueChanged=function(a,b){this.OnPropertyChanged("ResourceName")};
g.DataBoundGanttResource.prototype._resScheduleBinder_ValueChanged=function(a,b){this.OnPropertyChanged("Schedule")};g.DataBoundGanttResource.prototype.Dispose=function(){this._resNamebinder&&(this._resNamebinder.Dispose(),this._resNamebinder=null);this._resScheduleBinder&&(this._resScheduleBinder.Dispose(),this._resScheduleBinder=null)};g.ScheduleFrom={ProjectStartDate:"ProjectStartDate",ProjectEndDate:"ProjectEndDate"};e.prototype.ProcessDependency=function(b){this._cachedItem={};var c=b.FromActivity_M(),
d=b.ToActivity_M(),g=this._dict[c.ID_M()],e=this._dict[d.ID_M()];if(null==g)null==e?(b=new a(c),this._dict.Add(c,b),this.Append(b),b=new a(d),this._dict.Add(d,b),this.Append(b)):(b=new a(c),this._dict.Add(c,b),this.InsertBefore(b,e));else if(null==e)b=new a(d),this._dict.Add(d,b),this.InsertAfter(b,g);else if(e.Index<g.Index)for(this.InsertBefore(g,e),c=this._deps.GetPredecessors(g.Activity),d=0;d<c.length;d++)g=c[d],g!=b&&this.ProcessDependency(g)};e.prototype.InsertBefore=function(a,b){null!=a.Previous&&
(a.Previous.Next=a.Next);null!=a.Next&&(a.Next.Previous=a.Previous);a==this.last&&(this.last=a.Previous);a.Next=b;a.Previous=b.Previous;null!=b.Previous&&(b.Previous.Next=a);b.Previous=a;null!=a.Previous?a.Index_M(a.Previous.Index_M()+1):(this.first=a,a.Index_M(0))};e.prototype.InsertAfter=function(a,b){a.Next=b.Next;a.Previous=b;null!=b.Next&&(b.Next.Previous=a);b.Next=a;null==a.Next&&(this.last=a);a.Index_M(a.Previous.Index_M()+1)};e.prototype.Append=function(a){null==this.first?(this.first=this.last=
a,a.Index_M(0)):(this.last.Next=a,a.Previous=this.last,a.Index_M(this.last.Index_M()+1),this.last=a)};e.prototype.GetItemByIndex=function(a){for(var b=0;b<this._dict.asArray.length;b++){var c=this._dict.asArray[b];if(this._cachedItem[a])return this._cachedItem[a];this._cachedItem[c._index]=c;if(c._index===a)return c}return null};e.prototype.length_M=function(){return this._dict.length};RadiantQ.CanUseDefineProperty&&Object.defineProperty(e.prototype,"length",{get:function(){return this._dict.length},
set:function(){},configurable:!0});a.prototype.Index_M=function(a){if(0==arguments.length)return this._index;this._index!==a&&(this._index=a,null!=this.Next&&this.Next.Index_M(this._index+1))};RadiantQ.CanUseDefineProperty&&Object.defineProperty(a.prototype,"Index",{get:function(){return this._index},set:function(a){this._index!==a&&(this._index=a,null!=this.Next&&(this.Next.Index=this._index+1))},enumerable:!0,configurable:!0});c.prototype.Current_M=function(){return this.current.Activity};RadiantQ.CanUseDefineProperty&&
Object.defineProperty(c.prototype,"Current",{get:function(){return this.current.Activity},set:function(){},enumerable:!0,configurable:!0});c.prototype.MoveNext=function(){this.current=null==this.current?this._list.first:this.current.Next;return null!=this.current};c.prototype.Reset=function(){this.current=null}})(jQuery);
(function(){RadiantQ.Gantt.View={};RadiantQ.Gantt.DependencyType={FinishToStart:"FinishToStart",StartToStart:"StartToStart",FinishToFinish:"FinishToFinish",StartToFinish:"StartToFinish",None:"None"};var f=RadiantQ.Gantt;RadiantQ.Gantt.View.IDependencyView=function(){NotifyPropertyChanged.apply(this,arguments);this.OnPropertyChanged=NotifyPropertyChanged.prototype.OnPropertyChanged;this._endTime=this._startTime=this.Dependency=null;this.StartItemPosAdjustment={X:0,Y:0};this.EndItemPosAdjustment={X:0,
Y:0};this._endItemYPosAdjustment=this._endItemXPosAdjustment=this._startItemYPosAdjustment=this._startItemXPosAdjustment=0;this.VerticalPositionChanged=null};RadiantQ.Gantt.View.IDependencyView.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.View.IDependencyView.prototype.GetStartItemScheduleToPlotWith=function(b){};RadiantQ.Gantt.View.IDependencyView.prototype.GetEndItemScheduleToPlotWith=function(b){};RadiantQ.Gantt.View.IGanttControlDependencyView=function(){this.GanttControl=this.Dependency=
null};RadiantQ.Gantt.View.GanttDependencyView=function(b,e,a){RadiantQ.Gantt.View.IDependencyView.call(this,arguments);this._onInit=!0;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.notifyChange=function(a,b){!0!=this._onInit&&this.PropertyChanged.raise(this,{PropertyName:a,value:b})};this.GanttControl=a;this._startTime=new Date;this._endTime=new Date;this.Dependency=this.Dependency=b;this.StartActivity=b.FromActivity_M();this.EndActivity=b.ToActivity_M();this.ActivityViewsCollection=
e;this.UpdateTimes();this._depPropertyChangedHandler&&this._depPropertyChangedHandler.Dispose();this._startPropertyChangedHandler&&this._startPropertyChangedHandler.Dispose();this._endPropertyChangedHandler&&this._endPropertyChangedHandler.Dispose();this._startVerticalPositionChangedHandler&&this._startVerticalPositionChangedHandler.Dispose();this._endVerticalPositionChangedHandler&&this._endVerticalPositionChangedHandler.Dispose();this._depPropertyChangedHandler=b.PropertyChanged.subscribe(this.dependency_PropertyChanged,
this);this._startPropertyChangedHandler=this.StartActivity.PropertyChanged.subscribe(this.StartActivity_PropertyChanged,this);this._endPropertyChangedHandler=this.EndActivity.PropertyChanged.subscribe(this.EndActivity_PropertyChanged,this);this._startVerticalPositionChangedHandler=this.StartActivity.VerticalPositionChanged.subscribe(this.Activity_VerticalPositionChanged,this);this._endVerticalPositionChangedHandler=this.EndActivity.VerticalPositionChanged.subscribe(this.Activity_VerticalPositionChanged,
this);this._visibility=this._fromVisibility=this._toVisibility=this._workTimeSchedule=null;if(this._bindings&&this._bindings.length)for(var c=0;c<this._bindings.length;c++)this._bindings[c].Dispose();else this._bindings=[];c=new Binding(this.StartActivity,"IsVisible",this,"FromVisibility",null,RadiantQ.Gantt.BindingMode.TwoWay);this._bindings.push(c);c=new Binding(this.EndActivity,"IsVisible",this,"ToVisibility",null,RadiantQ.Gantt.BindingMode.TwoWay);this._bindings.push(c);c=new Binding(this.GanttControl.options,
"WorkTimeSchedule",this,"WorkTimeSchedule",null,RadiantQ.Gantt.BindingMode.OneWay);this._bindings.push(c);this.UpdateVisibility();this._onInit=!1};RadiantQ.Gantt.View.GanttDependencyView.prototype=new RadiantQ.Gantt.View.IDependencyView;RadiantQ.Gantt.View.GanttDependencyView.prototype.StartTime_M=function(b){if(0==arguments.length)return this._startTime;this._startTime=b;this.notifyChange("StartTime",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndTime_M=function(b){if(0==arguments.length)return this._endTime;
this._endTime=b;this.notifyChange("EndTime",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.DataSource_M=function(){return this.Dependency};RadiantQ.Gantt.View.GanttDependencyView.prototype.DependencyType_M=function(){return this.Dependency.Type_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.IsEndFixedShape_M=function(){return this.EndActivity.IsMilestone_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.IsStartFixedShape_M=function(){return this.StartActivity.IsMilestone_M()};
RadiantQ.Gantt.View.GanttDependencyView.prototype.StartRowIndex_M=function(){return this.StartActivity.DisplayIndex_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndRowIndex_M=function(){return this.EndActivity.DisplayIndex_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.WorkTimeSchedule_M=function(b){if(0==arguments.length)return this._workTimeSchedule;this._workTimeSchedule=b;this.notifyChange("WorkTimeSchedule",b);this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.ToVisibility_M=
function(b){if(0==arguments.length)return this._toVisibility;this._toVisibility=b;this.notifyChange("ToVisibility",b);this.UpdateTimes();this.UpdateVisibility()};RadiantQ.Gantt.View.GanttDependencyView.prototype.FromVisibility_M=function(b){if(0==arguments.length)return this._fromVisibility;this._fromVisibility=b;this.notifyChange("FromVisibility",b);this.UpdateVisibility()};RadiantQ.Gantt.View.GanttDependencyView.prototype.Visibility_M=function(b){if(0==arguments.length)return this._visibility;this._visibility=
b;this.notifyChange("Visibility",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.StartItemXPosAdjustment_M=function(b){if(0==arguments.length){var e=0;this.StartActivity.IsMilestone?e=8:0<this.StartActivity._childActivities.length&&(e=10);switch(this.Dependency._type){case f.DependencyType.StartToFinish:case f.DependencyType.StartToStart:return-1*e;default:return e}}else this._startItemXPosAdjustment=b,this.notifyChange("StartItemXPosAdjustment",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.StartItemYPosAdjustment_M=
function(b){if(0==arguments.length)return this._startItemYPosAdjustment;this._startItemYPosAdjustment=b;this.notifyChange("StartItemYPosAdjustment",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndItemXPosAdjustment_M=function(b){if(0==arguments.length)return this.EndActivity.IsMilestone?this.Dependency._type==RadiantQ.Gantt.DependencyType.StartToStart?-8.5:8.5:0<this.EndActivity._childActivities.length?this.Dependency._type==RadiantQ.Gantt.DependencyType.StartToStart?-10:10:this._endItemXPosAdjustment;
this._endItemXPosAdjustment=b;this.notifyChange("EndItemXPosAdjustment",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndItemYPosAdjustment_M=function(b){if(0==arguments.length)return 0<this.EndActivity._childActivities.length&&this.Dependency._type==RadiantQ.Gantt.DependencyType.FinishToStart&&this.StartActivity._sortOrder>this.EndActivity._sortOrder?-10:this._endItemYPosAdjustment;this._endItemYPosAdjustment=b;this.notifyChange("EndItemYPosAdjustment",b)};RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartTime",{get:function(){return this._startTime},set:function(b){this._startTime=b;this.notifyChange("StartTime",b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndTime",{get:function(){return this._endTime},set:function(b){this._endTime=b;this.notifyChange("EndTime",b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,
"DataSource",{get:function(){return this.Dependency},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"DependencyType",{get:function(){return this.Dependency.Type},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"IsEndFixedShape",{get:function(){return this.EndActivity.IsMilestone},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,
"IsStartFixedShape",{get:function(){return this.StartActivity.IsMilestone},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartRowIndex",{get:function(){return this.StartActivity.DisplayIndex},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndRowIndex",{get:function(){return this.EndActivity.DisplayIndex},set:function(){},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"WorkTimeSchedule",{get:function(){return this._workTimeSchedule},set:function(b){this._workTimeSchedule=b;this.notifyChange("WorkTimeSchedule",b);this.UpdateTimes()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"ToVisibility",{get:function(){return this._toVisibility},set:function(b){this._toVisibility=b;this.notifyChange("ToVisibility",b);this.UpdateTimes();this.UpdateVisibility()},
enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"FromVisibility",{get:function(){return this._fromVisibility},set:function(b){this._fromVisibility=b;this.notifyChange("FromVisibility",b);this.UpdateVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"Visibility",{get:function(){return this._visibility},set:function(b){this._visibility=b;this.notifyChange("Visibility",b)},enumerable:!0,
configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartItemXPosAdjustment",{get:function(){return this.StartItemXPosAdjustment_M()},set:function(b){this.StartItemXPosAdjustment_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndItemXPosAdjustment",{get:function(){return this.EndItemXPosAdjustment_M()},set:function(b){this.EndItemXPosAdjustment_M(b)},enumerable:!0,configurable:!0}));RadiantQ.Gantt.View.GanttDependencyView.prototype.dependency_PropertyChanged=
function(){this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.StartActivity_PropertyChanged=function(b,e){"StartTime"!=e.PropertyName&&"EndTime"!=e.PropertyName||this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndActivity_PropertyChanged=function(b,e){"StartTime"!=e.PropertyName&&"EndTime"!=e.PropertyName||this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.Activity_VerticalPositionChanged=function(){};RadiantQ.Gantt.View.GanttDependencyView.prototype.GetStartItemScheduleToPlotWith=
function(b){return this.StartActivity.GetScheduleToPlotWith(b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.GetEndItemScheduleToPlotWith=function(b){return this.EndActivity.GetScheduleToPlotWith(b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this)};RadiantQ.Gantt.View.GanttDependencyView.prototype.UpdateTimes=function(){switch(this.Dependency.Type_M()){case f.DependencyType.FinishToFinish:this.StartTime_M(this.Dependency._fromActivity.EndTime_M());
this.EndTime_M(this.Dependency._toActivity.EndTime_M());break;case f.DependencyType.StartToFinish:this.StartTime_M(this.Dependency._fromActivity.StartTime_M());this.EndTime_M(this.Dependency._toActivity.EndTime_M());break;case f.DependencyType.StartToStart:this.StartTime_M(this.Dependency._fromActivity.StartTime_M());this.EndTime_M(this.Dependency._toActivity.StartTime_M());break;default:this.StartTime_M(this.Dependency.FromActivity_M().EndTime_M()),this.EndTime_M(this.Dependency._toActivity.StartTime_M())}};
RadiantQ.Gantt.View.GanttDependencyView.prototype.UpdateVisibility=function(){!0==this.ToVisibility_M()&&!0==this.FromVisibility_M()?this.Visibility_M(!0):this.Visibility_M(!1)};RadiantQ.Gantt.View.GanttDependencyView.prototype.Dispose=function(){this._depPropertyChangedHandler&&this._depPropertyChangedHandler.Dispose();this._depPropertyChangedHandler=null;this._startPropertyChangedHandler&&this._startPropertyChangedHandler.Dispose();this._startPropertyChangedHandler=null;this._endPropertyChangedHandler&&
this._endPropertyChangedHandler.Dispose();this._endPropertyChangedHandler=null;this._startVerticalPositionChangedHandler&&this._startVerticalPositionChangedHandler.Dispose();this._startVerticalPositionChangedHandler=null;this._endVerticalPositionChangedHandler&&this._endVerticalPositionChangedHandler.Dispose();this._endVerticalPositionChangedHandler=null;for(var b=0;b<this._bindings.length;b++)this._bindings[b].Dispose()};RadiantQ.Gantt.View.IParentData=function(){};RadiantQ.Gantt.View.IParentData.prototype.HasParent_M=
function(){return this};RadiantQ.Gantt.View.IParentData.prototype.Parent_M=function(){return this};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.View.IParentData.prototype,"HasParent",{get:function(){return this},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.IParentData.prototype,"Parent",{get:function(){return this},set:function(){},enumerable:!0,configurable:!0}));CollectionOFIDependencyView=function(){};CollectionOFIDependencyView.prototype=
new RadiantQ.RQ_CollectionChangeNotifier;RadiantQ.Gantt.GanttFlatDependenciesList=function(b,e,a){this.activityViewsList=e;this.chart=a;this.model=b;this.model.Dependencies.CollectionChanged.subscribe(this.model_NewActivityAdded)};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.CreateFromModel=function(b){this.Clear();for(var e=0;e<b.Dependencies.length;e++)this.add(this.CreateNew(dependency))};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.CreateNew=function(b){return new GanttDependencyView(b,
this.activityViewsList,this.chart)};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.FindView=function(b){for(var e=0;e<this.length;e++)if(this[e].DataSource==b)return e;return-1};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.model_NewActivityAdded=function(b,e){if("remove"==b.type||"replaceAll"==b.type)for(var a=0;a<e.items.length;a++){var c=this.FindView(e.items[a]);-1!=c&&this.remove(c)}if("insert"==b.type)for(a=0;a<e.items.length;a++)this.add(this.CreateNew(e.items[a]))}})();
(function(f){View=RadiantQ.Gantt.View;View.IActivityView=function(){NotifyPropertyChanged.apply(this,arguments);this.OnPropertyChanged=NotifyPropertyChanged.prototype.OnPropertyChanged;this._indentLevel=0;this._isExpanded=!0;this._isParent=this._isReadOnly=this._isMouseIn=this._isSelected=!1;this._isRegularTask=!0;this.ExpandedChanged=new ObjectEvent("ExpandedChanged");this.$chartRow=this.$tableRow=null;return this};View.IActivityView.prototype=new NotifyPropertyChanged;View.IActivityView.prototype.Activity_M=
function(b){if(0==arguments.length)return this._activity;this._activity!=b&&(this._activity=b,this.OnPropertyChanged("Activity",b))};View.IActivityView.prototype.ParentView_M=function(b){if(0==arguments.length)return this._parentView;this._parentView!=b&&(this._parentView=b,this.OnPropertyChanged("ParentView",b))};View.IActivityView.prototype.ParentActivity_M=function(b){if(0==arguments.length)return this._activity.Parent_M();this._activity.Parent_M()!=b&&(this._activity.Parent_M(b),this.OnPropertyChanged("ParentActivity",
b))};View.IActivityView.prototype.IndentLevel_M=function(b){if(0==arguments.length)return this._indentLevel;this._indentLevel!=b&&(this._indentLevel=b,this.OnPropertyChanged("IndentLevel",b))};View.IActivityView.prototype.IsExpanded_M=function(b){if(0==arguments.length)return this._isExpanded;this._isExpanded!=b&&(this._isExpanded=b,this.OnPropertyChanged("IsExpanded",b))};View.IActivityView.prototype.IsReadOnly_M=function(b){if(0==arguments.length)return this._isReadOnly;this._isReadOnly!=b&&(this._isReadOnly=
b,this.OnPropertyChanged("IsReadOnly",b))};View.IActivityView.prototype.IsParent_M=function(b){if(0==arguments.length)return this._isParent;this._isParent!=b&&(this._isParent=b,this.OnPropertyChanged("IsParent",b))};View.IActivityView.prototype.IsRegularTask_M=function(b){if(0==arguments.length)return this._isRegularTask;this._isRegularTask!=b&&(this._isRegularTask=b,this.OnPropertyChanged("IsRegularTask",b))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(View.IActivityView.prototype,"Activity",
{get:function(){return this._activity},set:function(b){this._activity!=b&&(this._activity=b,this.OnPropertyChanged("Activity",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"ParentView",{get:function(){return this._parentView},set:function(b){this._parentView!=b&&(this._parentView=b,this.OnPropertyChanged("ParentView",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"ParentActivity",{get:function(){return this._activity.Parent_M()},
set:function(b){this._activity.Parent_M()!=b&&(this._activity.Parent_M(b),this.OnPropertyChanged("ParentActivity",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(b){this._indentLevel!=b&&(this._indentLevel=b,this.OnPropertyChanged("IndentLevel",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsExpanded",{get:function(){return this._isExpanded},set:function(b){this._isExpanded!=
b&&(this._isExpanded=b,this.OnPropertyChanged("IsExpanded",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsReadOnly",{get:function(){return this._isReadOnly},set:function(b){this._isReadOnly!=b&&(this._isReadOnly=b,this.OnPropertyChanged("IsReadOnly",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsParent",{get:function(){return this._isParent},set:function(b){this._isParent!=b&&(this._isParent=b,this.OnPropertyChanged("IsParent",
b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsRegularTask",{get:function(){return this._isRegularTask},set:function(b){this._isRegularTask!=b&&(this._isRegularTask=b,this.OnPropertyChanged("IsRegularTask",b))},enumerable:!0,configurable:!0}));View.IActivityView.prototype.IsSelected=function(b){if(void 0==b||null==b)return this._isSelected;this._isSelected!=b&&(this._isSelected=b,this.OnPropertyChanged("IsSelected",b,null,!1),this.UpdateSelection(b))};View.IActivityView.prototype.TableRow=
function(b){if(void 0==b||null==b)return this.$tableRow;b=b instanceof jQuery?b:f(b);if(!this.IsSelected)return 0;if(void 0!=this.$tableRow){this.IsSelected()&&this.addSelectionClassToTable(b);this.IsMouseIn()&&this.addHoverClassToTable(b);var e=this.$tableRow.height();b.height(e)}this.$tableRow=b;!0==this._isParent?this.$tableRow.css("font-weight","bolder"):this.$tableRow.css("font-weight","normal")};View.IActivityView.prototype.ChartRow=function(b){if(void 0==b||null==b)return this.$chartRow;b=
b instanceof jQuery?b:f(b);if(void 0!=this.$chartRow){var e=this.$chartRow.height();b.height(e)}this.$chartRow=b};View.IActivityView.prototype.IsMouseIn=function(b){if(void 0==b||null==b)return this._isMouseIn;this._isMouseIn!=b&&(this._isMouseIn=b,this.UpdateHoverStyle(b))};View.IActivityView.prototype.UpdateHoverStyle=function(b){};View.IActivityView.prototype.addSelectionClassToTable=function(b){b.addClass("rq-row-selected ui-state-active")};View.IActivityView.prototype.addHoverClassToTable=function(b){b.addClass("rq-row-hover ui-state-hover")};
View.IActivityView.prototype.UpdateSelection=function(b){};View.IActivityView.prototype.Dispose=function(){NotifyPropertyChanged.prototype.Dispose.call(this);this._indentLevel=0;this._isExpanded=!0;this._isParent=this._isReadOnly=this._isMouseIn=this._isSelected=!1;this._isRegularTask=!0;this.ExpandedChanged&&this.ExpandedChanged.Dispose();this.$chartRow=this.$tableRow=this.ExpandedChanged=null};View.GanttActivityView=function(b,e,a,c){View.IActivityView.apply(this,arguments);this.IndentLevelBinding=
this.ParentActivityBinding=null;this._activity=this.activity=b;this._isExpanded=b.IsExpanded_M();this.Model=a;this.GC=c;this._isParent=this._ignorePredUpdates=!1;this._indentLevel=0;this._isReadOnly=!1;this.ParentView_M(e);this._childActsCollChangedHandler&&this._childActsCollChangedHandler.Dispose();this._actPropertyChangedHandler&&this._actPropertyChangedHandler.Dispose();this._childActsCollChangedHandler=this.activity.ChildActivities_M().CollectionChanged.subscribe(this.ChildActivities_CollectionChanged,
this);this._actPropertyChangedHandler=this.activity.PropertyChanged.subscribe(this.activity_PropertyChanged,this);this.listenChanges();this.OnChildListChanged();this.OnTimesChanged();if(null!=this.GC.options.IsTaskReadOnlyBinding){var d=this.GC.options.IsTaskReadOnlyBinding,g=d.Property,d=d.Converter,h=g.split("."),f=null;1<h.length?(f=this[h[0]],g=h[1]):f=this;this.IsTaskReadOnlyBinding&&this.IsTaskReadOnlyBinding.Dispose();this.IsTaskReadOnlyBinding=new Binding(f,g,this,"IsReadOnly",{Convert:d})}this.RefreshPredString(!0);
this.UpdateIndentWidth();return this};View.GanttActivityView.prototype=new View.IActivityView;View.GanttActivityView.prototype.IndentWidth_M=function(b){if(0==arguments.length)return this._indentWidth;this._indentWidth!=b&&(this._indentWidth=b,this.OnPropertyChanged("IndentWidth",b))};View.GanttActivityView.prototype.Background_M=function(b){if(0==arguments.length)return this._background;this._background!=b&&(this._background=b,this.OnPropertyChanged("Background",b))};View.GanttActivityView.prototype.ParentView_M=
function(b){if(0==arguments.length)return this._parentView;this._parentView!=b&&(this._parentView=b,null!=b?(this.updateParentViewActivityBinding(),this.updateParentViewIndentLevelBinding()):(this.ParentActivityBinding.Dispose(),this.IndentLevelBinding.Dispose(),this.IndentLevelBinding=this.ParentActivityBinding=null,this.IndentLevel_M(0)),this.OnPropertyChanged("ParentView",b))};View.GanttActivityView.prototype.ParentActivity_M=function(b){if(0==arguments.length)return this.activity.Parent_M();this.activity.Parent_M()!=
b&&(this.activity.Parent_M(b),this.OnPropertyChanged("ParentActivity",b))};View.GanttActivityView.prototype.SelectionFill_M=function(b){if(0==arguments.length)return this._selectionFill;this._selectionFill!=b&&(this._selectionFill=b,this.OnPropertyChanged("SelectionFill",b))};View.GanttActivityView.prototype.SelectionFillOpacity_M=function(b){if(0==arguments.length)return this._selectionFillOpacity;this._selectionFillOpacity!=b&&(this._selectionFillOpacity=b,this.OnPropertyChanged("SelectionFillOpacity",
b))};View.GanttActivityView.prototype.PredecessorIndexString_M=function(b){if(0==arguments.length)return this._predecessorIndexString;if(this._predecessorIndexString!=b){var e=this._predecessorIndexString;this._predecessorIndexString=b;!1==this.UpdateActivityDependencies()?(this._predecessorIndexString=e,this.activity.PredecessorIndexString_M(e)):this.OnPropertyChanged("PredecessorIndexString",b)}};View.GanttActivityView.prototype.Activity_M=function(){return this.activity};View.GanttActivityView.prototype.IndentLevel_M=
function(b){if(0==arguments.length)return this._indentLevel;this._indentLevel!=b&&(this._indentLevel=b,this.UpdateIndentWidth(),this.OnPropertyChanged("IndentLevel",b))};View.GanttActivityView.prototype.IsParent_M=function(b){if(0==arguments.length)return this._isParent;var e=this.TableRow();null!=e&&(!0==b?e.css("font-weight","bolder"):e.css("font-weight","normal"));this._isParent!=b&&(this._isParent=b,this.UpdateIndentWidth(),this.OnPropertyChanged("IsParent",b))};View.GanttActivityView.prototype.IsExpanded_M=
function(b){if(0==arguments.length)return this._isExpanded;this._isExpanded!=b&&(this._isExpanded=b,this.OnExpandedChanged(),this.OnPropertyChanged("IsExpanded",b,null,!1))};View.GanttActivityView.prototype.DisplayIndex_M=function(b){if(0==arguments.length)return this.activity.DisplayIndex_M();this.activity.DisplayIndex_M()!=b&&(this.activity.DisplayIndex_M(b),this.OnPropertyChanged("DisplayIndex",b,null,!1))};View.GanttActivityView.prototype.HasParent_M=function(){return null!=this._parentView};
View.GanttActivityView.prototype.Parent_M=function(){return this._parentView};View.GanttActivityView.prototype.IsReadOnly_M=function(b){if(0==arguments.length)return this._isReadOnly;this._isReadOnly!=b&&(this._isReadOnly=b,this.OnPropertyChanged("IsReadOnly",b))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(View.GanttActivityView.prototype,"IndentWidth",{get:function(){return this._indentWidth},set:function(b){this._indentWidth!=b&&(this._indentWidth=b,this.OnPropertyChanged("IndentWidth",
b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Background",{get:function(){return this._background},set:function(b){this._background!=b&&(this._background=b,this.OnPropertyChanged("Background",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"ParentView",{get:function(){return this._parentView},set:function(b){this._parentView!=b&&(this._parentView=b,null!=b?(this.updateParentViewActivityBinding(),this.updateParentViewIndentLevelBinding()):
(this.ParentActivityBinding.Dispose(),this.IndentLevelBinding.Dispose(),this.IndentLevel_M(0)),this.OnPropertyChanged("ParentView",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"ParentActivity",{get:function(){return this.activity.Parent_M()},set:function(b){this.activity.Parent_M()!=b&&(this.activity.Parent_M(b),this.OnPropertyChanged("ParentActivity",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"SelectionFill",
{get:function(){return this._selectionFill},set:function(b){this._selectionFill!=b&&(this._selectionFill=b,this.OnPropertyChanged("SelectionFill",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"SelectionFillOpacity",{get:function(){return this._selectionFillOpacity},set:function(b){this._selectionFillOpacity!=b&&(this._selectionFillOpacity=b,this.OnPropertyChanged("SelectionFillOpacity",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,
"PredecessorIndexString",{get:function(){return this._predecessorIndexString},set:function(b){if(this._predecessorIndexString!=b){var e=this._predecessorIndexString;this._predecessorIndexString=b;!1==this.UpdateActivityDependencies()?(this._predecessorIndexString=e,this.activity.PredecessorIndexString_M(e)):this.OnPropertyChanged("PredecessorIndexString",b)}},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Activity",{get:function(){return this.activity},set:function(){},
enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(b){this._indentLevel!=b&&(this._indentLevel=b,this.UpdateIndentWidth(),this.OnPropertyChanged("IndentLevel",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsParent",{get:function(){return this._isParent},set:function(b){var e=this.TableRow();null!=e&&(!0==b?e.css("font-weight","bolder"):e.css("font-weight",
"normal"));this._isParent!=b&&(this._isParent=b,this.UpdateIndentWidth(),this.OnPropertyChanged("IsParent",b))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsExpanded",{get:function(){return this._isExpanded},set:function(b){this._isExpanded!=b&&(this._isExpanded=b,this.OnExpandedChanged(),this.OnPropertyChanged("IsExpanded",b,null,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"DisplayIndex",{get:function(){return this.activity.DisplayIndex_M()},
set:function(b){this.activity.DisplayIndex_M(b);this.OnPropertyChanged("DisplayIndex",b,null,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"HasParent",{get:function(){return null!=this.ParentView},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Parent",{get:function(){return this.ParentView},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsReadOnly",
{get:function(){return this._isReadOnly},set:function(b){this._isReadOnly!=b&&(this._isReadOnly=b,this.OnPropertyChanged("IsReadOnly",b))},enumerable:!0,configurable:!0}));View.GanttActivityView.prototype.listenChanges=function(){};View.GanttActivityView.prototype.updateParentViewActivityBinding=function(){this.ParentActivityBinding&&this.ParentActivityBinding.Dispose();this.ParentActivityBinding=new Binding(this.ParentView_M(),"Activity",this,"ParentActivity",null,null)};View.GanttActivityView.prototype.updateParentViewIndentLevelBinding=
function(){this.IndentLevelBinding&&this.IndentLevelBinding.Dispose();this.IndentLevelBinding=new Binding(this.ParentView_M(),"IndentLevel",this,"IndentLevel",RadiantQ.Gantt.ValueConverters.ParentViewToIndentConverter,null)};View.GanttActivityView.prototype.UpdateIsRegularTask=function(){this.IsParent_M()||this.activity.IsMilestone_M()?this.IsRegularTask_M(!1):this.IsRegularTask_M(!0)};View.GanttActivityView.prototype.OnChildListChanged=function(){this.IsParent_M(0<this.activity.ChildActivities_M().length);
this.UpdateIsRegularTask()};View.GanttActivityView.prototype.ChildActivities_CollectionChanged=function(b,e){this.OnChildListChanged()};View.GanttActivityView.prototype.UpdateIndentWidth=function(){this.IndentWidth_M(RadiantQ.Gantt.LevelToIndentWidth(this._indentLevel,this._isParent))};View.GanttActivityView.prototype.RefreshPredString=function(b){try{this._ignorePredUpdates=b,this.PredecessorIndexString_M(this.activity.PredecessorIndexString_M())}finally{this._ignorePredUpdates=!1}};View.GanttActivityView.prototype.OnExpandedChanged=
function(){var b=new RadiantQ.Gantt.Utils.DelayUpdates;this.ExpandedChanged.isSubscribed()&&this.ExpandedChanged.raise(this,this);b.Dispose()};View.GanttActivityView.prototype.activity_PropertyChanged=function(b,e){"StartTime"==e.PropertyName||"EndTime"==e.PropertyName||"Assignments"==e.PropertyName?this.OnTimesChanged():"PredecessorIndexString"==e.PropertyName&&this.RefreshPredString(this.Model._dependencies._inCollectionChanged)};View.GanttActivityView.prototype.OnTimesChanged=function(){this.UpdateIsRegularTask()};
View.GanttActivityView.prototype.ConvertToMilestone=function(b,e){b.PreferredStartTime_M(b.StartTime_M());var a=new RadiantQ.Gantt.SetEndTimeAction(e,b,b.StartTime_M(),b.PreferredStartTime_M(),b.EndTime_M(),!1);e.ActionManager.RecordAction(a)};View.GanttActivityView.prototype.ConvertToNormalTask=function(b,e){var a=e.BottomTwoHeaders;null!=a&&(a=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(a[0].BaseTimeScaleType,1),a=b.StartTime_M().addTimeSpan(a),a=new RadiantQ.Gantt.SetEndTimeAction(e,
b,a,b.PreferredStartTime_M(),b.EndTime_M(),!1),e.ActionManager.RecordAction(a))};View.GanttActivityView.prototype.ReparentView=function(b){b!=this.ParentView_M()&&(this.ParentView_M(null),this.ParentView_M(b),null!=b&&!1==b.IsExpanded_M()&&(b.IsExpanded_M(!0),b.IsExpanded_M(!1)))};View.GanttActivityView.prototype.UpdateActivityDependencies=function(){if(!this._ignorePredUpdates){var b=this.PredecessorIndexString_M();this.UpdateActivityDependency(this.Model,this.activity,b,RadiantQ.Gantt.Model.NewDependencyAddScenarioType.UserGridEdit);
this.RefreshPredString(!0)}};View.GanttActivityView.prototype.UpdateActivityDependency=function(b,e,a,c){c=new ObservableCollection;var d=new ObservableCollection,g=new ObservableCollection,h=RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(a,b.LagStringUnitsInHours_M(),c,d,g,h);if(h)return alert(h),!1;a=new RadiantQ.Gantt.Utils.DelayUpdates;b.Dependencies_M().ClearDependencies(e);for(var h=new RadiantQ.Gantt.Utils.DelayUpdates,f=0;f<c.length;f++){var k=b.GetActivityById(c[f]);null!=
k&&b.CanAddNewDependency(k,e,null,d[f])&&b.CreateNewDependency(k,e,d[f],g[f])}h.Dispose();a.Dispose()};View.GanttActivityView.prototype.toString=function(){var b=this.ParentActivity_M();return""+this.activity.ActivityName_M()+", Parent: "+(b?b.ActivityName_M():"null")+", Indent:"+this.IndentLevel_M()+", IsParent:"+this.IsParent_M()+""};View.GanttActivityView.prototype.Dispose=function(){View.IActivityView.prototype.Dispose.call(this);this._childActsCollChangedHandler&&(this._childActsCollChangedHandler.Dispose(),
this._childActsCollChangedHandler=null);this._actPropertyChangedHandler&&(this._actPropertyChangedHandler.Dispose(),this._actPropertyChangedHandler=null);this.IsTaskReadOnlyBinding&&(this.IsTaskReadOnlyBinding.Dispose(),this.IsTaskReadOnlyBinding=null);this.ParentActivityBinding&&(this.ParentActivityBinding.Dispose(),this.ParentActivityBinding=null);this.IndentLevelBinding&&(this.IndentLevelBinding.Dispose(),this.IndentLevelBinding=null)};View.GanttFlatActivitiesList=function(b,e){RadiantQ.RQ_CollectionChangeNotifier.apply(this,
arguments);this._dictActivityVsView=new RadiantQ.Gantt.Dictionary;this._dictChildActivityViews=new RadiantQ.Gantt.Dictionary;this.model=b;this.gantt=e;this._collectionChangedHandler&&this._collectionChangedHandler.Dispose();this._collectionChangedHandler=this.CollectionChanged.subscribe(this.OnCollectionChanged,this);this.RowVisiblityChanged=new ObjectEvent("RowVisiblityChanged");this._ignoreRemove=!1;var a=this;this.view_ExpandedChanged=function(b,d){a.HoldtriggeringChange=!0;!1==b._isExpanded?a.ClearHierarchyFromList(b):
a.AddHierarchyToList(b);a.gantt.RefreshDisplayIndex();a.OnRowVisiblityChanged();a.HoldtriggeringChange=!1};this.model&&(this.CreateFromModel(),this.ListenToModelChanges());this._init=!0};View.GanttFlatActivitiesList.prototype=new RadiantQ.RQ_CollectionChangeNotifier;View.GanttFlatActivitiesList.prototype.OnCollectionChanged=function(b,e){if("remove"==b.type||"replaceAll"==b.type)for(var a=0;a<e.items.length;a++)this.UnsubscribeToActivityView(e.items[a]);if("insert"==b.type)for(a=0;a<e.items.length;a++)this.SubscribeToActivityView(e.items[a]);
this._init&&this.gantt.RefreshDisplayIndex()};View.GanttFlatActivitiesList.prototype.model_ChildCollectionChanged=function(b,e){if("insert"==e.type)for(var a=e.NewItems,c=0;c<a.length;c++){var d=a[c],d=this._dictActivityVsView[d.id];this._updateChildsOnAdd(d,this._dictActivityVsView[b.id])}else if("remove"==e.type)for(a=e.OldItems,c=0;c<a.length;c++)d=a[c],(d=this._dictActivityVsView[d.id])&&this._updateChildsOnRemove(d)};View.GanttFlatActivitiesList.prototype.GetActivityViewByID=function(b){b=this.model.GetActivityById(b);
return this.GetIActivityView(b)};View.GanttFlatActivitiesList.prototype.CreateFromModel=function(){this.clear();if(null!=this.model)for(var b=0;b<this.model._activities.length;b++)!1==this.model._activities[b].IsFilteredOut_M()&&this.AddActivities(this.model._activities[b],null,this.model,0)};View.GanttFlatActivitiesList.prototype.AddActivities=function(b,e,a,c){e=new View.GanttActivityView(b,e,a,this.gantt);this.add(e);if(e.IsParent_M()&&b.IsExpanded_M()){b=b.ChildActivities_M();for(var d=0;d<b.length;d++)!1==
b[d].IsFilteredOut_M()&&this.AddActivities(b[d],e,a,c+1)}};View.GanttFlatActivitiesList.prototype.model_NewActivityAdded=function(b,e){var a=e.NewActivity_M(),c=0;if(0<a.ChildActivities_M().length)throw"Encountered a newly added activity which already has children. This is not supported.";var d=null,g=e.Parent_M();if(null!=g){d=this[g];if(null==d)throw"Encountered a new activity whose parent activity is not already in the view.";c=d._indentLevel+1}this.AddActivities(a,d,this.model,c)};View.GanttFlatActivitiesList.prototype._newActivityAddedHandler=
null;View.GanttFlatActivitiesList.prototype._actsChildCollectionChangedHandler=null;View.GanttFlatActivitiesList.prototype.ListenToModelChanges=function(){this._newActivityAddedHandler=this.model.NewActivityAdded.subscribe(this.model_NewActivityAdded,this);this._actsChildCollectionChangedHandler=this.model._activities.ChildCollectionChanged.subscribe(this.model_ChildCollectionChanged,this)};View.GanttFlatActivitiesList.prototype.remove=function(b){this[b].DisplayIndex_M(-1);RadiantQ.RQ_CollectionChangeNotifier.prototype.remove.apply(this,
arguments)};View.GanttFlatActivitiesList.prototype.Move=function(b,e,a){var c=new RadiantQ.Gantt.Utils.DelayUpdates,d,g;try{this._ignoreRemove=!0;if(a>b){d=b;for(var h=0;h<e;h++){var f=this[b];this.remove(b);this.insert(a-1,f)}g=a-e}else{d=a;for(h=0;h<e;h++)f=this[b+h],this.remove(b+h),this.insert(a+h,f);g=a}this.gantt.Model.UpdateSortOrderFrom(this[d].activity);return g}finally{this._ignoreRemove=!1}c.Dispose()};View.GanttFlatActivitiesList.prototype.ClearHierarchyFromList=function(b){var e=this.indexOf(b),
a=b.activity._indentLevel,c=this.length,d=this._getLastChildActivityViewIndex(b),d=d>e?d:e;for(d++;d<c;){var g=this[d];if(g._parentView==b||g.activity._indentLevel>a){var h=-1;0<g.activity._childActivities.length&&(h=this._getLastChildActivityViewIndex(g));d=h>d?h:d;d++}else break}e++;this.splice(e,d-e);b.activity.IsExpanded_M(!1)};View.GanttFlatActivitiesList.prototype.ClearHierarchyFromListRecursive=function(b,e){if(b.activity.IsExpanded_M()){var a=this.length;for(e++;e<a;)if(a=this[e],a.ParentView_M()==
b)this.ClearHierarchyFromListRecursive(a,e),this.RemoveAndDispose(e),a=this.length;else break}};View.GanttFlatActivitiesList.prototype.RemoveAndDispose=function(b){var e=0,e="number"===f.type(b)?b:this.indexOf(b);this.remove(e)};RadiantQ.Gantt.addMethod(View.GanttFlatActivitiesList.prototype,"AddHierarchyToList",function(b){b.activity.IsExpanded_M(!0);this.AddHierarchyToList(b,{value:-1})});RadiantQ.Gantt.addMethod(View.GanttFlatActivitiesList.prototype,"AddHierarchyToList",function(b,e){-1==e.value&&
(e.value=this.indexOf(b));if(b.activity.IsExpanded_M()){b.Activity_M().ChildActivities_M();var a=[],c=e.value+1;this.GetHierarchyToListRecursive(b,a);0<a.length&&this.merge(c,a)}});View.GanttFlatActivitiesList.prototype.GetHierarchyToListRecursive=function(b,e){var a=b.activity._childActivities;if(0<a.length)for(var c=0;c<a.length;c++){var d=a[c];if(!1==d.IsFilteredOut_M()){var g=new RadiantQ.Gantt.View.GanttActivityView(d,b,this.model,this.gantt);e.push(g);!0==d._isExpanded&&0<d._childActivities.length&&
this.GetHierarchyToListRecursive(g,e)}}return e};View.GanttFlatActivitiesList.prototype.GetIActivityView=function(b){return this._dictActivityVsView.GetItemByKey(b)};View.GanttFlatActivitiesList.prototype.clear=function(b){for(b=0;b<this.length;b++)this.UnsubscribeToActivityView(this[b]),RadiantQ.RQ_CollectionChangeNotifier.prototype.splice.apply(this,b,1)};View.GanttFlatActivitiesList.prototype.Contains=function(b){return this._dictActivityVsView.Contains(b)};View.GanttFlatActivitiesList.prototype.SubscribeToActivityView=
function(b){this._dictActivityVsView.Add(b.activity,b);this.actViewExpandedChangedHandlers||(this.actViewExpandedChangedHandlers={});this.actViewExpandedChangedHandlers[b.activity.id]&&this.actViewExpandedChangedHandlers[b.activity.id].Dispose();var e=b.ExpandedChanged.subscribe(this.view_ExpandedChanged);this.actViewExpandedChangedHandlers[b.activity.id]=e;this._updateChildsOnAdd(b)};View.GanttFlatActivitiesList.prototype.UnsubscribeToActivityView=function(b){this._dictActivityVsView.Remove(b.activity);
this.actViewExpandedChangedHandlers[b.activity.id]?(this.actViewExpandedChangedHandlers[b.activity.id].Dispose(),delete this.actViewExpandedChangedHandlers[b.activity.id]):b.ExpandedChanged.unsubscribe(this.view_ExpandedChanged);this._updateChildsOnRemove(b)};View.GanttFlatActivitiesList.prototype._updateChildsOnAdd=function(b,e){if(e=e||b.ParentView_M()){var a=this._dictChildActivityViews[e.activity.id];a?a.push(b):this._dictChildActivityViews.Add(e.activity,[b])}};View.GanttFlatActivitiesList.prototype._updateChildsOnRemove=
function(b){var e=b.ParentView_M();if(e){var a=this._dictChildActivityViews[e.activity.id];a&&(0==a.length?this._dictChildActivityViews.Remove(e.activity):0<a.length&&(b=RQArray.prototype.indexOf.call(a,b),a.splice(b,1)))}};View.GanttFlatActivitiesList.prototype._getLastChildActivityViewIndex=function(b){if(!b.activity.IsExpanded_M())return-1;for(;null!=b;){var e=this._dictChildActivityViews[b.activity.id];if(e&&0<e.length)b=e[e.length-1]||null;else break}return this.indexOf(b)};View.GanttFlatActivitiesList.prototype.OnRowVisiblityChanged=
function(){this.RowVisiblityChanged.isSubscribed()&&this.RowVisiblityChanged.raise(this,EventArgs.Empty)};View.GanttFlatActivitiesList.prototype.RefreshDisplayIndexOfChildren=function(){this.RefreshDisplayIndexOfChildrenPrivate()};View.GanttFlatActivitiesList.prototype.RefreshDisplayIndexOfChildrenPrivate=function(){for(var b=-1,e=0;e<this.length;e++)b++,this[e].DisplayIndex_M(b)};View.GanttFlatActivitiesList.prototype.VisibleIndexOf=function(b){return b.DisplayIndex_M()};View.GanttFlatActivitiesList.prototype.Dispose=
function(){this._newActivityAddedHandler&&(this._newActivityAddedHandler.Dispose(),this._newActivityAddedHandler=null);this._actsChildCollectionChangedHandler&&(this._actsChildCollectionChangedHandler.Dispose(),this._actsChildCollectionChangedHandler=null);this._collectionChangedHandler&&(this._collectionChangedHandler.Dispose(),this._collectionChangedHandler=null);this.CollectionChanged.unsubscribe(this.OnCollectionChanged,this);this.IsTaskReadOnlyBinding&&this.IsTaskReadOnlyBinding.Dispose();for(var b=
0;b<this.length;b++){var e=this[b];e.Dispose();this.actViewExpandedChangedHandlers&&this.actViewExpandedChangedHandlers[e.activity.id]&&(this.actViewExpandedChangedHandlers[e.activity.id].Dispose(),delete this.actViewExpandedChangedHandlers[e.activity.id])}RQArray.prototype.splice.call(this,0,this.length);this.actViewExpandedChangedHandlers={}};View.GanttFlatDependenciesList=function(b,e,a){RadiantQ.RQ_CollectionChangeNotifier.call(this);this.model=b;this.activityViewsList=e;this.gantt=a;this._depViewByActivity=
{};this.model&&(this._collectionChangedHandler&&this._collectionChangedHandler.Dispose(),this._collectionChangedHandler=this.model._dependencies.CollectionChanged.subscribe(this.model_NewDependencyAdded,this),this.CreateFromModel(b))};View.GanttFlatDependenciesList.prototype=new RadiantQ.RQ_CollectionChangeNotifier;View.GanttFlatDependenciesList.prototype.CreateFromModel=function(b){for(var e=0;e<b._dependencies.length;e++)this.add(this.CreateNew(b._dependencies[e]))};View.GanttFlatDependenciesList.prototype.DependencyViewByActivityID_M=
function(){return this._depViewByActivity};RadiantQ.CanUseDefineProperty&&Object.defineProperty(View.GanttFlatDependenciesList.prototype,"DependencyViewByActivityID",{get:function(){return this._depViewByActivity}});View.GanttFlatDependenciesList.prototype._depViewByActivity={};View.GanttFlatDependenciesList.prototype.CreateNew=function(b){var e=new RadiantQ.Gantt.View.GanttDependencyView(b,this.activityViewsList,this.gantt),a=b._fromActivity.ID_M();b=b._toActivity.ID_M();var c=this._depViewByActivity[a];
c?-1==c.indexOf(e)&&c.push(e):(c=new RQArray,c.push(e),this._depViewByActivity[a]=c);(a=this._depViewByActivity[b])?-1==a.indexOf(e)&&a.push(e):(a=new RQArray,a.push(e),this._depViewByActivity[b]=a);return e};View.GanttFlatDependenciesList.prototype.FindView=function(b){for(var e=0;e<this.length;e++)if(this[e].Dependency==b)return e;return-1};View.GanttFlatDependenciesList.prototype.model_NewDependencyAdded=function(b,e){if("remove"==e.type||"replaceAll"==e.type)for(var a=0;a<e.OldItems.length;a++){var c=
e.OldItems[a],d=this.FindView(c);if(-1!=d){var g=this[d];this.splice(d,1);var h=c._fromActivity.ID_M(),f=this._depViewByActivity[h];f&&(d=f.indexOf(g),-1!=d&&f.splice(d,1),0==f.length&&delete this._depViewByActivity[h]);c=c._toActivity.ID_M();if(h=this._depViewByActivity[c])d=h.indexOf(g),-1!=d&&h.splice(d,1),0==h.length&&delete this._depViewByActivity[c]}}if("insert"==e.type)for(a=0;a<e.NewItems.length;a++)c=e.NewItems[a],g=this.CreateNew(c),this.add(g)};View.GanttFlatDependenciesList.prototype.Dispose=
function(){for(var b=0;b<this.length;b++)this[b].Dispose();this._collectionChangedHandler&&(this._collectionChangedHandler.Dispose(),this._collectionChangedHandler=null);this.model&&(this.model.Dependencies&&this.model.Dependencies.CollectionChanged.unsubscribe(this.model_NewDependencyAdded,this),this.model._dependencies&&this.model._dependencies.CollectionChanged.unsubscribe(this.model_NewDependencyAdded,this),this.model.NewActivityAdded&&this.model.NewActivityAdded.unsubscribe(this.model_NewActivityAdded,
this));this.activityViewsList&&(this.activityViewsList=null)}})(jQuery);
(function(f){RadiantQ.Gantt.OverlappedTasksRenderingOptimization={None:"None",ShrinkHeight:"ShrinkHeight"};Array.max=function(b,e){var a;return null!=e||e?(f.each(b,function(b,d){if(0==b||a<d.options[e])a=d.options[e]}),a):Math.max.apply(Math,b)};Array.min=function(b,e){var a;return null!=e?(f.each(b,function(b,d){if(0==b||a>d.options[e])a=d.options[e]}),a):Math.min.apply(Math,b)};FindByPropertyValueInArray=function(b,e,a){var c=-1;f.each(b,function(d,g){b[e]===a&&(c=d)});return c};RemoveByValueInArray=
function(b,e){for(var a=0;a<b.length;a++)if(b[a]===e){b.splice(a,1);break}};ContainsValueInArray=function(b,e){for(var a=0;a<b.length;a++)if(b[a]==e)return!0;return!1};FirstOrDefaultEndityInArray=function(b,e){for(var a=0;a<b.length;a++)if(b[a].options.Data===e)return b[a];return null};OverlappingBlock=function(b){b.OverlappingBlock=this;this.StartTime=b.options.StartTime;this.EndTime=b.options.EndTime;var e=b.options.GanttChart.options.CustomOverlappingBlockFn;e&&"function"==typeof e&&e(this,b);
this.entities=[];this.entities.push(b);this.IsOverlappingWithExcludeCurrentItem=function(a){for(var b=0;b<this.entities.length;b++){var d=this.entities[b];if(d!=a&&(d.options&&(d=d.options),a.StartTime>=d.StartTime&&a.StartTime<d.EndTime||a.EndTime>d.StartTime&&a.EndTime<=d.EndTime||d.StartTime>a.StartTime&&d.EndTime<a.EndTime))return!0}return!1};this.IsOverlapping=function(a,b){var d=a.options,d=a.OverlappingBlock?a.OverlappingBlock:new OverlappingBlock(a),g=!1,h=a.options.GanttChart.options.AreTasksOverlappingCallBack;
if(b)return d.StartTime>=this.StartTime&&d.StartTime<this.EndTime?g=!0:d.EndTime>this.StartTime&&d.EndTime<=this.EndTime?g=!0:this.StartTime>d.StartTime&&this.EndTime<d.EndTime&&(g=!0),h&&"function"==typeof h&&(g=h(this.entities[0],a,g)),g;for(index=0;index<this.entities.length;index++){var f=this.entities[index],k=f.options,k=f.OverlappingBlock?f.OverlappingBlock:new OverlappingBlock(f);if(a.options.Parent.element.options.Data==f.options.Parent.element.options.Data)return d.StartTime>=k.StartTime&&
d.StartTime<k.EndTime?g=!0:d.EndTime>k.StartTime&&d.EndTime<=k.EndTime?g=!0:k.StartTime>d.StartTime&&k.EndTime<d.EndTime&&(g=!0),e&&"function"==typeof e&&(d.StartTime>this.StartTime&&d.StartTime<this.EndTime||d.EndTime>this.StartTime&&d.EndTime<this.EndTime)&&(g=!0),h&&"function"==typeof h&&(g=h(f,a,g)),g}return!1};this.AddEntity=function(a){this.entities.push(a);this.UpdateTimeLength()};this.RemoveEntity=function(a){(a=this.entities.Remove(a))&&0<this.entities.length&&this.UpdateTimeLength();return a};
this.UpdateTimeLength=function(){if(0<this.entities.length){for(var a=this.StartTime,b=this.EndTime,d=0;d<this.entities.length;d++){var g=this.entities[d];g.OverlappingBlock.StartTime<a&&(a=g.OverlappingBlock.StartTime);g.OverlappingBlock.EndTime>b&&(b=g.OverlappingBlock.EndTime)}this.StartTime=a;this.EndTime=b}};this.ComputeIndicesAndHeight=function(){var a=this.GetBlocksFromEntities();for(i=0;i<a.length;i++){var b=a[i];for(index=0;index<b.entities.length;index++){var d=b.entities[index],g=RadiantQ.FlexyGantt.TaskItemControl;
0==d.Height&&(d.Height=d.element.height());var g=d.Height-2*g.MarginForBars-(g.TaskBar_BorderTopWidth+g.TaskBar_BorderBottomWidth),e=a.length>g&&g?g:a.length;void 0!=d.element.attr("heightSetBySrc")||isNaN(parseInt(d.element[0].style.height))?d._updateTaskItem(i,g/e,1<a.length,e):d._updateTaskItem(i,parseInt(d.element[0].style.height),1<a.length)}}};this.GetBlocksFromEntities=function(){for(var a=[],b=0;b<this.entities.length;b++){for(var d=this.entities[b],g=!1,e=0;e<a.length;e++){var f=a[e];if(!1==
f.IsOverlapping(d,!1)){f.AddEntity(d);g=!0;break}}!1==g&&a.push(new OverlappingBlock(d))}return a};this.GetRowCount=function(){return this.GetBlocksFromEntities().length};return this};window.OverlappingBlock=OverlappingBlock})(jQuery);
(function(f,b){var e=function(a,b){for(var g=a.replace(/\\\}/g,"__CURLY__").replace(/\\#/g,"__SHARP__").replace(/\$\{([^}]*)\}/g,"#=($1)#").split("#"),e="var x=",f=0;f<g.length;f++){var k;k=g[f];k=0===f%2?"'"+k.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'":"="===k.charAt(0)?"+("+k.substring(1)+")+":";"+k+";x+=";e+=k}e+=";return x;";e=e.replace(/__CURLY__/g,"}").replace(/__SHARP__/g,"#");g=new Function("data",e);return b?g(b):
g};e.hasValueInWindow=function(a){var d;d=window;a=a.split(".");for(var g=0;g<a.length;g++)"undefined"!=typeof d&&(d=d[a[g]+"_M"]?d[a[g]+"_M"]():d[a[g]]);d=!0==b.isFunction(d)?!0:void 0==d?!1:void 0;return!1==d?!1:!0};e.checkProperty=function(a){return" "==a?!0:!1};e.getterCache={};e.getter=function(a,b){var g=null;null==e.getterCache[a]&&(g=""==a?"return d;":" if(d."+a+" != undefined)  if(typeof(d."+a+") ==='function')   return d."+a+"(); else return d."+a+";else if("+e.hasValueInWindow(a)+" ){ if(typeof "+
a+" === 'function')    return "+a+"(d); else return "+a+";}else return null;",g=Function("d",g),e.getterCache[a]=g);g=e.getterCache[a];return b?g(b):g};e.setterCache={};e.setter=function(a,b,g){var h=null;null==e.setterCache[a]&&(h=" if(d."+a+" != undefined) if(typeof(d."+a+") ==='function') d."+a+"(value);else d."+a+"= value;else if("+e.hasValueInWindow(a)+" ){ if(typeof "+a+" === 'function') "+a+"(d,value); else "+a+"=value;}else d."+a+"= value;",h=Function("d","value",h),e.setterCache[a]=h);h=
e.setterCache[a];return b?h(b,g):h};f.Default={};f.Default.Template={};var a=function(a){var b=/name/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'},
a=function(a){var b=/name/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'};
f.Template=e;f.Default.Template.ProjectGanttExpandableTextBlockTemplate=function(a){var b=/data.Activity.ActivityName/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${data.Activity_M().ActivityName_M()}</div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${data.Activity_M().ActivityName_M()}</div>'};f.Default.Template.FlexyGanttExpandableTextBlockTemplate=
a;f.Default.Template.ProjectGanttExpandableTextboxEditor=function(a){var b=/data.Activity.ActivityName/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text"><input data-bind=value:Activity_M().ActivityName_M /></div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text"><input data-bind=value:Activity_M().ActivityName_M /></div>'};
f.Default.Template.FlexyGanttExpandableTextBoxEditor=function(a){var b=/name/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text"><input data-bind="value:name"/></div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text"><input data-bind="value:name"/></div>'};
f.Gantt.ExpanderOnclick=function(a,d){var g=b(a).closest("tr.rq-grid-row"),e=g.closest("table.ui-grid-body-table").find("tbody").data("VWGrid"),g=e.GetDataFromRow(g);if(g instanceof f.FlexyGantt.FlexyNodeData)g.HierarchicalItem._forceToCreateNewChildList=!0,g.HierarchicalItem.IsExpanded(!g.HierarchicalItem.IsExpanded()),g.HierarchicalItem._forceToCreateNewChildList=!1,e.RefreshItem(g);else{var m=new f.Gantt.ExpandCollapseActivityViewAction(g.GC,g,!g.IsExpanded_M());g.GC.ActionManager.RecordAction(m)}e.InEditMode&&
e.closeCell();void 0!=d.stopPropagation&&d.stopPropagation()}})(RadiantQ,jQuery);
(function(f,b){function e(a,b,d,g,e){var f=this;f.data=g;f.Value=d;f.getMethodName=a.data("getvaluename")||"value";f.setMethodName=a.data("setvaluename")||"value";f.$elem=a;f.role=b;f.UpdatedValue=null;f.getOptions=function(a){return a.data("options")||{}};f.SetValueToElement=function(){if(null==this.data&&!1==this.initChange)return null;var a=this.Value.getter(g);if(!1==this.compareObject(this.UpdatedValue,a))this.$elem[this.role](this.setMethodName,a)};this.compareObject=function(a,b){return null!=
a&&null!=b&&a.equals&&b.equals?a.equals(b):a==b};f.initChange=!1;var k=this.getOptions(a);g&&(k[e]=function(){!1==f.initChange&&(f.initChange=!0,f.UpdatedValue=f.GetValueToElement(),!1==f.compareObject(f.UpdatedValue,d.getter(g))&&d.setter(g,f.UpdatedValue),f.initChange=!1)});a[b](k);f.initChange=!0;f.SetValueToElement();f.initChange=!1}e.prototype.GetValueToElement=function(){return this.$elem[this.role](this.getMethodName)};f.Binder=function(){};Binder=f.Binder;f.Binder.value=function(a,b,d,g){var h=
a.data("valueupdate")||"change",f=null;d.getter(g);a.val(d.getter(g));b?f=new e(a,b,d,g,h):a.bind(h,function(){var b=a.val();d.setter(g,b)});this.refresh=function(){if(f)f.SetValueToElement();else{var b=d.getter(g);a.val()!=b&&a.val(b)}}};f.Binder.text=function(a,b,d,g){this.element=a;this.value=d;this.data=g;this.init=function(){this.element.text(this.value.getter(this.data))};this.refresh=function(){this.init()}};Binder.attr=function(a,c,d,g,e){b(a).attr(e,d.getter(g));this.refresh=function(){b(a).attr(e,
d.getter(g))}};Binder.style=function(a,c,d,g,e){b(a).css(e,d.getter(g));this.refresh=function(){b(a).css(e,d.getter(g))}};f.Bind=function(a,c){this.data=c;this.bindings=[];this.bindAllElem=function(a){var b=this.bindElement(a);b&&(this.bindings=b.concat(this.bindings));b=a.childNodes;b=a.children;a=[];for(var c=0;c<b.length;c++)a[c]=b[c];for(c=0;c<a.length;c++)this.bindAllElem(a[c])};this.getValue=function(a,b){return a&&b.value?(getter=f.Template.getter(b.value),setter=f.Template.setter(b.value),
value={getter:getter,setter:setter,field:b.value}):null};this.createBindings=function(a,c,d){var e=[];a=b(a);var l=Binder[d.key],n=d.value;!1==n instanceof Array&&(n=[d]);for(var p=0;p<n.length;p++){var q=n[p],r=this.getValue(this.data,q),l=Binder[q.key]?Binder[q.key]:Binder[d.key];if(null==l)return;l=new l(a,c,r,this.data,q.key);l.init&&l.init(a,c,r,this.data,q.key);q=q.value.split(".");r=null;1<q.length?(l.property=q.pop(),q=q.join("."),r=f.Template.getter(q,this.data)):(r=this.data,l.property=
q[0]);r&&l.refresh&&r.PropertyChanged&&(l.PropertyName=l.property,q=r.PropertyChanged.subscribe(function(a,b){var c=b.PropertyName;if(-1!=c.indexOf("_M")||-1!=this.PropertyName.indexOf("_M"))c=c.replace(/_M/ig,""),this.PropertyName=this.PropertyName.replace(/_M/ig,"");this.PropertyName==c&&this.refresh(a,b)},l),l.destroyEvent=q);e.push(l)}return e};this.bindElement=function(a){var b=a.getAttribute("data-bind"),c=a.getAttribute("data-role"),d=[];if(b)for(var b=this.parseBind(b),e=0;e<b.length;e++)var f=
this.createBindings(a,c,b[e]),d=d.concat(f);return d};this.parseBind=function(a){var b=[],c,d,e,f,p;a=a.replace(/\s/g,"");p=a.match(/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g);a=0;for(c=p.length;a<c;a++)d=p[a],e=d.indexOf(":"),f=d.substring(0,e),d=d.substring(e+1),"{"==d.charAt(0)&&(d=this.parseBind(d)),b.push({key:f,value:d});return b};var d=a[0];a.bindObject&&unbind(a);this.bindAllElem(d);d.bindObject=this.bindings};f.Unbind=function(a){var b=a[0].bindObject;if(b){for(var d=0;d<b.length;d++)b[d].destroyEvent&&
b[d].destroyEvent.Dispose(),b[d].destroy&&b[d].destroy();delete a[0].bindObject}}})(RadiantQ,jQuery);var RQStyle=RadiantQ.Gantt.DefaultStyles;
(function(f,b){var e=RadiantQ.Template||kendo.template;f.ScaleRendererBase={options:{name:"ScaleRendererBase",ViewStartTime:null,ViewEndTime:null,headerInfo:null,BaseTimeUnitWidth:25,BaseTimeScaleType:null,timeUnits:[],GanttChart:null,ViewWidth:null,WorkTimeSchedule:null},guid:function(){var a="",b,d,g=Math;for(b=0;32>b;b++){d=16*g.random()|0;if(8==b||12==b||16==b||20==b)a+="-";a+=(12==b?4:16==b?d&3|8:d).toString(16)}return a},_requiresTimeUnitText:!0,_floorToHour:function(a){return new Date(a.getFullYear(),
a.getMonth(),a.getDate(),a.getHours(),0,0)},_floorToMinute:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0)},_floorWidth:function(a,b){a+=b;var d=Math.floor(a);return{FlooredWidth:d,Residue:a-d}},drawHourHeader:function(a,b,d){var g=RadiantQ.Gantt,e=Date.CultureInfo.formatPatterns.shortDate;this.element.show();var f=0,k=0;for(b=b.clone();0>=b.compareTo(d);){var l=1;0<b.getMinutes()&&(l=1-b.getMinutes()/60);try{var f={Value:f},n={Value:k};if(!1==this.AddTimeUnit(b,
l,g.TimeScaleType.Hours,a,g.TimeScaleType.Hours,b.toString("HH"),b.toString(e)+" "+b.toString("htt"),f,n))break;b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),0,0);b=b.clone().addHours(1)}finally{f=f.Value,k=n.Value}}},drawDayHeader:function(a,b,d){var g=RadiantQ.Gantt,e=Date.CultureInfo.formatPatterns.shortDate,f=0,k=0,l=new Date,k=0;this.element.show();for(l=b.clone();0>=l.compareTo(d);){b=1;var n=l.clone().clearTime();0>n.compareTo(l)&&(b=1-(new RQTimeSpan(l-n)).getTotalMinutes()/
1440);try{var f={Value:f},p={Value:k};if(!1==this.AddTimeUnit(l,b,g.TimeScaleType.Days,a,g.TimeScaleType.Days,l.getDate(),l.toString(e),f,p))break;l=n.clone().addDays(1)}finally{f=f.Value,k=p.Value}}},UpdateTimeUnits:function(){this.options.timeUnits.length=0;var a=this.options;if(!(null==a.ViewStartTime||null==a.ViewEndTime||null==a.headerInfo||0<=a.ViewStartTime.compareTo(a.ViewEndTime))){var c=RadiantQ.Gantt,d=RadiantQ.Gantt.Utils,g=a.ViewStartTime.clone(),e=a.ViewEndTime.clone(),f=Date.CultureInfo.formatPatterns.shortDate,
k=RQTimeSpan.Zero_M(),l=[],n=0,k=0;switch(a.headerInfo.Type){case c.TimeScaleType.Days:this.drawDayHeader(l,g,e);break;case c.TimeScaleType.Weeks:var k=new RQTimeSpan(e.clone()-g.clone()),e=k.getTotalDays(),p=g.clone();this.element.show();for(k=0;0<e;){var q=d.TimeComputingUtils.GetRemainingDaysInWeek(p),p=p.clone().addDays(q-7);23==p.getHours()&&(p=new Date(p.getFullYear(),p.getMonth(),p.getDate()+1,1,0,0));q=q>e?e:q;try{var r={Value:n},t={Value:k};if(!1==this.AddTimeUnit(p,q,c.TimeScaleType.Days,
l,c.TimeScaleType.Weeks,p.toString("MMMM dd, yyyy"),p.toString(f)+" - "+p.clone().addDays(6).toString(f),r,t))break}finally{n=r.Value,k=t.Value}e-=q;r=p.clone().addDays(7);23==r.getHours()&&(r=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1,1,0,0));p=r}break;case c.TimeScaleType.Months:k=new RQTimeSpan(e-g);e=k.getTotalDays();p=g.clone();this.element.show();for(k=0;0<e;){q=d.TimeComputingUtils.GetRemainingDaysInMonth(p);q=q>e?e:q;try{if(r={Value:n},t={Value:k},!1==this.AddTimeUnit(p,q,c.TimeScaleType.Days,
l,c.TimeScaleType.Months,p.toString("MMMM yyyy"),(new Date(p.getFullYear(),p.getMonth(),1)).toString(f)+" - "+(new Date(p.getFullYear(),p.getMonth()+1,0,23,59,59)).toString(f),r,t))break}finally{n=r.Value,k=t.Value}e-=q;p=d.TimeComputingUtils.GetStartOfNextMonth(p.clone())}break;case c.TimeScaleType.Years:k=new RQTimeSpan(e-g);e=k.getTotalDays();p=g.clone();this.element.show();for(k=0;0<e;){q=d.TimeComputingUtils.GetRemainingDaysInYear(p.clone());q=q>e?e:q;try{if(r={Value:n},t={Value:k},!1==this.AddTimeUnit(p.clone(),
q,c.TimeScaleType.Days,l,c.TimeScaleType.Years,p.toString("yyyy"),p.toString(f)+" - "+p.clone().addYears(1).addDays(-1).toString(f),r,t))break}finally{n=r.Value,k=t.Value}e-=q;p=d.TimeComputingUtils.GetStartOfNextYear(p.clone())}break;case c.TimeScaleType.Minutes:k=new RQTimeSpan(e-g);e=k.getTotalMinutes();this.element.show();for(d=k=0;d<e;d++)try{if(r={Value:n},t={Value:k},q=g.clone().addMinutes(d),!1==this.AddTimeUnit(q,1,c.TimeScaleType.Minutes,l,c.TimeScaleType.Minutes,q.toString("mm"),q.toString(f)+
" "+q.toString("htt"),r,t))break}finally{n=r.Value,k=t.Value}break;case c.TimeScaleType.Hours:this.drawHourHeader(l,g,e);break;case c.TimeScaleType.Custom:if(null==this.options.headerInfo.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in a TimeScaleHeaderDefinition of type TimeScaleType.Custom.";a=this.options.headerInfo.CustomTimeScaleTypeHint.EquivalentType;b(this.element).show();n=k=0;q=g.clone();g=new RadiantQ.Gantt.ProvideCustomTimeIntervalsEventArgs(q.clone(),e.clone());this.options.headerInfo.ProvideCustomTimeIntervals.raise(this,
g);0==g.TimeIntervals.length&&g.TimeIntervals.push(e.clone());g.TimeIntervals.splice(0,0,q.clone());for(d=0;d<g.TimeIntervals.length;d++){var q=g.TimeIntervals[d],q=a<c.TimeScaleType.Hours?this._floorToMinute(q):q,s=d<g.TimeIntervals.length-1?g.TimeIntervals[d+1]:e.clone(),s=a<c.TimeScaleType.Hours?rqTCUtils.GetTimeSpan(q,this._floorToMinute(s)):rqTCUtils.GetTimeSpan(q,s);if(s<RQTimeSpan.Zero_M())throw"Custom time interval entries are out of order.";a>c.TimeScaleType.Hours&&(a=c.TimeScaleType.Hours);
s=a>=c.TimeScaleType.Hours?s.getTotalHours():s.getTotalMinutes();try{r={Value:n},t={Value:k},p=this.AddTimeUnit(q,s,a,l,a,q.getDate().toString(),q.toString(f)+" "+q.toString("htt"),r,t)}finally{n=r.Value,k=t.Value}q=l[l.length-1];this.options.headerInfo.CustomTimeScaleTypeHint.EquivalentType>c.TimeScaleType.Days&&(q.IsWorkingTime=!0);if(!1==p)break}}this.options.timeUnits=l}},GetWorkTimeSchedule:function(){return this.options.WorkTimeSchedule},AddTimeUnit:function(a,c,d,g,e,f,k,l,n){var p=this.options,
q=RadiantQ.Gantt,r=RadiantQ.Gantt.Utils,t=p.headerInfo,s=f,w=null;f=!1;this._requiresTimeUnitText&&t.ProvideCustomHeaderText.isSubscribed()&&(f=!0);if(!f&&null!=t._textFormat&&""!=t._textFormat)if(-1!=t._textFormat.indexOf("|"))w=t._textFormat,s=" ";else try{s=a.toString(t.TextFormat)}catch(u){}q=new q.TimeUnit;q.Text=s;q.TextFormat=w;q.ToolTipText=k;q.Type=e;c=this._floorWidth(r.TimeComputingUtils.ConvertToUnitsOfBaseType(t.BaseTimeScaleType,d,c)*p.BaseTimeUnitWidth,n.Value);q.Width=c.FlooredWidth;
n.Value=c.Residue;q.IsWorkingTime=r.TimeComputingUtils.IsWorkingTime(a,e,this.GetWorkTimeSchedule());q.Tag=a.clone();q.guid=this.guid();g.push(q);e=p.ViewWidth;if(2==g.length&&g[0].Width<p.GanttChart.options.MinTimeUnitWidthForHeaderVisibility&&g[1].Width<p.GanttChart.options.MinTimeUnitWidthForHeaderVisibility)return b(this.element).hide(),!1;g=g[g.length-1];g.Width>e&&(g.Width=e);l.Value+=g.Width;f&&(a=new RadiantQ.Gantt.ProvideCustomerHeaderTextEventArgs(a,q.Text,q.Width),t.ProvideCustomHeaderText.raise(t,
a),q.Text=a.Text,a.TooltipText&&(q.ToolTipText=a.TooltipText));return l.Value>=e?(l=g.Width-(l.Value-e),0<l&&(g.Width=l),!1):!0},_create:function(){this._refresh()},_refresh:function(){var a=this.options;this.UpdateTimeUnits();this.element.width(a.ViewWidth);this.renderUnites(this.options.timeUnits)},_destroy:function(){this.element.empty()},_refreshWidth:function(a){b(this.element).width(a)},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments);"ViewWidth"==a&&this._refreshWidth(b);
this._refresh()}};f.TimeSpanHeader={options:{name:"TimeSpanHeader"},renderUnites:function(a){var b;b='<div class="rq-timeUnit-div '+window.radiantQclasses.headerClass+'" data-uid=${data.guid} title="${data.ToolTipText }" style="width: ${ data.Width}px;height:100%;"><div >${ data.Text }</div></div>';for(var d=this.options.headerInfo.Template||e(b),g="<div style='height:100%' >",f=0;f<a.length;f++)b=a[f],this.guidList[b.guid]=b,b.Width&&(g+=d(b));this.element[0].innerHTML=g+"</div>"},_renderTimeUnit:function(a,
c,d){var g=b('<div class="rq-timeUnit-div '+window.radiantQclasses.headerClass+'" style="width: '+a.Width+'px;height:100%;" ></div>'),e=g[0];c.appendChild(e);c=RQStyle.ZeroStyle;var f=b("<table ></table>")[0];f.style.cssText=c;var k=f.insertRow(-1),l=k.insertCell(-1);k.style.cssText=c;l.style.cssText=c;l.align="center";l.vAlign="middle";l.width="100%";l.height="100%";b(l).attr({align:"center",vAlign:"middle",title:a.ToolTipText});var n=this,p=RadiantQ.Gantt.TimeRangeHighlightBehavior;g.mouseenter(function(){a.IsHighlighted(!0);
(n.options.GanttChart.options.TimeRangeHighlightBehavior&p.HighlightInChartOnHeaderMouseHover)==p.HighlightInChartOnHeaderMouseHover&&g.addClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass)});g.mouseleave(function(){a.IsHighlighted(!1);(n.options.GanttChart.options.TimeRangeHighlightBehavior&p.HighlightInChartOnHeaderMouseHover)==p.HighlightInChartOnHeaderMouseHover&&g.removeClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass)});e.appendChild(f);d&&this.options.headerInfo.RenderCallBack.raise(this,
{timeUnit:a,headerUnit:g})},CreateSmartDateTimeText:function(a,b){a[this.getChildWidgetName("SmartDateTimeText")]({text:b.Text,timeUnit:b})},guidList:[],prevTaget:null,prevTimeunit:null,addHoverStyle:function(a,b){null!=this.prevTaget&&this.removeHoverStyle(this.prevTaget,this.prevTimeunit);a&&!0==a.hasClass("rq-timeUnit-div")&&(this.prevTaget=a,this.prevTimeunit=b,b.IsHighlighted(!0),a.addClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass))},removeHoverStyle:function(a,b){a.hasClass("rq-tsh-timeUnit-hover")&&
(b.IsHighlighted(!1),a.removeClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass),this.prevTimeunit=this.prevTaget=null)},_create:function(){RQStyle.init();var a=this,c=RadiantQ.Gantt.TimeRangeHighlightBehavior;a.guidList=[];a.element.height(a.options.headerInfo.HeaderHeight);a.baseCreate.apply(a,arguments);a.element.mouseover(function(d){if((a.options.GanttChart.options.TimeRangeHighlightBehavior&c.HighlightInChartOnHeaderMouseHover)==c.HighlightInChartOnHeaderMouseHover&&(d=b(d.target).closest("div.rq-timeUnit-div").not(".rq-tsh-timeUnit-hover"),
d.length)){var e=d.data("uid");e&&a.addHoverStyle(d,a.guidList[e])}});a.element.mouseleave(function(b){a.addHoverStyle(null,null)});var d=a.options;d.headerInfo.PropertyChanged.clear();d.headerInfo.PropertyChanged.subscribe(a.PropertyChange,a)},PropertyChange:function(a,b){"TextFormat"==b.PropertyName&&this._refresh()},UpdateTimeUnits:function(){var a=this.options,b=a.headerInfo;viewStartTime=a.ViewStartTime;viewEndTime=a.ViewEndTime;null!=b&&b.TimeUnitsCache.ClearTimeUnitsCacheForRange(viewStartTime,
viewEndTime);this.ScaleRendererBaseUpdateTimeUnits();null!=b&&null!=a.timeUnits&&0<a.timeUnits.length&&b.TimeUnitsCache.SetTimeUnitsCacheForRange(viewStartTime,viewEndTime,a.timeUnits)},_setOption:function(a,b){this.baseSetOption.apply(this,arguments)}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){var e=RadiantQ.Gantt;f.GanttChartBackground={options:{name:"GanttChartBackground",WorkTimeSchedule:null,WorkingTimeBackground:null,NonWorkingTimeBackground:null,BottomTwoHeaders:null,ViewStartTime:null,ViewEndTime:null,BaseTimeUnitWidth:25,BaseTimeScaleType:null,timeUnits:[],GanttChart:null,ViewWidth:null,Parent:null,TimeRangeHighlightBehavior:null},_create:function(){this._refresh();this._subscribeEvents()},_subscribeEvents:function(){var a=this,b=this.options.Parent.element;null!=
b&&(b.bind("ganttchartrefreshui.GanttChartBGRefreshUI",function(b,c){a._ConvertGanttChartOptionsToChatBGOptions(c.options);a.draw()}),b.bind("ganttchartoptionchanged.GanttChartBGRefreshUI",function(b,c){a._ConvertGanttChartOptionsToChatBGOptions(c.options)}))},_refresh:function(){this.element.empty();this.draw()},propertyChanged:function(a,b){if("IsHighlighted"==b.PropertyName){var d=a.IsHighlighted(),g=this.element.find("#"+a.guid);d?this.addHoverStyle(g,a):this.removeHoverStyle(g,a)}},prevTaget:null,
prevTimeunit:null,addHoverStyle:function(a,b){null!=this.prevTaget&&this.removeHoverStyle(this.prevTaget,this.prevTimeunit);if(a&&!0==a.hasClass("ui-GanttTimeUnitBackground-unit")){this.prevTaget=a;this.prevTimeunit=b;var d=a.data("level");a.hasClass("rq-gc-nonWorking-background")&&a.removeClass(window.radiantQclasses.highlightingClass);1==d&&a.css("background","");a.addClass("rq-Background-timeUnit-hover "+window.radiantQclasses.hoveringClass)}},removeHoverStyle:function(a,b){if(a.hasClass("rq-Background-timeUnit-hover")){var d=
a.data("level");a.hasClass("rq-gc-nonWorking-background")&&a.addClass(window.radiantQclasses.highlightingClass);1==d&&a.css("background","transparent");a.removeClass("rq-Background-timeUnit-hover "+window.radiantQclasses.hoveringClass);this.prevTimeunit=this.prevTaget=null}},drawUnits:function(a,b,d){var g="<div class='ui-GanttChartScaleBackground ui-GanttChart-Background' >",e="",f,k;if(null!=a)for(var l=0;l<a.length;l++)e="ui-GanttTimeUnitBackground-unit ",f=a[l],f.PropertyChanged.subscribe(this.propertyChanged,
this),0==b?(e+=f.IsWorkingTime?"ui-WorkingTimeBackground ":"rq-gc-nonWorking-background "+window.radiantQclasses.highlightingClass,k='"height: '+d+"px;z-index: "+b+";width: "+f.Width+'px;"'):1==b&&(e+="rq-gc-timeunit-border ui-widget-content",k='"height: '+d+"px;z-index: "+b+";width: "+f.Width+'px; border-left-width:1px;"'),g+="<div id="+f.guid+" data-level="+b+' class="'+e+'" style='+k+" ></div>";return g+"</div>"},draw:function(){var a=this.options,b=a.BottomTwoHeaders;if(null!=b){for(var d=this.element.parent("div.rq-gc-chartArea-div").height(),
g="",e=0;e<b.length;e++)var f=b[e],k=f.TimeUnitsCache.GetTimeUnitsCacheForRange(a.ViewStartTime,a.ViewEndTime),f=RadiantQ.Gantt.BottomTwoHeaderDefinitions.GetIndex(f),g=g+this.drawUnits(k,f,d);this.element[0].innerHTML=g}},_ConvertGanttChartOptionsToChatBGOptions:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart=
{MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};this.options.ViewWidth=a.ViewWidth;this.options.BottomTwoHeaders=a.BottomTwoHeaders;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.NonWorkingTimeBackground=a.NonWorkingTimeBackground;this.options.TimeRangeHighlightBehavior=a.TimeRangeHighlightBehavior},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments)},_destroy:function(){this.element.empty();
var a=this.options.Parent.element;a.unbind("ganttchartrefreshui.GanttChartBGRefreshUI");a.unbind("ganttchartoptionchanged.GanttChartBGRefreshUI")}};f.GanttChartCustomRangeBackground={options:{name:"GanttChartCustomRangeBackground",CustomChartBackgroundRanges:null,Parent:null},_create:function(){var a=this;a._refresh();var b=a.options.Parent.element;null!=b&&(b.bind("ganttchartrefreshui.CustomBGRefreshUI",function(b,c){a._ConvertGanttChartOptionsToChatBGOptions(c.options);a._refresh()}),b.bind("ganttchartoptionchanged.CustomBGRefreshUI",
function(b,c){a._ConvertGanttChartOptionsToChatBGOptions(c.options)}));null!=a.options.CustomChartBackgroundRanges&&a.options.CustomChartBackgroundRanges.DiscreetCustomRanges.CollectionChanged.subscribe(function(){this._refresh()},a)},_refresh:function(){this.element.empty();this.element.width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){var a=this.options,b=a.ViewStartTime.clone(),d=a.ViewEndTime.clone(),g=a.BaseTimeUnitWidth,e=a.BaseTimeScaleType;if(!(null==b||null==
d||null==a.CustomChartBackgroundRanges||0<=b.compareTo(d))){for(var f=[],k=[],l=0;l<a.CustomChartBackgroundRanges.DiscreetCustomRanges.length;l++)k.push(a.CustomChartBackgroundRanges.DiscreetCustomRanges[l]);var n=new RadiantQ.Gantt.CustomRangeInformationEventArgs(b,d);a.CustomChartBackgroundRanges.RaiseProvideRepeatingCustomRanges(n);a=RadiantQ.Gantt.Utils.TimeComputingUtils;for(l=0;l<n.CustomRanges.length;l++)k.push(n.CustomRanges[l]);for(l=0;l<k.length;l++)if(n=k[l],0<=n.StartTime.compareTo(b)&&
0<d.compareTo(n.StartTime)||0<n.EndTime.compareTo(d)&&0<=d.compareTo(n.EndTime)){var p=a.GetTimeSpan(n.StartTime.clone(),n.EndTime.clone()),q=RadiantQ.Gantt.TimeScaleType.Hours,p=p.getTotalHours(),r=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(e,q,p)*g,p=a.GetTimeSpan(b.clone(),n.StartTime.clone()),p=p.getTotalHours(),q=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(e,q,p)*g;f.push(new RadiantQ.Gantt.CustomRangeTimeUnit(r,q,n))}b="";for(l=0;l<f.length;l++)b+=
this._renderCustomChartBackGround(f[l]);this.element[0].innerHTML=b}},_renderCustomChartBackGround:function(a){return'<div class=ui-customBackgroundRange-unit style="width: '+a.Width+"px;;margin-left: "+a.CanvasLeft+'px;" >'+a.CustomRangeInfo.DataTemplate(a)+"</div>"},_setOption:function(a,b){},_ConvertGanttChartOptionsToChatBGOptions:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;
this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};this.options.ViewWidth=a.ViewWidth;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.WorkingTimeBackground=a.WorkingTimeBackground},_destroy:function(){var a=this.options.Parent.element;a.unbind("ganttchartrefreshui.CustomBGRefreshUI");a.unbind("ganttchartoptionchanged.CustomBGRefreshUI")}};
f.SpecialLines={options:{SpecialLineInfos:null,name:"SpecialLines",Parent:null},height:0,_create:function(){this.baseCreate.apply(this,arguments);var a=this,b=a.options.Parent.element;null!=b&&(b.bind("ganttchartrefreshui.SplLinesRefreshUI",function(b,c){a._ConvertGanttChartOptsToSpecialLineOpts(c.options);a._refresh()}),b.bind("ganttchartoptionchanged.SplLinesRefreshUI",function(b,c){a._ConvertGanttChartOptsToSpecialLineOpts(c.options)}));null!=this.options.SpecialLineInfos&&this.options.SpecialLineInfos.CollectionChanged.subscribe(function(){a._refresh()})},
_refresh:function(){this.element.empty().width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){var a=RadiantQ.Gantt.Utils.TimeComputingUtils,b=this.options,d=b.ViewStartTime.clone(),g=b.ViewEndTime.clone(),f=b.BaseTimeUnitWidth,m=b.BaseTimeScaleType;if(!(null==d||null==g||null==b.SpecialLineInfos||0<=d.compareTo(g))){for(var g=[],k=0;k<b.SpecialLineInfos.length;k++){var l=b.SpecialLineInfos[k],n=a.GetTimeSpan(d,l.LineDateTime);if(!(n<RQTimeSpan.Zero_M())){var p=new RadiantQ.Gantt.TimeUnit;
if(0>=d.compareTo(l.LineDateTime))switch(void 0==l.ToolTipText&&(l.ToolTipText=""),p.Tag=l,m){case e.TimeScaleType.Minutes:p.Type=e.TimeScaleType.Minutes;p.Tag=l;p.Width=a.ConvertToUnitsOfBaseType(m,e.TimeScaleType.Minutes,n.getTotalMinutes())*f;g.push(p);break;case e.TimeScaleType.Hours:p.Type=e.TimeScaleType.Hours;p.Tag=l;p.Width=a.ConvertToUnitsOfBaseType(m,e.TimeScaleType.Hours,n.getTotalHours())*f;g.push(p);break;case e.TimeScaleType.Days:p.Type=e.TimeScaleType.Days;p.Tag=l;p.Width=a.ConvertToUnitsOfBaseType(m,
e.TimeScaleType.Days,n.getTotalDays())*f;g.push(p);break;case e.TimeScaleType.Weeks:p.Type=e.TimeScaleType.Weeks;p.Tag=l;p.Width=a.ConvertToUnitsOfBaseType(m,e.TimeScaleType.Weeks,n.getTotalDays()/7)*f;g.push(p);break;case e.TimeScaleType.Months:p.Type=e.TimeScaleType.Months;p.Tag=l;var q=d,n=12*(l.LineDateTime.getFullYear()-q.getFullYear()),l=l.LineDateTime.getMonth()-q.getMonth(),n=0<l?n+l:n-(12-Math.Abs(l));p.Width=a.ConvertToUnitsOfBaseType(m,e.TimeScaleType.Days,n)*f;g.push(p);break;case e.TimeScaleType.Years:p.Type=
e.TimeScaleType.Years,p.Tag=l,p.Width=a.ConvertToUnitsOfBaseType(m,e.TimeScaleType.Weeks,l.LineDateTime.getFullYear()-d.getFullYear())*f,g.push(p)}}}a="";for(k=0;k<g.length;k++)a+=this._renderCustomChartBackGround(g[k],-1);this.element[0].innerHTML=a}},_renderCustomChartBackGround:function(a,b){void 0==a.Tag.LineColor&&(a.Tag.LineColor="#C5C5C5");return'<div class="rq-gc-specialLine '+(a.Tag.ClassName||"")+'" style="height: 100%; Background-color:'+a.Tag.LineColor+"; width: 1px; margin-left: "+a.Width+
'px;" title="'+a.Tag.ToolTipText+'"></div>'},createToolTip:function(a,b){a.tooltip({track:!0,content:function(a){return"<div align='center'>NaN"}})},_ConvertGanttChartOptsToSpecialLineOpts:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};
this.options.ViewWidth=a.ViewWidth;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.WorkingTimeBackground=a.WorkingTimeBackground},_setOption:function(a,b){},_destroy:function(){var a=this.options.Parent.element;a.unbind("ganttchartrefreshui.SplLinesRefreshUI");a.unbind("ganttchartoptionchanged.SplLinesRefreshUI")}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){f.ScalePanelRendererBase={options:{ViewStartTime:null,ViewEndTime:null,name:"ScalePanelRendererBase"},_create:function(){},_setOption:function(b,a){this.widgetBaseSetOption.apply(this,arguments)}};f.TimeSpanHeaders={panningUtil:null,options:{TimeScaleHeaders:null,ComputedStartTime:null,ComputedEndTime:null,BaseTimeUnitWidth:null,BaseTimeScaleType:null,AnchorTime:null,ViewWidth:null,ResizeToFit:null,ZoomOptions:null,ScrollOptions:null,CustomChartBackgroundRanges:null,BaseTimeUnitWidthMinimum:null,
BaseTimeUnitWidthMaximum:null,MinTimeUnitWidthForHeaderVisibility:null,WorkTimeSchedule:null,TimeRangeHighlightBehavior:null,GanttChart:null,name:"TimeSpanHeaders"},_previousHeight:null,heightChangeListener:function(b){b!=this._previousHeight&&(this._previousHeight=b,this.element.trigger("heightChanged"))},redraw:function(){this._renderTimeLineHeaders(this.options)},_create:function(){this.baseCreate.apply(this,arguments);var e=this;this.element.addClass("rq-tsh-div").data("TimeSpanHeaders",this);
this._previousHeight=this.element.height();var a=b(this.element).parents(".rq-ganttChart");a.bind("ganttchartrefreshui.TimeSpanHeadersRefreshUI",function(a,d){b.extend(e.options,d.options);e._renderTimeLineHeaders(d.options)});a.bind("ganttchartoptionchanged",function(a,d){a.preventDefault();a.stopPropagation();b.extend(e.options,d.options)});b(this.element).parents("div").filter(".rq-ganttBase").bind("ganttbaseheadercollectionschanged",function(a,d){void 0!=(a.originalEvent.preventDefault&&a.originalEvent.stopPropagation)&&
(a.preventDefault(),a.stopPropagation());b.extend(e.options,d.options);var g=d.value.items;if("insert"==d.event.type)for(var f=0;f<g.length;f++)e._insertTimeLineHeader(g[f],d.value.index,d.options);else"remove"==d.event.type&&e._removeTimeLineHeader(d.value.index);e.heightChangeListener(e.element.height())});this.redraw()},widget:function(){return this.element},ShouldZoomWithLeftMouse:function(b){b=RadiantQ.Gantt.isModifierKeyIsPresed(b);return(this.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag)==
RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag&&!b},ShouldScrollWithLeftMouse:function(b){var a=RadiantQ.Gantt.isModifierKeyIsPresed(b);return(this.options.ScrollOptions&RadiantQ.Gantt.ChartScrollOptions.LeftMouseButtonDownDrag)==RadiantQ.Gantt.ChartScrollOptions.LeftMouseButtonDownDrag&&!a||(this.options.ScrollOptions&RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag)==RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag&&b.ctrlKey},_renderTimeLineHeaders:function(e){var a=
this;this.element[0].style.display="none";this._refreshWidth(this.options.ViewWidth);null!=this.options.TimeScaleHeaders&&b.map(this.options.TimeScaleHeaders,function(b,d){var g=a._addTimeLineHeader(b,e);a.element.append(g);return g});this.heightChangeListener(this.element.height());this.element[0].style.display="block"},_refreshWidth:function(e){b(this.element).empty();b(this.element).width(e)},_addTimeLineHeader:function(b,a){return this._newTimeLine(b,a)},_insertTimeLineHeader:function(e,a,c){e=
this._newTimeLine(e,c);b(".rq-tlh-div",this.element).eq(a).before(e)},_removeTimeLineHeader:function(e){b(".rq-tlh-div",this.element).eq(e).remove()},_newTimeLine:function(e,a){return b('<div class="rq-tlh-div" />')[this.getChildWidgetName("TimeSpanHeader")]({ViewStartTime:this.options.ComputedStartTime,ViewEndTime:this.options.ComputedEndTime,headerInfo:e,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:e.BaseTimeScaleType,GanttChart:this.options.GanttChart,ViewWidth:this.options.ViewWidth,
WorkTimeSchedule:this.options.WorkTimeSchedule})},StartPanning:function(){function b(c,d){a._trigger("AnchorTimeChanged",this,a.panningUtil.CurAnchorTime)}null!=this.panningUtil&&this.panningUtil.AnchorTimeChanged.isSubscribed&&this.panningUtil.AnchorTimeChanged.unsubscribe(b);this.panningUtil=new RadiantQ.Gantt.GanttChartPanningUtil(this.options.AnchorTime,this.options.BaseTimeScaleType,this.options.BaseTimeUnitWidth);this.panningUtil.AnchorTimeChanged.subscribe(b);var a=this},_getGanttChartDivsUniqueSelectorIdByID:function(b){return"#"+
this.element[0].id.toString().replace(/timeSpanHeader/g,"")+b},ScrollBy:function(e){if(!1==this.options.ResizeToFit){var a=b(this._getGanttChartDivsUniqueSelectorIdByID("GanttChart")),c=b(".rq-gc-horizontalScrollBar",a.parent()),c=b(".rq-gc-chart-HScrollBar-content",c).width()-c.width(),d=a.scrollLeft(),d=d+e;d<=c&&a.scrollLeft(d)}else null!=this.panningUtil?this.panningUtil.ApplyXChange(e):(e=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(this.options.BaseTimeScaleType,e/this.options.BaseTimeUnitWidth),
e=this.options.AnchorTime.addTimeSpan(e),self._trigger("AnchorTimeChanged",this,e))},_setOption:function(b,a){this.baseSetOption.apply(this,arguments)},_destroy:function(){this.element.data("TimeSpanHeaders",null)},destroy:function(){this.element.empty();this.element.parents(".rq-ganttChart").unbind("ganttchartrefreshui.TimeSpanHeadersRefreshUI");this.element.data("TimeSpanHeaders",null)}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f){RadiantQ.Gantt.Widget.rowbase={options:{filter:"tbody > tr",canhHighlightAdjacentElement:null,name:"rowbase"},_create:function(){this.options.canhHighlightAdjacentElement=!0},IsChart:function(b){return f(b).parents("table").hasClass("rq-gc-rowsParent-table")?!0:f(b).parents("table").hasClass("ui-grid-body-table")?!1:null},getParent:function(b){return this.IsChart(b)?f(b).parents(".rq-ganttChart")[0]:f(b).parents(".rq-FlexyTable")[0]},getAdjacentTR:function(b,e){if(b){var a=-1==b[0].rowIndex?
b.index():b[0].rowIndex,c=this.IsChart(b),d;!0==c?(c=f(".ui-grid-body-table",this.element)[0],void 0!=c.rows&&(d=c.rows[a])):!1==c&&null!=c&&(c=f(".rq-gc-rowsParent-table",this.element)[0])&&void 0!=c.rows&&(d=c.rows[a]);return f(d,this.element)}}}})(jQuery);
(function(f){var b={options:{SelectionMode:RadiantQ.Gantt.SelectionMode.Multiple,IsFlexyGantt:!0,name:"GanttRowselectable",SelectEvent:"mouseup",EnableMultipleSelection:!1},gridTable:null,frozenGridTable:null,chartTable:null,chart:null,grid:null,ganttBase:null,Source:null,recursive:!1,shiftKey:!1,selectedItems:new ObservableCollection,_create:function(){var b=this;b.selectedItems=new ObservableCollection;b.$ganttBase=this.element.parent(".rq-ganttBase");b.gridTable=this.element.find(".ui-grid-body-table").addClass("ui-selectable").find("tbody");
b.frozenGridTable=this.element.find(".ui-frozen-body-table").addClass("ui-selectable").find("tbody");b.chartTable=this.element.find(".rq-gc-rowsParent-table").addClass("ui-selectable");b.grid=b.gridTable.data("VWGrid");b.chart=this.chartTable.parents(".rq-ganttChart").data("GanttChart");b.ganttBase=this.element.parent().data("GanttBase");this.element.attr("tabIndex",1);b.baseCreate.apply(this,arguments);b.element.data("GanttRowselectable",this);document.body.onselectstart=function(a){return b.shiftKey?
!1:!0};b.element.unbind(b.options.SelectEvent);b.element.bind(b.options.SelectEvent,function(a,d){b.chartTable=b.element.find(".rq-gc-rowsParent-table").addClass("ui-selectable");!1!=b.$ganttBase.data("GanttBase").PreventDefaultFns||void 0!=RadiantQ.Gantt.RowDragDropTracker&&!1!=RadiantQ.Gantt.RowDragDropTracker.IsDragStarted_M()||(0<=navigator.platform.toUpperCase().indexOf("MAC")&&(a.shiftKey=d&&d.shiftKey?d.shiftKey:a.shiftKey||!1),b._mousedown(a))});var a=!1;b.element.bind("keydown",f.proxy(function(c){setTimeout(function(){b.$ganttBase.data("GanttBase").PreventDefaultFns||
0==b.selectedItems.length||!1!=a||17==c.which&&!b.recursive||(c.shiftKey&&(b.recursive=!0),38===c.which&&(b.KeyUp(c),a=!0,b.element.focus(),c.preventDefault()),40===c.which&&(b.KeyDown(c),a=!0,b.element.focus(),c.preventDefault()),13===c.which&&(a=!0,b.element.focus(),c.preventDefault()))},0,this)},this));b.element.bind("keyup",f.proxy(function(c){b.shiftKey=c.shiftKey;16==c.which&&(b.recursive=!1);a=!1},b));f(b.gridTable).bind("keydown",f.proxy(function(a){b.shiftKey=a.shiftKey;b.$ganttBase.data("GanttBase").PreventDefaultFns||
0==b.selectedItems.length||(13!==a.which||a.isPropagationStopped()||(null!=b.mouseDownTarget&&0!=b.mouseDownTarget.length||b.updateMouseDownTarget(a),0!=b.mouseDownTarget.length&&(b.mouseDownTarget[0]!=b.element[0]&&b.mouseDownTarget[0]!=b.element.parent()[0]||b._keydown(a))),a.shiftKey&&9==a.which&&!a.isPropagationStopped()?(b._keydown(a),a.preventDefault(),b.element.focus()):9!=a.which||a.isPropagationStopped()||(b._keydown(a),a.preventDefault(),b.element.focus()))},this));b.mouseDownTarget=null;
f(b.document).bind("mousedown",f.proxy(function(a){b.updateMouseDownTarget(a)},b));b.updateMouseDownTarget=function(a){this.mouseDownTarget=f(a.target);this.mouseDownTarget.hasClass(".rq-ganttBase")||(this.mouseDownTarget=this.mouseDownTarget.parents(".rq-ganttBase"))};b.UpdateSource();f.observable(b.selectedItems).bind("insert remove replaceAll",function(a,d){b.UpdateSelection(a,d)})},getSource:function(){return this.element.parent(".rq-ganttBase").data("GanttBase").options.FlatItemsSource},UpdateSource:function(){var b=
this,a=b.Source=this.getSource();a&&a.CollectionChanged.subscribe(function(a,d){var g=d.items[0].IsSelected();"remove"===a.type&&!0==g&&b.selectedItems.remove(d.items[0])})},multiSelect:!1,multiSelectedData:[],multiSelectedTableRows:[],multiSelectedChartRows:[],lastSelectedRow:null,_mousedown:function(b){var a=f(b.target).closest("tr.rq-grid-row"),c=a.parents("table");if(!c)return!1;(!0==this.options.EnableMultipleSelection||this.grid&&!0==this.grid.options.enableSingleClickEdit||1<this.selectedItems.length)&&
0==c.length&&(a=f(".editor",this.gridTable).closest("tr.rq-grid-row"),c=a.parents("table"));if(c.hasClass("ui-selectable")){c=this.chart?this.chart.GetDataFromRow(a):this.grid.GetDataFromRow(a);if(!1==b.shiftKey){if(!b.ctrlKey&&0!=a.length&&!b.shiftKey||this.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single){if(1==this.selectedItems.length&&this.selectedItems[0]==c&&!1==this.ganttBase.options.EnableMultipleSelection)return;if(!0==this.options.EnableMultipleSelection){if(a=this.selectedItems.indexOf(c),
-1!=a&&3!=b.which){this.selectedItems.remove(a);return}}else(3!=b.which||3==b.which&&-1==this.selectedItems.indexOf(c))&&this.removeAllHighlight()}else if(0!=a.length&&!b.shiftKey&&(a.hasClass("rq-row-selected")||a.find("td").hasClass("rq-row-selected"))&&3!==b.which)return this.selectedItems.remove(c),!1;this.lastSelectedRow=c;-1==this.selectedItems.indexOf(c)&&this.hightlighRow(c)}if(b.shiftKey){if(this.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single)return this.removeAllHighlight(),
this.hightlighRow(c),!1;var d=0,g=0;"function"===typeof c.DisplayIndex?(d=c.DisplayIndex(),this.lastSelectedRow&&(g=this.lastSelectedRow.DisplayIndex())):(d=c.DisplayIndex,this.lastSelectedRow&&(g=this.lastSelectedRow.DisplayIndex));var h=0,a=d;this.lastSelectedRow&&(h=Math.min(g,d),a=Math.max(g,d));if(h==a)return;this.multiSelect=!0;this.multiSelectedData=[];this.multiSelectedTableRows=[];this.multiSelectedChartRows=[];this.removeAllHighlight();for(d=h;d<=a;d++)g=this.Source[d],-1==this.selectedItems.indexOf(g)&&
this.hightlighRow(g);null==this.lastSelectedRow&&(this.lastSelectedRow=this.selectedItems[0]);-1==this.selectedItems.indexOf(c)&&this.hightlighRow(c);c=new RadiantQ.Gantt.SelectionChanged({TableRow:this.multiSelectedTableRows,ChartRow:this.multiSelectedChartRows,Data:this.multiSelectedData},[]);this.triggerEvent("selectedChange",b,c);this.multiSelect=!1}}return!1},KeyUp:function(){var b=this.selectedItems.length;this.selectedItems.sort(function(a,b){return a.DisplayIndex_M&&b.DisplayIndex_M?a.DisplayIndex_M()-
b.DisplayIndex_M():a.DisplayIndex()-b.DisplayIndex()});if(!1==this.recursive||null==this.lastProcessedRow)this.lastProcessedRow=this.selectedItems[b-1];var a=b=this.getPrevData(this.lastProcessedRow);-1!=this.selectedItems.indexOf(b)&&(a=this.lastProcessedRow);this.selectAndScrollRow(a,null,this.recursive)},KeyDown:function(){var b=this.selectedItems.length;this.selectedItems.sort(function(a,b){return a.DisplayIndex_M&&b.DisplayIndex_M?a.DisplayIndex_M()-b.DisplayIndex_M():a.DisplayIndex()-b.DisplayIndex()});
if(!1==this.recursive||null==this.lastProcessedRow)this.lastProcessedRow=this.selectedItems[b-1];var a=b=this.getNextData(this.lastProcessedRow);-1!=this.selectedItems.indexOf(b)&&(a=this.lastProcessedRow);this.selectAndScrollRow(a,null,this.recursive)},lastProcessedRow:null,_keydown:function(b){if(void 0!=this.grid&&null!=this.grid){var a=this.selectedItems.length;this.$ganttBase.data("GanttBase");if(0!=a){this.selectedItems.sort(function(a,b){return a.DisplayIndex_M&&b.DisplayIndex_M?a.DisplayIndex_M()-
b.DisplayIndex_M():a.DisplayIndex()-b.DisplayIndex()});if(!1==this.recursive||null==this.lastProcessedRow)this.lastProcessedRow=this.selectedItems[a-1];switch(b.which){case 13:this.grid.SaveAndCloseCell();break;case 9:!0==b.shiftKey?this.editNextCell(this.lastProcessedRow,-1):this.editNextCell(this.lastProcessedRow,1)}}}},editNextCell:function(b,a){if(null!=b){var c=!1,d=function(){var d=this.grid.GetRowFromData(b);1<d.length&&!0==c?d=d.eq(0):1<d.length&&!1==c&&(d=d.eq(1));this.lastCellIndex+=a;d=
d.find("td:eq("+this.lastCellIndex+")");0>this.lastCellIndex&&(d=null);if(null==d||0==d.length)d=this.getNextEditableCell(a,this.lastCellIndex,c);else{var f;f=!0==c?this.grid.FrozenColumn[d.index()]:this.grid.Column[d.index()];!1==this.grid.isEditable(b,f)&&(d=this.getNextEditableCell(a,d.index(),c))}null!=d&&void 0!=d&&d.length&&null!=d&&void 0!=d&&d.length&&!1==this.grid.editCell(d)&&this.element.focus()};null!=this.grid.editedElement&&(c=0<this.grid.editedElement.parents(".ui-frozen-body-table").length,
this.submitCurentRowChanges(d))}},getNextEditableCell:function(b,a,c){var d=null,g=this.grid.GetRowFromData(this.selectedItems[this.selectedItems.length-1]);for(b=0<b?1:-1;null==d;){if(0==g.length)return null;var f=this.grid.GetDataFromRow(g),g=this.grid.GetRowFromData(f);this.selectAndScrollRow(f,null,!1);if(c)if(0>a)c=!1,g=g.eq(0).prev(),a=this.grid.Column.length-1;else if(a<this.grid.FrozenColumn.length){var m=this.grid.FrozenColumn[a];if(f=this.grid.isEditable(f,m))return d=g.eq(0).find("td:eq("+
a+")");a+=b}else c=!1,a=0;else{var k=0<this.grid.FrozenColumn.length?1:0;if(0>a)c=!0,a=this.grid.FrozenColumn.length-1;else if(a<this.grid.Column.length){m=this.grid.Column[a];if(f=this.grid.isEditable(f,m))return d=g.eq(k).find("td:eq("+a+")");a+=b}else if(c=!0,a=0,g=g.eq(0).next(),null==g||0==g.length)return null}}},getNextData:function(b){var a,c=this.grid.GetRowFromData(b),c=c?c[0].nextElementSibling:null;null==c?null!=this.Source&&(b=this.Source.indexOf(b)+1,this.Source.length>b&&(a=this.Source[b])):
a=this.chart.GetDataFromRow(c);return a},getPrevData:function(b){var a,c=this.grid.GetRowFromData(b),c=c?c[0].previousElementSibling:null;null==c?null!=this.Source&&(b=this.Source.indexOf(b)-1,0==f(this).index()&&(a=this.Source[b])):a=this.chart.GetDataFromRow(c);return a},selectAndScrollRow:function(b,a,c){function d(){g.selectItemByitems(b,c);g.ganttBase.ScrollIntoView(b,a);g.lastSelectedRow=b;g.element.focus()}var g=this;b&&g.submitCurentRowChanges(d)},selectItemByitems:function(b,a){a||this.removeAllHighlight();
null!=b&&(-1==this.selectedItems.indexOf(b)?this.selectedItems.add(b):this.selectedItems.remove(b),setTimeout(function(){}))},lastCellIndex:null,EditCurrentRow:function(){var b=this.grid.GetRowFromData(this.selectedItems[this.selectedItems.length-1]),b=f(b).find("td:eq("+this.lastCellIndex+")");!1==this.grid.editCell(b)&&this.element.focus()},submitCurentRowChanges:function(b){var a=this.grid.editedElement;a?(this.lastCellIndex=a.index(),this.grid.SaveAndCloseCell(f.proxy(b,this))):b.call(this,!1)},
selectingRowByKeyDown:function(b,a,c){b=null;null==a?(a=this.Source.indexOf(c)+1,this.Source.length>a&&(b=this.Source[a])):b=this.chart.GetDataFromRow(a);null!=b&&(this.selectItemByitem(b),this.ganttBase.ScrollIntoView(b))},selectItemByitem:function(b){this.removeAllHighlight();this.hightlighRowByData(b)},UpdateSelection:function(b,a){var c=this.$ganttBase.data("GanttBase"),d=a.items[0];if(!0==c.PreventDefaultFns||void 0==d.IsSelected()||!c.options.ApplySelectionAndHoverEffect)return!1;if("insert"===
b.type){d.IsSelected(!0);c=this.frozenGridTable.find('tr[data-uid="'+d.uid+'"]');if(this.grid)var g=this.grid.table.find('tr[data-uid="'+d.uid+'"]');var f=this.chartTable.find('tr[data-uid="'+d.uid+'"]');c.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);g&&g.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);f.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);this.lastProcessedRow=a.items[0];!1==this.multiSelect?(d=new RadiantQ.Gantt.SelectionChanged({TableRow:g,
ChartRow:f,Data:a.items[0]},[]),this.triggerEvent("selectedChange",b,d)):(this.multiSelectedData.push(d),this.multiSelectedTableRows.push(g),this.multiSelectedChartRows.push(f))}else"remove"===b.type&&(d.IsSelected(!1),this.lastProcessedRow=null,c=this.frozenGridTable.find('tr[data-uid="'+d.uid+'"]'),this.grid&&(g=this.grid.table.find('tr[data-uid="'+d.uid+'"]')),f=this.chartTable.find('tr[data-uid="'+d.uid+'"]'),c.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass),g&&g.removeClass("rq-row-selected "+
window.radiantQclasses.selectionClass),f.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass),!1==this.multiSelect&&(d=new RadiantQ.Gantt.SelectionChanged([],{TableRow:g,ChartRow:f,Data:a.items[0]}),this.triggerEvent("selectedChange",b,d)))},IsTable:function(b){return b.parent().parent().is(f(".ui-grid-body-table",this.element))},SelectedItems:function(){return this.selectedItems},hightlighRow:function(b){null!=b&&this.selectedItems.add(b)},hightlighRowByData:function(b){null!=b&&
(this.selectedItems.add(b),this.lastSelectedRow=b)},removeAllHighlight:function(){for(var b=this.selectedItems.length,a=0;a<b;a++)this.selectedItems.remove(this.selectedItems[0])},_setOption:function(b,a){this.widgetBaseSetOption.apply(this,arguments);switch(b){case "Source":this.removeAllHighlight(),this.UpdateSource()}},_destroy:function(){this.element.data("GanttRowselectable",null)},destroy:function(){this.removeAllHighlight();this.$ganttBase.unbind("mousedown");this.element.data("GanttRowselectable",
null);this.baseDestroy.apply(this,arguments)}};RadiantQ.Gantt.Widget.GanttRowselectable=b})(jQuery);
(function(f){RadiantQ.Gantt.Widget.hoverable={options:{name:"hoverable"},currentData:null,currentTr:null,_create:function(){var b=this;this.gridTable=this.element.find(".ui-grid-body-table").find("tbody");this.chartTable=this.element.find(".rq-gc-rowsParent-table");this.element.data("hoverable",this);this.baseCreate.apply(this,arguments);this.element.bind("mouseover",function(e){b._mousehover(e)});this.element.bind("mouseleave",function(e){b.IsMouseIn()})},_mousehover:function(b){f(b.target);this.currentTr=
f(b.target).closest("tr.rq-grid-row");0!=this.currentTr.length?this.IsMouseIn(this.currentTr.data("uid")):this.prevTableRow&&this.prevChartRow&&this.IsMouseIn();return!1},prevFrozenRow:null,prevTableRow:null,prevChartRow:null,IsMouseIn:function(b){if(!f(this.element).data("GanttRowselectable").ganttBase.options.ApplySelectionAndHoverEffect)return!1;0==this.chartTable.length&&(this.chartTable=this.element.find(".rq-gc-rowsParent-table"));this.prevTableRow&&this.prevChartRow&&(this.prevTableRow.removeClass("rq-row-hover ui-state-hover"),
this.prevChartRow.removeClass("rq-row-hover ui-state-hover"),this.prevTableRow=this.prevChartRow=null);b&&(this.prevTableRow=this.gridTable.find('tr[data-uid="'+b+'"]').addClass("rq-row-hover ui-state-hover"),this.prevChartRow=this.chartTable.find('tr[data-uid="'+b+'"]').addClass("rq-row-hover ui-state-hover"))},_setOption:function(b,e){this.widgetBaseSetOption.apply(this,arguments);switch(b){case "Source":this.removeAllHighlight(),this.UpdateSource()}},_destroy:function(){this.element.data("hoverable",
null)},destroy:function(){this.baseDestroy.apply(this,arguments);this.element.unbind("mouseover");this.element.data("hoverable",null)}}})(jQuery);
(function(f){function b(a,b){this.pagingCount=this.StartYScrollPos=this.StartXScrollPos=0;this.topLeft={X:0,Y:0};this.bottomRight={X:0,Y:0};this.mouseCurPos={X:0,Y:0};this.scrollTimer=null;this.prevDeltaEndY=this.prevDeltaStartY=this.prevDeltaEndX=this.prevDeltaStartX=0;this.ValidateScrollMode=b||!1;this.asMode;this.IgnoreVerticalAutoScroll=!1;this.GanttBase=a;this.GridTable=a.GetGanttTable();this.GanttChart=a.GetGanttChartInstance();this.EnablePagingOnAutoScroll=this.GanttChart.options.EnablePagingOnAutoScroll;
this.ActualViewStartTime=this.GanttChart.options.ComputedStartTime.clone();this.StartXScrollPos=this.GanttChart.$GanttChart.scrollLeft();this.StartYScrollPos=this.GanttChart.VSB.$scrollContainer.scrollTop();var c=this.GanttChart.element[0].getBoundingClientRect();this.topLeft.X=c.left;this.bottomRight.X=c.right;this.ViewportWidth=!1==RadiantQ.CanUseDefineProperty?c.right-c.left:c.width;var d=f(".rq-gc-rowsParent",this.GanttChart.element)[0].getBoundingClientRect();this.topLeft.Y=d.top;this.bottomRight.Y=
d.bottom;this.ViewportHeight=!1==RadiantQ.CanUseDefineProperty?c.bottom-c.top:c.height;this.preventAutoscroll=!1;this.OnScroll=new ObjectEvent("OnScroll")}var e=RadiantQ.Gantt,a=RadiantQ.Gantt.Utils.TimeComputingUtils,c=RadiantQ.Template||kendo.template,d=RadiantQ.Gantt.Model,g=RadiantQ.Gantt.Utils.ValueBinder,h={currentBlock:null,options:{name:"taskbar",ProgressPercentBinding:null,StartTime:null,EndTime:null,Parent:null,Height:null,GanttChart:null,ApplyBarWidthOptimization:null,IsParentTypeRow:null,
OverlappedTasksRenderingOptimization:null,ComputedStartTime:null,index:-1,Data:null,PropertyName:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,TaskTooltipTemplate:null,MovingInfoPopup:null,ResizeInfoPopup:null,ConnectingInfoPopup:null,ParentTasksListProperty:null,DataSource:null,KnockoutObjectName:null,FlexyGantt:null,TimeIndicatorLineOption:null,UseRQModelBinder:!1,EnableAutoAdjustForSchedule:!0,CanDrawDependency:!1,MinimumWidthForParentBar:1},
ProgressPercent:function(a){var b=this.options.Data,c=this._progressPercentBinder._binding.Property;if(null==a)return("function"==typeof b[c]?b[c]():b[c])||0;"function"==typeof b[c]?b[c](a):b[c]=a},isKOBinding:!1,HasChanged:!1,stSourceBinding:null,peSourceBinding:null,etSourceBinding:null,_progressPercentBinder:null,BoundData_ValueChanged:function(a,b){if(!this.IgnoreBDUpdates)try{switch(this._ignoreSelfUpdates=!0,a){case this._progressPercentBinder:var c=parseInt(this._progressPercentBinder._value);
this.ProgressPercent(isNaN(c)?0:c);break}}finally{this._ignoreSelfUpdates=!1}},updateValues:function(){var a=this.options;if(null!=this.stSourceBinding){var b=this.getChildObject(a.Data,this.stSourceBinding,!1);f.isFunction(b)?(b.subscribe&&b.subscribe(this.startTimeChanged.bind(this)),a.StartTime=b()):a.StartTime=b.clone()}null!=this.etSourceBinding&&(b=this.getChildObject(a.Data,this.etSourceBinding,!1),f.isFunction(b)?(b.subscribe&&b.subscribe(this.endTimeChanged.bind(this)),a.EndTime=b()):a.EndTime=
b.clone());null!=this.peSourceBinding&&(a.Data._boundProps={},this._progressPercentBinder=new g(a.Data,this.peSourceBinding,null,RadiantQ.Gantt.BindingMode.TwoWay,d),this._progressPercentBinder.IsBound_M()&&(a.Data._boundProps[this._progressPercentBinder._binding.Property]=this._progressPercentBinder,this._progressPercentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),b=this.getChildObject(a.Data,this.peSourceBinding.Property,!1),void 0!=b&&null!=b&&(f.isFunction(b)?a[this.peSourceBinding.Property]=
b():a[this.peSourceBinding.Property]=b));this.taskStartAndEndTime&&(this.taskStartAndEndTime.originalStart=a.StartTime,this.taskStartAndEndTime.originalEnd=a.EndTime,this.taskStartAndEndTime.ProposedStart=a.StartTime,this.taskStartAndEndTime.ProposedEnd=a.EndTime)},getSchedule:function(){return this.options.Parent.element.GetScheduleToPlotWith()},startTimeChanged:function(a){var b=this.options.StartTime;this._setOption("StartTime",a);this._OnRecomputeLocation();this.options.Parent.element.UpdateItemForCue(this.options.Data,
a,b)},endTimeChanged:function(a){this._setOption("EndTime",a);this._OnRecomputeLocation()},_updateBindingProp:function(){var a=this.options;if(null==a.TaskStartTime)throw"TaskStartTime is not set.";if(null==a.TaskEndTime)throw"TaskEndTime is not set.";a.IsParentTypeRow?(this.stSourceBinding=a.ParentTaskStartTime,this.etSourceBinding=a.ParentTaskEndTime):(this.stSourceBinding=a.TaskStartTime,this.etSourceBinding=a.TaskEndTime,this.peSourceBinding=a.ProgressPercentBinding);if(f.isFunction(a.Data)){var b=
a.Data();a.Data=b[0]}},_updateTaskBarHeight:function(){var a=this.element,b=RadiantQ.FlexyGantt.TaskItemControl,c=b.MarginForBars,d=2*c,g=a[0].style.borderTopWidth,e=a[0].style.borderBottomWidth,h=parseInt(a[0].style.height),m=this.options.GanttChart.options.RowHeight-1;a.hasClass("rq-gc-parentBar")||a.hasClass("parentBar-style")?(g="0px"==g||""==g?b.ParentBar_BorderTopWidth:parseInt(g),e="0px"==e||""==e?b.ParentBar_BorderBottomWidth:parseInt(taskbarDiv[0].style.borderBottomWidth),b=0,void 0!=a.attr("heightSetBySrc")||
isNaN(h)?(b=m-d-(g+e),a.attr("heightSetBySrc","true")):b=h):(g="0px"==g||""==g?b.TaskBar_BorderTopWidth:parseInt(g),e="0px"==e||""==e?b.TaskBar_BorderBottomWidth:parseInt(e),b=0,void 0!=a.attr("heightSetBySrc")||isNaN(h)?(b=m-d-(g||0+e||0),a.attr("heightSetBySrc","true")):b=parseInt(h));a.css({height:b+"px","margin-top":c+"px"});if(null!=this.options.GanttChart.options.RowHeightBinding){var k=this;f(this.options.Parent.element.element).bind("heightChange."+this.eventNamespace,function(){k._OnRecomputeLocation();
k.options.Parent.element.element[0]._isTriggered=!1})}},_events:function(){var a=this.options.GanttChart;this.element.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this));this.element.bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));a.RefreshUIEvent.subscribe(this.OnChartRefreshUI,this)},$startResizeMarker:null,$endResizeMarker:null,TaskBarMouseHover:function(){this.options.GanttChart.TaskOnMouseHover=this.options.Data;this.options.GanttChart.TaskViewOnMouseHover=
this.options;this.options.GanttChart.options.TimeIndicatorLineOption==e.TimeIndicatorLines.OnHover&&(this.element.find(".rq-gc-start-verticalLine").show(),this.element.find(".rq-gc-end-verticalLine").show());this.element.hasClass("rq-gc-parentBar")&&this.element.hasClass("parentBar-style")||this.element.addClass("rq-taskbar-shadow");if(f.fn.RQTooltip.CanShowTooltip&&this.options.GanttChart.options.EnableResizeCues&&(null!=this.$startResizeMarker&&this.$startResizeMarker.show(),null!=this.$endResizeMarker&&
this.$endResizeMarker.show(),null==this.$startResizeMarker&&null==this.$endResizeMarker&&!this.element.hasClass("rq-gc-hide-resizeMarker"))){var a;if(null!=this.StartResizeThumb&&0<this.StartResizeThumb.length){this.$startResizeMarker=f("<div class='start-resizeMarker'></div>");this.StartResizeThumb.append(this.$startResizeMarker);a=this.element.height();var b=this.$startResizeMarker.outerHeight();a=a/2-b/2;this.$startResizeMarker.css("margin-top",a)}null!=this.ResizeThumb&&0<this.ResizeThumb.length&&
(this.$endResizeMarker=f("<div class='end-resizeMarker'></div>"),this.ResizeThumb.append(this.$endResizeMarker),this.$endResizeMarker.css("margin-top",a))}},TaskBarMouseLeave:function(){this.options.GanttChart.TaskOnMouseHover=null;this.options.GanttChart.TaskViewOnMouseHover=null;this.options.GanttChart.options.TimeIndicatorLineOption==e.TimeIndicatorLines.OnHover&&(this.element.find(".rq-gc-start-verticalLine").hide(),this.element.find(".rq-gc-end-verticalLine").hide());this.element.hasClass("rq-gc-parentBar")&&
this.element.hasClass("parentBar-style")||this.element.removeClass("rq-taskbar-shadow");null!=this.$startResizeMarker&&this.$startResizeMarker.hide();null!=this.$endResizeMarker&&this.$endResizeMarker.hide()},taskStartAndEndTime:null,DragThumb:null,ResizeThumb:null,StartResizeThumb:null,DragThumb:null,_onInit:!1,_create:function(){this._onInit=!0;var a=this,b=this.options.GanttChart;!1==b.options.IsPrinting&&(a._validateOptions(),b.AddTICByData(this.options.Data,this));b=a.element;a.SizeChanged=b.attr("SizeChanged");
a.SizeChanged=a.SizeChanged&&window[a.SizeChanged]?window[a.SizeChanged]:null;b.data("TaskBar",a);b.attr("index",this.options.index);a.element[0].DataContext=a.options.Data;b=a.options;a._updateBindingProp();a.updateValues();a._updateTaskBarHeight();a._events();this.taskStartAndEndTime={Data:b.Data,Name:b.Data.Name,originalStart:a.options.StartTime,originalEnd:b.EndTime,originalWidth:0,originalLeft:0,ProposedEnd:null,ProposedStart:null,HasChanged:a.HasChanged};a.options.FlexyGantt.options&&!1==a.options.FlexyGantt.options.isStaticTaskBars&&
(a.DragThumb=f(".rq-taskbar-dragThumb:eq(0)",this.element),0==a.DragThumb.length&&(a.DragThumb=f(".dragThumb:eq(0)",this.element)),a.ResizeThumb=f(".rq-taskbar-resizeThumb:eq(0)",a.element).addClass("rq-fg-gc-taskBarResizer"),0==a.ResizeThumb.length&&(a.ResizeThumb=f(".resizeThumb:eq(0)",a.element).addClass("rq-fg-gc-taskBarResizer")),a.StartResizeThumb=f(".rq-gc-startTaskBarResizer:eq(0)",a.element).addClass("rq-fg-gc-taskBarResizer"),0==a.StartResizeThumb.length&&(a.StartResizeThumb=f(".start-resizeThumb:eq(0)",
a.element).addClass("rq-fg-gc-taskBarResizer")),a.listenToInitShiftAndResizeTracker());this._listenForMouseEnterAndLeave();a.progressTemp();a._OnRecomputeLocation();b=a.options.GanttChart;b.element.bind("ganttcharttimeindicatorlineoptionchanged",function(b,c){a._OnRecomputeLocation()}.bind(this));void 0!=a.options.Data.PropertyChanged&&a.options.Data.PropertyChanged.subscribe(a.DataPropertyChangeFunction,a);0!=b.options.TimeIndicatorLineOption&&f(".verticalLine:eq(0)",this.element).click(function(a){a.stopPropagation()});
this._onInit=!1},_listenForMouseEnterAndLeave:function(){this.TaskBarRectangle=this.element;this.TaskBarRectangle.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));this.TaskBarRectangle.bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this))},enableTemp:function(){return this._progressPercentBinder&&!1==this.TaskBarRectangle.hasClass("rq-gc-milestoneBar")?
!0:!1},progressTemp:function(){if(this.enableTemp()){var a=f(".rq-gc-progressbar",this.element);a.length?this.ProgressBarRectangle=a:(this.ProgressBarRectangle=f("<div class='rq-gc-progressbar progressbarStyle'></div>"),this.element.append(this.ProgressBarRectangle))}},getProgressstyle:function(){this.BarWidth=this.OriginalWidth;this._UpdateProgressBarPosition(this.OriginalLeft);this.ProgressBarRectangle[0].style.width=(0>this.CompletedWidth?this.BarWidth:this.CompletedWidth).toString()+"px";this.ProgressBarRectangle.css("border-width",
"1px");this.ProgressBarRectangle.css("border-style","solid");1>=this.CompletedWidth&&this.ProgressBarRectangle.css("border-width","0px");var a=this.element.height();this.ProgressBarRectangle.css("margin-top",a/2-3+"px")},_UpdateProgressBarPosition:function(a){var b=this.ProgressPercent(),b=this.OriginalWidth*(b?b:0)/100;0==this.BarWidth?this.OriginalCompletedWidth=this.CompletedWidth=0:0>b?this.OriginalCompletedWidth=this.CompletedWidth=0:(this.OriginalCompletedWidth=b,b-=a-this.OriginalLeft,0>b&&
(b=0),b>this.BarWidth?b=this.BarWidth:b==this.BarWidth&&(b-=2),this.CompletedWidth=b);this.ProgressPercentResizeThumb=f("div.rq-gc-progressbar-resizer",this.element);0==this.ProgressPercentResizeThumb.length&&(this.ProgressPercentResizeThumb=f("div.ui-progress-resizer",this.element));this.ProgressPercentResizeThumb.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));null!=this.ProgressPercentResizeThumb&&(10<this.BarWidth?
(this.ProgressPercentResizeThumb.show(),this.ProgressPercentResizeThumb.css("margin-left",this.CompletedWidth),this.ProgressPercentResizeThumb.css("height",f(this.TaskBarRectangle).css("height"))):this.ProgressPercentResizeThumb.hide())},asyncApplyToolTip:function(){},listenToInitShiftAndResizeTracker:function(){if(!0!=this.options.GanttChart.options.IsPrinting){var a=this;null==this._asyncShiftTimer&&(0<a.DragThumb.length||0<a.ResizeThumb.length||0<a.StartResizeThumb.length)&&f(a.element).unbind("mouseenter.tic").bind("mouseenter.tic",
function(){f(a.element).unbind("mouseenter.tic");a.ApplyTooltipSettings(a.element,a.options);0<a.DragThumb.length&&a.element.shiftTracker(a);(0<a.ResizeThumb.length||0<a.StartResizeThumb.length)&&a.element.resizeTracker(a,a.ResizeEnd);a.UpdateShiftAndResizeTracker(a.options)})}},asyncInitShiftTracker:function(){},asyncInitResizeTracker:function(){},getChildObject:function(a,b,c){b=b.split(".");for(var d=0;d<b.length;d++){var g=b[d],e=a;a=a[g+"_M"]?a[g+"_M"]():a[g];"function"==typeof a&&!1!=c&&(a=
a.call(e))}return a},OnChartRefreshUI:function(a,b){this._OnRecomputeLocation()},asyncUpdateShiftAndResizeTracker:function(a){},UpdateShiftAndResizeTracker:function(a){var b=this.element[0].getBoundingClientRect(),c=b.width;!1==RadiantQ.CanUseDefineProperty&&(c=b.right-b.left);b=Math.round(100*c)/100;taskStartAndEndTime={Data:a.Data,Name:a.Data.Name,originalStart:this.options.StartTime,originalEnd:a.EndTime,originalWidth:parseFloat(b),originalLeft:parseInt(this.element.css("margin-left"))};a=f(".resizer-style",
this.element);for(b=0;b<a.length;b++)f(a[b]).hasClass("start-resizer-style")&&f(a[b]).hasClass("rq-gc-startTaskBarResizer")||f(a[b]).css("margin-left",taskStartAndEndTime.originalWidth-4)},_validateOptions:function(){var a=this.options;window.console&&(a.IsParentTypeRow?(a.ParentTaskStartTime&&void 0==this.getChildObject(a.Data,a.ParentTaskStartTime)&&console.error("Data at Row no:"+(a.DataSource._displayIndex+1)+' does not have a property called "'+a.ParentTaskStartTime+'". Specify a correct ParentTaskStartTime value.'),
a.ParentTaskEndTime&&void 0==this.getChildObject(a.Data,a.ParentTaskEndTime)&&console.error("Data at Row no:"+(a.DataSource._displayIndex+1)+' does not have a property called "'+a.ParentTaskEndTime+'". Specify a correct ParentTaskEndTime value.')):a.Data&&(a.TaskStartTime&&void 0==this.getChildObject(a.Data,a.TaskStartTime)&&console.error("Data at Row No:"+(a.DataSource._displayIndex+1)+' does not have a property called "'+a.TaskStartTime+'". Specify a correct TaskStartTime value.'),a.TaskEndTime||
void 0!=this.getChildObject(a.Data,a.TaskStartTime)||console.error("Data at Row No:"+(a.DataSource._displayIndex+1)+' does not have a property called "'+a.TaskEndTime+'". Specify a correct TaskEndTime value.')))},DataPropertyChangeFunction:function(a,b){if(this.options.DataSource.IsParentType()){if(b.PropertyName==this.options.ParentTaskStartTime||b.PropertyName==this.options.ParentTaskEndTime)this.updateValues(),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this)}else if(b.PropertyName==
this.options.TaskStartTime||b.PropertyName==this.options.TaskEndTime)this.updateValues(),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this)},PartialUpdate:function(){this.refreshTaskBar()},TotalUpdate:function(){this.options.Parent.element.RedrawTaskRow()},_destroy:function(){f(this.options.Parent.element.element).unbind("heightChange."+this.eventNamespace);clearTimeout(this._asyncShiftTimer);clearTimeout(this._asyncResizeTimer);clearTimeout(this._asyncTooltipTimer);this._asyncShiftTimer=
this._asyncResizeTimer=this._asyncTooltipTimer=null;if(this.options.GanttChart){var a=this.options.GanttChart.TaskItemCtrlByData.indexOf(this);-1!=a&&this.options.GanttChart.TaskItemCtrlByData.RemoveAt(a)}this._onTaskBarLoadTimer&&(clearTimeout(this._onTaskBarLoadTimer),this._onTaskBarLoadTimer=null);this.disposeBindings&&this.disposeBindings();this.options.GanttChart.element.unbind("ganttcharttimeindicatorlineoptionchanged");this.options.GanttChart.RefreshUIEvent.unsubscribe(this.OnChartRefreshUI,
this);this.options.Data.PropertyChanged&&this.options.Data.PropertyChanged.unsubscribe(this.DataPropertyChangeFunction,this);this.options.Parent&&this.options.Parent.element&&(a=this.options.Parent.element._getIntersectingBlock(this,this.options.Parent.element),null!=a&&this.options.Parent.element.RemoveEntity(a,this));this.options.UseRQModelBinder&&RadiantQ.Unbind(this.element);delete this.element.taskBarInstance;delete this.element.taskClone;delete this.element.$dragThumbClone;delete this.element.$resizeThumbClone;
this.element.empty();this.element.data("TaskBar",null)},refreshTaskBar:function(){!0==this.CanUpdate()&&(this.options.GanttChart.options.OverlappedTasksRenderingOptimization?this.options.Parent.element.RedrawTaskRow():(this.updateValues(),this._OnRecomputeLocation(),this.UpdateTooltipContent(this.options.Data)))},_canUpdate:!0,TaskOnMouseHover:null,TaskViewOnMouseHover:null,CanUpdate:function(a){if(void 0==a)return this._canUpdate;a!=this._canUpdate&&(this._canUpdate=a)&&this.refreshTaskBar()},initChanges:!1,
DragEnd:function(a,b){a.CanUpdate(!1);if(!a.options.StartTime.equals(b.originalStart)||!a.options.EndTime.equals(b.originalEnd)){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalStart,b.originalEnd,"DragEnd",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(a,c);b.originalStart=c.StartTime;b.originalEnd=c.EndTime}c=b.originalEnd;a._setOption("StartTime",b.originalStart);a._setOption("EndTime",c);a.CanUpdate(!0)}a._canUpdate=
!0},ResizeEnd:function(a,b){a.CanUpdate(!1);if(!(b.forProgressBar&&!0==b.forProgressBar.isTrue||a.options.EndTime.equals(b.originalEnd))){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalStart,b.originalEnd,"ResizeEnd",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(a,c);b.originalEnd=c.EndTime}a._setOption("EndTime",b.originalEnd);a.CanUpdate(!0)}a._canUpdate=!0},ResizeStart:function(a,b){a.CanUpdate(!1);if(!a.options.StartTime.equals(b.originalStart)){if(0<
a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalStart,b.originalEnd,"ResizeStart",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(a,c);b.originalStart=c.StartTime}a._setOption("StartTime",b.originalStart);a.CanUpdate(!0)}a._canUpdate=!0},TooltipContent:null,DragTooltipContent:null,ResizeTooltipContent:null,ApplyTooltipSettings:function(a){a.attr("title","");this.LoadDefaultTooltipStyle();this.UpdateTooltipContent(this.options.Data)},
closeToolTip:function(){},UpdateTooltipContent:function(a,b){if(a.ProposedStart&&a.ProposedEnd){0==a.OriginalStart.compareTo(a.ProposedStart)&&0==a.OriginalEnd.compareTo(a.ProposedEnd)&&(a.HasChanged=!1);var c={Name:a.Name,StartTime:a.ProposedStart,DataSource:this.options.Data,EndTime:a.ProposedEnd,OriginalStart:a.OriginalStart,OriginalEnd:a.OriginalEnd,HasChanged:a.HasChanged,IsStartResize:b||!1};if(a.Duration){if(0>a.Duration.days)return;c.Duration=a.Duration}this.popupTemplate(c)}else a[this.stSourceBinding]&&
a[this.etSourceBinding]&&this.options.TaskTooltipTemplate&&this.UpdateTemplateContent(a)},popupTemplate:function(a){this.DragTooltipContent=f('<div align="center" />').append(this.options.MovingInfoPopup(a));a.Duration&&(this.ResizeTooltipContent=f('<div align="center" />').append(this.options.ResizeInfoPopup(a)))},toolTipTemplate:null,UpdateTemplateContent:function(a){this.toolTipTemplate=c(this.options.TaskTooltipTemplate);this.TooltipContent=f('<div class="TaskTooltip" />').append(this.toolTipTemplate(a))},
ConnectingInfo:function(a){this.options.ConnectingInfoPopup&&(this.DepConnContent=this.options.ConnectingInfoPopup(a))},LoadDefaultTooltipStyle:function(){f.isFunction(this.options.Data[this.stSourceBinding]);f.isFunction(this.options.Data[this.stSourceBinding]);!1==this.options.FlexyGantt.options.isStaticTaskBars&&this.popupStyle()},popupStyle:function(){this.options.MovingInfoPopup=this.options.MovingInfoPopup?c(this.options.MovingInfoPopup):c("<div><table class='rq-gc-taskbar-popup' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_StartString} :</b></td><td> "+
this._MakeItBoldWhenActualDate("${data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_FinishString}:</b> </td><td> "+this._MakeItBoldWhenActualDate("${data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>");this.options.ResizeInfoPopup=this.options.ResizeInfoPopup?c(this.options.ResizeInfoPopup):c("<div><table class='rq-gc-taskbar-popup' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_DurationString} :</b></td><td> "+
this._MakeItBoldWhenActualDate("#if (data.Duration){# #= data.Duration.days_M() #d #= data.Duration.hours_M() #h #}#")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_StartTimeString} :</b> </td><td> "+this._MakeItBoldWhenActualDate("${data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_EndTimeString} :</b></td><td> "+this._MakeItBoldWhenActualDate("${data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>");this._progressPercentBinder&&
(this.ProgressResizeContent=this.options.ProgressTemplate?c(this.options.ProgressTemplate):c("<div><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td><b>${ RadiantQ_ProgressPercentString }:</td><td>${ data }%</b></td></tr></table></div>"));!0==this.options.CanDrawDependency&&!this.options.ConnectingInfoPopup&&this.options.GanttChart.options.ConnectingInfoPopup&&(this.options.ConnectingInfoPopup=
c(this.options.GanttChart.options.ConnectingInfoPopup))},_MakeItBoldWhenActualDate:function(a){return"#if( data.HasChanged ){# "+a+"#}else {# <b>"+a+"</b>#}#"},LocationRecomputed:new ObjectEvent("LocationRecomputed"),SizeChanged:null,_OnRecomputeLocation:function(){var b,c;this._onTaskBarLoadTimer&&clearTimeout(this._onTaskBarLoadTimer);var d=this,g=d.options.GanttChart,e=d.options.Parent.element,h=d.element,m=g.options.ComputedStartTime,k=g.options.ComputedEndTime,l=d.options.StartTime,n=d.options.EndTime;
0<=l.compareTo(m)&&0>=l.compareTo(k)||0>=l.compareTo(m)&&0<=n.compareTo(k)||0<=n.compareTo(m)&&0>=n.compareTo(k)?!1==this._onInit&&(this.element.removeClass("notInRange"),m=this.options.index,0==f("[index='"+m+"']",e.TaskListControl).length&&(k=e.TaskListControl.eq(0).children(),0<k.length?(l=parseInt(k.eq(0).attr("index")),m<=l?this.element.insertBefore(k.eq(0)):e.TaskListControl.append(this.element)):e.TaskListControl.append(this.element))):(this.element.addClass("notInRange"),e._cache._taskItemCtrlByTicID[d.uuid]=
this,e._cache._hiddenTaskItemCtrlElems.append(this.element),this.element.addClass("notInRange"));d.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&(b=parseFloat(h.css("width")),c=parseFloat(h.css("margin-left")));var e=d.options,n=e.Parent.element,p=g.options,m=p.ComputedStartTime;d.getSchedule();if(null!=d.options.GanttChart){k=g.GetBTSTToRenderAgainst();l=g.GetBTUWToRenderAgainst();n=n.GetScheduleToPlotWith();this.CompletedWidth=
0;var q=a.ConvertToUnitsOfBaseScaleType(k,m,e.StartTime,n)*l,H=0,H=e.EndTime<e.StartTime?0:a.ConvertToUnitsOfBaseScaleType(k,e.StartTime,e.EndTime,n)*l;1>H&&(H=1);this.OriginalLeft=q;this.OriginalWidth=H;if(!(0>this.OriginalLeft+this.OriginalWidth||this.OriginalLeft>p.ViewWidth)){var p=d._GetBarRenderStartTime(e.StartTime),B=d._GetBarRenderStartTime(e.EndTime);(p!=e.StartTime||B!=e.EndTime)&&p<B&&(H=a.ConvertToUnitsOfBaseScaleType(k,p,B,n)*l,q=a.ConvertToUnitsOfBaseScaleType(k,m,p,n)*l)}this.enableTemp()&&
this.getProgressstyle();h.hasClass("rq-gc-parentBar")&&(H=Math.max(H,d.options.MinimumWidthForParentBar));h[0].style.width=H+"px";h[0].style["margin-left"]=q+"px";d.options.OverlappedTasksRenderingOptimization!=RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight||b==H&&c==q||(d.currentBlock=this.options.Parent.element._getIntersectingBlocks(this,this.options.Parent.element),d.options.Parent.element._blockIntact(this.currentBlock));0<d.LocationRecomputed.fn.length&&d.LocationRecomputed.raise(this);
d.updateThumbsAndRenderVerticalLines(h,H,q);d.SizeChanged&&d.SizeChanged.call(d.element,d.options.Data,g);d.options.GanttChart.options.OnTaskBarLoad&&(d._onTaskBarLoadTimer=setTimeout(function(){var a=d.options.GanttChart.options.OnTaskBarLoad;null!=a&&"function"==typeof a&&a.call(h,d);d._onTaskBarLoadTimer=null}.bind(d),0))}},asyncUpdateThumbs:function(a,b){},UpdateThumbs:function(a,b){var c=a.height();this.StartResizeThumb&&this.StartResizeThumb.length&&this.StartResizeThumb.css({height:c+"px",
width:"5px"});this.ResizeThumb&&this.ResizeThumb.length&&this.ResizeThumb.css({height:c+"px",width:"5px","margin-left":b-4+"px"})},updateThumbsAndRenderVerticalLines:function(a,b,c){var d=this;f(d.element).unbind("mouseenter.tic2").bind("mouseenter.tic2",function(){f(d.element).unbind("mouseenter.tic2");d.UpdateThumbs(a,b)});d.options.GanttChart.options.TimeIndicatorLineOption!=e.TimeIndicatorLines.None&&(!0==d._onInit?d.asyncRenderVerticalLine(c,b):d.renderVerticalLine(c,b))},asyncRenderVerticalLine:function(a,
b){var c=this;setTimeout(function(){c.renderVerticalLine(a,b)},0)},renderVerticalLine:function(a,b){var c=null,d={Data:this.options.Data,UseWidthForVerticalLines:!1,IsShifting:!1,UseWidthForTaskBar:!0};null!=this.options.GanttChart.options.ProvideWidthForMilestoneShape&&(c=this.options.GanttChart.options.ProvideWidthForMilestoneShape(this,d));var g=this.element,f=g.find("div.rq-gc-start-verticalLine"),h=g.find("div.rq-gc-end-verticalLine");if(0!=f.length||0!=h.length){var m=g.closest("tr");if(m.length){var k=
parseInt(g.css("margin-top"));g.height();var g=g.width(),m=m[0].offsetTop,l=0;!0==d.UseWidthForVerticalLines&&(l=c/2);c={height:m+k+"px","margin-left":l+"px","margin-top":-(m+k)+"px"};0!=f.length&&f.css(c);0!=h.length&&(!1==d.UseWidthForVerticalLines&&(c["margin-left"]=g+"px"),h.css(c))}}d=this.options.GanttChart.options.TimeIndicatorLineOption;(d&e.TimeIndicatorLines.Always)!=e.TimeIndicatorLines.Always||(d&e.TimeIndicatorLines.OnResize)==e.TimeIndicatorLines.OnResize?(f.hide(),h.hide()):(f.show(),
h.show())},_GetBarRenderStartTime:function(a){if(this.options.ApplyBarWidthOptimization){var b=this._ConvertXToTime(-10);if(a<b)return b}return a},_beginUpdateOverlapTasks:function(a){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){var b=this.options.Parent.element;this.currentBlock=b._getIntersectingBlock(a,b)}},_endUpdateOverlapTasks:function(a){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){var b=
this.options.Parent.element;null!=this.currentBlock&&(b._blockIntact([this.currentBlock]),this.currentBlock=null);a=b._getIntersectingBlocks(a);null!=a&&0<a.length&&b._blockIntact(a)}},_updateTaskItem:function(a,b,c,d){var g=this.element,e=RadiantQ.FlexyGantt.TaskItemControl,h=e.MarginForBars;f(g.parent().parent());var m=this.options.GanttChart.options.RowHeight-1,h=2*h,k=g[0].style.borderTopWidth,l=0,l=g[0].style.borderBottomWidth;g.hasClass("rq-gc-parentBar")&&g.hasClass("parentBar-style")?(k="0px"==
k||""==k?e.ParentBar_BorderTopWidth:parseInt(k),e="0px"==l||""==l?e.ParentBar_BorderBottomWidth:parseInt(g[0].style.borderBottomWidth),l=(m-h-(k+e))/d):(g="0px"==k||""==k?e.TaskBar_BorderTopWidth:parseInt(k),e="0px"==l||""==l?e.TaskBar_BorderBottomWidth:parseInt(l),l=(m-h-(g+e))/d);void 0!=d&&(b=l);c?(this.options.Parent.element.options.EnableOverlappedRenderingBindingProperty&&"string"==typeof this.options.Parent.element.options.EnableOverlappedRenderingBindingProperty&&!0!=this.options.DataSource._data[this.options.Parent.element.options.EnableOverlappedRenderingBindingProperty]&&
(a=0),a=0==a||void 0!=this.element.attr("heightSetBySrc")?a*b+RadiantQ.FlexyGantt.TaskItemControl.MarginForBars:a*(b+2*RadiantQ.FlexyGantt.TaskItemControl.MarginForBars+2)+RadiantQ.FlexyGantt.TaskItemControl.MarginForBars,this.element.css("height",b+"px").css("margin-top",a+"px"),this.setOverlappingProperty(this.options.Data,!0)):(this.element.css("height",b+"px").css("margin-top",RadiantQ.FlexyGantt.TaskItemControl.MarginForBars+"px"),this.setOverlappingProperty(this.options.Data,!1))},setOverlappingProperty:function(a,
b){-1!=this.options.index&&"3.1.1"==f.fn.jquery&&(a=this.options.DataSource._data[this.options.Parent.element.options.TasksListProperty][this.options.index]);f.isFunction(a.IsOverlapping)?a.IsOverlapping(b):a.IsOverlapping=b},_ConvertXToTime:function(b){var c=this.options,d=c.GanttChart.options;return c.ComputedStartTime+a.ConvertTimeUnitsToTimeSpan(d.BaseTimeScaleType,b/d.baseTimeUnitWidth)},_setOption:function(a,b){if("StartTime"==a||"EndTime"==a){var c;c="StartTime"==a?this.options.StartTime:this.options.EndTime;
if(!c.equals(b)){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "StartTime":this._updateStartAndEnd("StartTime");this.options.Parent.element.UpdateItemForCue(this.options.Data,b,c);break;case "EndTime":this._updateStartAndEnd("EndTime");break;case "TimeIndicatorLineOption":this._OnRecomputeLocation()}this.UpdateTooltipContent(this.options.Data);this.triggerEvent("startAndEndTimeChange",this,this.options.Data)}}},_updateStartAndEnd:function(a){switch(a){case "StartTime":if(this.options.StartTime){a=
this.options.Data;-1!=this.options.index&&"3.1.1"==f.fn.jquery&&(a=this.options.DataSource._data[this.options.Parent.element.options.TasksListProperty][this.options.index]);var b=a[this.stSourceBinding];a instanceof RadiantQ.Gantt.Model.IActivity&&(a.PreferredStartTime=this.options.StartTime.clone());if(f.isFunction(b))b()!=this.options.StartTime&&b(this.options.StartTime.clone());else if(a[this.stSourceBinding+"_M"])a[this.stSourceBinding+"_M"](this.options.StartTime.clone());else a[this.stSourceBinding]=
this.options.StartTime.clone()}break;case "EndTime":if(this.options.EndTime)if(a=this.options.Data,-1!=this.options.index&&"3.1.1"==f.fn.jquery&&(a=this.options.DataSource._data[this.options.Parent.element.options.TasksListProperty][this.options.index]),b=a[this.etSourceBinding],f.isFunction(b))b()!=this.options.EndTime&&b(this.options.EndTime.clone());else if(a[this.etSourceBinding+"_M"])a[this.etSourceBinding+"_M"](this.options.EndTime.clone());else a[this.etSourceBinding]=this.options.EndTime.clone()}}};
RadiantQ.Gantt.Widget.taskbar=h;RadiantQ.FlexyGantt.ShiftTrackerGlobal={IncludeVerticalMovingSupport:!1,TrackingTaskItemControl:null,MinDeltaYValue:4,CurrentDropRow:null,CurrentStartRow:null,deltaX:null,deltaY:null,GetDropCueLocationIn:function(a){},GetAdjustedDatetime:null,BeginVerticalDrag:new ObjectEvent("BeginVerticalDrag"),VerticalDragOver:new ObjectEvent("VerticalDragOver"),VerticalDragDrop:new ObjectEvent("VerticalDragDrop"),CreateDependencyEvent:new ObjectEvent("CreateDependencyEvent")};var m=
null,k=null,l=null,n=!1,p=!1;f.fn.shiftTracker=function(c){function d(a,b,c,g){var e=this.taskBarInstance,h=b.parents("div.rq-ganttChart"),m=e.options.GanttChart.VSB.$scrollContainer.scrollTop(),k=b.parents("div.rq-ganttChart"),e=b.offset();a.offsetX=a.clientX-e.left;a.offsetY=a.clientY-e.top;this.timelineHeight=f("div.rq-tsh-div",h).outerHeight(!0);h=b.height()/2;h=e.top-k.offset().top-(this.timelineHeight-h)+m;!0==c?(this.clickPosition={x:a.originalEvent.touches[0].clientX,y:a.originalEvent.touches[0].clientY},
b=a.originalEvent.touches[0].pageX-e.left+b[0].offsetLeft):(this.clickPosition={x:a.clientX,y:a.clientY},b=a.offsetX+b[0].offsetLeft);c=this.taskBarInstance.options.FlexyGantt;c.AdjustLinkLineStartPosition.isSubscribed()&&(e={},e.top=h,e.left=b,e.event=a,c.AdjustLinkLineStartPosition.raise(this,e),h=e.top,b=e.left);g.css({top:h,left:b})}var g=this;c={that:this,$dragThumbClone:this.$dragThumbClone=null,taskBarInstance:this.taskBarInstance=c,widgetName:this.widgetName="TaskItemControl",$doc:f(document),
DragThumb:this.taskBarInstance.DragThumb,lastMouseX:0,lastMouseY:0,lastElemLeft:0,lastElemTop:0,_mouseMoveDelegate:null,_mouseUpDelegate:null,DragComplet:new ObjectEvent("DragComplet"),totalMouseMoves:0,shiftTrackerGlobal:RadiantQ.FlexyGantt.ShiftTrackerGlobal,cloneMarginLeft:0,asTracker:null,IncludeVerticalMovingSupport:!1,BeginVerticalDrag:null,VerticalDragOver:null,VerticalDragDrop:null,CreateDependencyEvent:null,dropTarget:null,CurrentDropRow:null,TrackingTaskItemControl:null,IsShifting:!1,IsConnecting:!1,
timelineHeight:0,timer:null,clicks:0,$dragPopup:null,_renderer:null,prefrdLeft:0,clickPosition:{x:0,y:0},isTouchEnabled:!1,flexyGanttOptions:this.taskBarInstance.options.FlexyGantt.options,tstToRenderWith:null,btuwToRenderWith:0,wtsToRenderWith:null};c.taskBarInstance.IsVerticallyMoving=function(){return IsVerticallyMoving};g.dblclick(function(){this.clicks=0;clearTimeout(this.timer)}.bind(c));g.bind("touchstart."+this.widgetName,function(a){if(!this.flexyGanttOptions.IsReadOnly&&(this.isTouchEnabled=
!0,document.mouseButtonPressed=!0,f.fn.RQTooltip.CanShowTooltip=!1,!f(a.target).hasClass("label"))){a.stopPropagation();var b=m.call(this,a,g,!0),c=this;this.$doc.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName);this.$doc.unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown."+this.widgetName);this.$doc.bind("touchmove."+this.widgetName,function(a){q.call(c,a,b,g,!0)}).bind("touchend."+this.widgetName,function(a){document.mouseButtonPressed=
!1;f.fn.RQTooltip.CanShowTooltip=!0;y.call(c,a,b,g,!0);f(".rq-gc-dependencyCue-parent",c.taskBarInstance.options.GanttChart.element).remove()})}}.bind(c));g.bind("mousedown."+this.widgetName,function(a){if(3!=a.which&&!this.flexyGanttOptions.IsReadOnly&&!this.isTouchEnabled){g[0].uiTooltip&&(g[0].isDragging=!0);var b=this,c=b.DragThumb.clone();if(!f(a.target).hasClass("label")&&"collapse"!=c.css("visibility")&&"none"!=c.css("display")){document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=
!1;var d=a.screenX,e=a.screenY,h=m.call(this,a,g,!1);this._mouseMoveDelegate=function(a){return q.call(b,a,h,g,!1)};this._mouseUpDelegate=function(a){g[0].uiTooltip&&(g[0].isDragging=!1);document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;a.screenX==d&&a.screenY==e?(null!=this.timer&&clearTimeout(this.timer),this.clicks++,g.click(),this.timer=setTimeout(function(){2<=this.clicks&&(g.dblclick(),this.clicks=0)}.bind(this),80),this.$doc.unbind("mousemove."+this.widgetName).unbind("mouseup."+
this.widgetName).unbind("keydown."+this.widgetName),this.$doc.unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown."+this.widgetName),f("#clone",b.element).remove(),this.IsShifting=!1,this.shiftTrackerGlobal&&(this.shiftTrackerGlobal.CurrentDropRow=null),H&&H.call(this,a,!1)):y.call(b,a,h,g,!1);f(".rq-gc-dependencyCue-parent",this.taskBarInstance.options.GanttChart.element).remove()}.bind(this);this.$doc.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate)}}}.bind(c));var h,m=function(c,g,m){var l=this.taskBarInstance;l.KeyDownProxy=null;this.IncludeVerticalMovingSupport=this.shiftTrackerGlobal.IncludeVerticalMovingSupport;this.BeginVerticalDrag=this.shiftTrackerGlobal.BeginVerticalDrag;this.VerticalDragOver=this.shiftTrackerGlobal.VerticalDragOver;this.VerticalDragDrop=this.shiftTrackerGlobal.VerticalDragDrop;CurrentDropRow=this.shiftTrackerGlobal.CurrentDropRow;this.CreateDependencyEvent=this.shiftTrackerGlobal.CreateDependencyEvent;
this.TrackingTaskItemControl=this.shiftTrackerGlobal.TrackingTaskItemControl;var n=l.options.GanttChart,p=l.options.Parent.element;this.tstToRenderWith=n.GetBTSTToRenderAgainst();this.btuwToRenderWith=n.GetBTUWToRenderAgainst();this.wtsToRenderWith=p.GetScheduleToPlotWith();this.asTracker=new b(l.options.FlexyGantt);var q=A(c,g,m);this.asTracker.OnScroll.subscribe(function(a,b){x.call(this,c,l.$dragThumbClone,g,m,q)},this);n=g[0].getBoundingClientRect();this.asTracker.prevDeltaStartX=n.left;this.asTracker.prevDeltaEndX=
n.right;n=c.srcElement;if(!f(n).hasClass("resizer-style")||!f(n).hasClass("rq-fg-gc-taskBarResizer")){n=g[0].offsetWidth;p=g.height();l.$dragThumbClone=this.DragThumb.clone();l.$dragThumbClone[0].id="clone";l.$dragThumbClone.addClass("taskclone rq-taskbar-clone");h=f("<div id='rq-gc-dependencyCue-parent' class='rq-gc-dependencyCue-parent "+window.radiantQclasses.defaultClass+"'><div id='rq-gc-dependencyCue' class='rq-gc-dependencyCue'></div></div>");d.call(this,c,g,m,h);if(l.options.FlexyGantt.OnTaskBarMouseDown.isSubscribed()){var r=
{};r.event=c;r.dragThumbWidth=n;r.dragThumbHeight=p;l.options.FlexyGantt.OnTaskBarMouseDown.raise(this,r);n=r.dragThumbWidth;p=r.dragThumbHeight}var s=!0,u=g.data("TaskBar");this.shiftTrackerGlobal.TrackingTaskItemControl=u;var r=u.options,u=r.GanttChart.options,z=u.TimeIndicatorLineOption,y=e.TimeIndicatorLines;if((z&y.OnResize)==y.OnResize||(z&y.Always)==y.Always)$startVerticalLineClone=g.find("div.rq-gc-start-verticalLine").clone().show(),$endVerticalLineClone=g.find("div.rq-gc-end-verticalLine").clone().show(),
r={Data:r.Data,UseWidthForVerticalLines:!1,IsShifting:!0,UseWidthForTaskBar:!0},u=u.ProvideWidthForMilestoneShape,null!=u&&(this.$dragThumbClone.css("width",n+"px"),u=u(l,r),null!=u&&(s=!1,this.cloneMarginLeft=0,!0==r.UseWidthForTaskBar&&(this.cloneMarginLeft=u/2,l.$dragThumbClone.css("margin-left",-this.cloneMarginLeft+"px"),l.$dragThumbClone.css("width",n+"px")),!0==r.UseWidthForVerticalLines&&(this.cloneMarginLeft=u/2,$startVerticalLineClone.css("margin-left",this.cloneMarginLeft+"px"),$endVerticalLineClone.css("margin-left",
this.cloneMarginLeft+"px")))),l.$dragThumbClone.append($startVerticalLineClone),l.$dragThumbClone.append($endVerticalLineClone);!0==s&&l.$dragThumbClone.css("width",n-2+"px");l.$dragThumbClone.css("height",p-1+"px");l.$dragThumbClone.appendTo(g);n=g[0].getBoundingClientRect();p=n.width;!1==RadiantQ.CanUseDefineProperty&&(p=n.right-n.left);taskStartAndEndTime=l.taskStartAndEndTime;taskStartAndEndTime.originalStart=l.options.StartTime;taskStartAndEndTime.originalEnd=l.options.EndTime;taskStartAndEndTime.ProposedStart=
taskStartAndEndTime.originalStart;taskStartAndEndTime.ProposedEnd=taskStartAndEndTime.originalEnd;taskStartAndEndTime.OriginalStart=taskStartAndEndTime.originalStart;taskStartAndEndTime.OriginalEnd=taskStartAndEndTime.originalEnd;taskStartAndEndTime.originalLeft=parseFloat(f(g).css("margin-left"));n=Math.round(100*p)/100;taskStartAndEndTime.originalWidth=taskStartAndEndTime.OriginalWidth=n;taskStartAndEndTime.Duration=taskStartAndEndTime.OriginalDuration=null==this.wtsToRenderWith?a.GetTimeSpan(taskStartAndEndTime.originalStart,
taskStartAndEndTime.originalEnd):this.wtsToRenderWith.GetEffort(taskStartAndEndTime.originalStart,taskStartAndEndTime.originalEnd);k.call(this,c,l.$dragThumbClone,g,m,h)}return l.$dragThumbClone},k=function(a,b,c,d,g){var e=this.taskBarInstance,h;p=!1;void 0!=a.originalEvent.touches||null!=a.originalEvent.touches?(this.shiftTrackerGlobal.deltaX=0,this.shiftTrackerGlobal.deltaY=0):(this.shiftTrackerGlobal.deltaX=void 0==a.offsetX?a.originalEvent.layerX:a.offsetX,this.shiftTrackerGlobal.deltaY=void 0==
a.offsetY?a.originalEvent.layerY:a.offsetY);a||(a=window.event);a.which?h=3==a.which:a.button&&(h=2==a.button);h||(g=A(a,b,c,d),l=f(a.target).closest("tr"),this.lastMouseX=g.x,this.lastMouseY=g.y,this.lastElemLeft=b[0].offsetLeft,this.lastElemTop=b[0].offsetTop,e._beginUpdateOverlapTasks(e),e.UpdateTooltipContent(taskStartAndEndTime),this.shiftTrackerGlobal.CurrentStartRow=e.options.DataSource,f(e).GetDragOrResizeContent(e.DragTooltipContent,a,c,d),this.$dragPopup=f(".dragPopup",e.options.FlexyGantt.element),
e.KeyDownHandler=function(a){27==a.keyCode&&(f.fn.RQTooltip.CanShowTooltip=!0,e.KeyDownProxy=null,this.asTracker.EndTracking(),this.$doc.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName),f(e).RemoveDragOrResizeContent(c),e.$dragThumbClone.remove(),p=!0,a.cancel=!0,f(".rq-gc-dependencyCue-parent",e.options.GanttChart.element).remove(),!0==this.IsConnecting&&(this.IsConnecting=!1),null!=this.dropTarget&&(this.dropTarget=null),this.IsShifting=
!1,this.shiftTrackerGlobal.CurrentDropRow=null,H.call(this,a,!1),c[0].uiTooltip&&(c[0].isDragging=!1))},null==e.KeyDownProxy&&(e.KeyDownProxy=f.proxy(e.KeyDownHandler,this),this.$doc.bind("keydown."+this.widgetName,e.KeyDownProxy)))},q=function(a,b,c,d){var g=this.taskBarInstance;(n||"false"==b.attr("canhzdrag"))&&b.css("display","none");g=g.taskStartAndEndTime;null!=g.originalStart&&(this._renderer={StartTime:g.originalStart.clone(),EndTime:g.originalEnd.clone(),CanvasLeft:g.originalLeft});this._renderer.StartTime<=
this._renderer.EndTime&&(g=A(a,b,c,d),this.prefrdLeft=g.x-this.lastMouseX+this.lastElemLeft,x.call(this,a,b,c,d,g),c[0].uiTooltip&&c[0].uiTooltip.hide(),this.asTracker.MouseMovedTo({X:a.clientX,Y:a.clientY},n||this.IsConnecting))},y=function(a,b,c){f.fn.RQTooltip.CanShowTooltip=!0;this.asTracker.EndTracking();var d=this.taskBarInstance;this.IsShifting=!1;var g=d.taskStartAndEndTime;if(null!=g.ProposedStart&&null!=g.ProposedEnd){f(d).RemoveDragOrResizeContent(c);if(f(b).css("margin-left")){c=f(c).css("margin-left");
""==c&&(c=0);var e=f(b).css("margin-left");parseInt(e);parseInt(c)}g.originalStart=g.ProposedStart;g.originalEnd=g.ProposedEnd;d._endUpdateOverlapTasks(d);!1==this.DragComplet.isSubscribed(d.DragEnd)&&this.DragComplet.subscribe(d.DragEnd);this.DragComplet.raise(d,g)}!0==d.options.CanDrawDependency&&null!=this.dropTarget&&(this.CreateDependencyEvent.raise(d,{}),this.dropTarget=null);n&&C.call(this,a,H,!1);if(!0==this.IsConnecting||d.options.FlexyGantt.options.IsDependencyLinesReadOnly)this.IsConnecting=
!1;this.clickPosition={x:0,y:0};d.UpdateTooltipContent(d.taskStartAndEndTime);this.$doc.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown");this.$doc.unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown");this.$dragThumbClone=d.KeyDownProxy=null;b.remove();f("#rq-gc-dependencyCue-parent",d.options.GanttChart.element).remove()},A=function(a,b,c,d){c=b=0;a=!0==d?a.originalEvent.touches[0]:a;if(a.pageX||a.pageY)b=a.pageX,c=a.pageY;
else if(a.clientX||a.clientY)b=a.clientX,c=a.clientY;return{x:b,y:c}},x=function(b,c,d,g,e){b.shouldSyncDragCue=!1;var m=l;if(m&&0!=m.length){b.row_index=m[0].rowIndex;-1==b.row_index&&(b.row_index=f("tr",f(d).closest("table")).index(m));m=this.prefrdLeft+this.asTracker.GetOffsetDueToHScroll()+this.asTracker.GetOffsetDueToHPaging();var k=e.x-this.lastMouseX,r=e.y-this.lastMouseY;e=this.taskBarInstance;this.totalMouseMoves++;if(!(this.totalMouseMoves<this.shiftTrackerGlobal.MinDeltaYValue&&this.IncludeVerticalMovingSupport)){if(!1==
n&&!1==this.IsShifting&&!1==this.IsConnecting){Math.abs(r)>=this.shiftTrackerGlobal.MinDeltaYValue&&this.IncludeVerticalMovingSupport?n=!0:4<=Math.abs(r)&&!e.options.FlexyGantt.options.IsDependencyLinesReadOnly&&!e.options.FlexyGantt.options.IsReadOnly&&!0==e.options.CanDrawDependency?this.IsConnecting=!0:4<=Math.abs(k)&&"false"!=c.attr("canhzdrag")&&(this.IsShifting=!0);var q=this.taskBarInstance.options.FlexyGantt;if(q.DetermineShiftBehavior.isSubscribed()){var s={};s.event=b;s.xDelta=k;s.yDelta=
r;s.canHorizantalDrag=this.IsShifting;s.canDependencyDraw=this.IsConnecting;s.canVerticalDrag=n;q.DetermineShiftBehavior.raise(this,s);n=s.canVerticalDrag;this.IsConnecting=s.canDependencyDraw;this.IsShifting=s.canHorizantalDrag}this.IsConnecting&&f(".rq-gc-dependencysParent",e.options.GanttChart.element).append(h);!0==n&&(this.BeginVerticalDrag?(k={},k.event=b,k.cancel=!1,this.BeginVerticalDrag.raise(this,k),n=!1==k.cancel):n=!0)}if(n)p||(c.remove(),this.$dragPopup.remove(),C.call(this,b,L,!0));
else if(this.IsShifting){g=this.taskBarInstance;var r=this.asTracker.GetOffsetDueToHPaging(),q=this.asTracker.GetOffsetDueToHScroll(),k=g.options.GanttChart,s=this._renderer.CanvasLeft+this.cloneMarginLeft,t=s+this.prefrdLeft+q+r;if(k.options.CustomBarShiftOnMove)k.options.CustomBarShiftOnMove.call(this,b,s,t,k);else{var r=this.taskBarInstance,q=this.wtsToRenderWith,s=a.ConvertToEndTimeInBaseScaleType(this.tstToRenderWith,this._renderer.StartTime.clone(),s/this.btuwToRenderWith,t/this.btuwToRenderWith,
q),u=Date.today(),t={Value:s},u={Value:u},v=null==q?a.GetTimeSpan(this._renderer.StartTime,this._renderer.EndTime):q.GetEffort(this._renderer.StartTime,this._renderer.EndTime);r.options.FlexyGantt.ConvertToValidTimes(r.options.Data,s,v,t,u,"Move",b,r.element,q);s=t.Value;u=u.Value;r.taskStartAndEndTime.ProposedStart=k.options.Parent.RoundUp(s);r.taskStartAndEndTime.ProposedEnd=k.options.Parent.RoundUp(u)}0==g.taskStartAndEndTime.ProposedStart.compareTo(g.taskStartAndEndTime.originalStart)&&0==g.taskStartAndEndTime.ProposedEnd.compareTo(g.taskStartAndEndTime.originalEnd)?
g.taskStartAndEndTime.HasChanged=!1:g.taskStartAndEndTime.HasChanged=!0;e.UpdateTooltipContent(e.taskStartAndEndTime);this.$dragPopup.empty();this.$dragPopup.append(e.DragTooltipContent);this.$dragPopup.css("visibility","visible");d[0].uiTooltip&&d[0].uiTooltip.hide()}else this.IsConnecting&&(e=this.taskBarInstance,c.remove(),k=this.asTracker.GetOffsetDueToHScroll(),r=this.asTracker.GetOffsetDueToVScroll(),!0==g&&(b.pageX=b.originalEvent.touches[0].pageX,b.pageY=b.originalEvent.touches[0].pageY),
f(".rq-gc-dependencyCue-parent:gt(0)").remove(),$DeplinkLine=f(".rq-gc-dependencyCue-parent",e.options.GanttChart.element),0==f(".rq-gc-dependencyCue-arrow",e.options.GanttChart.element).length&&$DeplinkLine.append("<div id='rq-gc-dependencyCue-arrow' class='rq-gc-dependencyCue-arrow "+window.radiantQclasses.defaultClass+"' style='width:0; height:0; z-index:2;  position:relative; border-top-width:5px; border-top-style:solid; border-right:5px solid transparent; border-left:5px solid transparent; border-bottom-width:0px; margin-left:-4px;'</div>"),
$DeplinkInnerLineArrow=f(".rq-gc-dependencyCue",e.options.GanttChart.element),0<$DeplinkLine.length&&(d.parents("div.rq-ganttChart"),s=e.options.GanttChart.VSB.$scrollContainer.scrollTop(),q=d.offset().left+$DeplinkLine[0].offsetLeft-d[0].offsetLeft,s=$DeplinkLine[0].offsetTop-(d[0].parentElement.offsetHeight+d[0].offsetTop)+s,t=d.offset().top+s,s=d=0,this.clickPosition?(s=q=0,!0==g?(q=b.originalEvent.touches[0].clientX,s=b.originalEvent.touches[0].clientY):(q=b.clientX,s=b.clientY),q+=k,s+=r,d=e.options.FlexyGantt,
d.OnDependencyDrag.isSubscribed()&&(g={},g.fromTask=e.options.Data,g.lengtoTask=e.options.GanttChart.TaskOnMouseHover,g.startX=this.clickPosition.x,g.startY=this.clickPosition.y,g.currentX=q,g.currentY=s,d.OnDependencyDrag.raise(this,g),this.clickPosition.x=g.startX,this.clickPosition.y=g.startY,q=g.currentX,s=g.currentY),d=Math.sqrt((q-this.clickPosition.x)*(q-this.clickPosition.x)+(s-this.clickPosition.y)*(s-this.clickPosition.y)),s=180/3.1415*Math.acos((s-this.clickPosition.y)/d),q>this.clickPosition.x&&
(s*=-1)):(d=Math.sqrt((b.pageX-q)*(b.pageX-q)+(b.pageY-t)*(b.pageY-t)),s=180/3.1415*Math.acos((b.pageY-t)/d),b.pageX>q&&(s*=-1)),$DeplinkInnerLineArrow.css({height:d-7,"-webkit-transform":"rotate("+s+"deg)","-moz-transform":"rotate("+s+"deg)","-o-transform":"rotate("+s+"deg)","-ms-transform":"rotate("+s+"deg)",transform:"rotate("+s+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"}),$DeplinkLine.css({height:d-5,"-webkit-transform":"rotate("+s+"deg)","-moz-transform":"rotate("+
s+"deg)","-o-transform":"rotate("+s+"deg)","-ms-transform":"rotate("+s+"deg)",transform:"rotate("+s+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"}),$DeplinkLine.css({"pointer-events":"none"}),this.dropTarget=e.options.GanttChart.TaskOnMouseHover,d={ConnectingInfoFromTaskText:e.options.Data,ConnectingInfoToTaskText:""},null!=this.dropTarget&&this.dropTarget!=e.options.Data&&(d={ConnectingInfoFromTaskText:e.options.Data,ConnectingInfoToTaskText:e.options.Data!=this.dropTarget?
this.dropTarget:""}),e.ConnectingInfo(d),this.$dragPopup.empty(),this.$dragPopup.append(e.DepConnContent),this.$dragPopup.css("visibility","visible")))}!0==b.shouldSyncDragCue||n||c.css("margin-left",m+"px")}};c.shiftTrackerGlobal.GetDropCueLocationIn=function(a){var b,c;if(a.pageX||a.pageY)b=a.pageX,c=a.pageY;else if(a.clientX||a.clientY)b=a.clientX,c=a.clientY;return{X:b,Y:c}};var C=function(a,b,c){var d;d=a.originalEvent;d=void 0!=d.changedTouches||null!=d.changedTouches?f(document.elementFromPoint(d.changedTouches[0].clientX,
d.changedTouches[0].clientY)).closest("td.FlexyChartRow"):void 0!=d.touches||null!=d.touches?f(document.elementFromPoint(d.changedTouches[0].clientX,d.changedTouches[0].clientY)).closest("td.FlexyChartRow"):f(a.target).closest("td.FlexyChartRow");this.shiftTrackerGlobal.CurrentDropRow=0<d.length&&n?d.parent()[0]["data-grid-item"]:null;b.call(this,a,c)},L=function(a,b){p||(this.VerticalDragOver&&this.VerticalDragOver.raise(this,a),n=b)},H=function(a,b){this.VerticalDragDrop&&this.shiftTrackerGlobal.IncludeVerticalMovingSupport&&
n&&this.VerticalDragDrop.raise(this,a);n=b};this.data("TaskBar").options.FlexyGantt.element.getGridBody();this[0].mouseMovedTo=x;this[0].mouseClick=k};f.fn.getGridBody=function(a){return f(".ui-grid-body",a)};f.fn.resizeTracker=function(c,d){function g(a){27==a.keyCode&&(f.fn.RQTooltip.CanShowTooltip=!0,J.EndTracking(),f(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown",g),f(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown",
g),isShiftOrResize=!1,F[0].uiTooltip?(F[0].disableTooltip=!1,F[0].uiTooltip.show()):F.parent()[0].uiTooltip&&(F.parent()[0].disableTooltip=!1,F.parent()[0].uiTooltip.show()),f(this).RemoveDragOrResizeContent(F),f("#clone").remove())}var h=this,l=this;l.taskBarInstance=c;var n,p;l.$resizeThumbClone=null;var y=f(document),A=new ObjectEvent("ResizeComplet"),x=c.ResizeThumb,C=c.StartResizeThumb,L=null,H=null,B=0,F=f(h),N=F.data("TaskBar").options.FlexyGantt.options,G=!1;null!=l.taskBarInstance.options.ProgressPercentBinding&&
function(){var a=f("<div class='rq-gc-progressbar-resizer'></div>"),b=f("div.progressbarStyle",F);0==b.length&&(b=f("div.rq-gc-progressbar",F));if(b.length){var e=F.height(),h=b.width(),m=b.css("margin-top");a.css({height:e,"margin-left":h,"margin-top":m})}e=!1;0<F.parent("div.rq-gc-progressbar-resizer").length?e=!0:0<F.parent("div.ui-progress-resizer").length&&(e=!0);b.length&&c.enableTemp()&&!1==e&&F.append(a);b.length&&a.bind("mousedown."+c.widgetName,function(a){if(!G){document.mouseButtonPressed=
!0;f.fn.RQTooltip.CanShowTooltip=!1;var c=a.currentTarget;forProgressBar={isTrue:!0};var e=E.call(this,a,F,b,forProgressBar,!1);f(document).bind("mousemove."+this.widgetName,function(a){forProgressBar={isTrue:!0};var c=b,d=forProgressBar;B=S(a,e,c,!1,d).x-n+p;O.call(this,a,e,c,!1,d);J.MouseMovedTo({X:a.clientX,Y:a.clientY})}.bind(this)).bind("mouseup."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;forProgressBar={isTrue:!0};a=b;var h=forProgressBar;J.EndTracking();
document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;isShiftOrResize=!1;a[0].uiTooltip?(a[0].disableTooltip=!1,a[0].uiTooltip.show()):a.parent()[0].uiTooltip&&(a.parent()[0].disableTooltip=!1,a.parent()[0].uiTooltip.show());f(this).RemoveDragOrResizeContent(a);f("#clone").remove();this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd?this.taskStartAndEndTime.ProposedEnd:this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.OriginalDuration=this.ProposedDuration;
if(!0==h.isTrue){var m=f(e).css("width");m&&(a.css({width:m}),0!=parseInt(m)&&a.css({"border-width":"1px"}),f(c).css("margin-left",parseInt(a.css("width"))+"px"));this.ProgressPercent(_proposedProgress)}else m=new RadiantQ.Gantt.SetDurationAction(this.GanttControl,this.ActivityView.Activity_M(),this.ProposedDuration),this.GanttControl.ActionManager.RecordAction(m);this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime>this.taskStartAndEndTime.OriginalEnd?this.taskStartAndEndTime.OriginalEnd:
this.taskStartAndEndTime.ProgressEndTime;A.subscribe(d,this);A.raise(this,{taskStartAndEndTime:this.taskStartAndEndTime,forProgressBar:h});this.UpdateTooltipContent(this.options.Data);A.unsubscribe(d,this);a.removeClass("rq-taskbar-shadow");f(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown",g);f(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown",g)}.bind(this))}}.bind(l.taskBarInstance))}();var E=function(a,
b,c,d,g){var e=this.options;this.taskStartAndEndTime={Name:e.Data.TaskName,OriginalStart:e.StartTime,OriginalEnd:e.EndTime,originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProposedEnd:null,ProposedStart:null};this.taskStartAndEndTime[e.ProgressPercentProperty]=e.ProgressPercent;$progressClone=f("<div id='clone' class='taskclone rq-taskbar-clone  "+window.radiantQclasses.defaultClass+"'></div>");J=new RadiantQ.FlexyGantt.AutoScrollTracker(this.options.FlexyGantt);
J.OnScroll.subscribe(function(b,e){O.call(this,a,$progressClone,c,g,d)},this);$progressClone.css({width:c[0].offsetWidth-2+"px",height:b[0].offsetHeight-3+"px"});b.append($progressClone);M.call(this,a,$progressClone,c,d,g);a.stopPropagation();return $progressClone},O=function(a,b,c,d,g){a=J.GetOffsetDueToHScroll();a=B+a;d=c.parents(".rq-gc-taskbar");d.length||(d=c.parents(".taskbar"));d=d.width()||a;!0==g.isTrue&&(_proposedProgress=Math.round(100*(a/d)),0>_proposedProgress||0>a)&&(a=_proposedProgress=
0,J.preventAutoscroll=!0);a>d?(g.isTrue&&(J.preventAutoscroll=!0),B=d,f(b).css("width",B+"px")):(f(b).css("width",a+"px"),null!=H&&null!=H[0]&&(H[0].style["margin-left"]=a+"px"));!1==g.isTrue&&c.addClass("rq-taskbar-shadow");this.getSchedule();!0==g.isTrue&&(100<_proposedProgress?_proposedProgress=100:0>_proposedProgress&&(_proposedProgress=0));b=f(".dragPopup");b.empty();!0==g.isTrue?b.append(this.ProgressResizeContent(_proposedProgress)):b.append(this.ResizeTooltipContent);b.css("visibility","visible");
c[0].uiTooltip?c[0].uiTooltip.hide():c.parent()[0].uiTooltip&&c.parent()[0].uiTooltip.hide()},M=function(a,b,c,d,e){this.getSchedule();isShiftOrResize=!0;this.closeToolTip();c[0].uiTooltip?c[0].disableTooltip=!0:c.parent()[0].uiTooltip&&(c.parent()[0].disableTooltip=!0);n=S(a,b,c,e).x;p=b[0].offsetWidth;this.taskStartAndEndTime.ProposedStart=this.taskStartAndEndTime.OriginalStart;this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime;
_proposedProgress=this.ProgressPercent();b=c.closest(".rq-gc-taskbar");0==b.length&&(b=c.closest(".taskbar-style"));!0==d.isTrue?f(this).GetDragOrResizeContent(this.ProgressResizeContent(_proposedProgress),a,b,e):f(this).GetDragOrResizeContent(this.ResizeTooltipContent,a,c,e);f(document).bind("keydown",g.bind(this))},S=function(a,b,c,d,g){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var e=a.originalEvent.touches[0].pageX,f=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||
a.originalEvent.touches[0].clientY)e=a.originalEvent.touches[0].clientX,f=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)e=a.pageX,f=a.pageY;else if(a.clientX||a.clientY)e=a.clientX,f=a.clientY;return{x:e,y:f}};0<x.length&&(x.bind("mousedown."+l.widgetName,function(a){if(!N.IsReadOnly&&!G){document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var b=this,c=P.call(this,a,h,!1);y.bind("mousemove."+this.widgetName,function(a){return Q.call(b,a,c,h)}).bind("mouseup."+this.widgetName,
function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;return U.call(b,a,c,h)})}}.bind(l.taskBarInstance)),x.bind("touchstart."+l.widgetName,function(a){if(!N.IsReadOnly){G=!0;var b=this;document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var c=P.call(b,a,h,!0);y.bind("touchmove."+this.widgetName,function(a){return Q.call(b,a,c,h,!0)}.bind(this)).bind("touchend."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;return U.call(b,
a,c,h,!0)}.bind(this))}}.bind(l.taskBarInstance)));0<C.length&&(C.bind("mousedown."+l.widgetName,function(a){if(!N.IsReadOnly&&!G){var b=this;document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var c=P.call(b,a,h,!1,!0);y.bind("mousemove."+this.widgetName,function(a){return Q.call(b,a,c,h,null,!0)}.bind(this)).bind("mouseup."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;return U.call(b,a,c,h,null,!0)}.bind(this))}}.bind(l.taskBarInstance)),
C.bind("touchstart."+l.widgetName,function(a){if(!N.IsReadOnly){G=!0;var b=this;document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var c=P.call(b,a,h,!0,!0);y.bind("touchmove."+this.widgetName,function(a){return Q.call(b,a,c,h,!0,!0)}.bind(b)).bind("touchend."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;return U.call(b,a,c,h,!0,!0)}.bind(b))}}.bind(l.taskBarInstance)));var J=null,P=function(a,c,d,g){var f=this;f.KeyDownProxy=null;f.$resizeThumbClone=
x.clone();tstToRenderWith=this.options.GanttChart.GetBTSTToRenderAgainst();btuwToRenderWith=this.options.GanttChart.GetBTUWToRenderAgainst();wtsToRenderWith=this.options.Parent.element.GetScheduleToPlotWith();var h=c.height(),m=c[0].offsetWidth,k=2;J=g?new b(this.options.FlexyGantt,q.Left):new b(this.options.FlexyGantt,q.Right);J.OnScroll.subscribe(function(b,e){da.call(this,a,f.$resizeThumbClone,c,d,g)},this);var l="auto";!0==g&&(k=5,l=c.css("left"));f.$resizeThumbClone[0].id="clone";f.$resizeThumbClone.css({width:m-
k+"px",height:h-1+"px","margin-left":"0px",left:l,display:"block"}).addClass("taskclone rq-taskbar-clone");f.$resizeThumbClone.appendTo(c);Z.call(this,a,f.$resizeThumbClone,c,d,g);a.stopPropagation();h=f.options.GanttChart.options.TimeIndicatorLineOption;if((h&e.TimeIndicatorLines.OnResize)==e.TimeIndicatorLines.OnResize||(h&e.TimeIndicatorLines.Always)==e.TimeIndicatorLines.Always)L=c.find("div.rq-gc-start-verticalLine").clone().show(),H=c.find("div.rq-gc-end-verticalLine").clone().show(),f.$resizeThumbClone.append(L),
f.$resizeThumbClone.append(H);return f.$resizeThumbClone},R=0,Z=function(b,c,d,g,e){this.closeToolTip();d[0].uiTooltip&&(d[0].isResizing=!0);var h=this.element[0].getBoundingClientRect(),m=h.width;!1==RadiantQ.CanUseDefineProperty&&(m=h.right-h.left);n=ca(b,c,d,g).x;p=Math.round(100*m)/100;R=parseFloat(d.css("margin-left"));this._beginUpdateOverlapTasks(this);c=this.options.GanttChart.options.Parent;this.taskStartAndEndTime.originalStart=this.options.StartTime;this.taskStartAndEndTime.originalEnd=
this.options.EndTime;this.taskStartAndEndTime.ProposedStart=c.RoundUp(this.taskStartAndEndTime.originalStart);this.taskStartAndEndTime.ProposedEnd=c.RoundUp(this.taskStartAndEndTime.originalEnd);this.taskStartAndEndTime.OriginalStart=this.taskStartAndEndTime.originalStart;this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.originalEnd;this.taskStartAndEndTime.Duration=this.taskStartAndEndTime.OriginalDuration=null==wtsToRenderWith?a.GetTimeSpan(this.taskStartAndEndTime.originalStart,this.taskStartAndEndTime.originalEnd):
wtsToRenderWith.GetEffort(this.taskStartAndEndTime.originalStart,this.taskStartAndEndTime.originalEnd);this.taskStartAndEndTime.OriginalLeft=this.taskStartAndEndTime.originalLeft=parseFloat(d.css("margin-left"));m=Math.round(100*m)/100;this.taskStartAndEndTime.originalWidth=m;this.taskStartAndEndTime.OriginalWidth=this.taskStartAndEndTime.originalWidth;this.ProposedDuration=this.taskStartAndEndTime.OriginalDuration;this.UpdateTooltipContent(this.taskStartAndEndTime,e);f(this).GetDragOrResizeContent(this.ResizeTooltipContent,
b,d,g);this.KeyDownHandler=function(a){27==a.keyCode&&(f.fn.RQTooltip.CanShowTooltip=!0,this.KeyDownProxy=null,J.EndTracking(),y.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName),f(this).RemoveDragOrResizeContent(d),this.$resizeThumbClone.remove(),d[0].uiTooltip&&(d[0].isResizing=!1))};null==this.KeyDownProxy&&(this.KeyDownProxy=f.proxy(this.KeyDownHandler,this),y.bind("keydown."+this.widgetName,this.KeyDownProxy))},Q=function(a,b,c,d,g){B=
ca(a,b,c,d).x-n+this.taskStartAndEndTime.originalWidth;da.call(this,a,b,c,d,g);J.MouseMovedTo({X:a.clientX,Y:a.clientY})},U=function(a,b,c,d,g){null!=k&&clearInterval(k);null!=m&&clearInterval(m);k=m=null;J.EndTracking();c[0].uiTooltip&&(c[0].isResizing=!1);f(this).RemoveDragOrResizeContent(c);this.$resizeThumbClone.remove();this.KeyDownProxy=null;this._endUpdateOverlapTasks(this);A.clear();!0==g?A.subscribe(this.ResizeStart):A.subscribe(this.ResizeEnd);A.raise(this,this.taskStartAndEndTime);this.taskStartAndEndTime.originalEnd=
this.taskStartAndEndTime.originalEnd;this.taskStartAndEndTime.OriginalDuration=this.ProposedDuration;this.taskStartAndEndTime.originalStart=this.taskStartAndEndTime.ProposedStart;y.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown");y.unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown")},ca=function(a,b,c,d){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var g=a.originalEvent.touches[0].pageX,
e=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)g=a.originalEvent.touches[0].clientX,e=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)g=a.pageX,e=a.pageY;else if(a.clientX||a.clientY)g=a.clientX,e=a.clientY;return{x:g,y:e}},da=function(b,c,d,g,e){var h=J.GetOffsetDueToHScroll(),m=J.GetOffsetDueToHPaging();g=this.options.GanttChart;if(!0==e){var m=B-p+h+m,h=p-m,k=R;0>h?(h=0,k+=p,J.preventAutoscroll=!0):(k+=m,c.css("margin-left",
m+"px"));c.css("width",h+"px");null!=H&&0<H.length&&(H[0].style["margin-left"]=c.css("width"))}else h=B+h+m,0>h&&(h=0,J.preventAutoscroll=!0),c.css("width",h+"px"),null!=H&&null!=H[0]&&(H[0].style["margin-left"]=h+"px");g.options.CustomBarResizeOnMove?g.options.CustomBarResizeOnMove.call({taskBarInstance:this,taskStartAndEndTime:this.taskStartAndEndTime,element:d,GanttChart:g,tstToRenderWith:tstToRenderWith,btuwToRenderWith:btuwToRenderWith,wtsToRenderWith:wtsToRenderWith},b,k,h,e,d):(e?(this.taskStartAndEndTime.HasChanged=
this.taskStartAndEndTime.OriginalDuration==this.ProposedDuration?!1:!0,c=this.options.GanttChart.options,g=a.ConvertToEndTimeInBaseScaleType(tstToRenderWith,this.taskStartAndEndTime.OriginalStart.clone(),this.taskStartAndEndTime.OriginalLeft/btuwToRenderWith,k/btuwToRenderWith,wtsToRenderWith),k=a.ConvertUnitsInBaseScaleTypeToDurationInHours(tstToRenderWith,g,k/btuwToRenderWith,(this.taskStartAndEndTime.OriginalLeft+this.taskStartAndEndTime.originalWidth)/btuwToRenderWith,wtsToRenderWith),0>k&&(window.catchAllGanttExcetions&&
window.console&&window.console.error&&console.error("'durInHours' wouldn't be less than 0(zero) issue in 'resizeStartTo' method in TaskItemControl.js file."),k=0),c=c.Parent.RoundUpDuration(new RQTimeSpan(0,k,0,0)),g=k=Date.MinValue,k={Value:k},g={Value:g},this.options.FlexyGantt.ConvertToValidTimes(this.options.Data,this.taskStartAndEndTime.originalEnd.clone(),c,g,k,"ResizeAtStart",b,d,wtsToRenderWith),null!=RadiantQ.FlexyGantt.ShiftTrackerGlobal.GetAdjustedDatetime&&RadiantQ.FlexyGantt.ShiftTrackerGlobal.GetAdjustedDatetime(refadjustedStart,
!0),k=k.Value,g=g.Value,c=null==wtsToRenderWith?new RQTimeSpan(g-k):wtsToRenderWith.GetEffort(k,g),this.taskStartAndEndTime.ProposedStart=k,this.taskStartAndEndTime.originalStart=this.taskStartAndEndTime.ProposedStart,this.ProposedDuration=this.taskStartAndEndTime.ProposedDuration=c,this.taskStartAndEndTime.Duration=c,this.UpdateTooltipContent(this.taskStartAndEndTime,!0),b=f(".dragPopup"),b.empty(),b.append(this.ResizeTooltipContent),b.css("visibility","visible")):(this.taskStartAndEndTime.HasChanged=
this.taskStartAndEndTime.OriginalDuration==this.ProposedDuration?!1:!0,c=this.options.GanttChart.options,k=a.ConvertUnitsInBaseScaleTypeToDurationInHours(tstToRenderWith,this.taskStartAndEndTime.originalStart,this.taskStartAndEndTime.originalLeft/btuwToRenderWith,(this.taskStartAndEndTime.originalLeft+h)/btuwToRenderWith,wtsToRenderWith),k=new RQTimeSpan(0,k,0,0),g=this.taskStartAndEndTime.originalStart.clone(),m=g.clone(),m.addHours(k.getTotalHours()),h={Value:g},m={Value:m},this.options.FlexyGantt.ConvertToValidTimes(this.options.Data,
this.taskStartAndEndTime.originalStart.clone(),k,h,m,"ResizeAtEnd",b,d,wtsToRenderWith),m=m.Value,this.taskStartAndEndTime.originalStart<m&&(this.taskStartAndEndTime.ProposedStart=g,this.taskStartAndEndTime.ProposedEnd=c.Parent.RoundUp(m.clone()),this.taskStartAndEndTime.Duration=a.GetTimeSpan(this.taskStartAndEndTime.originalStart,m),k=null==wtsToRenderWith?a.GetTimeSpan(this.taskStartAndEndTime.originalStart,m):wtsToRenderWith.GetEffort(this.taskStartAndEndTime.originalStart,m),this.ProposedDuration=
c.Parent.RoundUpDuration(k),this.taskStartAndEndTime.Duration=this.ProposedDuration,this.taskStartAndEndTime.originalEnd=this.taskStartAndEndTime.ProposedEnd,this.UpdateTooltipContent(this.taskStartAndEndTime,!1)),b=f(".dragPopup"),f(b).empty(),f(b).append(this.ResizeTooltipContent),f(b).css("visibility","visible")),d[0].uiTooltip&&d[0].uiTooltip.hide());this.taskStartAndEndTime.HasChanged=this.taskStartAndEndTime.OriginalDuration==this.ProposedDuration?!1:!0;this.UpdateTooltipContent(this.taskStartAndEndTime,
e);e=f(".dragPopup");e.empty();e.append(this.ResizeTooltipContent);e.css("visibility","visible");d[0].uiTooltip&&d[0].uiTooltip.hide()}};f.fn.GetDragOrResizeContent=function(a,b,c,d){f(".dragPopup").remove();var g=f('<div class="dragPopup" style="visibility: hidden; position: absolute;" />');if(a){f(g).append(a);var e=!1;f(g).mousemove(function(){void 0!=this.refreshPostion&&(this.refreshPostion(e),e=!e)})}f(c).parents("div").filter(".rq-gc-viewsContainer-div");var h=f(c).parents("div").filter(".rq-ganttBase"),
m=f(".rq-gc-taskbar-popup",a);0==m.length&&(m=f(".draggingContent",a));f(h).append(g);f(c).css("z-index",15);g.css("z-index",25);c=f(c).height()+2;var k;!0==d?(h=b.originalEvent.touches[0].pageX,k=b.originalEvent.touches[0].pageY):(h=b.pageX,k=b.pageY);d=k+(c-(b.originalEvent.offsetY||0));a=h;g.css({left:a,top:d});var l=m.outerWidth(!0),n=m.outerHeight(!0),m=f(window);0>m.scrollTop()+m.height()-(g.offset().top+n)&&(d=k-(n+c),g.css({top:d}));c=h+l-m.width();0<c?(h-l,g.css({left:a})):-150<c&&(h-150,
g.css({left:a}));h=g[0].getBoundingClientRect();c=h.top-d;h=h.left-a;0==h&&0==c||g.css({left:a-h,top:d-c});b.clientX>m.width()-200&&g.css({left:b.pageX-200,top:d-c})};f.fn.RemoveDragOrResizeContent=function(a){f(a).css("z-index",10);f(".dragPopup").remove()};b.prototype.AutoScrollMode=function(a){if(0==arguments.length)return this.asMode;this.removeScrollTimers();if(a!=q.None){var b=this;this.scrollTimer=setInterval(function(){b.ScrollTick()},150)}this.asMode=a};b.prototype.GetOffsetDueToHScroll=
function(){return this.GanttChart.$GanttChart.scrollLeft()-this.StartXScrollPos};b.prototype.GetOffsetDueToHPaging=function(){return-1*this.GanttChart.ConvertTimeToX(this.ActualViewStartTime)};b.prototype.GetOffsetDueToVScroll=function(){return this.GanttChart.VSB.$scrollContainer.scrollTop()-this.StartYScrollPos};b.prototype.MouseMovedTo=function(a,b){this._pagingTimer&&(clearTimeout(this._pagingTimer),this._pagingTimer=null);if(!0==this.preventAutoscroll)return this.PreventAutoscroll();b=b||!1;
this.mouseCurPos={X:a.X,Y:a.Y};null!=this.scrollTimer&&(this.prevDeltaStartX==this.mouseCurPos.X&&this.prevDeltaEndX==this.mouseCurPos.X||this.prevDeltaStartY==this.mouseCurPos.Y&&this.prevDeltaEndY==this.mouseCurPos.Y)||(this.removeScrollTimers(),this.CheckForScroll(b),this.prevDeltaStartX=this.prevDeltaEndX=this.mouseCurPos.X)};b.prototype.CheckForScroll=function(a){if(!0==this.preventAutoscroll)return this.PreventAutoscroll();this.ValidateScrollMode==q.Left?this.mouseCurPos.X<=this.topLeft.X+25?
this.AutoScrollMode(q.Left):this.mouseCurPos.X>=this.bottomRight.X-25&&this.AutoScrollMode(q.Right):this.ValidateScrollMode==q.Right?this.mouseCurPos.X<=this.topLeft.X+25?this.AutoScrollMode(q.Left):this.mouseCurPos.X>=this.bottomRight.X-25&&this.AutoScrollMode(q.Right):this.mouseCurPos.X<=this.topLeft.X+10?this.AutoScrollMode(q.Left):this.mouseCurPos.X>=this.bottomRight.X-10?this.AutoScrollMode(q.Right):!a||"FlexyGantt"!=this.GanttBase.GanttType&&!1!=this.GanttChart.options.UseChartVirtualization||
!0==this.IgnoreVerticalAutoScroll||(this.mouseCurPos.Y<=this.topLeft.Y+10?this.AutoScrollMode(q.Up):this.mouseCurPos.Y>=this.bottomRight.Y-20&&this.AutoScrollMode(q.Bottom))};b.prototype.ScrollTick=function(){if(!0==this.preventAutoscroll)return this.PreventAutoscroll();switch(this.AutoScrollMode()){case q.Left:var a=this.GanttChart.HScrollBar.scrollLeft();0==a&&!0==this.EnablePagingOnAutoScroll?this._pagingTimer||(this._pagingTimer=setTimeout(function(){this.GanttChart.PageLeft();this.pagingCount--;
this._pagingTimer=null}.bind(this),500)):this.GanttChart.HScrollBar.scrollLeft(a-100);break;case q.Right:var a=this.GanttChart.HScrollBar.scrollLeft(),b=this.GanttChart.HScrollBar[0].scrollWidth-this.GanttChart.HScrollBar[0].clientWidth,c=Math.round(a);b==c&&!0==this.EnablePagingOnAutoScroll?this._pagingTimer||(this._pagingTimer=setTimeout(function(){this.GanttChart.PageRight();this.pagingCount++;this._pagingTimer=null}.bind(this),500)):this.GanttChart.HScrollBar.scrollLeft(a+100);break;case q.Up:a=
this.GanttChart.VSB.$scrollContainer.scrollTop();if(0==a)return this.PreventAutoscroll();this.GanttChart.VSB.$scrollContainer.scrollTop(a-100);break;case q.Bottom:a=this.GanttChart.VSB.$scrollContainer.scrollTop();if(a+2>=this.GanttChart.VSB.$scrollContainer[0].scrollHeight-this.GanttChart.VSB.$scrollContainer[0].clientHeight)return this.PreventAutoscroll();this.GanttChart.VSB.$scrollContainer.scrollTop(a+100)}this.OnScroll.raise(this)};b.prototype.HasPaged=function(){return 0!=this.pagingCount};
b.prototype.PreventAutoscroll=function(){this.EndTracking()};b.prototype.removeScrollTimers=function(){clearInterval(this.scrollTimer);this.scrollTimer=null;this.asMode=q.None};b.prototype.EndTracking=function(){this.removeScrollTimers();this.preventAutoscroll=!1};var q={None:"None",Left:"Left",Right:"Right",Up:"Up",Bottom:"Bottom"};RadiantQ.FlexyGantt.AutoScrollTracker=b;RadiantQ.FlexyGantt.AutoScrollModes=q})(jQuery);
(function(f,b){var e={tasksCollection:null,currentUniqueTaskSuffix:0,blocks:[],ItemTemplate:null,options:{name:"TasksListControl",viewStartTime:null,viewEndTime:null,ViewWidth:null,TreeViewItem:null,Data:null,TasksListProperty:null,ParentTasksListProperty:null,GanttChart:null,TimeIndicatorLineOption:null,IsParentTypeRow:null,BaseTimeUnitWidth:null,OverlappedTasksRenderingOptimization:null,TaskTemplate:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,
RowCount:null,Parent:null,KnockoutObjectName:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,FlexyGantt:null,DragThumb:null,ResizeThumb:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,UseRQModelBinder:!1,EnableAutoAdjustForSchedule:!0,CanDrawDependency:!1,MinimumWidthForParentBar:1,ProgressPercentBinding:null},TasksList:null,BrowseToTaskCueLeft:null,BrowseToTaskCueRight:null,BrowseToCueLeft:0,BrowseToCueRight:0,BrowseToTaskCueLeftVisibility:"none",
BrowseToTaskCueRightVisibility:"none",_cache:{_taskItemCtrlByTicID:{},_hiddenTaskItemCtrlElems:b("<div></div>"),_allTaskItemCtrls:[],_taskItemCtrlsInRange:[]},_create:function(){this._cache={_taskItemCtrlByTicID:{},_hiddenTaskItemCtrlElems:b("<div></div>"),_allTaskItemCtrls:[],_taskItemCtrlsInRange:[]};this._schedule=null;!1==this.options.GanttChart.options.IsPrinting&&this.options.Data.ChartRow(this.element.parent());this.element.data("TasksListControl",this);this._validateOptions();this.refresh()},
WorkTimeSchedule_M:function(a){if(null!=this._schedule)return this._schedule;if(a=this.options.GanttChart.options.RowRenderingScheduleBinding){var c=this.getNestedValue(this.options.Data._data,a.Property);this._schedule=a.Converter?a.Converter.Convert.call(this.options.Data,c,a.Property):""==b.trim(c)?null:c;void 0===this._schedule&&(this._schedule=this.options.GanttChart.options.WorkTimeSchedule)}else this._schedule=this.options.GanttChart.options.WorkTimeSchedule;return this.options.Data.Schedule=
this._schedule},GetScheduleToPlotWith:function(){var a=this.options.Data,b=this.options.GanttChart.options;if(null!=b.GetScheduleToPlotWith&&"function"==typeof b.GetScheduleToPlotWith){var d=b.GetScheduleToPlotWith(a);if(void 0!=d)return d}return null!=a&&null!=a.HierarchicalItem.ResourceSchedule_M()?a.HierarchicalItem.ResourceSchedule_M():b.WorkTimeSchedule},getNestedValue:function(a,c){for(var d=c.split("."),g=0;g<d.length;g++)"undefined"!=typeof a&&(a=a[d[g]+"_M"]?a[d[g]+"_M"]():a[d[g]]);return!0==
b.isFunction(a)?a():a||""},refreshVerticalLine:function(){for(var a=0;a<this.TasksList.length;a++){var b=this.TasksList[a].data("TaskBar");b&&b.renderVerticalLine()}},_validateOptions:function(){var a=this.options;window.console&&(a.Data.IsParentType()?!a.ParentTasksListProperty||"string"==typeof a.ParentTasksListProperty&&void 0!=a.Data._data[a.ParentTasksListProperty]||console.error('Data does not have a property called "'+a.ParentTasksListProperty+'". Specify a correct ParentTasksListProperty value.'):
a.TasksListProperty&&("string"==typeof a.TasksListProperty&&void 0!=a.Data._data[a.TasksListProperty]||console.error('Data does not have a property called "'+a.TasksListProperty+'". Specify a correct TaskListProperty value.')))},refresh:function(){this.TasksList=[];var a=this.element;b(this.element).bind("heightChange",function(){});this.TaskListControl=b("<div class='rq-gc-taskListContainer' style='height:100%;'></div>");a[0].appendChild(this.TaskListControl[0]);this.options.KnockoutObjectName=eval(this.options.KnockoutObjectName);
this._updateItemsSourceAndTemplates();this._enableTouchEvents();this._drawTaskBar();this.OnApplyTemplate();this.options.GanttChart.ViewportTimeRangeChanged.subscribe(this._ganttChart_ViewportTimeRangeChanged,this)},OnApplyTemplate:function(){this.BrowseToTaskCueLeft=b(this.options.TaskBarBrowseToCueLeftTemplate).css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.BrowseToTaskCueRight=b(this.options.TaskBarBrowseToCueRightTemplate).css({"margin-left":this.BrowseToCueRight,
display:this.BrowseToTaskCueRightVisibility});0<this.BrowseToTaskCueLeft.length&&(this.BrowseToTaskCueLeft.bind("touchstart mousedown",this._browseToTaskCue_Click),this.BrowseToTaskCueLeft[0].tasksListControl=this,this.BrowseToTaskCueLeft.addClass("rq-gc-browseCue-left"),this.BrowseToTaskCueLeft[0].title=window.RadiantQ_ScrollToTask,b("div:eq(0)",this.element).append(this.BrowseToTaskCueLeft));0<this.BrowseToTaskCueRight.length&&(this.BrowseToTaskCueRight.bind("touchstart mousedown",this._browseToTaskCue_Click),
this.BrowseToTaskCueRight[0].tasksListControl=this,this.BrowseToTaskCueRight.addClass("rq-gc-browseCue-right"),this.BrowseToTaskCueRight[0].title=window.RadiantQ_ScrollToTask,b("div:eq(0)",this.element).append(this.BrowseToTaskCueRight));this._ganttChart_ViewportTimeRangeChanged(this,null);(this.options.TaskBarBrowseToCueLeftTemplate||this.options.TaskBarBrowseToCueRightTemplate)&&this.options.GanttChart.BeforeChartHZScroll.subscribe(this._GanttChart_BeforeChartHZScroll,this)},_enableTouchEvents:function(){},
tapDownX:null,tapDownY:null,tapHoldTimer:null,canShowContextMenu:!1,timeOutFunctions:null,_onTouchstart:function(a){a=a.touches?a.touches[0]:a;var b=this;b.tapDownX=a.clientX;b.tapDownY=a.clientY;b.tapHoldTimer=setTimeout(function(){b.canShowContextMenu=!0},500)},_onTouchMove:function(){clearTimeout(this.tapHoldTimer)},_onTouchend:function(a){if("ShowContextMenu"==this.options.GanttChart.options.TouchTapAction||!0==this.canShowContextMenu){var b=a.changedTouches?a.changedTouches[0]:a;if(this.tapDownX==
b.clientX&&this.tapDownY==b.clientY){var d=this;clearTimeout(d.timeOutFunctions);d.timeOutFunctions=setTimeout(function(){d._showContextMenu(a,b)},40)}this.canShowContextMenu=!1}clearTimeout(this.tapHoldTimer)},_showContextMenu:function(a,c){if("mouse"!=a.pointerType&&4!=a.pointerType){var d=b.ui?b.ui.version||"1.5.2":null;d&&1.11<=parseFloat(d)&&b.isFunction(b.jQContextMenu)?b(a.target).jQContextMenu({x:c.clientX,y:c.clientY}):b.isFunction(b.contextMenu)&&b(a.target).contextMenu({x:c.clientX,y:c.clientY})}},
_GanttChart_BeforeChartHZScroll:function(a,b){this.BrowseToCueLeft+=b.diff;this.BrowseToTaskCueLeft&&this.BrowseToTaskCueLeft.css({"margin-left":this.BrowseToCueLeft});"none"==this.BrowseToTaskCueLeftVisibility&&(this.BrowseToCueRight+=b.diff);this.BrowseToTaskCueRight&&this.BrowseToTaskCueRight.css({"margin-left":this.BrowseToCueRight})},_browseToTaskCue_Click:function(a){var b=this.tasksListControl,d=b.options.GanttChart;this==b.BrowseToTaskCueLeft[0]?(b=b._tracker.GetNextTaskStartTimeLeft(d.VisualStartTime),
b==Date.MinValue?d._setOption("AnchorTime",d.VisualStartTime):d._setOption("AnchorTime",b)):(b=b._tracker.GetNextTaskStartTimeRight(d.VisualEndTime),b==Date.MinValue?d._setOption("AnchorTime",d.VisualEndTime):d._setOption("AnchorTime",b));a.preventDefault();return!1},addToViewModel:function(a,b){this.options.KnockoutObjectName&&(this.options.KnockoutObjectName[a]=b)},removeFromViewModel:function(){for(var a=0,b=this.options.RowCount,d="Row"+b+"Task"+a,g=this.options.KnockoutObjectName[d];g;)delete this.options.KnockoutObjectName[d],
a++,d="Row"+b+"Task"+a,g=this.options.KnockoutObjectName[d]},applayBindings:function(a,b){b?ko.applyBindingsToDescendants(a,b):ko.applyBindingsToDescendants(a)},TaskCollectionChange:function(){},_drawTaskBar:function(){this._updateMaxOverlappingTasksCount();this._destory();var a=this.options;b.isFunction(this.tasksCollection)&&(this.tasksCollection=this.tasksCollection());null!=this.ItemTemplate&&this.taskCollectionArray(this.tasksCollection)&&(this.isTemplateDefined(this.tasksCollection,a)?(a.FlexyGantt.UseTimeRangeFilteredTasksInRows()||
this._bindTaskCollectionChange(!0),this.tasksCollection.length&&this._createNewTaskbars()):(a=this._createNewTaskbar(this.tasksCollection._data,this.currentUniqueTaskSuffix++,0),this.TaskListControl.append(a)))},taskCollectionArray:function(a){return a._data||a instanceof Array?!0:!1},isTemplateDefined:function(a,b){return a instanceof Array&&(b.TasksListProperty||b.ParentTasksListProperty)?!0:!1},templateCache:{},taskTemplate:function(a){var c=null,c=null==this.templateCache[this.ItemTemplate]?RadiantQ.Template(this.ItemTemplate):
this.templateCache[this.ItemTemplate];a=b.trim(c(a));this.templateCache[this.ItemTemplate]=c;c=b(a);c.hasClass("rq-gc-parentBar")||c.addClass("taskbar");c.addClass("rq-gc-tooltip");return c},_bindTaskCollectionChange:function(a){function c(a,b){a.type?d(a.type,null!=b?b.items:b,null!=b?b.index:void 0):"Add"==b.Action?d("insert",b.NewItems):"Remove"==b.Action&&d("remove",b.OldItems)}function d(a,c,d){if("insert"==a)if(g.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight)g.RedrawTaskRow();
else{for(var e=document.createDocumentFragment(),f=0;f<c.length;f++){var p=d?d:g.tasksCollection.indexOf(c[f]);(p=g._createNewTaskbar(c[f],g.currentUniqueTaskSuffix++,p))&&!1==p.hasClass("notInRange")&&e.appendChild(p[0]);g.options.Parent.ApplyTooltip(p)}g.TaskListControl.append(e)}"Reset"==a&&(g.TaskListControl.empty(),g.tasksCollection.length&&(g._createNewTaskbars(),g.options.Parent.ApplyTooltip(b(".rq-gc-tooltip",g.options.Parent.element))));if("remove"==a)for(f=0;f<c.length;f++){d=c[f];a=[];
for(e=0;e<g.blocks.length;e++){var p=g.blocks[e],q=FirstOrDefaultEndityInArray(p.entities,d);if(null!=q&&(RemoveInArray(p.entities,q),!ContainsValueInArray(a,p))){a.push(p);break}}e=g.TasksList;for(d=0;d<e.length;d++)if(e[d][0].DataContext==c[f]){e[d].remove();e.splice(d,1);break}g.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&g._blockIntact(a)}try{g.options.KnockoutObjectName&&g.applayBindings(g.options.KnockoutObjectName)}catch(r){}c=
g.TasksList;for(f=d;f<c.length;f++)d=c[f],d.data("TaskBar").options.index=f,d.attr("index",f);g._updateBrowseToTaskCuesStates()}if(this.tasksCollection&&!1!=this.tasksCollection instanceof Array){var g=this;if(null==this.onSourceUpdated||void 0==this.onSourceUpdated)this.onSourceUpdated=c;this.tasksCollection.CollectionChanged?this.tasksCollection.CollectionChanged.unsubscribe(this.onSourceUpdated):b.observable(this.tasksCollection).unbind("insert remove replaceAll",this.onSourceUpdated);a&&(this.tasksCollection.CollectionChanged?
this.tasksCollection.CollectionChanged.subscribe(this.onSourceUpdated):b.observable(this.tasksCollection).bind("insert remove replaceAll",this.onSourceUpdated))}},RedrawTaskRow:function(){this._bindTaskCollectionChange(!1);this.TasksList=[];this.TaskListControl.empty();this.TaskListControl.remove();this._unsubscribeEvents();this.refresh();this.options.KnockoutObjectName&&this.applayBindings(this.options.KnockoutObjectName,this.element[0]);this.options.Parent.ApplyTooltip(b(".rq-gc-tooltip",this.element))},
_createNewTaskbar:function(a,b,d){var g=this.options,e=null,f=!1;if(g.KnockoutObjectName)try{for(var k in g.KnockoutObjectName)if(0==k.indexOf("Row")&&this.options.KnockoutObjectName[k]===a){e=k;f=!0;break}!1==f&&(e="Row"+g.RowCount+"Task"+b,this.addToViewModel(e,a))}catch(l){}b=this.ItemTemplate;this.ItemTemplate=this.ItemTemplate.replace(/RQDataContext/g,e);e=this.taskTemplate(a);f=null;if(f=e)k=!1,k="rq-gc-taskbar-label"==f.className,!1==k&&(k="label"==f.className),!1==k&&(e.addClass("taskItemControl"),
a.nodeType=function(){},d=e.eq(0)[this.getChildWidgetName("taskbar")]({baseTimeUnitWidth:40,GanttChart:g.GanttChart,Parent:{element:this},ApplyBarWidthOptimization:!0,OverlappedTasksRenderingOptimization:g.OverlappedTasksRenderingOptimization,ComputedStartTime:g.GanttChart.options.ComputedStartTime,Data:a,index:d,IsParentTypeRow:g.Data.IsParentType(),TaskStartTime:g.TaskStartTime,ProgressPercentBinding:g.ProgressPercentBinding,TaskEndTime:g.TaskEndTime,ParentTaskStartTime:g.ParentTaskStartTime,ParentTaskEndTime:g.ParentTaskEndTime,
TaskTooltipTemplate:g.TaskTooltipTemplate,MovingInfoPopup:g.MovingInfoPopup,TimeIndicatorLineOption:g.TimeIndicatorLineOption,FlexyGantt:g.FlexyGantt,ResizeInfoPopup:g.ResizeInfoPopup,DataSource:g.Data,KnockoutObjectName:g.KnockoutObjectName,DragThumb:g.DragThumb,ResizeThumb:g.ResizeThumb,StartResizeThumb:g.StartResizeThumb,UseRQModelBinder:g.UseRQModelBinder,EnableAutoAdjustForSchedule:g.EnableAutoAdjustForSchedule,CanDrawDependency:g.CanDrawDependency,MinimumWidthForParentBar:g.MinimumWidthForParentBar}),
a.nodeType=null,this.options.UseRQModelBinder&&RadiantQ.Bind(d,a),this.TasksList.push(d));this.ItemTemplate=b;return e},_createNewTaskbars:function(a){var b=document.createDocumentFragment();a||(a=this.tasksCollection);for(var d=0;d<a.length;d++){var g=this._createNewTaskbar(a[d],this.currentUniqueTaskSuffix,d);g&&!1==g.hasClass("notInRange")&&b.appendChild(g[0]);this.currentUniqueTaskSuffix++}this.TaskListControl.append(b);this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&
(this._destory(),this._processTasksListForOverlap())},_overlapTimer:null,_processTasksListForOverlap:function(){if(this.TasksList.length){for(var a=0;a<this.TasksList.length;a++){var b=this.TasksList[a].data("TaskBar");b&&this._onNewEntityAdded(b)}this._computeIndicesAndHeight()}this._updateMaxOverlappingTasksCount()},_computeIndicesAndHeight:function(){for(var a=0;a<this.blocks.length;a++)this.blocks[a].ComputeIndicesAndHeight()},_destroy:function(){this._refreshUIEventHandler&&this._refreshUIEventHandler.Dispose();
this._refreshUIEventHandler=null;this.element.empty();this._bindTaskCollectionChange(!1);this.blocks=[];this.element.data("TasksListControl",null);this._unsubscribeEvents();null!=this.options.KnockoutObjectName&&this.removeFromViewModel();!1==this.options.GanttChart.options.IsPrinting&&this.options.Data.ChartRow(null);this.tasksCollection&&this.tasksCollection.Destroy&&this.tasksCollection.Destroy()},_destory:function(){this.blocks=[]},_unsubscribeEvents:function(){this.options.GanttChart&&(this.options.GanttChart.ViewportTimeRangeChanged.unsubscribe(this._ganttChart_ViewportTimeRangeChanged,
this),this.options.GanttChart.BeforeChartHZScroll.unsubscribe(this._GanttChart_BeforeChartHZScroll,this))},_updateItemsSourceAndTemplates:function(){var a=this.options;a.IsParentTypeRow=a.Data.IsParentType();this.ItemTemplate=a.IsParentTypeRow?a.ParentTaskTemplate:a.TaskTemplate;a.Data.IsParentType()?null!=a.ParentTasksListProperty?a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data._data[a.ParentTasksListProperty],
a.ParentTaskStartTime,a.ParentTaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=a.Data._data[a.ParentTasksListProperty]:(a.FlexyGantt.UseTimeRangeFilteredTasksInRows(),this.tasksCollection=a.Data):null!=a.TasksListProperty?a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data._data[a.TasksListProperty],a.TaskStartTime,a.TaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,
this)):this.tasksCollection=a.Data._data[a.TasksListProperty]||[]:a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data,a.TaskStartTime,a.TaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=a.Data||[];"function"==typeof this.tasksCollection&&(this.tasksCollection=this.tasksCollection());this._initBrowseToCueTracker()},_taskCollectionChange:function(a,c){if("insert"==
a.type){for(var d=0;d<c.items.length;d++)this.tasksCollection.push(c.items[d]);this._createNewTaskbars();this.options.Parent.ApplyTooltip(b(".rq-gc-tooltip",this.options.Parent.element))}if("remove"==a.type)for(var g=this.TasksList.length,d=g-1;0<=d;d--)this.TasksList[d][0].DataContext==c.items[0]&&(this.TasksList[d].remove(),this.TasksList.splice(d,1));if("Reset"==a.type){g=this.TasksList.length;for(d=0;d<g;d++)this.TasksList[d].remove();this.TasksList.splice(0,g);this._createNewTaskbars();this.options.Parent.ApplyTooltip(b(".rq-gc-tooltip",
this.options.Parent.element))}try{this.options.KnockoutObjectName&&this.applayBindings(this.options.KnockoutObjectName,this.element[0])}catch(e){}},_updateMaxOverlappingTasksCount:function(){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){for(var a=1,c=0;c<this.blocks.length;c++)var d=this.blocks[c].GetRowCount(),a=d>a?d:a;this.options.Data&&(!1==this.options.GanttChart.options.IsPrinting?this.options.Data.MaxOverlappingBlocksRowCount(a):
this.options.GanttChart.options.RowHeightBinding&&this.options.GanttChart.options.RowHeightBinding.Converter?(a=this.options.GanttChart.options.RowHeightBinding.Converter(a),this.element.height(a-1),this.element.parent().height(a),c=this.options.FlexyGantt,c=c.GetGanttTable?c.GetGanttTable():b(".rq-FlexyTable").data("VWGrid"),c=b(c.GetRowFromData(this.options.Data)),c.length&&(d=b("td",c),d.height(a-1),d.css("height",a-1+"px"),d[0]._isTriggered||(d[0]._isTriggered=!0),c.height(a)),this.options.GanttChart.updateGanttDependencyLines(),
this.options.Data._resetMaxOverlappingBlocksRowCount()):this._updateChartRowHeight(this.options.Data))}},_updateChartRowHeight:function(a,c){var d=b(a.TableRow()).height();this.element.height(d-1);this.element.parent().height(d);this.options.GanttChart.updateGanttDependencyLines()},_onNewEntityAdded:function(a){var b=[];a.Height=parseInt(this.element[0].style.height);for(var d=0;d<this.blocks.length;d++)this.blocks[d].IsOverlapping(a,!0)&&b.push(this.blocks[d]);if(0==b.length)a=new OverlappingBlock(a),
this.blocks.push(a);else if(1==b.length)b[0].AddEntity(a),a=b[0];else{a=new OverlappingBlock(a);for(d=0;d<b.length;d++){for(var g=b[d],e=0;e<g.entities.length;e++)a.AddEntity(g.entities[e]);RemoveByValueInArray(this.blocks,g)}this.blocks.push(a)}return a},_blockIntact:function(a){if(a&&0<a.length){var b=[];a=[].concat(a);for(var d=[],g=0;g<a.length;g++){var e=a[g];RemoveByValueInArray(this.blocks,e);for(var f=0;f<e.entities.length;f++){var k=e.entities[f];b.push(k);k=this._onNewEntityAdded(k);ContainsValueInArray(d,
k)||d.push(k)}}for(g=0;g<d.length;g++)d[g].ComputeIndicesAndHeight()}this._updateMaxOverlappingTasksCount()},_getIntersectingBlock:function(a,b){for(var d=null,g=0;g<this.blocks.length;g++)if(this.blocks[g].IsOverlapping(a,!1)){d=this.blocks[g];break}return d},_getIntersectingBlocks:function(a){for(var b=[],d=0;d<this.blocks.length;d++)this.blocks[d].IsOverlapping(a,!1)&&b.push(this.blocks[d]);return b},RemoveEntity:function(a,b){var d=RemoveByValueInArray(a.entities,b);0==a.entities.length&&this.RemoveBlock(a);
return d},RemoveBlock:function(a){return RemoveByValueInArray(this.blocks,a)},_setOption:function(a,b){switch(a){case "viewStartTime":case "viewEndTime":this._updateStartAndEnd()}this.widgetBaseSetOption.apply(this,arguments)},_updateStartAndEnd:function(){for(var a=0;a<this.TasksList.length;a++)b(this.TasksList[a])[this.getChildWidgetName("taskbar")]({viewStartTime:this.options.viewStartTime,viewEndTime:this.options.viewEndTime})},_tracker:null,_cueTemplatePropertyChanged:function(a,b){a._initBrowseToCueTracker()},
isArray:function(a){return a instanceof Array},_initBrowseToCueTracker:function(){var a=this.options.TasksListProperty;if(null!=this.options.TaskBarBrowseToCueLeftTemplate||null!=this.options.TaskBarBrowseToCueRightTemplate){null!=this._tracker&&this._tracker.Dispose();var b=this.options.Data._data;this.options.IsParentTypeRow||null==a||(b=this.options.Data._data[a],b="function"==typeof b?b():b);b&&(!1==b instanceof RadiantQ.RQ_ObservableCollection&&(!1==this.isArray(this.tasksCollection)&&window.console&&
(b=[b]),new RadiantQ.RQ_ObservableCollection(b)),a=this.options.IsParentTypeRow?this.options.ParentTaskStartTime:this.options.TaskStartTime,RadiantQ.FlexyGantt.TasksPositionTracker&&null!=a&&(this._tracker=new RadiantQ.FlexyGantt.TasksPositionTracker(this.options.FlexyGantt,b,{Property:a})))}else null!=this._tracker&&this._tracker.Dispose()},_ganttChart_ViewportTimeRangeChanged:function(a,b){this.BrowseToCueLeft=this.options.GanttChart.GanttChart.scrollLeft();this.BrowseToCueRight=this.BrowseToCueLeft+
this.options.GanttChart.GanttChart[0].clientWidth-30;this._updateBrowseToTaskCuesStates()},_updateBrowseToTaskCuesStates:function(){this.BrowseToTaskCueLeftVisibility=null!=this.options.TaskBarBrowseToCueRightTemplate&&null!=this._tracker&&this._tracker.AreTasksAvailableBefore(this.options.GanttChart.VisualStartTime)?"block":"none";this.BrowseToTaskCueRightVisibility=null!=this.options.TaskBarBrowseToCueLeftTemplate&&null!=this._tracker&&this._tracker.AreTasksAvailableAfter(this.options.GanttChart.VisualEndTime)?
"block":"none";this.BrowseToTaskCueLeft&&this.BrowseToTaskCueLeft.css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.BrowseToTaskCueRight&&("block"==this.BrowseToTaskCueLeftVisibility&&(this.BrowseToCueRight=this.options.GanttChart.GanttChart[0].clientWidth-60),this.BrowseToTaskCueRight.css({"margin-left":this.BrowseToCueRight,display:this.BrowseToTaskCueRightVisibility}))},UpdateItemForCue:function(a,b,d){null!=this._tracker&&(this._tracker.UpdateTimes(b,d),
this._updateBrowseToTaskCuesStates())}};f.TasksListControl=e})(RadiantQ.Gantt.Widget,jQuery);
(function(f){var b=RadiantQ.Gantt.Utils.TimeComputingUtils,e={DependencyViews:null,options:{name:"GanttChart",TimeRangeHighlightBehavior:null,BottomTwoHeaders:null,TimeScaleHeaders:null,ComputedStartTime:null,ComputedEndTime:null,TimeIndicatorLineOption:RadiantQ.Gantt.TimeIndicatorLines.None,ProvideWidthForMilestoneShape:null,BaseTimeUnitWidth:null,BaseTimeScaleType:null,AnchorTime:null,ViewWidth:2E3,ResizeToFit:!1,ZoomOptions:null,ScrollOptions:null,CustomChartBackgroundRanges:null,BaseTimeUnitWidthMaximum:null,
BaseTimeUnitWidthMaximum:null,MinTimeUnitWidthForHeaderVisibility:null,OverlappedTasksRenderingOptimization:null,TaskItemTemplate:null,ParentTaskItemTemplate:null,ProgressBarTemplate:null,ProgressPercentBinding:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,TasksListProperty:null,ParentTasksListProperty:null,EnableOverlappedRenderingBindingProperty:"",FlatItemsSource:null,RowHeight:null,TaskBarHeight:null,
TaskTooltipTemplate:null,ConnectingInfoPopup:null,ResizeInfoPopup:null,MovingInfoPopup:null,EnablePagerButtonLeft:!0,EnablePagerButtonRight:!0,BeforePagingGanttChart:null,SpecialLineInfos:null,Parent:null,KnockoutObjectName:null,DependencyLineColor:null,DependencyListSource:null,GanttDependencyViews:null,WorkTimeSchedule:null,GanttType:null,EnableAlternativeRowBackground:!0,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1,UseChartVirtualization:!1,OnTaskBarLoad:null,
OnDependencyLineLoad:null,ShowContextMenuOnTouchTap:null,RowRenderingScheduleBinding:null,EnableCustomRowBackground:!1,EnableCustomRowForeground:!1,ShowVerticalScrollBar:!1,EnableAutoAdjustForSchedule:!0,CustomOverlappingBlockFn:null,AreTasksOverlappingCallBack:null,CanDrawDependency:!1,MileStoneTemplate:null,MinimumWidthForParentBar:1,EnablePagingOnAutoScroll:!1,CustomBarShiftOnMove:null,GetScheduleToPlotWith:null,DependencyTooltipTemplate:null,ShowPreferredStartIndicator:{Enabled:!1,ApplyDependenciesOnClear:!1,
initCallback:null},ShowDependencyLines:!0},AfterChartRowsRender:null,VSB:null,_canUpdate:!0,lave:null,TaskOnMouseHover:null,TaskViewOnMouseHover:null,CanUpdate:function(a,b){if(void 0==a)return this._canUpdate;a!=this._canUpdate&&(this._canUpdate=a)&&(this.UpdateGanttComponents(b),_canUpdate=!0)},GetRowFromData:function(a){a=a.uid;a=f(".rq-gc-rowsParent-table",this.element).find('tr[uid="'+a+'"]');return a.length?a:null},GetDataFromRow:function(a){a=f(a).data("uid");for(var b=0;b<this.options.FlatItemsSource.length;b++){if(this.options.FlatItemsSource[b].uid==
a)return this.options.FlatItemsSource[b];null}},OnAnchorTimeChanged:function(){this.triggerEvent("AnchorTimeChanged")},LoadingRow:function(a){this.element.trigger("LoadingRow",[a])},ViewableDependencyViews:new RQArray,RefreshUIEvent:new ObjectEvent("RefreshUIEvent"),RefreshRowBackground:new ObjectEvent("RefreshRowBackground"),RefreshRowForeground:new ObjectEvent("RefreshRowForeground"),TriggerRefreshUI:function(a){this.triggerEvent("RefreshUi",this,a);this.RefreshUIEvent.raise(this,a)},UpdateGanttComponents:function(a){this.TriggerRefreshUI({options:this.options,
isInit:!0,ForceToReDrawRows:a});this.ScrollViewerElement_LayoutUpdated();this.options.Parent.options.ShowGridTable&&(a=this.options.Parent.GetGanttTable())&&a.showTableBody&&a.showTableBody()},BeginUpdate:function(){this.CanUpdate(!1)},EndUpdate:function(a){this.CanUpdate(!0,a)},_validateViewWidth:function(){if(!this.options.ResizeToFit&&(300>this.options.ViewWidth||12E3<this.options.ViewWidth))throw"GanttChart.ViewWidth has to be in the range 300 to 12000";},headerZoomTracker:null,headerScrollTracker:null,
VisualStartTime:null,VisualEndTime:null,ViewportTimeRangeChanged:null,BeforeChartHZScroll:null,TaskItemCtrlByData:new RadiantQ.Gantt.Dictionary,AddTICByData:function(a,b){return this.TaskItemCtrlByData.Add(a,b)},GetTICByData:function(a){return this.TaskItemCtrlByData.GetItemByKey(a)},RemoveTICByData:function(a){return this.TaskItemCtrlByData.Remove(a)},_create:function(){this.TaskItemCtrlByData=new RadiantQ.Gantt.Dictionary;this.RefreshUIEvent=new ObjectEvent("RefreshUIEvent");this.ViewportTimeRangeChanged=
new ObjectEvent("ViewportTimeRangeChanged");this.BeforeChartHZScroll=new ObjectEvent("BeforeChartHZScroll");this.AfterChartRowsRender=new ObjectEvent("AfterChartRowsRender");this.element.addClass("rq-ganttChart");var a=this.$GanttChart=f('<div id="'+this._createUniqueID("GanttChart")+'" class="rq-gc-topDiv '+window.radiantQclasses.chartBackground+'" style="height:100%; width:100%;"/>');this.element.append(a);this.GanttChart=a;this.element.addClass("ui-widget-content");this.initialization();var b=
this.$ChartArea=f('<div id="'+this._createUniqueID("rq-gc-chartArea")+'" class="rq-gc-chartArea" style="width:100%; height:100%;position:relative;"/>');this.element.data("GanttChart",this);a.append(b);!1==this.options.IsPrinting&&this.initChartScrollBar();var d=this.$TimeSpanHeader=f('<div id="'+this._createUniqueID("timeSpanHeader")+'" class="timeSpanHeader"/>');b.append(d);d=f('<div id="'+this._createUniqueID("rq-gc-chartArea-div")+'" class="rq-gc-chartArea-div" style="width:'+this.options.ViewWidth+
'px; height:100%;position:relative; overflow:hidden;"/>');b.append(d);b=this.$TaskBarContainer=f('<div id="'+this._createUniqueID("rq-gc-viewsContainer-div")+'" class="rq-gc-viewsContainer-div" style="width:100%;position:absolute; height:inherit;"/>');d.append(b);this.$GanttChartCustomRangeBackgroundDIV=f('<div id="'+this._createUniqueID("rq-gc-customRange-background")+'" class="rq-gc-customRange-background" style="position:absolute;height:inherit;"/>').appendTo(d);this.$GanttChartBackgroundDiv=f('<div id="'+
this._createUniqueID("GanttChartBackgroundDiv")+'" class="GanttChartBackgroundDiv" style="position:absolute;width:100%;height:inherit;"/>').appendTo(d);this.$SpecialLinesDiv=f('<div id="'+this._createUniqueID("SpecialLinesDiv")+'" class="SpecialLinesDiv" style="position:absolute;height: inherit;"/>').appendTo(d);a.css("overflow","hidden");!1==this.options.IsPrinting&&this.ApplyDockPanelSettings(this.element);this.CanUpdate(!1);!1==this.options.IsPrinting&&this.options.Parent.OnChartTemplateApplied(this);
this.ViewableDependencyViews=new RQArray},initChartScrollBar:function(){var a=f("<div class='rq-gc-chartVSBContainer' style='float:left;'><div class='rq-gc-SB-header ui-widget-header'></div></div>"),b=f("<div class='rq-gc-chart-VScrollBar'><div class='rq-gc-chart-scrollContent' style='width: 1px;'></div></div>");a.append(b);this.element.append(a);!1==this.options.ShowVerticalScrollBar&&a.css("display","none")},_onVerticalScroll:!1,_$chartVSBContainer:null,_vsbScrollHandler:null,syncVerticalScrollBar:function(){function a(a,
b){var c=b.scrollTop();switch(a.which){case 38:b.scrollTop(c-50);break;case 40:b.scrollTop(c+50);break;case 33:var d=b[0].clientHeight;b.scrollTop(c-d);break;case 34:d=b[0].clientHeight,b.scrollTop(c+d)}}if(this.options.IsPrinting||this._onVerticalScroll||void 0==this.VSB){if(this.options.IsPrinting){var b=this.options.ShowVerticalScrollBar&&this.$rowsParent[0].scrollHeight>this.$rowsParent[0].clientHeight,d=f(".rq-gc-chart-VScrollBar",q),g=this.element.outerWidth();if(!1==b)this.$GanttChart.width(g);
else{var e=d.outerWidth()+3;l.width(g-e)}}}else{var m=this.options.Parent.element,k=this.getGridTBodyParent(m),l=this.$GanttChart,n=f(".rq-gc-chartArea-div",l),p=this.$rowsParent;this._$chartVSBContainer||(this._$chartVSBContainer=f(".rq-gc-chartVSBContainer",m));var q=this._$chartVSBContainer,d=f(".rq-gc-chart-VScrollBar",q),r=f(".rq-gc-chart-HScrollBar-content",this.HScrollBar),t=f(".rq-gc-pager-left-Button",this.HDockPanel),e=f(".rq-gc-pager-right-Button",this.HDockPanel),s=f("div.rq-gc-dependencysParent",
l),w=this.VSB.$actualContent,u=f(".rq-gc-chart-scrollContent",d),b=this.options.ShowVerticalScrollBar&&p[0].scrollHeight>p[0].clientHeight,g=this.element.outerWidth(),v=this.options.ViewWidth,z=t.outerWidth(!0)+e.outerWidth(!0),t=parseInt(p.css("margin-top")||"0");if(!1==b)l.width(g),q.css("display","none"),!1==this.options.ResizeToFit?r.width(v-z):r.width(0),n=n.height()-this.HDockPanel.outerHeight()-t,p.height(n),s.height(n);else{e=d.outerWidth()+3;l.width(g-e);q.css("display","block");!1==this.options.ResizeToFit?
r.width(v-z+e):r.width(0);g=f(".timeSpanHeader",m);m=f(".rq-gc-SB-header",m);q=g.outerHeight(!0);g=q-g.height();m.height(q+g);0<l.length&&(n=n.height()-this.HDockPanel.outerHeight()-t,d.height(n),p.height(n),s.height(n));this._vsbScrollHandler&&(this._vsbScrollHandler.Dispose(),this._vsbScrollHandler=null);0<k.length&&k.unbind(".syncGridVerticalBar");0<d.length&&d.unbind(".syncChartVerticalBar");0<p.length&&p.unbind(".syncGridVerticalBar");if(b){var y=this,A=0,x=0;0<l.length&&this.VSB&&(this._vsbScrollHandler=
this.VSB.OnScroll.subscribe(function(a,b,c){y.options.Parent.PreventDefaultFns||(x=p.scrollTop(),x!=A&&d.scrollTop(x))}),d.bind("scroll.syncChartVerticalBar",function(){if(this.options.Parent.PreventDefaultFns)return!1;this._onVerticalScroll=!0;A=d.scrollTop();x!=A&&p.scrollTop(A);this._onVerticalScroll=!1}.bind(this)),p.attr("tabindex","1"),p.bind("keydown.syncGridVerticalBar",function(b){this.options.Parent.PreventDefaultFns||(a(b,l),l.focus())}.bind(this)));if(k){var C=null;k.bind("mousewheel.syncGridVerticalBar",
function(a,b){if(this.options.Parent.PreventDefaultFns)return!1;null!=C&&clearTimeout(C);C=setTimeout(function(){var a=k.scrollTop();k.scrollTop(a-50*Math.round(b));C=null},0)}.bind(this));k.attr("tabindex","1");k.bind("keydown.syncGridVerticalBar",function(b){this.options.Parent.PreventDefaultFns||0<f(".editor",k).length||(a(b,k),k.focus())}.bind(this))}}!1==this.options.UseChartVirtualization&&(b=this.VSB.element.height(),this.VSB.UpdateScrollContentHeight(b))}w=w.height();u.height(w);s.children(".rq-gc-dependencyControl").height(w)}},
SyncChartScrollBarWith:function(a,b){RadiantQ.Gantt.RQPrint.InternalPrintOptions.IsNewPrinting||this.VSB.SyncScrollEventWith(a,b,this.options.Parent.VerticalScrollEvent)},getGridTBodyParent:function(a){return f(".ui-grid-body",a)},_createUniqueID:function(a){return this.element[0].id+"_"+a},_getUniqueSelectorIdByID:function(a){return"#"+this._createUniqueID(a)},ganttChart:null,refreshDockPanel:function(){var a=this,b=a.options.Parent.element;this.getGridTBodyParent(b);f(".rq-gc-chart-scrollBar",b);
var d=f(".rq-gc-pager-left-Button",a.element),g=f(".rq-gc-pager-right-Button",a.element);setTimeout(function(){var b=a.element.width();a.HScrollBar.width(b);var c=d.outerWidth(!0)+g.outerWidth(!0);a.HScrollBar.width(b-c);a.syncVerticalScrollBar();(a.VisualStartTime||a.options.ResizeToFit)&&a.ScrollViewerElement_LayoutUpdated()},200)},SyncChartScrollLeft:function(){var a=this.$GanttChart.scrollLeft(),b=this.HScrollBar.scrollLeft();a!=b&&this.$GanttChart.scrollLeft(b)},ScrollLeftTo:function(a){this.HScrollBar.scrollLeft(a)},
GetBTSTToRenderAgainst:function(){return this.options.BaseTimeScaleType<ns_gantt.TimeScaleType.Days?null!=this.options.BottomTwoHeaders&&0<this.options.BottomTwoHeaders.length&&this.options.BottomTwoHeaders[0].Type==ns_gantt.TimeScaleType.Days?ns_gantt.TimeScaleType.Days:this.options.BaseTimeScaleType:this.options.BaseTimeScaleType},GetBTUWToRenderAgainst:function(){return this.options.BaseTimeScaleType<ns_gantt.TimeScaleType.Days?null!=this.options.BottomTwoHeaders&&0<this.options.BottomTwoHeaders.length&&
this.options.BottomTwoHeaders[0].Type==ns_gantt.TimeScaleType.Days?this.options.BaseTimeScaleType==ns_gantt.TimeScaleType.Hours?Math.round(24E3*this.options.BaseTimeUnitWidth)/1E3:Math.round(144E4*this.options.BaseTimeUnitWidth)/1E3:this.options.BaseTimeUnitWidth:this.options.BaseTimeUnitWidth},_ganttChartEvents:function(){var a=this;f(window).resize(function(){a.refreshDockPanel()});var b=this.HScrollBar,d=this.$GanttChart,g=f(".rq-gc-pager-left-Button",this.HDockPanel),e=f(".rq-gc-pager-right-Button",
this.HDockPanel),m=f(".rq-gc-pager-left-arrow",this.HDockPanel),k=f(".rq-gc-pager-right-arrow",this.HDockPanel);b.height();var l=!0;b.scroll(function(g){g=d.scrollLeft();var e=b.scrollLeft();g==e||1==b[0].offsetHeight&&!l||(a.BeforeChartHZScroll.raise(this,{diff:e-g,value:g,newValue:e}),d.scrollLeft(e))});d.scroll(function(){d.scrollLeft()==b.scrollLeft()||1==b[0].offsetHeight&&!l||(l=!1,b.scrollLeft(d.scrollLeft()));a.ScrollViewerElement_LayoutUpdated()});g.bind("touchstart",function(b){a.PagerLeftBtnOnMouseDown(a,
m)});g.bind("touchEnd",function(b){a.PagerLeftBtnOnMouseUp(a,m)});g.mousedown(function(b){a.PagerLeftBtnOnMouseDown(a,m)});g.mouseup(function(b){a.PagerLeftBtnOnMouseUp(a,m)});e.bind("touchstart",function(b){!0!=a.options.Parent.PreventDefaultFns&&a.PagerRightBtnOnMouseDown(a,k)});e.bind("touchEnd",function(b){!0!=a.options.Parent.PreventDefaultFns&&a.PagerRightBtnOnMouseUp(a,k)});e.mousedown(function(b){!0!=a.options.Parent.PreventDefaultFns&&a.PagerRightBtnOnMouseDown(a,k)});e.mouseup(function(b){!0!=
a.options.Parent.PreventDefaultFns&&a.PagerRightBtnOnMouseUp(a,k)});e.hover(function(){a.options.EnablePagerButtonRight&&k.addClass("rq-gc-pager-right-arrow-hover")},function(){k.removeClass("rq-gc-pager-right-arrow-hover")});g.hover(function(){a.options.EnablePagerButtonLeft&&m.addClass("rq-gc-pager-left-arrow-hover")},function(){m.removeClass("rq-gc-pager-left-arrow-hover")})},PagerLeftBtnOnMouseDown:function(a,b){if(!0!=a.options.Parent.PreventDefaultFns&&a.options.EnablePagerButtonLeft){b.removeClass("rq-gc-pager-left-arrow-hover");
b.addClass("rq-gc-pager-left-arrow-click");var d=!1;null!=a.options.BeforePagingGanttChart&&(d=a.options.BeforePagingGanttChart("LeftPagerButton",b,a));d||a.PageLeft(!0)}},PagerLeftBtnOnMouseUp:function(a,b){a.options.EnablePagerButtonLeft&&(b.removeClass("rq-gc-pager-left-arrow-click"),b.addClass("rq-gc-pager-left-arrow-hover"))},PagerRightBtnOnMouseDown:function(a,b){if(!0!=a.options.Parent.PreventDefaultFns&&a.options.EnablePagerButtonRight){b.removeClass("rq-gc-pager-right-arrow-hover");b.addClass("rq-gc-pager-right-arrow-click");
var d=!1;null!=a.options.BeforePagingGanttChart&&(d=a.options.BeforePagingGanttChart("RightPagerButton",b,a));d||a.PageRight(!0)}},PagerRightBtnOnMouseUp:function(a,b){a.options.EnablePagerButtonRight&&(b.removeClass("rq-gc-pager-right-arrow-click"),b.addClass("rq-gc-pager-right-arrow-hover"))},GetBarRenderStartTime:function(a){this.ApplyBarWidthOptimization=!0;var b=this.ConvertXToTime(-10);return a.isLessThan(b)?b:a},GetBarRenderEndTime:function(a){this.ApplyBarWidthOptimization=!0;var b=this.ConvertXToTime(this.options.ViewWidth+
10);return a.isGreaterThan(b)?b:a},ScrollViewerElement_LayoutUpdated:function(){var a=this.VisualStartTime,b=this.VisualEndTime;this._updateVisualStartAndEnd();a==this.VisualStartTime&&b==this.VisualEndTime||this.OnViewportTimeRangeChanged()},_updateVisualStartAndEnd:function(){if(!0==this.options.ResizeToFit)this.VisualStartTime=this.options.ComputedStartTime,this.VisualEndTime=this.options.ComputedEndTime;else{var a=this.HScrollBar.scrollLeft();this.VisualStartTime=this.ConvertXToTime(a);this.VisualEndTime=
this.ConvertXToTime(a+this.GanttChart[0].clientWidth)}},OnViewportTimeRangeChanged:function(){this.syncVerticalScrollBar();this.ViewportTimeRangeChanged&&0<this.ViewportTimeRangeChanged.fn.length&&this.ViewportTimeRangeChanged.raise(this)},SetStartTime:function(a){var c=this.options.ComputedStartTime;if(this._isTrySetEndTime||a!=c)c=b.GetTimeSpan(c,this.options.AnchorTime),a=a.addTimeSpan(c),this._setOption("AnchorTime",a),baseUnitWidth=this.options.BaseTimeUnitWidth},ScrollToAnchorTime:function(a){if(!1==
this.options.IsPrinting){var b=this.HScrollBar,d=b[0],g=this.HScrollBar.width(),d=d.scrollWidth-g;!1==a?b.add(this.$GanttChart).scrollLeft(d/2+g/2-4):b.scrollLeft(d/2+g/2-4);this.SyncChartScrollLeft()}},BringTimeIntoView:function(a){var c=this.GetCurrentLeftMostVisibleTime(),d=this.GetCurrentRightMostVisibleTime();if(0<a.compareTo(c)||0<d.compareTo(a))!1==this.options.ResizeToFit?this._setOption("AnchorTime",a):(c=0,null!=this.options.BottomTwoHeaders&&(c=b.ConvertTimeUnitsToTimeSpan(this.options.BottomTwoHeaders[0].Type,
1)),a=a.addTimeSpan(c),this.SetStartTime(a))},TrySetEndTime:function(a){var c=this.options.ComputedStartTime,d=this.options.ComputedEndTime;if(a!=this.options.ComputedEndTime){if(a<c)throw"Specified endTime cannot be less that the current stat time of the chart view.";if(a>c){var g=f(this.element).parents().filter(".rq-ganttBase");!1==this.options.IsPrinting&&0==g.length&&window.console&&console.error&&console.error("SetEndTime can be called only when GanttChart is inside a GanttBase instance.");
var e=this.options.BaseTimeUnitWidth;a=b.GetDesiredBaseTimeUnitWidthForEndTime(c,a,c,d,this.options.BaseTimeScaleType,e);a<this.options.BaseTimeUnitWidthMinimum&&(a=this.options.BaseTimeUnitWidthMinimum);a>this.options.BaseTimeUnitWidthMaximum&&(a=this.options.BaseTimeUnitWidthMaximum);!1==this.options.IsPrinting?"ProjectGantt"==this.options.GanttType?g.data("GanttControl")._setOption("BaseTimeUnitWidth",a):g.data("FlexyGantt")._setOption("BaseTimeUnitWidth",a):this.options.BaseTimeUnitWidth=a;e!=
a&&(this._isTrySetEndTime=!0,this.SetStartTime(c),this._isTrySetEndTime=!1)}}},ApplyDockPanelSettings:function(a){var b=this.options.ViewWidth,d=this.element.width(),g="rq-gc-horizontalScrollBar";window.navigator&&navigator.platform&&null!=navigator.platform.match("Mac")&&(g+=" mac-os");var g=f('<div class="rq-gc-dockPanel rq-gc-pager-container"><table><tr><td class="pagerBtnStyle rq-gc-pager-left-Button" title="'+window.RadiantQ_TimeScaleLeftButtonTooltipString+'"><div class="rq-gc-pager-left-arrow"></div></td><td class="pagerBtnStyle rq-gc-scrollBarContainer" style="padding:0px !important;"><div class="'+
g+'" style="float: left; width: '+d+'px;"><div class="stretchDiv rq-gc-chart-HScrollBar-content" style="width: '+b+'px; height: 1px; margin-left:-2px;"></div></div></td><td class="pagerBtnStyle rq-gc-pager-right-Button" title="'+window.RadiantQ_TimeScaleRightButtonTooltipString+'"><div class="rq-gc-pager-right-arrow"></div></td></tr></table></div>'),e=f(".rq-gc-horizontalScrollBar",g),m=f(".rq-gc-pager-left-Button",g),k=f(".rq-gc-pager-right-Button",g);f(a).append(g);e.height();a=m.outerWidth(!0)+
k.outerWidth(!0);e.css({width:d-a+"px"});f(".rq-gc-chart-HScrollBar-content",e).width(b-a);this.HDockPanel=g;this.HScrollBar=e},initialization:function(){!0==this.options.ResizeToFit&&(this.options.ViewWidth=f(this.element).width());null==this.options.AnchorTime&&(this.options.AnchorTime=Date.today());this.options.ComputedStartTime=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(this);this.options.ComputedEndTime=RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert(this);this.headerZoomTracker=
new RadiantQ.Gantt.TimeSpanHeaderZoomTracker;this.headerScrollTracker=new RadiantQ.Gantt.TimeSpanHeaderScrollTracker},initializeGanttComponents:function(a){a=this.$ChartArea;f(a).height(f(a).height()-20);!1==this.options.IsPrinting&&this._ganttChartEvents();if(null!=this.options.TimeScaleHeaders){!1==this.options.IsPrinting&&this.options.Parent.triggerChildWidgetsCreated(this.element);this.initializeTimeSpanHeader();this.initializeCusromRangBackGround();this.initializeGanttChartBackground();this.initializeSpecialLine();
var b=this.RefreshUIEvent.subscribe(function(){b.Dispose();"ProjectGantt"==this.options.GanttType&&(this.initializeGanttChartRows(),this.initializeGanttDependencyLine(this.options.GanttDependencyViews));"FlexyGantt"==this.options.GanttType&&(this.initializeChartRow(),this.options.DependencyListSource&&(this.DependencyViews=new RadiantQ.FlexyGantt.FGDependencyViewList(this.options.DependencyListSource,this.options.Parent),this.initializeGanttDependencyLine(this.DependencyViews)))},this);(this._canUpdate||
!0==this.options.IsPrinting)&&b.fn.call(this)}this.ScrollToAnchorTime();a=this.getGridTBodyParent(this.options.Parent.element);this.VSB&&a&&this.SyncChartScrollBarWith(a,!0)},getLaveLeft:function(){var a=f(".ui-layout-resizer",this.element.closest(".ui-layout-container")).offset();return a=a?a.left:f(this.element).offset().left},_createLave:function(){f(".rq-gc-chartArea",this.element)},notifychange:function(a,b){},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "AnchorTime":this.ViewSpanChanged();
2<arguments.length?this.ScrollToAnchorTime(arguments[2]):this.ScrollToAnchorTime();this.OnAnchorTimeChanged();break;case "ViewWidth":this._validateViewWidth();var d=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({ViewWidth:this.options.ViewWidth});else d[this.getChildWidgetName("GanttRows")]({ViewWidth:this.options.ViewWidth});this.ViewSpanChanged(!0);var d=f(".rq-gc-pager-left-Button",this.element),g=f(".rq-gc-pager-right-Button",
this.element),d=d.outerWidth(!0)+g.outerWidth(!0);f(".rq-gc-chart-HScrollBar-content",this.element).width(this.options.ViewWidth-d);f(this._getUniqueSelectorIdByID("rq-gc-chartArea-div"),this.element).width(this.options.ViewWidth);d=f(this._getUniqueSelectorIdByID("rq-gc-viewsContainer-div"),this.element);depParent=f(".rq-gc-dependencysParent",d);0<depParent.length&&(f(depParent.dependencysParentDiv).width(this.options.ViewWidth),f(this._getUniqueSelectorIdByID("dependencysParentDiv"),this.element).width(this.options.ViewWidth));
break;case "BaseTimeUnitWidth":this.ViewSpanChanged();this.options.Parent.OnBaseTimeUnitWidthChanged();break;case "ResizeToFit":this.options.ResizeToFit&&(this.optionViewWidth=this.options.ViewWidth);this.ResizeToFitChanged();this.ViewSpanChanged();break;case "BaseTimeScaleType":this.ViewSpanChanged();break;case "CustomChartBackgroundRanges":this.initializeCusromRangBackGround();break;case "SpecialLineInfos":this.initializeSpecialLine();break;case "FlatItemsSource":this.ViewableDependencyViews=new RQArray;
this.triggerEvent("SourceUpdated",this,{options:this.options});(d=this.options.Parent.GetGanttTable())&&d.showTableBody&&d.showTableBody();break;case "WorkTimeSchedule":this.TriggerRefreshUI({options:this.options});break;case "TimeRangeHighlightBehavior":this.triggerEvent("TimeRangeHighlightBehaviorChanged",this,{options:this.options,BottomtwoHeaders:this.options.BottomTwoHeaders});break;case "TimeIndicatorLineOption":this.triggerEvent("TimeIndicatorLineOptionChanged",this,{options:this.options});
break;case "TaskBarBrowseToCueLeftTemplate":d=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({TaskBarBrowseToCueLeftTemplate:b});else d[this.getChildWidgetName("GanttRows")]({TaskBarBrowseToCueLeftTemplate:b});break;case "TaskBarBrowseToCueRightTemplate":d=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({TaskBarBrowseToCueRightTemplate:b});
else d[this.getChildWidgetName("GanttRows")]({TaskBarBrowseToCueRightTemplate:b});break;case "TaskBarBackgroundTemplate":d=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({TaskBarBackgroundTemplate:b});else d[this.getChildWidgetName("GanttRows")]({TaskBarBackgroundTemplate:b});break;case "TaskBarAdornerTemplate":d=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({TaskBarAdornerTemplate:b});
else d[this.getChildWidgetName("GanttRows")]({TaskBarAdornerTemplate:b});break;case "OverlappedTasksRenderingOptimization":d=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({OverlappedTasksRenderingOptimization:b});else d[this.getChildWidgetName("GanttRows")]({OverlappedTasksRenderingOptimization:b});break;case "ShowVerticalScrollBar":this.initChartScrollBar();break;case "DependencyListSource":this.DependencyViews&&
this.DependencyViews.Dispose();this.options.DependencyListSource?(this.DependencyViews=new RadiantQ.FlexyGantt.FGDependencyViewList(this.options.DependencyListSource,this.options.Parent),this.initializeGanttDependencyLine(this.DependencyViews)):this.DependencyViews=new RadiantQ.FlexyGantt.FGDependencyViewList([],this.options.Parent);break;case "UseChartVirtualization":d=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({UseChartVirtualization:b});
else d[this.getChildWidgetName("GanttRows")]({UseChartVirtualization:b});break;case "KnockoutObjectName":this.options.KnockoutObjectName=b;d=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({KnockoutObjectName:b});else d[this.getChildWidgetName("GanttRows")]({KnockoutObjectName:b});break;case "RowHeight":if(this.VSB&&(this.VSB.RowHeight=b),d=f(".rq-gc-rowsParent",this.element),"ProjectGantt"==this.options.GanttType)d[this.getChildWidgetName("GanttTaskItemsControl")]({RowHeight:b});
else d[this.getChildWidgetName("GanttRows")]({RowHeight:b})}(d=this.options.Parent.options)&&d[a]&&d[a]!=b&&(d[a]=b)},GetScrollableElement:function(){return f(this._getUniqueSelectorIdByID("GanttChart"),this.element)},widget:function(){return this.element},initializeCusromRangBackGround:function(){if(null!=this.options.CustomChartBackgroundRanges)this.$GanttChartCustomRangeBackgroundDIV.empty()[this.getChildWidgetName("GanttChartCustomRangeBackground")]({ViewStartTime:this.options.ComputedStartTime.clone(),
ViewEndTime:this.options.ComputedEndTime.clone(),headerInfo:this.options.TimeScaleHeaders,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,Parent:this,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,CustomChartBackgroundRanges:this.options.CustomChartBackgroundRanges,WorkTimeSchedule:this.options.WorkTimeSchedule})},initializeGanttChartBackground:function(){var a=this.options;
this.$GanttChartBackgroundDiv.empty()[this.getChildWidgetName("GanttChartBackground")]({ViewStartTime:a.ComputedStartTime.clone(),ViewEndTime:a.ComputedEndTime.clone(),headerInfo:a.TimeScaleHeaders,BaseTimeUnitWidth:a.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,GanttChart:{MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility},Parent:this,ViewWidth:a.ViewWidth,BottomTwoHeaders:a.BottomTwoHeaders,WorkTimeSchedule:a.WorkTimeSchedule,WorkingTimeBackground:a.WorkingTimeBackground,
NonWorkingTimeBackground:a.NonWorkingTimeBackground,TimeRangeHighlightBehavior:a.TimeRangeHighlightBehavior})},updateChatBGHeight:function(){var a=this.element.parents(".ui-layout-pane")[0].clientHeight-this.$TimeSpanHeader.outerHeight(!0),b=this.$GanttChartCustomRangeBackgroundDIV,d=this.$SpecialLinesDiv;f("div.ui-GanttTimeUnitBackground-unit",this.$GanttChartBackgroundDiv).height(a);f("div.rq-gc-specialLine",d).height(a);f("div.ui-customBackgroundRange-unit",b).height(a);f("div.rq-gc-chartArea-div",
this.element).height(a)},rowParentMarginTop:function(){return 1},initializeChartRow:function(){var a=this.$TaskBarContainer,b=this.$rowsParent=f('<div class="rq-gc-rowsParent rowsParent" style="position:absolute; overflow:hidden; height: inherit; width: inherit; margin-top:'+this.rowParentMarginTop()+'px;"></div>');f(a).empty().append(b);b[this.getChildWidgetName("GanttRows")]({Data:this.options.FlatItemsSource,TasksListProperty:this.options.TasksListProperty,ParentTasksListProperty:this.options.ParentTasksListProperty,
EnableOverlappedRenderingBindingProperty:this.options.EnableOverlappedRenderingBindingProperty,TaskTemplate:this.options.TaskItemTemplate,ParentTaskTemplate:this.options.ParentTaskItemTemplate,OverlappedTasksRenderingOptimization:this.options.OverlappedTasksRenderingOptimization,TaskStartTime:this.options.TaskStartTime,ParentTaskStartTime:this.options.ParentTaskStartTime,KnockoutObjectName:this.options.KnockoutObjectName,TaskEndTime:this.options.TaskEndTime,ParentTaskEndTime:this.options.ParentTaskEndTime,
GanttChart:this,RowHeight:this.options.RowHeight,TaskBarHeight:this.options.TaskBarHeight,ViewWidth:this.options.ViewWidth,TaskTooltipTemplate:this.options.TaskTooltipTemplate,ResizeInfoPopup:this.options.ResizeInfoPopup,MovingInfoPopup:this.options.MovingInfoPopup,FlexyGantt:this.options.Parent,TimeIndicatorLineOption:this.options.TimeIndicatorLineOption,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,
TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting,UseChartVirtualization:this.options.UseChartVirtualization,EnableCustomRowBackground:this.options.EnableCustomRowBackground,EnableCustomRowForeground:this.options.EnableCustomRowForeground,EnableAutoAdjustForSchedule:this.options.EnableAutoAdjustForSchedule,CustomOverlappingBlockFn:this.options.CustomOverlappingBlockFn,AreTasksOverlappingCallBack:this.options.AreTasksOverlappingCallBack,
CanDrawDependency:this.options.CanDrawDependency,ConnectingInfoPopup:this.options.ConnectingInfoPopup,MinimumWidthForParentBar:this.options.MinimumWidthForParentBar,ProgressPercentBinding:this.options.ProgressPercentBinding})},initializeGanttChartRows:function(){var a=this.$TaskBarContainer,b=this.$rowsParent=f('<div class="rq-gc-rowsParent rowsParent" style="position:absolute; overflow:hidden; height: inherit; margin-top:'+this.rowParentMarginTop()+'px;"></div>');f(a).empty().append(b);b[this.getChildWidgetName("GanttTaskItemsControl")]({Data:this.options.FlatItemsSource,
TaskTemplate:this.options.TaskItemTemplate,ParentTaskTemplate:this.options.ParentTaskItemTemplate,ProgressBarTemplate:this.options.ProgressBarTemplate,TaskBarBackgroundTemplate:this.options.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:this.options.TaskBarAdornerTemplate,GanttChart:this,MileStoneTemplate:this.options.MileStoneTemplate,RowHeight:this.options.RowHeight,TaskBarHeight:this.options.TaskBarHeight,KnockoutObjectName:this.options.KnockoutObjectName,ViewWidth:this.options.ViewWidth,TaskTooltipTemplate:this.options.TaskTooltipTemplate,
MovingInfoPopup:this.options.MovingInfoPopup,ResizeInfoPopup:this.options.ResizeInfoPopup,ConnectingInfoPopup:this.options.ConnectingInfoPopup,WorkTimeSchedule:this.options.WorkTimeSchedule,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting})},initializeSpecialLine:function(){this.$SpecialLinesDiv.empty()[this.getChildWidgetName("SpecialLines")]({ViewStartTime:this.options.ComputedStartTime.clone(),
ViewEndTime:this.options.ComputedEndTime.clone(),headerInfo:this.options.TimeScaleHeaders,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,WorkTimeSchedule:this.options.WorkTimeSchedule,Parent:this,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,SpecialLineInfos:this.options.SpecialLineInfos})},initializeGanttDependencyLine:function(a){var b=this.$TaskBarContainer,d=
f(".rq-gc-rowsParent",b).height(),g=f(".rq-gc-dependencysParent",b),e=f(".rq-gc-dependencyControl",g);0==g.length?(g=f('<div class="rq-gc-dependencysParent" id="dependencysParentDiv" style="position: absolute; overflow:hidden; width:100%; height:'+d+'px;"></div>'),g.css("display","none"),e=f("<div class='rq-gc-dependencyControl'></div>"),g.append(e),b.append(g)):e.empty();b=this.getChildWidgetName("GanttDependencyControl");e[b]({Data:this.options.FlatItemsSource,DependencyViews:a,GanttChart:this,
GanttModel:this.options.Parent.Model,UseChartVirtualization:this.options.UseChartVirtualization,DependencyTooltipTemplate:this.options.DependencyTooltipTemplate});this.DependenciesControl=e.data(b);!0==this.options.ShowDependencyLines?g.css("display","block"):g.css("display","none");a=this.options.Parent.getVirtualizedChartHeight(this.$rowsParent);e.css("height",a)},updateGanttDependencyLines:function(){this.DependenciesControl&&this.DependenciesControl.Refresh()},clearDepLines:function(){var a=f(".rq-gc-dependencysParent",
this.$TaskBarContainer);f(".rq-gc-dependencyControl",a).empty()},initializeTimeSpanHeader:function(){var a=this,b=this.options,d=this.$TimeSpanHeader;d.empty()[this.getChildWidgetName("TimeSpanHeaders")]({TimeScaleHeaders:b.TimeScaleHeaders,ComputedStartTime:b.ComputedStartTime,ComputedEndTime:b.ComputedEndTime,BaseTimeUnitWidth:b.BaseTimeUnitWidth,BaseTimeScaleType:b.BaseTimeScaleType,AnchorTime:b.AnchorTime,ViewWidth:b.ViewWidth,ResizeToFit:b.ResizeToFit,ZoomOptions:b.ZoomOptions,ScrollOptions:b.ScrollOptions,
CustomChartBackgroundRanges:b.CustomChartBackgroundRanges,BaseTimeUnitWidthMinimum:b.BaseTimeUnitWidthMinimum,BaseTimeUnitWidthMaximum:b.BaseTimeUnitWidthMaximum,MinTimeUnitWidthForHeaderVisibility:b.MinTimeUnitWidthForHeaderVisibility,WorkTimeSchedule:b.WorkTimeSchedule,TimeRangeHighlightBehavior:b.TimeRangeHighlightBehavior,GanttChart:this,AnchorTimeChanged:function(b,c){c.equals(a.options.AnchorTime)||a._setOption("AnchorTime",c)}});this._subscribeTimeLneEvents(d)},touchStart:!1,_startpx:0,startPoint:{},
currentPoint:{},_subscribeTimeLneEvents:function(a){var b=this,d=0,g=a.data("TimeSpanHeaders"),e=this.$GanttChart;a.bind("touchstart",function(a){1<a.originalEvent.touches.length||(b._timelineScrollStart(null,a,g),a.preventDefault())});a.bind("touchmove",function(a){d=a.originalEvent.touches.length;1<a.originalEvent.touches.length||b.options.ResizeToFit||b._timelineScrolling(null,a,g)});a.bind("touchend",function(a){1<d||(b.options.ResizeToFit&&b._timelineScrolling(null,a,g),b._timelineScrollEnd(a),
d=0)});e.bind("touchstart",function(a){b._timelineScrollStart(null,a,g)});e.bind("touchmove",function(a){b.options.ResizeToFit||b._timelineScrolling(null,a,g)});e.bind("touchend",function(a){b.options.ResizeToFit&&b._timelineScrolling(null,a,g);b._timelineScrollEnd(a)});a.mousedown(function(a){b._timelineScrollStart(a,null,g)});a.mousemove(function(a){b.options.ResizeToFit||b._timelineScrolling(a,null,g)});a.mouseup(function(a){b.options.ResizeToFit&&b._timelineScrolling(a,null,g);b._timelineScrollEnd(a)});
var m=f(document);m.mouseup(function(a){b._timelineScrollEnd(a)});m.bind("touchend",function(a){b._timelineScrollEnd(a)});a.bind("gesturestart",function(a){b._timelineZoomSart(a)});a.bind("gesturechange",function(a){});a.bind("gestureend",function(a){b._timelineZooming(a);b._timelineZoomEnd(a)});e.bind("gesturestart",function(a){b._timelineZoomSart(a)});e.bind("gesturechange",function(a){});e.bind("gestureend",function(a){b._timelineZooming(a);b._timelineZoomEnd(a)})},_getDirectionFromAngle:function(a){a=
{down:45<=a&&135>a,left:135<=a||-135>=a,up:-45>a&&-135<a,right:-45<=a&&45>=a};var b,d;for(d in a)if(a[d]){b=d;break}return b},_timelineScrollStart:function(a,b,d){!0!=this.options.Parent.PreventDefaultFns&&(null==b?(d.ShouldScrollWithLeftMouse(a)&&this.headerScrollTracker.StartDragging(a.pageX,d.options.BaseTimeUnitWidth,d),d.ShouldZoomWithLeftMouse(a)&&this.headerZoomTracker.StartDragging(a.pageX,d.options.BaseTimeUnitWidth)):(this._touchStart=!0,this._startpx=b.originalEvent.touches[0].pageX,this.headerScrollTracker.StartDragging(b.originalEvent.touches[0].pageX,
d.options.BaseTimeUnitWidth,d)))},_timelineScrolling:function(a,b,d){null==b?(this.headerZoomTracker.IsDragging()&&!this._touchStart&&this.headerZoomTracker.MouseMovedTo(a.pageX,d),this.headerScrollTracker.IsDragging()&&!this._touchStart&&this.headerScrollTracker.MouseMovedTo(a.pageX,d)):this.headerScrollTracker.IsDragging()&&(a=b.originalEvent.touches.length?b.originalEvent.touches:b.originalEvent.changedTouches,this._startpx!=a[0].pageX&&this.headerScrollTracker.MouseMovedTo(a[0].pageX,d))},_timelineScrollEnd:function(a,
b){this._touchStart=!1;this._startpx=0;this.headerZoomTracker.IsDragging(!1);this.headerScrollTracker.IsDragging(!1)},_timelineZoomSart:function(a){a=a.originalEvent;this.startPoint={x:a.pageX,y:a.pageY}},_timelineZooming:function(a){a=a.originalEvent;this.currentPoint={x:a.pageX,y:a.pageY};var b=180*Math.atan2(this.currentPoint.y-this.startPoint.y,this.currentPoint.x-this.startPoint.x)/Math.PI,b=this._getDirectionFromAngle(b);"left"!=b&&"right"!=b||this.options.Parent._ValidateAndSetBaseTimeUnitWidth(this.options.BaseTimeUnitWidth*
a.scale)},_timelineZoomEnd:function(a){this.startPoint={};this.currentPoint={}},TransformToVisual:function(a){return a+this.$GanttChart.scrollLeft()-this.element.offset().left},ConvertXToTime:function(a){a=b.ConvertTimeUnitsToTimeSpan(this.options.BaseTimeScaleType,a/this.options.BaseTimeUnitWidth);return this.options.ComputedStartTime.addTimeSpan(a)},GetScheduleToPlotWith:function(){if(null==this.ActivityView)return this.options.WorkTimeSchedule;var a=this.ActivityView.Activity_M().Assignments;return null==
a||0==a.length||1<a.length?this.options.WorkTimeSchedule:1==a.length&&null!=a[0].Resource.Schedule?a[0].Resource.Schedule:this.options.WorkTimeSchedule},ConvertTimeToX:function(a){return b.ConvertToUnitsOfBaseScaleType(this.options.BaseTimeScaleType,this.options.ComputedStartTime,a,this.options.WorkTimeSchedule)*this.options.BaseTimeUnitWidth},ConvertTimeToXBySchedule:function(a,c){return b.ConvertToUnitsOfBaseScaleType(this.options.BaseTimeScaleType,this.options.ComputedStartTime,a,c)*this.options.BaseTimeUnitWidth},
ConvertTimeToXFor:function(a,c,d,g){return b.ConvertToUnitsOfBaseScaleType(c||this.options.BaseTimeScaleType,this.options.ComputedStartTime,a,g)*(d||this.options.BaseTimeUnitWidth)},GetCurrentRightMostVisibleTime:function(){var a=this.HScrollBar,b=a.width();return this.ConvertXToTime(a[0].scrollLeft+b)},GetCurrentLeftMostVisibleTime:function(){return this.ConvertXToTime(this.HScrollBar[0].scrollLeft)},PageRight:function(a){if(!a&&(a=!1,null!=this.options.BeforePagingGanttChart&&(a=this.options.BeforePagingGanttChart("RightPagerButton",
null,this)),a))return;a=this.HScrollBar;var c=Math.round(a[0].scrollLeft),d=Math.round(a[0].scrollWidth-a.width());0<this.options.TimeScaleHeaders.length&&this.options.TimeScaleHeaders.getById(0);d<=c?(c=b.GetTimeSpan(this.options.ComputedStartTime.clone(),this.options.ComputedEndTime.clone()),c=this.options.AnchorTime.addTimeSpan(c),this._setOption("AnchorTime",c),a[0].scrollLeft=0):(c=new Date(this.GetCurrentRightMostVisibleTime()),c=this.ConvertTimeToX(c),a[0].scrollLeft=c)},PageLeft:function(a){if(!a&&
(a=!1,null!=this.options.BeforePagingGanttChart&&(a=this.options.BeforePagingGanttChart("LeftPagerButton",null,this)),a))return;a=this.HScrollBar[0];var c=a.scrollLeft,d=a.scrollWidth-this.HScrollBar.width();0<this.options.TimeScaleHeaders.length&&this.options.TimeScaleHeaders.getById(0);0==c?(c=b.GetTimeSpan(this.options.ComputedStartTime.clone(),this.options.ComputedEndTime.clone()),c=this.options.AnchorTime.addTimeSpan(c.getEqualNegative()),this._setOption("AnchorTime",c)):(d=this.GetCurrentLeftMostVisibleTime(),
c=this.GetCurrentRightMostVisibleTime(),c=b.GetTimeSpan(d,c),d=d.addTimeSpan(c.getEqualNegative()),d=this.ConvertTimeToX(d));a.scrollLeft=d},ViewSpanChanged:function(a){var b=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(this),d=RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert(this);this._setOption("ComputedStartTime",b);this._setOption("ComputedEndTime",d);this.CanUpdate()&&(!0==a&&(this.element.unbind(".GanttControlTaskBarRefreshUI"),this.element.unbind(".FlexyGanttTaskBarRefreshUI")),
this.TriggerRefreshUI({options:this.options,ForceToReDrawRows:a}),this.ScrollViewerElement_LayoutUpdated())},ResizeToFitChanged:function(){var a=this.element[0].clientWidth;this.optionViewWidth=this.optionViewWidth?this.optionViewWidth:2E3;this.options.ResizeToFit?this.options.ViewWidth!=a&&this._setOption("ViewWidth",a):(this.options.ViewWidth!=this.optionViewWidth&&this._setOption("ViewWidth",this.optionViewWidth),this.ScrollToAnchorTime())},_destroy:function(){this.element.data("GanttChart",null)},
destroy:function(){this.widgetBaseDestroy.apply(this,arguments);this.element.empty();this.widgetBaseSetOption.call(this);this.element.data("GanttChart",null)}};RadiantQ.Gantt.Widget.GanttChart=e})(jQuery);
(function(f,b){var e=RadiantQ.Gantt;RadiantQ.Gantt.lave={};RadiantQ.Gantt._ganttCount=0;RadiantQ.BeforeGanttInitialization=new ObjectEvent("BeforeGanttInitialization");RadiantQ.AfterGanttInitialization=new ObjectEvent("AfterGanttInitialization");b.fn.GetGanttChartInstance=function(){var a=this.data("GanttChart");if(a)return a;throw Error("Cannot call GetGanttChartInstance method before it is initialized");};var a={BottomTwoHeaders:null,options:{name:"GanttBase",ShowGridTable:!0,ForceToRecreateColumnHeader:!1,
TimeScaleHeaders:null,RowHeight:25,BaseTimeScaleType:null,ComputedGridHeaderHeight:null,SpecialLineInfos:null,BottomTwoHeaders:null,CustomChartBackgroundRanges:null,WorkingTimeBackground:null,NonWorkingTimeBackground:null,BaseTimeUnitWidth:null,BaseTimeUnitWidthMaximum:null,BaseTimeUnitWidthMinimum:10,IsDependencyLinesReadOnly:!1,ZoomOptions:null,ScrollOptions:null,MinTimeUnitWidthForHeaderVisibility:10,RoundTimeEditsTo:null,GanttTable:null,ShowGanttChart:!0,FlatItemsSource:null,TaskItemTemplate:null,
ProgressBarTemplate:null,ParentTaskItemTemplate:null,TaskStartTimeProperty:null,ParentTaskStartTimeProperty:null,TaskEndTimeProperty:null,ParentTaskEndTimeProperty:null,TasksListProperty:null,ParentTasksListProperty:null,EnableOverlappedRenderingBindingProperty:"",TaskTooltipTemplate:null,KnockoutObjectName:null,DependencyLineColor:null,DependencyListSource:null,UseChartVirtualization:!1,UseVirtualization:!1,WorkTimeSchedule:"",EnableAlternativeRowBackground:!0,TimeRangeHighlightBehavior:RadiantQ.Gantt.TimeRangeHighlightBehavior.None,
SelectionMode:RadiantQ.Gantt.SelectionMode.Multiple,GanttTableRowLoadedCallBack:null,MovingInfoPopup:null,ResizeInfoPopup:null,CustomProgressCalculation:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsReadOnly:!1,IsEffortReadOnly:!1,IsStartTimesReadOnly:!1,IsProgressPercentReadOnly:!1,TouchTapAction:null,EnableDropAsChild:!1,OnTaskBarLoad:null,CanInsertPropertyChangeTriggeringPropertiesInData:!1,EnableColumnHeaderContextMenu:!1,OneInstance:null,GanttTableOptions:{columns:[],
editable:!0},LayoutOptions:{},SelectEvent:"mouseup",DependencyTooltipTemplate:null,RowDragBehavior:RadiantQ.Gantt.RowDragBehavior.DragRowHeader,IsPrinting:!1,SaveStateInCookie:!1,SaveStateInCookieOptions:{ZoomLevel:!1,TablePanelWidth:!1,TaskCollapsingState:!1},ShowDependencyLines:!0,ApplySelectionAndHoverEffect:!0},ApplicationName:"",PreventDefaultFns:!1,HeaderHeight:null,headerChange:!1,SelectedRowsDrag:null,SelectedRowsDrop:null,SelectedRowsDropped:null,BeforeRowsDragStart:null,GanttType:null,IsGanttTable:null,
_roundTimeEditsTo:null,RoundTimeEditsTo:function(a){if(void 0==a){if(this._roundTimeEditsTo)return this._roundTimeEditsTo;this._roundTimeEditsTo=RadiantQ.Gantt.RoundToOptions.None}else this._roundTimeEditsTo=a},_ganttChartIsLoaded:!1,GanttChartIsLoaded:function(a){if(void 0==a){if(this._ganttChartIsLoaded)return this._ganttChartIsLoaded;this._ganttChartIsLoaded=!1}else this._ganttChartIsLoaded=a},_create:function(){RadiantQ.BeforeGanttInitialization&&RadiantQ.BeforeGanttInitialization.fn.length&&
(RadiantQ.BeforeGanttInitialization.raise(this.options,this.GanttType,this.element),""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=null));this.options.BaseTimeUnitWidth&&(this.options.BaseTimeUnitWidth=Math.round(1E3*this.options.BaseTimeUnitWidth)/1E3);0<this.element.length&&(this.element[0].RQ_GanttBase=this);this._validateOptions();this.SelectedRowsDrag=new ObjectEvent("SelectedRowsDrag");this.SelectedRowsDrop=new ObjectEvent("SelectedRowsDrop");this.SelectedRowsDropped=new ObjectEvent("SelectedRowsDropped");
this.BeforeRowsDragStart=new ObjectEvent("BeforeRowsDragStart");this.VerticalScrollEvent=new ObjectEvent("VerticalScrollEvent");this.options.ForceToRecreateColumnHeader=!1;this._roundTimeEditsTo=this.options.RoundTimeEditsTo?this.options.RoundTimeEditsTo:RadiantQ.Gantt.RoundToOptions.None;var a=this;this.GanttChartLoaded=new ObjectEvent("GanttChartLoaded");this._ganttChartIsLoaded=!1;this.IsGanttTable=null!=this.options.GanttTable;""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=
RadiantQ.Gantt.WorkTimeSchedule.Schedule8X5);this.element.addClass("rq-ganttBase radiantq-ui-GanttBase").data("GanttBase",this);var d=window.location.pathname.split("/");this.ApplicationName=d[d.length-1].split(".")[0];b(window).resize(function(){a.RefreshGanttHeight()});b(window).bind("unload",function(){if(a.options.SaveStateInCookie){if(a.options.SaveStateInCookieOptions.TaskCollapsingState){var d=[];if("FlexyGantt"!=a.GanttType){var e=a.ActivityViews;for(i=0;i<e.length;i++)e[i].IsExpanded||d.push(e[i].activity.id)}b.cookie(a.ApplicationName+
"_CollapsedTaskList",d,{expires:365})}a.options.SaveStateInCookieOptions.ZoomLevel&&b.cookie(a.ApplicationName+"_BaseTimeUnitWidth",a.options.BaseTimeUnitWidth,{expires:365})}});null==this.options.TimeScaleHeaders&&(this.options.TimeScaleHeaders=this.defaultTimeScaleHeaders());this.options.UseVirtualization&&(this.options.UseChartVirtualization=!0);this.initializeGanttBase();this.IsTableCreated=!1;this._layoutGanttControls();this.initTable();this.IsTableCreated=!0;this.UpdateDatasource(!0);!0==this.options.ShowGanttChart?
(this.initGanttChart(),this.GetGanttChartInstance().syncVerticalScrollBar()):(this.HideChart(),this.CanUpdateTable(this.CanUpdateTable()+1));RadiantQ.AfterGanttInitialization&&RadiantQ.AfterGanttInitialization.fn.length&&setTimeout(function(){RadiantQ.AfterGanttInitialization.raise(a.element,a)},0)},HideChart:function(){var a=b(this._getUniqueSelectorIdByID("TopDivContainer"),this.$ganttWrapper).data("layout");a.open("west");b(".ui-layout-center",this.$ganttWrapper).css("display","none");b(".ui-layout-pane-west",
this.$ganttWrapper).css("width","100%");a.sizePane("west","100%");b(".ui-layout-resizer",this.$ganttWrapper).css("display","none")},ShowChart:function(){var a=b(this._getUniqueSelectorIdByID("TopDivContainer"),this.$ganttWrapper).data("layout");a.open("west");b(".ui-layout-center",this.$ganttWrapper).css("display","block");a.sizePane("west","50%");b(".ui-layout-resizer",this.$ganttWrapper).css("display","block")},GetScrollableContentHeight:function(a){if(a&&a.length){if(null==this.options.RowHeightBinding)return a.length*
this.options.RowHeight;this.options.RowHeightBinding._scrollContentHeight&&!1!=this._scrollContentEdited||(this.options.RowHeightBinding._scrollContentHeight=a.length*this.options.RowHeight);return this.options.RowHeightBinding._scrollContentHeight}return 0},_scrollContentEdited:!1,AddToScrollableContentHeight:function(a){this.options.RowHeightBinding&&(this.options.RowHeightBinding._scrollContentHeight||(this.options.RowHeightBinding._scrollContentHeight=0),this._scrollContentEdited=!0,this.options.RowHeightBinding._scrollContentHeight+=
a)},GetStartRowIndexAndTop:function(a,b){var g=this.options.RowHeight;if(null!=this.options.RowHeightBinding){var e=0,f;for(f=0;f<a.length&&!(g=a[f].RowHeight||this.options.RowHeight,e+=g,e>b);f++);return{startPosition:f,top:g-(e-b)}}return{startPosition:Math.floor(b/g),top:b%g}},RefreshGanttHeight:function(){if(!this.IsTableCreated||!0==this.options.ShowGridTable&&!this.GetGanttTable())return!1;this.UpdateChartHeight();this.UpdateHeight()},OnChartTemplateApplied:function(a){this.triggerEvent("GanttChartTemplateApplied",
this,a)},IsTaskReadOnly:function(a){return this.triggerEvent("IsTaskReadOnlyCallback",this,a)},OnTableTemplateApplied:function(){this.triggerEvent("GanttTableTemplateApplied")},OnBaseTimeUnitWidthChanged:function(){this.triggerEvent("Zoomed")},HideGanttGrid:function(a){if(a){b(b(".ui-layout-resizer",this.element)).css("display","none");a=b("#gantt_container_GanttChart",this.element);b(a).css("left","0px");b(a).css("width",parseInt(b(a).width())+10+"px");var d=b("div.rq-gc-rowsParent",this.element),
g=b("div.rq-gc-dependencysParent",this.element);d.css("width",this.GetGanttChartInstance().options.ViewWidth+"px");d.css("overflow-y","auto");b(d).scroll(function(){0<g.length&&(g[0].scrollTop=d[0].scrollTop)})}},defaultTimeScaleHeaders:function(){var a=new RadiantQ.Gantt.TimeScaleHeaderDefinition;a.name("days");a.Type=e.TimeScaleType.Days;var b=new RadiantQ.Gantt.TimeScaleHeaderDefinition;b.name("weeks");b.Type=e.TimeScaleType.Weeks;var g=new RadiantQ.Gantt.TimeScaleHeaderDefinitions;g.add(b);g.add(a);
return g},_workTimeSchedule:null,WorkTimeSchedule:function(a){if(void 0==a)return this._workTimeSchedule;a!=this._workTimeSchedule&&(this._workTimeSchedule=a,this.options.WorkTimeSchedule=a,this.OnWorkTimeScheduleChanged())},isTableCollapsed:function(){return b(this._getUniqueSelectorIdByID("TopDivContainer"),this.element).data("layout").state.west.isClosed},getHScrollBarHeight:function(){return 0},getVirtualizedHeight:function(a){return b(".grid-body-actualContent",a).height()},getVirtualizedChartHeight:function(a){return b(".vsb-actualContent",
a).height()},UpdateChartHeight:function(){this.getTableParent();this.getTable();var a=b("div.rq-gc-rowsParent",this.element),d=b("table",a),g=b("div.rq-gc-dependencysParent",this.element);if(0<g.length){var e=Math.min(a.height(),a[0].clientHeight);g.css("height",e-this.getHScrollBarHeight());a=this.getVirtualizedChartHeight(a);this.options.UseChartVirtualization?g.children().height(a):g.children().css("height",a)}if(g=this.GetGanttChartInstance())g.element.css({height:"inherit",width:"inherit"}),
g.updateChatBGHeight(),g.VSB&&(g.VSB.UpdateScrollContentHeight(),d.height(this.GetScrollableContentHeight())),g.refreshDockPanel()},RefreshGanttWidth:function(){var a=b(this._getUniqueSelectorIdByID("TopDivContainer"),this.element),d=this.GetGanttChart(),g=b(".ui-layout-resizer",this.element),e=b(".ui-layout-west",this.element);a.data("layout").state.west.isClosed?d.width(a[0].clientWidth-g[0].clientWidth):d.width(a[0].clientWidth-(g[0].clientWidth+e[0].clientWidth))},OnWorkTimeScheduleChanged:function(){this.UpdateCalendarSettingInScaleHeaders()},
UpdateCalendarSettingInScaleHeaders:function(){for(var a=0;a<this.options.TimeScaleHeaders.length;a++)this.options.TimeScaleHeaders[a].WorkTimeSchedule=this.options.WorkTimeSchedule},VerticalScrollEvent:new ObjectEvent("VerticalScrollEvent"),getTable:function(){return b("table.ui-grid-body-table",this.getTableParent())},getTableParent:function(){return b("div.ui-grid-body",this.element)},ChartVerticalScrollSyncWithTable:function(){var a=this.getTableParent(),d=b("div.rq-gc-rowsParent",this.element);
b("table.rq-gc-rowsParent-table",this.element);var g=b("div.rq-gc-dependencysParent",this.element);this.options.UseChartVirtualization||(0<g.length&&g.css("height",d.height()),0<g.length&&(this.options.UseChartVirtualization?b(g[0].children).height(a[0].scrollHeight):b(g[0].children).height(d.children().height())),d.scrollTop()!=a.scrollTop()&&(this.options.UseChartVirtualization||d.scrollTop(a.scrollTop()),0<g.length&&b(g).scrollTop(d.scrollTop())))},_createUniqueID:function(a){return""==this.element[0].id?
this.widgetName+this.uuid+"_"+a:this.element[0].id+"_"+a},_validateOptions:function(){var a=this.options;null==a.GanttTable&&(a.ShowGridTable=!1);window.console&&RadiantQ.CanUseDefineProperty&&(a.TaskTooltipTemplate&&"string"!=typeof a.TaskTooltipTemplate&&!1==(a.TaskTooltipTemplate.length?a.TaskTooltipTemplate[0]instanceof HTMLElement:a.TaskTooltipTemplate instanceof HTMLElement)&&console.error("TaskTooltipTemplate is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),
a.MovingInfoPopup&&"string"!=typeof a.MovingInfoPopup&&!1==(a.MovingInfoPopup.length?a.MovingInfoPopup[0]instanceof HTMLElement:a.MovingInfoPopup instanceof HTMLElement)&&console.error("MovingInfoPopup is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),a.ResizeInfoPopup&&"string"!=typeof a.ResizeInfoPopup&&!1==(a.ResizeInfoPopup.length?a.ResizeInfoPopup[0]instanceof HTMLElement:a.ResizeInfoPopup instanceof HTMLElement)&&
console.error("ResizeInfoPopup is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."))},getWindow:function(){var a=" >rb/< moc.qtnaidar@selas tcatnoc ro woleb knil kcilc esahcrup oT  >rb/< ttnaG yreuQj QtnaidaR gnitaulavE rof sknahT".split("").reverse().join(""),d="nottub".split("").reverse().join(""),g="esneciL esahcruP".split("").reverse().join(""),e="lairT eunitnoC".split("").reverse().join(""),f=')"knalb_" ,"xpsa.sliateDredrO/moc.qtnaidar.redro//:ptth"(nepo.wodniw'.split("").reverse().join(""),
k=b("<div> <div> <p>"+a+"<"+d+">"+e+" </"+d+"><"+d+">"+g+"</"+d+"> </p></div></div>"),a="0F4E3B#".split("").reverse().join(""),l=this;k.css({height:"80%",width:"80%","background-size":"100% 100%","background-color":a,"z-index":"100000",position:"absolute",color:"white",top:"50px",left:"50px",border:"1px solid #DEDEDE"});var n=">/ gmi<".split("").reverse().join(""),a="gnp.gninraWesnecil/segamI/selytS/crS";window.__rqGanttInSP?a="gnp.gninraWesnecil/segamI/selytS/crS/eludoMweN/..":window.ng&&"object"==
typeof window.ng&&(a="gnp.gninraWesnecil/segamI/selytS/crS/selpmaS/ppa");var p=b(n,{width:"100%",height:"100%"}).attr("src",a.split("").reverse().join("")).bind("load",function(){b(k).append(p);b(l._getUniqueSelectorIdByID("TopDivContainer"),l.element).append(k)}).bind("error",function(){var a=b(n,{width:"100%",height:"100%"}).attr("src","gnp.gninraWesnecil/segamI/selytS/crS/../..".split("").reverse().join("")).bind("load",function(){this.complete&&(b(k).append(a),b(l._getUniqueSelectorIdByID("TopDivContainer"),
l.element).append(k))}).bind("error",function(){b(l._getUniqueSelectorIdByID("TopDivContainer"),l.element).append(k)})}),a=k.children();a.css({position:"absolute",height:"15%",width:"100%","font-size":"40px",position:"absolute",top:"40%"});a=a.children();a.css({position:"absolute",width:"100%","font-size":"20px","margin-left":"5%",position:"relative",top:"-40%"});d=a.children(d);b(d[0]).css({"font-size":"20px",left:"50%","margin-left":"18%","margin-top":"2%"});b(d[1]).css({"font-size":"20px","margin-left":"1%",
"margin-top":"2%"});b(d[0]).click(function(){k.remove()});b(d[1]).click(function(){eval(f);k.remove()});k.click(function(){k.remove()});return k},initializeGanttBase:function(){null==this.options.ZoomOptions&&(this.options.ZoomOptions=RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders|RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart|RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag);null==this.options.ScrollOptions&&(this.options.ScrollOptions=RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag);
this._validateBasebaseTimeUnitWidthMaximum();this._validateBasebaseTimeUnitWidth();this._validateMinTimeUnitWidthForHeaderVisibility();this.options.BaseTimeScaleType=RadiantQ.Gantt.TimeScaleType.Hours;if(null==this.options.BaseTimeUnitWidth||0==this.options.BaseTimeUnitWidth)this.options.BaseTimeUnitWidth=25},subscribeHeaderCollectionChanged:function(){var a=this;null!=this.options.TimeScaleHeaders&&this.options.TimeScaleHeaders.CollectionChanged.subscribe(function(b,g){a.OnHeadersChanged(b,g)})},
initTimeSpaneHeader:function(){this.OnHeadersChanged(null,null);this.subscribeHeaderCollectionChanged();var a=this;b(this.GetGanttChart()).mousewheel(function(d,g){if(!0!=a.PreventDefaultFns){var e=!1,f=b(d.target).closest(".timeSpanHeader");!1==e&&!RadiantQ.Gantt.isModifierKeyIsPresed(d)&&f.length&&(a.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders)==RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders&&(e=!0);!1==e&&d.ctrlKey&&(a.options.ZoomOptions&
RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart)==RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart&&(e=!0);e&&(a.ZoomBySteps(g),d.preventDefault());e||(a.IsGanttTable&&a.GetGanttTable()&&a.GetGanttTable().element.length&&(e=a.grid.uiGridBody.scrollTop(),0>g?a.grid.uiGridBody.scrollTop(e+50):a.grid.uiGridBody.scrollTop(e-50)),d.preventDefault())}})},TrySetEndTime:function(a){this.GetGanttChartInstance().TrySetEndTime(a)},ScrollToAnchorTime:function(){this.GetGanttChartInstance().ScrollToAnchorTime()},
SetStartTime:function(a){this.GetGanttChartInstance().SetStartTime(a)},ConvertXToTime:function(a){return this.GetGanttChartInstance().ConvertXToTime(a)},ConvertTimeToX:function(a){return this.GetGanttChartInstance().ConvertTimeToX(a)},RoundUp:function(a){return this.RoundTime(a,this.GetActualRoundToOption())},RoundUpDuration:function(a){var b=RadiantQ.Gantt.Utils.TimeComputingUtils,g=Date.today();a=g.addTimeSpan(a);a=this.RoundTime(a,this.GetActualRoundToOption());return b.GetTimeSpan(g,a)},GetActualRoundToOption:function(){if(this.RoundTimeEditsTo()!=
RadiantQ.Gantt.RoundToOptions.Auto)return this.RoundTimeEditsTo();var a=this.RoundTimeEditsTo();switch(this.options.BaseTimeScaleType){case RadiantQ.Gantt.TimeScaleType.Days:a=RadiantQ.Gantt.RoundToOptions.FifteenMinutes;break;case RadiantQ.Gantt.TimeScaleType.Minutes:a=RadiantQ.Gantt.RoundToOptions.None;break;case RadiantQ.Gantt.TimeScaleType.Hours:a=RadiantQ.Gantt.RoundToOptions.Minute;break;case RadiantQ.Gantt.TimeScaleType.Months:a=RadiantQ.Gantt.RoundToOptions.Day;break;case RadiantQ.Gantt.TimeScaleType.Weeks:a=
RadiantQ.Gantt.RoundToOptions.Day;break;case RadiantQ.Gantt.TimeScaleType.Years:a=RadiantQ.Gantt.RoundToOptions.Day}return a},RoundTime:function(a,b){var g=a.getHours(),e=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);switch(b){case RadiantQ.Gantt.RoundToOptions.HalfDay:if(e<a){var f=e.clone();if(e==a||f.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours())==a)break;return 12>g?e.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours()):e.addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())}return e;
case RadiantQ.Gantt.RoundToOptions.Day:return e.isLessThan(a)&&12<a.getHours()?e.clone().addHours((new RQTimeSpan(1,0,0,0)).getTotalHours()):e;case RadiantQ.Gantt.RoundToOptions.Hour:return g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),g,0,0),g.isLessThan(a)?g.clone().addHours((new RQTimeSpan(0,1,0,0)).getTotalHours()):g;case RadiantQ.Gantt.RoundToOptions.ThirtyMinutes:return e=a.getMinutes(),0==e?e=0:30>=e?e=30:59>=e&&(e=0,g++),23<g&&(g=0,a=a.clone().addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())),
new Date(a.getFullYear(),a.getMonth(),a.getDate(),g,e,0);case RadiantQ.Gantt.RoundToOptions.FifteenMinutes:return e=a.getMinutes(),0==e?e=0:15>=e?e=15:30>=e?e=30:45>=e?e=45:59>=e&&(e=0,g++),23<g&&(g=0,a.addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())),new Date(a.getFullYear(),a.getMonth(),a.getDate(),g,e,0);case RadiantQ.Gantt.RoundToOptions.Minute:return g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),g,a.getMinutes(),0),g<a?g.addMinutes((new RQTimeSpan(0,0,1,0)).getTotalMinutes()):g}return a},
triggerChildWidgetsCreated:function(){this.triggerEvent("ChildWidgetsCreated")},BringTimeIntoView:function(a){this.GetGanttChartInstance().BringTimeIntoView(a)},OnHeadersChanged:function(a,b){if(0!=this.options.TimeScaleHeaders.length){var g=!1,e=this.options.TimeScaleHeaders,f=new RadiantQ.Gantt.BottomTwoHeaderDefinitions,k=e.length-1,l=this.GetBaseScaleTypeLCD(e[k]);if(0<e.length){if(null!=e)for(;0<=k&&(!this.IsHeaderViewable(e[k],l)||(f.add(e[k]),2!=f.length));k--);f.IsContentEqual(this.BottomTwoHeaders)&&
!0!=this.headerChanged||(this.BottomTwoHeaders=f,g=!0);for(k=0;k<e.length;k++)this.options.TimeScaleHeaders.getById(k).BaseTimeScaleType=l}g?this._updateGanttChartsBottomTwoHeader(l):"BaseUnitWidthChanges"==b?this._setOption("BottomTwoHeaders",this.BottomTwoHeaders):null!=b&&this._triggerHeaderCollectionschangedEvent(a,b)}},_triggerHeaderCollectionschangedEvent:function(a,b){},IsHeaderViewable:function(a,b){var g=a.Type,f=1;if(g==e.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";
g=a.CustomTimeScaleTypeHint.EquivalentType;f=a.CustomTimeScaleTypeHint.EquivalentUnits}return RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType(b,g,f)*this.options.BaseTimeUnitWidth<this.options.MinTimeUnitWidthForHeaderVisibility?!1:!0},_updateGanttChartsBottomTwoHeader:function(a){this.updateGanttChart("BottomTwoHeaders",this.BottomTwoHeaders);this.updateGanttChart("BaseTimeScaleType",a)},GetBaseScaleTypeLCD:function(a){var b=a.Type;b==RadiantQ.Gantt.TimeScaleType.Custom&&(b=
RadiantQ.Gantt.TimeScaleType.Days,null!=a.CustomTimeScaleTypeHint&&(b=a.CustomTimeScaleTypeHint.EquivalentType));return b=RadiantQ.Gantt.AdjustBaseScaleType(b)},_ValidateAndSetBaseTimeUnitWidth:function(a){var b=this.options,g=b.MinTimeUnitWidthForHeaderVisibility,e=b.BaseTimeUnitWidthMinimum,f=b.BaseTimeUnitWidthMaximum,k=this.getCurrentTimeUnitsForBaseType(b.TimeScaleHeaders.getById(0));if(k*a<g){var l=!0;0!=this.CanAllowBTUW.fn.length&&(l={Allow:!1,NewBTUW:a},this.CanAllowBTUW.raise(this,l),l=
!l.Allow);l&&(a=g/k)}a<e&&(a=e);a>f&&(a=f);b.BaseTimeUnitWidth!=a&&this._setOption("BaseTimeUnitWidth",a)},CanAllowBTUW:new ObjectEvent("CanAllowBTUW"),getCurrentTimeUnitsForBaseType:function(a){var b=a.Type,g=a.BaseTimeScaleType,f=1;if(b==e.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";b=a.CustomTimeScaleTypeHint.EquivalentType;f=a.CustomTimeScaleTypeHint.EquivalentUnits}return RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType(g,
b,f)},ZoomBySteps:function(a){var b=0>a;a=Math.abs(a);for(var g=this.options.BaseTimeUnitWidth,e=0;e<a;e++)g=b?g-0.1*g:g+0.1*g;this._ValidateAndSetBaseTimeUnitWidth(g)},_validateBasebaseTimeUnitWidthMaximum:function(){if(null!=this.options.BaseTimeUnitWidthMaximum){if(this.options.BaseTimeUnitWidthMaximum<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidthMaximum cannot be less than the BaseTimeUnitWidthMinimum value.";}else this.options.BaseTimeUnitWidthMaximum=100;return 0},
_validateBasebaseTimeUnitWidth:function(){if(null!=this.options.BaseTimeUnitWidth){if(this.options.BaseTimeUnitWidth<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidth cannot be less than "+this.options.BaseTimeUnitWidthMinimum+".";if(this.options.BaseTimeUnitWidth>this.options.BaseTimeUnitWidthMaximum)throw"GanttBase.BaseTimeUnitWidth cannot be greater than "+this.options.BaseTimeUnitWidthMaximum+".";}else this.options.BaseTimeUnitWidth=25},_validateMinTimeUnitWidthForHeaderVisibility:function(){if(10>
this.options.MinTimeUnitWidthForHeaderVisibility)throw"MinTimeUnitWidthForHeaderVisibility cannot be less than 10.";},GetGanttChart:function(){return b("div.rq-ganttChart",this.element)},GetGanttChartInstance:function(){var a=this.GetGanttChart();return 0==a.length&&this.element.length?b("#"+this.element[0].id+"_GanttChart").data("GanttChart"):a.data("GanttChart")},GetLayoutElement:function(){return b(this._getUniqueSelectorIdByID("TopDivContainer"),this.element)},getTimeSpanHeader:function(){return b("div.rq-tsh-div",
this.GetGanttChart())},createGanttWrapperElement:function(){this.$ganttWrapper=b('<div id="'+this._createUniqueID("GanttWrapper")+'" style="height:100%;width:100%;" class="rq-ganttWrapper" />').appendTo(this.element)},_layoutGanttControls:function(){this.element.empty();this.createGanttWrapperElement();this.container=b('<div id="'+this._createUniqueID("TopDivContainer")+'" class="ui-layout-pane" style="height:100%; position:relative;" />').appendTo(this.$ganttWrapper);this.options.ShowGridTable&&
b('<div id="'+this._createUniqueID("TablePanal")+'" class="ui-layout-west" style="height:100%; position:relative;"/>').appendTo(b(this._getUniqueSelectorIdByID("TopDivContainer"),this.element));b('<div id="'+this._createUniqueID("GanttChart")+'" class="ui-layout-center" style="height:100%; width:100%; position:relative;"/>').appendTo(b(this._getUniqueSelectorIdByID("TopDivContainer")));var a=b(this._getUniqueSelectorIdByID("TopDivContainer"),this.$ganttWrapper);this.CreateLayout(a)},HideGridTable:function(){},
ShowGridTable:function(){},AfterSplitterResized:new ObjectEvent("AfterSplitterResized"),CreateLayout:function(a){var d=this,g=null,e=0,f=window.RadiantQ_SplitterClose,k=window.RadiantQ_SplitterOpen,l=b.extend(!0,{},this.options.LayoutOptions);l.SpliterWidth&&(l.spacing_open=l.SpliterWidth,l.spacing_closed=l.SpliterWidth);f={west:{minSize:0,onclose_start:function(){}},enableCursorHotkey:!1,togglerTip_open:f,togglerTip_closed:k,resizerTip:window.RadiantQ_SplitterResize,west__size:b.cookie(d.ApplicationName+
"_TablePanelWidth")?b.cookie(d.ApplicationName+"_TablePanelWidth"):this.options.TablePanelWidth,center__onresize:function(){var f=g.state.west.size;d.options.SaveStateInCookie&&d.options.SaveStateInCookieOptions.TablePanelWidth&&b.cookie(d.ApplicationName+"_TablePanelWidth",f,{expires:365});d.options.TablePanelWidth=f;var m=d.GetGanttTable();m&&m.refreshScrollBsrVisibility&&m.refreshScrollBsrVisibility();a.trigger("layout.onresize");var k=setTimeout(function(){var a=d.GetGanttChartInstance();a&&(a.refreshDockPanel(),
!0==a.options.ResizeToFit&&a.ResizeToFitChanged());a=d.GetGanttTable();null!=a&&(!1==g.state.west.isVisible?(a.uiGridBody.scrollTop(1),f=d.options.TablePanelWidth=0):a.Refresh());clearTimeout(k);d.AfterSplitterResized.raise(g,{oldSize:e,currentSize:f});e=f},200);!1==d.options.ShowGanttChart&&d.HideChart()}};f=b.extend(!0,f,l);a.layout(f);g=a.data("layout");l=function(){for(var a=0,b=0;b<d.options.GanttTableOptions.columns.length;b++)a+=d.options.GanttTableOptions.columns[b].width;return a+2}();l<
g.state.west.size&&g.sizePane("west",l);e=g.state.west.size},UpdateLayout:function(){var a=b(".ui-layout-container",this.element);this.options.ShowGridTable&&a.data("layout").resizeAll();this.RefreshGanttHeight();!0==this.options.ShowGridTable&&this.options.UseVirtualization&&this.GetGanttTable().uiGridBody.trigger("scroll");this.options.UseChartVirtualization&&("ProjectGantt"==this.GanttType?(a=b(".rq-gc-rowsParent",this.element).data("GanttTaskItemsControl"))&&a.Refresh(a.element,a.options.Data,
a.$chartTable,a.options.ViewWidth,0):(a=b(".rq-gc-rowsParent",this.element).data("GanttRows"),a.Refresh(a.element,a.options.Data,a.table,a.options.ViewWidth)))},_canUpdateTable:0,CanUpdateTable:function(a){if(void 0==a)return this._canUpdateTable;a!=this._canUpdateTable&&(this._canUpdateTable=a,2==this._canUpdateTable||!1==this.options.ShowGridTable&&1==this._canUpdateTable)&&(this.updateTable(),this._canUpdateTable=0)},UpdateTaskState:function(a){if(a&&"FlexyGantt"!=this.GanttType)for(var b=0;b<
this.options.FlatItemsSource.length;b++){var g=this.options.FlatItemsSource[b];-1!=a.indexOf(g.Activity.id)&&(g.IsExpanded=!1)}},initGanttChart:function(){var a=this.options;if(null==a.SpecialLineInfos){a.SpecialLineInfos=new RadiantQ.RQ_CollectionChangeNotifier;var d=new RadiantQ.Gantt.SpecialLineInfo;d.LineDateTime=Date.today();d.ToolTipText="today";a.SpecialLineInfos.add(d)}d=b.cookie(this.ApplicationName+"_CollapsedTaskList");this.options.SaveStateInCookie&&this.options.SaveStateInCookieOptions.TaskCollapsingState&&
void 0!=d&&this.UpdateTaskState(d);var d=b(this._getUniqueSelectorIdByID("GanttChart")),g=this;if(window.__rqGanttInSP){var e=window.location.protocol+"//"+window.location.host;b.ajax({url:e+"/_catalogs/masterpage/RadiantQjQueryGanttWebPart/Domain.txt",async:!1,type:"GET",success:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c)^129);a=String.fromCharCode.apply(String,b);e==a?RadiantQ.Gantt.lave.edcvafvfl=!0:g.getWindow()},error:function(a,b,c){g.getWindow()}})}d[this.getChildWidgetName("GanttChart")]({BottomTwoHeaders:a.BottomTwoHeaders,
TimeScaleHeaders:a.TimeScaleHeaders,BaseTimeUnitWidth:b.cookie(g.ApplicationName+"_BaseTimeUnitWidth")?b.cookie(g.ApplicationName+"_BaseTimeUnitWidth"):a.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,ZoomOptions:a.ZoomOptions,ScrollOptions:a.ScrollOptions,CustomChartBackgroundRanges:a.CustomChartBackgroundRanges,OverlappedTasksRenderingOptimization:a.OverlappedTasksRenderingOptimization,BaseTimeUnitWidthMinimum:a.BaseTimeUnitWidthMinimum,BaseTimeUnitWidthMaximum:a.BaseTimeUnitWidthMaximum,
MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility,TaskItemTemplate:a.TaskItemTemplate,TaskBarBackgroundTemplate:a.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:a.TaskBarAdornerTemplate,ParentTaskItemTemplate:a.ParentTaskItemTemplate,ProgressBarTemplate:a.ProgressBarTemplate,ProgressPercentBinding:a.ProgressPercentBinding,TaskStartTime:a.TaskStartTimeProperty,ParentTaskStartTime:a.ParentTaskStartTimeProperty,TaskEndTime:a.TaskEndTimeProperty,ParentTaskEndTime:a.ParentTaskEndTimeProperty,
TasksListProperty:a.TasksListProperty,EnableOverlappedRenderingBindingProperty:a.EnableOverlappedRenderingBindingProperty,ParentTasksListProperty:a.ParentTasksListProperty,FlatItemsSource:a.FlatItemsSource,RowHeight:a.RowHeight,TaskTooltipTemplate:a.TaskTooltipTemplate,SpecialLineInfos:a.SpecialLineInfos,DependencyLineColor:a.DependencyLineColor,DependencyListSource:a.DependencyListSource,WorkTimeSchedule:a.WorkTimeSchedule,GanttDependencyViews:this.DependencyViews,WorkingTimeBackground:a.WorkingTimeBackground,
KnockoutObjectName:a.KnockoutObjectName,NonWorkingTimeBackground:a.NonWorkingTimeBackground,TimeRangeHighlightBehavior:a.TimeRangeHighlightBehavior,EnableAlternativeRowBackground:a.EnableAlternativeRowBackground,Parent:this,GanttType:this.GanttType,ResizeInfoPopup:a.ResizeInfoPopup,MovingInfoPopup:a.MovingInfoPopup,ConnectingInfoPopup:a.ConnectingInfoPopup,TaskBarBrowseToCueLeftTemplate:a.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:a.TaskBarBrowseToCueRightTemplate,RowHeightBinding:a.RowHeightBinding,
UseChartVirtualization:a.UseChartVirtualization,OnTaskBarLoad:a.OnTaskBarLoad,OnDependencyLineLoad:a.OnDependencyLineLoad,TouchTapAction:a.TouchTapAction,RowRenderingScheduleBinding:a.RowRenderingScheduleBinding,ViewWidth:a.ViewWidth,EnableCustomRowBackground:a.EnableCustomRowBackground,EnableCustomRowForeground:a.EnableCustomRowForeground,MileStoneTemplate:a.MileStoneTemplate,DependencyTooltipTemplate:a.DependencyTooltipTemplate,ShowPreferredStartIndicator:a.ShowPreferredStartIndicator,ShowDependencyLines:a.ShowDependencyLines,
CustomOverlappingBlockFn:a.CustomOverlappingBlockFn});this.initTimeSpaneHeader();this._triggerZoomedEvent(!0);a=this.GetGanttChartInstance();a.EndUpdate();a.initializeGanttComponents();a=this.getTimeSpanHeader();this.getTimeSpanHeader().bind("heightChanged",function(a){a=g.element.find(".rq-gc-chartArea-div");var c=g.element.find(".rq-gc-topDiv");g.HeaderHeight=b(this).height();a.height(c.height()-g.HeaderHeight);g.UpdateHeight()});b(this.getTimeSpanHeader()).bind("timespanheaderszoomed",function(a,
b){g._ValidateAndSetBaseTimeUnitWidth(b)});this.HeaderHeight=a.height();this.CanUpdateTable(this.CanUpdateTable()+1);this.GanttChartLoaded.raise(this);this.GanttChartIsLoaded=!0},initTable:function(){b('<div id="'+this._createUniqueID("Table")+'" style="height:100%; width:100%; position:relative;"/>').appendTo(b(this._getUniqueSelectorIdByID("TablePanal")))},_getUniqueSelectorIdByID:function(a){return"#"+this._createUniqueID(a)},BeginUpdate:function(){this.GetGanttChartInstance().BeginUpdate()},EndUpdate:function(){this.GetGanttChartInstance().EndUpdate()},
_triggerZoomedEvent:function(a){this.triggerEvent("BeforeZooming",this,{ZoomedIn:a,Options:this.options})},GetTimeScaleHeadersInstance:function(){return b(this.getTimeSpanHeader(),this.element).data("TimeSpanHeaders")},GetTimeScaleHeadersoptions:function(a){return this.GetTimeScaleHeadersInstance().options[a]},_setOption:function(a,d){if("BaseTimeUnitWidth"==a){var g=Math.round(1E3*d)/1E3;d=arguments[1]=g}if(this.options[a]!=d){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "DataSource":this._scrollContentEdited=
!1;this.UpdateDatasource(!1);this.options.BeforeZooming&&this._triggerZoomedEvent(!0);this.ReCreateSelectableAndhoverable();g=b.cookie(this.ApplicationName+"_CollapsedTaskList");this.options.SaveStateInCookie&&this.options.SaveStateInCookieOptions.TaskCollapsingState&&void 0!=g&&this.UpdateTaskState(g);break;case "BaseTimeUnitWidth":if(d<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidth cannot be less than to BaseTimeUnitWidthMinimum value = "+this.options.BaseTimeUnitWidthMinimum;
if(d>this.options.BaseTimeUnitWidthMaximum)throw"GanttBase.BaseTimeUnitWidth cannot be greater than to BaseTimeUnitWidthMaximum value = "+this.options.BaseTimeUnitWidthMaximum;this.OnHeadersChanged(null,"BaseUnitWidthChanges");g=this.GetTimeScaleHeadersoptions("BaseTimeUnitWidth")>=this.options.BaseTimeUnitWidth;this._triggerZoomedEvent(g);this.GetTimeScaleHeadersInstance().redraw();break;case "BaseTimeUnitWidthMinimum":if(0>=d)throw"GanttBase.BaseTimeUnitWidthMinimum cannot be less than or equal to 0.";
this._validateBasebaseTimeUnitWidthMaximum();this.GetTimeScaleHeadersInstance().redraw();break;case "BaseTimeUnitWidthMaximum":this._validateBasebaseTimeUnitWidthMaximum();this.GetTimeScaleHeadersInstance().redraw();break;case "MinTimeUnitWidthForHeaderVisibility":this._validateMinTimeUnitWidthForHeaderVisibility();g=this.GetTimeScaleHeadersInstance();this.updateGanttChart("MinTimeUnitWidthForHeaderVisibility",d);g.element[this.getChildWidgetName("TimeSpanHeaders")]({MinTimeUnitWidthForHeaderVisibility:d});
this.GetTimeScaleHeadersInstance().redraw();break;case "UseTimeRangeFilteredTasksInRows":this.UseTimeRangeFilteredTasksInRows(arguments[1]);break;case "TimeRangeFilteredTasksTimeBuffer":this.TimeRangeFilteredTasksTimeBuffer(arguments[1]);break;case "GanttTable":this._hookGanttTable();break;case "RowHeight":this._scrollContentEdited=!1;for(var e=this.FlatItemsSource.FlatItemsSource,g=0;g<e.length;g++)e[g].RowHeight&&(e[g].RowHeight=d);this.grid.setOptions(a,d);break;case "RowHeightBinding":this.grid.setOptions(a,
d);this.UpdateRowHeightBinding(this.options.FlatItemsSource,!1);break;case "RoundTimeEditsTo":this.RoundTimeEditsTo(d);break;case "GanttTableOptions":this.updateGridOptions(d);e=this.element;g=this.GetGanttChartInstance();e=g.getGridTBodyParent(e);g.VSB&&e&&g.SyncChartScrollBarWith(e,!0);this.ReCreateSelectableAndhoverable();break;case "GanttChartTemplateApplied":this.OnChartTemplateApplied(this.GetGanttChartInstance());break;case "TablePanelWidth":this.options.ShowGridTable&&b(".ui-layout-container",
this.element).data("layout").sizePane("west",d);break;case "EnableDropAsChild":this.options.EnableDropAsChild=d;this.grid._dndTracker=null;this.grid.Refresh();break;case "UseVirtualization":this.options.UseVirtualization=d;this.options.UseChartVirtualization=d;this.grid.setOptions("UseGridVirtualization",d);this.updateGanttChart("UseChartVirtualization",d);break;case "CanUserReorderRows":if(this.grid.options.CanUserReorderRows==d)break;(this.grid.options.CanUserReorderRows=d)&&null!=this.options.GanttTableOptions.columns&&
this.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&(this.options.GanttTableOptions.columns.unshift({field:"",width:25,iseditable:!1,isRowHeader:!0,canUserReorderRows:!0,locked:!0}),this.grid._dndTracker=null);this.grid.setOptions("CanUserReorderRows",d);this.ReCreateSelectableAndhoverable();break;case "TaskBarBrowseToCueLeftTemplate":this.options.TaskBarBrowseToCueLeftTemplate=d;break;case "TaskBarBrowseToCueRightTemplate":this.options.TaskBarBrowseToCueRightTemplate=d;break;
case "TaskBarAdornerTemplate":this.options.TaskBarAdornerTemplate=d;break;case "KnockoutObjectName":this.options.KnockoutObjectName=d;break;case "ClearPSTIndicator":if(d){e=this.ActivityViews;for(g=0;g<e.length;g++)e[g].activity.PreferredStartTime=this.options.ProjectStartDate;this.options.ShowPreferredStartIndicator.ApplyDependenciesOnClear&&this.Model.ApplyDependencyConstraintsForAllDependencies()}break;case "EnablePSTIndicator":g=this.GetGanttChartInstance();if(g.options.ShowPreferredStartIndicator.Enabled==
d)break;else g.options.ShowPreferredStartIndicator.Enabled=d,this.RedrawChartRows();break;case "ShowDependencyLines":d?b(".rq-gc-dependencysParent",this.GetGanttChart()).css("display","block"):b(".rq-gc-dependencysParent",this.GetGanttChart()).css("display","none")}this.updateGanttChart(a,d);"TimeScaleHeaders"==a&&(this.headerChanged=!0,this.OnHeadersChanged(null,null),this.headerChanged=!1,this.subscribeHeaderCollectionChanged())}},updateGridOptions:function(a){a.columns&&(this.grid.options.CanUserReorderRows&&
this.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&(!0!=a.columns[0].isRowHeader&&!0!=a.columns[0].locked||void 0==a.columns[0].canUserReorderRows)&&a.columns.unshift({field:"",width:25,iseditable:!1,isRowHeader:!0,canUserReorderRows:!0,locked:!0}),this.grid._dndTracker=null,this.grid.setOptions("columns",a.columns));a.startEdit&&this.grid.setOptions("startEdit",a.startEdit);a.ColumnBehaviour&&this.grid.setOptions("ColumnBehaviour",a.ColumnBehaviour);this.ReCreateSelectableAndhoverable()},
PrepareGanttTable:function(){var a=b("<div style='height: 100%;' class='ui-gridpanel' > </div>");if(this.options.GanttTable.parent().length){var d=this.options.GanttTable;a.append(d);this.options.GanttTable=d}else a.append(this.options.GanttTable);return a},destroy:function(){this.triggerEvent("ondestroy");this.element.GanttRowselectable("destroy");this.element.hoverable("destroy");this.GetGanttChart().GanttChart("destroy");b(".ui-grid-body-table ",this.options.GanttTable).FlexyTable("destroy");var a=
b(this._getUniqueSelectorIdByID("TopDivContainer"));a.layout().destroy();a.empty().remove();this.element.removeClass("rq-ganttBase radiantq-ui-GanttBase");this.widgetBaseDestroy.call(this)},Print:function(a){RadiantQ.Gantt.Print(a,this)},ExportToImage:function(a){RadiantQ.Gantt.ExportToImage(a,this)},ScrollIntoView:function(a,d){if(a&&"function"==typeof a.TableRow){var g=this.GetGanttTable(),e=g.uiGridBody,f=g.GetDataFromRow(b("tr:last",g.uiGridBodyTable)),f=!0==b.isFunction(f.DisplayIndex)?f.DisplayIndex():
f.DisplayIndex,k=e.scrollTop(),l=!0==b.isFunction(a.DisplayIndex)?a.DisplayIndex():a.DisplayIndex;"function"==typeof d&&g.AfterGridScroll.subscribe(p,this);var n=null,p=function(b){null!=n&&clearTimeout(n);n=setTimeout(function(){setTimeout(function(){g.AfterGridScroll.unsubscribe(p,this);d(g.GetRowFromData(a),b)},0)},0)},q=this.options.RowHeight,r=e.scrollTop(),t=r/q+0,s=g.uiGridBody.height()/q,s=t+(s-2),t=!(t<l&&s>l);!0==this.options.UseVirtualization?!0==t&&e.scrollTop((l-(f-1))*this.options.RowHeight+
k+g.renderHeight/2):!0==t&&e.scrollTop(r+(l-s)*q);d&&p(g)}},setHeight:function(a){this.SetWidthAndHeight(null,a)},SetWidthAndHeight:function(a,b){var g=this.GetLayoutElement();g.data("layout");var e={};a&&(e.width=a+"px");b&&(e.height=b+"px");this.element.css(e);g.css(e);this.UpdateLayout()},_destroy:function(){this.element.data("GanttBase",null)}};f.GanttBase=a;window.TimesChangingEventArgs=function(a,b,g,e,f){this.DataSource=a;this.StartTime=b;this.EndTime=g;this.Type=e;f&&(this.FlexyNodeData=f)}})(RadiantQ.Gantt.Widget,
jQuery);
(function(f,b){var e={DependencyViews:null,options:{name:"GanttControl",GanttTable:"",TablePanelWidth:"45%",ProjectStartDate:null,ProjectEndDate:null,ScheduleFrom:"ProjectStartDate",ValidateDependencySetting:!0,EnforceDependencyConstraints:!0,AutoCalculateSummaryTaskTimes:!0,AdjustDurationOnAssignment:!0,IDBinding:new RadiantQ.BindingOptions("ID"),SortOrderBinding:null,NameBinding:new RadiantQ.BindingOptions("Name"),IndentLevelBinding:new RadiantQ.BindingOptions("IndentLevel"),StartTimeBinding:new RadiantQ.BindingOptions("StartTime"),PreferredStartTimeBinding:null,
EffortBinding:new RadiantQ.BindingOptions("Effort"),EndTimeBinding:null,PredecessorIndicesBinding:new RadiantQ.BindingOptions("PredecessorIndices"),ProgressPercentBinding:new RadiantQ.BindingOptions("ProgressPercent"),DescriptionBinding:null,ResourceItemsSource:null,ResourceNameBinding:null,ResourceIDBinding:null,ResourceScheduleBinding:null,AssignedResourcesBinding:new RadiantQ.BindingOptions("Resources"),CanShiftInProgressTasks:!0,GanttResources:null,PropertyChanged:new ObjectEvent("PropertyChanged"),
LagStringUnitsInHours:1,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,FilterActivites:null,AutoExpandNodes:!0,CustomProgressCalculation:null,IsTaskReadOnlyBinding:null,CanUserReorderRows:!1,ProvideWBSID:null,WBSIDBinding:null,AssgnResourcesStringConverter:null,OnDependencyLineLoad:null,ActionManager:null,FilterOptions:null,ScheduleBinding:null,EnableMultipleSelection:!1},grid:null,SelectedItems:null,_selectedItem:null,SelectedActivities:null,SelectedActivity:null,ActivityViews:null,Model:null,
PropertyChanged:null,TaskContextMenu:null,ParentTaskContextMenu:null,TableContextMenu:null,DependencyContextMenu:null,RedrawChartRows:null,AddSelectedItem:function(a){var b=this.$ganttWrapper.data("GanttRowselectable");a instanceof RadiantQ.Gantt.View.IActivityView&&!1==b.selectedItems.contains(a)&&b.selectedItems.add(a)},RemoveSelectedItem:function(a){var b=this.$ganttWrapper.data("GanttRowselectable");a instanceof RadiantQ.Gantt.View.IActivityView&&b.selectedItems.contains(a)&&b.selectedItems.remove(a)},
RefreshRow:function(a){a&&a instanceof RadiantQ.Gantt.View.IActivityView&&(this.GetGanttTable().RefreshItem(a),(a=b("td",a.$chartRow).data("GanttTaskItemBar"))&&a.RedrawTaskBar(!1))},RedrawChartRow:function(a){a&&(a=this.ActivityViews.GetIActivityView(a))&&(a=b("td",a.$chartRow).data("GanttTaskItemBar"))&&a.RedrawTaskBar(!1)},GanttTaskItemBarCollection:[],ActivityTimeChanged:new ObjectEvent("ActivityTimeChanged"),ActivityTimeChanging:new ObjectEvent("ActivityTimeChanging"),CanShiftActivity:new ObjectEvent("CanShiftActivity"),
ActivityDragEnd:new ObjectEvent("ActivityDragEnd"),IsParentDraggable:!1,GetGanttTable:function(){if(null!=this.options.GanttTable)return this.options.GanttTable.data("VWGrid")},CanShiftActivityInternal:function(a){return 0<this.CanShiftActivity.fn.length?(a=new RadiantQ.Gantt.CancellableActivityEventArgs(a),this.CanShiftActivity.raise(this,a),!a.Cancel_M()):!0},FilterActivites:null,Filter:function(){null!=this.Model&&(this.Model.Filter(this.options.FilterActivites,this.options.FilterOptions),this.UpdateViews(!1))},
ResetFilters:function(){null!=this.Model&&(this.Model.Filter(null,null),this.UpdateViews(!1))},updateTable:function(){if(2==this.CanUpdateTable()||!1==this.options.ShowGridTable&&1==this._canUpdateTable){if(!1!=this.options.ShowGridTable){var a=this.GetGanttTable();a.options.headerHeight=this.HeaderHeight;a.updateGridHeight&&a.updateGridHeight()}this.CreateSelectableAndhoverable();this.UpdateHeight()}},ReCreateSelectableAndhoverable:function(){var a=this.$ganttWrapper.data("GanttRowselectable");a&&
a.destroy();(a=this.$ganttWrapper.data("hoverable"))&&a.destroy();this.CreateSelectableAndhoverable()},CreateSelectableAndhoverable:function(){var a=this;b(".grid-body-actualContent",this.element);this.$ganttWrapper[this.getChildWidgetName("GanttRowselectable")]({SelectionMode:this.options.SelectionMode,IsFlexyGantt:!1,SelectEvent:this.options.SelectEvent,selectedChange:function(b,d){void 0==d&&(d=b.args);a.SelectedActivities=[];a.SelectedItems=a.$ganttWrapper.data("GanttRowselectable").SelectedItems().slice(0);
1<a.SelectedItems.length&&(a.SelectedItems=a.SelectedItems.sort(function(a,b){return a.DisplayIndex_M()-b.DisplayIndex_M()}));for(var g=0;g<a.SelectedItems.length;g++){var e=a.SelectedItems[g].Activity_M();a.SelectedActivities.push(e)}0!=d.AddedItems.length?(jQuery.isArray(d.AddedItems.Data)?a._selectedItem=d.AddedItems.Data[0]:a._selectedItem=d.AddedItems.Data,a.SelectedActivity=a._selectedItem.Activity_M()):(g=a.SelectedItems.length,0<g?(a._selectedItem=a.SelectedItems[g-1],a.SelectedActivity=a.SelectedActivities[g-
1]):(a._selectedItem=null,a.SelectedActivity=null));a.triggerEvent("SelectionChanged",a,d)},onEnterKeyInLastRow:function(b){a.triggerEvent("onEnterKeyInLastRow",a)},EnableMultipleSelection:this.options.EnableMultipleSelection});this.$ganttWrapper[this.getChildWidgetName("hoverable")]();this.ChartVerticalScrollSyncWithTable()},_hookGanttTable:function(){b(this.options.GanttTable).css("height","100%");b(this._getUniqueSelectorIdByID("Table")).empty().append(this.options.GanttTable);this.CanUpdateTable(this.CanUpdateTable()+
1)},UpdateHeight:function(){if(this.options.ShowGridTable){var a=this.GetGanttTable();a.setOptions&&a.setOptions("headerHeight",this.getTimeSpanHeader().height())}this.UpdateChartHeight()},_create:function(){""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=RadiantQ.Gantt.WorkTimeSchedule.Schedule8X5);this.GanttType="ProjectGantt";var a=this;this.options.ProjectStartDate instanceof Date||(this.options.ProjectStartDate=Date.today());this.element.data("GanttControl",this);this.element.addClass("rq-GanttControl");
RadiantQ.Gantt.GanttControlActionManager&&(this.ActionManager=new RadiantQ.Gantt.GanttControlActionManager,this.ActionManager.EnableRecordingActions=!1);this.options.ProjectEndDate=this.options.ProjectStartDate.clone().addDays(30);this.resourceIDBinding=this.options.ResourceIDBinding;this.ShouldEnforceDependencyConstraintsOnActivity=new ObjectEvent("ShouldEnforceDependencyConstraintsOnActivity");this.ReadOnlyPropertyChange=new ObjectEvent("ReadOnlyPropertyChange");this.baseCreate.apply(this,arguments);
this._isReadOnly=this.options.IsReadOnly;this._isEffortReadOnly=this.options.IsEffortReadOnly;this._isStartTimesReadOnly=this.options.IsStartTimesReadOnly;this._isProgressPercentReadOnly=this.options.IsProgressPercentReadOnly;this._isDependencyLinesReadOnly=this.options.IsDependencyLinesReadOnly;this.options.ResourceIDBinding_M=function(b){if(0==arguments.length)return null!=a.resourceIDBinding?a.resourceIDBinding:this.ResourceNameBinding;a.resourceIDBinding=b};this.SelectedIndex_M=function(a){if(0==
arguments.length){if(null==this._selectedItem||void 0==this._selectedItem)return-1;var b=this._selectedItem.DisplayIndex_M();return b?this._selectedItem?b:-1:this._selectedItem&&(b=this.GetGanttTable().GetRowFromData(this._selectedItem),null!=b)?b[0].rowIndex:-1}this.UpdateSectionByIndex(a)};this.SelectedItem_M=function(a){if(0==arguments.length)return this._selectedItem;this.UpdateSection(a)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(this.options,"ResourceIDBinding",{get:function(){return null!=
a.resourceIDBinding?a.resourceIDBinding:this.ResourceNameBinding},set:function(b){a.resourceIDBinding=b},enumerable:!0,configurable:!0}),Object.defineProperty(this,"SelectedIndex",{get:function(){return null==this._selectedItem||void 0==this._selectedItem?-1:this._selectedItem.DisplayIndex?this._selectedItem?this._selectedItem.DisplayIndex:-1:this._selectedItem?this.GetGanttTable().GetRowFromData(this._selectedItem)[0].rowIndex:-1},set:function(a){this.UpdateSectionByIndex(a)},enumerable:!0,configurable:!0}),
Object.defineProperty(this,"SelectedItem",{get:function(){return this._selectedItem},set:function(a){this.UpdateSection(a)},enumerable:!0,configurable:!0}))},OnPropertyChanged:function(a,b){this.options.PropertyChanged.raise(this,{PropertyName:a,value:b})},UpdateSectionByIndex:function(a){a=this.ActivityViews.length-1>=a?a:this.ActivityViews.length-1;this.UpdateSection(this.ActivityViews[a])},UpdateSection:function(a){this.$ganttWrapper.data("GanttRowselectable").selectItemByitem(a)},GanttTableElement:null,
AddNewItem:function(a,b){var d=this.ActivityViews.HoldtriggeringChange;!1==d&&(this.ActivityViews.HoldtriggeringChange=!0);void 0==b&&(b=!0);var g=this.Model.CreateNewActivity(a,b);!1==d&&(this.ActivityViews.HoldtriggeringChange=!1);return g},AddNewResourceItem:function(a){var c=this.options.ResourceItemsSource;if(null!=c)b.observable(c).insert(a);else return!1==b.isArray(a)&&(a=[a]),this.options.ResourceItemsSource=a,this.Model.AddNewResources(a)},RemoveResourceItem:function(a){var c=this.options.ResourceItemsSource;
null!=c&&b.observable(c).remove(a)},InsertNewItemAsSiblingBelow:function(a,b,d){if(void 0==b)window.console&&console.log&&console.log("undefined is not a valid index to insert as sibling below.");else{this.ActivityViews.HoldtriggeringChange=!0;void 0==d&&(d=!0);a=this.AddNewItem(a,d);d=null;var g=!0;-1!=b&&(d=this.ActivityViews[b],g=d._isExpanded,!0==d._isParent&&d.IsExpanded_M(!1));this.GetGanttTable().MoveRows(this.ActivityViews.length-1,1,b);null!=d&&d.IsExpanded_M(g);this.ActivityViews.HoldtriggeringChange=
!1;return a}},UpdateDatasource:function(a){var b=this.options;null==b.DataSource?this.Model instanceof RadiantQ.Gantt.Model.IGanttModel&&(this.Model.ShouldEnforceDependencyConstraintsOnActivity.unsubscribe(this.Model_ShouldEnforceDependencyConstraints,this),this.Model.ShouldEnforceDependencyConstraintsOnActivity.unsubscribe(this.Model_ShouldEnforceDependencyConstraints,this.Model),this.Model.ProvideDefaultWBSID.unsubscribe(b.ProvideWBSID,this.Model),this.Model.Dispose(),this.Model=null):(this.Model=
new RadiantQ.Gantt.Model.DataBoundGanttModel(b.DataSource,b.ProjectStartDate,b.ProjectEndDate,b.ScheduleFrom,b.ValidateDependencySetting,b.EnforceDependencyConstraints,b.AutoCalculateSummaryTaskTimes,b.AdjustDurationOnAssignment,b.LagStringUnitsInHours,b.IDBinding,b.SortOrderBinding,b.NameBinding,b.IndentLevelBinding,b.StartTimeBinding,b.PreferredStartTimeBinding,b.EffortBinding,b.EndTimeBinding,b.PredecessorIndicesBinding,b.ProgressPercentBinding,b.ScheduleBinding,b.DescriptionBinding,b.ResourceItemsSource,
b.ResourceNameBinding,b.ResourceIDBinding,b.ResourceScheduleBinding,b.AssignedResourcesBinding,b.WBSIDBinding,b.CustomProgressCalculation,b.WorkTimeSchedule,{Handler:this.Model_ShouldEnforceDependencyConstraints,Context:this},b.ProvideWBSID,b.CanInsertPropertyChangeTriggeringPropertiesInData,b.AutoExpandNodes,b.AssgnResourcesStringConverter,b.EnableMultipleSelection,b.DependencyFailedNotifierCallBack),null!=this.options.FilterActivites&&this.Model.Filter(this.options.FilterActivites,this.options.FilterOptions),
this.Model.CanShiftInProgressTasks_M(this.options.CanShiftInProgressTasks));this.triggerEvent("ModelCreated",this,void 0);this.UpdateViews(a)},Model_ShouldEnforceDependencyConstraints:function(a,b){0<this.ShouldEnforceDependencyConstraintsOnActivity.fn.length&&this.ShouldEnforceDependencyConstraintsOnActivity.raise(this,b)},_scheduleBinding:null,UpdateViews:function(a){this.ActivityViews&&this.ActivityViews.Dispose();this.ActivityViews=new RadiantQ.Gantt.View.GanttFlatActivitiesList(this.Model,this);
this.ActivityViews.RefreshDisplayIndexOfChildren();this.DependencyViews=this.GetGanttFlatDependenciesList();this._scheduleBinding&&this._scheduleBinding.Dispose();this.Model&&(this._scheduleBinding=new Binding(this.Model,"WorkTimeSchedule",this,"WorkTimeSchedule",null,null),this.options.GanttResources=this.Model.GanttResources_M());this.CreateGanttTable(a);this._setOption("FlatItemsSource",this.ActivityViews);var b={};b.Source=this.ActivityViews;b.canUpdateTable=a;this.triggerEvent("FlatActivitiesListCreated",
this,b)},CreateGanttTable:function(a){if(this.IsGanttTable&&this.options.ShowGridTable)if(a){""==this.options.GanttTable&&(this.options.GanttTable=b("<div class='rq-GanttTableBase' style='height:100%' id="+this._createUniqueID("grid")+"/>"));a=this.options.GanttTable;var c=this.PrepareGanttTable();a.addClass("rq-GanttTable");this.options.CanUserReorderRows&&null!=this.options.GanttTableOptions.columns&&this.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&this.options.GanttTableOptions.columns.unshift({field:"",
width:25,iseditable:!1,locked:!0,canUserReorderRows:!0,isRowHeader:!0});b(this._getUniqueSelectorIdByID("Table"),this.element).empty().append(c);this.grid=a.GanttTable({datasource:this.ActivityViews,RowHeight:this.options.RowHeight,columns:this.options.GanttTableOptions.columns,editmode:this.options.GanttTableOptions.editmode,customPopup:this.options.GanttTableOptions.customPopup,startEdit:this.options.GanttTableOptions.startEdit,EnableHeaderMenu:this.options.GanttTableOptions.EnableHeaderMenu,HeaderMenuMode:this.options.GanttTableOptions.HeaderMenuMode,
columnReorderable:this.options.GanttTableOptions.columnReorderable,AllowColumnFreezing:this.options.GanttTableOptions.AllowColumnFreezing,endEdit:this.options.GanttTableOptions.endEdit,UseGridVirtualization:this.options.UseVirtualization,EnableColumnHeaderContextMenu:this.options.EnableColumnHeaderContextMenu,IsProjectGantt:!0,Parent:this,resizable:!0,SaveColumnState:this.options.GanttTableOptions.SaveColumnState,table:this.options.GanttTableOptions.table,CanUserReorderRows:this.options.CanUserReorderRows,
EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,ColumnBehaviour:this.options.GanttTableOptions.ColumnBehaviour,enableSingleClickEdit:this.options.GanttTableOptions.enableSingleClickEdit,GridContextMenu:this.options.GanttTableOptions.GridContextMenu});a.bind("refresh",b.proxy(function(){this.UpdateChartHeight()},this));this.grid.uiGridBody.css("overflow-x","scroll");this.GanttTableElement=a;this.CanUpdateTable(this.CanUpdateTable()+
1)}else this.grid.setOptions("datasource",this.ActivityViews),this.$ganttWrapper.GanttRowselectable({Source:this.ActivityViews})},GetGanttFlatDependenciesList:function(){this.DependencyViews&&this.DependencyViews.Dispose(this.Model);return new RadiantQ.Gantt.View.GanttFlatDependenciesList(this.Model,this.ActivityViews,this)},RefreshDisplayIndex:function(){this.ActivityViews.RefreshDisplayIndexOfChildren()},OnWorkTimeScheduleChanged:function(){this.UpdateCalendarSettingInScaleHeaders();null!=this.Model&&
(this.Model.WorkTimeSchedule=this.options.WorkTimeSchedule)},RaiseActivityTimeChanged:function(a,b,d){this.OnActivityTimeChanged(a,b,d)},OnActivityTimeChanged:function(a,b,d){this.triggerEvent("ActivityTimeChanged",this,new RadiantQ.Gantt.ActivityTimeChangedEventArgs(a,b,d))},updateGanttChart:function(a,b){},OnBeforeDragStart:function(a,b){for(var d=this.$ganttWrapper.data("GanttRowselectable"),g=[],e=100,f=0;f<b;f++)this.ActivityViews[a+f]._indentLevel<e&&(e=this.ActivityViews[a+f]._indentLevel);
for(f=a+b;f<this.ActivityViews.length;f++){var k=this.ActivityViews[f];if(k._indentLevel>e)d.selectedItems.add(k),g.push(k);else break}1==b&&g.push(d.selectedItems[0]);return g},MoveRows:function(a,b,d,g,e,f){if(!(-1>a||-1>d)){e.value=0;f.value=d;if(a==d||f.value>=this.ActivityViews.length)return 0;f=new RadiantQ.Gantt.Utils.DelayUpdates;var k=null;-1<d&&(k=this.ActivityViews[d]);d=null;var l=-1;null!=g?(d=g,l=d.Activity_M().ChildActivities_M().length):null!=k&&(k.IsParent_M()&&k.IsExpanded_M()?(d=
k,l=0):(d=k.ParentView_M(),l=null!=d?d.Activity_M().ChildActivities_M().indexOf(k.Activity_M())+1:this.Model.Activities_M().indexOf(k.Activity_M())+1));g=new ObservableCollection;for(var n=this.ActivityViews[a]._indentLevel,k=0;k<b;k++){var p=this.ActivityViews[a+k];if(p._indentLevel<=n&&(g.add(p),e.value++,p._isParent&&p._isExpanded)){var q=this.GetVisibleChildCount(p.activity);e.value+=q;p._indentLevel<n&&(k+=q)}}if(null!=d)for(k=0;k<g.length;k++)a=g[k],a.ParentView_M()!=d&&this.Model.PrepareParenting(d.Activity_M(),
a.Activity_M()),l=this.ReparentActivity(a,d,l),a.ReparentView(d);else for(k=0;k<g.length;k++)a=g[k],l=this.ReparentActivity(a,null,l),a.ReparentView(null);f.Dispose();return e}},GetVisibleChildCount:function(a){var b=a.ChildActivities_M();if(0==b.length||!1==a._isExpanded)return 0;var d=0,b=a.ChildActivities_M();for(a=0;a<b.length;a++)d++,d+=this.GetVisibleChildCount(b[a]);return d},ReparentActivity:function(a,b,d){var g=-1,g=a.ParentActivity_M(),e=null!=g?g.ChildActivities_M():this.Model.Activities_M(),
g=e.indexOf(a.activity);e.remove(a.activity);this.Model.ApplyPreferredStartTimeOnActivity(a.activity,a.activity.PreferredStartTime_M());b==a.ParentView_M()&&d>g&&d--;if(null!=b){if(0>d)return e=b.Activity_M().ChildActivities_M(),e.add(a.Activity_M()),e.length;b.Activity_M().ChildActivities_M().insert(d,a.Activity_M());return d+1}0>d&&(d=0);this.Model._activities.insert(d,a.Activity_M());return d+1},GetIndexOfLastDescendant:function(a){if(0<a.Activity_M().ChildActivities_M().length&&a._isExpanded){var b=
this.GetLastUnfilteredOutActivity(a.Activity_M());if(null!=b)return a=this.ActivityViews.GetIActivityView(b),b=this.GetIndexOfLastDescendant(a),-1!=b?b:this.ActivityViews.indexOf(a)}return this.ActivityViews.indexOf(a)},GetLastUnfilteredOutActivity:function(a){for(var b=a.ChildActivities_M().length-1;0<=b;b--){var d=a.ChildActivities_M()[b];if(!d.IsFilteredOut_M())return d}return null},InsertNewItemAsChildOf:function(a,b,d){this.ActivityViews.HoldtriggeringChange=!0;a=this.AddNewItem(a,d);this.GetGanttTable().InsertRowsAsChild(this.ActivityViews.length-
1,1,b);this.ActivityViews.HoldtriggeringChange=!1;return a},CanIndent:function(a){var b=this.ActivityViews.indexOf(a);return 0<b&&null!=this.GetParentableActivityView(b-1,a._indentLevel)?!0:!1},Indent:function(a){this.ActivityViews.HoldtriggeringChange=!0;var b=this.ActivityViews.indexOf(a);if(0<b){var d=this.GetParentableActivityView(b-1,a._indentLevel);if(null!=d){var g=new RadiantQ.Gantt.Utils.DelayUpdates;this.Model.PrepareParenting(d.activity,a.activity);var e=this.Model._dependencies;if(null!=
e&&e.IsActivityFinishDependentOnAnother(d.activity)){alert("New parent cannot have a FinishToFinish or StartToFinish dependency.");return}var f=0;!1==d._isExpanded?f=d.Activity_M().ChildActivities_M().length:(b=this.LookForViewWithIndentLevel(a._indentLevel+1,b-1,!1),-1!=b&&(f=d.Activity_M().ChildActivities_M().indexOf(this.ActivityViews[b].activity)+1));this.ReparentActivity(a,d,f);a.ReparentView(d);if(null!=e&&0<e.length&&(a=e._fromActs[a.activity.id]))for(d=0;d<a.length;d++)a[d].PropertyChanged.raise(a[d],
{PropertyName:"refreshView"});g.Dispose()}}this.ActivityViews.HoldtriggeringChange=!1},GetParentableActivityView:function(a,b){for(var d=a;0<=d;d--){if(this.ActivityViews[d].IndentLevel_M()==b)return this.ActivityViews[d];if(this.ActivityViews[d]._indentLevel<b)break}return null},LookForViewWithIndentLevel:function(a,b,d){if(d)for(;b<this.ActivityViews.lenght;b++){if(this.ActivityViews[b]._indentLevel==a)return b}else for(;0<=b;b--)if(this.ActivityViews[b]._indentLevel==a)return b;return-1},Outdent:function(a){this.ActivityViews.HoldtriggeringChange=
!0;var b=new RadiantQ.Gantt.Utils.DelayUpdates,d=this.ActivityViews.indexOf(a),g=a._indentLevel;if(0<d&&0<g){if(1<g){var e=this.GetParentableActivityView(d-1,g-2);if(null!=e){var f=e.Activity_M().ChildActivities_M().indexOf(a.ParentActivity_M());-1!=f&&f++;this.ReparentActivity(a,e,f);a.ReparentView(e)}}else 1==g&&(e=this.LookForViewWithIndentLevel(0,d-1,!1),e=this.Model.Activities_M().indexOf(this.ActivityViews[e].activity)+1,this.ReparentActivity(a,null,e),a.ReparentView(null));d=this.GetActivitiesToBeMadeChildren(d+
1,g);g=this.ActivityViews.slice(0);for(e=0;e<d.length;e++)f=d[e],this.ReparentActivity(g[f],a,-1),g[f].ReparentView(a)}this.Model.ApplyPreferredStartTimeOnActivity(a.activity,a.activity.PreferredStartTime_M());b.Dispose();this.ActivityViews.HoldtriggeringChange=!1},CollapseAllRecursive:function(a){if(this.ActivityViews.Contains(a)){a=this.ActivityViews.GetIActivityView(a);for(var b=a.Activity_M().ChildActivities_M(),d=0;d<b.length;d++)this.CollapseAllRecursive(b[d]);a._isParent&&a.IsExpanded_M(!1)}},
CollapseAll:function(){for(var a=0;a<this.Model._activities.length;a++)this.CollapseAllRecursive(this.Model._activities[a])},ExpandAllRecursive:function(a){if(this.ActivityViews.Contains(a)){a=this.ActivityViews.GetIActivityView(a);a._isParent&&a.IsExpanded_M(!0);a=a.Activity_M().ChildActivities_M();for(var b=0;b<a.length;b++)this.ExpandAllRecursive(a[b])}},ExpandAll:function(){for(var a=0;a<this.Model._activities.length;a++)this.ExpandAllRecursive(this.Model._activities[a])},GetCriticalPathActivities:function(a){return null!=
this.Model?this.Model.GetCriticalActivities(a):[]},LevelResources:function(a,b){null!=this.Model&&this.Model.LevelResources(a,b)},GetActivitiesToBeMadeChildren:function(a,b){for(var d=[],g=a;g<this.ActivityViews.length&&!(this.ActivityViews[g]._indentLevel<b);g++)this.ActivityViews[g]._indentLevel==b&&d.push(g);return d},RemoveActivity:function(a){var b=new RadiantQ.Gantt.Utils.DelayUpdates,d=this.Model.GetActivityById(a);if(null==d)throw"An activity corresponding to the specified id: "+a+", could not be found";
a=[];this.BuildActivityHierarchyList(d,a);var g=d.Parent_M();if(this.ActivityViews.Contains(d)){var e=this.ActivityViews.GetIActivityView(d);this.ActivityViews.indexOf(e);this.RecursivelyRemoveViews(e)}this.Model.RemoveActivity(g,d);this.Model.UpdateSortOrderFrom(g);b.Dispose();return a},BuildActivityHierarchyList:function(a,b){b.push(a);for(var d=a.ChildActivities_M(),g=0;g<d.length;g++)this.BuildActivityHierarchyList(d[g],b)},RecursivelyRemoveViews:function(a){if(a._isExpanded)for(var b=a.Activity_M().ChildActivities_M(),
d=0;d<b.length;d++){var g=b[d];this.ActivityViews.Contains(g)&&(g=this.ActivityViews.GetIActivityView(g),this.RecursivelyRemoveViews(g))}a.ReparentView(null);this.ActivityViews.RemoveAndDispose(a)},_destroy:function(){this.element.data("GanttControl",null)},destroy:function(){this.baseDestroy.apply(this,arguments)},_setOption:function(a,b){switch(a){case "ValidateDependencySetting":null!=this.Model&&(this.Model.ValidateDependencySetting=b);break;case "EnforceDependencyConstraints":null!=this.Model&&
(this.Model.EnforceDependencyConstraints=b);break;case "IsReadOnly":this._isReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsReadOnly",Value:b});break;case "IsEffortReadOnly":this._isEffortReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsEffortReadOnly",Value:b});break;case "IsStartTimesReadOnly":this._isStartTimesReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsStartTimesReadOnly",Value:b});break;case "IsProgressPercentReadOnly":this._isProgressPercentReadOnly=
b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsProgressPercentReadOnly",Value:b});break;case "IsDependencyLinesReadOnly":this._isDependencyLinesReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsDependencyLinesReadOnly",Value:b});break;case "WorkTimeSchedule":_workTimeSchedule=b;break;case "EnableMultipleSelection":if(null!=this.Model)this.$ganttWrapper[this.getChildWidgetName("GanttRowselectable")]({EnableMultipleSelection:b});break;case "ResourceItemsSource":for(var d=
this.Model.GanttResources_M(),g=d.length-1;0<=g;g--)d.Remove(d[g]);this.options.ResourceItemsSource=b;d=this.options.DataSource;this._setOption("DataSource",null);this._setOption("DataSource",d)}this.baseSetOption.apply(this,arguments)},baseCreate:function(){},baseSetOption:function(){},baseDestroy:function(){},triggerEvent:function(a,b,d){},getChildWidgetName:function(a){}};f.GanttControl=e})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){b.fn.GetFlexyGanttInstance=function(){var a=this.data("FlexyGantt");if(a)return a;throw Error("Cannot call GetFlexyGanttInstance method before it is initialized");};var e={DependencyViews:null,options:{name:"FlexyGantt",RowRenderingScheduleBinding:null,resolverFunction:function(){return null},dynamicResolverFunction:null,AutoExpandNodes:!0,RowHeightBinding:null,ForceParentTemplateEvenIfChildless:!0,OverlappedTasksRenderingOptimization:null,UseTimeRangeFilteredTasksInRows:!1,TimeRangeFilteredTasksTimeBuffer:null,
TablePanelWidth:"20%",CanUserReorderRows:!1,GanttTable:"",DependencyListSource:new RadiantQ.RQ_CollectionChangeNotifier,DependencyLineStartRowItemBinding:null,DependencyLineEndRowItemBinding:null,DependencyLineStartItemBinding:null,DependencyLineEndItemBinding:null,DependencyLineTypeBinding:null,DependencyLineStartItemPosAdjustmentBinding:null,DependencyLineEndItemPosAdjustmentBinding:null,ProgressPercentBinding:null,isStaticTaskBars:!1,EnableMultipleSelection:!1,CustomOverlappingBlockFn:null,AreTasksOverlappingCallBack:null},
grid:null,SelectedItems:null,_selectedItem:null,FlatItemsSource:null,FlatHierarchicalItemsList:null,RedrawChartRow:null,FilterTasksByTimeRange:null,TaskTimeChanging:null,TaskTimeChanged:null,DetermineShiftBehavior:new ObjectEvent("DetermineShiftBehavior"),AdjustLinkLineStartPosition:new ObjectEvent("AdjustLinkLineStartPosition"),OnTaskBarMouseDown:new ObjectEvent("OnTaskBarMouseDown"),OnDependencyDrag:new ObjectEvent("OnDependencyDrag"),GanttTableElement:null,ReCreateSelectableAndhoverable:function(){var a=
this.$ganttWrapper.data("GanttRowselectable");a&&a.destroy();(a=this.$ganttWrapper.data("hoverable"))&&a.destroy();this.CreateSelectableAndhoverable()},CreateSelectableAndhoverable:function(){var a=this;b(".grid-body-actualContent",this.element);this.$ganttWrapper[this.getChildWidgetName("GanttRowselectable")]({SelectionMode:this.options.SelectionMode,IsFlexyGantt:!0,SelectEvent:this.options.SelectEvent,selectedChange:function(c,d){void 0==d&&(d=c.args);a.SelectedItems=b.makeArray(a.$ganttWrapper.data("GanttRowselectable").SelectedItems());
1<a.SelectedItems.length&&(a.SelectedItems=a.SelectedItems.sort(function(a,b){return a.DisplayIndex()-b.DisplayIndex()}));0!=d.AddedItems.length?(jQuery.isArray(d.AddedItems.Data)?a._selectedItem=d.AddedItems.Data[0]:a._selectedItem=d.AddedItems.Data,!1==RadiantQ.CanUseDefineProperty&&(a.SelectedItem=a._selectedItem,a.SelectedIndex=a._selectedItem?a._selectedItem.DisplayIndex():-1)):(!1==RadiantQ.CanUseDefineProperty&&(a.SelectedItem=null,a.SelectedIndex=-1),a._selectedItem=null);a.triggerEvent("SelectionChanged",
a,d)},onEnterKeyInLastRow:function(b){a.triggerEvent("onEnterKeyInLastRow",a)},EnableMultipleSelection:this.options.EnableMultipleSelection});this.$ganttWrapper[this.getChildWidgetName("hoverable")]();this.ChartVerticalScrollSyncWithTable()},_canUpdateTable:0,updateTable:function(){if(2==this.CanUpdateTable()||!1==this.options.ShowGridTable&&1==this._canUpdateTable)!1==this.options.ShowGridTable?setTimeout(function(){this.UpdateHeight();this.CreateSelectableAndhoverable()}.bind(this),0):(this.UpdateHeight(),
this.CreateSelectableAndhoverable())},_hookGanttTable:function(){b(this.options.GanttTable).css("height","100%");b(this._getUniqueSelectorIdByID("Table")).empty().append(this.options.GanttTable);this.CanUpdateTable(this.CanUpdateTable()+1)},UpdateHeight:function(){if(this.options.ShowGridTable){var a=this.GetGanttTable();a.setOptions&&a.setOptions("headerHeight",this.getTimeSpanHeader().height())}this.UpdateChartHeight()},ConvertToValidTimes:function(a,b,d,g,e,f,k,l,n){"ResizeAtStart"!=f?null==n?
(g.Value=b.clone(),e.Value=b.addMilliseconds(d.totalMilliseconds_M())):(g.Value=b.clone(),g.Value=RadiantQ.Gantt.Model.BaseGanttModel.AdjustStartTime(g.Value,d,n),e.Value=RadiantQ.Gantt.Model.BaseGanttModel.ComputeEndTime(g.Value,d,n)):null==n?(g.Value=b.clone(),e.Value=b.addMilliseconds(-d.totalMilliseconds_M())):(g.Value=b.clone(),g.Value=RadiantQ.Gantt.Model.BaseGanttModel.AdjustEndTime(g.Value,n),e.Value=RadiantQ.Gantt.Model.BaseGanttModel.ComputeStartTime(g.Value,d,n));this.OnTaskTimeChanging(a,
g,e,f,k,l)},OnTaskTimeChanging:function(a,b,d,g,e,f){0<this.TaskTimeChanging.fn.length&&(a=new TimesChangingEventArgs(a,b.Value,d.Value,g),a.shouldSyncDragCue=!1,a.row_index=e.row_index,a.element=f,this.TaskTimeChanging.raise(this,a),e.shouldSyncDragCue=a.shouldSyncDragCue,b.Value=a.StartTime,d.Value=a.EndTime)},GetGanttTable:function(){return this.options.GanttTable?this.options.GanttTable.data("VWGrid"):null},UseTimeRangeFilteredTasksInRows:function(a){if(void 0==a||null==a)return this._useTimeRangeFilteredTasksInRows||
(this._useTimeRangeFilteredTasksInRows=!1),this._useTimeRangeFilteredTasksInRows;this._useTimeRangeFilteredTasksInRows=a},TimeRangeFilteredTasksTimeBuffer:function(a){if(void 0==a||null==a){if(this._timeRangeFilteredTasksTimeBuffer)return this._timeRangeFilteredTasksTimeBuffer;this._timeRangeFilteredTasksTimeBuffer=null}else this._timeRangeFilteredTasksTimeBuffer=a},_create:function(){""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=null);this._validateOptions();this.GanttType="FlexyGantt";
this.element.data("FlexyGantt",this);this.element.addClass("rq-FlexyGantt");this._useTimeRangeFilteredTasksInRows=this.options.UseTimeRangeFilteredTasksInRows;this._timeRangeFilteredTasksTimeBuffer=this.options.TimeRangeFilteredTasksTimeBuffer;this.FilterTasksByTimeRange=new ObjectEvent("FilterTasksByTimeRange");this.TaskTimeChanging=new ObjectEvent("TaskTimeChanging");this.TaskTimeChanged=new ObjectEvent("TaskTimeChanged");this.baseCreate.apply(this,arguments);this.SelectedItems=new ObservableCollection;
this.SelecteIndex_M=function(a){if(0==arguments.length){if(null==this._selectedItem||void 0==this._selectedItem)return-1;var b=this._selectedItem.DisplayIndex;if(void 0==b||null==b)return this._selectedItem.TableRow()?this._selectedItem.TableRow()[0].rowIndex:-1;var d="function"==typeof b,b=d?this._selectedItem.DisplayIndex():b;-1==b&&(b=this.FlatHierarchicalItemsList.indexOf(this._selectedItem.HierarchicalItem),-1!=b&&(d?this._selectedItem.DisplayIndex(b):this._selectedItem.DisplayIndex=b));return b}this.UpdateSectionByIndex(a)};
this.SelectedItem_M=function(a){if(0==arguments.length)return this._selectedItem;this.UpdateSection(a)};RadiantQ.CanUseDefineProperty?(Object.defineProperty(this,"SelectedIndex",{get:function(){if(null==this._selectedItem||void 0==this._selectedItem)return-1;var a=this._selectedItem.DisplayIndex;if(void 0==a||null==a)return this._selectedItem.TableRow()?this._selectedItem.TableRow()[0].rowIndex:-1;var b="function"==typeof a,a=b?this._selectedItem.DisplayIndex():a;-1==a&&(a=this.FlatHierarchicalItemsList.indexOf(this._selectedItem.HierarchicalItem),
-1!=a&&(b?this._selectedItem.DisplayIndex(a):this._selectedItem.DisplayIndex=a));return a},set:function(a){this.UpdateSectionByIndex(a)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"SelectedItem",{get:function(){return this._selectedItem},set:function(a){this.UpdateSection(a)},enumerable:!0,configurable:!0})):(this.SelectedIndex=-1,this.SelectedItem=null)},_validateOptions:function(){this.baseValidateOption.apply(this,arguments);var a=this.options;window.console&&(a.TaskStartTimeProperty&&
"string"==typeof a.TaskStartTimeProperty||console.error("TaskStartTimeProperty has to be a string referring a property name in the bound object."),a.TaskEndTimeProperty&&"string"==typeof a.TaskEndTimeProperty||console.error("TaskEndTimeProperty has to be a string referring a property name in the bound object."),a.ParentTaskStartTimeProperty&&"string"!=typeof a.ParentTaskStartTimeProperty&&console.error("ParentTaskStartTimeProperty has to be a string referring a property name in the bound object."),
a.ParentTaskEndTimeProperty&&"string"!=typeof a.ParentTaskEndTimeProperty&&console.error("ParentTaskEndTimeProperty has to be a string referring a property name in the bound object."))},UpdateSectionByIndex:function(a){a=this.FlatItemsSource.FlatItemsSource.length-1>=a?a:this.FlatItemsSource.FlatItemsSource.length-1;this.UpdateSection(this.FlatItemsSource.FlatItemsSource[a])},UpdateSection:function(a){this.$ganttWrapper.data("GanttRowselectable").selectItemByitem(a)},RaiseFilterTasksByTimeRange:function(a){if(null!=
jQuery._data(this.element[0],"events")[this.widgetName.toLowerCase()+"filtertasksbytimerange"]||this.options.FilterTasksByTimeRange){var b=this.GetGanttChartInstance();a=new RadiantQ.FlexyGantt.FilterTasksByTimeRangeEventArgs(a,b.options.ComputedStartTime,b.options.ComputedEndTime);this.triggerEvent("FilterTasksByTimeRange",this,a);return a.FilteredList}return null},FlatItemsSource:null,UpdateDatasource:function(a){var b=this,d=this.options,g=new RadiantQ.FlexyGantt.HierarchyToList(this.options.DataSource,
function(a,g){var e=b.options.resolverFunction.call(this,a,g);d.CanInsertPropertyChangeTriggeringPropertiesInData&&b._injectGetAndSetOnData(g,a,d,e);return e},this.options);this.FlatItemsSource=g;this.FlatHierarchicalItemsList=this.FlatItemsSource.FlatHierarchicalItemsList;var e=this.GetGanttChartInstance();e&&e.VSB&&(e.VSB.ItemsSource=this.FlatHierarchicalItemsList,e.VSB.UpdateScrollContentHeight());this.options.DataSource&&this.FlatItemsSource.UpdateDisplayIndex();e={};e.Source=g;e.canUpdateTable=
a;this.CreateFlexyTable(g,a);this.triggerEvent("FlatItemsSourceCreated",this,e);this.UpdateRowHeightBinding(g,!0);void 0==g.FlatItemsSource&&(g.FlatItemsSource=null);this._setOption("FlatItemsSource",g.FlatItemsSource);g.dynamicResolver=this.options.dynamicResolverFunction},CreateFlexyTable:function(a,c){if(this.IsGanttTable&&this.options.ShowGridTable)if(c){""==this.options.GanttTable&&(this.options.GanttTable=b("<div class='rq-GanttTableBase' style='height:100%' id="+this._createUniqueID("grid")+
"/>"));var d=this.options.GanttTable,g=this.PrepareGanttTable();d.addClass("rq-FlexyTable");this.options.CanUserReorderRows&&null!=this.options.GanttTableOptions.columns&&this.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&this.options.GanttTableOptions.columns.unshift({field:"",width:25,iseditable:!1,isRowHeader:!0,canUserReorderRows:!0,locked:!0});b(this._getUniqueSelectorIdByID("Table"),this.element).empty().append(g);this.grid=d.FlexyGrid({datasource:a.FlatItemsSource,
RowHeight:this.options.RowHeight,table:this.options.GanttTableOptions.table,Parent:this,UseGridVirtualization:this.options.UseVirtualization,EnableHeaderMenu:this.options.GanttTableOptions.EnableHeaderMenu,columns:this.options.GanttTableOptions.columns,CanUserReorderRows:this.options.CanUserReorderRows,SaveColumnState:this.options.GanttTableOptions.SaveColumnState,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,
startEdit:this.options.GanttTableOptions.startEdit,endEdit:this.options.GanttTableOptions.endEdit,ColumnBehaviour:this.options.GanttTableOptions.ColumnBehaviour,resizable:!0,editmode:this.options.GanttTableOptions.editmode,GridContextMenu:this.options.GanttTableOptions.GridContextMenu});this.grid.uiGridBody.css("overflow-x","scroll");this.GanttTableElement=d;d.bind("refresh",b.proxy(function(){this.UpdateChartHeight()},this));this.CanUpdateTable(this.CanUpdateTable()+1)}else this.grid.uiGridBody.css("overflow-x",
"scroll"),this.grid.setOptions("datasource",a.FlatItemsSource),this.$ganttWrapper.GanttRowselectable({Source:a.FlatItemsSource})},_injectGetAndSetOnData:function(a,b,d,g){function e(a,b){if(a&&b){a.PropertyChanged||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));var c=a[b];Object.defineProperty(a,b,{get:function(){return c},set:function(a){c!=a&&(c=a,this.PropertyChanged.raise(this,{PropertyName:b,Value:a}))},enumerable:!0,configurable:!0})}}var f=a=null;if(null!=g)a=d.ParentTaskStartTimeProperty,
f=d.ParentTaskEndTimeProperty;else if(a=d.TaskStartTimeProperty,f=d.TaskEndTimeProperty,d.TasksListProperty&&b[d.TasksListProperty]){g=b[d.TasksListProperty];for(var k=0;k<g.length;k++){var l=g[k];null!=a&&new e(l,a);null!=f&&new e(l,f)}a=d.ParentTaskStartTimeProperty;f=d.ParentTaskEndTimeProperty}null!=a&&new e(b,a);null!=f&&new e(b,f)},UpdateRowHeightBinding:function(a,b){if(a&&a.FlatItemsSource){var d=this,g=a.FlatItemsSource;this.isRowHeightBindingDefined=!1;null!=this.options.RowHeightBinding&&
(this.options.RowHeightBinding.Converter?this.isRowHeightBindingDefined=!0:this.options.RowHeightBinding.Converter&&(this.isRowHeightBindingDefined=!0));if(this.isRowHeightBindingDefined&&b){for(var e=0;e<g.length;e++)void 0!=this.options.RowHeightBinding.Property?d.SubscribeChangeNotifications(g[e]):this._updateRowHeightFromBinding(g[e],null);g.CollectionChanged.subscribe(function(a,b){if("insert"==a.type)for(var c=0;c<b.items.length;c++)this.AddToScrollableContentHeight(b.items[c].RowHeight||this.options.RowHeight),
void 0!=this.options.RowHeightBinding.Property?d.SubscribeChangeNotifications(b.items[c]):this._updateRowHeightFromBinding(b.items[c],null);else if("remove"==a.type||"remove"==d.type)for(c=0;c<b.items.length;c++)this.AddToScrollableContentHeight(-(b.items[c].RowHeight||this.options.RowHeight)),d.UnsubscribeChangeNotifications(b.items[c])},this)}}},SubscribeChangeNotifications:function(a){a.PropertyChanged.subscribe(this.notifyChange,this);a.HierarchicalItem.PropertyChanged.subscribe(this.notifyChange,
this)},UnsubscribeChangeNotifications:function(a){a.PropertyChanged.unsubscribe(this.notifyChange,this);a.HierarchicalItem.PropertyChanged.unsubscribe(this.notifyChange,this)},UpdateTableAndChartRowHeight:function(a,c){null!=this.GanttTableElement&&this.GetGanttTable().RefreshItem(a);var d=b(a.ChartRow());if(d.length){var g=b("td",d);g.height(c-1);g.css("height",c-1+"px");g[0]._isTriggered||(g[0]._isTriggered=!0,g.trigger("heightChange"));d.height(c);null!=this.options.RowHeightBinding&&this.GetGanttChartInstance().updateGanttDependencyLines()}},
UpdateRowHeight:function(){var a=this.options.FlatItemsSource;if(a)for(var b=0;b<a.length;b++)this.UpdateTableAndChartRowHeight(a[b],this.options.RowHeight);this.UpdateChartHeight()},tableHasScrollBar:!1,updateScrollBsrVisibility:function(){if(this.options.ShowGridTable){var a=this.GetGanttTable();a.updateGridHeight();a.updateScrollPadding();a.updateGridWidth()}},notifyChange:function(a,b){this.options.RowHeightBinding.Property==b.PropertyName&&this._updateRowHeightFromBinding(a,b.value)},_updateRowHeightFromBinding:function(a,
b){var d=a.RowHeight||this.options.RowHeight,g;g=this.options.EnableOverlappedRenderingBindingProperty&&!0!=a._data[this.options.EnableOverlappedRenderingBindingProperty]?this.options.RowHeight:this.options.RowHeightBinding.Converter.call(a,b);a.RowHeight=g;null!=g&&(this.AddToScrollableContentHeight(g-d),this.UpdateTableAndChartRowHeight(a,g),this.UpdateChartHeight(),this.updateScrollBsrVisibility(!0))},UpdateOverlappingRowHeightBinding:function(a){if(void 0!=this.options.RowHeightBinding){var c=
b(a.ChartRow());c.length&&(c=b("td",c).data("TasksListControl"),this._updateRowHeightFromBinding(a,a.MaxOverlappingBlocksRowCount()),c.RedrawTaskRow())}},CollapseAll:function(){for(var a=0;a<this.FlatHierarchicalItemsList.length;a++)this.FlatHierarchicalItemsList[a].CollapseAll()},ExpandAll:function(){for(var a=0;a<this.FlatHierarchicalItemsList.length;a++)this.FlatHierarchicalItemsList[a].isExpanded||this.FlatHierarchicalItemsList[a].ExpandAll()},RedrawChartRow:function(a){(a=!1==a instanceof RadiantQ.FlexyGantt.FlexyNodeData?
a.corrFlexyNodeData?a.corrFlexyNodeData:this.FlatItemsSource.GetItemFromDataSource(a):a)&&null!=a.ChartRow()?(a=a.ChartRow(),b("td",a).data("TasksListControl").RedrawTaskRow()):console.log("The provided data is not an FlexyNodeData while redrawing chart row")},updateGanttChart:function(a,b){},destroy:function(){this.baseDestroy.apply(this,arguments);this.element.empty()},_setOption:function(a,b){this.baseSetOption.apply(this,arguments);switch(a){case "EnableMultipleSelection":this.$ganttWrapper[this.getChildWidgetName("GanttRowselectable")]({EnableMultipleSelection:b})}},
baseCreate:function(){},baseSetOption:function(){},baseDestroy:function(){},triggerEvent:function(a,b,d){},getChildWidgetName:function(a){},baseValidateOption:function(){b.radiantq.GanttBase.prototype._validateOptions.call(this)},_destroy:function(){this.element.data("FlexyGantt",null)}};f.FlexyGantt=e})(RadiantQ.Gantt.Widget,jQuery);
(function(f){RadiantQ.FlexyGantt.RenderNonWorkingHours=function(b,e,a,c,d){if(void 0!=c){var g=a.options;d=d||g.RowHeight;computedStart=g.ComputedStartTime;computedEnd=g.ComputedEndTime;if(c&&0!=d){a:{d=[];var f=new TimeSpan(computedEnd-computedStart);if(f<=TimeSpan.Zero_M())d=!1;else{if(null!=c){g=c.ConvertToNextWorkingTime(computedStart)==computedStart?!0:!1;f=c.ConvertToNextWorkingTimeIntervals(computedStart,f,null);if(0==f.length){d.push(computedStart);d.push(computedEnd);break a}d.push(computedStart);
!g&&f[0].Start_M()<computedEnd&&d.push(f[0].Start_M());for(g=1;g<f.length;g++)if(f[g].Start_M()!=f[g-1].End_M()){if(f[g-1].End_M()>=computedEnd)break;d.push(f[g-1].End_M());if(f[g].Start_M()>=computedEnd)break;d.push(f[g].Start_M())}g==f.length&&f[g-1].End_M()<computedEnd&&d.push(f[g-1].End_M())}else d.push(computedStart);d.push(computedEnd)}}if(null!=d&&(f=c.ConvertToNextWorkingTime(computedStart)==computedStart?!0:!1,!1==f&&1==d.length&&d.push(computedEnd),1<d.length)){g=0;f&&(g=1);for(f="";g<d.length-
1;g++){if(!(c&&a.GetBTSTToRenderAgainst()>=RadiantQ.Gantt.TimeScaleType.Days&&864E5>d[g+1]-d[g])){var m=a.ConvertTimeToX(d[g]),k=a.ConvertTimeToX(d[g+1])-m,m="<div class="+e+' style="position: absolute; background-color:#DFDFDF; height: inherit; margin-left:'+m+"px; width:"+k+'px;"></div>';0!=k&&(f+=m)}g++}b.append(f)}}}}})(jQuery);
(function(f,b){function e(){this._cachedRowCont=b("<div id='cache'></div>");this._cachedRows={}}function a(a){if(a=d[a.eventNamespace])a._cachedRowCont.empty(),a._cachedRows={}}var c=RadiantQ.Gantt.DefaultStyles,d={};f.GanttTaskItemsControl={currentUniqueRowSuffix:0,options:{name:"GanttTaskItemsControl",Data:null,TaskTemplate:null,ProgressBarTemplate:null,ParentTaskTemplate:null,GanttChart:null,RowHeight:null,TaskBarHeight:null,ViewWidth:null,TaskTooltipTemplate:null,MovingInfoPopup:null,ResizeInfoPopup:null,
ConnectingInfoPopup:null,WorkTimeSchedule:null,KnockoutObjectName:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,MileStoneTemplate:null},ganttControlWidget:null,ganttChartWidget:null,ActivityViews:null,$chartTable:null,$chartTableBody:null,$Area:null,$tableBody:null,$gridTableBody:null,chartTableHeight:null,yPosition:0,knockoutObject:null,VSB:null,UseRQModelBinder:!1,updateModelBinderBool:function(){var a=/data-bind/g;
null!=this.options.TaskTemplate&&(this.UseRQModelBinder=a.test(this.options.TaskTemplate)&&null==this.options.KnockoutObjectName)},PSTContextMenu:null,_create:function(){this.updateModelBinderBool();this.TaskContextMenu=null;this.ganttChartWidget=this.options.GanttChart;this.ganttControlWidget=this.ganttChartWidget.options.Parent;this.$chartTableBody=b("<tbody style='overflow:hidden;'></tbody>");var g=this.$chartTable=b("<table class='chartRowsContainer rq-gc-rowsParent-table'></table>").append(this.$chartTableBody);
g[0].style.cssText=c.ZeroStyle;this.RowHeight=this.options.RowHeight;this.SCROLLBAR_MIN_SIZE=10;this.totalItems=[];this.listItems=[];d[this.eventNamespace]=new e;this.ganttControlWidget.GanttTaskItemBarCollection=[];var f=this.ganttChartWidget.element,m=this.ganttChartWidget.$rowsParent;this.$Area=b(".rq-gc-chartArea-div",f);this.$tableBody=b(".ui-grid-body",f.parent());this.$gridTableBody=b("tbody",this.$tableBody);var k=this.chartTableHeight=this.$Area.height();!1==this.ganttChartWidget.options.IsPrinting&&
(this._dataCollectionChangedHandler=this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,this));f.bind("ganttchartrefreshui.TaskItemsRefreshUI",function(b,c){"ProjectGantt"==c.options.GanttType&&(this.options.WorkTimeSchedule=c.options.WorkTimeSchedule,this.options.TaskTemplate=c.options.TaskItemTemplate,this.options.ParentTaskTemplate=c.options.ParentTaskItemTemplate,this.options.ProgressBarTemplate=c.options.ProgressBarTemplate,this.ganttControlWidget.GanttTaskItemBarCollection=
[],!0==c.ForceToReDrawRows&&(a(this),this.$chartTableBody.empty(),this._renderBars(c)))}.bind(this));this.VSB=new RadiantQ.Gantt.VerticalScrollBar(g,m,this.options.Data,this.options.RowHeight,this.ganttControlWidget);this.options.GanttChart.VSB=this.VSB;if(!1==this.ganttChartWidget.options.IsPrinting){var l=this;if(null!=l.options.Data){var n=0,p=l.VSB.$scrollContainer.height(),q=l.VSB.$scrollContainer[0].scrollHeight;l._vsbScrollHandler=l.VSB.OnScroll.subscribe(function(a,c,d){a=l.VSB.$scrollContainer.height();
c=l.VSB.$scrollContainer[0].scrollHeight;d=l.VSB.$scrollContainer.scrollTop();if(d!=n||q!=c||p!=a){if(null==l.$dependencyDiv||0==l.$dependencyDiv.length)l.$dependencyDiv=b("div.rq-gc-dependencysParent",l.$Area);l.$dependencyDiv.scrollTop(d);l.ganttControlWidget.options.UseChartVirtualization&&l.Refresh(l.element,l.options.Data,l.$chartTable,l.options.ViewWidth,k)}q=c;p=a;n=d})}}this._renderBars({options:{FlatItemsSource:this.options.Data,ViewWidth:this.options.ViewWidth}});if(!1==this.ganttChartWidget.options.IsPrinting){f.bind("ganttchartsourceupdated",
function(b,c){this.$chartTableBody.empty();a(this);this.options.TaskTemplate=c.options.TaskItemTemplate;this.options.ParentTaskTemplate=c.options.ParentTaskItemTemplate;this.options.ProgressBarTemplate=c.options.ProgressBarTemplate;this.options.Data=c.options.FlatItemsSource;this._dataCollectionChangedHandler&&this._dataCollectionChangedHandler.Dispose();this._dataCollectionChangedHandler=this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,this);this.$dependencyDiv=null;this._renderBars(c);
var d=this.options.GanttChart;d.syncVerticalScrollBar&&d.syncVerticalScrollBar()}.bind(this));var r=null;b(window).resize(function(){null!=r&&clearTimeout(r);k=this.$Area.height();!0==this._areBarsRendered&&(r=setTimeout(function(){this.ganttChartWidget.options.UseChartVirtualization&&null!=this.options.Data&&this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,k)}.bind(this),0))}.bind(this))}b.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)&&this._createTaskContextMenu();
this.ganttControlWidget.RedrawChartRows=function(){null!=this.options.Data&&(this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,this.$Area.height(),!0),this.ganttChartWidget.DependenciesControl.Refresh())}.bind(this);this.element.data("GanttTaskItemsControl",this)},RefreshUI:function(){var a=this.$Area.height();this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,a)},_createTaskItemBar:function(a,b,c,d){a[this.getChildWidgetName("GanttTaskItemBar")]({ActivityView:b,
UseRQModelBinder:this.UseRQModelBinder,GanttChart:this.options.GanttChart,WorkTimeSchedule:this.options.WorkTimeSchedule,TaskBarHeight:this.options.TaskBarHeight,TaskTemplate:this.options.TaskTemplate,ProgressBarTemplate:this.options.ProgressBarTemplate,ParentTaskTemplate:this.options.ParentTaskTemplate,MileStoneTemplate:this.options.MileStoneTemplate,TaskBarBackgroundTemplate:this.options.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:this.options.TaskBarAdornerTemplate,TaskTooltipTemplate:this.options.TaskTooltipTemplate,
MovingInfoPopup:this.options.MovingInfoPopup,ResizeInfoPopup:this.options.ResizeInfoPopup,ConnectingInfoPopup:this.options.ConnectingInfoPopup,RowCount:this.currentUniqueRowSuffix,KnockoutObjectName:this.options.KnockoutObjectName,Parent:this,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate});this.UseRQModelBinder&&RadiantQ.Bind(a,b);this.ganttChartWidget.LoadingRow({Row:c,Data:b});!0==this.refreshTimeIndicatorLineAfterInitTaskBar&&
this.taskBarInstances.push(a.data("GanttTaskItemBar"))},refreshTimeIndicatorLineAfterInitTaskBar:!1,applayBindings:function(a,b){ko.applyBindingsToDescendants(a,b[0])},_timer:null,ignorecollectionChangs:!1,_bindCollectionChanged:function(a,b){var c=this;null!=c._timer&&clearTimeout(c._timer);if(!0!=c.ignorecollectionChangs)if(c.ganttChartWidget.options.UseChartVirtualization){if("remove"==a.type)for(var e=0;e<b.items.length;e++){var f=b.items[e].Activity_M().ID_M(),n=d[this.eventNamespace];n._cachedRows[f]&&
(n._cachedRows[f].remove(),delete n._cachedRows[f])}c._timer=setTimeout(function(){c.Refresh(c.element,a.target,c.$chartTable,c.options.ViewWidth,c.$Area.height());c.ganttControlWidget.UpdateChartHeight()}.bind(c),0)}else{if("insert"==a.type){c.InsertRow(c.element,b,c.$chartTable,c.options.ViewWidth);c.VSB.UpdateScrollContentHeight();c.knockoutObject=eval(c.options.KnockoutObjectName);try{if(c.options.KnockoutObjectName)for(e=0;e<b.items.length;e++)c.applayBindings(c.knockoutObject,b.items[e].$chartRow)}catch(p){window.console&&
console.error(p+" :Error while inserting "+b.index)}c.ganttControlWidget.UpdateChartHeight()}if("remove"==a.type){for(e=0;e<b.items.length;e++)c.RemoveRow(b.index,c.$chartTable);c.VSB.UpdateScrollContentHeight();c.ganttControlWidget.UpdateChartHeight()}}},_areBarsRendered:!1,_renderBars:function(a){this._areBarsRendered=!0;null!=a.options.FlatItemsSource&&(this.ActivityViews=a.options.FlatItemsSource,this.Refresh(this.element,a.options.FlatItemsSource,this.$chartTable,a.options.ViewWidth,this.$Area.height()))},
_getVirtualizedTask:function(a,c){var e=this.ActivityViews._dictActivityVsView[a],f=d[this.eventNamespace],l=this.options.GanttChart;if(f._cachedRows[a])return e.ChartRow(f._cachedRows[a]),f=f._cachedRows[a],!1==l.options.IsPrinting&&e.IsSelected()?f.addClass("rq-row-selected "+window.radiantQclasses.selectionClass):f.hasClass("rq-row-selected")&&f.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass),f;var n=b("<tr class='rq-grid-row' VirtualizationID="+a+"></tr>"),p=b("<td id='ChartRow'/>");
n.css("height",this.RowHeight);var q=n.height();p.css("height",q);n.append(p);!1==l.options.IsPrinting&&(e.ChartRow(n),f._cachedRows[a]=n);this._createTaskItemBar(p,this.ActivityViews._dictActivityVsView[a],n,null);p.width(c);!1==l.options.IsPrinting&&e.IsSelected()&&n.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);return n},$dependencyDiv:null,getGridParent:function(){return b(".ui-grid-body",this.ganttChartWidget.element.parent())},getGridTBodyParent:function(a){return b("tbody",
a)},guid:function(){var a="",b,c;for(b=0;32>b;b++){c=16*Math.random()|0;if(8==b||12==b||16==b||20==b)a+="-";a+=(12==b?4:16==b?c&3|8:c).toString(16)}return a},taskBarInstances:[],Refresh:function(c,e,f,k,l,n){this.updateModelBinderBool();var p=this.options.GanttChart;l=p.options.Parent;p.clearDepLines();this.refreshTimeIndicatorLineAfterInitTaskBar=0!=p.options.TimeIndicatorLineOption;this.taskBarInstances=[];if(!0==l.PreventDefaultFns)p.syncVerticalScrollBar&&p.syncVerticalScrollBar();else{p.ViewableDependencyViews=
new RQArray;this.$Area.height();f.css("height","auto");c.append(f);var q=this;this.VSB.CreateRow=function(a,c){void 0==c.uid&&(c.uid=q.guid());var g=null;if(p.options.UseChartVirtualization){var e=c;if(e._parentView&&!1==e._parentView._isExpanded)return null;var g=e.activity.ID_M(),f=!1;d[q.eventNamespace]._cachedRows[g]&&(f=!0);g=q._getVirtualizedTask(g,k);g[0]["data-grid-item"]=e;g.attr("data-uid",e.uid);f&&((f=b("#ChartRow",g).data().GanttTaskItemBar)&&b("#ChartRow",g).data().GanttTaskItemBar._OnRecomputeLocation(),
!0==q.refreshTimeIndicatorLineAfterInitTaskBar&&q.taskBarInstances.push(f));!1==e.IsSelected()&&g.hasClass("rq-row-selected")&&g.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass);q._updateViewableDependencyViews(e)}else{e=c;q._updateViewableDependencyViews(e);g=b("<tr class='rq-grid-row' data-uid ="+e.uid+" ></tr>");f=b("<td id='ChartRow'/>");g.css("height",q.options.RowHeight);var h=g.height();f.height(h);g.append(f);!1==p.options.IsPrinting&&e.ChartRow(g);q._createTaskItemBar(f,
e,g,null);g[0]["data-grid-item"]=e;q.currentUniqueRowSuffix++;f.width(k);!1==p.options.IsPrinting&&e.IsSelected()&&g.addClass("rq-row-selected "+window.radiantQclasses.selectionClass)}return g};this.VSB.ClearCachedRows=function(){a(q)};!0==p.options.UseChartVirtualization?(c=d[this.eventNamespace],l=this.$chartTableBody.children(),c._cachedRowCont.append(l),this.$chartTableBody.empty(),!0==n&&a(this)):this.$chartTableBody.empty();this.VSB.Refresh(e,p.options.UseChartVirtualization);if(!0==q.refreshTimeIndicatorLineAfterInitTaskBar)for(n=
0;n<this.taskBarInstances.length;n++)this.taskBarInstances[n]._drawVerticalLines();this.taskBarInstances=[];f.width(k);0==e.length?(this.totalItems=[],this.listItems=[],a(this)):(p.AfterChartRowsRender.raise(),this._enableAlternativeRowBackground(),this.ApplyTooltip(b(".rq-gc-tooltip",this.element)))}},ApplyTooltip:function(a){a.RQTooltip(function(a){a=a.parent().data("GanttTaskItemBar");if(null==a.options.TaskTooltipTemplate)return null;a.UpdateTemplateContent(a.Activity);return a.TooltipContent});
b.fn.RQTooltip.CanShowTooltip=!0},_enableAlternativeRowBackground:function(){!0==this.options.EnableAlternativeRowBackground&&(b("td",this.$chartTable).removeClass("rq-grid-alternative-background"),b("td",this.$chartTable).addClass(function(){if(!0==(0!=b(this).parent()[0]["data-grid-item"].DisplayIndex_M()%2))return"rq-grid-alternative-background"}))},_createTaskContextMenu:function(){var a="#"+this.ganttChartWidget.$GanttChart[0].id,c=[{keyName:"ConvertToMilestone",name:window.RadiantQ_ConvertToMilestoneString,
icon:"Convert to Milestone"}],d=new RadiantQ.ContextMenuImpl.ContextMenu(a+" .rq-gc-taskbar, "+a+" .taskbar-style, "+a+" .rq-gc-commonTaskbar",b(a).parent());d.AddNewItems(c);d.ItemClicked.subscribe(function(a,c){var d=b(c[0].parentElement).data();"ConvertToMilestone"==a&&null!=d&&d.GanttTaskItemBar.options.ActivityView.ConvertToMilestone(d.GanttTaskItemBar.options.ActivityView.Activity_M(),d.GanttTaskItemBar.GanttControl)});d.BeforeContextMenu.subscribe(function(a,b){d.Items&&d.Items.ConvertToMilestone&&
(d.Items.ConvertToMilestone.disabled=this.ganttControlWidget.options.IsReadOnly||this.ganttControlWidget.options.IsEffortReadOnly?!0:!1)},this);var c=[{keyName:"ConverToNormalTask",name:window.RadiantQ_ConvertToNormalTaskString,icon:"Convert to normal Task"}],e=new RadiantQ.ContextMenuImpl.ContextMenu(a+" .rq-gc-milestoneBar",b(a).parent().parent());e.AddNewItems(c);e.ItemClicked.subscribe(function(a,c){var d=b(c[0].parentElement).data();"ConverToNormalTask"==a&&d.GanttTaskItemBar.options.ActivityView.ConvertToNormalTask(d.GanttTaskItemBar.options.ActivityView.Activity_M(),
d.GanttTaskItemBar.GanttControl)});e.BeforeContextMenu.subscribe(function(a,b){e.Items&&e.Items.ConverToNormalTask&&(e.Items.ConverToNormalTask.disabled=this.ganttControlWidget.options.IsReadOnly||this.ganttControlWidget.options.IsEffortReadOnly?!0:!1)},this);this.ganttControlWidget.TaskContextMenu=d;this.ganttControlWidget.MilestoneContextMenu=e;!0==this.ganttChartWidget.options.ShowPreferredStartIndicator.Enabled&&(c=[{keyName:"ClearIcon",name:window.RadiantQ_ClearPSTIndicator,icon:"ClearIcon"}],
a=new RadiantQ.ContextMenuImpl.ContextMenu(a+" .anchorIcon",b(a).parent()),a.AddNewItems(c),a.ItemClicked.subscribe(function(a,b){var c=b.parent().data().GanttTaskItemBar;c.Activity.PreferredStartTime=this.ganttControlWidget.options.ProjectStartDate;!0==this.ganttChartWidget.options.ShowPreferredStartIndicator.ApplyDependenciesOnClear&&this.ganttControlWidget.Model.ApplyDependencyConstraints(c.Activity)},this),this.PSTContextMenu=a)},getItemAtIndex:function(a,c,d){if(0<=a&&a<this.options.Data.length){var e=
a.toString();if(null===this.listItems[e]||void 0===this.listItems[e]||null===this.listItems[c[a].Activity_M().ID_M()-1]||void 0===this.listItems[c[a].Activity_M().ID_M()-1]&&this.listItems[e].attr("VirtualizationID")!=c[a].Activity_M().ID_M()){var f=b("<tr class='rq-grid-row' VirtualizationID="+c[a].Activity_M().ID_M()+"data-uid="+c[a].uid+">  </tr>"),n=b("<td id='ChartRow'/>");f.css("height",25);var p=f.height();n.css("height",p);f.append(n);!1==this.options.GanttChart.options.IsPrinting&&c[a].ChartRow(f);
this._createTaskItemBar(n,c[a],f,null);this.currentUniqueRowSuffix++;n.width(d);!1==this.options.GanttChart.options.IsPrinting&&c[a].IsSelected()&&f.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);null===this.listItems[e]||void 0===this.listItems[e]?this.listItems[e]=f:this.listItems[c[a].Activity_M().ID_M()-1]=f}else f=this.listItems[e].attr("VirtualizationID")!=c[a].Activity_M().ID_M()?this.listItems[c[a].Activity_M().ID_M()-1]:this.listItems[a],!1==this.options.GanttChart.options.IsPrinting&&
c[a].ChartRow(f);f.attr("list-index",a);return f}},cleanupListItems:function(a){for(var b,c,d=0;d<this.totalItems.length;d++)b=this.totalItems[d],c=b.attr("list-index"),void 0!==this.processedItems[c]&&this.processedItems[c].attr("VirtualizationID")==b.attr("VirtualizationID")||b.detach();b=[];if(this.processedItems)for(c in this.processedItems)b.push(this.processedItems[c]);this.totalItems=b;!0!==a&&this.ScrollBar.fadeTo(300,0)},InsertRow:function(a,c,d,e){a=this.options.GanttChart;for(var f=0;f<
c.items.length;f++){var n=c.index+f,p=c.items[f],q=b("<tr class='rq-grid-row' data-uid="+p.uid+"></tr>"),r=b("<td id='ChartRow' />");q.css("height",this.options.RowHeight);var t=q.height();r.css("height",t);this._createTaskItemBar(r,p,q,n);q.append(r);this.currentUniqueRowSuffix++;p.ChartRow(q);t=d.find("tr.rq-grid-row");0==n?t.length?t.eq(0).before(q[0]):d.append(q):t.eq(n-1).after(q[0]);q[0]["data-grid-item"]=p;r.width(e);!1==a.options.IsPrinting&&p.IsSelected()&&q.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);
this._updateViewableDependencyViews(p);this.ApplyTooltip(b(".rq-gc-tooltip",r))}this._enableAlternativeRowBackground()},RemoveRow:function(a,b){b.find("tr.rq-grid-row").eq(a);b.find("tr.rq-grid-row").eq(a).remove();var c=d[this.eventNamespace];this.ActivityViews[a]&&delete c._cachedRows[this.ActivityViews[a].activity.ID_M()];this._removeTimer&&clearTimeout(this._removeTimer);this._removeTimer=setTimeout(function(){this._enableAlternativeRowBackground();this._removeTimer=!1}.bind(this),0)},_updateViewableDependencyViews:function(a){var b=
this.options.GanttChart,c=b.options.Parent;if(c.DependencyViews&&(a=c.DependencyViews._depViewByActivity[a.Activity_M().ID_M()]))for(c=0;c<a.length;c++){var d=a[c];d&&-1==b.ViewableDependencyViews.indexOf(d)&&b.ViewableDependencyViews.push(d)}},_setOption:function(a,c){this.widgetBaseSetOption.apply(this,arguments);b("td.rq-gc-row ",this.$chartTableBody).GanttTaskItemBar("option",a,c)},_destroy:function(){this._dataCollectionChangedHandler&&(this._dataCollectionChangedHandler.Dispose(),this._dataCollectionChangedHandler=
null);this._ganttVerticalScrollEventHandler&&(this._ganttVerticalScrollEventHandler.Dispose(),this._ganttVerticalScrollEventHandler=null);this.ganttChartWidget.element.unbind("ganttchartrefreshui.TaskItemsRefreshUI");a(this);this.element.empty();this.element.data("GanttTaskItemsControl",null)}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){var e=RadiantQ.Gantt,a=RadiantQ.Gantt.Utils.TimeComputingUtils,c=RadiantQ.Gantt.Utils.TimeComputingUtils,d=RadiantQ.Template||kendo.template,g={options:{name:"GanttTaskItemBar",ActivityView:null,GanttChart:null,WorkTimeSchedule:null,TaskBarHeight:null,TaskTemplate:null,ProgressBarTemplate:null,ParentTaskTemplate:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,Data:null,ProgressTemplate:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,ConnectingInfoPopup:null,
IsParentTypeRow:null,RowCount:null,KnockoutObjectName:null,Parent:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,MileStoneTemplate:null},StartTime:function(){return this.Activity._startTime},EndTime:function(){return this.Activity.EndTime_M()},Effort:function(){return this.Activity.Effort_M()},IsParent:function(){return this.ActivityView._isParent},IsExpanded:function(){return this.ActivityView.IsExpanded_M()},IsMilestone:function(){return this.Activity._isMilestone},
IsRegularTask:function(){return this.ActivityView.IsRegularTask_M()},ProgressPercent:function(){return this.Activity.ProgressPercent_M()},ProgressEndTime:function(){return this.Activity.ProgressEndTime_M()},WorkTimeSchedule:function(){return this.GanttControl.options.WorkTimeSchedule},OriginalLeft:0,OriginalWidth:0,ActivityView:null,Activity:null,IsTemplateApplied:!1,taskStartAndEndTime:{},GanttControl:null,GanttChart:null,GanttChartRows:null,GanttTaskItemsControl:null,TaskBarRectangle:null,ProgressBarRectangle:null,
MileStoneBar:null,ParentBar:null,PropertyChanged:new ObjectEvent("PropertyChanged"),HasChanged:!1,TaskItemsControl:null,addToViewModel:function(a,b){this.KnockoutObject&&(this.KnockoutObject[a]=b)},PSTIndicator:null,_create:function(a){var b=this.options;this.TaskItemsControl=b.Parent;this.GanttChart=b.GanttChart;this.GanttControl=this.GanttChart.options.Parent;this.ActivityView=b.ActivityView;this.Activity=this.ActivityView.activity;this.KnockoutObject=eval(b.KnockoutObjectName);this.element.data("GanttTaskItemBar",
this);this.element.addClass("rq-gc-row");this._actViewPropertyChangedHandler&&this._actViewPropertyChangedHandler.Dispose();this._activityPropertyChangedHandler&&this._activityPropertyChangedHandler.Dispose();this._actAssgnsCollectionChangedHandler&&this._actAssgnsCollectionChangedHandler.Dispose();this._readOnlyPropertyChangedHandler&&this._readOnlyPropertyChangedHandler.Dispose();this._actViewPropertyChangedHandler=this.ActivityView.PropertyChanged.subscribe(this._actView_PropertyChanged,this);
this._activityPropertyChangedHandler=this.Activity.PropertyChanged.subscribe(this._activity_PropertyChanged,this);this._actAssgnsCollectionChangedHandler=this.Activity._assignments.CollectionChanged.subscribe(this._activity_Assignments_CollectionChanged,this);this.GanttChart.options.IsPrinting||(this._readOnlyPropertyChangedHandler=this.GanttControl.ReadOnlyPropertyChange.subscribe(this.ReadOnlyStateChangedCallback,this));try{var c=!1,d=null,g=this.Activity.DataSource_M();if(this.KnockoutObject)for(var e in this.KnockoutObject)if(/Task\d+/.test(e)&&
this.KnockoutObject[e]===g){d=e;c=!0;break}!1==c&&(d="Task"+b.RowCount,this.addToViewModel("Task"+b.RowCount,this.Activity.DataSource_M()))}catch(f){}this._renderElementsFromTemplate(d);this.element.append(this.TaskBarRectangle);this._listenForMouseEnterAndLeave();this._asyncShiftAndResizeTimer=this.asyncInitShiftAndResize();this._listenForTouchTap();this.UpdateResourceText();this._loadBrowseToCue();this._asyncTooltipTimer=this.asyncApplyToolTip();this._loadAdornerAndBgTemplate();this.taskStartAndEndTime=
{Name:this.options.ActivityView.activity.ActivityName_M(),OriginalStart:this.Activity.StartTime_M(),OriginalEnd:this.Activity.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:this.Activity.ProgressEndTime_M(),ProposedEnd:null,ProposedStart:null};this.IsTemplateApplied=!0;a||this._OnRecomputeLocation();b.GanttChart.element.bind("ganttcharttimeindicatorlineoptionchanged."+this.eventNamespace,function(a,b){this._OnRecomputeLocation()}.bind(this));
this._chartRefreshUIHandler&&this._chartRefreshUIHandler.Dispose();this._chartRefreshUIHandler=b.GanttChart.RefreshUIEvent.subscribe(this.OnChartRefreshUI,this);this._GanttChart_ViewportTimeRangeChanged(this,null);this.GanttChart._dirtyTaskItemControls&&(this.GanttChart._dirtyTaskItemControls.push(this),this.GanttChart._diryTaskItemByActs[this.Activity.id]=this);this.GanttChart.options.IsPrinting||(this.initValuesFromOptions(),this.UpdateThumbsReadOnlyStates())},asyncApplyToolTip:function(){var a=
this;return setTimeout(function(){a.ApplyTooltipSettings(a.TaskBarRectangle,a.options.Data);a.ApplyTooltipSettings(a.ParentBar,a.options.Data);a.ApplyTooltipSettings(a.MileStoneBar,a.options.Data)},0)},asyncInitShiftAndResize:function(){var a=this;return setTimeout(function(){!1==a.GanttChart.options.IsPrinting&&(a.TaskBarRectangle.ganttShiftTracker(a,a.DragEnd),a.TaskBarRectangle.ganttResizeTracker(a,a.ResizeEnd),a.ParentBar.ganttShiftTracker(a,a.DragEnd),a.MileStoneBar.ganttShiftTracker(a,a.DragEnd),
a.TaskBarRectangle.css("cursor","move"),a.UpdateThumbsReadOnlyStates())},0)},OnChartRefreshUI:function(a,b){"ProjectGantt"==b.options.GanttType&&(this.options.WorkTimeSchedule=b.options.WorkTimeSchedule,this._OnRecomputeLocation(),this._removeTooltip(this.TaskBarRectangle),this._removeTooltip(this.ParentBar),this._removeTooltip(this.MileStoneBar))},RedrawTaskBar:function(a){this._destroy();this._create(a);a=this.element.parent();a[0]["data-grid-item"]=this.ActivityView;this.KnockoutObject&&this.applayBindings(this.KnockoutObject,
this.element[0]);this.options.UseRQModelBinder&&RadiantQ.Bind(a,this.ActivityView)},applayBindings:function(a,b){ko.applyBindingsToDescendants(a,this.element)},KnockoutObject:null,ViewStartTime:function(){return this.GanttChart.options.ComputedStartTime},ViewEndTime:function(){return this.GanttChart.options.ComputedEndTime},ViewWidth:function(){return this.GanttChart.options.ViewWidth},GetScheduleToPlotWith:function(){return null==this.Activity?this.options.WorkTimeSchedule:this.Activity.GetScheduleToPlotWith(this.options.WorkTimeSchedule)},
_OnRecomputeLocation:function(){function a(b){return"<div>"+b.parent().data("GanttTaskItemBar").Activity.PreferredStartTime.toString("MM/dd/yyyy")+"</div>"}if(null!=this.ActivityView&&!0!=this.Activity._startTime.isGreaterThan(this.Activity.EndTime_M())&&!1!=this.IsTemplateApplied){var d=this.GetScheduleToPlotWith(),g=c.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,this.ViewStartTime(),this.StartTime(),d)*this.GanttChart.options.BaseTimeUnitWidth,d=c.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,
this.StartTime(),this.EndTime(),d)*this.GanttChart.options.BaseTimeUnitWidth;this.OriginalLeft=g;this.OriginalWidth=d;null!=this.ParentBar&&this.ParentBar.css("display","none");null!=this.MileStoneBar&&this.MileStoneBar.css("display","none");null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","none");if(this.ActivityView._isParent||this.Activity._isMilestone){this.CanvasLeft=g-7;if(this.ActivityView._isParent){var e=this.ParentBar.attr("auto-adjust");!1==e||"false"==e?this.ParentBar.css({width:d+
"px","margin-left":g+"px","margin-top":"2px"}):this.ParentBar.css({width:d+20+"px","margin-left":g-10+"px","margin-top":"2px"});this.BarPolygon=this.ParentBar;this.BarWidth=d;this.OriginalCompletedWidth=this.CompletedWidth=0;this.ParentBar&&this.element.append(this.ParentBar);e=b("div.label",this.ParentBar);0==e.length&&(e=b("div.rq-gc-taskbar-label",this.ParentBar));this.ParentBar&&0<e.length&&e.css("margin-left","30px")}else this.MileStoneBar.css("width","17px"),e=this.MileStoneBar.outerWidth(),
this.MileStoneBar.css("margin-left",g-e/2+"px"),this.MileStoneBar.css("margin-top","4px"),this.BarPolygon=this.MileStoneBar,this.BarWidth=14,this.OriginalCompletedWidth=this.CompletedWidth=0,this.MileStoneBar&&this.element.append(this.MileStoneBar),e=b("div.label",this.MileStoneBar),0==e.length&&(e=b("div.rq-gc-taskbar-label",this.MileStoneBar)),this.MileStoneBar&&0<e.length&&e.css("margin-left","18px");null!=this.BarPolygon&&(this.BarPolygon.css("display","block"),this.TaskItemsControl.ApplyTooltip(this.BarPolygon));
null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","none");null!=this.ProgressPercentResizeThumb&&this.ProgressPercentResizeThumb.hide()}else this.CanvasLeft=g,this.BarWidth=d,null!=this.ParentBar&&this.ParentBar.css("display","none"),null!=this.MileStoneBar&&this.MileStoneBar.css("display","none"),null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","block"),this._UpdateProgressBarPosition(g);this.CanvasRight=this.CanvasLeft+this.BarWidth;this.TaskBarRectangle.css("width",
d+"px");this.TaskBarRectangle.css("margin-left",g+"px");this.TaskBarRectangle.css("margin-top","3px");this.ProgressBarRectangle[0].style.width=(0>this.CompletedWidth?this.BarWidth:this.CompletedWidth).toString()+"px";this.ProgressBarRectangle.css("border-width","1px");this.ProgressBarRectangle.css("border-style","solid");1>=this.CompletedWidth&&this.ProgressBarRectangle.css("border-width","0px");!0!=this.GanttChart.options.ShowPreferredStartIndicator.Enabled||this.ActivityView._isParent||(this.PSTIndicator=
b(".anchorIcon",this.element),g=this.GanttChart.ConvertTimeToX(this.ActivityView.Activity.PreferredStartTime),0!=this.PSTIndicator.length?this.PSTIndicator.css("margin-left",g-8+"px"):(b(".rq-gc-taskbar",this.element).after("<div class='anchorIcon'  style='margin-left:"+(g-8)+"px;'></div>"),this.PSTIndicator=b(".anchorIcon",this.element)),this.GanttChart.options.ShowPreferredStartIndicator.initCallback&&(this._onInitCallbackTimer=setTimeout(function(){var a=this.GanttChart.options.ShowPreferredStartIndicator.initCallback;
null!=a&&"function"==typeof a&&a.call(this.PSTIndicator,this);this._onInitCallbackTimer=null}.bind(this),0)),this.PSTIndicator.RQTooltip(a));g=this.TaskBarRectangle.height();this.ProgressBarRectangle.css("margin-top",g/2-2.5+"px");this._loadAdornerAndBgTemplate();this._drawVerticalLines();this._updateTaskBarLabel();this._UpdateBrowseToTaskCuesStates();this.UpdateResourceText();var f=this.GanttChart.options.OnTaskBarLoad;f&&(this._onTaskBarLoadTimer=setTimeout(function(){null!=f&&null!=this.TaskBarRectangle&&
"function"==typeof f&&(this.ActivityView._isParent?f.call(this.ParentBar[0],this):this.Activity._isMilestone?f.call(this.MileStoneBar[0],this):f.call(this.TaskBarRectangle[0],this));this._onTaskBarLoadTimer=null}.bind(this),0))}},_drawVerticalLines:function(){var a=this.Activity._isMilestone,b=this.ActivityView._isParent,c=this.element,c=this.TaskBarRectangle;!0==b&&(c=this.ParentBar);!0==a&&!1==b&&(a=!0,c=this.MileStoneBar);if(null!=c){var d=c.find("div.rq-gc-start-verticalLine"),g=c.find("div.rq-gc-end-verticalLine");
if(0!=d.length||0!=g.length){var f=c.closest("tr");if(f.length){var q=parseInt(c.css("margin-top"));c.height();c=c.width();f=f[0].offsetTop;q={height:f+q+"px","margin-left":"0px","margin-top":-(f+q)+"px"};taskbarwidth=c;!0==a&&!1==b&&(taskbarwidth=this.MileStoneBar.outerWidth()/2,q["margin-left"]=taskbarwidth+"px");0!=d.length&&d.css(q);0!=g.length&&(q["margin-left"]=taskbarwidth+"px",g.css(q));a=this.options.GanttChart.options.TimeIndicatorLineOption;(a&e.TimeIndicatorLines.Always)!=e.TimeIndicatorLines.Always||
(a&e.TimeIndicatorLines.OnResize)==e.TimeIndicatorLines.OnResize?(d.hide(),g.hide()):(d.show(),g.show())}}}},_actView_PropertyChanged:function(a,b){"IsReadOnly"==b.PropertyName&&this.ReadOnlyStateChangedCallback(a,b)},UpdateUI:function(){var a=this.GanttChart._dirtyTaskItemControls,b=this.GanttChart._diryTaskItemByActs;this.GanttChart._dirtyTaskItemControls=[];for(var c=0;c<a.length;c++){var d=a[c],g=d.Activity.id;d.Activity&&void 0!=d.Activity.id&&b[g]&&(b[g]._OnRecomputeLocation(),delete b[g])}this.GanttChart._dirtyTasksTimer=
null;this.GanttChart._dirtyTaskItemControls=[];this.GanttChart._diryTaskItemByActs={}},_isActivityPropertyChanged:!1,_$parentMiddleBar:null,_activity_PropertyChanged:function(a,c){this._isActivityPropertyChanged=!0;void 0===this.GanttChart._dirtyTaskItemControls&&(this.GanttChart._dirtyTasksTimer=null,this.GanttChart._dirtyTaskItemControls=[],this.GanttChart._diryTaskItemByActs={});null==this._$parentMiddleBar&&(this._$parentMiddleBar=b(".rq-gc-parentBar-middle",this.ParentBar));0==this._$parentMiddleBar.length&&
(this._$parentMiddleBar=b(".parentMiddleBar-style",this.ParentBar));"IsExpanded"==c.PropertyName&&(!1==c.value?this._$parentMiddleBar.addClass("rq-gc-Parentbar-collapsed"):this._$parentMiddleBar.removeClass("rq-gc-Parentbar-collapsed"));var d=this.Activity.ID_M();void 0===this.GanttChart._diryTaskItemByActs[d]&&this.GanttChart._dirtyTaskItemControls.push(this);this.GanttChart._diryTaskItemByActs[d]=this;d=this.GanttChart._dirtyTasksTimer;null!=d&&clearTimeout(d);this.GanttChart._dirtyTasksTimer=setTimeout(function(){this.UpdateUI();
this.GanttChart._dirtyTasksTimer=null}.bind(this),0)},_AdjustOrigionalLeftAndWidth:function(){if(0>this.OriginalLeft+this.OriginalWidth||this.OriginalLeft>this.ViewWidth())left=-10,width=0;else{var a=this.GanttChart.GetBarRenderStartTime(this.StartTime()),b=this.GanttChart.GetBarRenderEndTime(this.EndTime());!1!=a.equals(this.StartTime())&&!1!=b.equals(this.EndTime())||!a.isLessThan(b)||(width=c.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,a,b,this.GanttChart.options.WorkTimeSchedule)*
this.GanttChart.options.BaseTimeUnitWidth,left=c.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,this.ViewStartTime(),a,this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth)}},_UpdateProgressBarPosition:function(a){var c=this.OriginalWidth*this.ProgressPercent()/100;0==this.BarWidth?this.OriginalCompletedWidth=this.CompletedWidth=0:0>c?this.OriginalCompletedWidth=this.CompletedWidth=0:(this.OriginalCompletedWidth=c,c-=a-this.OriginalLeft,0>c&&
(c=0),c>this.BarWidth?c=this.BarWidth:c==this.BarWidth&&(c-=2),this.CompletedWidth=c);this.ProgressPercentResizeThumb=b("div.rq-gc-progressbar-resizer",this.element);0==this.ProgressPercentResizeThumb.length&&(this.ProgressPercentResizeThumb=b("div.ui-progress-resizer",this.element));this.ProgressPercentResizeThumb.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));null!=this.ProgressPercentResizeThumb&&(10<this.BarWidth?
(this.ProgressPercentResizeThumb.show(),this.ProgressPercentResizeThumb.css("margin-left",this.CompletedWidth),this.ProgressPercentResizeThumb.css("height",b(this.TaskBarRectangle).css("height"))):this.ProgressPercentResizeThumb.hide())},$newLabel:null,_updateTaskBarLabel:function(){var a=this.options,c=this.TaskBarRectangle;this.ActivityView._isParent?c=this.ParentBar:this.Activity._isMilestone&&(c=this.MileStoneBar);c.width();var d=b("div.rq-gc-taskbar-label",c);0==d.length&&(d=b("div.label",c));
this.LabelTmpl&&!this.KnockoutObject&&(this.$newLabel=b(this.newLabel(a)),0<this.$newLabel.length&&this.$newLabel.text()&&(this.$newLabel.text(),this.$newLabel.css("margin-left",d.parent().width()+12+"px"),d.replaceWith(this.$newLabel)));c&&0<d.length&&d.css("margin-left",d.parent().width()+12+"px")},newLabel:function(a){return d(this.LabelTmpl,a.ActivityView.Activity_M())},UpdateResourceText:function(a){if(0<this.Activity._assignments.length){var c=b("div#GanttTaskBarLabel",this.TaskBarRectangle);
!0==this.IsParent()?c=b("div#GanttTaskBarLabel",this.ParentBar):this.IsMilestone()&&(c=b("div#GanttTaskBarLabel",this.MileStoneBar));if(c.length){var d=RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText(this.Activity._assignments,!1,!0);c[0].innerHTML=d;c[0].style.fontSize="12px";!1==this.ActivityView.IsParent_M()?c.css("margin-right",-(12*c[0].innerHTML.length/2+5)+"px"):c.css("margin-left","30px")}}!0==a&&0==this.Activity._assignments.length&&(b("div#GanttTaskBarLabel",this.TaskBarRectangle).html(""),
b("div#GanttTaskBarLabel",this.ParentBar).html(""),b("div#GanttTaskBarLabel",this.MileStoneBar).html(""))},_listenForShiftAndResizeTracker:function(){!1!=this.GanttChart.options.IsPrinting||this.IsReadOnly||this.TaskReadOnly||(this.TaskBarRectangle.ganttShiftTracker(this,this.DragEnd),this.TaskBarRectangle.ganttResizeTracker(this,this.ResizeEnd),this.ParentBar.ganttShiftTracker(this,this.DragEnd),this.MileStoneBar.ganttShiftTracker(this,this.DragEnd),this.TaskBarRectangle.css("cursor","move"))},CanShiftTask:function(a){return a.GanttControl.CanShiftActivityInternal(a.Activity)},
DragEnd:function(a,b){if(!this.StartTime().equals(this.taskStartAndEndTime.ProposedStart)||!this.EndTime().equals(this.taskStartAndEndTime.ProposedEnd)){var c={Cancel:!1};this.GanttControl.ActivityDragEnd&&0<this.GanttControl.ActivityDragEnd.fn.length&&(c=new TimesChangingEventArgs(this.ActivityView,this.taskStartAndEndTime.ProposedStart,this.taskStartAndEndTime.ProposedEnd,"DragEnd",this.Activity._boundObject),c.Cancel=!1,this.GanttControl.ActivityDragEnd.raise(a,c),this.taskStartAndEndTime.ProposedStart=
c.StartTime,this.taskStartAndEndTime.ProposedEnd=c.EndTime);!1==c.Cancel&&(c=new RadiantQ.Gantt.SetStartTimeAction(this.GanttControl,this.Activity,this.taskStartAndEndTime.ProposedStart,!1),this.GanttControl.ActionManager.RecordAction(c),this.ProgressEndTime(this.Activity.ProgressEndTime_M()),0<this.GanttControl.ActivityTimeChanged.fn.length&&(c=new TimesChangingEventArgs(this.Activity,this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.OriginalEnd,"DragEnd"),this.GanttControl.ActivityTimeChanged.raise(this,
c)))}this._isActivityPropertyChanged=!1;this.TaskBarRectangle.removeClass("rq-taskbar-shadow")},ResizeEnd:function(a,b,c){b.forProgressBar.isTrue?this.Activity.ProgressPercent_M(this.taskStartAndEndTime.ProgressPercent):(this.Activity.PreferredStartTime_M(this.Activity.StartTime_M()),this.Activity.EndTime_M(this.taskStartAndEndTime.OriginalEnd),0<this.GanttControl.ActivityTimeChanged.fn.length&&(a=new TimesChangingEventArgs(this.Activity,this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.OriginalEnd,
"ResizeEnd"),this.GanttControl.ActivityTimeChanged.raise(this,a)));this._isActivityPropertyChanged=!1;this.TaskBarRectangle.removeClass("rq-taskbar-shadow")},_listenForTouchTap:function(){var a=this.MileStoneBar;a.on("touchstart",this._onTouchstart.bind(this));a.on("touchend",this._onTouchend.bind(this));a.on("touchmove",this._onTouchMove.bind(this));a.on("MSPointerDown",this._onTouchstart.bind(this));a.on("MSPointerUp",this._onTouchend.bind(this));a.on("MSPointerMove",this._onTouchMove.bind(this))},
tapDownX:null,tapDownY:null,tapHoldTimer:null,canShowContextMenu:!1,timeOutFunctions:null,_onTouchstart:function(a){a=a.originalEvent.touches?a.originalEvent.touches[0]:a.originalEvent;var b=this;b.tapDownX=a.clientX;b.tapDownY=a.clientY;b.tapHoldTimer=setTimeout(function(){b.canShowContextMenu=!0},500)},_onTouchMove:function(){clearTimeout(this.tapHoldTimer)},_onTouchend:function(a){if("ShowContextMenu"==this.options.GanttChart.options.TouchTapAction||!0==this.canShowContextMenu){var b=a.originalEvent.changedTouches?
a.originalEvent.changedTouches[0]:a.originalEvent;if(this.tapDownX==b.clientX&&this.tapDownY==b.clientY){var c=this;clearTimeout(c.timeOutFunctions);c.timeOutFunctions=setTimeout(function(){c._showContextMenu(a.originalEvent,b)},40)}this.canShowContextMenu=!1}clearTimeout(this.tapHoldTimer)},_showContextMenu:function(a,c){if("mouse"!=a.pointerType&&4!=a.pointerType){var d=b.ui?b.ui.version||"1.5.2":null;d&&1.11<=parseFloat(d)&&b.isFunction(b.jQContextMenu)?b(a.target).jQContextMenu({x:c.clientX,y:c.clientY}):
b.isFunction(b.contextMenu)&&b(a.target).contextMenu({x:c.clientX,y:c.clientY})}},_listenForMouseEnterAndLeave:function(){this.TaskBarRectangle.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));this.ParentBar.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));this.MileStoneBar.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+
this.widgetName,this.TaskBarMouseLeave.bind(this));this.TaskBarRectangle.bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));this.MileStoneBar.bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this))},TaskBarMouseHover:function(a,b){this.GanttChart.TaskOnMouseHover=this.ActivityView;this.GanttChart.TaskViewOnMouseHover=this.ActivityView;
var c=this.IsMilestone(),d=this.IsParent(),g=this.TaskBarRectangle;!0==d&&(g=this.ParentBar);!0==c&&!1==d&&(g=this.MileStoneBar);!1==c&&!1==d&&g.addClass("rq-taskbar-shadow");this.GanttChart.options.TimeIndicatorLineOption==e.TimeIndicatorLines.OnHover&&(g.find("div.rq-gc-start-verticalLine").show(),g.find("div.rq-gc-end-verticalLine").show())},TaskBarMouseLeave:function(a,b){var c=this.IsMilestone(),d=this.IsParent(),g=this.TaskBarRectangle;!0==d&&(g=this.ParentBar);!0==c&&!1==d&&(g=this.MileStoneBar);
!1==c&&!1==d&&g.removeClass("rq-taskbar-shadow");this.GanttChart.options.TimeIndicatorLineOption==e.TimeIndicatorLines.OnHover&&(g.find("div.rq-gc-start-verticalLine").hide(),g.find("div.rq-gc-end-verticalLine").hide());this.GanttChart.TaskOnMouseHover=null;this.GanttChart.TaskViewOnMouseHover=null},_updateElementsFromTemplate:function(){var a=this.TaskBarRectangle,b=this.MileStoneBar,c=this.ParentBar;this._renderElementsFromTemplate();a.replaceWith(this.TaskBarRectangle);b.replaceWith(this.MileStoneBar);
c.replaceWith(this.ParentBar)},_renderElementsFromTemplate:function(a){var b=this.options;this.renderTemplate(b,a);b.TaskBarHeight?(this.TaskBarRectangle.css("height",b.TaskBarHeight+"px"),this.ParentBar.css("height",b.TaskBarHeight+"px"),this.MileStoneBar.css("height",b.TaskBarHeight+"px")):(this.taskHeight=this.element.height(),this.TaskBarRectangle.css("height",this.taskHeight-8+"px"),this.ParentBar.css("height",this.taskHeight-8+"px"),this.MileStoneBar.css("height",this.taskHeight-8+"px"));this.TaskBarRectangle.addClass("rq-gc-commonTaskbar");
this.TaskBarRectangle.append(this.ProgressBarRectangle);this.element.css("position","absolute")},renderTemplate:function(a,c){a.TaskTemplate?(a.TaskTemplate=a.TaskTemplate.replace(/RQDataContext/g,c),this.TaskBarRectangle=d(this.options.TaskTemplate),this.TaskBarRectangle=b(this.TaskBarRectangle(this.Activity)).addClass("rq-gc-tooltip")):this.TaskBarRectangle=b("<div class='rq-gc-taskbar "+window.radiantQclasses.defaultClass+" rq-gc-tooltip'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div>");
a.ProgressBarTemplate?(a.ProgressBarTemplate=a.ProgressBarTemplate.replace(/RQDataContext/g,c),this.ProgressBarRectangle=d(this.options.ProgressBarTemplate),this.ProgressBarRectangle=b(this.ProgressBarRectangle(this.Activity))):this.ProgressBarRectangle=b("<div class='rq-gc-progressbar progressbarStyle'></div>");a.MileStoneTemplate?(a.MileStoneTemplate=a.MileStoneTemplate.replace(/RQDataContext/g,c),this.MileStoneBar=d(a.MileStoneTemplate),this.MileStoneBar=b(this.MileStoneBar(this.Activity)).addClass("rq-gc-tooltip")):
this.MileStoneBar=b("<div></div>").addClass("rq-gc-milestoneBar rq-gc-tooltip").html("<div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div>");a.ParentTaskTemplate?(a.ParentTaskTemplate=a.ParentTaskTemplate.replace(/RQDataContext/g,c),this.ParentBar=d(a.ParentTaskTemplate),this.ParentBar=b(this.ParentBar(this.Activity)).addClass("rq-gc-tooltip")):this.ParentBar=this.Activity.IsExpanded?
b("<div  class='rq-gc-parentBar rq-gc-tooltip'><div class='rq-gc-parentBar-leftCue'></div><div class='rq-gc-parentBar-middle'></div><div class='rq-gc-parentBar-rightCue'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>"):b("<div  class='rq-gc-parentBar rq-gc-tooltip'><div class='rq-gc-parentBar-leftCue'></div><div class='rq-gc-parentBar-middle rq-gc-Parentbar-collapsed'></div><div class='rq-gc-parentBar-rightCue'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>")},
taskBarBackgroundElement:null,taskBarAdornerElement:null,_loadAdornerAndBgTemplate:function(){var a=this.options,c=this.IsParent();this.adornerAndBgTemplate(c,a);if(!this.KnockoutObject&&a.TaskTemplate){var c=a.TaskTemplate.indexOf("<div class='rq-gc-taskbar-label'>"),d=a.TaskTemplate.indexOf("</div>",c);this.LabelTmpl=a.TaskTemplate.slice(c,d)+"</div>"}a=b("div.rq-gc-taskbar-label",this.TaskBarRectangle);0==a.length&&(a=b("div.label",this.TaskBarRectangle));0<a.length&&a.css("margin-left",this.TaskBarRectangle.width()+
12+"px")},adornerAndBgTemplate:function(a,c){!1==a&&c.TaskBarBackgroundTemplate&&(null!=this.taskBarackgroundElement&&this.taskBarackgroundElement.remove(),this.taskBarackgroundElement=d(this.options.TaskBarBackgroundTemplate,c),this.taskBarBackgroundElement=this.taskBarackgroundElement=b(this.taskBarackgroundElement),this.element.append(this.taskBarackgroundElement));!1==a&&c.TaskBarAdornerTemplate&&(null!=this.taskBarAdornerElement&&this.taskBarAdornerElement.remove(),this.taskBarAdornerElement=
d(c.TaskBarAdornerTemplate,c),this.taskBarAdornerElement=b(this.taskBarAdornerElement),this.element.append(this.taskBarAdornerElement.css({"z-index":"11"})));!1!=a||c.TaskBarAdornerTemplate||null!=this.taskBarAdornerElement&&this.taskBarAdornerElement.remove()},_activity_Assignments_CollectionChanged:function(){this.UpdateResourceText(!0)},BrowseToCueLeft:0,BrowseToCueRight:0,BrowseToTaskCueLeftVisibility:"none",BrowseToTaskCueRightVisibility:"none",_GanttChart_ViewportTimeRangeChanged:function(a,
b){this.BrowseToCueLeft=this.options.GanttChart.options.ResizeToFit?0:this.options.GanttChart.GanttChart.scrollLeft();this.BrowseToCueRight=this.BrowseToCueLeft+this.options.GanttChart.GanttChart[0].clientWidth-30;this._UpdateBrowseToTaskCuesStates()},_GanttChart_BeforeChartHZScroll:function(a,b){this.BrowseToCueLeft+=b.diff;this.BrowseToCueRight+=b.diff;this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.css({"margin-left":this.BrowseToCueLeft});this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.css({"margin-left":this.BrowseToCueRight})},
_UpdateBrowseToTaskCuesStates:function(){this.BrowseToTaskCueLeftVisibility=null!=this.options.TaskBarBrowseToCueLeftTemplate&&this.EndTime()<this.options.GanttChart.VisualStartTime?"block":"none";this.BrowseToTaskCueRightVisibility=null!=this.options.TaskBarBrowseToCueRightTemplate&&this.StartTime()>this.options.GanttChart.VisualEndTime?"block":"none";this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.TaskBarBrowseToCueRight&&
this.TaskBarBrowseToCueRight.css({"margin-left":this.BrowseToCueRight,display:this.BrowseToTaskCueRightVisibility})},_loadBrowseToCue:function(){var a=this.options;if(a.TaskBarBrowseToCueLeftTemplate||a.TaskBarBrowseToCueRightTemplate)this._viewPortChangedHandler&&this._viewPortChangedHandler.Dispose(),this._beforeChartHZScrollHandler&&this._beforeChartHZScrollHandler.Dispose(),this._viewPortChangedHandler=this.GanttChart.ViewportTimeRangeChanged.subscribe(this._GanttChart_ViewportTimeRangeChanged,
this),this._beforeChartHZScrollHandler=this.GanttChart.BeforeChartHZScroll.subscribe(this._GanttChart_BeforeChartHZScroll,this);a.TaskBarBrowseToCueLeftTemplate&&this._createBrowseToCueLeft(a);a.TaskBarBrowseToCueRightTemplate&&this._createBrowseToCueRight(a)},_createBrowseToCueLeft:function(a){this.TaskBarBrowseToCueLeft=b(a.TaskBarBrowseToCueLeftTemplate);this.element.append(this.TaskBarBrowseToCueLeft);this.TaskBarBrowseToCueLeft[0].ganttTaskItemBar=this;this.TaskBarBrowseToCueLeft[0].title=window.RadiantQ_ScrollToTask;
this.TaskBarBrowseToCueLeft.addClass("rq-gc-browseCue-left").bind("touchstart."+this.widgetName+" mousedown."+this.widgetName,this.BrowseToTaskCue_Click.bind(this))},_createBrowseToCueRight:function(a){this.TaskBarBrowseToCueRight=b(a.TaskBarBrowseToCueRightTemplate);this.element.append(this.TaskBarBrowseToCueRight);this.TaskBarBrowseToCueRight[0].ganttTaskItemBar=this;this.TaskBarBrowseToCueRight[0].title=window.RadiantQ_ScrollToTask;this.TaskBarBrowseToCueRight.addClass("rq-gc-browseCue-right").bind("touchstart."+
this.widgetName+" mousedown."+this.widgetName,this.BrowseToTaskCue_Click.bind(this))},BrowseToTaskCue_Click:function(a){a=this.StartTime();this.GanttChart._setOption("AnchorTime",a);return!1},_BrowseToCueTemplateChanged:function(){this._GanttChart_ViewportTimeRangeChanged()},TooltipContent:null,DragTooltipContent:null,ResizeTooltipContent:null,ApplyTooltipSettings:function(a){b(a).attr("title","");this.LoadDefaultTooltipStyle();this.UpdateTooltipContent(this.options.ActivityView)},closeToolTip:function(){},
_removeTooltip:function(a){if(a){var c="#"+b(a).attr("aria-describedby");b(c).remove();b(a).removeAttr("aria-describedby")}},UpdateTooltipContent:function(a){if(a.ProposedStart&&a.ProposedEnd){0==a.OriginalStart.compareTo(a.ProposedStart)&&0==a.OriginalEnd.compareTo(a.ProposedEnd)&&(a.HasChanged=!1);var b={Name:a.Name,StartTime:a.ProposedStart,EndTime:a.ProposedEnd,OriginalStart:a.OriginalStart,OriginalEnd:a.OriginalEnd,HasChanged:a.HasChanged,ProgressPercent:a.ProgressPercent};if(a.Duration){if(0>
a.Duration.days)return;b.Duration=a.Duration}this.createPopup(b)}},UpdateTemplateContent:function(a){"function"!=typeof this.options.TaskTooltipTemplate&&"string"==typeof this.options.TaskTooltipTemplate?(this.toolTipTemplate=d(this.options.TaskTooltipTemplate),this.TooltipContent=b('<div class="TaskTooltip" />').append(this.toolTipTemplate(a))):this.TooltipContent=b('<div class="TaskTooltip" />').append(this.options.TaskTooltipTemplate(a))},createPopup:function(a){!1==a instanceof RadiantQ.Gantt.Model.IActivity&&
(a.StartTime_M=function(){return a.StartTime},a.EndTime_M=function(){return a.EndTime},a.Duration_M=function(){return a.Duration},a.ProgressPercent_M=function(){return a.ProgressPercent});"function"!=typeof this.options.MovingInfoPopup&&"string"==typeof this.options.MovingInfoPopup&&(this.options.MovingInfoPopup=d(this.options.MovingInfoPopup));"function"!=typeof this.options.ResizeInfoPopup&&"string"==typeof this.options.ResizeInfoPopup&&(this.options.ResizeInfoPopup=d(this.options.ResizeInfoPopup));
"function"!=typeof this.ProgressResizeContent&&"string"==typeof this.ProgressResizeContent&&(this.ProgressResizeContent=d(this.ProgressResizeContent));"function"!=typeof this.options.ConnectingInfoPopup&&"string"==typeof this.options.ConnectingInfoPopup&&(this.options.ConnectingInfoPopup=d(this.options.ConnectingInfoPopup));this.DragTooltipContent=b("<div/>").append(this.options.MovingInfoPopup(a));this.ResizeTooltipContent=b("<div/>").append(this.options.ResizeInfoPopup(a));this.ProgressResizeContent=
b("<div/>").append(this.options.ProgressTemplate(a))},ConnectingInfo:function(a){this.DepConnContent=this.options.ConnectingInfoPopup(a)},LoadDefaultTooltipStyle:function(){this.StartTime();this.EndTime();this.defaultTemplate()},defaultTemplate:function(){var a="{{if $item.data.Duration_M()}}${$item.data.Duration_M().days}d ${$item.data.Duration_M().hours_M()}h ${$item.data.Duration_M().minutes_M()}m{{/if}}",a="#if (data.Duration_M()){# #= data.Duration_M().days #d #= data.Duration_M().hours_M() #h #=data.Duration_M().minutes_M() #m #}#";
this.options.TaskTooltipTemplate||(this.options.TaskTooltipTemplate=d("<div align='left'><table class='TaskTooltip' style='white-space:nowrap;border:none;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString}</b></td></tr><tr><td><b>${ RadiantQ_NameString } :</b>&nbsp;${ data.ActivityName_M() }</td></tr><tr><td><b>${ RadiantQ_StartString }: </b>&nbsp;${ data.StartTime_M().toString('dd-MMM-yyyy') }</td><td><b>${ RadiantQ_DurationString } :</b>${ data.Duration_M().toString()}</td></tr><tr><td><b>${ RadiantQ_FinishString} : </b>&nbsp;${ data.EndTime_M().toString('dd-MMM-yyyy') }</td><td><b>${ RadiantQ_ProgressString } :</b>${ data.ProgressPercent_M() }%</td></tr></table></div>"));
this.options.MovingInfoPopup||(this.options.MovingInfoPopup=d("<div align='left'><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td style='float:right;'><b>${ RadiantQ_StartString}:&nbsp;&nbsp;&nbsp;</b></td><td>"+this._MakeItBoldWhenActualDate("${ data.StartTime_M().toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${ RadiantQ_FinishString }:&nbsp;</b> </td><td>"+
this._MakeItBoldWhenActualDate("${ data.EndTime_M().toString('yyyy-MM-dd HH:mm') } ")+"</td></tr></table></div>"));this.options.ResizeInfoPopup||(this.options.ResizeInfoPopup=d("<div align='left'><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td style='float:right;'><b>${ RadiantQ_DurationString } :</b></td><td align='left'>"+this._MakeItBoldWhenActualDate(a)+"</td></tr><tr><td style='float:right;'><b>${ RadiantQ_StartTimeString }:</b> </td><td>${ data.StartTime_M().toString('yyyy-MM-dd HH:mm') }</td></tr><tr><td style='float:right;'><b>${ RadiantQ_EndTimeString }:</b></td><td> ${ data.EndTime_M().toString('yyyy-MM-dd HH:mm')}</td></tr></table></div>"));
this.options.ProgressTemplate||(this.options.ProgressTemplate=d("<div><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td><b>${ RadiantQ_ProgressPercentString }:</td><td>${ data.ProgressPercent_M()}%</b></td></tr></table></div>"));this.options.ConnectingInfoPopup||(this.options.ConnectingInfoPopup=d("<div align='left'><table class='rq-gc-taskbar-popup  ui-widget-content'' style='white-space:nowrap;border:none;'><tr><td colspan='2' align='center'><b>${ RadiantQ_FinishToStartLinkString }</b></td></tr><tr align='left'><td><b>${ RadiantQ_FromFinishOfString }  :</b></td><td>&nbsp;${ data.ConnectingInfoFromTaskText }</td></tr><tr align='left'><td><b>${ RadiantQ_ToStartOfString } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</b></td><td>&nbsp;${ data.ConnectingInfoToTaskText }</td></tr></table></div> "))},
_MakeItBoldWhenActualDate:function(a){return"#if( data.HasChanged ){# "+a+"#}else {# <b>"+a+"</b>#}#"},IsDepLinesReadOnly:!1,IsEffortReadOnly:!1,IsTaskReadOnly:!1,IsProgressPercentReadOnly:!1,IsStartTimesReadOnly:!1,IsReadOnly:!1,initValuesFromOptions:function(){var a=this.GanttControl.options;this.IsDepLinesReadOnly=a.IsDependencyLinesReadOnly;this.IsEffortReadOnly=a.IsEffortReadOnly;this.IsTaskReadOnly=this.ActivityView.IsReadOnly_M();this.IsProgressPercentReadOnly=a.IsProgressPercentReadOnly;this.IsStartTimesReadOnly=
a.IsStartTimesReadOnly;this.IsReadOnly=a.IsReadOnly},ReadOnlyStateChangedCallback:function(a,b){var c=void 0!=b.value?b.value:b.Value;"IsDependencyLinesReadOnly"==b.PropertyName?this.IsDepLinesReadOnly=c:"IsEffortReadOnly"==b.PropertyName?this.IsEffortReadOnly=c:"IsTaskReadOnly"==b.PropertyName?this.IsTaskReadOnly=c:"IsProgressPercentReadOnly"==b.PropertyName?this.IsProgressPercentReadOnly=c:"IsStartTimesReadOnly"==b.PropertyName?this.IsStartTimesReadOnly=c:"IsReadOnly"==b.PropertyName&&(this.IsReadOnly=
c);this.UpdateThumbsReadOnlyStates()},UpdateThumbsReadOnlyStates:function(){var a=this.element,c=b(".rq-gc-progressbar-resizer",a);0==c.length&&(c=b(".ui-progress-resizer",a));if(0!=c.length){var d=!this.IsReadOnly&&!this.IsTaskReadOnly&&!this.IsProgressPercentReadOnly;d?c.css("visibility","visible"):c.css("visibility","collapse")}c=b(".rq-pg-gc-taskBarResizer",a);0==c.length&&(c=b(".PGresizer-style",a));0!=c.length&&((d=!this.IsReadOnly&&!this.IsTaskReadOnly&&!this.IsEffortReadOnly)?c.css("display",
"block"):c.css("display","none"))},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments);"TaskBarAdornerTemplate"!=a&&"TaskBarBackgroundTemplate"!=a||this.adornerAndBgTemplate(this.ActivityView.IsParent,this.options);"TaskBarBrowseToCueLeftTemplate"==a?(this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.remove(),this._createBrowseToCueLeft(this.options),this._BrowseToCueTemplateChanged()):"TaskBarBrowseToCueRightTemplate"==a&&(this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.remove(),
this._createBrowseToCueLeft(this.options),this._BrowseToCueTemplateChanged())},_destroy:function(){clearTimeout(this._asyncShiftAndResizeTimer);clearTimeout(this._asyncTooltipTimer);this._onTaskBarLoadTimer&&(clearTimeout(this._onTaskBarLoadTimer),this._onTaskBarLoadTimer=null);this.GanttChart.element.unbind("ganttcharttimeindicatorlineoptionchanged."+this.eventNamespace);this.options.UseRQModelBinder&&RadiantQ.Unbind(this.element);if(this.GanttChart._dirtyTaskItemControls&&this.GanttChart._diryTaskItemByActs[this.Activity.id]){var a=
this.GanttChart._dirtyTaskItemControls.indexOf(this);-1!=a&&(this.GanttChart._dirtyTaskItemControls.splice(a,1),delete this.GanttChart._diryTaskItemByActs[this.Activity.id])}this._actViewPropertyChangedHandler&&(this._actViewPropertyChangedHandler.Dispose(),this._actViewPropertyChangedHandler=null);this._activityPropertyChangedHandler&&(this._activityPropertyChangedHandler.Dispose(),this._activityPropertyChangedHandler=null);this._actAssgnsCollectionChangedHandler&&(this._actAssgnsCollectionChangedHandler.Dispose(),
this._actAssgnsCollectionChangedHandler=null);this._readOnlyPropertyChangedHandler&&(this._readOnlyPropertyChangedHandler.Dispose(),this._readOnlyPropertyChangedHandler=null);this._chartRefreshUIHandler&&(this._chartRefreshUIHandler.Dispose(),this._chartRefreshUIHandler=null);this._viewPortChangedHandler&&(this._viewPortChangedHandler.Dispose(),this._viewPortChangedHandler=null);this._beforeChartHZScrollHandler&&(this._beforeChartHZScrollHandler.Dispose(),this._beforeChartHZScrollHandler=null);a=
this.Activity;a.PropertyChanged&&a.PropertyChanged.unsubscribe(this.UpdateTemplateContent,this);this.TaskBarRectangle=this.ParentBar=this.ProgressPercentResizeThumb=this.MileStoneBar=null;this.element.empty();delete this.element.parent()[0]["data-grid-item"];this.element.data("GanttTaskItemBar",null)}};f.GanttTaskItemBar=g;b.fn.ganttShiftTracker=function(c,d){var g,f,n;function p(a,c,d,g){var e=O.GetOffsetDueToHScroll(),f=O.GetOffsetDueToVScroll();!0==g&&(d.pageX=d.originalEvent.touches[0].pageX,
d.pageY=d.originalEvent.touches[0].pageY);S=b("#rq-gc-dependencyCue-parent",this.GanttChart.element);0==b("#rq-gc-dependencyCue-arrow",this.GanttChart.element).length&&S.append("<div id='rq-gc-dependencyCue-arrow' class='rq-gc-dependencyCue-arrow "+window.radiantQclasses.defaultClass+"' style='width:0; height:0; z-index:2;  position:relative; border-top-width:5px; border-top-style:solid; border-right:5px solid transparent; border-left:5px solid transparent; border-bottom-width:0px; margin-left:-4px;'</div>");
$DeplinkInnerLineArrow=b("#rq-gc-dependencyCue",this.GanttChart.element);if(0<S.length){c.parents("div.rq-ganttChart");var h=this.GanttChart.VSB.$scrollContainer.scrollTop(),k=c.offset().left+S[0].offsetLeft-c[0].offsetLeft;a=S[0].offsetTop-(a*c[0].parentElement.offsetHeight+c[0].offsetTop)+h;h=c.offset().top+a;a=c=0;F?(a=k=0,!0==g?(k=d.originalEvent.touches[0].clientX,a=d.originalEvent.touches[0].clientY):(k=d.clientX,a=d.clientY),k+=e,a+=f,c=Math.sqrt((k-F.x)*(k-F.x)+(a-F.y)*(a-F.y)),a=180/3.1415*
Math.acos((a-F.y)/c),k>F.x&&(a*=-1)):(c=Math.sqrt((d.pageX-k)*(d.pageX-k)+(d.pageY-h)*(d.pageY-h)),a=180/3.1415*Math.acos((d.pageY-h)/c),d.pageX>k&&(a*=-1));$DeplinkInnerLineArrow.css({height:c-7,"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"});S.css({height:c-5,"-webkit-transform":"rotate("+a+"deg)",
"-moz-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"});C=this.GanttChart.TaskOnMouseHover;e={ConnectingInfoFromTaskText:this.Activity.ActivityName_M(),ConnectingInfoToTaskText:""};null!=C&&C.Activity_M()!=this.Activity&&(!1==this.Activity.Model.CanAddNewDependency(this.Activity,C.Activity_M(),RadiantQ.Gantt.Model.NewDependencyAddScenarioType.UserDragOver,
RadiantQ.Gantt.DependencyType.FinishToStart)?C=null:e={ConnectingInfoFromTaskText:this.Activity.ActivityName_M(),ConnectingInfoToTaskText:this.Activity!=C.Activity_M()?C.Activity_M().ActivityName_M():""});this.ConnectingInfo(e);var m=b(".dragPopup");m.empty();m.append(this.DepConnContent);!0==U&&(U=!1,d.originalEvent.touches&&(d.pageY=d.originalEvent.touches[0].pageY),m[0].refreshPostion=function(a){var c=b(".rq-gc-taskbar-popup",m).outerHeight(),e=d.pageY,f=m.parents(".radiantq-ui-GanttBase");a?
(e-=d.offsetY+c,e<f.offset().top&&(e+=2*d.offsetY)):(e+=d.offsetY,e+c>f.offset().top+f.height()&&(e-=2*(d.offsetY+c)));!0==g?m.css({left:d.originalEvent.touches[0].pageX,top:e}):m.css({top:e})});m.css("visibility","visible")}}function q(a){27==a.keyCode&&(b.fn.RQTooltip.CanShowTooltip=!0,O.EndTracking(),b(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown",q),b(this).RemoveDragOrResizeContent(r),r[0].uiTooltip&&(r[0].disableTooltip=!1),b("#clone").remove(),
b("#rq-gc-dependencyCue-parent",this.GanttChart.element).remove(),!0==y&&(y=!1),null!=C&&(C=null),!0==A&&(A=!1),!0==x&&(x=!1))}var r=this,t,s,w,u,v;new ObjectEvent("DragComplete");var z=0,y=!1,A=!1,x=!1,C=null,L=c.options.WorkTimeSchedule,H=null,B=null,F={x:0,y:0},N=0,G=!1,E=null;r.bind("touchstart."+c.widgetName,function(a){G=!0;if(!this.IsReadOnly&&!this.IsTaskReadOnly&&!b(a.target).hasClass("label")){a.stopPropagation();U=!0;var c=J.call(this,a,r,!0);u=function(a){return R.call(this,a,c,r,!0)};
v=function(a){return Z.call(this,a,c,r,!0)};b(document).bind("touchmove."+this.widgetName,u.bind(this)).bind("touchend."+this.widgetName,v.bind(this))}}.bind(c));r.bind("mousedown."+c.widgetName,function(a){if(!(G||(document.mouseButtonPressed=!0,b.fn.RQTooltip.CanShowTooltip=!1,this.IsReadOnly||this.IsTaskReadOnly||b(a.target).hasClass("label")))){U=!0;var c=J.call(this,a,r,!1);!1!=c&&(u=function(a){return R.call(this,a,c,r,!1)},v=function(a){document.mouseButtonPressed=!1;b.fn.RQTooltip.CanShowTooltip=
!0;b.fn.RQTooltip.RemoveTooltip();return Z.call(this,a,c,r,!1)},b(document).bind("mousemove."+this.widgetName,u.bind(this)).bind("mouseup."+this.widgetName,v.bind(this)))}}.bind(c));var O=null,M=0,S,J=function(a,c,d){var g="true"==c.attr("preventShifting");this.taskStartAndEndTime={Name:this.Activity.ActivityName_M(),OriginalStart:this.Activity.StartTime_M(),OriginalEnd:this.Activity.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:null,
ProposedEnd:null,ProposedStart:null,ProgressPercent:this.Activity.ProgressPercent_M()};L=this.GetScheduleToPlotWith();O=new RadiantQ.FlexyGantt.AutoScrollTracker(this.GanttControl);var f=Q(a,void 0,c,d);O.OnScroll.subscribe(function(b,g){ca.call(this,a,$taskClone,c,d,f)},this);var h=c[0].getBoundingClientRect();O.prevDeltaStartX=h.left;O.prevDeltaEndX=h.right;U=!0;var h=a.srcElement,k=c.closest("tr"),m=k.attr("list-index");m||(m=k.index());if(!h||!b(h).hasClass("rq-pg-gc-taskBarResizer")){$taskClone=
b("<div id='clone' class='taskclone rq-taskbar-clone "+window.radiantQclasses.defaultClass+"'></div>");S=b("<div id='rq-gc-dependencyCue-parent' class='rq-gc-dependencyCue-parent "+window.radiantQclasses.defaultClass+"'><div id='rq-gc-dependencyCue' class='rq-gc-dependencyCue'></div></div>");m=c.parents("div.rq-ganttChart");h=this.GanttChart.VSB.$scrollContainer.scrollTop();k=c.parents("div.rq-ganttChart");a.offsetX=a.clientX-c.offset().left;a.offsetY=a.clientY-c.offset().top;M=b("div.rq-tsh-div",
m).outerHeight(!0);m=c.height()/2;h=c.offset().top-k.offset().top-(M-m)+h;k=c.offset();!0==d?(F={x:a.originalEvent.touches[0].clientX,y:a.originalEvent.touches[0].clientY},S.css({top:h,left:a.originalEvent.touches[0].pageX-k.left+c[0].offsetLeft})):(F={x:a.clientX,y:a.clientY},S.css({top:h,left:a.offsetX+c[0].offsetLeft}));$taskClone.css({width:c[0].offsetWidth-2+"px",height:c[0].offsetHeight-2+"px"});this.IsStartTimesReadOnly||$taskClone.appendTo(c);x=!1==this.CanShiftTask(this);!0==g&&(x=!0);P.call(this,
a,$taskClone,c,d,S);g=this.options.GanttChart.options.TimeIndicatorLineOption;if((g&e.TimeIndicatorLines.OnResize)==e.TimeIndicatorLines.OnResize||(g&e.TimeIndicatorLines.Always)==e.TimeIndicatorLines.Always)H=c.find("div.rq-gc-start-verticalLine").clone().show(),B=c.find("div.rq-gc-end-verticalLine").clone().show(),$taskClone.append(H),$taskClone.append(B);return $taskClone}},P=function(a,c,d,g,e){this.closeToolTip();d[0].uiTooltip&&(d[0].disableTooltip=!0);e=Q(a,c,d,g);t=e.x;s=e.y;w=c[0].offsetLeft;
d.addClass("rq-taskbar-shadow");this.taskStartAndEndTime.OriginalStart=this.Activity.StartTime_M();this.taskStartAndEndTime.OriginalEnd=this.Activity.EndTime_M();L?(this.taskStartAndEndTime.ProposedStart=L.ConvertToNextWorkingTime(this.taskStartAndEndTime.OriginalStart),this.taskStartAndEndTime.ProposedEnd=L.GetEnd(this.taskStartAndEndTime.ProposedStart,this.Activity.Effort_M())):(this.taskStartAndEndTime.ProposedStart=this.GanttControl.RoundUp(this.taskStartAndEndTime.OriginalStart),this.taskStartAndEndTime.ProposedEnd=
this.GanttControl.RoundUp(this.taskStartAndEndTime.OriginalEnd));this.UpdateTooltipContent(this.taskStartAndEndTime);d.GetDragOrResizeContent(this.DragTooltipContent,a,d,g);E=b(".dragPopup");b(document).bind("keydown",q.bind(this))},R=function(a,c,d,e){d.addClass("rq-taskbar-shadow");if(!0==e){var h=document.elementFromPoint(a.originalEvent.touches[0].pageX,a.originalEvent.touches[0].pageY);mouseHoverActivity=b(h).parents(".rq-gc-row ").data();null!=mouseHoverActivity?(this.GanttChart.TaskOnMouseHover=
mouseHoverActivity.GanttTaskItemBar.ActivityView,this.GanttChart.TaskViewOnMouseHover=mouseHoverActivity.GanttTaskItemBar.ActivityView):(this.GanttChart.TaskOnMouseHover=null,this.GanttChart.TaskViewOnMouseHover=null)}g=this.taskStartAndEndTime.OriginalStart.clone();f=this.taskStartAndEndTime.OriginalEnd.clone();n=this.OriginalLeft;g<=f&&(h=Q(a,c,d,e),N=h.x-t+w,ca.call(this,a,c,d,e,h),O.MouseMovedTo({X:a.clientX,Y:a.clientY},y))},Z=function(a,c,g,e){O.EndTracking();g.removeClass("rq-taskbar-shadow");
null==this.taskStartAndEndTime.ProposedStart||null==this.taskStartAndEndTime.ProposedEnd||this.IsStartTimesReadOnly||(g[0].uiTooltip&&(g[0].disableTooltip=!1),this.taskStartAndEndTime.OriginalStart=this.taskStartAndEndTime.ProposedStart,this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd,"function"==typeof d&&d.call(this,this,this.taskStartAndEndTime));null!=C&&(a=C.Activity_M(),this.Activity.Model.CanAddNewDependency(this.Activity,a,RadiantQ.Gantt.Model.NewDependencyAddScenarioType.UserDragDrop,
RadiantQ.Gantt.DependencyType.FinishToStart)&&(a=new RadiantQ.Gantt.CreateNewDependencyAction(this.GanttControl.Model,this.Activity,a,!1),this.GanttControl.ActionManager.RecordAction(a)),C=null);g.RemoveDragOrResizeContent(g);b("#clone").remove();b("#rq-gc-dependencyCue-parent",this.GanttChart.element).remove();if(!0==y||this.IsDepLinesReadOnly)y=!1;!0==A&&(A=!1);!0==x&&(x=!1);F={x:0,y:0};this.UpdateTooltipContent(this.ActivityView);b(document).unbind("touchmove."+this.widgetName).unbind("touchend."+
this.widgetName).unbind("keydown",q);b(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown",q)},Q=function(a,b,c,d){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var g=a.originalEvent.touches[0].pageX,e=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)g=a.originalEvent.touches[0].clientX,e=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)g=a.pageX,
e=a.pageY;else if(a.clientX||a.clientY)g=a.clientX,e=a.clientY;return{x:g,y:e}},U=!1,ca=function(c,d,e,f,h){var m=O.GetOffsetDueToHScroll(),m=N+m;var l=h.x-t,q=h.y-s;z++;if(!(6>z)&&null!=e[0].parentElement){var r=e.closest("tr");(h=r.attr("list-index"))||(h=r.index());!1==y&&!1==A&&(4<=Math.abs(q)&&!this.IsDepLinesReadOnly&&!this.GanttControl.options.IsReadOnly?(y=!0,l=this.GanttChart._getUniqueSelectorIdByID("rq-gc-viewsContainer-div"),b(".rq-gc-dependencysParent",l).append(S)):4<=Math.abs(l)&&!0!=
y&&!x&&!this.GanttControl.options.IsStartTimesReadOnly&&(this.ActivityView._isParent&&!0!=this.GanttControl.options.IsParentDraggable||(A=!0)));if(y)p.call(this,h,e,c,f);else if(A){c=O.GetOffsetDueToHScroll();f=n;l=Date.MaxValue;h=Date.MinValue;q=this.GetScheduleToPlotWith();if(!0==this.GanttControl.Model.AdjustDurationOnAssignment&&0<this.ActivityView.Activity_M().Assignments.length)for(var r=this.ActivityView.Activity_M(),u=r.Assignments.length,v=0;v<u;v++){var w=r.Assignments[v];if(null!=w.Resource.Schedule){var U=
a.ConvertToEndTimeInBaseScaleType(this.GanttChart.options.BaseTimeScaleType,g.clone(),f/this.GanttChart.options.BaseTimeUnitWidth,(N+f+c)/this.GanttChart.options.BaseTimeUnitWidth,w.Resource.Schedule),U=w.Resource.Schedule.ConvertToNextWorkingTime(U);l.isGreaterThan(U)&&(l=U,w=RadiantQ.Gantt.Model.BaseGanttModel.ComputeEndTime(l,this.ActivityView.Activity_M().Effort_M(),w.Resource.Schedule),h.isLessThan(w)&&(h=w))}}l==Date.MaxValue&&(l=a.ConvertToEndTimeInBaseScaleType(this.GanttChart.options.BaseTimeScaleType,
g.clone(),f/this.GanttChart.options.BaseTimeUnitWidth,(N+f+c)/this.GanttChart.options.BaseTimeUnitWidth,q),null!=q&&(l=q.ConvertToNextWorkingTime(l)),h=RadiantQ.Gantt.Model.BaseGanttModel.ComputeEndTime(l,this.ActivityView.Activity_M().Effort_M(),q));this.taskStartAndEndTime.ProposedStart=this.GanttControl.RoundUp(l);this.taskStartAndEndTime.ProposedEnd=this.GanttControl.RoundUp(h);0==this.taskStartAndEndTime.ProposedStart.compareTo(this.taskStartAndEndTime.OriginalStart)&&0==this.taskStartAndEndTime.ProposedEnd.compareTo(this.taskStartAndEndTime.OriginalEnd)?
this.taskStartAndEndTime.HasChanged=!1:(c={Action:"Shifting",ProposedStartDate:this.taskStartAndEndTime.ProposedStart,ProposedEndDate:this.taskStartAndEndTime.ProposedEnd,Cancel:!1},this.taskStartAndEndTime.HasChanged=!0,this.GanttControl.ActivityTimeChanging.isSubscribed()&&this.GanttControl.ActivityTimeChanging.raise(this,c),!0==c.Cancel&&(this.taskStartAndEndTime.ProposedStart=this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd,this.taskStartAndEndTime.HasChanged=
!1));this.UpdateTooltipContent(this.taskStartAndEndTime);E.empty();E.append(this.DragTooltipContent);this.IsStartTimesReadOnly||E.css("visibility","visible");e[0].uiTooltip&&e[0].uiTooltip.hide()}}!0==A&&b(d).css("margin-left",m+"px")}};b.fn.ganttResizeTracker=function(c,d){function g(a){27==a.keyCode&&(b.fn.RQTooltip.CanShowTooltip=!0,F.EndTracking(),b(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown",g),b(document).unbind("touchmove."+this.widgetName).unbind("touchend."+
this.widgetName).unbind("keydown",g),f[0].uiTooltip?(f[0].disableTooltip=!1,f[0].uiTooltip.show()):f.parent()[0].uiTooltip&&(f.parent()[0].disableTooltip=!1,f.parent()[0].uiTooltip.show()),b(this).RemoveDragOrResizeContent(f),b("#clone").remove())}var f=this,n,p,q,r,t={isTrue:!1},s,w=0,u=!1,v=new ObjectEvent("ResizeComplete"),z=b("<div class='rq-pg-gc-taskBarResizer'></div>"),y=b("<div class='rq-gc-progressbar-resizer'></div>"),A=f.css("height");z.css("height",A);var x=f.find("div.rq-gc-parentBar-middle"),
C=f.find("div.progressbarStyle");0==x.length&&(x=f.find("div.parentMiddleBar-style"));0==C.length&&(C=f.find("div.rq-gc-progressbar"));var L=null,H=null,B=C.width();y.css("height",A);y.css("margin-left",B);0!=x.length?x.append(z):f.append(z);c.GanttControl.options.IsEffortReadOnly&&z.css("display","none");A=!1;0<f.parent("div.rq-gc-progressbar-resizer").length?A=!0:0<f.parent("div.ui-progress-resizer").length&&(A=!0);C&&!1==A&&f.append(y);z.bind("touchstart."+c.widgetName,function(a){u=!0;t={isTrue:!1};
var c=N.call(this,a,f,t,!0);q=function(a){t={isTrue:!1};return O.call(this,a,c,f,!0,t)};r=function(a){return M.call(this,a,c,f,t,!0)};b(document).bind("touchmove."+this.widgetName,q.bind(this)).bind("touchend."+this.widgetName,r.bind(this))}.bind(c));z.bind("mousedown."+c.widgetName,function(a){if(!u){document.mouseButtonPressed=!0;b.fn.RQTooltip.CanShowTooltip=!1;t={isTrue:!1};var d=N.call(this,a,f,t,!1);q=function(a){t={isTrue:!1};return O.call(this,a,d,f,!1,t)};r=function(a){document.mouseButtonPressed=
!1;b.fn.RQTooltip.CanShowTooltip=!0;return M.call(this,a,d,f,t,!1)};b(document).bind("mousemove."+c.widgetName,q.bind(this)).bind("mouseup."+c.widgetName,r.bind(this))}}.bind(c));var F=null,N=function(a,c,d,g){var f=this.options.ActivityView.Activity_M();this.taskStartAndEndTime={Name:f.ActivityName_M(),OriginalStart:f.StartTime_M(),OriginalEnd:f.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:f.ProgressEndTime_M(),ProposedEnd:null,
ProposedStart:null};F=new RadiantQ.FlexyGantt.AutoScrollTracker(this.GanttControl);F.OnScroll.subscribe(function(b,e){J.call(this,a,$taskClone,c,g,d)},this);$taskClone=b("<div id='clone' class='taskclone rq-taskbar-clone "+window.radiantQclasses.defaultClass+"'></div>");$taskClone.css({width:c[0].offsetWidth-2+"px",height:c[0].offsetHeight-3+"px"});!1==d.isTrue&&c.addClass("rq-taskbar-shadow");c.append($taskClone);E.call(this,a,$taskClone,c,d,g);a.stopPropagation();f=this.GanttChart.options.TimeIndicatorLineOption;
if((f&e.TimeIndicatorLines.OnResize)==e.TimeIndicatorLines.OnResize||(f&e.TimeIndicatorLines.Always)==e.TimeIndicatorLines.Always)L=c.find("div.rq-gc-start-verticalLine").clone().show(),H=c.find("div.rq-gc-end-verticalLine").clone().show(),$taskClone.append(L),$taskClone.append(H);return $taskClone};y.bind("touchstart."+c.widgetName,function(a){u=!0;var c=a.currentTarget;t={isTrue:!0};var d=G.call(this,a,f,C,t,!0);q=function(a){t={isTrue:!0};return O.call(this,a,d,C,!0,t)};r=function(a){t={isTrue:!0};
return M.call(this,a,d,C,t,!0,c)};b(document).bind("touchmove."+this.widgetName,q.bind(this)).bind("touchend."+this.widgetName,r.bind(this))}.bind(c));y.bind("mousedown."+c.widgetName,function(a){if(!u){document.mouseButtonPressed=!0;b.fn.RQTooltip.CanShowTooltip=!1;var c=a.currentTarget;t={isTrue:!0};var d=G.call(this,a,f,C,t,!1);q=function(a){t={isTrue:!0};return O.call(this,a,d,C,!1,t)};r=function(a){document.mouseButtonPressed=!1;b.fn.RQTooltip.CanShowTooltip=!0;t={isTrue:!0};return M.call(this,
a,d,C,t,!1,c)};b(document).bind("mousemove."+this.widgetName,q.bind(this)).bind("mouseup."+this.widgetName,r.bind(this))}}.bind(c));var G=function(a,c,d,g,e){var f=this.options.ActivityView.Activity_M();this.taskStartAndEndTime={Name:f.ActivityName_M(),OriginalStart:f.StartTime_M(),OriginalEnd:f.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:f.ProgressEndTime_M(),ProgressPercent:f.ProgressPercent_M(),ProposedEnd:null,ProposedStart:null};
$progressClone=b("<div id='clone' class='taskclone rq-taskbar-clone  "+window.radiantQclasses.defaultClass+"'></div>");F=new RadiantQ.FlexyGantt.AutoScrollTracker(this.GanttControl);F.OnScroll.subscribe(function(b,c){J.call(this,a,$progressClone,d,e,g)},this);$progressClone.css({width:d[0].offsetWidth-2+"px",height:c[0].offsetHeight-3+"px"});c.append($progressClone);E.call(this,a,$progressClone,d,g,e);a.stopPropagation();return $progressClone},E=function(a,c,d,e,f){this.GetScheduleToPlotWith();this.closeToolTip();
d[0].uiTooltip?d[0].disableTooltip=!0:d.parent()[0].uiTooltip&&(d.parent()[0].disableTooltip=!0);n=S(a,c,d,f).x;p=c[0].offsetWidth;this.taskStartAndEndTime.ProposedStart=this.taskStartAndEndTime.OriginalStart;this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime;s=this.Activity.ProgressPercent;this.taskStartAndEndTime.OriginalDuration=this.Activity.Duration_M();this.ProposedDuration=this.taskStartAndEndTime.OriginalDuration;
c=d.closest(".rq-gc-taskbar");0==c.length&&(c=d.closest(".taskbar-style"));!0==e.isTrue?b(this).GetDragOrResizeContent(this.ProgressResizeContent,a,c,f):b(this).GetDragOrResizeContent(this.ResizeTooltipContent,a,d,f);b(document).bind("keydown",g.bind(this))},O=function(a,b,c,d,g){w=S(a,b,c,d,g).x-n+p;J.call(this,a,b,c,d,g);F.MouseMovedTo({X:a.clientX,Y:a.clientY})},M=function(a,c,e,f,h,l){F.EndTracking();document.mouseButtonPressed=!1;b.fn.RQTooltip.CanShowTooltip=!0;e[0].uiTooltip?(e[0].disableTooltip=
!1,e[0].uiTooltip.show()):e.parent()[0].uiTooltip&&(e.parent()[0].disableTooltip=!1,e.parent()[0].uiTooltip.show());b(this).RemoveDragOrResizeContent(e);b("#clone").remove();this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd?this.taskStartAndEndTime.ProposedEnd:this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.OriginalDuration=this.ProposedDuration;if(!0==f.isTrue){if(a=b(c).css("width"))e.css({width:a}),0!=parseInt(a)&&e.css({"border-width":"1px"}),b(l).css("margin-left",
parseInt(e.css("width"))+"px");l=new RadiantQ.Gantt.SetProgressValueAction(this.ActivityView.Activity_M(),s,!1)}else l=new RadiantQ.Gantt.SetDurationAction(this.GanttControl,this.ActivityView.Activity_M(),this.ProposedDuration);this.GanttControl.ActionManager.RecordAction(l);this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime>this.taskStartAndEndTime.OriginalEnd?this.taskStartAndEndTime.OriginalEnd:this.taskStartAndEndTime.ProgressEndTime;v.subscribe(d,this);v.raise(this,
{taskStartAndEndTime:this.taskStartAndEndTime,forProgressBar:f});this.UpdateTooltipContent(this.ActivityView);v.unsubscribe(d,this);e.removeClass("rq-taskbar-shadow");b(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown",g);b(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown",g)},S=function(a,b,c,d,g){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var e=a.originalEvent.touches[0].pageX,
f=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)e=a.originalEvent.touches[0].clientX,f=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)e=a.pageX,f=a.pageY;else if(a.clientX||a.clientY)e=a.clientX,f=a.clientY;return{x:e,y:f}},J=function(c,d,g,e,f){c=F.GetOffsetDueToHScroll();c=w+c;e=g.parents(".rq-gc-commonTaskbar").width()||c;!0==f.isTrue&&(s=Math.round(100*(c/e)),0>s||0>c)&&(c=s=0,F.preventAutoscroll=!0);c>e?(f.isTrue&&
(F.preventAutoscroll=!0),w=e,b(d).css("width",w+"px")):(b(d).css("width",c+"px"),null!=H&&null!=H[0]&&(H[0].style["margin-left"]=c+"px"));!1==f.isTrue&&g.addClass("rq-taskbar-shadow");d=this.GetScheduleToPlotWith();this.taskStartAndEndTime.OriginalDuration.equals(this.ProposedDuration)?this.taskStartAndEndTime.HasChanged=!1:this.taskStartAndEndTime.HasChanged=!0;!0==f.isTrue&&(100<s?s=100:0>s&&(s=0),this.taskStartAndEndTime.ProgressPercent=s);c=a.ConvertUnitsInBaseScaleTypeToDurationInHours(this.GanttChart.options.BaseTimeScaleType,
this.taskStartAndEndTime.OriginalStart,this.OriginalLeft/this.GanttChart.options.BaseTimeUnitWidth,(this.OriginalLeft+c)/this.GanttChart.options.BaseTimeUnitWidth,null);c=new RQTimeSpan(0,c,0,0,0);c=f.isTrue?c:this.GanttControl.RoundUpDuration(c);e=RQTimeSpan.Zero_M();c<e&&(c=e);this.ProposedDuration=c;this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalStart.clone().addTimeSpan(c);d&&(this.ProposedDuration=d.GetEffort(this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd),
this.taskStartAndEndTime.ProposedEnd=d.GetEnd(this.taskStartAndEndTime.OriginalStart,this.ProposedDuration),this.ProposedDuration=d.GetEffort(this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd));this.taskStartAndEndTime.Duration=this.ProposedDuration;d={Action:"Resizing",ProposedStartDate:this.taskStartAndEndTime.ProposedStart,ProposedEndDate:this.taskStartAndEndTime.ProposedEnd,Cancel:!1};this.GanttControl.ActivityTimeChanging.isSubscribed()&&this.GanttControl.ActivityTimeChanging.raise(this,
d);!0==d.Cancel&&(this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd,this.taskStartAndEndTime.Duration=this.taskStartAndEndTime.OriginalDuration,this.taskStartAndEndTime.HasChanged=!1);this.UpdateTooltipContent(this.taskStartAndEndTime);d=b(".dragPopup");d.empty();!0==f.isTrue?d.append(this.ProgressResizeContent):d.append(this.ResizeTooltipContent);d.css("visibility","visible");g[0].uiTooltip?g[0].uiTooltip.hide():g.parent()[0].uiTooltip&&g.parent()[0].uiTooltip.hide()}}})(RadiantQ.Gantt.Widget,
jQuery);
(function(f){RadiantQ.Gantt.Widget.GanttDependencyControl={Visibility:null,options:{name:"GanttDependencyControl",Data:null,DependencyViews:null,UseChartVirtualization:!1,ToggleVisibilityForVirtualizationSetting:null,GanttChart:null,GanttModel:null,DependencyTooltipTemplate:null},_create:function(){this.element.data(this.options.name,this);var b=this.element.parents("div.rq-ganttChart");b.bind("ganttchartrefreshui.DependenciesRefreshUI",function(a,b){this.element.empty();this.Refresh()}.bind(this));this.element.parents("div.rq-ganttBase");
b.bind("ganttchartsourceupdated",function(a,b){this.options.Data&&this.options.Data.CollectionChanged.unsubscribe(this.ActivityViewsCollectionChange,this);this.options.DependencyViews&&this.options.DependencyViews.CollectionChanged.unsubscribe(this.DependencyViewsColletionChange,this);this.element.empty();this.options.Data=b.options.FlatItemsSource;this.options.DependencyViews=this.options.GanttChart.options.Parent.DependencyViews;this._actViewsCollectionChangeHandler&&this._actViewsCollectionChangeHandler.Dispose();
this.options.Data&&this.options.Data.CollectionChanged&&(this._actViewsCollectionChangeHandler=this.options.Data.CollectionChanged.subscribe(this.ActivityViewsCollectionChange,this));this._depViewsCollectionChangeHandler&&this._depViewsCollectionChangeHandler.Dispose();this.options.DependencyViews&&(this._depViewsCollectionChangeHandler=this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,this));this.Refresh();var d=f(".vsb-actualContent",this.options.GanttChart.$rowsParent).height();
f(".rq-gc-dependencyControl",this.options.GanttChart.$GanttChart).css("height",d)}.bind(this));this.options.Data&&this.options.Data.CollectionChanged&&(this._actViewsCollectionChangeHandler=this.options.Data.CollectionChanged.subscribe(this.ActivityViewsCollectionChange,this));this.UpdateVisibility();this.Refresh();this._depViewsCollectionChangeHandler=this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,this);if(f.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)&&
"FlexyGantt"!=this.options.GanttChart.options.GanttType){var b=[{keyName:"Delete",name:window.RadiantQ_Delete,icon:"Delete"},{keyName:"ChangeToFinishToStart",name:window.RadiantQ_ChangeToFinishToStart,icon:"Change to Finish to Start"},{keyName:"ChangeToFinishToFinish",name:window.RadiantQ_ChangetoFinishtoFinish,icon:"Change to Finish to Finish"},{keyName:"ChangeToStartToFinish",name:window.RadiantQ_ChangeToStartToFinish,icon:"Change to Start to Finish"},{keyName:"ChangeToStartToStart",name:window.RadiantQ_ChangeToStartToStart,
icon:"Change to Start to Start"}],e=new RadiantQ.ContextMenuImpl.ContextMenu("div.DependencyContainer div.rq-gc-dependencyLine, div.rq-gc-dependencyLine-arrow ",".rq-gc-dependencysParent");e.AddNewItems(b);e.ItemClicked.subscribe(this.itemClicked,this);e.BeforeContextMenu.subscribe(function(a,b){if(e.Items){var d=f(a[0].parentElement).data(),d=(d.GanttDependencyLine||d.radiantqGanttDependencyLine).options.DependencyView.DependencyType_M();this.hideDependencyMenuItem(e.Items.asArray,d)}},this);this.options.GanttChart.options.Parent.DependencyContextMenu=
e}this._afterChartRowsRenderHandler=this.options.GanttChart.AfterChartRowsRender.subscribe(function(){this.options.UseChartVirtualization&&!1==this.options.GanttChart.options.IsPrinting&&this.Refresh()},this);!1==this.options.GanttChart.options.IsPrinting&&this.options.GanttChart.options.Parent.element.bind("Resized",function(){setTimeout(function(){this.Refresh()}.bind(this),0)}.bind(this))},hideDependencyMenuItem:function(b,e){for(var a=0;a<b.length;a++)b[a].disabled=b[a].keyName=="ChangeTo"+e?
!0:this.options.GanttChart.options.Parent.options.IsReadOnly||this.options.GanttChart.options.Parent.options.IsDependencyLinesReadOnly?!0:!1},getGanttTableParent:function(b){return f(".ui-grid-body",b.parent())},itemClicked:function(b,e){var a=f(e[0].parentElement).data(),a=a.GanttDependencyLine;switch(b){case "Delete":for(var c=0;c<a.options.Parent.options.DependencyViews.length;c++){var d=a.options.Parent.options.DependencyViews[c];if(d.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&
d.EndRowIndex_M()==a.options.DependencyView.EndRowIndex_M()){var g=d.Dependency,h=new RadiantQ.Gantt.Utils.DelayUpdates,g=new RadiantQ.Gantt.DeleteDependencyAction(d.GanttControl.Model,g,!1);d.GanttControl.ActionManager.RecordAction(g);h.Dispose()}}f(a.options.Parent.element).empty();a.options.Parent.Refresh();break;case "ChangeToFinishToStart":for(c=0;c<a.options.Parent.options.DependencyViews.length;c++)d=a.options.Parent.options.DependencyViews[c],d.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&
d.EndRowIndex_M()==a.options.DependencyView.EndRowIndex_M()&&(g=d.Dependency,h="FinishToStart",g=new RadiantQ.Gantt.ChangeDependencyTypeAction(d.GanttControl.Model,g,h,!1),d.GanttControl.ActionManager.RecordAction(g));f(a.options.Parent.element).empty();a.options.Parent.Refresh();break;case "ChangeToFinishToFinish":for(c=0;c<a.options.Parent.options.DependencyViews.length;c++)if(d=a.options.Parent.options.DependencyViews[c],d.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&d.EndRowIndex_M()==
a.options.DependencyView.EndRowIndex_M()){g=d.Dependency;h="FinishToFinish";g=new RadiantQ.Gantt.ChangeDependencyTypeAction(d.GanttControl.Model,g,h,!1);d.GanttControl.ActionManager.RecordAction(g);break}f(a.options.Parent.element).empty();a.options.Parent.Refresh();break;case "ChangeToStartToStart":for(c=0;c<a.options.Parent.options.DependencyViews.length;c++)d=a.options.Parent.options.DependencyViews[c],d.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&d.EndRowIndex_M()==a.options.DependencyView.EndRowIndex_M()&&
(g=d.Dependency,h="StartToStart",g=new RadiantQ.Gantt.ChangeDependencyTypeAction(d.GanttControl.Model,g,h,!1),d.GanttControl.ActionManager.RecordAction(g));f(a.options.Parent.element).empty();a.options.Parent.Refresh();break;case "ChangeToStartToFinish":for(c=0;c<a.options.Parent.options.DependencyViews.length;c++)d=a.options.Parent.options.DependencyViews[c],d.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&d.EndRowIndex_M()==a.options.DependencyView.EndRowIndex_M()&&(g=d.Dependency,
h="StartToFinish",g=new RadiantQ.Gantt.ChangeDependencyTypeAction(d.GanttControl.Model,g,h,!1),d.GanttControl.ActionManager.RecordAction(g));f(a.options.Parent.element).empty();a.options.Parent.Refresh()}},timer:null,DependencyViewsColletionChange:function(b,e){if("remove"==b.type){var a=this.options.GanttChart.ViewableDependencyViews.indexOf(e.items[0]);-1!=a&&this.options.GanttChart.ViewableDependencyViews.splice(a,1)}if("insert"==b.type)for(a=0;a<e.items.length;a++)this.options.GanttChart.ViewableDependencyViews.push(e.items[a]);
null!=this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.element.empty();this.Refresh()}.bind(this),0)},ActivityViewsCollectionChange:function(b,e){"FlexyGantt"==this.options.GanttChart.options.GanttType&&this._onFlatItemsSrcCollectionChanged(b,e);null!=this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.element.empty();this.Refresh()}.bind(this),0)},_onFlatItemsSrcCollectionChanged:function(b,e){var a=this.options.GanttChart;"insert"!=b.type&&"remove"!=
b.type||a.DependencyViews.UpdateList()},UpdateVisibility:function(){var b=this.options;this.Visibility=b.ToggleVisibilityForVirtualizationSetting?b.UseChartVirtualization?"Collapsed":"Visible":b.UseChartVirtualization?"Visible":"Collapsed"},_refreshTimer:null,Refresh:function(){this.element.empty();null!=this._refreshTimer&&clearTimeout(this._refreshTimer);this._refreshTimer=setTimeout(function(){this.element.empty();var b=this.options;"FlexyGantt"==b.GanttChart.options.GanttType&&this.UpdateViewableDependencyViewsForFG(b.GanttChart);
b=b.GanttChart.ViewableDependencyViews||[];if(0!=b.length)for(var e=0;e<b.length;e++)if(b[e].Visibility_M()){var a=f("<div class='DependencyContainer' style='position:absolute;'></div>");this.createGanttDependencyLine(a,b,e);a.children(":not(#depArrow)");a.hover(function(){f(this).children().addClass("dependencyShadow")});a.mouseleave(function(){f(this).children().removeClass("dependencyShadow")});this.element.append(a)}}.bind(this),0)},UpdateViewableDependencyViewsForFG:function(b){b.ViewableDependencyViews=
new RQArray;if(b.RenderedRows)for(var e={},a=0;a<b.RenderedRows.length;a++){var c=b.DependencyViews._dependencyViewsByRowId[b.RenderedRows[a]._guid];if(c)for(var d=0;d<c.length;d++){var g=c[d];e[g._guid]||(e[g._guid]=g,b.ViewableDependencyViews.push(g))}}},createGanttDependencyLine:function(b,e,a){b[this.getChildWidgetName("GanttDependencyLine")]({DependencyView:e[a],Visibility:"Visible",IsTemplateApplied:!0,GanttChart:this.options.GanttChart,StartTime:e[a].StartTime_M(),EndTime:e[a].EndTime_M(),
Parent:this,DependencyTooltipTemplate:this.options.DependencyTooltipTemplate})},_setOption:function(b,e){this.widgetBaseSetOption.apply(this,arguments);"DependencyViews"==b&&(this._depViewsCollectionChangeHandler&&this._depViewsCollectionChangeHandler.Dispose(),this.options.DependencyViews&&(this._depViewsCollectionChangeHandler=this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,this)),this.element.empty(),this.Refresh())},_destroy:function(){this._actViewsCollectionChangeHandler&&
(this._actViewsCollectionChangeHandler.Dispose(),this._actViewsCollectionChangeHandler=null);this._depViewsCollectionChangeHandler&&(this._depViewsCollectionChangeHandler.Dispose(),this._depViewsCollectionChangeHandler=null);this.StartTimeBinding&&this.StartTimeBinding.Dispose();this.EndTimeBinding&&this.EndTimeBinding.Dispose();var b=this.eventNamespace;f.observable(this.options.Data).unbind(b);this.element.parents("div.rq-ganttChart").unbind("ganttchartrefreshui.DependenciesRefreshUI");this.element.empty()}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.GanttDependencyLine={options:{name:"GanttDependencyLine",DependencyLineBarStroke:null,CustomColor:null,StartTime:null,EndTime:null,RowHeight:null,Visibility:null,PolylineGeometry:null,ArrowGeometry:null,HighlightEffect:null,IsTemplateApplied:null,DependencyView:null,GanttChart:null,DependencyTooltipTemplate:null,VirtualizationHeightOffset:null,Parent:null},_depStartTime:null,_isEndFixedShape:null,_isStartFixedShape:null,DepStartTime:function(b){if(void 0==b)return this._depStartTime;
b!=this._depStartTime?(this._depStartTime=b,this.OnPropertyChanged("StartTime",b),this.element.empty(),!1==this.IsInit&&this.OnRecomputeLocation(this.element)):this._fixedShapeChanged()},_depEndTime:null,DepEndTime:function(b){if(void 0==b)return this._depEndTime;b!=this._depEndTime?(this._depEndTime=b,this.OnPropertyChanged("EndTime",b),this.element.empty(),!1==this.IsInit&&this.OnRecomputeLocation(this.element)):this._fixedShapeChanged()},_fixedShapeChanged:function(){var b=this.options.DependencyView,
e=b.IsEndFixedShape_M(),b=b.IsStartFixedShape_M();this._isEndFixedShape!=e&&this._isStartFixedShape!=b&&(this.element.empty(),!1==this.IsInit&&this.OnRecomputeLocation(this.element))},_create:function(){this.IsInit=this._onInit=!0;var b=this.options;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.element.data("GanttDependencyLine",this);this.StartTimeBinding&&this.StartTimeBinding.Dispose();this.EndTimeBinding&&this.EndTimeBinding.Dispose();this.StartTimeBinding=new Binding(b.DependencyView,
"StartTime",this,"DepStartTime",null,RadiantQ.Gantt.BindingMode.TwoWay);this.EndTimeBinding=new Binding(b.DependencyView,"EndTime",this,"DepEndTime",null,RadiantQ.Gantt.BindingMode.TwoWay);null==b.VirtualizationHeightOffset&&(b.VirtualizationHeightOffset=0);this._depViewPropChangedHandler&&this._depViewPropChangedHandler.Dispose();this.IsInit&&(this.IsInit=!1,this.OnRecomputeLocation(this.element));this._depRecomputeTimer=null;this._onInit=!1},OnPropertyChanged:function(b,e){},timer:null,DependencyViewPropertyChange:function(b,
e){"Visibility"==e.PropertyName&&(this.options.Visibility=!0==e.value?"visible":"collapse")},CreateTooltip:function(b,e){var a=this;e.attr("title","");var c=this,d=f(document);e.tooltip({content:function(b){b=RadiantQ.Template||kendo.template;return null!=a.options.DependencyTooltipTemplate?b(a.options.DependencyTooltipTemplate,a.options.DependencyView):"<b>"+window.RadiantQ_TaskLinkString+":</b> "+window["RadiantQ_"+c.options.DependencyView.DependencyType_M()]+" <b>"+window.RadiantQ_LagString+":</b> "+
c.options.DependencyView.Dependency.Lag_M().toString()+"<br/><b>"+window.RadiantQ_FromString+": &nbsp;</b><b>(ID "+c.options.DependencyView.StartActivity.id+")</b> "+c.options.DependencyView.StartActivity.ActivityName_M()+"<br/><b>"+window.RadiantQ_ToXString+":  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b><b>(ID "+c.options.DependencyView.EndActivity.id+")</b> "+c.options.DependencyView.EndActivity.ActivityName_M()+""},open:function(a,b){document.mouseButtonPressed&&b.tooltip.remove();b.tooltip.addClass("dependencyLineTooltip");
d.bind("mousedown.divEvents mouseup.divEvents",function(){b.tooltip.remove();d.unbind(".divEvents")})},close:function(){d.unbind(".divEvents")},position:{my:"left top+15",at:"top",offset:"10"},track:!0});f(e).bind("mousedown.tooltipHandler blur.tooltipHandler",function(){if(this){var a="#"+f(this).attr("aria-describedby");f(a).remove();f(this).removeAttr("aria-describedby")}})},_depRecomputeTimer:null,OnRecomputeLocation:function(b){var e=this.options,a=e.DependencyView;b=e.GanttChart.options;var c=
this._depStartTime,d=this._depEndTime,g=!1;"FlexyGantt"==b.GanttType&&(g=!0);!1==g&&!0==e.DependencyView.EndActivity._isMilestone&&(this.isMilestone=!0);if(!(null==a||"collapse"==e.Visibility||!1==e.IsTemplateApplied||null==c||null==d||b.ComputedStartTime==b.ComputedEndTime||-1==a.StartRowIndex_M()&&-1==a.EndRowIndex_M()||!1==g&&a.StartRowIndex_M()==a.EndRowIndex_M())){var f;this.options.GanttChart.options.OnDependencyLineLoad&&(f=this.options.GanttChart.options.OnDependencyLineLoad);if(g)-1!=a.StartRowIndex_M()&&
-1!=a.EndRowIndex_M()&&(this._onInit?(this._drawRelatedDepLine(!0),null!=f&&"function"==typeof f&&f.call(this.element,this)):(null!=this._depRecomputeTimer&&clearTimeout(this._depRecomputeTimer),this._depRecomputeTimer=setTimeout(function(){this._drawRelatedDepLine(!0);this._depRecomputeTimer=null;null!=f&&"function"==typeof f&&f.call(this.element,this)}.bind(this),0)));else{var m=a.ActivityViewsCollection._dictActivityVsView[a.StartActivity.ID_M()],k=a.ActivityViewsCollection._dictActivityVsView[a.EndActivity.ID_M()];
m&&k&&(this._onInit?(a=m.ChartRow(),e=null==a?-1:a[0].rowIndex,a=k.ChartRow(),a=null==a?-1:a[0].rowIndex,-1==e&&-1==a&&!0!=b.IsPrinting||this._drawRelatedDepLine(!1),null!=f&&"function"==typeof f&&f.call(this.element,this)):(null!=this._depRecomputeTimer&&clearTimeout(this._depRecomputeTimer),this._depRecomputeTimer=setTimeout(function(){var a=m.ChartRow(),b=null==a?-1:a[0].rowIndex,a=k.ChartRow(),a=null==a?-1:a[0].rowIndex;-1==b&&-1==a||this._drawRelatedDepLine(!1);this._depRecomputeTimer=null;null!=
f&&"function"==typeof f&&f.call(this.element,this)}.bind(this),0)))}}},_getAdjustedStartPoint:function(b,e,a){b={X:b,Y:e};switch(a){default:b.X-=20;break;case RadiantQ.Gantt.DependencyType.StartToStart:b.X-=20;break;case RadiantQ.Gantt.DependencyType.FinishToFinish:b.X+=20;break;case RadiantQ.Gantt.DependencyType.StartToFinish:b.X+=20}return b},_getAdjustedEndPoint:function(b,e,a){b={X:b,Y:e};switch(a){default:b.X+=20;break;case RadiantQ.Gantt.DependencyType.StartToStart:b.X-=20;break;case RadiantQ.Gantt.DependencyType.FinishToFinish:b.X+=
20;break;case RadiantQ.Gantt.DependencyType.StartToFinish:b.X-=20}return b},isMilestone:!1,_drawRelatedDepLine:function(b){var e=this.options,a=e.DependencyView,c=e.GanttChart,d=c.options,g=d.RowHeight,h=this.element,m=this._depStartTime,k=this._depEndTime,l=a.StartRowIndex_M(),n=a.EndRowIndex_M(),p;null!=d.DependencyLineColor&&(p=d.DependencyLineColor);var d=a.DependencyType_M(),q=RadiantQ.Gantt.RQPrint.InternalPrintOptions,r=0<q.MaximumHeightPerPage?q.NoOfRenderedRows:q.NoOfRowsInPage;if(q.IsNewPrinting){if(l<
q.StartRowIndex&&n>q.StartRowIndex+r)return;l-=q.StartRowIndex;n-=q.StartRowIndex}var t=a.GetStartItemScheduleToPlotWith(e.GanttChart.options.WorkTimeSchedule),r=a.GetEndItemScheduleToPlotWith(e.GanttChart.options.WorkTimeSchedule),s=c.GetBTSTToRenderAgainst(),w=c.GetBTUWToRenderAgainst(),m=c.ConvertTimeToXFor(m,s,w,t),k=c.ConvertTimeToXFor(k,s,w,r),e=l*g+g/2+e.VirtualizationHeightOffset,r=e+(n-l)*g;if("FlexyGantt"==c.options.Parent.GanttType){var s=c.$rowsParent[0].getBoundingClientRect(),w=c.$rowsParent.scrollTop(),
t=c.TaskItemCtrlByData.GetItemByKey(a._startItem),u=c.TaskItemCtrlByData.GetItemByKey(a._endItem);if(null==t||null==u)return;var c=t.element,t=u.element,u=c[0].getBoundingClientRect(),v=t[0].getBoundingClientRect();0<c.parents(".rq-gc-chartArea").length?e=u.top-s.top+(u.bottom-u.top)/2+w:l>n&&e<s.bottom&&(e=s.bottom+20);0<t.parents(".rq-gc-chartArea").length?r=v.top-s.top+(v.bottom-v.top)/2+w:n>l&&r<s.bottom&&(r=s.bottom+20)}q.IsNewPrinting||(-1==l?(q=this._getAdjustedStartPoint(k,r,d),m=q.X,e=q.Y):
-1==n&&(q=this._getAdjustedEndPoint(m,e,d),k=q.X,r=q.Y));b||(a.StartItemXPosAdjustment_M&&(m+=a.StartItemXPosAdjustment_M()),d!=RadiantQ.Gantt.DependencyType.FinishToStart&&a.EndItemXPosAdjustment_M&&(k+=a.EndItemXPosAdjustment_M()),a.StartItemYPosAdjustment_M&&(e+=a.StartItemYPosAdjustment_M()),a.EndItemYPosAdjustment_M&&(r+=a.EndItemYPosAdjustment_M()));q={Start:{X:m,Y:e},End:{X:k,Y:r}};c=a.StartItemPosAdjustment_M?a.StartItemPosAdjustment_M():a.StartItemPosAdjustment;s=a.EndItemPosAdjustment_M?
a.EndItemPosAdjustment_M():a.EndItemPosAdjustment;c&&("function"==typeof c?c.call(a,q,d,"Start"):"object"==typeof c&&(q.Start.X+=c.X||0,q.Start.Y+=c.Y||0),m=q.Start.X,e=q.Start.Y);s&&("function"==typeof s?s.call(a,q,d,"End"):"object"==typeof s&&(q.End.X+=s.X||0,q.End.Y+=s.Y||0),k=q.End.X,r=q.End.Y);switch(d){default:this._drawFinishToStart(m,e,k,r,l,n,p,g,g,b,a);break;case RadiantQ.Gantt.DependencyType.StartToStart:this._drawStartToStart(m,e,k,r,l,n,p);break;case RadiantQ.Gantt.DependencyType.FinishToFinish:this._drawFinishToFinish(m,
e,k,r,l,n,p);break;case RadiantQ.Gantt.DependencyType.StartToFinish:this._drawStartToFinish(m,e,k,r,l,n,p,g,g)}a=f(".rq-gc-dependency",h);b||this.CreateTooltip(this,a)},_drawFinishToStart:function(b,e,a,c,d,g,f,m,k,l,n){e={X:b,Y:e};d={X:a,Y:c};g=this.element;l=[];l.push({X:e.X,Y:e.Y});d.Y>e.Y?d.Y-=k/2:d.Y<e.Y&&(d.Y+=k/2);d.Y!=e.Y?(!1==n.IsEndFixedShape_M()&&(d.X+=7),a>=b-7&&a<=b+7&&n.IsEndFixedShape_M()?(l.push({X:e.X+15,Y:e.Y}),l.push({X:e.X+15,Y:e.Y+10}),l.push({X:d.X,Y:e.Y+10})):d.X<e.X-7?this._insertPointsToGoAroundBarForFS(l,
e,d,m,k):l.push({X:d.X,Y:e.Y})):d.X<e.X&&this._insertPointsToGoAroundBarForFS(l,e,d,m,k);c==l[l.length-1].Y&&a==l[l.length-1].X||l.push({X:d.X,Y:d.Y});g.css({"margin-left":e.X,"margin-top":e.Y+"px"});this._drawDeplinesFromPts(l,g,e.X,e.Y,d.X,d.Y,f,RadiantQ.Gantt.DependencyType.FinishToStart)},_drawStartToStart:function(b,e,a,c,d,g,f){d=this.element;g=[];g.push({X:b,Y:e});c!=e&&(a<b?(g.push({X:a-10,Y:e}),g.push({X:a-10,Y:c})):(g.push({X:b-10,Y:e}),g.push({X:b-10,Y:c})));g.push({X:a,Y:c});d.css({"margin-left":b,
"margin-top":e+"px"});this._drawDeplinesFromPts(g,d,b,e,a,c,f,RadiantQ.Gantt.DependencyType.StartToStart)},_drawFinishToFinish:function(b,e,a,c,d,g,f){d=this.element;g=[];g.push({X:b,Y:e});c!=e&&(a<b?(g.push({X:b+20,Y:e}),g.push({X:b+20,Y:c})):(g.push({X:a+20,Y:e}),g.push({X:a+20,Y:c})));g.push({X:a+3,Y:c});d.css({"margin-left":b,"margin-top":e+"px"});this._drawDeplinesFromPts(g,d,b,e,a,c,f,RadiantQ.Gantt.DependencyType.FinishToFinish)},_drawStartToFinish:function(b,e,a,c,d,g,f,m,k){d=this.element;
g=[];g.push({X:b,Y:e});c!=e?a<=b?(g.push({X:a,Y:e}),g.push({X:a,Y:c>e?c-k/2:c+k/2})):(g.push({X:b-10,Y:e}),g.push({X:b-10,Y:e+m/2}),g.push({X:a+10,Y:e+m/2}),g.push({X:a+10,Y:c}),g.push({X:a+3,Y:c})):g.push({X:a,Y:c});d.css({"margin-left":b,"margin-top":e+"px"});this._drawDeplinesFromPts(g,d,b,e,a,c,f,RadiantQ.Gantt.DependencyType.StartToFinish,k)},_drawDeplinesFromPts:function(b,e,a,c,d,g,h,m,k){if(1!=b.length)for(var l="<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+
"' style='background-color:"+h+" !important;'></div>",n=0;n<b.length;n++){var p=b[n];if(n==b.length-1)this._drawDepArrow(e,a,c,d,g,h,m,b[n-1].X,k);else{var q=b[n+1],r=Math.abs(p.X-q.X)||1,t=Math.abs(p.Y-q.Y)||1,s=Math.min(p.X,q.X)-a,w=Math.min(p.Y,q.Y)-c;p.X==q.X&&(t+=1);p=f(l).css({"margin-left":s,"margin-top":w,width:r,height:t});e.append(p)}}},_drawDepArrow:function(b,e,a,c,d,g,h,m,k){var l=f("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+
"'></div> "),n=d-a,p=c-4-e;switch(h){default:a==d?(n-=5,m<c?(p-=1,l.addClass("rq-gc-dependencyLine-arrow-right")):(p+=6,l.addClass("rq-gc-dependencyLine-arrow-left"))):a>d?(n-=5,m<c?l.addClass("rq-gc-dependencyLine-arrow-right"):l.addClass("rq-gc-dependencyLine-arrow-up")):(n-=4,!0==this.isMilestone&&-4<=p&&3>=p&&(n+=4),d>a&&(m<c?l.addClass("rq-gc-dependencyLine-arrow-right"):l.addClass("rq-gc-dependencyLine-arrow-down")));break;case RadiantQ.Gantt.DependencyType.StartToStart:n-=5;c<e&&a==d?(p+=5,
l.addClass("rq-gc-dependencyLine-arrow-left")):l.addClass("rq-gc-dependencyLine-arrow-right");break;case RadiantQ.Gantt.DependencyType.FinishToFinish:e<c&&a==d?(p-=1,l.addClass("rq-gc-dependencyLine-arrow-right")):(p+=4,l.addClass("rq-gc-dependencyLine-arrow-left"));n-=5;break;case RadiantQ.Gantt.DependencyType.StartToFinish:a==d?e<c?(p-=1,n-=5,l.addClass("rq-gc-dependencyLine-arrow-right")):(p+=4,n-=5,l.addClass("rq-gc-dependencyLine-arrow-left")):e<c?(p+=4,n-=5,l.addClass("rq-gc-dependencyLine-arrow-left")):
a>d?(n+=k/2-5,l.addClass("rq-gc-dependencyLine-arrow-up")):(n-=k/2,l.addClass("rq-gc-dependencyLine-arrow-down"))}null!=g&&void 0!=g&&(l.hasClass("rq-gc-dependencyLine-arrow-up")?l[0].style.setProperty("border-bottom-color",g,"important"):l.hasClass("rq-gc-dependencyLine-arrow-down")?l[0].style.setProperty("border-top-color",g,"important"):l.hasClass("rq-gc-dependencyLine-arrow-left")&&l[0].style.setProperty("border-right-color",g,"important"),l.hasClass("rq-gc-dependencyLine-arrow-right")&&l[0].style.setProperty("border-left-color",
g,"important"));l.css({"margin-left":p,"margin-top":n});b.append(l)},_insertPointsToGoAroundBarForFS:function(b,e,a,c,d){a.Y==e.Y?(b.push({X:e.X+5,Y:e.Y}),b.push({X:e.X+5,Y:e.Y+c/2}),b.push({X:a.X-9,Y:e.Y+c/2}),b.push({X:a.X-9,Y:a.Y})):a.Y<e.Y?(a.X-=8,a.Y-=d/2,b.push({X:e.X+5,Y:e.Y}),b.push({X:e.X+5,Y:e.Y-c/2}),b.push({X:a.X-9,Y:e.Y-c/2}),b.push({X:a.X-9,Y:a.Y})):a.Y>e.Y&&(a.X-=8,a.Y+=d/2,b.push({X:e.X+5,Y:e.Y}),b.push({X:e.X+5,Y:e.Y+c/2}),b.push({X:a.X-9,Y:e.Y+c/2}),b.push({X:a.X-9,Y:a.Y}))},_destroy:function(){this.StartTimeBinding&&
this.StartTimeBinding.Dispose();this.EndTimeBinding&&this.EndTimeBinding.Dispose();this._depViewPropChangedHandler&&this._depViewPropChangedHandler.Dispose();f(".rq-gc-dependency",this.element).unbind(".tooltipHandler");this.element.data("GanttDependencyLine",null)}}})(jQuery);
(function(f,b){function e(){this._cachedRowCont=b("<div id='cache'></div>");this._cachedRows={}}function a(a){if(a=d[a.eventNamespace])a._cachedRowCont.empty(),a._cachedRows={}}var c=RadiantQ.Gantt.DefaultStyles,d={};f.GanttRows={currentUniqueRowSuffix:0,options:{name:"GanttRows",ProgressPercentBinding:null,Data:null,ParentTasksListProperty:null,TasksListProperty:null,EnableOverlappedRenderingBindingProperty:"",Expand:null,TaskTemplate:null,OverlappedTasksRenderingOptimization:null,ParentTaskTemplate:null,
TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,GanttChart:null,RowHeight:null,TaskBarHeight:null,KnockoutObjectName:null,ViewWidth:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,FlexyGantt:null,TimeIndicatorLineOption:null,UseChartVirtualization:!1,EnableAlternativeRowBackground:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,EnableAutoAdjustForSchedule:!0,CanDrawDependency:!1,ConnectingInfoPopup:null,MinimumWidthForParentBar:1},
cachedTaskListControlInstance:[],CreateTaskListControl:function(a,b,c){a[this.getChildWidgetName("TasksListControl")]({Data:b,ParentTasksListProperty:this.options.ParentTasksListProperty,ProgressPercentBinding:this.options.ProgressPercentBinding,TasksListProperty:this.options.TasksListProperty,EnableOverlappedRenderingBindingProperty:this.options.EnableOverlappedRenderingBindingProperty,TaskTemplate:this.options.TaskTemplate,ParentTaskTemplate:this.options.ParentTaskTemplate,OverlappedTasksRenderingOptimization:this.options.OverlappedTasksRenderingOptimization,
TaskStartTime:this.options.TaskStartTime,ParentTaskStartTime:this.options.ParentTaskStartTime,TaskEndTime:this.options.TaskEndTime,ParentTaskEndTime:this.options.ParentTaskEndTime,RowCount:this.currentUniqueRowSuffix,GanttChart:this.options.GanttChart,Parent:this,KnockoutObjectName:this.options.KnockoutObjectName,TaskTooltipTemplate:this.options.TaskTooltipTemplate,ResizeInfoPopup:this.options.ResizeInfoPopup,MovingInfoPopup:this.options.MovingInfoPopup,TaskBarHeight:this.options.TaskBarHeight,FlexyGantt:this.options.FlexyGantt,
UseChartVirtualization:this.options.UseChartVirtualization,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,TimeIndicatorLineOption:this.options.TimeIndicatorLineOption,UseRQModelBinder:this.UseRQModelBinder,EnableAutoAdjustForSchedule:this.options.EnableAutoAdjustForSchedule,CanDrawDependency:this.options.CanDrawDependency,ConnectingInfoPopup:this.options.ConnectingInfoPopup,MinimumWidthForParentBar:this.options.MinimumWidthForParentBar});
this.options.GanttChart.LoadingRow({Row:c,Data:b})},$tableBody:null,getGanttTableParent:function(a){return b(".ui-grid-body",a.parent())},VSB:null,_vsbScrollHandler:null,UseRQModelBinder:!1,updateModelBinderBool:function(){var a=/data-bind/g;null!=this.options.TaskTemplate&&(this.UseRQModelBinder=(a.test(this.options.TaskTemplate)||a.test(this.options.ParentTaskTemplate))&&null==this.options.KnockoutObjectName)},_create:function(){c.init();var g=this;this.itemHeight=this.options.RowHeight;this.SCROLLBAR_MIN_SIZE=
10;this.VirtualizationID=0;this.totalItems=[];this.listItems=[];this.updateModelBinderBool();d[this.eventNamespace]=new e;this.$chartTableBody=b("<tbody></tbody>");var f=this.table=b("<table class='chartRowsContainer rq-gc-rowsParent-table' style='overflow:hidden;'></table").append(this.$chartTableBody);f[0].style.cssText=c.ZeroStyle;f[0].style.height="auto";var m=eval(this.options.KnockoutObjectName),k=this.options.GanttChart,l=k.element,k=k.$rowsParent;this.$tableBody=this.getGanttTableParent(l);
var n=k.height();this.$Area=b(".rq-gc-chartArea-div",l);this.VSB=new RadiantQ.Gantt.VerticalScrollBar(f,k,this.options.Data,this.options.RowHeight,this.options.FlexyGantt,!0);this.options.GanttChart.VSB=this.VSB;this.bindDataCollectionChanged=function(){g.options.Data&&g.options.Data.CollectionChanged.subscribe(function(a,b){"insert"==a.type&&g.InsertRow(g.element,b,f,g.options.ViewWidth);"remove"==a.type&&g.RemoveRow(b,f);m&&g.applayBindings(m,g.element[0]);var c=g.options.GanttChart;c.syncVerticalScrollBar&&
c.syncVerticalScrollBar()})};this.bindDataCollectionChanged();this.element.append(f);null!=g.options.Data&&g.Refresh(g.element,g.options.Data,f,g.options.ViewWidth,n);g._vsbScrollHandler=g.VSB.OnScroll.subscribe(function(a,c,d){a=g.VSB.$scrollContainer.scrollTop();b("div.rq-gc-dependencysParent",g.$Area).scrollTop(a);g.options.UseChartVirtualization&&g.Refresh(g.element,g.options.Data,f,g.options.ViewWidth,n)});b(l).bind("ganttchartsourceupdated",function(c,d){this._unBindEventsToRefresh();b.extend(this.options,
d.options);this.options.Data=d.options.FlatItemsSource;this.options.ParentTaskTemplate=d.options.ParentTaskItemTemplate;this.options.TaskTemplate=d.options.TaskItemTemplate;this.VirtualizationID=0;this.totalItems=[];this.listItems=[];a(this);this.bindDataCollectionChanged();this.bindChartRefreshUI(l);this.renderBars(d);this._updateTimeIndicatorLine();var g=this.options.GanttChart;g.syncVerticalScrollBar&&g.syncVerticalScrollBar()}.bind(this));this.bindChartRefreshUI=function(c){b(c).bind("ganttchartrefreshui.RowsRefreshUI",
function(b,c){!0==g.options.GanttChart.options.ResizeToFit&&(width=g.options.GanttChart.element.width(),g.$chartTableBody.width(width));!0==c.ForceToReDrawRows&&(a(this),g.renderBars(c))}.bind(this))};this.bindChartRefreshUI(l);b(window).resize(function(){n=b(".rq-gc-chartArea-div",l).height();g.options.UseChartVirtualization&&(null!=g.options.Data&&g.Refresh(g.element,g.options.Data,f,g.options.ViewWidth,n),g._enableAlternativeRowBackground())});this.renderBars=function(a){this.$chartTableBody.empty();
null!=a.options.FlatItemsSource&&g.Refresh(g.element,a.options.FlatItemsSource,f,a.options.ViewWidth,n);g.knockoutObjectName&&g.applayBindings(g.knockoutObjectName,g.element[0]);this._enableAlternativeRowBackground()};this.element.data("GanttRows",this);this._updateTimeIndicatorLine();this._updateContextMenus()},applayBindings:function(a,b){ko.applyBindingsToDescendants(a,b)},_enableAlternativeRowBackground:function(){if(!1!=this.options.EnableAlternativeRowBackground){var a=this,c=this.table.find("td");
if(0!=c.length){var d=c[0].parentElement["data-grid-item"]._displayIndex;c.removeClass("rq-grid-alternative-background");c.addClass(function(){b(this);var c=!1;a.options.GanttChart.options.IsPrinting?c=0!=this.parentElement.rowIndex%2:(c=0!=d%2,d++);if(!0==c)return"rq-grid-alternative-background"})}}},getGanttTableHeight:function(){return b("div.grid-body-actualContent",this.$tableBody).height()},guid:function(){var a="",b,c;for(b=0;32>b;b++){c=16*Math.random()|0;if(8==b||12==b||16==b||20==b)a+="-";
a+=(12==b?4:16==b?c&3|8:c).toString(16)}return a},_refreshVSBTimer:null,Refresh:function(c,e,f,k,l){this.updateModelBinderBool();var n=this.options.GanttChart;this.cachedTaskListControlInstance=[];n.RenderedRows=[];var p=this;this.VSB.CreateRow=function(a,c){void 0==c.uid&&(c.uid=p.guid());var d=null;if(p.options.UseChartVirtualization)d=p.getItemAtIndex(a,e,k),d[0]["data-grid-item"]=c,p.totalItems.push(d),g=b("td",d),!1==n.options.IsPrinting&&!1==c.IsSelected()&&d.hasClass("rq-row-selected")&&d.removeClass("rq-row-selected "+
window.radiantQclasses.selectionClass),p.options.TimeIndicatorLineOption&&p.cachedTaskListControlInstance.push(g.data("TasksListControl")),p.cleanupListItems(!0);else{var d=c.RowHeight||p.options.RowHeight,d=b("<tr class='rq-grid-row' data-uid ="+c.uid+" style='height:"+d+"px;width:100%' > <td id='ChartRow' class='FlexyChartRow rq-fg-gc-row' style='height:"+(d-1)+"px;width:100%;border-top-width: 0;border-right-width: 0;'> </td> </tr>"),g=d.find("td");g[0].DataContext=c;d[0]["data-grid-item"]=e[a];
p.CreateTaskListControl(g,c,d);p.currentUniqueRowSuffix++;!1==n.options.IsPrinting&&c.IsSelected()&&d.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);p.options.TimeIndicatorLineOption&&p.cachedTaskListControlInstance.push(g.data("TasksListControl"))}p.raiseRowBgAndFgTemplate(p.options,g,n,c);f.css("height","auto");!1==n.options.IsPrinting&&n.RenderedRows.push(c);return d};this.VSB.ClearCachedRows=function(){a(p)};this._refreshVSBTimer&&clearTimeout(this._refreshVSBTimer);this._refreshVSBTimer=
setTimeout(function(){if(p.options.UseChartVirtualization){var a=d[p.eventNamespace],c=b("tr",p.element);b(".end-resizeMarker,.start-resizeMarker",c).css("display","none");a._cachedRowCont.append(c)}p.VSB.Refresh(e,p.options.UseChartVirtualization);f.width(k);p.options.KnockoutObjectName&&(a=eval(p.options.KnockoutObjectName),p.applayBindings(a,p.element[0]));p._enableAlternativeRowBackground();p.ApplyTooltip(b(".rq-gc-tooltip",p.element))},0);p._afterChartRowsRenderHandler=p.options.GanttChart.AfterChartRowsRender.subscribe(function(){},
p)},ApplyTooltip:function(a){a.RQTooltip(function(a){a=a.data("TaskBar");if(!a||null==a.options.TaskTooltipTemplate)return null;a.UpdateTemplateContent(a.options.Data);return a.TooltipContent});b.fn.RQTooltip.CanShowTooltip=!0},_updateTimeIndicatorLine:function(){if(this.options.TimeIndicatorLineOption)for(var a=0;a<this.cachedTaskListControlInstance.length;a++)this.cachedTaskListControlInstance[a].refreshVerticalLine()},_updateContextMenus:function(){var a=this.options.GanttChart;if(b.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)){var c=
"#"+a.$GanttChart[0].id,d=a.$GanttChart.parent(),e=new RadiantQ.ContextMenuImpl.ContextMenu(c+" .rq-gc-taskbar, "+c+" .taskbar-style, "+c+" .taskbar",d),f=new RadiantQ.ContextMenuImpl.ContextMenu(c+" .rq-gc-parentBar, "+c+" .parentBar-style, "+c+" .parentBar",d),c=new RadiantQ.ContextMenuImpl.ContextMenu(c+" .rq-fg-gc-row",d.parent());a.options.Parent.TaskContextMenu=e;a.options.Parent.ParentTaskContextMenu=f;a.options.Parent.RowContextMenu=c}},_refreshUIEventHandler:null,raiseRowBgAndFgTemplate:function(a,
c,d,e){e._refreshUIEventHandler&&e._refreshUIEventHandler.Dispose();var f=this;e._refreshUIEventHandler=d.RefreshUIEvent.subscribe(function(){f.ApplyTooltip(b(".rq-gc-tooltip",f.element));this.raiseRefreshRowBgAndFgEvent(a,c,d,e)},this);this.raiseRefreshRowBgAndFgEvent(a,c,d,e)},raiseRefreshRowBgAndFgEvent:function(a,c,d,e){var f=e.RowHeight||a.RowHeight;if(a.EnableCustomRowBackground){var n=b("#bgContainer",c);0==n.length?(n=b('<div id="bgContainer" style="height:inherit; position:absolute; width:100%;"></div>'),
c.prepend(n)):n.empty();d.RefreshRowBackground.raise(n,{GanttChart:d,Data:e})}a.EnableCustomRowForeground&&(a=b("#fgContainer",c),0==a.length?(a=b('<div id="fgContainer" style="height:'+f+'px; position:absolute; width:100%; z-index:100; pointer-events:none;"></div>'),c.prepend(a)):a.empty(),d.RefreshRowForeground.raise(a,{GanttChart:d,Data:e}))},getItemAtIndex:function(a,c,e){if(0<=a&&a<this.options.Data.length){var f=this.options.Data[a],l,n=a.toString(),p=d[this.eventNamespace];if(void 0!=p._cachedRows[f._guid])l=
p._cachedRows[f._guid];else{l=f.RowHeight||this.options.RowHeight;l=b("<tr class='rq-grid-row' data-uid ="+c[a].uid+" style='height:"+l+"px;width:100%' > <td name="+c[a]._data.TName+" class='FlexyChartRow rq-fg-gc-row' style='height:"+l+"px;width:100%;border-top-width: 0; border-right-width: 0;'> </td> </tr>");var q=l.find("td");q.width(e);q[0].DataContext=c[a];this.CreateTaskListControl(q,c[a],l);l[0]["data-grid-item"]=c[a];this.currentUniqueRowSuffix++;c[a].IsSelected()&&l.addClass("rq-row-selected "+
window.radiantQclasses.selectionClass);if(null===this.listItems[n]||void 0===this.listItems[n])this.listItems[n]=l;p._cachedRows[f._guid]=l}l.attr("list-index",a);return l}},cleanupListItems:function(a){var b,c=[];if(this.processedItems)for(b in this.processedItems)c.push(this.processedItems[b]);this.totalItems=c;!0!==a&&this.ScrollBar.fadeTo(300,0)},InsertRow:function(a,c,d,e){for(a=0;a<c.items.length;a++){var f=null,n=c.items[a];void 0==n.uid&&(n.uid=this.guid());var p=this.options.GanttChart,f=
b("<tr class='rq-grid-row' data-uid="+n.uid+" style='height:"+(n.RowHeight||this.options.RowHeight)+"px;width:100%' > <td class='FlexyChartRow rq-fg-gc-row' style='height:"+(this.options.RowHeight-1)+"px;width:100%;border-top-width: 0; border-right-width: 0;'> </td> </tr>"),q=f.find("td");q[0].DataContext=n;f[0]["data-grid-item"]=n;if(this.options.UseChartVirtualization)this.Refresh(this.element,this.options.Data,d,this.options.ViewWidth);else{this.raiseRowBgAndFgTemplate(this.options,q,p,n);this.CreateTaskListControl(q,
n,f);if(0==c.index){var r=d.find("tr.rq-grid-row");0==r.length?d.append(f):r.eq(0).before(f[0])}else d.find("tr.rq-grid-row").eq(c.index+a-1).after(f[0]);p.syncVerticalScrollBar();!1==p.options.IsPrinting&&p.RenderedRows.push(n)}q.width(e);this.currentUniqueRowSuffix++;!1==p.options.IsPrinting&&n.IsSelected()&&f.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);this.ApplyTooltip(b(".rq-gc-tooltip",q))}this._enableAlternativeRowBackground()},RemoveRow:function(a,c){var e=this.options.GanttChart;
if(this.options.UseChartVirtualization){var f=this.listItems.splice(a.index,1);0<this.itemindex?this.totalItems.splice(a.index-this.itemindex-1,1):this.totalItems.splice(a.index-this.itemindex,1);var e=d[this.eventNamespace],l=a.items[0];e._cachedRows[l._guid]&&(e._cachedRows[l._guid].remove(),delete e._cachedRows[l._guid]);this.Refresh(this.element,this.options.Data,c,this.options.ViewWidth)}else for(f=0;f<a.items.length;f++){var n=c.find("tr.rq-grid-row").eq(a.index);n.remove();b(c).css("height",
parseInt(b(c).css("height"))-parseInt(b(n).css("height")));!1==e.options.IsPrinting&&(n=RQArray.prototype.indexOf.call(e.RenderedRows,l),-1!=n&&e.RenderedRows.splice(n,1))}this._enableAlternativeRowBackground()},_unBindEventsToRefresh:function(){var c=this.element.parents("div").filter(".rq-ganttChart");b(c).unbind("ganttchartrefreshui.RowsRefreshUI");null!=this.options.Data&&b.observable(this.options.Data).unbind(this.eventNamespace);a(this);this.$chartTableBody.empty()},_destroy:function(){this._unBindEventsToRefresh();
this.element.empty();this.element.data("GanttRows",null)},_setOption:function(b,c){this.widgetBaseSetOption.apply(this,arguments);"RowHeight"==b&&(a(this),this.Refresh(this.element,this.options.Data,this.table,this.options.ViewWidth))}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f){function b(a,b){this._fg=b;this.DataSource=a;this._endItemXPosAdjustment=0;this._startTimeBinding=this._endTimeBinding=null;this._guid=RadiantQ.Gantt.guidGenerator();this.VerticalPositionChanged=new ObjectEvent("VerticalPositionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");b=this._fg.options;this.EndFlexyNodeData=this.StartFlexyNodeData=null;null!=b.DependencyLineTypeBinding&&this.SetupBinding(b.DependencyLineTypeBinding,"DependencyType");null!=b.DependencyLineStartItemBinding&&
this.SetupBinding(b.DependencyLineStartItemBinding,"StartItem");null!=b.DependencyLineEndItemBinding&&this.SetupBinding(b.DependencyLineEndItemBinding,"EndItem");null!=b.DependencyLineIsStartFixedShapeBinding&&this.SetupBinding(b.DependencyLineIsStartFixedShapeBinding,"IsStartFixedShape");null!=b.DependencyLineIsEndFixedShapeBinding&&this.SetupBinding(b.DependencyLineIsEndFixedShapeBinding,"IsEndFixedShape");null!=b.DependencyLineStartRowItemBinding&&this.SetupBinding(b.DependencyLineStartRowItemBinding,
"StartRowItem");null!=b.DependencyLineEndRowItemBinding&&this.SetupBinding(b.DependencyLineEndRowItemBinding,"EndRowItem");null!=b.DependencyLineStartItemPosAdjustmentBinding&&this.SetupBinding(b.DependencyLineStartItemPosAdjustmentBinding,"StartItemPosAdjustment");null!=b.DependencyLineEndItemPosAdjustmentBinding&&this.SetupBinding(b.DependencyLineEndItemPosAdjustmentBinding,"EndItemPosAdjustment");this.SetupStartTimeBinding();this.SetupEndTimeBinding();b.FlatItemsSource.CollectionChanged.subscribe(this.FlatTreeItemsSource_CollectionChanged,
this)}var e=RadiantQ.Gantt;b.prototype.SetupStartTimeBinding=function(){this._startTimeBinding&&this._startTimeBinding.Dispose();var a=null,a=this._dependencyType==e.DependencyType.FinishToStart||this._dependencyType==e.DependencyType.FinishToFinish?this._fg.options.TaskEndTimeProperty:this._fg.options.TaskStartTimeProperty;null!=this._startItem?this._startTimeBinding=this.SetupBinding({Property:a},"StartTime",this._startItem):this.StartTime_M(Date.MinValue.clone())};b.prototype.SetupEndTimeBinding=
function(){this._endTimeBinding&&this._endTimeBinding.Dispose();var a=null,a=this._dependencyType==e.DependencyType.FinishToStart||this._dependencyType==e.DependencyType.StartToStart?this._fg.options.TaskStartTimeProperty:this._fg.options.TaskEndTimeProperty;null!=this._endItem?this._endTimeBinding=this.SetupBinding({Property:a},"EndTime",this._endItem):this.EndTime_M(Date.MinValue.clone())};b.prototype.SetupBinding=function(a,b,d){return a=new Binding(d||this.DataSource,a.Path||a.Property,this,b,
a.Converter,a.Mode,d)};b.prototype.FlatTreeItemsSource_CollectionChanged=function(a,b){if(null!=b.NewItems)for(var d=0;d<b.NewItems.length;d++){var e=b.NewItems[d];e._data==this._startRowItem&&this.OnStartRowItemChanged();e._data==this._endRowItem&&this.OnEndRowItemChanged()}if(null!=b.OldItems)for(d=0;d<b.OldItems.length;d++)e=b.OldItems[d],e._data==this._startRowItem&&this.OnStartRowItemChanged(),e._data==this._endRowItem&&this.OnEndRowItemChanged()};b.prototype.DependencyTypeChanged=function(){this.SetupStartTimeBinding();
this.SetupEndTimeBinding()};b.prototype.StartRowItemChanged=function(){this.OnStartRowItemChanged()};b.prototype.OnStartRowItemChanged=function(){this.UpdateStartAndEndFlexyNodeData()};b.prototype.SetupStartIndexBinding=function(){if(null!=this._startRowItem){null==this.StartFlexyNodeData&&(this.StartFlexyNodeData=this._fg.FlatItemsSource.GetItemFromDataSource(this._startRowItem));var a=this.StartFlexyNodeData;null==a?this.StartRowIndex_M(-1):new Binding(a,"DisplayIndex",this,"StartRowIndex")}};b.prototype.EndRowItemChanged=
function(){this.OnEndRowItemChanged()};b.prototype.OnEndRowItemChanged=function(){this.UpdateStartAndEndFlexyNodeData()};b.prototype.UpdateStartAndEndFlexyNodeData=function(){if(null!=this._startRowItem){null==this.StartFlexyNodeData&&(this.StartFlexyNodeData=this._fg.FlatItemsSource.GetItemFromDataSource(this._startRowItem));var a=this.StartFlexyNodeData;null==a?this.StartRowIndex_M(-1):new Binding(a,"DisplayIndex",this,"StartRowIndex")}null!=this._endRowItem&&(null==this.EndFlexyNodeData&&(this.EndFlexyNodeData=
this._fg.FlatItemsSource.GetItemFromDataSource(this._endRowItem)),a=this.EndFlexyNodeData,null==a?this.EndRowIndex_M(-1):new Binding(a,"DisplayIndex",this,"EndRowIndex"))};b.prototype.SetupEndIndexBinding=function(){if(null!=this._endRowItem){null==this.EndFlexyNodeData&&(this.EndFlexyNodeData=this._fg.FlatItemsSource.GetItemFromDataSource(this._endRowItem));var a=this.EndFlexyNodeData;null==a?this.EndRowIndex_M(-1):new Binding(a,"DisplayIndex",this,"EndRowIndex")}};b.prototype.DisplayIndexChanged=
function(){this.OnVerticalPositionChanged()};b.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this,"")};b.prototype.VerticalPositionChanged=new ObjectEvent("VerticalPositionChanged");b.prototype.GetStartItemScheduleToPlotWith=function(a){if(null!=this.StartFlexyNodeData){var b=this.StartFlexyNodeData.HierarchicalItem.ResourceSchedule_M();if(null!=b)return b}return a};b.prototype.GetEndItemScheduleToPlotWith=function(a){if(null!=
this.EndFlexyNodeData){var b=this.EndFlexyNodeData.HierarchicalItem.ResourceSchedule_M();if(null!=b)return b}return a};b.prototype.Visibility_M=function(){return!0};b.prototype._startRowIndex=-1;b.prototype._endRowIndex=-1;b.prototype._startItem=null;b.prototype._startTime=Date.MinValue.clone();b.prototype._endItem=null;b.prototype._endTime=Date.MinValue.clone();b.prototype._dependencyType=null;b.prototype._isHighlighted=!1;b.prototype._isRelatedItemHighlighted=!1;b.prototype._isEndFixedShape=!1;
b.prototype._isStartFixedShape=!1;b.prototype._startRowItem=null;b.prototype._endRowItem=null;b.prototype._startItemPosAdjustment={X:0,Y:0};b.prototype._endItemPosAdjustment={X:0,Y:0};b.prototype.StartRowIndex_M=function(a){if(0==arguments.length)return this._startRowIndex;this._startRowIndex=a;this.DisplayIndexChanged()};b.prototype.EndRowIndex_M=function(a){if(0==arguments.length)return this._endRowIndex;this._endRowIndex=a;this.DisplayIndexChanged()};b.prototype.StartItem_M=function(a){if(0==arguments.length)return this._startItem;
this._startItem=a;this.PropertyChanged.raise(this,{PropertyName:"StartItem"});this._startTimeBinding&&this._startTimeBinding.Dispose();a&&this.SetupStartTimeBinding()};b.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;this._startTime=a;this.PropertyChanged.raise(this,{PropertyName:"StartTime"})};b.prototype.EndItem_M=function(a){if(0==arguments.length)return this._endItem;this._endItem=a;this.PropertyChanged.raise(this,{PropertyName:"EndItem"});this._endTimeBinding&&
this._endTimeBinding.Dispose();a&&this.SetupEndTimeBinding()};b.prototype.EndTime_M=function(a){if(0==arguments.length)return this._endTime;this._endTime=a;this.PropertyChanged.raise(this,{PropertyName:"EndTime"})};b.prototype.DependencyType_M=function(a){if(0==arguments.length)return this._dependencyType;this._dependencyType=a;this.DependencyTypeChanged()};b.prototype.IsHighlighted_M=function(a){if(0==arguments.length)return this._isHighlighted;this._isHighlighted=a;this.PropertyChanged.raise(this,
{PropertyName:"IsHighlighted"})};b.prototype.IsRelatedItemHighlighted_M=function(a){if(0==arguments.length)return this._isRelatedItemHighlighted;this._isRelatedItemHighlighted=a;this.PropertyChanged.raise(this,{PropertyName:"IsRelatedItemHighlighted"})};b.prototype.IsEndFixedShape_M=function(a){if(0==arguments.length)return this._isEndFixedShape;this._isEndFixedShape=a;this.PropertyChanged.raise(this,{PropertyName:"IsEndFixedShape"})};b.prototype.IsStartFixedShape_M=function(a){if(0==arguments.length)return this._isStartFixedShape;
this._isStartFixedShape=a;this.PropertyChanged.raise(this,{PropertyName:"IsStartFixedShape"})};b.prototype.StartRowItem_M=function(a){if(0==arguments.length)return this._startRowItem;this._startRowItem=a;this.StartRowItemChanged()};b.prototype.EndRowItem_M=function(a){if(0==arguments.length)return this._endRowItem;this._endRowItem=a;this.EndRowItemChanged()};b.prototype.StartItemPosAdjustment_M=function(a){if(0==arguments.length)return this._startItemPosAdjustment;this._startItemPosAdjustment=a;this.DisplayIndexChanged()};
b.prototype.EndItemPosAdjustment_M=function(a){if(0==arguments.length)return this._endItemYPosAdjustment;this._endItemYPosAdjustment=a;this.DisplayIndexChanged()};b.prototype.EndItemXPosAdjustment_M=function(a){if(0==arguments.length)return this._endItemXPosAdjustment;this._endItemXPosAdjustment=a;this.notifyChange("EndItemXPosAdjustment",a)};b.prototype.Dispose=function(){};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.prototype,"StartRowIndex",{get:function(){return this.StartRowIndex_M()},
set:function(a){this.StartRowIndex_M(a)}}),Object.defineProperty(b.prototype,"EndRowIndex",{get:function(){return this.EndRowIndex_M()},set:function(a){this.EndRowIndex_M(a)}}),Object.defineProperty(b.prototype,"StartItem",{get:function(){return this.StartItem_M()},set:function(a){this.StartItem_M(a)}}),Object.defineProperty(b.prototype,"StartTime",{get:function(){return this.StartTime_M()},set:function(a){this.StartTime_M(a)}}),Object.defineProperty(b.prototype,"EndItem",{get:function(){return this.EndItem_M()},
set:function(a){this.EndItem_M(a)}}),Object.defineProperty(b.prototype,"EndTime",{get:function(){return this.EndTime_M()},set:function(a){this.EndTime_M(a)}}),Object.defineProperty(b.prototype,"DependencyType",{get:function(){return this.DependencyType_M()},set:function(a){this.DependencyType_M(a)}}),Object.defineProperty(b.prototype,"IsHighlighted",{get:function(){return this.IsHighlighted_M()},set:function(a){this.IsHighlighted_M(a)}}),Object.defineProperty(b.prototype,"IsRelatedItemHighlighted",
{get:function(){return this.IsRelatedItemHighlighted_M()},set:function(a){this.IsRelatedItemHighlighted_M(a)}}),Object.defineProperty(b.prototype,"IsEndFixedShape",{get:function(){return this.IsEndFixedShape_M()},set:function(a){this.IsEndFixedShape_M(a)}}),Object.defineProperty(b.prototype,"IsStartFixedShape",{get:function(){return this.IsStartFixedShape_M()},set:function(a){this.IsStartFixedShape_M(a)}}),Object.defineProperty(b.prototype,"StartRowItem",{get:function(){return this.StartRowItem_M()},
set:function(a){this.StartRowItem_M(a)}}),Object.defineProperty(b.prototype,"EndRowItem",{get:function(){return this.EndRowItem_M()},set:function(a){this.EndRowItem_M(a)}}),Object.defineProperty(b.prototype,"StartItemPosAdjustment",{get:function(){return this.StartItemPosAdjustment_M()},set:function(a){this.StartItemPosAdjustment_M(a)}}),Object.defineProperty(b.prototype,"EndItemPosAdjustment",{get:function(){return this.EndItemPosAdjustment_M()},set:function(a){this.EndItemPosAdjustment_M(a)}}),
Object.defineProperty(b.prototype,"EndItemXPosAdjustment",{get:function(){return this.EndItemXPosAdjustment_M()},set:function(a){this.EndItemXPosAdjustment_M(a)}}));RadiantQ.FlexyGantt.FGDependencyView=b})(jQuery);
(function(f){var b=RadiantQ.FlexyGantt.FGDependencyView;(function(a){var b=function(a){function b(c,e){a.apply(this);this._dataSource=null;this._collections=[];this.HiddenList=[];this._dependencyViewsByRowId=new RadiantQ.Dictionary;this._dependencyViewsById=new RadiantQ.Dictionary;this.fg=e;this.DataSource(c)}__extends(b,a);return b}(RadiantQ.RQ_CollectionChangeNotifier);a.FGDependencyViewList=b})(RadiantQ.FlexyGantt);var e=RadiantQ.FlexyGantt;e.FGDependencyViewList.prototype.DataSource=function(a){if(0==
arguments.length)return this._dataSource;this._dataSource!=a&&(null!=this._dataSource&&this.UnwireDataSourceEvents(),this._dataSource=a,null!=this._dataSource&&this.WireDataSourceEvents(),this.UpdateList())};e.FGDependencyViewList.prototype.UnwireDataSourceEvents=function(){var a=this._dataSource;null!=a&&a.CollectionChanged&&a.CollectionChanged.unsubscribe(this.NotifyingDataSource_CollectionChanged,this)};e.FGDependencyViewList.prototype.WireDataSourceEvents=function(){var a=this._dataSource;null!=
a&&(a.CollectionChanged?a.CollectionChanged.subscribe(this.NotifyingDataSource_CollectionChanged,this):f.observable(a).bind("insert remove replaceAll",this.NotifyingDataSource_CollectionChanged.bind(this)))};e.FGDependencyViewList.prototype.Dispose=function(){this.DataSource(null)};e.FGDependencyViewList.prototype.NotifyingDataSource_CollectionChanged=function(a,b){switch(a.type){case "insert":case "Add":this.OnItemsAdded(b.items);break;case "remove":case "Remove":this.OnItemsRemoved(b.items,b.index);
break;case "replaceAll":case "Reset":this.UpdateList()}};e.FGDependencyViewList.prototype.UpdateList=function(){for(var a=0;a<this.length;a++){var b=this[a];b.Dispose();b.VerticalPositionChanged.unsubscribe(this.depView_VerticalPositionChanged,this)}this._dependencyViewsByRowId=new RadiantQ.Dictionary;this._dependencyViewsById=new RadiantQ.Dictionary;this.splice(0,this.length);if(null!=this._dataSource)for(a=0;a<this._dataSource.length;a++)this.OnAddItem(this._dataSource[a])};e.FGDependencyViewList.prototype.OnItemsAdded=
function(a){for(var b=0;b<a.length;b++)this.OnAddItem(a[b])};e.FGDependencyViewList.prototype.OnAddItem=function(a){a=new b(a,this.fg);a.VerticalPositionChanged.subscribe(this.depView_VerticalPositionChanged,this);this.push(a);var c=this._dependencyViewsById[a._guid];if(null==c||void 0==c)a.StartFlexyNodeData&&((c=this._dependencyViewsByRowId[a.StartFlexyNodeData._guid])?c.push(a):this._dependencyViewsByRowId.Add(a.StartFlexyNodeData._guid,[a])),a.EndFlexyNodeData&&a.StartFlexyNodeData!=a.EndFlexyNodeData&&
((c=this._dependencyViewsByRowId[a.EndFlexyNodeData._guid])?c.push(a):this._dependencyViewsByRowId.Add(a.EndFlexyNodeData._guid,[a])),this._dependencyViewsById.Add(a._guid,a)};e.FGDependencyViewList.prototype.OnItemsRemoved=function(a,b){for(var d=0;d<a.length;d++)this.OnRemoveItem(a[d],b+d)};e.FGDependencyViewList.prototype.OnRemoveItem=function(a,b){var d=this[b];if(null!=d){if(d.StartFlexyNodeData){var e=this._dependencyViewsByRowId[d.StartFlexyNodeData._guid],f=e.indexOf(d);1<e.length&&-1!=f?
e.splice(f,1):this._dependencyViewsByRowId.Remove(d.StartFlexyNodeData._guid)}d.EndFlexyNodeData&&d.StartFlexyNodeData!=d.EndFlexyNodeData&&(e=this._dependencyViewsByRowId[d.EndFlexyNodeData._guid],f=e.indexOf(d),1<e.length&&-1!=f?e.splice(f,1):this._dependencyViewsByRowId.Remove(d.EndFlexyNodeData._guid));this._dependencyViewsById.Remove(d._guid);this.splice(b,1);d.VerticalPositionChanged.unsubscribe(this.depView_VerticalPositionChanged,this)}};e.FGDependencyViewList.prototype.depView_VerticalPositionChanged=
function(a,b){if(-1==a.StartRowIndex&&-1==a.EndRowIndex){this.HiddenList.push(a);var d=this.indexOf(a);RQArray.prototype.splice.call(this,d,1)}else d=this.HiddenList.indexOf(a),-1!=d&&(this.HiddenList.splice(d,1),RQArray.prototype.push.call(this,a))};DepListToDepViewListConverter=function(a){this._fg=a;this.Convert=function(a){return null==this._fg.FlatItemsSource||null==a?null:new e.FGDependencyViewList(a,this._fg)}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.timespinner={options:{step:1,page:60,change:null,start:new Date,minuteincrement:30,current:null},TimeFormat:/^([0][0-9]|[1][0-2]|\d)(((:[0-5]\d)(\s?[aApP][mM]))|(\s?[aApP][mM])|$)$/,TimeFormat24Hrs:/^([0-1]?[0-9]|2[0-3])(:[0-5][0-9])?$/,_parse:function(b){if("string"===typeof b&&Number(b)===b){b=this.GetHourAndMinute(b);var e=this.options.start;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),+b.hour,+b.minute,0,0)}return this.options.start},disable:function(b){b?
(this.element.prop("disabled",b),this.uiSpinner.addClass("disableStyle"),f(".ui-spinner-button",this.element.parent()).css("display","none")):(this.element.prop("disabled",b),this.uiSpinner.removeClass("disableStyle"),f(".ui-spinner-button",this.element.parent()).css("display","block"))},_format:function(b){var e=Date.CultureInfo.formatPatterns.shortTime;this.options.current=b.toString(e);return(new Date(b)).toString(e)},_increment:function(b,e){this.options.start=b.addMinutes(this.options.minuteincrement*
e);return this.options.start},_setOption:function(b,e){f.Widget.prototype._setOption.apply(this,arguments)},_value:function(b,e){var a;""!==b&&(a=this._parse(b),null!==a&&(b=this._format(a)));this.element.val(b);this._refresh()},getTime:function(){return this.element.val().toString()},getRoundDate:function(b){var e=this.element.val(),a=this.GetHourAndMinute(e);!1==this.TimeFormat.test(e)&&!1==this.TimeFormat24Hrs.test(e)&&(a=this.GetHourAndMinute(this.options.current));return new Date(b.getFullYear(),
b.getMonth(),b.getDate(),+a.hour,+a.minute,this.options.start.getSeconds(),0)},setTime:function(b){this.options.start=null!=b?new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),0):new Date(0,0,0,0,0,0,0);this._refresh();this._value(b)},_spin:function(b,e){var a=this.value()||0;this.counter||(this.counter=1);"string"===typeof a||-1==b&&0==a.totalMilliseconds||(a=this._increment(a,b));this.spinning&&!1===this._trigger("spin",e,{value:a})||(this._value(a,!0),
this.counter++)},_events:{keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault();this.element.val()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.options.current=this.element.val()},blur:function(b){this._refresh();this.uiSpinner.removeClass("ui-state-active");var e=this.element.val(),a=!1;if(!0==this.TimeFormat.test(e)||!0==this.TimeFormat24Hrs.test(e)){var a=!0,c=this.GetHourAndMinute(e),d=this.options.start;this.options.start=new Date(d.getFullYear(),
d.getMonth(),d.getDate(),+c.hour,+c.minute,0,0)}!1==a&&this.element.val(this.options.current);this.options.current!==e&&this._trigger("change",b)}},GetHourAndMinute:function(b){var e=b.split(":"),a=parseInt(e[0],10),c=0;b=-1!=b.toLowerCase().indexOf("pm")?"pm":"am";2==e.length&&(c=parseInt(e[1]));return b&&"pm"==b&&12!=a?{hour:a+12,minute:c}:{hour:a,minute:c}},_destroy:function(){f.ui.spinner.prototype._destroy.apply(this,arguments);this._off(this._events)}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.DurationPicker={options:{minutes:30},TimeSapanWithDay:/^(\d*.\d{2}:\d{2}:\d{2})$/,TimeSapanWithoutday:/^(\d{2}:\d{2}:\d{2})$/,_create:function(){this.element.addClass("radiantq.DurationPicker");f.ui.spinner.prototype._create.apply(this,arguments)},_parse:function(b){return"string"===typeof b&&(this.TimeSapanWithDay.test(b)||this.TimeSapanWithoutday.test(b))?RQTimeSpan.parse(b):b},_increment:function(b,e){var a=RQTimeSpan.Zero_M();0==b&&(b=a);var c=b.addMinutes(this.options.minutes*
e);return c<a?a:c},_value:function(b,e){var a;""!==b&&(a=this._parse(b),null!==a&&(b=this._format(a)));this.element.val(b);this._refresh()},GetDuration:function(){return this._parse(this.element.val())},_spin:function(b,e){var a=this.value()||0;this.counter||(this.counter=1);"string"===typeof a||-1==b&&0==a.totalMilliseconds_M()||(a=this._increment(a,b));this.spinning&&!1===this._trigger("spin",e,{value:a})||(this._value(a,!0),this.counter++)},disable:function(b){b?(this.element.prop("disabled",b),
this.buttons.button("disable")):(this.element.prop("disabled",b),this.buttons.button("enable"))},_events:{click:function(b){""==this.element.val()&&this.element.val("00:00:00")},keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.previous=this.element.val()},blur:function(b){if(this.cancelBlur)delete this.cancelBlur;else{this._refresh();this.uiSpinner.removeClass("ui-state-active");var e=this.element.val(),
a=!1;!0==this.TimeSapanWithDay.test(e)&&!1==this.TimeSapanWithoutday.test(e)?a=!0:!1==this.TimeSapanWithDay.test(e)&&!0==this.TimeSapanWithoutday.test(e)&&(a=!0);!1==a&&this.element.val(this.previous);this.previous!==e&&this._trigger("change",b)}},mousewheel:function(b,e){if(e){if(!this.spinning&&!this._start(b))return!1;this._spin((0<e?1:-1)*this.options.step,b);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(b)},100);b.preventDefault()}},
"mousedown .ui-spinner-button":function(b){function e(){this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=a,this._delay(function(){this.previous=a}))}var a;a=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();e.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;e.call(this)});!1!==this._start(b)&&this._repeat(null,f(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop",
"mouseenter .ui-spinner-button":function(b){if(f(b.currentTarget).hasClass("ui-state-active")){if(!1===this._start(b))return!1;this._repeat(null,f(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_format:function(b){return b.toString()}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.DateTimePicker={options:{setdate:null,dateformat:"mm-dd-yy",minuteincrement:30,Visibility:"block"},wrapper:null,timePicker:null,activeElement:function(){try{return document.activeElement}catch(b){return document.documentElement.activeElement}},isInSameObject:function(b){b=b||f(this.activeElement());var e=b.parents(".datetimepicker");return e.length&&e[0]==this.wrapper[0]?!0:(e=this.element.data("datepicker"))&&b.closest(".ui-datepicker")[0]==e.dpDiv[0]?!0:!1},changeTime:null,
_create:function(){var b=this;this.element.data("DateTimePicker",this);var e=null,a=0;this.element.addClass("datetimepicker");this.wrapper=f('<div class="datetimepicker wrapper" style="height:inherit;width:inherit"></div>');this.timePicker=f('<input id="time" class="spinner" value="00:00 AM"/>');this.element.wrap(this.wrapper);this.wrapper=this.element.parent();this.wrapper.append(this.timePicker);var c=this.timePicker;this.element.focusin(function(){b.docClickProxy||(b.docClickProxy=f.proxy(b._checkExternalClick,
b),f(document).bind("mousedown",b.docClickProxy))});this.element.datepicker({dateFormat:this.options.dateformat,onSelect:function(){e=a=f(this).datepicker("getDate");b.timePicker.focus()}}).on("change",function(a){RegExp(/\b\d{1,2}[\/-]\d{1,2}[\/-]\d{4}\b/).test(this.value)?b._trigger("onBlur"):(f(this).datepicker("setDate",new Date(e)),a.preventDefault())});this.timePicker.bind("blur.datetimepicker",function(){b.element.is(":focus")||b._trigger("onBlur")}).focusin(function(){b.element.datepicker("hide")});
b=this;c.timespinner({start:new Date(0,0,0,0,0,0,0),minuteincrement:b.options.minuteincrement});this.RefreshWidthandHeight()},_checkExternalClick:function(b){f.datepicker._curInst&&!1==this.isInSameObject(f(b.target))&&(this.element.datepicker("hide"),this._trigger("onBlur"),this.docClickProxy&&(f(document).unbind("mousedown",this.docClickProxy),this.docClickProxy=null))},getDate:function(){var b=this.element.datepicker("getDate");return null!=b?this.timePicker.timespinner("getRoundDate",b):b},setDate:function(b){if(null!=
b){var e=this.element.DateTimePicker("getDate");this.element.datepicker("setDate",new Date(b));this.timePicker.timespinner("setTime",new Date(b));null!=e?b.equals(e)||this._trigger("onBlur"):this._trigger("onBlur")}else this.element.datepicker("setDate",b),this.timePicker.timespinner("setTime",b)},disable:function(b){this.element.prop("disabled",b);this.timePicker.timespinner("disable",b)},visibility:function(b){this.wrapper.css("display",b);this.options.Visibility=b},widget:function(){return this.element.parent()},
RefreshWidthandHeight:function(){var b=this.element,e=this.timePicker.timespinner("widget"),a=e.find("input");b.css({margin:"0px",width:"46%"});e.css({"vertical-align":"top",width:"46%"});a.css({width:"inherit",margin:"2px",width:"80%","vertical-align":"top"})},_destroy:function(){this.element.datepicker("hide");f.Widget.prototype._destroy.apply(this,arguments);f(document).unbind("mousedown",this.res);this.timePicker.unbind("blur.datetimepicker");this.element.unwrap();this.timePicker.remove()}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.ResourcePicker={version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},position:{my:"left top",at:"left bottom",collision:"none"},SelectedResources:null,delay:0,source:null,minLength:0,dropDownMinHeight:150,dropDownHeight:"auto",disabled:!1},overLay:null,_create:function(){function b(a,b){0<=a&&a<=$menuElemets.length-1?($menuElemets.removeClass("item-focus"),f($menuElemets[a]).addClass("item-focus"),
e.menu._scrollIntoView(f($menuElemets[a]))):!1==b?e.menu._scrollIntoView(f($menuElemets[$menuElemets.length-1])):e.menu._scrollIntoView(f($menuElemets[0]))}var e=this;e.uiGridTableBody=f(e.element).parents(".ui-grid-body-table tbody");e.VWGrid=e.uiGridTableBody.data("VWGrid");e.resourceContainer=f(e.element).parents(".editor");e.element.focus();e.element.attr("readonly",!0);e.changedItems=[];e.selectedItems=[];e._draw();e._on(this._events);e.selectedItems=[];var a=f("<ul class='multi-select-menu' style='overflow:auto'>").addClass("ui-autocomplete ui-front").appendTo(e._appendTo()).menu({role:null}).hide();
e.menu=a.data("uiMenu");e.menu||(e.menu=a.data("ui-menu"));e.menu._scrollIntoView=function(a){if(a.length){var b,g,h;e.menu._hasScroll()&&(b=parseFloat(f.css(e.menu.activeMenu[0],"borderTopWidth"))||0,g=parseFloat(f.css(e.menu.activeMenu[0],"paddingTop"))||0,b=a.offset().top-e.menu.activeMenu.offset().top-b-g,g=this.activeMenu.scrollTop(),h=this.activeMenu.height(),a=a.height(),0>b?e.menu.activeMenu.scrollTop(g+b):b+a>h&&e.menu.activeMenu.scrollTop(g+b-h+a))}};e.element.data("ResourcePicker",this);
e.element.addClass("ResourcePicker");e.updateSelectedItem();e.overLay=f('<div class="overlay" ></div>');f(".ui-spinner-button",e.element);e.resourceContainer.bind("keydown.keyEvents",function(a){var b=a.keyCode||a.which;if(13==a.keyCode){var b=e.element.parents("td"),g=e.wasOpen;e.hideMenu();g?(a.preventDefault(),a.stopPropagation()):e.close();b.mouseup()}else 9==a.keyCode?(b=e.element.parents("td"),g=b.parent(),a=g.parent(),b=b[0].cellIndex,g=g[0].rowIndex,e.close(),g=f("tr",a).eq(g),b=f("td:not(.rq-hierarchy-cell)",
g).eq(b),b.mouseup(function(a){e.VWGrid.prepareEdit(a)}).mouseup()):32==b&&(a.preventDefault(),a.stopPropagation(),f(".selectBox",f($menuElemets[e.selectedIndex])).click())});e.uiGridTableBody.bind("keydown.keyEvents",function(a){var d=a.keyCode||a.which;40==d?(a.preventDefault(),a.stopPropagation(),e.wasOpen?(e.selectedIndex++,e.selectedIndex>$menuElemets.length-1&&(e.selectedIndex=$menuElemets.length-1),b(e.selectedIndex,!1)):(e._trigger("open"),e.open())):38==d?(a.preventDefault(),a.stopPropagation(),
e.selectedIndex--,0>e.selectedIndex&&(e.selectedIndex=0),b(e.selectedIndex,!0)):32==d?(a.preventDefault(),a.stopPropagation(),f(".selectBox",f($menuElemets[e.selectedIndex])).click()):9==d&&e.hideMenu()});e._trigger("open");e._trigger("close")},setMenuHeight:function(){var b=this.options.dropDownHeight,e=this.options.dropDownMinHeight;this.menu.element.height()>=e&&(b=e);this.menu.element.css("height",b)},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?f(b):this.document.find(b).eq(0));
b&&b[0]||(b=this.element.closest(".ui-front"));b.length||(b=this.document[0].body);return b},selectedItems:null,changedItems:null,createAutoComplet:function(){this.updateSelectedItem()},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},guid:function(){var b="",e,a;for(e=0;32>e;e++){a=16*Math.random()|0;if(8==e||12==e||16==e||20==e)b+="-";b+=(12==e?4:16==e?a&3|8:a).toString(16)}return b},renderCondent:function(b){var e="",a=
this.guid;this.guids=[];for(var c=this.options.source,d=0;d<c.length;d++){var g=c[d],f=a();this.guids[f]=g;e+="<div style='height:20px' class='rq-grid-resourcepicker-item' aria-label ='"+g.toString()+"'><span><input class='selectBox' id='"+f+"' data-guid='"+f+"' type='checkbox' "+(-1!=RQArray.prototype.indexOf.call(this.selectedItems,g)?"checked":"")+" /> <label for='"+f+"'>"+g.toString()+"</label></span></div>"}b[0].innerHTML=e},guids:[],$menuElemets:null,selectedIndex:-1,open:function(){var b=this,
e=b.menu.element.empty();b.renderCondent(e);b.menu.refresh();b.setMenuHeight();e.show();this._resizeMenu();e.position(f.extend({of:this.element},this.options.position));f(".multi-select-menu").height()+f("input.ResourcePicker").offset().top>f("#gantt_container").height()-50&&(e=f("input.ResourcePicker").offset().top-(f(".multi-select-menu").height()+3),f(".multi-select-menu").css({top:e+"px"}));b.wasOpen=!0;f("body").append(this.overLay);this.triggerCloseAndChangeCallback=f.proxy(this.triggerCloseAndChange,
this);this.overLay.bind("mousedown",this.triggerCloseAndChangeCallback);$menuElemets=f(".rq-grid-resourcepicker-item",b.menu.element);$menuElemets.click(function(){$menuElemets.removeClass("item-focus");b.selectedIndex=f(this).index();f($menuElemets[b.selectedIndex]).addClass("item-focus")});b.menu.element.find(".selectBox").bind("click",function(a){if(!0==b.wasOpen&&(a=f(a.target),a.hasClass("selectBox"))){var c=a.data("guid"),c=b.guids[c],d=RQArray.prototype.indexOf.call(b.selectedItems,c);!0==
a[0].checked&&-1==d?(a=RQArray.prototype.indexOf.call(b.changedItems,c),b.selectedItems.push(c),-1!=a?b.changedItems.splice(a,1):b.changedItems.push(c)):-1!=d&&(d=RQArray.prototype.indexOf.call(b.selectedItems,c),a=RQArray.prototype.indexOf.call(b.changedItems,c),b.selectedItems.splice(d,1),-1!=a?b.changedItems.splice(a,1):b.changedItems.push(c));b.updateDispalyText()}})},IsChanged:function(){return 0<this.changedItems.length},close:function(){this.hideMenu();this._trigger("destroy");f(document).unbind(".keyEvents");
this.selectedIndex=-1},hideMenu:function(){this.menu.element.empty();this.menu.element.hide();this.wasOpen=!1;this.overLay.unbind("mousedown",this.triggerCloseAndChangeCallback);this.overLay.remove();this.selectedIndex=-1;this._trigger("close");this.element.focus()},wasOpen:null,disable:function(b){b?this.element.prop("disabled",!1):this.element.prop("disabled",!0)},updateDispalyText:function(){for(var b=this.element,e=this.selectedItems.sort(),a="",c=0;c<e.length;c++)a+=e[c].toString()+",";b.val(a.replace(/\,$/,
""))},updateSelectedItem:function(){var b=this.options.SelectedResources;if(null!=b)for(var e=0;e<b.length;e++)this.selectedItems.push(b[e]);this.updateDispalyText()},selected:function(b,e){var a=b.data,c=f(this).closest(".rq-grid-resourcepicker-item").data("item"),d=-1,g=-1;!0==this.checked?(g=RQArray.prototype.indexOf.call(a.changedItems,c),a.selectedItems.push(c),-1!=g?a.changedItems.splice(g,1):a.changedItems.push(c)):(d=RQArray.prototype.indexOf.call(b.data.selectedItems,c),g=RQArray.prototype.indexOf.call(b.data.changedItems,
c),b.data.selectedItems.splice(d,1),-1!=g?b.data.changedItems.splice(g,1):b.data.changedItems.push(c));b.data.updateDispalyText()},_events:{"mousedown .ui-spinner-button":function(b){this.wasOpen=this.overLay.is(":visible")},"click .ui-spinner-button":function(){this.wasOpen?this.close():this.open()}},_draw:function(){var b=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(f(this._buttonHtml()).css("height","100%"));this.element.attr("role",
"spinbutton");this.buttons=b.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.options.disabled&&this.disable()},triggerCloseAndChange:function(b){this.close()},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_setOption:function(b,e){f.Widget.prototype._setOption.apply(this,
arguments);switch(b){case "SelectedResources":this.updateSelectedItem();break;case "source":this.changedItems=[],this.selectedItems=[]}},_destroy:function(){this.resourceContainer.unbind("keydown.keyEvents");this.uiGridTableBody.unbind("keydown.keyEvents");this.overLay.unbind("mousedown",this.triggerCloseAndChangeCallback);f(document).unbind(".keyEvents");this.overLay.remove();this.triggerCloseAndChangeCallback&&(f(this.document[0].documentElement).unbind("mousedown",this.triggerCloseAndChangeCallback),
this.triggerCloseAndChangeCallback=null);this.menu.element.remove();this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},widget:function(){return this.uiSpinner}}})(jQuery);
(function(f){var b,e;e=b=!1;RadiantQ.Gantt.RowDragDropTracker=function(a){function c(a,b){G.options.CanUserReorderRows&&!G._isReadOnly&&0!=N.element.width()&&0!=N.element.height()&&(x||0==G.SelectedItems.length?null!=_timer&&clearTimeout(_timer):(null!=_timer&&clearTimeout(_timer),_timer=setTimeout(function(){O||(O=!0,d());if(null!=B){f(B).unbind(".rowHeaderMouseEvents");if(G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragElement){var a=f(B).find(".row-dragger");a.length&&(a.unbind("mousedown.handleCueMouseDown"),
a.unbind("mouseup.handleCueMouseDown"))}G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow&&(f(B).unbind("mousedown.handleCueMouseDown"),f(B).unbind("mouseup.handleCueMouseDown"))}G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow&&(f(B).unbind(".handleCueMouseDown"),f(document).unbind(".handleCueMouseDown"),f(B).unbind(".handleCueMouseDown"));if(N.GetRowFromData(G.SelectedItems[0])&&(a=N.GetRowFromData(G.SelectedItems[0]))){G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&
(B=a[0].firstChild,f(B).bind("mouseenter.rowHeaderMouseEvents",function(){!1!=_isRowsDraggable&&!0!=G.PreventDefaultFns&&(null!=_topSelectedIndex&&void 0!=_topSelectedIndex?x||u.css("display","block"):u.css("display","block"))}).bind("mouseleave.rowHeaderMouseEvents",function(){u.css("display","none")}).dblclick(function(a){a.preventDefault();a.stopPropagation()}));if(G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow||G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragElement)B=
a;0<G.SelectedItems.length&&h(null,G.SelectedItems)}}.bind(this),0)))}function d(){u=f('<div class="handleCue rq-dnd-handleCue"></div>');v=f('<div class="avoidCue rq-dnd-avoidCue" style="align:center; pointer-events:none;"></div>');$gridBody=f(".ui-grid-body",G.element);$lockedGridBody=f(".ui-body-frozen-div",G.element);z=f('<div style="display:none; pointer-events:none; width:100%; border:1.2px solid black; position:absolute;"></div>');y=z.clone();$lockedGridBody.prepend(z);$gridBody.prepend(y);
$gridBody.append(v);z=z.add(y);$lockedGridBody.append(v)}function g(a,b){if(!0==b)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var c=a.originalEvent.touches[0].pageX,d=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)c=a.originalEvent.touches[0].clientX,d=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)c=a.pageX,d=a.pageY;else if(a.clientX||a.clientY)c=a.clientX,d=a.clientY;return{x:c,y:d}}function h(a,
b){if(b&&!x){f(".ui-grid-body",E.element);P=b;var c=N.GetRowFromData(P[0]);_topSelectedIndex=E.options.UseVirtualization?P[0].DisplayIndex_M?P[0].DisplayIndex_M():P[0].DisplayIndex():c[0].rowIndex;-1!=_topSelectedIndex&&((_isRowsDraggable=n(_topSelectedIndex))&&_isRowHeaderClicked?u.css("display","block"):u.css("display","none"));$itempeer=Z=c;G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&(f(B).append(u),u.unbind(".handleCueMouseDown"),u.bind("mousedown.handleCueMouseDown",
function(a){k(a)}),u.bind("touchstart.handleCueMouseDown",function(a){k(a)}));if(G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragElement){var d=0,e=function(a){4<=Math.abs(g(a,!1).y-d)&&(f(document).unbind("mousemove.handleCueMouseDown"),m(a))},h=f(B).find(".row-dragger");h.length&&(h.bind("mousedown.handleCueMouseDown",function(a){d=g(a,!1).y;f(document).bind("mousemove.handleCueMouseDown",e)}),h.bind("mouseup.handleCueMouseDown",function(a){f(document).unbind(".handleCueMouseDown");
h.unbind(".handleCueMouseDown")}))}G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow&&(d=0,e=function(a){4<=Math.abs(g(a,!1).y-d)&&(f(document).unbind("mousemove.handleCueMouseDown"),m(a))},f(B).bind("mousedown.handleCueMouseDown",function(a){d=g(a,!1).y;f(document).bind("mousemove.handleCueMouseDown",e)}),f(B).bind("mouseup.handleCueMouseDown",function(a){f(document).unbind(".handleCueMouseDown");f(B).unbind(".handleCueMouseDown")}))}}function m(a){a=$itempeer.position().top;
z.css("top",a);b=e=_isRowsDraggable=x=!0;J=E.$ganttWrapper.data("GanttRowselectable");p();R.bind("mouseenter.RowDragDropTracker",function(a){_isRowsDraggable&&(b=!0,v.css("display","none"),C?z.css("display","none"):z.css("display","block"))});R.bind("mouseleave.RowDragDropTracker",function(a){if(_isRowsDraggable){b=!1;var c=f(a.target).closest("tr.rq-grid-row"),d=R[0].offsetTop+R.height();a.pageY>d||0==c.length?v.css({top:d}):v.css({top:c.position().top+4});z.css("display","none");v.css("display",
"block")}});R.bind("mousemove.RowDragDropTracker",function(a){l(a)});R.bind("touchmove.RowDragDropTracker",function(a){b=Q=!0;var c;if(void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches)c=f(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr");c.hasClass("rq-grid-row")?l(a):(b=!1,v.css({top:Z.position().top+4}),z.css("display","none"),v.css("display","block"));a.preventDefault();a.stopPropagation()});
f(document).unbind(".RowDragDropTracker");f(document).bind("mouseup.RowDragDropTracker",function(a){x=!1;Q=!0;q()});f(document).bind("touchend.RowDragDropTracker",function(a){window.console&&console.log("end event");x=!1;Q=!0;q();b=!1});f(document).bind("keyup.RowDragDropTracker",function(a){Q=!0;27==a.keyCode&&(t(),A=!1)});f(document).bind("keydown.RowDragDropTracker",function(a){27==a.keyCode&&(C=A=!0)})}function k(a){a=$itempeer.position().top;z.css("top",a);b=e=_isRowsDraggable=x=!0;J=E.$ganttWrapper.data("GanttRowselectable");
p();R.bind("mouseenter.RowDragDropTracker",function(a){_isRowsDraggable&&(b=!0,v.css("display","none"),C?z.css("display","none"):z.css("display","block"))});R.bind("mouseleave.RowDragDropTracker",function(a){if(_isRowsDraggable){b=!1;var c=f(a.target).closest("tr.rq-grid-row"),d=R[0].offsetTop+R.height();a.pageY>d||0==c.length?v.css({top:d}):v.css({top:c.position().top+4});z.css("display","none");v.css("display","block")}});R.bind("mousemove.RowDragDropTracker",function(a){l(a)});R.bind("touchmove.RowDragDropTracker",
function(a){b=Q=!0;var c;if(void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches)c=f(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr");c.hasClass("rq-grid-row")?l(a):(b=!1,v.css({top:Z.position().top+4}),z.css("display","none"),v.css("display","block"));a.preventDefault();a.stopPropagation()});f(document).unbind(".RowDragDropTracker");f(document).bind("mouseup.RowDragDropTracker",function(a){x=!1;Q=
!0;q()});f(document).bind("touchend.RowDragDropTracker",function(a){window.console&&console.log("end event");x=!1;Q=!0;q();b=!1});f(document).bind("keyup.RowDragDropTracker",function(a){Q=!0;27==a.keyCode&&(t(),A=!1)});f(document).bind("keydown.RowDragDropTracker",function(a){27==a.keyCode&&(C=A=!0)})}function l(a){if(x&&_isRowsDraggable){b=!0;var c=f(".ui-grid-body",E.element);c.prev();var d=c.offset().top,g=E.options.RowHeight;(a.pageY||a.originalEvent.changedTouches[0].pageY)<d+g/2&&b?(c=$gridBody[0].scrollHeight,
d=$gridBody[0].scrollTop,Q=!1,w(-10,d,c)):(a.pageY||a.originalEvent.changedTouches[0].pageY)>d+c[0].clientHeight-g&&b?(c=$gridBody[0].scrollHeight,d=$gridBody[0].scrollTop,Q=!1,w(20,d,c)):Q=!0;M=void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches?Z=f(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr.rq-grid-row"):f(a.target).closest("tr.rq-grid-row");null==M||void 0==M||0==M.length?e=!1:(c=N.GetDataFromRow(M[0]),
_destIndex=E.options.UseVirtualization&&null!=c?c.DisplayIndex_M?c.DisplayIndex_M():c.DisplayIndex():M[0].rowIndex,e=!0);_inChildRows=!1;c=_destIndex-_topSelectedIndex;ContainsValueInArray(E.SelectedItems,null!=E.ActivityViews&&void 0!=E.ActivityViews?E.ActivityViews[_destIndex]:E.FlatHierarchicalItemsList[_destIndex].corrFlexyNodeData)?_inChildRows=!0:c==E.SelectedItems.length&&(_enableDropAsChild&&L?_inChildRows=!0:_enableDropAsChild||H&&_isInLastRow||(_inChildRows=!0));null!=M&&void 0!=M&&0!=M.length&&
(c=E.options.RowHeight,d=M.position().top,void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches?(g=f(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr.rq-grid-row"),a=a.originalEvent.changedTouches[0].pageY-g.offset().top):a=void 0==a.offsetY?a.pageY-f(a.target).offset().top:a.offsetY,g=c/4,L=a<=g,H=a>=3*g,F=a>g&&a<3*g,S.CanDrop(_destIndex,_enableDropAsChild&&F)||_destIndex==_topSelectedIndex||_inChildRows?
(C=!0,G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragElement||G.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow?v.css({top:M.position().top-8,left:M.width()/2}):v.css({top:M.position().top+4}),z.css("display","none"),v.css("display","block"),u.css("display","none")):(C=!1,z.css("display","block"),v.css("display","none")),a=M.next(),_isInLastRow=!1,_enableDropAsChild?F?r(d,"1.5px",c+"px"):L?r(d,"1px","0px"):0<a.length?r(a.position().top,"1px","0px"):(_isInLastRow=
!0,r(M.position().top+c,"1px","0px")):0<a.length?r(M.position().top,"1px","0px"):H?(_isInLastRow=!0,r(M.position().top+c,"1px","0px")):0==a.length&&(_isInLastRow=!0,r(M.position().top,"1px","0px")))}}function n(a){a=S.CanBeginDrag(a);!1==a?u.addClass("rq-prevent-dnd-handleCue"):u.removeClass("rq-prevent-dnd-handleCue");return a}function p(){S.OnBeforeDragStart(_topSelectedIndex,P.length);!1==n(_topSelectedIndex)?(v.css("display","none"),z.css("display","none"),u.css("display","none"),x=_isRowsDraggable=
e=!1):P=J.selectedItems.slice(0)}function q(){if(null!=P&&null!=M){if(t()||!_isRowsDraggable)return;var a=N.GetDataFromRow(M[0]);if(b&&e){_destIndex=a.DisplayIndex_M?a.DisplayIndex_M():a.DisplayIndex();H&&_enableDropAsChild&&(_destIndex+=1);_isInLastRow&&(_destIndex=null!=E.ActivityViews&&void 0!=E.ActivityViews?E.ActivityViews.length-1:E.FlatHierarchicalItemsList.length-1);_isInLastRow&&H&&(_destIndex=-1);var c=!1;F&&_enableDropAsChild&&(c=s(_topSelectedIndex,_destIndex));F&&_topSelectedIndex==_destIndex&&
_enableDropAsChild&&(c=!0);var a=P.length,d=P.slice(0),g=S.OnDrop(_topSelectedIndex,a,_destIndex,_enableDropAsChild&&F,_isInLastRow,H);if(!c&&!C&&g&&0<=_topSelectedIndex&&!_inChildRows){_isInLastRow&&H&&(_destIndex=null!=E.ActivityViews&&void 0!=E.ActivityViews?E.ActivityViews.length:E.FlatHierarchicalItemsList.length);!1!=_enableDropAsChild&&F?S.DoInsertRowsAsChild(_topSelectedIndex,a,_destIndex):S.DoMoveRows(_topSelectedIndex,a,_destIndex-1);for(c=0;c<a;c++){g=d[c];if(S.options.IsProjectGantt)g=
d[c];else for(var h=G.options.FlatItemsSource,k=0;k<h.length;k++)if(h[k]._data==g._data){g=h[k];break}g&&!1==ContainsValueInArray(J.selectedItems,g)&&J.selectedItems.add(g)}S.OnDropped(P)}}v.css("display","none");z.css("display","none");u.css("display","none");P=[];M=null}e=_isRowHeaderClicked=!1;f(document).unbind(".RowDragDropTracker");R.unbind(".RowDragDropTracker")}function r(a,b,c){z.css({top:a});z.height(c);z.css("border-width",b)}function t(){return A?(C=!0,x=e=!1,u.css("display","none"),v.css("display",
"none"),z.css("display","none"),R.unbind(".RowDragDropTracker"),f(document).unbind(".RowDragDropTracker"),!0):!1}function s(a,b){var c=G.options.FlatItemsSource[a],d=G.options.FlatItemsSource[b];return"ProjectGantt"==this.GanttType&&(parentActivityIndex=null!=c._parentView&&void 0!=c._parentView?c._parentView._activity._displayIndex:c._activity._displayIndex,d.activity._displayIndex==parentActivityIndex)?!0:!1}function w(a,b,c){$gridBody.animate({scrollTop:b+a},1,"swing",function(){if(!1==Q){var d=
b+a;0>=d&&(Q=!0,d=0);d>=c&&(Q=!0);w(a,b+a,c)}})}var u=null,v=null,z=null,y=null,A=!1,x=!1,C=!1,L=!1,H=!1,B=null,F=!1,N=a,G=N.options.Parent,E=G,O=!1,M=null,S=N,J=null,P=[],R=N.uiGridBodyTable.add(N.frozenTable);_enableDropAsChild=G.options.EnableDropAsChild;_destIndex=_topSelectedIndex=null;_isRowHeaderClicked=_inChildRows=_isInLastRow=!1;_isRowsDraggable=!0;_timer=null;this.Source=N;var Z=null;this.Dispose=function(){e=!1;C=!0;M=N=z=v=u=null;b=!1;_topSelectedIndex=null;x=!1;Q=!0;null==B&&void 0==
B||f(B).unbind(".rowHeaderMouseEvents");null==u&&void 0==u||u.unbind(".handleCueMouseDown");null==G&&void 0==G||G.element.unbind("ganttcontrolselectionchanged.RowDragDropTracker");if(null!=R||void 0!=R)R.unbind(".popupHandler"),R.unbind(".RowDragDropTracker");f(document).unbind(".RowDragDropTracker")};R.unbind(".popupHandler");R.bind("mousedown.popupHandler",function(a){!1==x&&_rowHeaderMouseDown(a)});R.bind("touchstart.popupHandler",function(a){!1==x&&_rowHeaderMouseDown(a)});_rowHeaderMouseDown=
function(a){f(a.target).hasClass("rq-grid-column-0")?(O||(O=!0,d()),_isRowHeaderClicked=!0):_isRowHeaderClicked=!1};G.element.unbind(".RowDragDropTracker");G.element.bind("ganttcontrolselectionchanged.RowDragDropTracker",function(a,b){c(a,b)});G.element.bind("flexyganttselectionchanged.RowDragDropTracker",function(a,b){c(a,b)});var Q=!1};RadiantQ.Gantt.RowDragDropTracker.IsDragStarted_M=function(){return e};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.RowDragDropTracker,"IsDragStarted",
{get:function(){return e}})})(jQuery);RadiantQ.Gantt.themes=function(){this.defaultClass="ui-state-default";this.headerClass="ui-widget-header";this.hoveringClass="ui-state-hover";this.selectionClass="ui-state-active";this.highlightingClass="ui-state-highlight";this.chartBackground=""};window.radiantQclasses=new RadiantQ.Gantt.themes;
(function(f){f.widget("radiantq.ScaleRendererBase",RadiantQ.Gantt.Widget.ScaleRendererBase);f.widget("radiantq.TimeSpanHeader",f.radiantq.ScaleRendererBase,RadiantQ.Gantt.Widget.TimeSpanHeader);f.widget("radiantq.GanttChartBackground",RadiantQ.Gantt.Widget.GanttChartBackground);f.widget("radiantq.GanttChartCustomRangeBackground",RadiantQ.Gantt.Widget.GanttChartCustomRangeBackground);f.widget("radiantq.SpecialLines",f.radiantq.ScaleRendererBase,RadiantQ.Gantt.Widget.SpecialLines);f.widget("radiantq.ScalePanelRendererBase",
RadiantQ.Gantt.Widget.ScalePanelRendererBase);f.widget("radiantq.TimeSpanHeaders",f.radiantq.ScalePanelRendererBase,RadiantQ.Gantt.Widget.TimeSpanHeaders);f.widget("radiantq.taskbar",RadiantQ.Gantt.Widget.taskbar);f.widget("radiantq.TasksListControl",RadiantQ.Gantt.Widget.TasksListControl);f.widget("radiantq.GanttChart",RadiantQ.Gantt.Widget.GanttChart);f.widget("radiantq.GanttBase",RadiantQ.Gantt.Widget.GanttBase);f.widget("radiantq.GanttControl",f.radiantq.GanttBase,RadiantQ.Gantt.Widget.GanttControl);
f.widget("radiantq.FlexyGantt",f.radiantq.GanttBase,RadiantQ.Gantt.Widget.FlexyGantt);f.widget("radiantq.GanttTaskItemsControl",RadiantQ.Gantt.Widget.GanttTaskItemsControl);f.widget("radiantq.GanttTaskItemBar",RadiantQ.Gantt.Widget.GanttTaskItemBar);f.widget("radiantq.GanttDependencyControl",RadiantQ.Gantt.Widget.GanttDependencyControl);f.widget("radiantq.GanttDependencyLine",RadiantQ.Gantt.Widget.GanttDependencyLine);f.widget("radiantq.GanttRows",RadiantQ.Gantt.Widget.GanttRows);f.widget("radiantq.rowbase",
RadiantQ.Gantt.Widget.rowbase);f.widget("radiantq.GanttRowselectable",f.radiantq.rowbase,RadiantQ.Gantt.Widget.GanttRowselectable);f.widget("radiantq.hoverable",f.radiantq.rowbase,RadiantQ.Gantt.Widget.hoverable);void 0!=f.ui.spinner&&null!=f.ui.spinner?(f.widget("ui.timespinner",f.ui.spinner,RadiantQ.Gantt.Widget.timespinner),f.widget("radiatq.DurationPicker",f.ui.spinner,RadiantQ.Gantt.Widget.DurationPicker)):window.console&&console.log&&console.log('"jquery.ui.spinner" file is missing. So, gantt would not create "Timespinner" and "DurationPicker" widgets.');
f.widget("radiantq.DateTimePicker",RadiantQ.Gantt.Widget.DateTimePicker);f.widget("radiantq.ResourcePicker",RadiantQ.Gantt.Widget.ResourcePicker);var b={triggerEvent:function(a,b,e){return this._trigger(a,b,e)},getChildWidgetName:function(a){return a},widgetBaseSetOption:function(){f.Widget.prototype._setOption.apply(this,arguments)},widgetBaseDestroy:function(){f.Widget.prototype.destroy.apply(this,arguments)}};f.extend(f.radiantq.GanttBase.prototype,{_triggerHeaderCollectionschangedEvent:function(a,
b){f.radiantq.GanttBase.prototype.element=this.element;f.radiantq.GanttBase.prototype._trigger("HeaderCollectionschanged",a,{event:a,value:b,options:this.options})}},b);var e={baseCreate:function(){f.radiantq.GanttBase.prototype._create.apply(this,arguments)},baseSetOption:function(){f.radiantq.GanttBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){f.radiantq.GanttBase.prototype.destroy.apply(this,arguments)}},a=f.extend({},e,{updateGanttChart:function(a,b){var e=this.GetGanttChart();
0!=e.length&&a in e.GanttChart("option")&&(e.GanttChart("option",a)==b&&"BaseTimeScaleType"!=a||e.GanttChart("option",a,b))}},b),e=f.extend({},e,{updateGanttChart:function(a,b){var e=this.GetGanttChart();if(0!=e.length){switch(a){case "FlatItemsSource":return e.GanttChart("option","FlatItemsSource",b);case "TaskStartTimeProperty":return e.GanttChart("option","TaskStartTime",b);case "ParentTaskStartTimeProperty":return e.GanttChart("option","ParentTaskStartTime",b);case "TaskEndTimeProperty":return e.GanttChart("option",
"TaskEndTime",b);case "ParentTaskEndTimeProperty":return e.GanttChart("option","ParentTaskEndTime",b)}a in e.GanttChart("option")&&(e.GanttChart("option",a)==b&&"BaseTimeScaleType"!=a||e.GanttChart("option",a,b))}}},b);f.extend(f.radiantq.GanttControl.prototype,a);f.extend(f.radiantq.FlexyGantt.prototype,e);f.extend(f.radiantq.GanttChart.prototype,b);f.extend(f.radiantq.rowbase.prototype,b);a=f.extend({baseCreate:function(){f.radiantq.rowbase.prototype._create.apply(this,arguments)},baseSetOption:function(){f.radiantq.rowbase.prototype._setOption.apply(this,
arguments)},baseDestroy:function(){f.radiantq.rowbase.prototype.destroy.apply(this,arguments)}},b);f.extend(f.radiantq.hoverable.prototype,a);f.extend(f.radiantq.GanttRowselectable.prototype,a);f.extend(f.radiantq.GanttRows.prototype,b);f.extend(f.radiantq.GanttTaskItemBar.prototype,b);f.extend(f.radiantq.GanttTaskItemsControl.prototype,b);f.extend(f.radiantq.taskbar.prototype,b);f.extend(f.radiantq.TasksListControl.prototype,b);f.extend(f.radiantq.ScaleRendererBase.prototype,b);f.extend(f.radiantq.ScalePanelRendererBase.prototype,
b);a=f.extend({baseCreate:function(){f.radiantq.ScaleRendererBase.prototype._create.apply(this,arguments)},baseSetOption:function(){f.radiantq.ScaleRendererBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){f.radiantq.ScaleRendererBase.prototype.destroy.apply(this,arguments)},ScaleRendererBaseUpdateTimeUnits:function(){f.radiantq.ScaleRendererBase.prototype.UpdateTimeUnits.apply(this,arguments)}},b);f.extend(f.radiantq.TimeSpanHeader.prototype,a);e=f.extend({baseCreate:function(){f.radiantq.ScalePanelRendererBase.prototype._create.apply(this,
arguments)},baseSetOption:function(){f.radiantq.ScalePanelRendererBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){f.radiantq.ScalePanelRendererBase.prototype.destroy.apply(this,arguments)},ScaleRendererBaseUpdateTimeUnits:function(){f.radiantq.ScalePanelRendererBase.prototype.UpdateTimeUnits.apply(this,arguments)}},b);f.extend(f.radiantq.TimeSpanHeaders.prototype,e);f.extend(f.radiantq.SpecialLines.prototype,a);f.extend(f.radiantq.GanttDependencyControl.prototype,b);Binder.ActivityTimeBinder=
function(a,b,e,f){a.DateTimePicker({onBlur:function(b){b=a.DateTimePicker("getDate");null!=b&&(f.Activity_M().PreferredStartTime_M(b),f.Activity_M().StartTime_M(b))},dateformat:a.attr("datepicker-dateformat")});a.DateTimePicker("setDate",e.getter(f))};Binder.ResourcePickerBinder=function(a,b,e,h){b=[];e=h.activity.Assignments_M();for(var m=0;m<e.length;m++)b.push(e[m]._resource);a.ResourcePicker({source:h.activity.Model.GanttResources_M(),SelectedResources:b,open:function(){h.GC.PreventDefaultFns=
!0},close:function(){h.GC.PreventDefaultFns=!1},destroy:function(){var a=f(this).data("ResourcePicker");if(void 0!=a&&null!=a){var b=a.selectedItems;!0==a.IsChanged()&&RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments(b,h.activity.Assignments_M())}}})}})(jQuery);
(function(f){var b=function(){var a=RadiantQ.Template;VW.Grid.GridUI.apply(this,arguments);this.initFields=function(){this.fields=[];this.fields.push("Activity.IndentLevel");this.fields.push("Activity.CumulativeEffort");this.fields.push("Activity.IsExpanded");this.fields.push("IndentWidth")};this.Refresh=function(){if(this.InEditMode){var a=this.editedElement.closest("tr");a.data("uid");0<a.length&&a[0].scrollIntoView()}a=this.rowHtml();this.appendInnerHtml(this.$tbody,a);0!=this.FrozenColumnCount&&
(a=this.rowHtml(null,!0),this.appendInnerHtml(this.$frozenTbody,a));this.Loaded();this.updateGridHeight(this.options.Parent.options.IsPrinting);this.updateScrollPadding();this.updateGridWidth();this.updateGridHeaderScrollLeft();!0==this.options.columnReorderable&&this.columnDragAndDrop();this.triggerRefresh();this.CreateColumnEnhancerplugIn();this._updateRowDragDropTracker()};this.triggerRefresh=function(){this.element.trigger("refresh")};this.updateGridHeaderScrollLeft=function(){var a=this.uiGridBody.scrollLeft();
this.uiGridHeadTableParent.scrollLeft(a)};this.OnDropped=function(a){this.options.Parent.SelectedRowsDropped.raise({DroppedItems:a})};this.CanBeginDrag=function(a){a={DragRowIndex:a,Cancel:!1};this.options.Parent.BeforeRowsDragStart.raise(a);return a.Cancel?!1:!0};this.CanDrop=function(a,b){var e={DragOverRowIndex:a,DropAsChildren:b,Cancel:!1};this.options.Parent.SelectedRowsDrag.raise(e);return!0==e.Cancel};this.OnDrop=function(a,b,e,f){a={FirstSelectedItem:a,SelectedItemsCount:b,DestinationIndex:e,
DropAsChildren:f,Cancel:!1};this.options.Parent.SelectedRowsDrop.raise(a);return!1==a.Cancel};null;this._updateRowDragDropTracker=function(){!1!=this._loaded&&(this.options.CanUserReorderRows?null==this._dndTracker&&(this._dndTracker=new RadiantQ.Gantt.RowDragDropTracker(this)):null!=this._dndTracker&&(this._dndTracker.Dispose(),this._dndTracker=null))};this.tmpl=function(a){var b=!0==a?this.generateTemplate(this.FrozenColumn,a):this.generateTemplate(this.Column),e="<tr class='${data._isSelected ? 'rq-row-selected "+
window.radiantQclasses.selectionClass+" rq-grid-row' :'rq-grid-row'}' data-uid='${data.uid}' style='height:"+this.options.RowHeight+"px;font-weight: ${data.IsParent_M() ? 'bold' :'normal' }'>",e=e+b+"</tr>",f="<tr class='${data._isSelected ? 'rq-row-selected "+window.radiantQclasses.selectionClass+" rq-grid-row rq-grid-alternative-background' :'rq-grid-row  rq-grid-alternative-background'}' data-uid='${data.uid}' style='height:"+this.options.RowHeight+"px;font-weight: ${data.IsParent_M() ? 'bold' :'normal' }'>",
f=f+b+"</tr>";this.renderTemplate(e,f,a)};this.renderTemplate=function(b,d,e){e?(this.frozenRowTemplate=a(b),this.frozenAltRowTemplate=a(d)):(this.rowTemplate=a(b),this.altRowTemplate=a(d))};this.list=[];this.viewList=new RadiantQ.Gantt.Dictionary;this.sourceList=new RadiantQ.Gantt.Dictionary;this.dataPropertyChange=function(a,b){var e=""!=this.PropertyName?this.PropertyName+"."+b.PropertyName:b.PropertyName;"refreshView"==b.PropertyName?this.context.propertyChanged(this.View,b.PropertyName):-1!=
f.inArray(e,this.context.fields)&&this.context.propertyChanged(this.View,e)};this.GetGC=function(){return this.element.parents("div.rq-ganttBase").data("GanttControl")};this.subscribeEvents=function(){var a=this,b=a.options,e=0,h=a.options,m=a.uiGridBody[0].scrollHeight,k=a.uiGridBody.height();a.uiGridBody.bind("mousewheel",function(b){a.InEditMode&&(a.closeCell(),a.InEditMode=!1)});a.uiGridBody.scroll(function(l){var n=f(this).height(),p=a.uiGridBody.scrollLeft(),q=this.scrollTop;a.uiFrozenGridBody.scrollTop(q);
if(b.UseGridVirtualization&&(q!=e||m!=this.scrollHeight||k!=n)){var r=a.rowHtml();a.appendInnerHtml(a.$tbody,r);0!=a.FrozenColumnCount&&(r=a.rowHtml(null,!0),a.appendInnerHtml(a.$frozenTbody,r));a.Loaded()}a.uiGridBody.scrollLeft(p);q!=e&&0<h.Parent.VerticalScrollEvent.fn.length&&h.Parent.VerticalScrollEvent.raise(l);m=this.scrollHeight;k=n;e=q;0<a.AfterGridScroll.fn.length&&a.AfterGridScroll.raise(self)})};this.createContextMenu=function(a){if(f.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)){var b=
[{keyName:"Indent",name:window.RadiantQ_IndentString,icon:"Indent"},{keyName:"Outdent",name:window.RadiantQ_OutdentString,icon:"Outdent"}],e=null;this.options.Parent.TableContextMenu&&this.options.Parent.TableContextMenu.Dispose&&this.options.Parent.TableContextMenu.Dispose();this.options.GridContextMenu?(e=new RadiantQ.ContextMenuImpl.ContextMenu("#"+this.element[0].id,a[0].parentElement),e.ContextHandler.subscribe(function(a,b){b.target.parent().hasClass("rq-grid-row")&&(a.Context=b.target.parent())})):
e=new RadiantQ.ContextMenuImpl.ContextMenu("#"+this.element[0].id+" table.ui-grid-body-table tr",a[0].parentElement);e.AddNewItems(b);e.ItemClicked.subscribe(function(a,b){var c=this.element.parents(".rq-ganttBase").data("GanttControl"),d=c.SelectedItems;if(null!=d){if("Indent"==a)if(this.IsUndoEnabled()){var e=d[0];null!=e&&c.CanIndent(e)&&(e=new RadiantQ.Gantt.IndentAction(c,e.Activity_M()),c.ActionManager.RecordAction(e))}else for(e=0;e<d.length;e++)c.Indent(d[e]);if("Outdent"==a)if(this.IsUndoEnabled())e=
d[0],null!=e&&0<e.IndentLevel_M()&&(d=new RadiantQ.Gantt.OutdentAction(c,e.Activity_M()),c.ActionManager.RecordAction(d));else for(e=d.length-1;0<=e;e--)c.Outdent(d[e])}}.bind(this));var h=this;e.BeforeContextMenu.subscribe(function(a,b){var c=f(b.target);this.options.GridContextMenu&&0!=c.closest("tr").length&&(b.context=c.closest("tr"));if(c.hasClass("editor"))b.Cancel=!0;else if(e.Items&&e.Items.Indent&&e.Items.Outdent){var d=this.options.Parent;h.options.Parent.options.IsReadOnly||0==c.closest("tr").length||
1<h.options.Parent.SelectedItems.length&&!0==d.ActionManager.EnableRecordingActions?(h._contextMenuDisabledByReadOnly=!0,e.Items.Indent.disabled=!0,e.Items.Outdent.disabled=!0):!0==h._contextMenuDisabledByReadOnly&&(h._contextMenuDisabledByReadOnly=!1,e.Items.Indent.disabled=!1,e.Items.Outdent.disabled=!1)}},this);this.options.Parent.TableContextMenu=e}};this.closeCell=function(){if(this.editedElement){var b=this.activeElement();!0==f.contains(this.editedElement[0],b)&&this.element.focus();if(null==
this.editedElement)return;b=f(".hasDatepicker",this.editedElement);null!=b&&void 0!=b&&b.length&&b.datepicker("hide");for(var d=this.editedElement.index(),d=this.GetCellIndex(this.editedElement),e=this.editedElement.closest("tr"),b=this.GetDataFromRow(e),h=e[0].rowIndex,e=e.closest("table"),e=e.hasClass("ui-frozen-body-table")||e.hasClass("frozenGanttTable")?this.FrozenColumn[d]:this.Column[d],m=this.columnField(e),e=[],k=this.Column,l=this.FrozenColumn,n=0;n<k.length;n++)m==this.columnField(k[n])&&
e.push(k[n]);for(n=0;n<l.length;n++)m==this.columnField(l[n])&&e.push(l[n]);for(n=0;n<e.length;n++){var m=e[n],d=this.createColumnTemplate(m,!0),p=a(d)(b),d=RQArray.prototype.indexOf.call(k,m);-1==d?(d=l.indexOf(m),m=this.frozenTable.find("tr")):m=this.table.find("tr");this.replaceTmpl(m,d,h,p,b)}h=this.CreateAction(this.ccis);this.AddActionToManager(h);h=null;null!=this.editedElement&&(e=this.editedElement.closest("table"),h=e.hasClass("ui-frozen-body-table")||e.hasClass("frozenGanttTable")?this.FrozenColumn[d]:
this.Column[d]);null!=this.options.endEdit&&this.options.endEdit(this.editedElement,b,h)}this.docClickEventProxy&&(f(document).unbind("mousedown",this.docClickEventProxy),this.docClickEventProxy=null);this.editedCell=[];this.editedElement=null;this.InEditMode=!1};this.ccis;this.InEditMode=!1;this.editCell=function(a){var b=null,e=a.closest("tr"),h=e.data("uid"),h=this.GuidList[h];if(void 0==h)return!1;"incell"==this.options.editmode&&this.closeCell();var b=this.GetCellIndex(a),m=a.closest("table"),
b=m.hasClass("ui-frozen-body-table")||m.hasClass("frozenGanttTable")?this.FrozenColumn[b]:this.Column[b];if(null!=this.options.startEdit&&!1==this.options.startEdit(a,h,b))return!1;if(!1==this.options.Parent.options.EnableMultipleSelection&&"popup"==this.options.editmode&&!0==h.IsSelected()&&void 0==b.command)return this.cacheValues(h),this.createPopupEditor(h),!0;if(this.isEditable(h,b))this.InEditMode=!0,this.cacheValues(h),this.ccis=new RadiantQ.Gantt.CellChangeInfo(b.field,h,b.field),this.editCellbyData(a,
b,h,e);else return!1;null==this.docClickEventProxy&&this.editedElement&&"incell"==this.options.editmode&&(this.docClickEventProxy=f.proxy(this.docClickEven,this),f(document).bind("mousedown",this.docClickEventProxy));return!0};this.isEditable=function(a,b){var e=this.options.Parent,f=e.$ganttWrapper.data("GanttRowselectable");if(b.command||!1==this.options.enableSingleClickEdit&&!1==a.IsSelected()||!0==e.options.EnableMultipleSelection&&0<f.selectedItems.length)return!1;e=this.columnField(b);-1!=
e.indexOf("_M()")&&(e=e.replace(this.checkTag,""));return!0==a.IsReadOnly&&"Activity.ActivityName"!=e||null!=this.options.startEdit&&(f=this.GetRowFromData(a).find("td:eq("+this.Column.indexOf(b)+")"),!1==this.options.startEdit(f,a,b))?!1:b.beginEdit&&!1==b.beginEdit(a,b,this)||a._isParent&&("Activity.PredecessorIndexString"!=e&&"Activity.ActivityName"!=e&&"Activity.Assignments"!=e&&(void 0==b.isParentEditable||!1==b.isParentEditable)||!1==b.isParentEditable)?!1:!1==b.iseditable?!1:!0};this.IsChangeTrackingEnabled=
function(){return!0};this.CreateAction=function(a){var b=a.Source_M(),e=b,b=b.Activity_M?b.Activity_M():b,f=a.Property_M(),m=this.GetGC(),k=RadiantQ.Gantt;return"StartTime"==f?new k.SetStartTimeAction(m,b,a.GetCurrentValue(),null==a.Tag?a.GetOldValue():a.Tag,a.GetOldValue(),!0):"EndTime"==f?new k.SetEndTimeAction(m,b,a.GetCurrentValue(),null==a.Tag?a.GetOldValue():a.Tag,a.GetOldValue(),!0):0==f.indexOf("Activity.")?new k.GenericActivityChangeActionInGrid(m.Model,b.ID_M(),f,a.GetOldValue(),a.GetCurrentValue(),
!0,e):new k.GenericActivityViewChangeActionInGrid(m,m.Model,b.ID_M(),f,a.GetOldValue(),a.GetCurrentValue(),!0,e)};this.AddActionToManager=function(a){this.GetGC().ActionManager.RecordAction(a)};this.OnBeforeDragStart=function(a,b){var e=this.options.Parent,f=e.$ganttWrapper.data("GanttRowselectable");this._flattenSelection();return e.OnBeforeDragStart(a,f.selectedItems.length)};this._flattenSelection=function(){var a=this.options.Parent,b=this.options,e=a.$ganttWrapper.data("GanttRowselectable"),
f=a.SelectedItems,m=this.GetRowFromData(f[0]),k=this.GetRowFromData(f[f.length-1]);a.options.UseVirtualization?(k=f[0].DisplayIndex_M(),m=f[f.length-1].DisplayIndex_M()):(k=k[0].rowIndex,m=m[0].rowIndex);a.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single&&window.console&&console.error("Dragging feature requires selecting multiple rows, but the SelectionMode is set to Single. This is not supported. Set SelectionMode to Multiple or turn off dragging feature.");if(f.length<k-m+1)for(a=m;a<=
k;a++)!1==ContainsValueInArray(e.selectedItems,b.datasource[a])&&e.selectedItems.add(b.datasource[a])};this.MoveRows=function(a,b,e){this.MoveRows(a,b,e,null,void 0,void 0)};this.DoMoveRows=function(a,b,e,f){var m=this.GetGC();a=new RadiantQ.Gantt.MoveRowsAction(m,a,b,e,f);m.ActionManager.RecordAction(a)};this.MoveRows=function(a,b,e,h,m,k){this.ignoreChangs=!0;var l=null;!0==this.options.UseGridVirtualization&&(m=this.GetGC(),l=f(".rq-gc-rowsParent",m.element).data("GanttTaskItemsControl"),this.ignorecollectionChangs=
!0,l&&(l.ignorecollectionChangs=!0));var n=new RadiantQ.Gantt.Utils.DelayUpdates,p=this.GetGC();m={value:0};k={value:0};p.MoveRows(a,b,e,h,m,k);0<m.value&&this.PostMove(a,m,k);n.Dispose();this.ignorecollectionChangs=this.ignoreChangs=!1;!0==this.options.UseGridVirtualization&&(l&&(l.ignorecollectionChangs=!1,l.RefreshUI()),this.Refresh())};this.PostMove=function(a,b,e){var f=this.options.datasource;e.value++;return f.Move(a,b.value,e.value)};this.InsertRowsAsChild=function(a,b,e){this.InsertRowsAsChildInternal(a,
b,e,!1)};this.DoInsertRowsAsChild=function(a,b,e){this.InsertRowsAsChildInternal(a,b,e,!0)};this.IsUndoEnabled=function(a){if(0==arguments.length){var b=this.GetGC();return null!=b.Model&&!0==b.ActionManager.EnableRecordingActions}};this.EnableDropAsChild=function(a){var b=this.GetGC();if(b){if(0==arguments.length)return this.IsUndoEnabled()?!1:b.options.EnableDropAsChild;b.options.EnableDropAsChild=a}};this.InsertRowsAsChildInternal=function(a,b,e,f){var m=new RadiantQ.Gantt.Utils.DelayUpdates,k=
this.GetGC(),l={value:0},n={value:0},p=k.ActivityViews[e];if(p){if(0<p.Activity_M().ChildActivities_M().length&&!0==p.IsExpanded_M()){e=k.GetIndexOfLastDescendant(p);if(e>=a&&e<=a+b-1)return;f?(k=p.Activity_M().DisplayIndex_M(),this.DoMoveRows(a,b,e,k)):(k.MoveRows(a,b,e,p,l,n),0<l.value&&this.PostMove(a,l,n))}else if(k.MoveRows(a,b,e,null,l,n),0<l.value){a=this.PostMove(a,l,n);b={};for(f=0;f<l.value;f++)b[f]=k.ActivityViews[f+a].IndentLevel_M();for(f=n=a;f<a+l.value;f++)p=k.ActivityViews.length,
k.ActivityViews[n].IndentLevel_M()==b[f-a]?(k.Indent(k.ActivityViews[n]),p==k.ActivityViews.length?n++:f+=p-k.ActivityViews.length-1):n++}m.Dispose()}};this.cancelChanges=function(b){for(var d in this.Cache)if(-1!=this.changeField.indexOf(d)){var e=a.getter(d,b);e&&e.AsText_M?e.AsText_M()!=this.Cache[d]&&e.AsText_M(this.Cache[d]):("Activity.StartTime"==d&&a.setter("Activity.PreferredStartTime",b,this.Cache[d]),e!=this.Cache[d]&&a.setter(d,b,this.Cache[d]))}this.changeField=[]};this.cacheValues=function(b){this.Cache=
{};for(var d=this.options.columns,e=0;e<d.length;e++){var f=d[e],m="";f.command||(m=this.columnField(f));f=a.getter(m,b);null!=f&&f.AsText_M&&(f=f.AsText_M());this.Cache[m]=f;-1!=m.indexOf("_M()")&&(m=m.replace(this.checkTag,""),this.Cache[m]=f)}};this.renderRowHtml=function(a,b,e,h,m,k,l,n){var p=this.options.RowHeight,q=0,r=this.options.datasource,t=this.uiGridBody,s=this.options.UseGridVirtualization,w=0,u=RadiantQ.Gantt.RQPrint.InternalPrintOptions,v=u.IsNewPrinting,z={appendRowHtml:"",prependRowHtml:""};
if(!r)return z;r instanceof VW.Grid.GridModel&&(r=r.data);if(!a)if(this.InEditMode&&!n){var y=f("tr",h),A=this.editedElement.closest("tr").data("uid");for(h=0;h<y.length;h++){var x=y.eq(h),C=x.data("uid");A==C?canRemoveWithoutCheck=!0:(x.remove(),delete this.GuidList[C])}}else h.empty();h=0;if(s&&!a||v)y=t.scrollTop(),h=this.options.Parent.GetStartRowIndexAndTop(r,y),w=h.startPosition,h=y-h.top,v&&(h=y);0<m.length&&(m[0].style.setProperty?m[0].style.setProperty("margin-top",h+"px","important"):m[0].style.setAttribute("margin-top",
h+"px","important"));this.renderHeight=l;m=this.guid;t=this.GuidList;null!=k&&(h=this.options.Parent.GetScrollableContentHeight(r),k.height(h));this.unsubscribeAllObjectChanges();A=u.NoOfRowsInPage;v?(w=u.StartRowIndex,k=u.EndRowIndex>=r.length?r.length:u.EndRowIndex+1):k=r.length;for(h=w;h<k;h++){y=h-w;if(v){if(0<u.MaximumHeightPerPage&&q>=u.MaximumHeightPerPage)break;if(y>=A)break}else if(s&&!a&&q>=l)break;u.NoOfRenderedRows=h<k?y:y+1;x=r[h];if(this.InEditMode&&!n&&t[r[h].uid]&&(y=this.GetRowFromData(x))&&
1<=y.length){q+=x.RowHeight?x.RowHeight:p;z.prependRowHtml+=z.appendRowHtml;z.appendRowHtml="";continue}this.subscribeObjectChanges(x);void 0==x.uid?(y=m(),x.uid=y,t[y]=x):t[x.uid]=x;z.appendRowHtml=this.options.EnableAlternativeRowBackground?0==h%2?z.appendRowHtml+b(x):z.appendRowHtml+e(x):z.appendRowHtml+b(x);q+=x.RowHeight?x.RowHeight:p}return z};return this};window["VW.Grid.GridUI"]&&(b.prototype=VW.Grid.GridUI);f.fn.GanttTable=function(a){a=new b(a);a._create(this);return a};var e=function(){var a=
RadiantQ.Template;VW.Grid.GridUI.apply(this,arguments);this.InEditMode=!1;this.Refresh=function(){if(this.InEditMode){var a=this.editedElement.closest("tr");a.data("uid");0<a.length&&a[0].scrollIntoView()}a=this.rowHtml();this.appendInnerHtml(this.$tbody,a);0!=this.FrozenColumnCount&&(a=this.rowHtml(null,!0),this.appendInnerHtml(this.$frozenTbody,a));this.updateGridHeight(this.options.Parent.options.IsPrinting);this.updateScrollPadding();this.updateGridWidth();this.triggerRefresh();this.CreateColumnEnhancerplugIn();
this._updateRowDragDropTracker();this.Loaded()};this.triggerRefresh=function(){this.element.trigger("refresh")};this.initFields=function(){this.fields=[];this.fields.push("HierarchicalItem.IsExpanded");this.fields.push("HierarchicalItem.CanShowCue")};this.list=[];this.viewList=new RadiantQ.Gantt.Dictionary;this.sourceList=new RadiantQ.Gantt.Dictionary;this.dataPropertyChange=function(a,b){var e=""!=this.PropertyName?this.PropertyName+"."+b.PropertyName:b.PropertyName;-1!=f.inArray(e,this.context.fields)?
this.context.propertyChanged(this.View,e):this.context.propertyChanged(a,e)};this.createContextMenu=function(a){f.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)&&void 0==this.options.Parent.TableContextMenu&&(this.options.GridContextMenu?(TableContextMenu=new RadiantQ.ContextMenuImpl.ContextMenu("#"+a[0].id,f("#"+a[0].id).parent()),TableContextMenu.ContextHandler.subscribe(function(a,b){b.target.parents().hasClass("rq-grid-row")&&(a.Context=b.target.parent())})):TableContextMenu=new RadiantQ.ContextMenuImpl.ContextMenu("#"+
a[0].id+" table.ui-grid-body-table tr",f("#"+a[0].id).parent()),TableContextMenu.AddNewItems([]),this.options.Parent.TableContextMenu=TableContextMenu)};null;this._updateRowDragDropTracker=function(){!1!=this._loaded&&(this.options.CanUserReorderRows?null==this._dndTracker&&(this._dndTracker=new RadiantQ.Gantt.RowDragDropTracker(this)):null!=this._dndTracker&&(this._dndTracker.Dispose(),this._dndTracker=null))};this.OnDropped=function(a){this.options.Parent.SelectedRowsDropped.raise({DroppedItems:a})};
this.CanBeginDrag=function(a){a={DragRowIndex:a,Cancel:!1};this.options.Parent.BeforeRowsDragStart.raise(a);return a.Cancel?!1:!0};this.CanDrop=function(a,b){var e={DragOverRowIndex:a,DropAsChildren:b,Cancel:!1};this.options.Parent.SelectedRowsDrag.raise(e);return!0==e.Cancel};this.OnDrop=function(a,b,e,f,m,k){a={FirstSelectedItem:a,SelectedItemsCount:b,DestinationIndex:e,DropAsChildren:f,Cancel:!1,isInLastRow:m,isInLastQuarter:k};this.options.Parent.SelectedRowsDrop.raise(a);return!1==a.Cancel};
this.DoInsertRowsAsChild=function(a,b,e){};this.OnBeforeDragStart=function(a,b){for(var e=this.options.Parent.$ganttWrapper.data("GanttRowselectable"),f=[],m=0;m<e.selectedItems.length;m++)f.push(e.selectedItems[m]);return f};this.IsChangeTrackingEnabled=function(){return!1};this.AddActionToManager=function(a){};this.DoMoveRows=function(a,b,e){};this.tmpl=function(a){var b=null!=this.options.Parent.options.RowHeightBinding,e=!0==a?this.generateTemplate(this.FrozenColumn):this.generateTemplate(this.Column),
f="<tr class='${data._isSelected ? 'rq-row-selected "+window.radiantQclasses.selectionClass+" rq-grid-row' :'rq-grid-row'}' data-uid='${data.uid}' style='height:",f=!1==b?f+this.options.RowHeight:f+("${data.RowHeight ? data.RowHeight :"+this.options.RowHeight+" }"),f=f+"px;font-weight: ${data.IsParentType() ? 'bold' :'normal' }'>"+e,f=f+"</tr>",m="<tr class='${data._isSelected ? 'rq-row-selected  "+window.radiantQclasses.selectionClass+" rq-grid-row rq-grid-alternative-background' :'rq-grid-row  rq-grid-alternative-background'}' data-uid='${data.uid}' style='height:",
m=!1==b?m+this.options.RowHeight:m+("${data.RowHeight ? data.RowHeight :"+this.options.RowHeight+" }"),m=m+"px;font-weight: ${data.IsParentType() ? 'bold' :'normal' }'>"+e,m=m+"</tr>";this.renderTemplate(f,m,a)};this.renderTemplate=function(b,d,e){e?(this.frozenRowTemplate=a(b),this.frozenAltRowTemplate=a(d)):(this.rowTemplate=a(b),this.altRowTemplate=a(d))};this.subscribeEvents=function(){var a=this,b=a.options,e=0,h=a.options,m=a.uiGridBody[0].scrollHeight,k=a.uiGridBody.height();a.uiGridBody.bind("mousewheel",
function(b){a.InEditMode&&(a.closeCell(),a.InEditMode=!1)});a.uiGridBody.scroll(function(l){var n=f(this).height(),p=a.uiGridBody.scrollLeft(),q=this.scrollTop;a.uiFrozenGridBody.scrollTop(q);if(b.UseGridVirtualization&&(q!=e||m!=this.scrollHeight||k!=n)){var r=a.rowHtml();a.appendInnerHtml(a.$tbody,r);0!=a.FrozenColumnCount&&(r=a.rowHtml(null,!0),a.appendInnerHtml(a.$frozenTbody,r));a.Loaded()}a.uiGridBody.scrollLeft(p);q!=e&&0<h.Parent.VerticalScrollEvent.fn.length&&h.Parent.VerticalScrollEvent.raise(l);
m=this.scrollHeight;k=n;e=q})};this.isEditable=function(a,b){return!1==a.IsSelected()?!1:!1==b.iseditable?!1:a.IsParentType()&&!1==b.isParentEditable?!1:!0};this.cancelChanges=function(b){for(var d in this.Cache)if(-1!=this.changeField.indexOf(d)){var e=a.getter(d,b);e.AsText_M?e.AsText_M()!=this.Cache[d]&&e.AsText_M(this.Cache[d]):("Activity.StartTime"==d&&a.setter("Activity.PreferredStartTime",b,this.Cache[d]),e!=this.Cache[d]&&a.setter(d,b,this.Cache[d]))}this.changeField=[]};this.cacheValues=
function(b){this.Cache={};for(var d=this.options.columns,e=0;e<d.length;e++){var f=this.columnField(d[e]),m=a.getter(f,b);null!=m&&m.AsText_M&&(m=m.AsText_M());this.Cache[f]=m;-1!=f.indexOf("_M()")&&(f=f.replace(this.checkTag,""),this.Cache[f]=m)}};this.renderRowHtml=function(a,b,e,h,m,k,l,n){var p=this.options.RowHeight,q=0,r=this.options.datasource,t=this.uiGridBody,s=this.options.UseGridVirtualization,w=0,u=RadiantQ.Gantt.RQPrint.InternalPrintOptions,v=u.IsNewPrinting,z={appendRowHtml:"",prependRowHtml:""};
if(null!=k){var y=this.options.Parent.GetScrollableContentHeight(r);k.height(y)}if(!r)return z;r instanceof VW.Grid.GridModel&&(r=r.data);if(!a)if(this.InEditMode&&!n)for(k=f("tr",h),y=this.editedElement.closest("tr").data("uid"),h=0;h<k.length;h++){var A=k.eq(h),x=A.data("uid");y==x?canRemoveWithoutCheck=!0:(A.remove(),delete this.GuidList[x])}else h.empty();h=0;if(s&&!a||v)k=t.scrollTop(),h=this.options.Parent.GetStartRowIndexAndTop(r,k),w=h.startPosition,h=k-h.top,v&&(h=k);0<m.length&&(m[0].style.setProperty?
m[0].style.setProperty("margin-top",h+"px","important"):m[0].style.setAttribute("margin-top",h+"px","important"));this.renderHeight=l;m=this.guid;t=this.GuidList;this.unsubscribeAllObjectChanges();A=u.NoOfRowsInPage;v?(w=u.StartRowIndex,y=u.EndRowIndex>=r.length?r.length:u.EndRowIndex+1):y=r.length;for(h=w;h<y;h++){k=h-w;if(v){if(0<u.MaximumHeightPerPage&&q>=u.MaximumHeightPerPage)break;if(k>=A)break}else if(s&&!a&&q>=l)break;u.NoOfRenderedRows=h<y?k:k+1;x=r[h];if(this.InEditMode&&!n&&t[r[h].uid]&&
(k=this.GetRowFromData(x))&&1<=k.length){q+=x.RowHeight?x.RowHeight:p;z.prependRowHtml+=z.appendRowHtml;z.appendRowHtml="";continue}this.subscribeObjectChanges(x);x._data&&x._data.PropertyChanged&&(k=x._data.PropertyChanged.subscribe(function(a,b){b&&"refreshView"==b.PropertyName&&this.context.RefreshItem(this.data)},{context:this,data:x}),this.destroyList.Add(x,[k]));void 0==x.uid?(k=m(),x.uid=k,t[k]=x):t[x.uid]=x;z.appendRowHtml=this.options.EnableAlternativeRowBackground?0==h%2?z.appendRowHtml+
b(x):z.appendRowHtml+e(x):z.appendRowHtml+b(x);q+=x.RowHeight?x.RowHeight:p}return z};return this};window["VW.Grid.GridUI"]&&(e.prototype=VW.Grid.GridUI);f.fn.FlexyGrid=function(a){a=new e(a);a._create(this);return a};RadiantQ.Gantt.CellChangeInfo=function(a,b,d){this._changeLabel=a;this._bindingProp=d;this._dataSource=b;this._oldValue=this.GetPropValue(this._dataSource,this._bindingProp)};RadiantQ.Gantt.CellChangeInfo.prototype._oldValue=null;RadiantQ.Gantt.CellChangeInfo.prototype._bindingProp=
null;RadiantQ.Gantt.CellChangeInfo.prototype._dataSource=null;RadiantQ.Gantt.CellChangeInfo.prototype._changeLabel=null;RadiantQ.Gantt.CellChangeInfo.prototype.Tag=null;RadiantQ.Gantt.CellChangeInfo.prototype.Label_M=function(a){if(0==arguments.length)return this._changeLabel};RadiantQ.Gantt.CellChangeInfo.prototype.Source_M=function(a){if(0==arguments.length)return this._dataSource};RadiantQ.Gantt.CellChangeInfo.prototype.Property_M=function(a){if(0==arguments.length)return this._bindingProp};RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(RadiantQ.Gantt.CellChangeInfo.prototype,"Label",{get:function(){return this._changeLabel}}),Object.defineProperty(RadiantQ.Gantt.CellChangeInfo.prototype,"Source",{get:function(){return this._dataSource}}),Object.defineProperty(RadiantQ.Gantt.CellChangeInfo.prototype,"Property",{get:function(){return this._bindingProp}}));RadiantQ.Gantt.CellChangeInfo.prototype.GetCurrentValue=function(){return this.GetPropValue(this._dataSource,this._bindingProp)};RadiantQ.Gantt.CellChangeInfo.prototype.GetOldValue=
function(){return this._oldValue};RadiantQ.Gantt.CellChangeInfo.prototype.GetPropValue=function(a,b){if(void 0!=b){var d=b.split(".");if(2<d.length){for(var d=a,e=b.split("."),f,m=0;m<e.length;m++){var k=e[m].trim("()");f=d[k];d=f="function"==typeof f?d[k]():f}return f}f=d=1<d.length?d[1]:d[0];e=d.indexOf("_");-1!=e&&(f=d.slice(0,e),d=d.slice(0,e+2));e=a;"PredecessorIndexString"!=d&&"PredecessorIndexString_M"!=d&&(e=e.Activity_M?a.Activity_M():a);e=d="function"==typeof e[d]?e[d]():e._data?e._data[d]:
e[d];"Assignments"==f&&(e=jQuery.extend(!0,{},d));return e}};RadiantQ.Gantt.CellChangeInfo.prototype.SetNestedPropValue=function(a,b,d,e){a=a.Activity_M?a.Activity_M():a;var f=b.split(".");if(2<f.length){a=b.split(".");f=e;for(e=0;e<a.length-1;e++){b=a[e].trim("()");var m=f[b],f=m="function"==typeof m?f[b]():m}"function"==typeof f[a[a.length-1]]?f[a[a.length-1]](d):f[a[a.length-1]]=d}else e=f=1<f.length?f[1]:f[0],b=f.indexOf("_"),-1!=b&&(e=f.slice(0,b),f=f.slice(0,b+2)),"StartTime"==e&&a.PreferredStartTime_M(d),
"Assignments"!=e?"function"==typeof a[f]?a[f](d):a._data?a._data[f]=d:a[f]=d:(d=d.AsText_M(),"function"==typeof a[f]?a[f]().AsText_M(d):a[f].AsText_M(d))};RadiantQ.Gantt.CellChangeInfo.prototype.HasChanged=function(a,b,d){a=this.GetOldValue();b=this.GetCurrentValue();return null==a?null!=b:a!==b}})(jQuery);
(function(){RadiantQ.ProjectModel={};var f=RadiantQ.ProjectModel;f.Utils=function(){f.Utils=function(){};return f.Utils}();f.Utils.toString=function(b){switch(b){case RadiantQ.Gantt.DependencyType.FinishToFinish:return"0";case RadiantQ.Gantt.DependencyType.FinishToStart:return"1";case RadiantQ.Gantt.DependencyType.StartToFinish:return"2";case RadiantQ.Gantt.DependencyType.StartToStart:return"3";default:return"1"}};f.Utils.effortToString=function(b){var e="";if(b>=RQTimeSpan.Zero_M())var e=e+"PT",
a=parseInt(Math.floor(b.getTotalHours())),e=e+(a.toString()+"H"),e=e+(b.minutes_M().toString()+"M"),e=e+(b.seconds_M().toString()+"S");return e};f.Utils.toLagString=function(b){return(10*b.getTotalMinutes()).toString()};f.Utils.tenthOfAMinuteToHours=function(b){var e=0,e=parseFloat(b);return e/600};f.Utils.toDepType=function(b){switch(b.toString()){case "0":return RadiantQ.Gantt.DependencyType.FinishToFinish;case "1":return RadiantQ.Gantt.DependencyType.FinishToStart;case "2":return RadiantQ.Gantt.DependencyType.StartToFinish;
case "3":return RadiantQ.Gantt.DependencyType.StartToStart;default:return RadiantQ.Gantt.DependencyType.FinishToStart}};f.Utils.toTimeOfDay=function(b){b=b.split(":");return ts=new RQTimeSpan(0,parseInt(b[0]),parseInt(b[1]),parseInt(b[2]))};f.Utils.convertResourceTextToAssignments=function(b,e){var a=new f.AssignmentsList;if(null!=b.AssignedResources&&""!=b.AssignedResources)for(var c=b.AssignedResources.split(","),d=0;d<c.length;d++){var g=c[d],h=g,m=100;-1!=h.indexOf("[")&&(m=RadiantQ.Gantt.ValueConverters.ConverterUtils.ParseAllocUnitsString(h.substring(g.indexOf("["))),
h=g.substring(0,h.indexOf("[")),h=h.Trim());g=e.ResourceList.getResourceByName(h);null==g&&(h=parseInt(h),null!=h&&void 0!=h&&(g=e.ResourceList.getResourceByID(h)));null!=g&&(0==a.getAssignmentByResourceID(g.ID).length?(h=e.createAssignment(),h.ResourceUID=g.ID,h.TaskUID=b.ID,h.AllocationUnits=parseInt(m),a.push(h)):a.push(a.getAssignmentByResourceID(g.ID)[0]))}return a}})();
(function(){var f=RadiantQ.ProjectModel,b=RadiantQ.Gantt;f.Project=function(a){if(0!=arguments.length){this.Model=null;this.usedtaskid=0;this._calendarCollection=new f.ProjectCalendarCollection;this.names=new f.XElementSubElementNames;this.names.IDField="UID";this.names.TaskNameField="Name";this.names.IndentLevelField="OutlineLevel";this.names.StartDateField="Start";this.names.EndDateField="Finish";this.names.EffortField="Work";this.names.DurationField="Duration";this.names.PredecessorIndicesField=
"PredecessorLink";this.names.PreferredStartTimeField="ConstraintDate";this.names.ProgressPercentField="PercentComplete";this.names.TypeField="Type";this.names.WBSField="WBS";a.Project["@xmlns"]=a.Project.xmlns;delete a.Project.xmlns;this.xmlObject=a;this.projectElem=this.xmlObject.Project;this.tasksElem=this.projectElem.Tasks;this.assgnsElem=this.projectElem.Assignments;this._resourcesElem=this.projectElem.Resources;this.assgnsElem||(this.assgnsElem={});if(!this.assgnsElem.Assignment)this.assgnsElem.Assignment=
[];else if(this.assgnsElem.Assignment&&!this.assgnsElem.Assignment.length){var b=this.assgnsElem.Assignment;this.assgnsElem.Assignment=[];this.assgnsElem.Assignment.push(b)}this.doc=this.projectElem;this._baseCalendarID=parseInt(this.projectElem.CalendarUID);this.ReadWBSIDsAsManual=!0;b=this.tasksElem;void 0!=b.Task&&void 0==b.Task.length&&(this.projectElem.Tasks={},this.projectElem.Tasks.Task=[],this.projectElem.Tasks.Task.push(b.Task));this.tasksElem=this.projectElem.Tasks;this._list=new f.ProjectTaskList(this);
this._assgnList=new f.AssignmentsList;this._resList=new f.ResourceList;var d=this._list;if(void 0!=this.tasksElem.Task)for(var b=0,e=this.tasksElem.Task;b<e.length;b++){var h=e[b];0==b?this.topProjectTask=new f.TopProjectTask(h,this.names,this.projectElem,this):(h=this.constructTask(h,this.names,this.projectElem,this),d.push(h),h.ID>this.usedtaskid&&(this.usedtaskid=h.ID))}if(void 0!=this._resourcesElem)for(d=this._resourcesElem.Resource,b=0;b<d.length;b++)e=new f.ProjectResource(d[b],this.doc),this._resList.push(e);
if(void 0!=this.assgnsElem&&void 0!=this.assgnsElem.Assignment)for(d=this.assgnsElem.Assignment,b=0;b<d.length;b++)if(e=new f.ProjectAssignment(this,d[b],this.projectElem),h=e.TaskUID,-1!=h&&null!=this.Tasks.GetTaskByID(h)){var h=this.Tasks.GetTaskByID(h),m=e.ResourceUID;0>m||null==this.ResourceList.getResourceByID(m)||(h.AssignedResources=this._assgnList.addResourceString(h.AssignedResources,e),this._assgnList.push(e))}for(b=0;b<this.Tasks.length;b++)this.Tasks[b].IsInit=!0;this.Tasks.CollectionChanged.subscribe(this.Tasks_CollectionChanged,
this);this._assgnList.CollectionChanged.subscribe(this._assgnList_CollectionChanged,this);this.ResourceList.CollectionChanged.subscribe(this.ResourceList_CollectionChanged,this);d=this.projectElem.Calendars.Calendar;if(!0==d instanceof Array)for(b=0;b<d.length;b++)e=d[b],e=new f.ProjectCalendar(e),this._calendarCollection.push(e);else d&&(e=new f.ProjectCalendar(d),this._calendarCollection.push(e));this._defaultElems={};null!=this.TopProjectTask&&(this.TopProjectTask.IsDirty=!1)}};f.Project.prototype.getDefaultNode=
function(a){var b;void 0!=this._defaultElems?b=this._defaultElems[a]:this._defaultElems={};b||(this._defaultElems[a]="");return b};f.Project.prototype.Tasks_CollectionChanged=function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var e=b.NewItems[d],f=this.Tasks.indexOf(e);f!=this.Tasks.length-1&&0!=this.Tasks.length||-1!=this.tasksElem.Task.indexOf(e.Element)?-1==this.tasksElem.Task.indexOf(e.Element)&&this.tasksElem.Task.splice(f,0,e.Element):this.tasksElem.Task.push(e.Element)}else if("Remove"==
b.Action)for(d=0;d<b.OldItems.length;d++)e=this.tasksElem.Task.indexOf(b.OldItems[d].Element),0<=e&&this.tasksElem.Task.splice(e,1)};f.Project.prototype.ResourceList_CollectionChanged=function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var e=b.NewItems[d],f=this.ResourceList.indexOf(e);f!=this.ResourceList.length-1&&0!=this.ResourceList.length||-1!=this.ResourcesElem.Resource.indexOf(e.Element)?-1==this.ResourcesElem.Resource.indexOf(e.Element)&&this.ResourcesElem.Resource.splice(f,
0,e.Element):this.ResourcesElem.Resource.push(e.Element)}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)e=this.ResourcesElem.Resource.indexOf(b.OldItems[d].Element),this.ResourcesElem.Resource.splice(e,1)};f.Project.prototype._assgnList_CollectionChanged=function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var e=b.NewItems[d],f=this._assgnList.indexOf(e);f!=this._assgnList.length-1&&0!=this._assgnList.length||-1!=this.assgnsElem.Assignment.indexOf(e.Element)?-1==this.assgnsElem.Assignment.indexOf(e.Element)&&
this.assgnsElem.Assignment.splice(f,0,e.Element):this.assgnsElem.Assignment.push(e.Element)}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)f=this.assgnsElem.Assignment.indexOf(b.OldItems[d].Element),this.assgnsElem.Assignment.splice(f,1)};f.Project.prototype.getNextUsableID=function(){return++this.usedtaskid};f.Project.prototype.calculateTasksEndTime=function(){for(var a=this.Tasks,b=0;b<a.length;b++)a[b].EndDate=this.BaseCalendar.Schedule.GetEnd(a[b].StartDate,a[b].Effort)};RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(f.Project.prototype,"ResourcesElem",{get:function(){null==this._resourcesElem&&(this._resourcesElem=[],this.projectElem.Resources={},this.projectElem.Resources.Resource=this._resourcesElem);return this._resourcesElem},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"BaseCalendarID",{get:function(){return this._baseCalendarID},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"TopProjectTask",{get:function(){return this.topProjectTask},
enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"Document",{get:function(){return this.doc},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"BaseCalendar",{get:function(){return this._calendarCollection.getCalendarById(this.BaseCalendarID)},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"Tasks",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"ResourceList",{get:function(){return this._resList},
set:function(a){this._resList!=a&&(this._resList=a)},enumerable:!0,configurable:!0}));f.Project.prototype.initFrom=function(a){this.Model=a;this.ResourceList.splice(0,this.ResourceList.length);for(var b=0;b<a.GanttResources.length;b++){var d=a.GanttResources[b],e=this.createResource();e.ID=this.getResourceID(d.ResourceID);e.ResourceName=d.ResourceName;this.ResourceList.push(e)}};f.Project.prototype.getResourceID=function(a){return this.tryParseInt(a,0)?void 0:this.ResourceList.length+1};f.Project.prototype.tryParseInt=
function(a,b){var d=b;null!=a&&0<a.length&&NaN!=a&&(d=parseInt(a));return d};f.Project.prototype.createTask=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");var a={},b=this.constructTask(a,this.names,this.projectElem);b.TaskName="New Task";b.StartDate=this.TopProjectTask.StartDate;b.Effort=RQTimeSpan.FromDays(1);b.ID=this.getNextUsableID();b.PreferredStartTime=this.TopProjectTask.StartDate;var d=Date.today().clone().toString("yyyy-MM-ddTHH:mm:ss");
a.CreateDate=d;a.IsNull="0";b.IsInit=!0;return b};f.Project.prototype.constructTask=function(a,b,d,e){return new f.ProjectTask(a,this.names,d,e||this)};f.Project.prototype.createResource=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");return new f.ProjectResource({},this.projectElem)};f.Project.prototype.createAssignment=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");
return new f.ProjectAssignment(this,{},this.projectElem)};f.Project.prototype.fromStream=function(a){var b=null;$.ajax({type:"GET",url:a,dataType:"xml text",async:!1,converters:{"xml text":function(a){return XML2jsobj(a)}},success:function(a){b=new RadiantQ.ProjectModel.Project(a);b=Object.create(b)},error:function(){}});return b};f.Project.prototype.validateAssignmentEntries=function(a){for(var b=this._assgnList.getAssignmentByTaskID(a.ID),d=f.Utils.convertResourceTextToAssignments(a,this),e=0;e<
b.length;e++){var h=b[0],m=d.getAssignmentByResourceID(h.ResourceUID);0==m.length?(h=this._assgnList.indexOf(h),this._assgnList.splice(h,1)):(m=m[0],h.AllocationUnits=m.AllocationUnits,h=d.indexOf(m),d.splice(h,1))}for(e=0;e<d.length;e++)this._assgnList.push(d[e]);this.updateAssignmentWorks(a)};f.Project.prototype.updateAssignmentWorks=function(a){var b=this._assgnList.getAssignmentByTaskID(a.ID);this.removeDummyAssignment(b);null==a.AssignedResources||void 0==a.AssignedResources||""==a.AssignedResources?
this.insertDummyAssignment(a):(this.updateAssignmentTotalWorks(a,b),this.updateAssignmentRemainingWorks(a,b))};f.Project.prototype.insertDummyAssignment=function(a){var b=this.createAssignment();b.ResourceUID=e;b.TaskUID=a.ID;b.AllocationUnits=100;b.Work=a.Effort;b.ActualWork=new RQTimeSpan(a.Effort-a.RemainingWork);b.RemainingWork=a.RemainingWork;b.Start=a.StartDate;b.Stop=null==this.Model||null==this.Model.WorkTimeSchedule?a.StartDate.addTimeSpan(b.ActualWork):this.Model.WorkTimeSchedule.GetEnd(b.Start,
b.ActualWork);b.Finish=a.EndDate;this._assgnList.push(b)};var e=-65535;f.Project.prototype.removeDummyAssignment=function(a){for(var b=a.length,d=0;d<b;d++){var f=a[d];if(f.ResourceUID==e){this._assgnList.remove(f);break}}};f.Project.prototype.updateAssignmentTotalWorks=function(a,b){for(var d=a.Effort,e=RQTimeSpan.Zero,f=b.length,m=0;m<f;m++){var k=b[m];if(k.Work==RQTimeSpan.Zero){e=RQTimeSpan.Zero;break}e=new RQTimeSpan(e+k.Work)}if(e!=d)for(var m=0,l=RQTimeSpan.Zero,n=0;n<f;n++){k=b[n];m++;var p=
1/f;e>RQTimeSpan.Zero&&(p=k.Work.Ticks/e.Ticks);k.Work=m==f?new RQTimeSpan(d-l):RQTimeSpan.fromTicks(parseInt(d.Ticks*p));l=new RQTimeSpan(l+k.Work)}};f.Project.prototype.updateAssignmentRemainingWorks=function(a,b){for(var d=a.RemainingWork,e=RQTimeSpan.Zero,f=b.length,m=0;m<f;m++){var k=b[m];k.Start=a.StartDate;k.ActualWork=k.Work;if(k.RemainingWork==RQTimeSpan.Zero||null==k.RemainingWork){e=RQTimeSpan.Zero;break}e=new RQTimeSpan(e+k.RemainingWork)}if(!e.equals(d))for(var m=0,l=RQTimeSpan.Zero,
n=0;n<f;n++){k=b[n];m++;var p=1/f;e>RQTimeSpan.Zero&&(p=k.RemainingWork.Ticks/e.Ticks);k.RemainingWork=m==f?new RQTimeSpan(d-l):RQTimeSpan.fromTicks(parseInt(d.Ticks*p));k.ActualWork=new RQTimeSpan(k.Work-k.RemainingWork);k.Start=a.StartDate;k.Stop=null==this.Model||null==this.Model.WorkTimeSchedule?a.StartDate.addTimeSpan(k.ActualWork):this.Model.WorkTimeSchedule.GetEnd(k.Start,k.ActualWork);k.Resume=DateTime.MinValue;k.Finish=a.EndDate;l=new RQTimeSpan(l+k.RemainingWork)}};f.Project.prototype.SortOrderToListIndex=
function(a){return a-1};f.ProjectTask=function(a,b,d,e){this._project=null;this._id=0;this._duration=this._effort=this._endTime=this._startTime=this._taskName=null;this._sortOrder=0;this._preferredStartTime=null;this._indendLevel=0;this._predecessorIndices=this._type=null;this._progressPercent=0;this._WBS=this._description=this._assignedResources=null;this.IsInit=!1;this.SubElemNames=b;this.Element=a;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.SortOrderChanged=new ObjectEvent("SortOrderChanged");
this.IsDirty=!1;if(a,b,e)this._project=e,this._doc=d,this._id=this.getIntDescendantValue(this.SubElemNames.IDField,0),this._taskName=this.getDescendantValue(this.SubElemNames.TaskNameField),this._startTime=this.getDateDescendantValue(this.SubElemNames.StartDateField),this._endTime=this.getDateDescendantValue(this.SubElemNames.EndDateField),this._effort=this.getTimeSpanDescendantValue(this.SubElemNames.EffortField),this._duration=this.getTimeSpanDescendantValue(this.SubElemNames.DurationField),this._sortOrder=
this.getIntDescendantValue(this.SubElemNames.SortOrderField,0),this._preferredStartTime=this.getDateDescendantValue(this.SubElemNames.PreferredStartTimeField),this._indendLevel=this.getIntDescendantValue(this.SubElemNames.IndentLevelField,0)-1,this._type=this.getIntDescendantValue(this.SubElemNames.TypeField,0),this._predecessorIndices=this.preparePredIndicesString(),this._progressPercent=this.getDoubleDescendantValue(this.SubElemNames.ProgressPercentField,0),this._assignedResources=this.Element.AssignedResources,
this._description=this.getDescendantValue(this.SubElemNames.DescriptionField),this._WBS=this.getDescendantValue(this.SubElemNames.WBSField)};f.ProjectTask.prototype.UpdateFinish=function(){this.EndDate=this.Project.BaseCalendar.Schedule.GetEnd(this.StartDate,this.Effort)};f.ProjectTask.prototype.onSortOrderChanged=function(a){null!=this.SortOrderChanged&&this.SortOrderChanged.raise(this,a)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.ProjectTask.prototype,"Project",{get:function(){return this._project},
enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"ID",{get:function(){return this._id},set:function(a){if(this._id!=a){var b=this._id;this._id=a;this.Element[this.SubElemNames.IDField]=a.toString();this.OnPropertyChanged("ID",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"TaskName",{get:function(){return this._taskName},set:function(a){if(this._taskName!=a){var b=this._taskName;this._taskName=a;this.Element[this.SubElemNames.TaskNameField]=
a.toString();this.OnPropertyChanged("TaskName",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"StartDate",{get:function(){return this._startTime},set:function(a){if(this._startTime!=a){var b=this._startTime;this._startTime=a;this.Element[this.SubElemNames.StartDateField]=a.toString("yyyy-MM-ddTHH:mm:ss");this.OnPropertyChanged("StartDate",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"EndDate",
{get:function(){return this._endTime},set:function(a){if(this._endTime!=a){var b=this._endTime;this._endTime=a;this.Element[this.SubElemNames.EndDateField]=a.toString("yyyy-MM-ddTHH:mm:ss");this.OnPropertyChanged("EndDate",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"Effort",{get:function(){var a=this._effort;return RQTimeSpan.Zero.equals(a)||a==RQTimeSpan.Zero?this.Duration:a},set:function(a){if(this._effort.equals&&!1==this._effort.equals(a)||
this._effort!=a){var b=this._effort;this._effort=a;this.Element[this.SubElemNames.EffortField]=f.Utils.effortToString(a);this.OnPropertyChanged("Effort",b,a);this.IsDirty=!0}this.Duration=a},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"Duration",{get:function(){return this._duration},set:function(a){if(this._duration!=a){var b=this._duration;this._duration=a;this.Element[this.SubElemNames.DurationField]=f.Utils.effortToString(a);this.OnPropertyChanged("Duration",
b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"SortOrder",{get:function(){return this._sortOrder},set:function(a){if(this._sortOrder!=a){var b=this._sortOrder;this._sortOrder=a;this.Element[this.SubElemNames.SortOrderField]=a.toString();this.OnPropertyChanged("SortOrder",b,a);this.onSortOrderChanged(a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"WBS",{get:function(){return this.Project.ReadWBSIDsAsManual?
"*"+this._WBS:this._WBS},set:function(a){var b=this.stringTrimStart(a,"*");if(this._WBS!=b){var d=this._WBS;this._WBS=b;this.Element[this.SubElemNames.WBSField]=b.toString();this.OnPropertyChanged("WBS",d,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"PreferredStartTime",{get:function(){return 4==(null==this.Element.ConstraintType||void 0==this.Element.ConstraintType?0:this.Element.ConstraintType)?this._preferredStartTime:Date.today().clone()},
set:function(a){if(this._preferredStartTime!=a){var b=this._preferredStartTime;this._preferredStartTime=a;this.Element.ConstraintType=4;this.Element[this.SubElemNames.PreferredStartTimeField]=a.toString("yyyy-MM-ddTHH:mm:ss");this.OnPropertyChanged("PreferredStartTime",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"IndentLevel",{get:function(){return this._indendLevel},set:function(a){if(this._indendLevel!=a){var b=this._indendLevel;this._indendLevel=
a;this.Element[this.SubElemNames.IndentLevelField]=(a+1).toString();this.OnPropertyChanged("IndentLevel",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"Type",{get:function(){return this._type},set:function(a){if(this._type!=a){var b=this._type;this._type=a;this.Element[this.SubElemNames.TypeField]=a.toString();this.OnPropertyChanged("Type",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"RemainingWork",
{get:function(){return new RQTimeSpan(this.Effort-RQTimeSpan.fromTicks(parseFloat(this.Effort.Ticks*(this.ProgressPercent/100))))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"PredecessorIndices",{get:function(){return this._predecessorIndices},set:function(a){if(this._predecessorIndices!=a){var b=this._predecessorIndices;this._predecessorIndices=a;this.updatePredIndicesString(a);this.OnPropertyChanged("PredecessorIndices",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),
Object.defineProperty(f.ProjectTask.prototype,"ProgressPercent",{get:function(){return this._progressPercent},set:function(a){if(this._progressPercent!=a){var b=this._progressPercent;this._progressPercent=a;this.Element[this.SubElemNames.ProgressPercentField]=a.toString();this.OnPropertyChanged("ProgressPercent",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"AssignedResources",{get:function(){var a=this._assignedResources;return null!=a&&void 0!=
a?a:""},set:function(a){if(this._assignedResources!=a){var b=this._assignedResources;this._assignedResources=a;this.OnPropertyChanged("AssignedResources",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"Description",{get:function(){return this._description},set:function(a){if(this._description!=a){var b=this._description;this._description=a;this.Element[this.SubElemNames.DescriptionField]=a.toString();this.OnPropertyChanged("Description",b,a);this.IsDirty=
!0}},enumerable:!0,configurable:!0}));f.ProjectTask.prototype.stringTrimStart=function(a,b){if(!b)return a;for(var d=a;d.substr(0,b.length)==b;)d=d.substr(b.length);return d};f.ProjectTask.prototype.preparePredIndicesString=function(){var a=this.Element[this.SubElemNames.PredecessorIndicesField],c="";if(void 0==a)return c;!1==$.isArray(a)&&(a=[a]);$.each(a,function(a,e){c+=e.PredecessorUID.toString();var h=b.DependencyType.FinishToStart,h=e.Type,h=f.Utils.toDepType(h.toString());switch(h){case b.DependencyType.FinishToFinish:c+=
"FF";break;case b.DependencyType.StartToFinish:c+="SF";break;case b.DependencyType.StartToStart:c+="SS"}h=0;h=e.LinkLag;h=f.Utils.tenthOfAMinuteToHours(h.toString());0<h?c+="+ "+h:0>h&&(c+="- "+-h);c+=","});return c.slice(0,-1)};f.ProjectTask.prototype.updatePredIndicesString=function(a){var c=this.Element.PredecessorLink;null!=c&&void 0!=c&&delete this.Element.PredecessorLink;if(null!=a&&""!=a){var c=[],d=[],e=[],h=this._project.Tasks;b.Model.DataBoundGanttModel.ProcessPredecessorString(a,1,c,d,
e,void 0);for(a=0;a<c.length;a++){var m=c[a];h.ContainsTask(m)&&(m=h.GetTaskByID(c[a]).ID);var k={};k.PredecessorUID=m;k.Type=f.Utils.toString(d[a]);k.LinkLag=f.Utils.toLagString(e[a]);this.Element.PredecessorLink=k}}};f.ProjectTask.prototype.appendChildNode=function(a,b,d){a=this._doc.createElementNS(this._project.projectElem.documentElement.namespaceURI,a);var e=this._doc.createTextNode("");e.nodeValue=b;a.appendChild(e);b=this._doc.createTextNode("");d.appendChild(b);d.appendChild(a)};f.ProjectTask.prototype.ToString=
function(){return"TaskName: "+this.TaskName+", ID: "+this.ID+", Start: "+this.StartDate+", End: "+this.EndDate};f.ProjectTask.prototype.getDescendantValue=function(a){if(null==a)return null;a=this.Element[a];return null==a||void 0==a?"":a};f.ProjectTask.prototype.getIntDescendantValue=function(a,b){var d=this.Element[a];return null==a||null==d||void 0==d||null==d?b:parseInt(Math.floor(parseFloat(d)))};f.ProjectTask.prototype.getDoubleDescendantValue=function(a,b){var d=this.Element[a];return null==
a||null==d||void 0==d?b:null==d?0:parseFloat(d)};f.ProjectTask.prototype.getDateDescendantValue=function(a){var b=Date.today().clone();a=this.Element[a];null!=a&&(b=new Date(a));return b};f.ProjectTask.prototype.getTimeSpanDescendantValue=function(a){var b=this.Element[a];return null==a||null==b||void 0==b||null==b?RQTimeSpan.Zero:RQTimeSpan.parse(b)};f.ProjectTask.prototype.setDescendantValue=function(a,b){this.Element[a]=b.toString()};f.ProjectTask.prototype.OnPropertyChanged=function(a,b,d){this.PropertyChanged&&
0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:a,OldValue:b,value:d})};f.ProjectResource=function(){f.ProjectResource=function(a,b){this.Element=a;this._doc=b;this._id=this.getID();this._resourceName=this.getResourceName()};return f.ProjectResource}();RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.ProjectResource.prototype,"ID",{get:function(){return this._id},set:function(a){this._id!=a&&(this._id=a,this.Element.UID=a.toString(),this.IsDirty=!0)},enumerable:!0,
configurable:!0}),Object.defineProperty(f.ProjectResource.prototype,"ResourceName",{get:function(){return this._resourceName},set:function(a){this._resourceName!=a&&(this._resourceName=a,this.Element.Name=a.toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}));f.ProjectResource.prototype.toString=function(){return"Name: "+this.ResourceName+", ID:"+this.ID};f.ProjectResource.prototype.getID=function(){var a=this.Element.UID;return null==a||void 0==a?0:parseInt(Math.floor(parseFloat(a)))};f.ProjectResource.prototype.getResourceName=
function(){var a=this.Element.Name;return null!=a&&void 0!=a?a:""};f.ResourceList=function(){new RadiantQ.RQ_ObservableCollection(this);this.resourcesByID=new b.Dictionary;this.resourcesByName=new b.Dictionary;this.CollectionChanged.subscribe(function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var e=b.NewItems[d];this.resourcesByID.Add(e.ID,e);this.resourcesByName.Add(e.ResourceName,e)}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)e=b.OldItems[d],this.resourcesByID.Remove(e.ID),
this.resourcesByName.Remove(e.ResourceName)}.bind(this))};f.ResourceList.prototype=[];f.ResourceList.prototype.getResourceByID=function(a){return this.resourcesByID.Contains(a)?this.resourcesByID[a]:null};f.ResourceList.prototype.getResourceByName=function(a){return this.resourcesByName.Contains(a)?this.resourcesByName[a]:null};f.ProjectAssignment=function(a,b,d){NotifyPropertyChanged.apply(this,arguments);this.Project=null;this.Project=a;this.Element=b;this._doc=d;this._taskUID=this.getTaskUID();
this._resourceUID=this.getResourceUID();this._allocationUnits=this.getUnits();this._remainingWork=this.getRemainingWork();this._actualWork=this.getTimeSpanDescendantValue("ActualWork");this._work=this.getTimeSpanDescendantValue("Work");this._start=this.getDateDescendantValue("Start");this._stop=this.getDateDescendantValue("Stop");this._finish=this.getDateDescendantValue("Finish");this._resume=this.getDateDescendantValue("Resume")};f.ProjectAssignment.prototype=new NotifyPropertyChanged;RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(f.ProjectAssignment.prototype,"TaskUID",{get:function(){return this._taskUID},set:function(a){this._taskUID!=a&&(this._taskUID=a,this.Element.TaskUID=a.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"ResourceUID",{get:function(){return this._resourceUID},set:function(a){this._resourceUID!=a&&(this._resourceUID=a,this.Element.ResourceUID=a.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,
"AllocationUnits",{get:function(){return parseInt(Math.floor(100*this._allocationUnits))},set:function(a){this._allocationUnits!=a&&(this._allocationUnits=a,this.Element.Units=(a/100).toString())},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"RemainingWork",{get:function(){return this._remainingWork},set:function(a){this._remainingWork!=a&&(this._remainingWork=a,this.Element.RemainingWork=f.Utils.effortToString(a))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,
"ActualWork",{get:function(){return this._actualWork},set:function(a){this._actualWork!=a&&(this._actualWork=a,this.Element.ActualWork=f.Utils.effortToString(a))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Work",{get:function(){return this._work},set:function(a){this._work!=a&&(this._work=a,this.Element.Work=f.Utils.effortToString(a))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Start",{get:function(){return this._start},
set:function(a){this._start!=a&&(this._start=a,this.Element.Start=a.toString("yyyy-MM-ddTHH:mm:ss"))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Stop",{get:function(){return this._stop},set:function(a){this._stop!=a&&(this._stop=a,this.Element.Stop=a.toString("yyyy-MM-ddTHH:mm:ss"))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Finish",{get:function(){return this._finish},set:function(a){this._finish!=a&&(this._finish=
a,this.Element.Finish=a.toString("yyyy-MM-ddTHH:mm:ss"))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Resume",{get:function(){return this._resume},set:function(a){this._resume!=a&&(this._resume=a,this.Element.Resume=a.toString("yyyy-MM-ddTHH:mm:ss"))},enumerable:!0,configurable:!0}));f.ProjectAssignment.prototype.toString=function(){return"TaskID: "+this.TaskUID+", ResourceUID: "+this.ResourceUID};f.ProjectAssignment.prototype.setDescendantValue=function(a,
b){this.Element[a]=b.toString()};f.ProjectAssignment.prototype.getTaskUID=function(){var a=this.Element.TaskUID;return null!=a&&void 0!=a?parseInt(a):0};f.ProjectAssignment.prototype.getResourceUID=function(){var a=this.Element.ResourceUID;return null!=a&&void 0!=a?parseInt(a):0};f.ProjectAssignment.prototype.getUnits=function(){var a=this.Element.Units;return null!=a&&void 0!=a?parseInt(a):null};f.ProjectAssignment.prototype.getRemainingWork=function(){var a=this.Element.RemainingWork;return null!=
a&&void 0!=a?a:null};f.ProjectAssignment.prototype.getDateDescendantValue=function(a){var b=Date.today().clone();a=this.Element[a];null!=a&&(b=new Date(a));return b};f.ProjectAssignment.prototype.getTimeSpanDescendantValue=function(a){var b=this.Element[a];return null==a||null==b||void 0==b||null==b?RQTimeSpan.Zero:RQTimeSpan.parse(b)};f.AssignmentsList=function(){var a=this;new RadiantQ.RQ_ObservableCollection(a);a.assignmentsByTaskID=new b.Dictionary;a.assignmentsByResID=new b.Dictionary;a.CollectionChanged.subscribe(function(b,
d){if("Add"==d.Action)for(var e=0;e<d.NewItems.length;e++){var f=d.NewItems[e];!1==a.assignmentsByTaskID.Contains(f.TaskUID)&&a.assignmentsByTaskID.Add(f.TaskUID,[]);!1==a.assignmentsByResID.Contains(f.ResourceUID)&&a.assignmentsByResID.Add(f.ResourceUID,[]);a.assignmentsByTaskID[f.TaskUID].push(f);a.assignmentsByResID[f.ResourceUID].push(f)}else if("Remove"==d.Action)for(e=0;e<d.OldItems.length;e++){var f=d.OldItems[e],m=a.assignmentsByTaskID[f.TaskUID].indexOf(f);a.assignmentsByTaskID[f.TaskUID].splice(m,
1);m=a.assignmentsByResID[f.ResourceUID].indexOf(f);a.assignmentsByResID[f.ResourceUID].splice(m,1)}})};f.AssignmentsList.prototype=[];f.AssignmentsList.prototype.getAssignmentByTaskID=function(a){return this.assignmentsByTaskID.Contains(a)?this.assignmentsByTaskID[a]:new f.AssignmentsList};f.AssignmentsList.prototype.getAssignmentByResourceID=function(a){return this.assignmentsByResID.Contains(a)?this.assignmentsByResID[a]:new f.AssignmentsList};f.AssignmentsList.prototype.convertResourceToString=
function(a){a=""+(a.Project.ResourceList.getResourceByID(a.ResourceUID).ResourceName+" "+this.allocationUnitText(a));return a=a.trimEnd()};f.AssignmentsList.prototype.addResourceString=function(a,b){var d=a;null!=d&&""!=d&&(d+=",");return d+=this.convertResourceToString(b)};f.AssignmentsList.prototype.allocationUnitText=function(a){return 100==a.AllocationUnits?"":"["+parseFloat(a.AllocationUnits/100).toString()+"%]"};f.XElementSubElementNames=function(){this.WBSField=this.TypeField=this.SortOrderField=
this.DescriptionField=this.AssignedResourcesField=this.ProgressPercentField=this.PreferredStartTimeField=this.DurationField=this.EffortField=this.EndDateField=this.PredecessorIndicesField=this.StartDateField=this.IndentLevelField=this.TaskNameField=this.IDField=null};f.ProjectTaskList=function(a){new RadiantQ.RQ_ObservableCollection(this);this.tasksByID=new b.Dictionary;this._project=a;this.CollectionChanged.subscribe(function(a,b){if("Add"==b.Action)for(var e=0;e<b.NewItems.length;e++){var f=b.NewItems[e];
f.SortOrderChanged.subscribe(this.item_SortOrderChanged,this);f.PropertyChanged.subscribe(this.item_PropertyChanged,this);this.tasksByID.Add(f.ID,f);this._project.TopProjectTask.IsDirty=!0}else if("Remove"==b.Action)for(e=0;e<b.OldItems.length;e++)f=b.OldItems[e],f.SortOrderChanged.unsubscribe(this.item_SortOrderChanged,this),f.PropertyChanged&&f.PropertyChanged.unsubscribe(this.item_PropertyChanged,this),this.tasksByID.Remove(f.ID)},this)};f.ProjectTaskList.prototype=[];f.ProjectTaskList.prototype.item_PropertyChanged=
function(a,b){if("StartDate"==b.PropertyName||"EndDate"==b.PropertyName||"Effort"==b.PropertyName)this._project.TopProjectTask.IsDirty=!0;if("Effort"==b.PropertyName){var d=a;d.IsInit&&this._project.updateAssignmentWorks(d)}"AssignedResources"==b.PropertyName&&(d=a,d.IsInit&&this._project.validateAssignmentEntries(d))};f.ProjectTaskList.prototype.item_SortOrderChanged=function(a,b){var d=this.indexOf(a),e=this._project.SortOrderToListIndex(b);d!=e&&(this.splice(d,1),this.length<=e?this.push(a):this.splice(e,
0,a))};f.ProjectTaskList.prototype.GetTaskByID=function(a){return this.tasksByID[a]};f.ProjectTaskList.prototype.ContainsTask=function(a){return this.tasksByID.Contains(a)};f.TopProjectTask=function(a,b,d,e){this.constructor(a,b,d,e);this._validating=this.IsDirty=null};f.TopProjectTask.prototype=new f.ProjectTask;RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.TopProjectTask.prototype,"StartDate",{get:function(){this.IsDirty&&this.validateDates();return this._startTime},set:function(a){this._startTime=
a},enumerable:!0,configurable:!0}),Object.defineProperty(f.TopProjectTask.prototype,"EndDate",{get:function(){this.IsDirty&&this.validateDates();return this._endTime},set:function(a){this._endTime=a},enumerable:!0,configurable:!0}));f.TopProjectTask.prototype.validateDates=function(){if(!this._validating)try{if(this._validating=!0,this.IsDirty){var a=this.StartDate,b=this.EndDate,d;for(d in this.Project.Tasks)d.StartDate<a&&(a=d.StartDate),d.EndDate>b&&(b=d.EndDate);this.StartDate=a;this.EndDate=
b;this.IsDirty=!1}}finally{this._validating=!1}};f.ProjectCalendarCollection=function(){new RadiantQ.RQ_ObservableCollection(this);this._dictCalendarsById=new b.Dictionary;this.CollectionChanged.subscribe(function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var e=b.NewItems[d];this._dictCalendarsById.Add(e.ID,e)}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)this._dictCalendarsById.Remove(b.OldItems[d].ID)},this)};f.ProjectCalendarCollection.prototype=[];f.ProjectCalendarCollection.prototype.getCalendarById=
function(a){return!1==this._dictCalendarsById.Contains(a)?null:this._dictCalendarsById[a]};f.ProjectCalendar=function(a){this._calendarElem=a;this._schedule=this._calWithExceptions=null;this.ID=this.getUID(this._calendarElem);if(this.IsBaseCalendar){var c=this._calendarElem.WeekDays.WeekDay,d=[];a=new RadiantQ.Gantt.Dictionary;for(var e=new RadiantQ.Gantt.Dictionary,h=0;h<c.length;h++){var m=c[h];if(0<this.getWeekDay(m))m=new f.ProjectWeekDay(c[h]),d.push(m);else for(var k=f.ProjectWeekDay.isDayWorking(m),
l=this.getDaysRangeInWeekDay(m),n=[],p=0;p<l.length;p++){var q=l[p];f.ProjectWeekDay.parseWorkingTimes(m.WorkingTimes,n);q=new RadiantQ.Gantt.ExceptionDay(q.Date().toShortDateString(),q,n);k?a.Add(q):e.Add(q)}}c=new b.Calendar(this.ID,d,"Calendar ID: "+this.ID);d=[];for(h=0;7>h;h++)d.push(RadiantQ.Gantt.WeekDay.Undefined);this._calWithExceptions=new RadiantQ.Gantt.CalendarWithExceptions(c,d,a,e)}};f.ProjectCalendar.prototype.getUID=function(a){a=this._calendarElem.UID;return null==a?-1:parseInt(a)};
f.ProjectCalendar.prototype.getWeekDay=function(a){a=a.DayType;return null==a?0:parseInt(a)};f.ProjectCalendar.prototype.getDaysRangeInWeekDay=function(a){var b=[],d=a.TimePeriod;if(null==d)return b;a=new Date(d.ToDate);d=new Date(d.FromDate);do b.push(d),d+=TimeSpan.FromDays(1);while(d.Date<a.Date);return b};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.ProjectCalendar.prototype,"Schedule",{get:function(){null==this._schedule&&(this._schedule=RadiantQ.Gantt.CalendarWithExceptions.CreateWorkTimeSchedule(this._calWithExceptions));
return this._schedule},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectCalendar.prototype,"IsBaseCalendar",{get:function(){var a=this._calendarElem.IsBaseCalendar;return null==a?!0:0<parseInt(a)?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectCalendar.prototype,"BaseCalendarID",{get:function(){var a=this._calendarElem.BaseCalendarUID;return null==a?-1:parseInt(a)},enumerable:!0,configurable:!0}));f.ProjectWeekDay=function(a){this.base=b.WeekDay;this.base();this._weekDay=
a;this.IsWorkingDay=f.ProjectWeekDay.isDayWorking(this._weekDay);elem=this._weekDay.WorkingTimes;f.ProjectWeekDay.parseWorkingTimes(elem,this.WorkingTimes)};f.ProjectWeekDay.prototype=new b.WeekDay;f.ProjectWeekDay.isDayWorking=function(a){a=a.DayWorking;return null==a?!0:Boolean(parseInt(a))};f.ProjectWeekDay.parseWorkingTimes=function(a,c){if(null!=a)for(var d=a.WorkingTime,e=RQTimeSpan.Zero,h=0;h<d.length;h++){var m=new f.ProjectWorkDayWorkingTime(d[h]);m.From==e&&m.From==m.To&&(m=new b.WorkDayWorkingTime(e,
new RQTimeSpan(24,0,0)));c.push(m)}};f.ProjectWorkDayWorkingTime=function(a){this.From=f.Utils.toTimeOfDay(a.FromTime.toString());this.To=f.Utils.toTimeOfDay(a.ToTime.toString())}})();RadiantQ.ExcelModel={};
(function(){var f=RadiantQ.ExcelModel;f.ExcelModel=function(){};f.ExcelModel.prototype.saveTo=function(b){var e=new f.Workbook;e.Worksheet=new f.Worksheet;var a=new f.Style;a.IsBold=!0;a.ID="headerColumnStyle";e.Styles.push(a);a=new f.Style;a.Format="M-d-yyyy";a.ID="startTimeColumnStyle";e.Styles.push(a);var a=[],c=new f.Row;c.StyleID="headerColumnStyle";var d=new f.Cell;d.Text="ID";c.Cells.push(d);d=new f.Cell;d.Text="Task Name";c.Cells.push(d);d=new f.Cell;d.Text="WBSID";c.Cells.push(d);d=new f.Cell;
d.Text="Start Date";c.Cells.push(d);d=new f.Cell;d.Text="Effort";c.Cells.push(d);d=new f.Cell;d.Text="PredecessorIndices";c.Cells.push(d);d=new f.Cell;d.Text="SortOrder";c.Cells.push(d);d=new f.Cell;d.Text="Description";c.Cells.push(d);a.push(c);var g=[],c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=100;g.push(c);c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=50;g.push(c);
c=new f.Column;c.Width=230;g.push(c);for(var h=b.length,m=0;m<h;m++){var k=b[m],c=new f.Row,d=new f.Cell;d.Text=k.TaskID;c.Cells.push(d);d=new f.Cell;d.Text=k.TaskName;c.Cells.push(d);d=new f.Cell;d.Text=k.WBSID;c.Cells.push(d);d=new f.Cell;d.DateTime=k.StartTime;d.StyleID="startTimeColumnStyle";c.Cells.push(d);d=new f.Cell;d.Text=RadiantQ.ProjectModel.Utils.effortToString(k.CompletedEffort);c.Cells.push(d);d=new f.Cell;d.Text=k.PredecessorIndices;c.Cells.push(d);d=new f.Cell;d.Number=k.SortOrder;
c.Cells.push(d);d=new f.Cell;d.Text=k.Description;c.Cells.push(d);a.push(c)}e.Worksheet.Columns=g;e.Worksheet.Rows=a;return e.writeXml()};f.Workbook=function(){this.Worksheet=null;this.Styles=[];this.XMLElement=null};f.Workbook.prototype.writeXml=function(){var b=this.XMLElement,b={"ss:Workbook":{}};b["ss:Workbook"]["@xmlns:ss"]="urn:schemas-microsoft-com:office:spreadsheet";b["ss:Workbook"]["ss:Styles"]={};b["ss:Workbook"]["ss:Styles"]["ss:Style"]=[];for(var e=this.Styles.length,a=0;a<e;a++){var c=
this.Styles[a].writeXml();b["ss:Workbook"]["ss:Styles"]["ss:Style"].push(c)}this.Worksheet.writeXml(b["ss:Workbook"]);return b};f.Style=function(){this.IsBold=!1;this.ID="";this.FontSize=0;this.Format=this.FontName=""};f.Style.prototype.writeXml=function(){var b={};b["@ss:ID"]=this.ID;b["ss:Font"]={};b["ss:Font"]["@ss:FontName"]=this.FontName;b["ss:Font"]["@ss:FontSize"]=this.FontSize.toString();b["ss:Font"]["@ss:Bold"]=this.IsBold.toString();b["ss:NumberFormat"]={};b["ss:NumberFormat"]["@ss:Format"]=
this.Format;return b};f.Worksheet=function(){this.Name="sheet1";this.Columns=[];this.Rows=[]};f.Worksheet.prototype.writeXml=function(b){b["ss:Worksheet"]={};b["ss:Worksheet"]["@ss:Name"]=this.Name;b["ss:Worksheet"]["ss:Table"]={};b["ss:Worksheet"]["ss:Table"]["ss:Column"]=[];for(var e=this.Columns.length,a=0;a<e;a++){var c=this.Columns[a].writeXml();b["ss:Worksheet"]["ss:Table"]["ss:Column"].push(c)}e=this.Rows.length;b["ss:Worksheet"]["ss:Table"]["ss:Row"]=[];for(a=0;a<e;a++)c=this.Rows[a].writeXml(),
b["ss:Worksheet"]["ss:Table"]["ss:Row"].push(c)};f.Column=function(){this.Width=100};f.Column.prototype.writeXml=function(){var b={};b["@ss:Width"]=this.Width;return b};f.Row=function(){this.Cells=[];this.StyleID=null};f.Row.prototype.writeXml=function(){var b={};b["@ss:StyleID"]=this.StyleID;b["ss:Cell"]=[];for(var e=this.Cells.length,a=0;a<e;a++){var c=this.Cells[a].writeXml();b["ss:Cell"].push(c)}return b};f.Cell=function(){this.StyleID=this.Formate=this.DateTime=this.Number=this.Text=null};f.Cell.prototype.writeXml=
function(){var b={};b["@ss:StyleID"]=this.StyleID;b["ss:Data"]={};this.DateTime?(b["ss:Data"]["@ss:Type"]="DateTime",b["ss:Data"]["#text"]=this.DateTime.toString("yyyy-MM-ddTHH:mm:ss")):this.Number?(b["ss:Data"]["@ss:Type"]="Number",b["ss:Data"]["#text"]=this.Number):(b["ss:Data"]["@ss:Type"]="String",b["ss:Data"]["#text"]=this.Text);return b};f.ExcelTask=function(){this._taskID=0;this._compEffort=this._startTime=this._taskName=null;this._sortOrder=0;this._WBSID=this._description=this._predIndices=
null;this.PropertyChanged=new ObjectEvent("PropertyChanged")};f.ExcelTask.prototype.onSortOrderChanged=function(b){null!=this.SortOrderChanged&&this.SortOrderChanged.raise(this,b)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.ExcelTask.prototype,"TaskID",{get:function(){return this._taskID},set:function(b){if(this._taskID!=b){var e=this._taskID;this._taskID=b;this.OnPropertyChanged("TaskID",e,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"TaskName",{get:function(){return this._taskName},
set:function(b){if(this._taskName!=b){var e=this._taskName;this._taskName=b;this.OnPropertyChanged("TaskName",e,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"StartTime",{get:function(){return this._startTime},set:function(b){if(this._startTime!=b){var e=this._startTime;this._startTime=b;this.OnPropertyChanged("StartTime",e,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"CompletedEffort",{get:function(){return this._compEffort},
set:function(b){if(this._compEffort!=b){var e=this._compEffort;this._compEffort=b;this.OnPropertyChanged("CompletedEffort",e,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"SortOrder",{get:function(){return this._sortOrder},set:function(b){if(this._sortOrder!=b){var e=this._sortOrder;this._sortOrder=b;this.OnPropertyChanged("SortOrder",e,b);this.onSortOrderChanged(b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"WBSID",{get:function(){return this._WBSID},
set:function(b){if(this._WBSID!=b){var e=this._WBSID;this._WBSID=b;this.OnPropertyChanged("WBSID",e,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"PredecessorIndices",{get:function(){return this._predIndices},set:function(b){if(this._predIndices!=b){var e=this._predIndices;this._predIndices=b;this.OnPropertyChanged("PredecessorIndices",e,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"Description",{get:function(){return this._description},
set:function(b){if(this._description!=b){var e=this._description;this._description=b;this.OnPropertyChanged("Description",e,b)}},enumerable:!0,configurable:!0}));f.ExcelTask.prototype.OnPropertyChanged=function(b,e,a){this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:b,OldValue:e,value:a})}})();
(function(f,b,e,a){function c(a,b){this.element=a;this.settings=f.extend({},h,b);this._defaults=h;this._name=g;this.init()}function d(a){return(a.filename?a.filename:"table2excel")+(a.fileext?a.fileext:".xlsx")}var g="table2excel",h={exclude:".noExl",name:"Table2Excel"};c.prototype={init:function(){var a=this;a.template={head:'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><meta http-equiv="content-type" content="application/vnd.ms-excel; charset=UTF-8"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets>',
sheet:{head:"<x:ExcelWorksheet><x:Name>",tail:"</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet>"},mid:"</x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>",table:{head:"<table>",tail:"</table>"},foot:"</body></html>"};a.tableRows=[];f(a.element).each(function(b,c){var d="";f(c).find("tr").not(a.settings.exclude).each(function(a,b){d+="<tr>"+f(b).html()+"</tr>"});a.tableRows.push(d)});a.tableToExcel(a.tableRows,a.settings.name,a.settings.sheetName)},
tableToExcel:function(a,c,g){var h="",p;this.uri="data:application/vnd.ms-excel;base64,";this.base64=function(a){return b.btoa(unescape(encodeURIComponent(a)))};this.format=function(a,b){return a.replace(/{(\w+)}/g,function(a,c){return b[c]})};g="undefined"===typeof g?"Sheet":g;this.ctx={worksheet:c||"Worksheet",table:a,sheetName:g};h=this.template.head;if(f.isArray(a))for(p in a)h+=this.template.sheet.head+g+p+this.template.sheet.tail;h+=this.template.mid;if(f.isArray(a))for(p in a)h+=this.template.table.head+
"{table"+p+"}"+this.template.table.tail;h+=this.template.foot;for(p in a)this.ctx["table"+p]=a[p];delete this.ctx.table;"undefined"!==typeof msie&&0<msie||navigator.userAgent.match(/Trident.*rv\:11\./)?(a=e.createElement("iframe"),a.id="__RQ_iframe",a.width="100%",a.height="100%",f("#__RQ_iframeCont").remove(),c=f("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(a),f(e.body).append(c),a.contentWindow.document.open("text/html","replace"),a.contentWindow.document.write(this.format(h,
this.ctx)),a.contentWindow.document.execCommand("SaveAs",!0,d(this.settings)),a.contentWindow.document.close()):(a=this.uri+this.base64(this.format(h,this.ctx)),h=e.createElement("a"),h.download=d(this.settings),h.href=a,e.body.appendChild(h),h.click||(a=e.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,b),h.dispatchEvent(a)),h.click(),e.body.removeChild(h));return!0}};f.fn[g]=function(a){var b=this;b.each(function(){f.data(b,"plugin_"+g,new c(this,a))});return b}})(jQuery,window,document);
(function(f){var b=null,e=0;createSVG=function(a,c){var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("version","1.1");d.setAttribute("viewBox","0 0 1 1");d.setAttribute("preserveAspectRatio","none");d.setAttribute("height","21px");void 0!=a.y2?(b=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),b.setAttribute("id","gradient"),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("x1",""+a.x1+"%"),b.setAttribute("y1",""+a.y1+"%"),b.setAttribute("x2",
""+a.x2+"%"),b.setAttribute("y2",""+a.y2+"%")):void 0==a.y2&&(b=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),b.setAttribute("id","gradient"),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("cx",""+a.x1+"%"),b.setAttribute("cy",""+a.y1+"%"),b.setAttribute("r",""+a.x2+"%"));for(var e=0;e<c.length;e++){var f=c[e],m=document.createElementNS("http://www.w3.org/2000/svg","stop"),k;for(k in f)f.hasOwnProperty(k)&&m.setAttribute(k,f[k]);b.appendChild(m)}d.appendChild(b);
e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("height","21px");e.setAttribute("width","100%");e.setAttribute("fill","url(#gradient)");d.appendChild(e);return d};getGradientImageURL=function(a,b){if(void 0===window.canvg)window.console?console.error("canvg.js file is not found."):alert("canvg.js file is not found.");else{var e=createSVG(a,b),e=(new XMLSerializer).serializeToString(e),g=f('<canvas id="canvas" style="display:none;"></canvas>');
canvg(g[0],e);return g[0].toDataURL()}};window.RadiantQ&&RadiantQ.Gantt&&(RadiantQ.Gantt.GetGradientImageURL=getGradientImageURL);setGradientAsBackground=function(a,b,e){b=getGradientImageURL(b,e);e=f("<style></style>");e.append(""+a+"{background-image:url("+b+") !important;}");f(document.head).append(e)};f.fn.setGradientAsBackground=function(a,b){if(0==f("script[src*=canvg]",document).length||void 0===canvg)window.console?console.error("canvg.js file is not found."):alert("canvg.js file is not found.");
else{var d=this.selector;if(""===d){var g="dynamicGradient"+e,d="."+g;this.addClass(g);e++}setGradientAsBackground(d,a,b)}}})(jQuery);void 0==window.RadiantQ&&(window.RadiantQ={});RadiantQ.IAction=function(){this.AllowToMergeWithPrevious=!1};RadiantQ.IAction.prototype.Execute=function(){};RadiantQ.IAction.prototype.UnExecute=function(){};RadiantQ.IAction.prototype.CanExecute=function(){};RadiantQ.IAction.prototype.CanUnExecute=function(){};RadiantQ.IAction.prototype.TryToMerge=function(f){};
void 0==window.RadiantQ&&(window.RadiantQ={});(function(f){var b=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(Array);f.IActionHistory=b})(RadiantQ);RadiantQ.IActionHistory.prototype.CanMoveBack=!1;RadiantQ.IActionHistory.prototype.CanMoveForward=!1;RadiantQ.IActionHistory.prototype.CurrentState=null;RadiantQ.IActionHistory.prototype.CollectionChanged=null;RadiantQ.IActionHistory.prototype.AppendAction=function(f){};RadiantQ.IActionHistory.prototype.Clear=function(){};
RadiantQ.IActionHistory.prototype.MoveBack=function(){};RadiantQ.IActionHistory.prototype.MoveForward=function(){};RadiantQ.IActionHistory.prototype.EnumUndoableActions=function(){};RadiantQ.IActionHistory.prototype.CanMoveBack_M=function(){};RadiantQ.IActionHistory.prototype.CanMoveForward_M=function(){};RadiantQ.IActionHistory.prototype.CurrentState_M=function(){};void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.LimitActionCount=a;this.Init=function(){this.Head=new RadiantQ.SimpleHistoryNode;this.CurrentState_M(new RadiantQ.SimpleHistoryNode)};this.Init();this.CollectionChanged=new ObjectEvent("CollectionChanged");this._mCurrentState=new RadiantQ.SimpleHistoryNode;this.LastAction=this.Head=null;this.Length=0;this.FirstAction=null}__extends(a,b);return a}(RadiantQ.IActionHistory);f.SampleHistory=b})(RadiantQ);
RadiantQ.SampleHistory.prototype.CurrentState_M=function(f){if(0==arguments.length)return this._mCurrentState;null!=f?this._mCurrentState=f:window.console&&console.error&&console.error("ArgumentNullException on CurrentState.")};RadiantQ.SampleHistory.prototype.CanMoveForward_M=function(f){if(0==arguments.length)return null!=this.CurrentState_M().NextAction&&null!=this.CurrentState_M().NextNode};
RadiantQ.SampleHistory.prototype.CanMoveBack_M=function(f){if(0==arguments.length)return null!=this.CurrentState_M().PreviousAction&&null!=this.CurrentState_M().PreviousNode};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.SampleHistory.prototype,"CurrentState",{get:function(){return this._mCurrentState},set:function(f){null!=f?this._mCurrentState=f:window.console&&console.error&&console.error("ArgumentNullException on CurrentState.")}}),Object.defineProperty(RadiantQ.SampleHistory.prototype,"CanMoveForward",{get:function(){return null!=this.CurrentState.NextAction&&null!=this.CurrentState.NextNode}}),Object.defineProperty(RadiantQ.SampleHistory.prototype,
"CanMoveBack",{get:function(){return null!=this.CurrentState.PreviousAction&&null!=this.CurrentState.PreviousNode}}));RadiantQ.SampleHistory.prototype.RaiseUndoBufferChanged=function(){0<this.CollectionChanged.fn.Length&&this.CollectionChanged.raise(this)};
RadiantQ.SampleHistory.prototype.AppendAction=function(f){if(null!=this.CurrentState_M().PreviousAction&&this.CurrentState_M().PreviousAction.TryToMerge(f))return this.RaiseUndoBufferChanged(),!1;this.CurrentState_M().NextAction=f;this.CurrentState_M().NextNode=new RadiantQ.SimpleHistoryNode(f,this.CurrentState_M());return!0};
RadiantQ.SampleHistory.prototype.Clear=function(){this.CollectionChanged.Dispose();this._mCurrentState=new RadiantQ.SimpleHistoryNode;this.LastAction=this.Head=null;this.Length=0;this.FirstAction=null;this.Init();this.RaiseUndoBufferChanged()};RadiantQ.SampleHistory.prototype.EnumUndoableActions=function(){for(var f=this.Head,b={};null!=f&&f!=this.CurrentState_M()&&null!=f.NextAction;)b.push(f.NextAction),f=f.NextNode;return b};
RadiantQ.SampleHistory.prototype.EnumRedoableActions=function(){for(var f=this.CurrentState_M(),b={};null!=f&&null!=f.NextAction;)b.push(f.NextAction),f=f.NextNode;return b};
RadiantQ.SampleHistory.prototype.MoveForward=function(){if(!this.CanMoveForward_M())throw new InvalidOperationException("History.MoveForward() cannot execute because CanMoveForward returned false (the current state is the last state in the undo buffer.");var f=this.CurrentState_M();f.NextAction.Execute();this.CurrentState_M(f.NextNode);0==this.Length?this.FirstAction=f:void 0!=this.LimitActionCount&&null!=this.LimitActionCount&&-1!=this.LimitActionCount&&this.Length==this.LimitActionCount&&(null!=
this.FirstAction&&(f=this.FirstAction.NextNode,null!=f&&(f.PreviousAction=null,f.PreviousNode=null),this.FirstAction.NextAction=null,this.FirstAction.NextNode=null,this.FirstAction=f),this.Length-=1);this.Length+=1;this.RaiseUndoBufferChanged()};
RadiantQ.SampleHistory.prototype.MoveBack=function(){if(!this.CanMoveBack_M())throw new InvalidOperationException("History.MoveBack() cannot execute because CanMoveBack returned false (the current state is the last state in the undo buffer.");this.CurrentState_M().PreviousAction.UnExecute();this.CurrentState_M().PreviousNode?(this.CurrentState_M(this.CurrentState_M().PreviousNode),this.Length-=1,this.RaiseUndoBufferChanged()):window.console&&console.error&&console.error("There is no previous recoreded action and could unable to process.")};
RadiantQ.SampleHistory.prototype.GetEnumerator=function(){return this.EnumUndoableActions().GetEnumerator()};void 0==window.RadiantQ&&(window.RadiantQ={});RadiantQ.SimpleHistoryNode=function(f,b){this.PreviousAction=f;this.PreviousNode=b};RadiantQ.SimpleHistoryNode.prototype.PreviousAction=null;RadiantQ.SimpleHistoryNode.prototype.PreviousNode=null;RadiantQ.SimpleHistoryNode.prototype.NextAction=null;RadiantQ.SimpleHistoryNode.prototype.NextNode=null;void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){var b=function(b){function a(){b.apply(this,arguments);this.IsDelayed=!1}__extends(a,b);return a}(RadiantQ.RQ_CollectionChangeNotifier);f.IMultiAction=b})(RadiantQ);void 0==window.RadiantQ&&(window.RadiantQ={});RadiantQ.ITransaction=function(){};RadiantQ.ITransaction.prototype.AccumulatingAction=null;RadiantQ.ITransaction.prototype.IsDelayed=!1;void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){var b=function(b){function a(){b.apply(this,arguments);this.IsDelayed=!0;this.Execute=function(){if(this.IsDelayed)for(var a=0;a<this.length;a++)this[a].Execute();else this.IsDelayed=!0};this.UnExecute=function(){this.reverse();for(var a=0;a<this.length;a++)this[a].UnExecute()};this.CanExecute=function(){for(var a=0;a<this.length;a++)if(!action.CanExecute())return!1;return!0};this.CanUnExecute=function(){for(var a=0;a<this.length;a++)if(!action.CanUnExecute())return!1;return!0};this.TryToMerge=
function(a){return!1};this.AllowToMergeWithPrevious=null}__extends(a,b);return a}(RadiantQ.IMultiAction);f.MultiAction=b})(RadiantQ);RadiantQ.MultiAction.prototype.Execute=function(){if(IsDelayed)for(var f=0;f<this.length;f++)action.Execute();else IsDelayed=!0};RadiantQ.MultiAction.prototype.UnExecute=function(){this.reverse();for(var f=0;f<this.length;f++)action.UnExecute()};RadiantQ.MultiAction.prototype.CanExecute=function(){for(var f=0;f<this.length;f++)if(!action.CanExecute())return!1;return!0};
RadiantQ.MultiAction.prototype.CanUnExecute=function(){for(var f=0;f<this.length;f++)if(!action.CanUnExecute())return!1;return!0};RadiantQ.MultiAction.prototype.TryToMerge=function(f){return!1};void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){var b=function(b){function a(a,d){b.apply(this,arguments);this.ActionManager=a;null!=a&&a.OpenTransaction(this);this.IsDelayed=!0;this.IsDelayed=d;this.accumulatingAction;this.AccumulatingAction_M=function(a){if(0==arguments.length)return this.accumulatingAction};RadiantQ.CanUseDefineProperty&&Object.defineProperty(this,"AccumulatingAction",{get:function(){return this.accumulatingAction}})}__extends(a,b);return a}(RadiantQ.ITransaction);f.TransactionBase=b})(RadiantQ);
RadiantQ.TransactionBase.prototype=new RadiantQ.ITransaction;RadiantQ.TransactionBase.prototype.ActionManager=null;RadiantQ.TransactionBase.prototype.Aborted=!1;RadiantQ.TransactionBase.prototype.Commit=function(){null!=this.ActionManager&&this.ActionManager.CommitTransaction()};RadiantQ.TransactionBase.prototype.Rollback=function(){null!=this.ActionManager&&(this.ActionManager.RollBackTransaction(),this.Aborted=!0)};RadiantQ.TransactionBase.prototype.Dispose=function(){this.Aborted||this.Commit()};
void 0==window.RadiantQ&&(window.RadiantQ={});(function(f){var b=function(b){function a(a,d){b.apply(this,arguments);this.accumulatingAction=new RadiantQ.MultiAction;this.Commit=function(){this.AccumulatingAction.IsDelayed=this.IsDelayed;RadiantQ.TransactionBase.prototype.Commit.apply(this)}}__extends(a,b);return a}(RadiantQ.TransactionBase);f.Transaction=b})(RadiantQ);RadiantQ.Transaction.Create=function(f,b){return void 0!=b||null!=b?new RadiantQ.Transaction(f,b):new RadiantQ.Transaction(f,!0)};
void 0==window.RadiantQ&&(window.RadiantQ={});(function(f){var b=function(b){function a(){b.apply(this,arguments);this.mAllowToMergeWithPrevious=!0;this.ExecuteCount=0}__extends(a,b);return a}(Array);f.AbstractAction=b})(RadiantQ);RadiantQ.AbstractAction.prototype.AllowToMergeWithPrevious_M=function(f){if(0==arguments.length)return this.mAllowToMergeWithPrevious;this.mAllowToMergeWithPrevious=f};
RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.AbstractAction.prototype,"AllowToMergeWithPrevious",{get:function(){return this.mAllowToMergeWithPrevious},set:function(f){this.mAllowToMergeWithPrevious=f}});RadiantQ.AbstractAction.prototype.Execute=function(){this.CanExecute()&&(this.ExecuteCore(),this.ExecuteCount++)};RadiantQ.AbstractAction.prototype.UnExecute=function(){this.CanUnExecute()&&(this.UnExecuteCore(),this.ExecuteCount--)};
RadiantQ.AbstractAction.prototype.ExecuteCore=function(){};RadiantQ.AbstractAction.prototype.UnExecuteCore=function(){};RadiantQ.AbstractAction.prototype.CanExecute=function(){return 0==this.ExecuteCount};RadiantQ.AbstractAction.prototype.CanUnExecute=function(){return!this.CanExecute()};RadiantQ.AbstractAction.prototype.TryToMerge=function(f){return!1};void 0==window.RadiantQ&&(window.RadiantQ={});
RadiantQ.ActionManager=function(f){History=new RadiantQ.SampleHistory(f);this.CollectionChanged=new ObjectEvent("CollectionChanged");this.RaiseUndoBufferChanged=function(b,e){null!=this.CollectionChanged&&this.CollectionChanged.raise(this,e)};this.CurrentAction=null;this.EnableRecordingActions=this.ActionIsExecuting=!1;this.RecordAction=function(b){null==b&&window.console&&console.error&&console.error("ArgumentNullException - ActionManager.RecordAction: the existingAction argument is null");this.CheckNotRunningBeforeRecording(b);
if(!this.EnableRecordingActions&&b.CanExecute())b.Execute();else{var e=this.RecordingTransaction_M();null!=e?(e.AccumulatingAction_M().push(b),e.IsDelayed||b.Execute()):this.RunActionDirectly(b)}};this.CheckNotRunningBeforeRecording=function(b){null!=this.CurrentAction&&window.console&&console.error&&console.error("InvalidOperationException :ActionManager.RecordActionDirectly: the ActionManager is currently running or undoing an action ({0}), and this action (while being executed) attempted to recursively record another action ({1}), which is not allowed. You can examine the stack trace of this exception to see what the executing action did wrong and change this action not to influence the Undo stack during its execution. Checking if ActionManager.ActionIsExecuting == true before launching another transaction might help to avoid the problem. Thanks and sorry for the inconvenience.",
this.CurrentAction.toString())};this.recordActionLock={};this.RunActionDirectly=function(b){this.CheckNotRunningBeforeRecording(b);this.CurrentAction=b;History.AppendAction(b)&&History.MoveForward();this.CurrentAction=null};this.CreateTransaction=function(){return Transaction.Create(this)};this.CreateTransaction=function(b){return Transaction.Create(this,b)};this.mTransactionStack=[];this._mHistory;this.History_M=function(b){if(0==arguments.length)return this.mHistory;null!=this.mHistory&&mHistory.CollectionChanged.subscribe(this.RaiseUndoBufferChanged,
this);this.mHistory=b;null!=this.mHistory&&this.mHistory.CollectionChanged.unsubscribe(this.RaiseUndoBufferChanged,this)};this.TransactionStack_M=function(b){if(0==arguments.length)return this.mTransactionStack;this.mTransactionStack=b};this.RecordingTransaction_M=function(b){if(0==arguments.length)return 0<this.TransactionStack_M().length?this.TransactionStack_M()[0]:null};this.CanUndo_M=function(b){if(0==arguments.length)return History.CanMoveBack_M()};this.CanRedo_M=function(b){if(0==arguments.length)return History.CanMoveForward_M()};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(this,"History",{get:function(){return this.mHistory},set:function(b){null!=this.mHistory&&mHistory.CollectionChanged.subscribe(this.RaiseUndoBufferChanged,this);this.mHistory=b;null!=this.mHistory&&this.mHistory.CollectionChanged.unsubscribe(this.RaiseUndoBufferChanged,this)}}),Object.defineProperty(this,"TransactionStack",{get:function(){return this.mTransactionStack},set:function(b){this.mTransactionStack=b}}),Object.defineProperty(this,"RecordingTransaction",
{get:function(){return 0<this.TransactionStack_M().length?this.TransactionStack_M()[0]:null}}),Object.defineProperty(this,"CanUndo",{get:function(){return History.CanMoveBack}}),Object.defineProperty(this,"CanRedo",{get:function(){return History.CanMoveForward}}));this.OpenTransaction=function(b){this.TransactionStack_M().push(b)};this.CommitTransaction=function(){0==this.TransactionStack_M().length&&window.console&&console.error&&console.error("nvalidOperationExceptionActionManager.CommitTransaction was called when there is no open transaction (TransactionStack is empty). Please examine the stack trace of this exception to find code which called CommitTransaction one time too many. Normally you don't call OpenTransaction and CommitTransaction directly, but use using(var t = Transaction.Create(Root)) instead.");
var b=this.TransactionStack_M().pop();0<b.AccumulatingAction_M().length&&this.RecordAction(b.AccumulatingAction_M())};this.RollBackTransaction=function(){if(0!=this.TransactionStack_M().length){var b=this.TransactionStack_M()[0];null!=b&&null!=b.AccumulatingAction_M()&&b.AccumulatingAction_M().UnExecute();this.TransactionStack_M().splice()}};this.Undo=function(){this.CanUndo_M()&&(this.ActionIsExecuting&&window.console&&console.error&&console.error("InvalidOperationExceptionActionManager is currently busy executing a transaction ({0}). This transaction has called Undo() which is not allowed until the transaction ends. Please examine the stack trace of this exception to see what part of your code called Undo.",
this.CurrentAction),this.CurrentAction=History.CurrentState_M().PreviousAction,History.MoveBack(),this.CurrentAction=null)};this.Redo=function(){this.CanRedo_M()&&(this.ActionIsExecuting&&window.console&&console.error&&console.error("InvalidOperationExceptionActionManager is currently busy executing a transaction ({0}). This transaction has called Redo() which is not allowed until the transaction ends. Please examine the stack trace of this exception to see what part of your code called Redo.",this.CurrentAction),
this.CurrentAction=History.CurrentState_M().NextAction,History.MoveForward(),this.CurrentAction=null)};this.Clear=function(){History.Clear();this.CurrentAction=null};this.EnumUndoableActions=function(){return History.EnumUndoableActions()};this.EnumRedoableActions=function(){return History.EnumRedoableActions()}};void 0==window.RadiantQ?window.RadiantQ={}:void 0==window.RadiantQ.Gantt&&(window.RadiantQ.Gantt={});
(function(f){var b=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(RadiantQ.ActionManager);f.GanttControlActionManager=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.IgnoreFirst=arguments[arguments.length-1];this.callCount=0;this.ExecuteCore=function(){this.callCount++;!0==this.IgnoreFirst&&1==this.callCount||this.OnExecuteCore()};this.OnExecuteCore=function(){}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.IgnoreFirstAbstractAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.IgnoreFirstAbstractAction.prototype.IgnoreFirst=null;
(function(f){var b=function(b){function a(a,d,f,h,m,k){b.apply(this,arguments);a&&(this.GC=a);d&&(this.ActivityID=d.ID_M(),this.OldPrefTime=h||d.PreferredStartTime_M(),this.OldTime=m||d.StartTime_M());f&&(this.NewTime=f)}__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.SetTimeActionBase=b})(RadiantQ.Gantt);RadiantQ.Gantt.SetTimeActionBase.prototype.GetActivity=function(){return this.GC.Model.GetActivityById(this.ActivityID)};
RadiantQ.Gantt.SetTimeActionBase.prototype.ActivityID=null;RadiantQ.Gantt.SetTimeActionBase.prototype.NewTime=null;RadiantQ.Gantt.SetTimeActionBase.prototype.GC=null;RadiantQ.Gantt.SetTimeActionBase.prototype.OldTime=null;RadiantQ.Gantt.SetTimeActionBase.prototype.OldPrefTime=null;
(function(f){var b=function(b){function a(a,d,f,h,m,k){b.apply(this,arguments);this.Name='Set StartTime on Task: "{0}"'+d.ActivityName_M();this.OnExecuteCore=function(){var a=this.GetActivity();a.PreferredStartTime_M(this.NewTime);a.StartTime_M(this.NewTime);this.GC.RaiseActivityTimeChanged(a,RadiantQ.Gantt.ActivityTimeChangeType.StartTimeChanged,this.NewTime)};this.UnExecuteCore=function(){var a=this.GetActivity();a.PreferredStartTime_M(this.OldPrefTime);a.StartTime_M(this.OldTime);this.GC.RaiseActivityTimeChanged(a,
RadiantQ.Gantt.ActivityTimeChangeType.StartTimeChanged,this.OldTime)}}__extends(a,b);return a}(RadiantQ.Gantt.SetTimeActionBase);f.SetStartTimeAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a,d,f,h,m,k){b.apply(this,arguments);this.Name='Set EndTime on Task: "{0}"'+d.ActivityName_M();this.OnExecuteCore=function(){var a=this.GetActivity();a.EndTime_M(this.NewTime);this.GC.RaiseActivityTimeChanged(a,RadiantQ.Gantt.ActivityTimeChangeType.DurationResized,this.NewTime)};this.UnExecuteCore=function(){var a=this.GetActivity();a.PreferredStartTime_M(this.OldPrefTime);a.EndTime_M(this.OldTime);this.GC.RaiseActivityTimeChanged(a,RadiantQ.Gantt.ActivityTimeChangeType.DurationResized,
this.OldTime)}}__extends(a,b);return a}(RadiantQ.Gantt.SetTimeActionBase);f.SetEndTimeAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a,d,f){b.apply(this,arguments);this._gc=a;this.ActivityID=d.ID_M();this._oldDuration=d.Duration_M();this._newDuration=f;this.Name='Set Duration on Task: "{0}"'+d.ActivityName_M();this.ExecuteCore=function(){this.GetActivity(this.ActivityID).Duration_M(this._newDuration)};this.UnExecuteCore=function(){this.GetActivity(this.ActivityID).Duration_M(this._oldDuration)}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.SetDurationAction=b})(RadiantQ.Gantt);
RadiantQ.Gantt.SetDurationAction.prototype._oldDuration=null;RadiantQ.Gantt.SetDurationAction.prototype._newDuration=null;RadiantQ.Gantt.SetDurationAction.prototype._gc=null;RadiantQ.Gantt.SetDurationAction.prototype.GetActivity=function(){return this._gc.Model.GetActivityById(this.ActivityID)};RadiantQ.Gantt.SetDurationAction.prototypeActivityID=null;
(function(f){var b=function(b){function a(a,d,f,h){b.apply(this,arguments);this._model=a;this._fromActID=d.ID_M();this._toActID=f.ID_M();this.Name='Create new Dependency from: "{0}" to: "{1}"'+d.ActivityName_M()+"  "+f.ActivityName_M();this.OnExecuteCore=function(){this._model.CreateNewDependency(this._model.GetActivityById(this._fromActID),this._model.GetActivityById(this._toActID))};this.UnExecuteCore=function(){RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency(this._model,this._fromActID,
this._toActID)}}__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.CreateNewDependencyAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.CreateNewDependencyAction.prototype._model=null;RadiantQ.Gantt.CreateNewDependencyAction.prototype._fromActID=null;RadiantQ.Gantt.CreateNewDependencyAction.prototype._toActID=null;
RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency=function(f,b,e){e=f.Dependencies_M().GetPredecessors(f.GetActivityById(e));for(var a=0;a<e.length;a++){var c=e[a];if(c.FromActivity_M().ID_M()==b){f.Dependencies_M().remove(c);break}}};
(function(f){var b=function(b){function a(a,d,f){b.apply(this,arguments);this._model=a;this._fromActID=d.FromActivity_M().ID_M();this._toActID=d.ToActivity_M().ID_M();this._lag=d.Lag;this._type=d.Type;this.OnExecuteCore=function(){RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency(this._model,this._fromActID,this._toActID)};this.UnExecuteCore=function(){this._model.CreateNewDependency(this._model.GetActivityById(this._fromActID),this._model.GetActivityById(this._toActID),this._type,this._lag)}}
__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.DeleteDependencyAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.DeleteDependencyAction.prototype._model=null;RadiantQ.Gantt.DeleteDependencyAction.prototype._fromActID=null;RadiantQ.Gantt.DeleteDependencyAction.prototype._toActID=null;RadiantQ.Gantt.DeleteDependencyAction.prototype._lag=null;RadiantQ.Gantt.DeleteDependencyAction.prototype._type=null;
(function(f){var b=function(b){function a(a,d,f,h){b.apply(this,arguments);this._model=a;this._fromActID=d.FromActivity_M().ID_M();this._toActID=d.ToActivity_M().ID_M();this._lag=d.Lag_M();this._newType=f;this._oldtype=d.Type;this.OnExecuteCore=function(){RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency(this._model,this._fromActID,this._toActID);var a=this._model.GetActivityById(this._fromActID),b=this._model.GetActivityById(this._toActID);!0==this._model.CanAddNewDependency(a,b,RadiantQ.Gantt.Model.NewDependencyAddScenarioType.None,
this._newType)?this._model.CreateNewDependencyInternal(a,b,this._newType,this._lag,!0):this._model.CreateNewDependencyInternal(a,b,this._oldtype,this._lag,!0)};this.UnExecuteCore=function(){RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency(this._model,this._fromActID,this._toActID);this._model.CreateNewDependency(this._model.GetActivityById(this._fromActID),this._model.GetActivityById(this._toActID),this._oldtype,this._lag)}}__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);
f.ChangeDependencyTypeAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._model=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._fromActID=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._toActID=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._lag=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._newType=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._oldtype=null;
(function(f){var b=function(b){function a(a,d,f){b.apply(this,arguments);this._act=a;this._oldPP=a.ProgressPercent_M();this._newPP=d;this.Name='Change Progress on Task: "{0}"'+a.ActivityName_M();this.OnExecuteCore=function(){this._act.ProgressPercent_M(this._newPP)};this.UnExecuteCore=function(){this._act.ProgressPercent_M(this._oldPP)}}__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.SetProgressValueAction=b})(RadiantQ.Gantt);
RadiantQ.Gantt.SetProgressValueAction.prototype._act=null;RadiantQ.Gantt.SetProgressValueAction.prototype._oldPP=null;RadiantQ.Gantt.SetProgressValueAction.prototype._newPP=null;(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.AffectedActivityDependencies=new RadiantQ.Gantt.Dictionary;this._actDeps=new RadiantQ.Gantt.Dictionary;a&&(this.GC=a,this.Model=a.Model)}__extends(a,b);return a}(RadiantQ.AbstractAction);f.AffectedDependenciesTrackingAction=b})(RadiantQ.Gantt);
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.GC=null;RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.Model=null;RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.AffectedActivityDependencies=new RadiantQ.Gantt.Dictionary;RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype._actDeps=new RadiantQ.Gantt.Dictionary;
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.CacheDependencies=function(){this.AffectedActivityDependencies.Clear();for(var f=1;f<=this.Model.AllActivities_M().length;f++){var b=this.Model.AllActivities_M()[f];b&&(null!=b.PredecessorIndexString_M()&&void 0!=b.PredecessorIndexString_M()?this._actDeps.Add(b.ID_M(),b.PredecessorIndexString_M()):this._actDeps.Add(b.ID_M(),""))}};
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.TrackAffectedDependenciesFromCache=function(){this.AffectedActivityDependencies.Clear();for(var f=0;f<this._actDeps.keys.length;f++){var b=this.Model.GetActivityById(this._actDeps.keys[f]);!1==(b.PredecessorIndexString_M()===this._actDeps[b.ID_M()])&&this.AffectedActivityDependencies.Add(b.ID_M(),this._actDeps[b.ID_M()])}};
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.ReapplyAffectedActivityDependencies=function(){for(var f=0;f<this.AffectedActivityDependencies.keys.length;f++){var b=this.AffectedActivityDependencies.keys[f],e=this.Model.GetActivityById(b);View.GanttActivityView.prototype.UpdateActivityDependency(this.Model,e,this.AffectedActivityDependencies[b],RadiantQ.Gantt.Model.NewDependencyAddScenarioType.None)}this.AffectedActivityDependencies.Clear()};
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.GetActivityView=function(f){return null==this.GC.Model.GetActivityById(f)?null:this.GC.ActivityViews.GetActivityViewByID(f)};(function(f){var b=function(b){function a(a,d){b.apply(this,arguments);void 0!=d&&null!=d&&(this.ActivityID=d.ID_M())}__extends(a,b);return a}(RadiantQ.Gantt.AffectedDependenciesTrackingAction);f.IndentOutdentBase=b})(RadiantQ.Gantt);RadiantQ.Gantt.IndentOutdentBase.prototype.ActivityID=null;
(function(f){var b=function(b){function a(a,d){b.apply(this,arguments);this.Name='Indented task "{0}"'+d.ActivityName_M();this.ExecuteCore=function(){var a=this.GetActivityView(this.ActivityID);if(null!=a){a.Activity_M();var b=this.GC.ActivityViews.indexOf(a);0<b&&(b=this.GC.GetParentableActivityView(b-1,a.IndentLevel_M()),null!=b?(this.CacheDependencies(),this.oldParentStart=b.Activity_M().StartTime_M(),this.oldParentEffort=b.Activity_M().Effort_M(),this.GC.Indent(a),this.TrackAffectedDependenciesFromCache()):
window.console&&console.error&&console.error("IndentAction called on an activity that cannot be indented. Use GanttControl.CanIndent to check first."))}};this.UnExecuteCore=function(){var a=this.GetActivityView(this.ActivityID);if(null!=a){var b=a.Activity_M().Parent_M();this.GC.Outdent(a);this.ReapplyAffectedActivityDependencies();null!=b&&0==b.ChildActivities_M().length&&(b.StartTime_M(this.oldParentStart),b.Effort_M(this.oldParentEffort))}}}__extends(a,b);return a}(RadiantQ.Gantt.IndentOutdentBase);
f.IndentAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.IndentAction.prototype.oldParentStart=null;RadiantQ.Gantt.IndentAction.prototype.oldParentEffort=null;
(function(f){var b=function(b){function a(a,d){b.apply(this,arguments);this.Name='Outdented Task: "{0}"'+d.ActivityName_M();this.ExecuteCore=function(){var a=this.GetActivityView(this.ActivityID);if(null!=a){var b=a.Activity_M(),c=this.GC.ActivityViews[0]==a,d=a.IndentLevel_M();if(!c&&0<d){this.CacheDependencies();this.oldStart=b.StartTime_M();this.oldEffort=b.Effort_M();this.originalNextSiblingId=-1;for(b=this.GC.ActivityViews.indexOf(a)+1;b<this.GC.ActivityViews.length;b++)if(c=this.GC.ActivityViews[b],
c.IndentLevel_M()==a.IndentLevel_M()){this.originalNextSiblingId=c.Activity_M().ID_M();break}this.GC.Outdent(a);this.TrackAffectedDependenciesFromCache()}}};this.UnExecuteCore=function(){var a=this.GetActivityView(this.ActivityID);if(null!=a){a.Activity_M().Parent_M();this.GC.Indent(a);if(-1!=this.originalNextSiblingId){for(var b=-1,c=this.GC.ActivityViews.indexOf(a)+1;c<this.GC.ActivityViews.length;c++){var d=this.GC.ActivityViews[c];if(d.Activity_M().ID_M()==this.originalNextSiblingId){b=c;break}}this.originalNextSiblingId=
-1;if(-1!=b){for(var e=new RadiantQ.Gantt.Dictionary,c=b;c<this.GC.ActivityViews.length;c++){d=this.GC.ActivityViews[c];if(d.IndentLevel_M()<=a.IndentLevel_M())break;d.IndentLevel_M()==a.IndentLevel_M()+1&&e.Add(d,d.PredecessorIndexString_M())}for(b=0;b<e.keys.length;b++)this.GC.Outdent(e.keys[b]);for(b=0;b<e.keys.length;b++)c=e.keys[b],c.PredecessorIndexString_M()!=e[c]&&c.PredecessorIndexString_M(e[c])}}this.ReapplyAffectedActivityDependencies();a.Activity_M().StartTime_M(this.oldStart);a.Activity_M().Effort_M(this.oldEffort)}}}
__extends(a,b);return a}(RadiantQ.Gantt.IndentOutdentBase);f.OutdentAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.OutdentAction.prototype.oldStart=null;RadiantQ.Gantt.OutdentAction.prototype.oldEffort=null;RadiantQ.Gantt.OutdentAction.prototype.originalNextSiblingId=-1;
(function(f){var b=function(b){function a(a,d,f){b.apply(this,arguments);this.GC=a;this.actID=void 0!=d.Activity_M?d.Activity_M().ID_M():d.ID_M();this.Name=(this._expand=f)?'Activity "{0}" expanded'+d.Activity_M().ActivityName_M():'Activity "{0}" collapsed'+d.Activity_M().ActivityName_M();this.ExecuteCore=function(){var a=this.GC.ActivityViews.GetActivityViewByID(this.actID);null!=a&&a.IsExpanded_M(this._expand)};this.UnExecuteCore=function(){var a=this.GC.ActivityViews.GetActivityViewByID(this.actID);
null!=a&&a.IsExpanded_M(!this._expand)}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.ExpandCollapseActivityViewAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.ExpandCollapseActivityViewAction.prototype.GC=null;RadiantQ.Gantt.ExpandCollapseActivityViewAction.prototype.actID=null;RadiantQ.Gantt.ExpandCollapseActivityViewAction.prototype._expand=null;
(function(f){var b=function(b){function a(a,d){b.apply(this,arguments);this.newtask=d;this.gc=a;"object"!==typeof a.options.DataSource&&window.console&&console.error&&console.error("Exception on The GanttControl's ItemsSource should be an IList so that the bound task object can be added/deleted on redo/undo.");this.Name="Added new task.";this.ExecuteCore=function(){this.newActivityID=this.gc.AddNewItem(this.newtask).ID_M()};this.UnExecuteCore=function(){var a=this.gc.RemoveActivity(this.newActivityID);
RemoveInArray(this.gc.options.DataSource,a[0].DataSource_M())}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.AddAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.AddAction.prototype.gc=null;RadiantQ.Gantt.AddAction.prototype.newtask=null;RadiantQ.Gantt.AddAction.prototype.newActivityID=null;
(function(f){var b=function(b){function a(a,d,f,h,m){b.apply(this,arguments);this.source=a;this._newValue=h;this._oldValue=f;this.propName=d;this.Name='Changed property "{0}" in grid'+d;this.OnExecuteCore=function(){RadiantQ.Gantt.CellChangeInfo.prototype.SetNestedPropValue(this.Source_M(),this.propName,this._newValue,this.DataSource)};this.UnExecuteCore=function(){RadiantQ.Gantt.CellChangeInfo.prototype.SetNestedPropValue(this.Source_M(),this.propName,this._oldValue,this.DataSource)}}__extends(a,
b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.GenericCellChangeActionInGrid=b})(RadiantQ.Gantt);RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.source=null;RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.propName=null;RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype._oldValue=null;RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype._newValue=null;RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.Source_M=function(f){if(0==arguments.length)return this.source};
RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.PropName_M=function(f){if(0==arguments.length)return this.propName};RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.OldValue_M=function(f){if(0==arguments.length)return this._oldValue};RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.NewValue_M=function(f){if(0==arguments.length)return this._newValue};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype,"Source",{get:function(){return this.source}}),Object.defineProperty(RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype,"PropName",{get:function(){return this.propName}}),Object.defineProperty(RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype,"OldValue",{get:function(){return this._oldValue}}),Object.defineProperty(RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype,"NewValue",
{get:function(){return this._newValue}}));
(function(f){var b=function(b){function a(a,d,f,h,m,k,l){b.apply(this,[a,f,h,m,k]);this._model=a;this.actId=d;this.DataSource=l;this.Source_M=function(a){if(0==arguments.length)return this._model.GetActivityById(this.actId)};RadiantQ.CanUseDefineProperty&&Object.defineProperty(this,"Source",{get:function(){return this._model.GetActivityById(this.actId)}})}__extends(a,b);return a}(RadiantQ.Gantt.GenericCellChangeActionInGrid);f.GenericActivityChangeActionInGrid=b})(RadiantQ.Gantt);RadiantQ.Gantt.GenericActivityChangeActionInGrid.prototype._model;
RadiantQ.Gantt.GenericActivityChangeActionInGrid.prototype.actId;
(function(f){var b=function(b){function a(a,d,f,h,m,k,l,n){b.apply(this,[d,h,m,k,l]);this._model=d;this.actId=f;this.DataSource=n;this._gc=a;this.Source_M=function(a){if(0==arguments.length)return"ProjectGantt"==this._gc.GanttType?this._gc.ActivityViews.GetActivityViewByID(this.actId):this.DataSource};RadiantQ.CanUseDefineProperty&&Object.defineProperty(this,"Source",{get:function(){return"ProjectGantt"==this._gc.GanttType?this._gc.ActivityViews.GetActivityViewByID(this.actId):this.DataSource}})}
__extends(a,b);return a}(RadiantQ.Gantt.GenericCellChangeActionInGrid);f.GenericActivityViewChangeActionInGrid=b})(RadiantQ.Gantt);RadiantQ.Gantt.GenericActivityViewChangeActionInGrid.prototype._model=null;RadiantQ.Gantt.GenericActivityViewChangeActionInGrid.prototype.actId=null;RadiantQ.Gantt.GenericActivityViewChangeActionInGrid.prototype._gc=null;
(function(f){var b=function(b){function a(a,d,f,h,m){b.apply(this,arguments);if(1==arguments.length){var k=this.GC;this._idlByActId=new RadiantQ.Gantt.Dictionary;if(null!=k.SelectedItem_M()){for(var l=Number.MAX_VALUE,n=k.SelectedItems,p=0;p<n.length;p++){var q=n[p],q=q._activity._displayIndex;this._selIndices.push(q);q<l&&(l=q)}this.selTopIndex=l;k.OnBeforeDragStart(this.selTopIndex,k.SelectedItems.length);this.toMoveCount=k.SelectedItems.length;this.toMoveDest=this.GetBeforeMoveDest(this.selTopIndex,
this.toMoveCount);this.CanMoveToDest(this.selTopIndex,this.toMoveDest)?this.CommonInit():this.selTopIndex=-1}else throw new Exception("This Move Action cannot be created when there are no selected items in the gantt.");}else if(5==arguments.length){k=this.GC;this._idlByActId=new RadiantQ.Gantt.Dictionary;if(null==m||void 0==m)m=h;l=0;-1<m&&(l=k.ActivityViews[m].Activity_M().ChildActivities_M().length);if(h>=d-1&&h<d+f&&0==l)throw new Exception("MoveSelectedItemsBase constructor called with invalid destination index.");
n=k.SelectedItems;for(p=0;p<n.length;p++)q=n[p],q=q._activity._displayIndex,this._selIndices.push(q);this.selTopIndex=d;this.toMoveCount=f;this.toMoveDest=h;this.CommonInit()}this.ExecuteCore=function(){var a=this.GC;if(-1!=this.selTopIndex){this.CacheDependencies();a.SelectedItems.splice();a.GetGanttTable().MoveRows(this.selTopIndex,this.toMoveCount,this.toMoveDest,null,void 0,void 0);this.TrackAffectedDependenciesFromCache();for(var b=this.GetAfterMoveDest(),c=0;c<this.toMoveCount;c++)a.SelectedItems.push(a.ActivityViews.GetActivityViewByID(b+
c))}};this.UnExecuteCore=function(){var a=this.GC;if(-1!=this.selTopIndex){a.SelectedItems.splice();var b=this.GetAfterMoveDest();a.GetGanttTable().MoveRows(b,this.toMoveCount,this.GetUndoDest(b,this.toMoveCount),null,void 0,void 0);for(var c=b=this.selTopIndex;c<b+this.toMoveCount;c++){var d=a.ActivityViews[c],e=this._idlByActId[d.Activity_M().ID_M()];e!=d.IndentLevel_M()&&this.AdjustIndent(d,e)}this.ReapplyAffectedActivityDependencies();for(c=0;c<this._selIndices;c++)a.SelectedItems.push(a.ActivityViews[c])}}}
__extends(a,b);return a}(RadiantQ.Gantt.AffectedDependenciesTrackingAction);f.MoveSelectedItemsBase=b})(RadiantQ.Gantt);RadiantQ.Gantt.MoveSelectedItemsBase.prototype._selIndices=[];RadiantQ.Gantt.MoveSelectedItemsBase.prototype.selTopIndex=null;RadiantQ.Gantt.MoveSelectedItemsBase.prototype.toMoveCount=1;RadiantQ.Gantt.MoveSelectedItemsBase.prototype.toMoveDest=-1;RadiantQ.Gantt.MoveSelectedItemsBase.prototype._idlByActId=new RadiantQ.Gantt.Dictionary;
RadiantQ.Gantt.MoveSelectedItemsBase.prototype.CommonInit=function(){for(var f=this.selTopIndex;f<this.selTopIndex+this.toMoveCount;f++){var b=this.GC.ActivityViews[f];this._idlByActId.Add(b.Activity_M().ID_M(),b.IndentLevel_M())}};RadiantQ.Gantt.MoveSelectedItemsBase.prototype.AdjustIndent=function(f,b){for(var e=b-f.IndentLevel_M();0>e;)e++,this.GC.Outdent(f);for(;0<e;)e--,this.GC.Indent(f)};RadiantQ.Gantt.MoveSelectedItemsBase.prototype.GetBeforeMoveDest=function(f,b){};
RadiantQ.Gantt.MoveSelectedItemsBase.prototype.GetAfterMoveDest=function(){return this.selTopIndex<this.toMoveDest?this.toMoveDest-this.toMoveCount+1:this.toMoveDest+1};RadiantQ.Gantt.MoveSelectedItemsBase.prototype.GetUndoDest=function(f,b){return this.selTopIndex<this.toMoveDest?this.selTopIndex-1:this.selTopIndex+b-1};RadiantQ.Gantt.MoveSelectedItemsBase.prototype.CanMoveToDest=function(f,b){};
(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.Name="Moved Selected Items down"}__extends(a,b);a.prototype.GetBeforeMoveDest=function(a,b){return a+b};a.prototype.CanMoveToDest=function(a,b){return b<this.GC.ActivityViews.length?!0:!1};return a}(RadiantQ.Gantt.MoveSelectedItemsBase);f.MoveSelectedItemsDownAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.Name="Moved selected items up."}__extends(a,b);a.prototype.GetBeforeMoveDest=function(a,b){return a-2};a.prototype.CanMoveToDest=function(a,b){return 0<a?!0:!1};return a}(RadiantQ.Gantt.MoveSelectedItemsBase);f.MoveSelectedItemsUpAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a,d,f,h,m){b.apply(this,arguments);this.Name="Moved rows from index {0}, count: {1}, to index {2}"+d+f+h;this.GetBeforeMoveDest=function(a,b){throw new NotImplementedException;};this.CanMoveToDest=function(a,b){return!0}}__extends(a,b);return a}(RadiantQ.Gantt.MoveSelectedItemsBase);f.MoveRowsAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a,d,f,h){b.apply(this,arguments);this.asChild=h;this.basedOnActivityId=d.Activity_M().ID_M();this.cachedTask=f;this.ganttControl=a;this.Name='Inserted new Activity based on "{0}"'+d.Activity_M().ActivityName_M();this.ExecuteCore=function(){var a=this.ganttControl.ActivityViews.GetActivityViewByID(this.basedOnActivityId);this.parentEndBeforeInsertAsChild=DateTime.MinValue;this.asChild?(a.IsParent_M()||(this.parentEndBeforeInsertAsChild=a.Activity_M().EndTime_M()),
this.insertedActivityID=RadiantQ.Gantt.InsertAction.InsertAsChildCommon(this.ganttControl,this.basedOnActivityId,this.cachedTask)):this.insertedActivityID=this.ganttControl.InsertNewItemAsSiblingBelow(this.cachedTask,this.ganttControl.ActivityViews.indexOf(a),!0).ID_M()};this.UnExecuteCore=function(){RadiantQ.Gantt.DeleteAction.DeleteCommon(this.ganttControl,this.insertedActivityID);if(this.parentEndBeforeInsertAsChild!=DateTime.MinValue){var a=this.ganttControl.ActivityViews.GetActivityViewByID(this.basedOnActivityId);
!1==a.IsParent_M()&&a.Activity_M().EndTime_M()!=this.parentEndBeforeInsertAsChild&&a.Activity_M().EndTime_M(this.parentEndBeforeInsertAsChild)}}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.InsertAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.InsertAction.prototype.cachedTask;RadiantQ.Gantt.InsertAction.prototype.ganttControl;RadiantQ.Gantt.InsertAction.prototype.basedOnActivityId;RadiantQ.Gantt.InsertAction.prototype.insertedActivityID;RadiantQ.Gantt.InsertAction.prototype.asChild;
RadiantQ.Gantt.InsertAction.prototype.parentEndBeforeInsertAsChild=new Date;RadiantQ.Gantt.InsertAction.InsertAsChildCommon=function(f,b,e){b=-1!=b?f.Model.GetActivityById(b):null;var a=f.ActivityViews.GetActivityViewByID(b.ID_M());e=f.InsertNewItemAsChildOf(e,f.ActivityViews.indexOf(a),!0);var a=f.ActivityViews.GetActivityViewByID(e.ID_M()),c=e.ID_M();for(null!=a&&(c=a.Activity_M().ID_M());e.Parent_M()!=b;)f.Outdent(a);return c};
(function(f){var b=function(b){function a(a,d){b.apply(this,arguments);if("object"!=typeof a.options.DataSource)throw new Exception("The GanttControl's ItemsSource should be an IList so that the bound task object can be deleted/added on redo/undo.");this._predByID=new RadiantQ.Gantt.Dictionary;this.removedActivityId=d.ID_M();this.ganttControl=a;this.cachedTask=d.DataSource_M();if(0<d.ChildActivities_M().length)throw new Exception("All child activities must be deleted before deleting the parent.");
var f=a.Model.Dependencies_M().GetSuccessors(d);d.PredecessorIndexString_M()&&this._predByID.Add(d.ID_M(),d.PredecessorIndexString_M());for(var h=0;h<f.length;h++){var m=f[h];this._predByID.Add(m.ToActivity_M().ID_M(),m.ToActivity_M().PredecessorIndexString_M())}null!=d.Parent_M()?(this.parentID=d.Parent_M().ID_M(),this.childIndex=d.Parent_M().ChildActivities_M().indexOf(d)):this.childIndex=a.Model.Activities_M().indexOf(d);this.Name='Deleted Activity "{0}"'+d.ActivityName_M();this.ExecuteCore=function(){RadiantQ.Gantt.DeleteAction.DeleteCommon(this.ganttControl,
this.removedActivityId)};this.UnExecuteCore=function(){var a=-1!=this.parentID?this.ganttControl.Model.GetActivityById(this.parentID):null,b=null;if(null!=a){var c=this.ganttControl.ActivityViews.GetActivityViewByID(a.ID_M());if(this.childIndex==a.ChildActivities_M().length)RadiantQ.Gantt.InsertAction.InsertAsChildCommon(this.ganttControl,this.parentID,this.cachedTask);else if(0==this.childIndex){var a=RadiantQ.Gantt.InsertAction.InsertAsChildCommon(this.ganttControl,this.parentID,this.cachedTask),
d=this.ganttControl.ActivityViews.GetActivityViewByID(a),a=c.DisplayIndex_M(),d=d.DisplayIndex_M();this.ganttControl.GetGanttTable().MoveRows(d,1,a,c,void 0,void 0)}else b=c.Activity_M().ChildActivities_M()[this.childIndex-1]}else 0==this.childIndex?(a=this.ganttControl.AddNewItem(this.cachedTask).ID_M(),d=this.ganttControl.ActivityViews.GetActivityViewByID(a),d=d.DisplayIndex_M(),this.ganttControl.GetGanttTable().MoveRows(d,1,-1,null,void 0,void 0)):b=this.ganttControl.Model.Activities_M()[this.childIndex-
1];null!=b&&(b=this.ganttControl.ActivityViews.GetActivityViewByID(b.ID_M()),this.ganttControl.InsertNewItemAsSiblingBelow(this.cachedTask,this.ganttControl.ActivityViews.indexOf(b),!0));for(b=0;b<this._predByID.keys.length;b++)a=this._predByID.keys[b],this._predByID[a]&&(c=this.ganttControl.ActivityViews.GetActivityViewByID(a).Activity_M(),View.GanttActivityView.prototype.UpdateActivityDependency(this.ganttControl.Model,c,this._predByID[a],RadiantQ.Gantt.Model.NewDependencyAddScenarioType.None))}}
__extends(a,b);return a}(RadiantQ.AbstractAction);f.DeleteAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.DeleteAction.prototype.ganttControl;RadiantQ.Gantt.DeleteAction.prototype.removedActivityId;RadiantQ.Gantt.DeleteAction.prototype.parentID=-1;RadiantQ.Gantt.DeleteAction.prototype.childIndex;RadiantQ.Gantt.DeleteAction.prototype.cachedTask;RadiantQ.Gantt.DeleteAction.prototype._predByID=new RadiantQ.Gantt.Dictionary;
RadiantQ.Gantt.DeleteAction.DeleteCommon=function(f,b){var e=f.RemoveActivity(b);RemoveInArray(f.options.DataSource,e[0].DataSource_M())};
(function(f){function b(b,a,c,d,g){this.element=f(b);this.ItemsSource=c;this.RowHeight=d;this.GC=g;this.$scrollContainer=f(a);this.$actualContent=f(".vsb-actualContent",this.$scrollContainer);0==this.$actualContent.length&&(this.$actualContent=f("<div class='vsb-actualContent' style='float:left;'></div>"),this.$scrollContainer.append(this.$actualContent));this.OnScroll=new ObjectEvent("OnScroll");this._isOnScroll=!1;this.subscribeEvents()}b.prototype.subscribeEvents=function(){var b=this,a=b.$scrollContainer.scrollTop();
this.$scrollContainer.bind("scroll.vsbHandler",function(c){var d=b.$scrollContainer.scrollTop();a!=d&&(a=d,b._isOnScroll=!0,d={element:this,CanRefresh:!1},!0==d.CanRefresh&&b.Refresh(b.ItemsSource),0<b.OnScroll.fn.length&&b.OnScroll.raise(b,c,d),b._isOnScroll=!1)})};b.prototype.GetViewHeight=function(){var b=this.$scrollContainer.height();this.GC.element&&(b=this.GC.element.height());return b};b.prototype.CreateRow=function(b,a){return f("<tr><td>"+b+"</td></tr>")};b.prototype.Refresh=function(b,
a,c){c=c||this.element;var d=f("tbody",c),g=0,h=this.RowHeight,m=this.GetViewHeight(),k=this.$scrollContainer.scrollTop(),l=0;this.ItemsSource=b;newPrint=RadiantQ.Gantt.RQPrint.InternalPrintOptions;isNewPrinting=newPrint.IsNewPrinting;this.UpdateScrollContentHeight();if(!b)return"";var n=0;0<c.length&&a&&(n=k%h,this.GC&&this.GC.options&&null!=this.GC.options.RowHeightBinding?(n=this.GC.GetStartRowIndexAndTop(b,k),l=n.startPosition,n=n.top):l=Math.floor(k/h),g-=n,n=k-n,isNewPrinting&&(n=k));var k=
f("<div></div>"),p,q=newPrint.NoOfRowsInPage;isNewPrinting?(l=newPrint.StartRowIndex,p=newPrint.EndRowIndex>=b.length?b.length:newPrint.EndRowIndex+1):p=b.length;for(var r=l;r<p;r++){var t=r-l;if(isNewPrinting){if(0<newPrint.MaximumHeightPerPage&&g>=newPrint.MaximumHeightPerPage)break;if(t>=q)break}else if(a&&g>=m)break;var s=b[r],w=this.CreateRow(r,s);w&&(k.append(w),g+=s.RowHeight?s.RowHeight:h)}newPrint.NoOfRenderedRows=r<p?t:t+1;d.empty();d.append(k.children());0<c.length&&(c[0].style.setProperty?
c[0].style.setProperty("margin-top",n+"px","important"):c[0].style.setAttribute("margin-top",n+"px","important"));this.GC.GetGanttChartInstance&&this.GC.GetGanttChartInstance().AfterChartRowsRender.raise()};b.prototype.UpdateScrollContentHeight=function(b){var a=this.ItemsSource||[],c=this.RowHeight;0==arguments.length&&(b=this.GC&&this.GC.GetScrollableContentHeight?this.GC.GetScrollableContentHeight(a):a.length*c);this.$actualContent.height(b)};b.prototype.SyncScrollEventWith=function(b,a,c){if(b instanceof
jQuery){if(0==b.length)return}else if(null==b.nodeName){window.console&&console.log&&console.log("You couldn't sync with non HTML elements.");return}var d=this.$scrollContainer,g=f(b);this.UpdateScrollContentHeight(g[0].scrollHeight);var h=0,m=0,k=this;this._scrollElemIsHovered=!1;this.OnScroll.subscribe(function(){h=d.scrollTop();this._scrollElemIsHovered||h!=m&&g.scrollTop(h)},this);a&&(g.hover(function(){k._scrollElemIsHovered=!0},function(){k._scrollElemIsHovered=!1}),c&&c instanceof ObjectEvent?
c.subscribe(function(){m=g.scrollTop();d.scrollTop(m)},this):g.bind("scroll.syncVSBHandler",function(){m=g.scrollTop();h!=m&&d.scrollTop(m)}.bind(this)))};b.prototype.ClearCachedRows=function(){};RadiantQ.Gantt.VerticalScrollBar=b})(jQuery);
(function(){RadiantQ.Culture={};RadiantQ.SupportedCultures=[];RadiantQ.CurrentCulture=navigator.language||navigator.userLanguage;RadiantQ.Culture.Load=function(f){f&&(RadiantQ.CurrentCulture=f);if(void 0==window.RadiantQ_ConvertToMilestoneString){RadiantQ.SupportedCultures.push("en-US");RadiantQ.SupportedCultures.push("fr-FR");RadiantQ.SupportedCultures.push("de-DE");RadiantQ.SupportedCultures.push("es-ES");RadiantQ.SupportedCultures.push("ru-RU");RadiantQ.SupportedCultures.push("nb-NO");RadiantQ.SupportedCultures.push("ja-JP");
void 0==RadiantQ.localizationPath&&(RadiantQ.LocalizationPath="Src/ResourceStrings/");void 0==RadiantQ.DateLocalizationPath&&(RadiantQ.DateLocalizationPath="Src/Scripts/Utils/globalization/");f=$("head",document);var b=document.createElement("script");b.type="text/javascript";b.src=RadiantQ.DateLocalizationPath+RadiantQ.CurrentCulture+".js";f.prepend(b);b=RadiantQ.CurrentCulture;-1==RadiantQ.SupportedCultures.indexOf(RadiantQ.CurrentCulture)&&(b="en-US");var e=document.createElement("script");e.type=
"text/javascript";e.src=RadiantQ.LocalizationPath+b+".js";f.prepend(e)}}})();
(function(f){RadiantQ.Gantt.Utils.EndResizeable=function(b,e,a,c){if(!1!=b instanceof jQuery){var d=null;if(!0==e instanceof jQuery)d=e.width();else if(null!=e)return;var g=b.width(),h=f(".rq-utils-resizeable",b);0==h.length&&(h=f("<div class='rq-utils-resizeable'></div>"),b.append(h));h.css({"margin-left":g+"px"});var m=f("<div class='resizeClone'></div>");h.unbind("mousedown.rq-utils-resizeable");h.bind("mousedown.rq-utils-resizeable",function(e){e.stopPropagation();var l=e.pageX;g=b.width();b.append(m);
m.css({width:g+"px"});_ganttMouseMoveDelegate=function(a){_endResizeMouseMove(a,m,l,g,d)};_ganttMouseUpDelegate=function(d){document.mouseButtonPressed=!1;d=m.width();_endResizeMouseUp(d,m,h,b,c);if(void 0!=a||null!=a)"function"==typeof a?a.call(b,d,c):console.error("onResizeEndCallback should be an function")};f(document).bind("mousemove.rq-utils-resizeable",_ganttMouseMoveDelegate).bind("mouseup.rq-utils-resizeable",_ganttMouseUpDelegate)});_endResizeMouseMove=function(a,b,c,d,e){a=d+a.pageX-c;
null!=e&&a>=e?b.width(e):0>a?b.width(0):b.width(a);return b};_endResizeMouseUp=function(a,b,c,d){d.width(a);c.css({"margin-left":a+"px"});f(document).unbind("mousemove.rq-utils-resizeable").unbind("mouseup.rq-utils-resizeable");b.remove()}}}})(jQuery);
(function(f){function b(b,a,c,d){function g(a,b){return"Invalid Date"==a||"Invalid Date"==b||a&&!1==a instanceof Date||b&&!1==b instanceof Date?(alert("Please provide valid ViewStartTime and ViewEndTime for printing"),!1):a>b?(alert("ViewStartTime should not be greater than ViewEndTime"),!1):!0}function h(a){a=b.options.RowHeightBinding?l.GetGanttTable().uiGridBodyTable.height():a*l.options.RowHeight;var c=(0<wa?wa:Ia)+a;n.height(c).parent().height(c);f(".ui-layout-pane-west",n).height(c);f(".ui-grid-body",
n).height(a);f(".rq-gc-rowsParent",n).height(a);f(".ui-layout-pane.ui-layout-container",n).css("height","100%");c=f(".rq-tsh-div",n).height();f(".rq-gc-chartArea-div",n).height(a+c)}function m(a){var b=RadiantQ.Gantt.RQPrint.InternalPrintOptions;b.IsNewPrinting=a.IsNewPrinting;b.NoOfRowsInPage=a.NoOfRowsInPage;b.StartRowIndex=a.StartRowIndex;b.EndRowIndex=a.EndRowIndex;b.ShowGanttTableOnly=a.ShowGanttTableOnly;b.ShowGanttChartOnly=a.ShowGanttChartOnly;b.MaximumHeightPerPage=a.MaximumHeightPerPage}
function k(b,c){function d(){function g(){var a=document.createElement("canvas");a.width=n.width();a.height=n.height();document.body.appendChild(a);var d=a.getContext("2d");html2canvas(n,{allowTaint:!0,useCORS:!0,onrendered:function(h){var l=h.getContext("2d");d.putImageData(l.getImageData(0,0,n.width(),n.height()),0,0);l=h.toDataURL("image/png");O+="<img class='printableImg' src="+l+"></img>";Ca.push(h);h=0<m.MaximumHeightPerPage?m.NoOfRenderedRows:m.NoOfRowsInPage;C&&b+h<m.EndRowIndex?k(b+h,c):
!1==C?e(g,k):c(O,Ca);f(a).remove()}})}l.options.RowHeightBinding&&h(l.options.FlatItemsSource.length-b);if(a&&0<a.VisibleColumnIndices){var p=f("table.ui-grid-body-table",ia),p=p.eq(0).width()+p.eq(1).width();ia.parent().parent().width(p);V.css("left",p+"px");y.element.css("left",p+"px")}a&&a.BeforePrint&&a.BeforePrint.raise(n);L&&!0==x?(C=!1,e(g)):g()}function e(a,d){function g(a){var b=a.ConvertTimeToX(E.viewStart);E.printWidth=a.element.width();b=a.ConvertXToTime(b+E.printWidth);E.viewEnd||(E.viewEnd=
b);if(b.equals(E.viewEnd))E.stopChartHorzScroll=!0;else if(b.isGreaterThan(E.viewEnd)){b=E.viewEnd;E.stopChartHorzScroll=!0;var c=Math.ceil((E.viewEnd-E.viewStart)/864E5+1);180==a.options.BaseTimeScaleType?c=Math.ceil((E.viewEnd-E.viewStart)/36E5):90==a.options.BaseTimeScaleType&&(c=Math.ceil((E.viewEnd-E.viewStart)/6E4));a.element.width(c*a.options.BaseTimeUnitWidth);f("#gantt_container_TopDivContainer").css("border","none")}a=E.viewStart;E.viewStart=b;return a}0==E.horzScrollPages&&l.GetGanttChart().bind("ganttchartanchortimechanged.RQPrint",
function(b,c){L&&a()});var h=0<m.MaximumHeightPerPage?m.NoOfRenderedRows:m.NoOfRowsInPage;!1==E.stopChartHorzScroll?(E.horzScrollPages++,h=g(y),y.SetStartTime(h.clone())):b+h<m.EndRowIndex?(l.GetGanttChart().unbind("ganttchartanchortimechanged.RQPrint"),L=!0,E={horzScrollPages:0,viewStart:H.clone(),viewEnd:B,stopChartHorzScroll:!1,printWidth:N,lastPageWidth:0},d(b+h,c)):(l.GetGanttChart().unbind("ganttchartanchortimechanged.RQPrint"),c(O,Ca))}function g(){ba=a.VisibleColumnIndices;if(!0==z&&ba&&(ha=
M.Column,0<ba.length&&ba.length!=ha.length))for(var b=0;b<ha.length;b++)-1==ba.indexOf(""+b)&&-1==ba.indexOf(b)&&M.hideColumn(b)}var m=RadiantQ.Gantt.RQPrint.InternalPrintOptions;m.StartRowIndex=b;b+(0<m.MaximumHeightPerPage?m.NoOfRenderedRows:m.NoOfRowsInPage)>l.options.FlatItemsSource.length&&h(l.options.FlatItemsSource.length-b);a&&g();var p=0;l.options.GanttTableRowLoadedCallBack&&(p=100);M.Refresh();y.ViewableDependencyViews=[];var q=y.AfterChartRowsRender.subscribe(function(){ka.css("height",
"inherit");Fa.css("height","inherit");J.Refresh();setTimeout(d,p);q.Dispose()});y.VSB.ClearCachedRows();y.VSB.Refresh(l.options.FlatItemsSource,!0)}var l=b,n=l.element,p=RadiantQ.Gantt.RQPrint.InternalPrintOptions,q;a&&(q=jQuery.extend(!0,{},p),void 0==a.IsNewPrinting&&(a=jQuery.extend(p,a)));var r=a||p,t=r.ShowGanttTableOnly,s=r.ShowGanttChartOnly,p=l.options.FlatItemsSource.length,w=0>r.EndRowIndex||r.EndRowIndex>p?p:r.EndRowIndex;r.StartRowIndex=!r.StartRowIndex||0>=r.StartRowIndex||r.StartRowIndex>
p||r.StartRowIndex>w?0:r.StartRowIndex;r.EndRowIndex=w;var u=!1,v=!1,z=a?!1==a.IsGridVisible?(v=!0,s=!0):!0:!0,y=l.GetGanttChartInstance(),A=f("#gantt_container_TopDivContainer",n).css("border"),x=!0,C=!0,L=a?a.IsGanttChartHorzScroll:!1,H=a?a.ViewStartTime:null,B=a?a.ViewEndTime:null,F=n.width(),N=a?0<a.PrintWidth?a.PrintWidth:F:F;if(300>N)alert("Print width should be greater than 300");else if(!(L&&H&&B)||g(H,B)){!L||H||B||(H=y.options.AnchorTime);if(L&&!H&&B){var G=y.options.AnchorTime;if(B.isGreaterThan(G))H=
G;else{alert("Please provide valid ViewStartTime for printing");return}}var E={horzScrollPages:0,viewStart:H,viewEnd:B,stopChartHorzScroll:!1,printWidth:N,lastPageWidth:0},O="",M=l.GetGanttTable(),S;M&&M.options&&(S=M.options.headerHeight);var J=f(".rq-gc-dependencyControl",n).data("GanttDependencyControl"),P=y.options.ViewWidth;y.options.ComputedStartTime.clone();y.options.ComputedEndTime.clone();var R=a?a.Title?a.Title:document.title:document.title,Z=a?a.EnableCustomTableCol:!1;if(t&&s)alert("please enable either ShowGanttTableOnly or ShowGanttChartOnly option"),
d.remove(),v&&(s=!1),q&&(RadiantQ.Gantt.RQPrint.InternalPrintOptions=q);else{var G=y.options.AnchorTime.clone(),Q=y.HScrollBar.scrollLeft();y.options.AnchorTime=y.VisualStartTime.clone();if(Z)u=!0;else if(t&&a){if(!a.VisibleColumnIndices){alert("please select any one of the column header");d.remove();return}}else a&&!1==(t||s)&&!a.VisibleColumnIndices&&(u=s=!0);t?(z=!0,x=!1):s?(x=!0,z=!1):x=z=!0;r.IsNewPrinting=!0;a&&m(a);var U=l.GetLayoutElement().data("layout"),ca=f(".ui-layout-center"),da=f(".ui-layout-pane-west",
n).width(),V=f(".ui-layout-resizer",n),va=f(".ui-layout-pane-center",n).width(),la=f(".ui-layout-pane-center",n)[0].style.left,ma=n.height(),Y=n.parent().height(),ra=f(".ui-layout-pane-west",n).height(),sa=f(".ui-grid-body",n).height(),Da=f(".rq-gc-rowsParent",n).height(),wa=f(".rq-grid-head-parent",n).height(),Ia=f(".rq-tsh-div",n).height(),Ka=f(".ui-layout-pane.ui-layout-container",n).height(),qa=f(".rq-gc-chartArea-div",n).height(),ka=f(".rq-gc-dependencysParent",n),Fa=f(".rq-gc-dependencyControl",
n),Ea=ka.height(),Ba=Fa.height(),Ga=l.options.UseVirtualization,xa=l.options.UseChartVirtualization,ia=f(".ui-gridpanel",n),ja=ia.parent().parent().width(),Ma=V.css("left"),fa=y.element.css("left"),za=l.options.TablePanelWidth,p=0<r.MaximumHeightPerPage?Math.ceil(r.MaximumHeightPerPage/l.options.RowHeight):r.NoOfRowsInPage;h(p);"ProjectGantt"==b.GanttType?n.GanttControl({IsPrinting:!0,UseVirtualization:!0,UseChartVirtualization:!0}):n.FlexyGantt({IsPrinting:!0,UseVirtualization:!0,UseChartVirtualization:!0});
f(".rq-gc-pager-container",n).css("display","none");t?(U.open("west"),ca.css("display","none"),f(".ui-layout-pane-west",n).css("width","100% !important"),U.sizePane("west","100%"),V.css("display","none !important"),l.UpdateLayout()):s&&("ProjectGantt"==b.GanttType?n.GanttControl({IsPrinting:!1}):n.FlexyGantt({IsPrinting:!1}),U.close("west"),f(".ui-layout-pane-west").css("display","none"),f(".ui-layout-resizer").css("display","none"),U.sizePane("west","100%"),f(".ui-layout-pane-west",n).css("display",
"none !important"),f(".ui-layout-pane-center",n).css({width:"100% !important",left:"0px !important",display:"block !important"}),l.UpdateLayout());!0==x&&(y._setOption("ResizeToFit",!0),a&&!L?(a.ViewStartTime?y.SetStartTime(a.ViewStartTime.clone()):a.ViewEndTime||y.SetStartTime(y.VisualStartTime.clone()),a.ViewEndTime&&y.TrySetEndTime(a.ViewEndTime.clone())):L&&!0==x&&N!=F&&(n.width(N),l.UpdateLayout()));k(r.StartRowIndex,function(g,h,k){var p=r.AfterPrintComplete;r.AfterPrintComplete=new ObjectEvent("InternalAfterPrintCompleteEvent");
var w=r.AfterPrintComplete.subscribe(function(){function c(){if(!0==z){if(ba.length!=ha.length)for(var b=0;b<ha.length;b++)-1!=ba.indexOf(""+b)||-1!=ba.indexOf(b)||M.Column[b].hidden||M.showColumn(b);0<a.VisibleColumnIndices.length&&(ia.parent().parent().width(ja),V.css("left",Ma+"px"),y.element.css("left",fa+"px"),l.UpdateLayout())}}l.grid.options.headerHeight=S;Z=!1;r.IsNewPrinting=!1;a?m(a):(r.StartRowIndex=0,r.EndRowIndex=-1);q&&(RadiantQ.Gantt.RQPrint.InternalPrintOptions=q);C=!0;var g=n.width();
L&&g!=F&&(n.width(F),l.UpdateLayout(),f("#gantt_container_TopDivContainer").css("border",A));"ProjectGantt"==b.GanttType?n.GanttControl({IsPrinting:!1,ViewWidth:P,UseVirtualization:Ga,UseChartVirtualization:xa}):n.FlexyGantt({IsPrinting:!1,ViewWidth:P,UseVirtualization:Ga,UseChartVirtualization:xa});var h=l.GetGanttChart();0==h.length&&l.element.length&&(h=f("#"+l.element[0].id+"_GanttChart"));h.data("GanttChart")._canUpdate=!1;n.height(ma).parent().height(Y);f(".rq-gc-pager-container",n).css("display",
"block");f(".ui-layout-pane-west",n).height(ra);f(".ui-grid-body",n).height(sa);f(".rq-gc-rowsParent",n).height(Da);f(".rq-tsh-div",n).height(Ia);f(".ui-layout-pane.ui-layout-container",n).height(Ka);f(".rq-gc-chartArea-div",n).height(qa);ka.height(Ea);Fa.height(Ba);t?(U.open("west"),ca.css("display","block"),f(".ui-layout-pane-west",n).width(da),U.sizePane("west","50%"),V.css("display","block !important"),l.UpdateLayout(),h.data().GanttChart.options.ResizeToFit?h.GanttChart({AnchorTime:G}):h.GanttChart({AnchorTime:G.clone()}),
h.HScrollBar.scrollLeft(Q)):s&&(U.open("west"),f(".ui-layout-pane-west").css("display","block"),f(".ui-layout-resizer").css("display","block !important"),U.sizePane("west","50%"),f(".ui-layout-pane-west",n).css("display","none !important"),f(".ui-layout-pane-center",n).css({width:va,left:la,display:"block !important"}),l.UpdateLayout(),h.data().GanttChart.options.ResizeToFit?h.GanttChart({AnchorTime:G}):h.GanttChart({AnchorTime:G.clone()}),h.data("GanttChart").HScrollBar.scrollLeft(Q));a&&(a.VisibleColumnIndices&&
c(),l._setOption("TablePanelWidth",za));z=x=!1;v&&(r.ShowGanttChartOnly=!1);u&&(s=!1,u=r.ShowGanttChartOnly=!1);f(".ui-grid-body",n).scrollTop(0);M.Refresh();(function(){var a=f(".rq-ganttWrapper",n).data("radiantqHoverable");a&&a.chartTable&&(a.chartTable=f());h.GanttChart("destroy");l.options.BottomTwoHeaders=y.options.BottomTwoHeaders;l.initGanttChart();h.data().GanttChart.options.ResizeToFit?h.GanttChart({AnchorTime:G}):h.GanttChart({AnchorTime:G.clone()});h.data().GanttChart.HScrollBar.scrollLeft(Q)})();
w.Dispose();d.remove();p&&p.raise()}),B=!0;"function"==typeof c&&(B=c(h));!1===B?r.AfterPrintComplete.raise():null==h?(k.save("Test.pdf"),r.AfterPrintComplete.raise()):RadiantQ.Gantt.PrintImageUsingIframe(g,R,r)});var ba,ha,Ca=[];new jsPDF("p","pt","letter")}}}RadiantQ.Gantt.PrintOptions=function(){this.MaximumHeightPerPage=-1;this.IsNewPrinting=!1;this.NoOfRowsInPage=25;this.ShowGanttChartOnly=this.ShowGanttTableOnly=!1;this.StartRowIndex=0;this.EndRowIndex=-1;this.Title=null;this.VisibleColumnIndices=
[];this.ViewEndTime=this.ViewStartTime=null;this.IsGanttChartHorzScroll=!1;this.PrintWidth=0;this.BeforePrint=new ObjectEvent("BeforePrint");this.AfterPrintComplete=new ObjectEvent("AfterPrintComplete")};RadiantQ.Gantt.RQPrint=function(e,a,c){var d=f('<div class="rq-busyIndicator" id="rq-busyIndicator"><div class="progressPanel"><span class="progressText">Printing...</span><div id="spinLoader" style="margin-top: 10px; margin-left: -30px"></div></div></div>');e&&e.element?f(e.element).parent().append(d):
f(document.body).append(d);setTimeout(function(){b(e,a,c,d)},10)};RadiantQ.Gantt.RQPrint.InternalPrintOptions={MaximumHeightPerPage:-1,NoOfRenderedRows:-1,NoOfRowsInPage:25,StartRowIndex:0,EndRowIndex:-1,IsNewPrinting:!1,ShowGanttTableOnly:!1,ShowGanttChartOnly:!1,Title:null,VisibleColumnIndices:[],ViewStartTime:null,ViewEndTime:null,IsGanttChartHorzScroll:!1,PrintWidth:0,AfterPrintComplete:new ObjectEvent("AfterPrintComplete")}})(jQuery);
(function(){var f=function(b){var e=$('<div class="ui-tooltip ui-widget ui-corner-all ui-widget-content" style="display: block; position: absolute; max-width: none !important;"></div>');this.unbind(".rq-tooltip");this.bind("mousemove.rq-tooltip",function(a){if(!1==f.CanShowTooltip)$(".ui-tooltip").remove();else{var c=b($(this),a);if(null!=c){e.empty();e.append(c);$(document.body).append(e);var c=a.pageX,d=a.pageY,c=$(document).width()<c+e.outerWidth()+10?c-e.outerWidth():a.pageX,d=$(document).height()<
d+e.outerHeight()+20?d-e.outerHeight()-15:a.pageY+15;e.css({top:d+"px",left:c+"px"})}}}).bind("mouseleave.rq-tooltip",function(a){$(".ui-tooltip").remove()})};f.CanShowTooltip=!0;f.RemoveTooltip=function(){setTimeout(function(){$(".ui-tooltip").remove()},0,this)};$.fn.RQTooltip=f})();
(function(f,b){f.Gantt.BusyIndicator=new function(){var e=!1,a=b('<div id="rq-busyIndicator"></div>');this.show=function(b,d){a.empty();e&&a.show();b||(b="Loading...");a.append('<div class="progressPanel" ><span class="progressText" unselectable="on">'+b+'</span><div id="spinLoader" style="margin-top: 10px; margin-left: -30px"></div></div>');setTimeout(function(){d&&"function"==typeof d&&d()},0)};this.hide=function(){a.empty().hide()};b(window).bind("load",function(){e=!0;b(document.body).append(a)})}})(RadiantQ,
jQuery);
(function(){function f(a,c,d,e,f,m,k){this.min=Date.MaxValue;this.max=Date.MinValue;var l=(this.parent=a)?a.parent:null;this.childUtils=childs=[];this.updateTimes=function(b){var c=!0;b.min&&0>b.min.compareTo(this.min)&&(this.min=b.min,c=!0);b.max&&0<b.max.compareTo(this.max)&&(this.max=b.max,c=!0);c&&(l&&l.updateTimes(this),a&&a.dataSource&&this.updateData(a.dataSource))};this.updateData=function(a){a[m]=this.min;a[k]=this.max};for(var n=0;n<c.length;n++){var p=new b(this,c[n],d,e,f,m,k);this.childUtils.push(p)}this.recalculateTimes=
function(){this.min=Date.MaxValue;this.max=Date.MinValue;if(l)l.recalculateTimes(this);else for(var b=0;b<this.childUtils.length;b++)this.childUtils[b].recalculateTimes();a&&a.dataSource&&this.updateData(a.dataSource)};var q=this;$.observable(c).bind("insert remove replaceAll",function(a,c){var l=a.type;if("insert"==l)for(var n=c.items,p=0;p<n.length;p++)l=new b(q,n[p],d,e,f,m,k),q.childUtils.push(l);else if("remove"==l)for(n=c.index,l=childs[n],childs.splice(n,1),l.remove(),n=c.items,p=0;p<n.length;p++);
})}function b(a,b,d,g,h,m,k){this.parent=a;this.dataSource=b;var l=null,l="function"==typeof d?d(b):b[d];null==l?(a.updateTimes({min:b[g],max:b[h]}),e(b,g,h,function(b){a.updateTimes({min:b[g],max:b[h]})})):(d=new f(this,l,d,g,h,m,k),d.data=b,this.childTracker=d);this.recalculateTimes=function(){if(null==l)a.updateTimes({min:b[g],max:b[h]});else if(null!=this.childTracker)for(var d=0;d<this.childTracker.childUtils.length;d++)this.childTracker.childUtils[d].recalculateTimes()};this.remove=function(){a.recalculateTimes()}}
function e(a,b,d,e){a.PropertyChanged&&!1!=a.PropertyChanged instanceof ObjectEvent||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));var f=a[b];Object.defineProperty(a,b,{get:function(){return f},set:function(a){f=a;e(this,b,f);this.PropertyChanged.raise(this,{PropertyName:b,Value:f})}});var m=a[d];Object.defineProperty(a,d,{get:function(){return m},set:function(a){m=a;e(this,d,m);this.PropertyChanged.raise(this,{PropertyName:d,Value:m})}})}RadiantQ.Gantt.Utils.TasksTimeTracker=function(a,
b,d,e,h,m){h||(h=d);m||(m=e);return new f(null,a,b,d,e,h,m)}})();
