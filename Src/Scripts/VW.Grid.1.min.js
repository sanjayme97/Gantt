var VW={Grid:{}};
(function(n){VW.Grid.ColumnBehaviour={Default:1,NoHorizontalScrollBar:2};n.CellInfo=function(g,f,e,k){this.cell=g;this.ColumnInfo=f;this.boundData=e;this.row=k};var q={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",
greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",startsWith:"startswith",endsWith:"endswith",substringof:"contains"},u=function(){function g(b){return b.replace(a,"\\").replace(k,"")}function f(a,c,d,h){var p;null!=d&&("string"===typeof d&&(d=g(d),(p=e.exec(d))?d=new Date(+p[1]):h?(d="'"+d.toLowerCase()+"'",c="("+c+" || '').toLowerCase()"):d="'"+d+"'"),d.getTime&&(c="("+c+"?"+c+".getTime():"+c+")",d=d.getTime()));return c+" "+a+" "+d}var e=/^\/Date\((.*?)\)\/$/,k=/(\r+|\n+)/g,a=/(?=['\\])/g;
return{eq:function(a,c,d){return f("==",a,c,d)},neq:function(a,c,d){return f("!=",a,c,d)},gt:function(a,c,d){return f(">",a,c,d)},gte:function(a,c,d){return f(">=",a,c,d)},lt:function(a,c,d){return f("<",a,c,d)},lte:function(a,c,d){return f("<=",a,c,d)},startswith:function(a,c,d){d&&(a="("+a+" || '').toLowerCase()",c&&(c=c.toLowerCase()));c&&(c=g(c));return a+".lastIndexOf('"+c+"', 0) == 0"},endswith:function(a,c,d){d&&(a="("+a+" || '').toLowerCase()",c&&(c=c.toLowerCase()));c&&(c=g(c));return a+
".indexOf('"+c+"', "+a+".length - "+(c||"").length+") >= 0"},contains:function(a,c,d){d&&(a="("+a+" || '').toLowerCase()",c&&(c=c.toLowerCase()));c&&(c=g(c));return a+".indexOf('"+c+"') >= 0"},doesnotcontain:function(a,c,d){d&&(a="("+a+" || '').toLowerCase()",c&&(c=c.toLowerCase()));c&&(c=g(c));return a+".indexOf('"+c+"') == -1"}}}();n.GridModel=function(g){function f(a){var b,c,d,h=a.filters;if(h)for(a=0,b=h.length;a<b;a++)c=h[a],(d=c.operator)&&"string"===typeof d&&(c.operator=q[d.toLowerCase()]||
d),f(c)}if(0!=arguments.length){var e="desc";this.cacheData=this.data=g instanceof RadiantQ.RQ_CollectionChangeNotifier?g:new RadiantQ.RQ_CollectionChangeNotifier(g);this.Change=new ObjectEvent}this.sortedList=[];this.getComparer=function(){for(var a=[],b=0;b<this.sortedList.length;b++){var c=this.sortedList[b],d=null,h=this.createComparer(c),d=h;c.dir==e&&(d=function(a,b){return h(b,a,!0)});a.push(d)}return a};this.createComparer=function(a){var b=new Function("view","return view."+a.field);return function(a,
d){a=b(a);d=b(d);return null==a&&null==d?0:null==a?-1:null==d?1:a.Compare?a.Compare(d):a>d?1:a<d?-1:0}};this.AddItemsToSortList=function(a){this.removetItemFormSortedList(a);this.sortedList.push(a)};this.removetItemFormSortedList=function(a){this.sortedList=$.grep(this.sortedList,function(b){return b.field!=a.field})};this.combine=function(a){return function(b,c){var d=a[0](b,c),h,p;h=1;for(p=a.length;h<p;h++)d=d||a[h](b,c);return d}};this.sort=function(a){var b=this.getComparer();null==a.dir?(this.removetItemFormSortedList(a),
b=this.getComparer(),0!=b.length?(b=this.combine(b),this.sortedListItem(b,a)):this.sortedListItem(null,a)):(a.comparer=b,"multiple"!=a.mode?(this.sortedList=[],this.AddItemsToSortList(a),b=this.getComparer()[0]):(this.AddItemsToSortList(a),b=this.combine(this.getComparer())),this.sortedListItem(b,a));this.Change.raise()};this.sortedListItem=function(a,b){a?this.data=this.data.slice(0).sort(a):void 0!=this._filter?this.filter(this._filter):this.data=this.cacheData.slice(0)};this.filter=function(a){if(a){if(a&&
!$.isEmptyObject(a)){if($.isArray(a)||!a.filters)a={logic:"and",filters:$.isArray(a)?a:[a]};f(a)}else a=void 0;this.Procressfilter(a)}else return this._filter};var k=function(a){var b=[],c,d,h,p,e=[],g=[],f,m,r=a.filters;c=0;for(d=r.length;c<d;c++)h=r[c],f=h.field,m=h.operator,h.filters?(p=k(h),h=p.expression.replace(/__o\[(\d+)\]/g,function(a,b){return"__o["+(g.length+ +b)+"]"}).replace(/__f\[(\d+)\]/g,function(a,b){return"__f["+(e.length+ +b)+"]"}),g.push.apply(g,p.operators),e.push.apply(e,p.fields)):
("function"===typeof f?(p="__f["+e.length+"](d)",e.push(f)):p="d."+f,"function"===typeof m?(h="__o["+g.length+"]("+p+", '"+h.value+"')",g.push(m)):(f=!0,void 0!==h.ignoreCase&&(f=h.ignoreCase),void 0!=h.ignoreCase||"number"!=h.type&&"date"!=h.type||(f=!1),h=u[(m||"eq").toLowerCase()](p,h.value,f))),b.push(h);return{expression:"("+b.join({and:" && ",or:" || "}[a.logic])+")",fields:e,operators:g}};this.clearFilter=function(){this._filter=null;this.data=this.cacheData.slice(0);this.Change.raise()};this.Procressfilter=
function(a){this.filter();this._filter=a;a=k(a);var b=a.fields,c=a.operators,d=a=new Function("d, __f, __o","return "+a.expression);if(b.length||c.length)a=function(a){return d(a,b,c)};this.FilterList(a)};this.FilterList=function(a){var b,c=[],d,h;d=0;for(h=this.cacheData.length;d<h;d++)b=this.cacheData[d],a(b)&&c.push(b);this.data=c.slice(0);this.Change.raise()}};VW.Grid.SortOptions={ParentOnly:1,ChildOnly:2,ParentAndChild:3};VW.Grid.FilterOptions={ParentOnly:1,ChildOnly:2,ParentAndChild:3};VW.Grid.HierarchyView=
function(g,f,e,k){VW.Grid.GridModel.call(this,g);e||(e=VW.Grid.SortOptions.ParentAndChild);k||(k=VW.Grid.FilterOptions.ParentAndChild);this.SortOption=e;this.FilterOption=k;this.dataSource=g;this.data=new RadiantQ.RQ_CollectionChangeNotifier;this.init=function(){this.ParentViews=new RadiantQ.RQ_CollectionChangeNotifier;for(var a=0;a<this.dataSource.length;a++){var b=this.CreateView(this.dataSource[a],0,a);b.IsTopLevelNode=!0;this.data.add(b);this.ParentViews.add(b)}this.cacheData=this.data.slice(0);
this.ExpandAll()};this.ExpandAllRecursive=function(a){a.IsParent&&this.Expand(a);a=a.ChildViews;for(var b=0;b<a.length;b++)this.ExpandAllRecursive(a[b])};this.ExpandAll=function(){for(var a=0;a<this.ParentViews.length;a++)this.Expand(this.ParentViews[a])};this.CreateChildViews=function(a){var b=f(a);if(b){a.ChildViews.slice(0);a.ChildViews=new RadiantQ.RQ_CollectionChangeNotifier;for(var c=0;c<b.length;c++){var d=this.CreateView(b[c],a.IndentLevel+1,c);a.ChildViews.add(d)}}return b};this.CreateView=
function(a,b,c){a=new VW.Grid.View(a,this);a.IndentLevel=b;a.SourceIndex=c;f&&(this.CreateChildViews(a)?a.IsParent=!0:a.IsParent=!1);return a};this.Expand=function(a){!0!=a.IsExpanded&&(null!=this.Currentcomparer&&0!=a.ChildViews.length&&a.ChildViews.reset(a.ChildViews.slice(0).sort(this.Currentcomparer)),this.ExpandChild(a),a.IsExpanded=!0)};this.ExpandChild=function(a){for(var b=this.data.indexOf(a)+1,c=0;c<a.ChildViews.length;c++){var d=a.ChildViews[c];this.data.insert(b+c,d)}for(c=0;c<a.ChildViews.length;c++)d=
a.ChildViews[c],d.IsParent&&!0==d.IsExpanded&&this.ExpandAllRecursive(d)};this.ExpandFilter=function(a){var b=this.data.indexOf(a)+1;null!=this.Currentcomparer&&a.ChildViews.reset(a.ChildViews.slice(0).sort(this.Currentcomparer));for(var c=0,d=0;d<a.ChildViews.length;d++){var h=a.ChildViews[d];!0==h.FilteredOut&&(this.data.insert(b+c,h),c++)}a.IsExpanded=!0};this.Collapse=function(a,b){if(!1!=a.IsExpanded){for(var c=0;c<a.ChildViews.length;c++){var d=a.ChildViews[c];d.IsParent?(this.data.remove(d),
this.Collapse(d,!0)):this.data.remove(d)}b||(a.IsExpanded=!1)}};this.CollapseAll=function(){for(var a=0;a<this.ParentViews.length;a++)this.Collapse(this.ParentViews[a])};this.init();this.SourceSort=function(a,b){return a.SourceIndex-b.SourceIndex};this.sortBycomparer=function(a){var b=this.SortOption==VW.Grid.SortOptions.ParentAndChild||this.SortOption==VW.Grid.SortOptions.ParentOnly,c=this.SortOption==VW.Grid.SortOptions.ParentAndChild||this.SortOption==VW.Grid.SortOptions.ChildOnly;if(null==this._filter)for(b?
this.data.reset(this.ParentViews.slice(0).sort(a)):this.data.reset(this.ParentViews.slice(0)),b=0;b<this.data.length;b++){var d=this.data[b];d.IsExpanded&&d.IsParent&&(c&&d.ChildViews.reset(d.ChildViews.slice(0).sort(a)),d.hierarchyView.ExpandChild(d))}else for(c=this.data.filter(function(a){return a.IsTopLevelNode}),this.FilterOption==VW.Grid.FilterOptions.ChildOnly&&(c=this.data),b?this.data.reset(c.slice(0).sort(a)):this.data.reset(c.slice(0)),b=0;b<this.data.length;b++)d=this.data[b],d.IsExpanded&&
d.IsParent&&d.hierarchyView.ExpandFilter(d)};this.Currentcomparer=null;this.sortedListItem=function(a,b){(this.Currentcomparer=a)?this.sortBycomparer(a):this.sortBycomparer(this.SourceSort)};this.ApplyFilterOnView=function(a,b,c,d,h){var p=a.ChildViews,e=b(a);if(0<p.length){for(var e=!1,g=[],f=0;f<p.length;f++)var k=this.ApplyFilterOnView(p[f],b,g,d,h),e=e|k;!0==e&&!0==d?(a.FilteredOut=!0,c.push(a)):a.FilteredOut=!1;if(g.length&&a.IsExpanded&&!0==h)for(f=0;f<g.length;f++)c.push(g[f])}else e?(c.push(a),
a.FilteredOut=!0):a.FilteredOut=!1;return a.FilteredOut};this.FilterList=function(a){for(var b,c=[],c=[],d=this.FilterOption==VW.Grid.FilterOptions.ParentAndChild||this.FilterOption==VW.Grid.FilterOptions.ParentOnly,h=this.FilterOption==VW.Grid.FilterOptions.ParentAndChild||this.FilterOption==VW.Grid.FilterOptions.ChildOnly,p=0;p<this.ParentViews.length;p++)b=this.ParentViews[p],this.ApplyFilterOnView(b,a,c,d,h);this.data.reset(c.slice(0));this.Currentcomparer&&this.sortBycomparer(this.Currentcomparer);
this.Change.raise()};this.clearFilter=function(){this._filter=null;this.Currentcomparer?this.sortBycomparer(this.Currentcomparer):this.sortBycomparer(this.SourceSort);this.Change.raise()}};VW.Grid.HierarchyView.prototype=new VW.Grid.GridModel;VW.Grid.View=function(g,f){this.PropertyChanged=new ObjectEvent("View");this.DataSource=g;this.hierarchyView=f;var e=null;Object.defineProperty(this,"IsExpanded",{get:function(){return e},set:function(g){e!=g&&(e=g,this.OnPropertyChange("IsExpanded",e))},enumerable:!0,
configurable:!0});this.IsTopLevelNode=this.IsParent=!1;this.ChildViews=[];this.SourceIndex=-1;this.IndentLevel=0;this.FilteredOut=!1;this.ChangeState=function(){this.IsExpanded?this.hierarchyView.Collapse(this):this.hierarchyView.Expand(this)};this.IndentWidth=function(){var e=0;0<this.IndentLevel&&(e+=12*this.IndentLevel);!1==this.IsParent&&(e+=12);return e};this.OnPropertyChange=function(e,a){this.PropertyChanged.raise(this,{PropertyName:e,value:a})}};n.Filter=function(){function g(e,f){e.filters&&
(e.filters=$.grep(e.filters,function(a){g(a,f);return a.filters?a.filters.length:a.field!=f}))}var f=this;this.options={column:null,datasource:[],field:"",grid:null};this.element=null;this._create=function(e){var g=this;$.extend(this.options,e);this.element.data("filter",this);e=this.element.find("input");g.options.column.filterValue&&e.val(g.options.column.filterValue);e.bind("change",function(){g.change(event,this)});e.bind("keyup",function(a){13==a.which&&g.change(a,this)});e.bind("mouseup",function(a){var b=
$(this);""!=b.val()&&setTimeout(function(){""==b.val()&&g.change(a,b)},1)})};this.subscribeModelChange=function(){this.options.datasource instanceof n.GridModel&&this.options.datasource.Change.subscribe($.proxy(this.refresh,this))};this.change=function(e,g){var a=$(g),b=a.hasClass("hasDatepicker")?a.datepicker("getDate"):a.val();b?a.parent().find(".menu-icon").addClass("alternate-menu-icon"):a.parent().find(".menu-icon").removeClass("alternate-menu-icon");f.options.column.filterValue=b;f.filterModel=
{logic:"and",filters:[{field:f.options.field,operator:f.options.operator,ignoreCase:f.options.ignoreCase,value:b,type:f.options.type}]};f.filter(f.filterModel)};this._merge=function(e){var f=e.logic||"and",a=e.filters,b,c=this.options.grid.options.datasource.filter()||{filters:[],logic:"and"},d,h;g(c,this.options.field);a=$.grep(a,function(a){return""!==a.value&&null!=a.value});d=0;for(h=a.length;d<h;d++)b=a[d],b.value=b.value;a.length&&(c.filters.length?(e.filters=a,"and"!==c.logic&&(c.filters=[{logic:c.logic,
filters:c.filters}],c.logic="and"),1<a.length?c.filters.push(e):c.filters.push(a[0])):(c.filters=a,c.logic=f));return c};this.filter=function(e){e=this._merge(e);var g=f.options.grid.options.datasource;e.filters.length?g.filter(e):g.clearFilter(e)}};n.Sorter=function(){this.options={column:null,datasource:[],grid:null,mode:"single",allowUnsort:!0};this.element=null;this._create=function(g){$.extend(this.options,g);this.element.data("Sorter",this);this.subscribeModelChange();this.sortHandler=$.proxy(this.sort,
this);this.element.bind("click",this.sortHandler);this.refresh()};this.subscribeModelChange=function(){this.options.datasource instanceof n.GridModel&&this.options.datasource.Change.subscribe($.proxy(this.refresh,this))};this.sort=function(g){g=$(g.target);if(!(g.hasClass("resizeHelper")||g.hasClass("ui-header-menu")||g.is("tr"))&&!0!=this.options.grid.options.columnResizing&&this.options.datasource instanceof n.GridModel){var f=g.closest("th").data("column");!1!=f.isSortable&&(g=(g=this.element.attr("data-dir"))?
"asc"==g?"desc":!1!=this.options.allowUnsort?null:"asc":"asc",f={columnInfo:f,field:this.options.grid.columnField(f),dir:g,mode:this.options.mode,allowUnsort:this.options.allowUnsort},this.options.datasource.sort(f),this.element.attr("data-dir",g))}};this.setOptions=function(g,f){this.options[g]=f;switch(g){case "datasource":this.subscribeModelChange()}};this.refresh=function(){var g=this.options.datasource.sortedList;if(this.options.datasource instanceof n.GridModel){for(var f="icon ",e=this.element.find("span.icon"),
k=0;k<g.length;k++)if(this.options.column==g[k].columnInfo){"asc"==g[k].dir?f+="ui-icon ui-icon-triangle-1-s":"desc"==g[k].dir&&(f+="ui-icon ui-icon-triangle-1-n");break}e[0].className=f}}};n.headerMenu=function(g){var f=this;f.SelectedFilter={};f.menuTemplate="<li class='${data.menuOptions.DisableColumnsOption ? 'ui-state-disabled':''}'> <span >Columns</span> <ul class='submenu'>  # for (var i = 0; i < data.columns.length; i++) { #   #if(data.columns[i].title != undefined || data.columns[i].field  != '' ) {#    <li><input type='checkbox' class='ignoreMenuSelect' data-value=${i} ${ data.columns[i].hidden == true ? '' : 'checked'}> #= data.columns[i].title ||data.columns[i].field  #  </li> # }} #</ul></li>#if(data.menuOptions.AllowColumnFreezing) {# <li style='display:${data.column.lockable==false ?'none':''};'> <span class='${data.column.locked == true ? 'rq-lock-column ui-icon ui-icon-unlocked':'rq-lock-column ui-icon ui-icon-locked'}'/>${data.column.locked == true ? 'Unlock' : 'Lock'}  </li>#}#";
f.filtermenuTemplate=" #if(!data.column.type ||data.column.type=='string' ) {#<li class='filter-item' value='equal'>Is equal to</li><li class='filter-item' value='notequal'>Is not equal to</li><li class='filter-item' value='startsWith'>Starts with</li><li class='filter-item' value='substringof'>Contains</li><li class='filter-item' value='notsubstringof'>Does not contains</li><li class='filter-item' value='endsWith'>Ends with</li><li>---------------------</li><li class='filter-item' value='clear' id='clearFilter' >Clear Filter</li> # }# #if(data.column.type =='number' || data.column.type =='date') {#<li class='filter-item' value='equal'>Is equal to</li><li class='filter-item' value='notequal'>Is not equal to</li><li class='filter-item' value='greaterthanequal'>Is greater than or equal to</li><li class='filter-item' value='greaterthan'>Is greater than</li><li class='filter-item' value='lessthanequal'>Is less than or equal to</li><li class='filter-item' value='lessthan'>Is less than</li><li>---------------------</li><li class='filter-item' value='clear' id='clearFilter' >Clear Filter</li> # }#";
this.createMenu=function(){var e=this;e.menu=$("<ul>");e.menuWrap=$("<div class='ui-grid-headMenu' style='overflow: inherit;z-index:20000'>",{"class":"ui-selectmenu-menu ui-front"}).append(e.menu).appendTo("body");e.menuWrap.hide();e.menu.menu({select:function(f,a){var b=e.currentColumn.columns.indexOf(e.currentColumn.column);if(0!=a.item.find(".rq-lock-column").length)!0==e.currentColumn.column.locked?g.UnlockColumn(b):g.LockColumn(b),g.element.trigger("UpdateState",e._updateColumnsMenuHandler),
e.menuWrap.hide();else if(a.item.hasClass("filter-item")){var b=e.currentColumn.column,c=!0;void 0!=b.filterable&&(b.filterable.ignoreCase&&(c=b.filterable.ignoreCase),b.filterable.ignoreCase||"number"!=b.type&&"date"!=b.type||(c=!1));var d=a.item.attr("value");e.SelectedFilter[b.field]=q[d];"clear"==d&&(e.currentFilter.find(".menu-icon").removeClass("alternate-menu-icon"),e.currentInputValue="",e.SelectedFilter={},e.currentFilter.find(".ui-filter-input").val(e.currentInputValue));e.filterModel={logic:"and",
filters:[{field:b.field,operator:q[d],ignoreCase:c,value:e.currentInputValue}]};e.menuWrap.hide();e.currentFilter.data("filter").filter(e.filterModel)}}});e._updateColumnsMenuHandler=$.proxy(e._updateColumnsMenu,e);g.element.bind("UpdateState",e._updateColumnsMenuHandler);e.menuInstance=e.menu.data("uiMenu");void 0==e.menuInstance&&(e.menuInstance=e.menu.data("ui-menu"));this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._isDivider=
function(){return!1};this.menuInstance.select=function(e){this.active=this.active||$(e.target).closest(".ui-menu-item");if(!0==$(e.target).hasClass("ignoreMenuSelect"))return!1;var a={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0);this._trigger("select",e,a)}};this.subscribeMenuHeaderEvent=function(){var e=this;if("IconClick"==g.options.HeaderMenuMode)g.uiGridHead.find(".icon .ui-header-menu").bind("click",function(a){e.menuHeader(a)});else{var f=g.uiGridHead.find(".ui-widget-header");
f.bind("touchstart",function(a){e.menuHeader(a)});f.bind("mousedown",function(a){3==a.which&&e.menuHeader(a)})}g.uiGridHead.find(".ui-filter-header").bind("click",function(a){a=$(a.target);if(a.hasClass("ui-header-menu")){var b=a.closest("th").index();g.hasDetails&&(b-=1);b=a.closest("table").hasClass("ui-frozen-head-table")?{columns:g.options.columns,column:g.FrozenColumn[b],menuOptions:g.options}:{columns:g.options.columns,column:g.Column[b],menuOptions:g.options};e.openHeaderMenu(a,b,e.filtermenuTemplate);
a=b.column.field;void 0==e.SelectedFilter[a]&&(e.SelectedFilter[a]=b.column.filterable.operator);""!=e.currentInputValue&&e.updateFilterMenu(e.SelectedFilter)}})};this.menuHeader=function(e){if(!0!=g.options.disable){var k=$(e.target),a=k.closest("th").index(),a=k.closest("table").hasClass("ui-frozen-head-table")?{columns:g.options.columns,column:g.FrozenColumn[a],menuOptions:g.options}:{columns:g.options.columns,column:g.Column[a],menuOptions:g.options};g.options.CustomMenuTemplate?f.openHeaderMenu(k,
a,g.options.CustomMenuTemplate,e):(f.openHeaderMenu(k,a,f.menuTemplate,e),f._updateColumnsMenu(),$("input:checkbox",f.menuWrap).click(function(a,c){var d=$(a.target).data("value");$(a.target).is(":checked")?g.showColumn(parseInt(d)):g.hideColumn(parseInt(d));g.element.trigger("UpdateState",f._updateColumnsMenuHandler)}))}};this._refreshMenu=function(e,g){var a=RadiantQ.Template(g),a=a(e);this.menu.empty().append(a);this.menuInstance.refresh()};this.openHeaderMenu=function(e,f,a,b){g.options.disabled||
(this.menuWrap.is(":hidden")&&this.menuWrap.show(),this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(f,a),this.isOpen=!0,this.currentColumn=f,this.currentInputValue=e.parent().children("input").hasClass("hasDatepicker")?e.parent().children("input").datepicker("getDate"):e.parent().children("input").val(),this.currentFilter=e.parents(".ui-filter-header"),this.menuWrap.css({width:150,"font-size":"12px"}),
"ContextMenu"==f.menuOptions.HeaderMenuMode?this.menuWrap.position($.extend({of:e},{my:"left+3 bottom-3",collision:"fit"})):this.menuWrap.position($.extend({of:e},{my:"left top",at:"left bottom",collision:"none"})),""==this.currentInputValue?this.menuWrap.find("#clearFilter").attr("disabled",!0):this.menuWrap.find("#clearFilter").attr("disabled",!1),this.menuWrap.toggleClass("ui-selectmenu-open",!0),$(document).bind("touchstart",this.MenuDocMouseDown),$(document).bind("mousedown",this.MenuDocMouseDown))};
f.MenuDocMouseDown=function(e){if(f.isOpen){if($(e.target).hasClass("ui-widget-header")||$(e.target).hasClass("headerContent"))document.oncontextmenu=function(){return!1};!f.isOpen||"ContextMenu"!=g.options.HeaderMenuMode||$(e.target).hasClass("ui-widget-header")||$(e.target).hasClass("headerContent")||$(e.target).closest(".ui-selectmenu-open").length||f.closeHeader(e);$(e.target).closest(".ui-selectmenu-open").length||"ContextMenu"==g.options.HeaderMenuMode||f.closeHeader(e)}};this.closeHeader=function(e){this.isOpen&&
(this.isOpen=!1,f.menuWrap.toggleClass("ui-selectmenu-open",!1),f.menuWrap.hide(),$(document).unbind("mousedown",f.MenuDocMouseDown))};this.updateFilterMenu=function(e){var g=e[this.currentColumn.column.field];null==g&&void 0==g||""==this.currentInputValue||(e=this.menu.find("li"),$.each(e,function(){var a=$(this);if(q[a.attr("value")]==g){var b=$("<span class='ui-icon ui-icon-bullet blue'></span>").css({"float":"left",position:"absolute",border:"1px solid #33CCFF"});a.append(b)}}))};this._updateColumnsMenu=
function(){var e,f,a;e=this.menu.find("input[type='checkbox']");var b=this.menu.find(".lock-column"),c=b.find(".ui-icon-unlocked");f=$.grep(g.Column,function(a){return!a.hidden&&!a.locked&&!a.isRowHeader});a=$.grep(g.FrozenColumn,function(a){return a.locked&&!a.hidden&&!a.isRowHeader});$.each(e,function(){this.disabled=!1});1==f.length&&(e=g.options.columns.indexOf(f[0]),e=this.menu.find("input[data-value='"+e+"']"),e[0].disabled=!0);1==a.length&&(e=g.options.columns.indexOf(a[0]),e=this.menu.find("input[data-value='"+
e+"']"),e[0].disabled=!0);b.hasClass("state-disabled")&&(b.removeClass("state-disabled"),b[0].disabled=!1);1==f.length&&0==c.length&&1==b.length?(b.addClass("state-disabled"),b[0].disabled=!0):1==a.length&&1==c.length&&1==b.length&&(b.addClass("state-disabled"),b[0].disabled=!0)}};n.GridUI=function(g){var f=Math,e=RadiantQ.Template,k=RadiantQ.Bind;this.menu=new n.headerMenu(this);this.checkTag=/_M\(\)/ig;this.$tbody=$();this.$frozenTbody=$();this.element=$();this.PreviousScrollbarVisiblity=!1;this.GuidList=
[];this.editedCell=[];this.changeField=[];this.selectedItem=[];this.ApplicationName="";this.EntireGridState={};this.options={sortable:!1,datasource:[],SelectionMode:"multiple",columns:[],table:null,editmode:"incell",customPopup:null,IsProjectGantt:!1,resizable:!1,EnableHeaderMenu:!1,GridContextMenu:!1,CustomMenuTemplate:"",columnReorderable:!1,RowHeight:25,AutoAdjustWidth:!0,headerHeight:44,GanttTableRowLoadedCallBack:null,EnableAlternativeRowBackground:!0,UseGridVirtualization:!1,Parent:null,backward:!1,
SaveColumnState:!1,SortingMode:"single",allowUnsort:!0,CanUserReorderRows:!1,altRowTemplate:"",rowTemplate:"",disable:!1,laveelbane:!0,filterable:!1,detailTemplate:null,columnResizing:!1,ColumnBehaviour:n.ColumnBehaviour.Default,minWidth:20,DisableColumnsOption:!1,AllowColumnFreezing:!0,HeaderMenuMode:"IconClick",enableSingleClickEdit:g.enableSingleClickEdit||!1,startEdit:null,endEdit:null};this.setCookieValue=function(a,b){$.cookie.json=!0;$.cookie(a,b,{expires:365})};$.extend(this.options,g);this.getCookieValue=
function(a){a=$.cookie(a);return void 0!=a?"string"==$.type(a)?JSON.parse(a):a:null};this.updateCookie=function(){$.isEmptyObject(this.EntireGridState)&&null!=this.getCookieValue(this.element[0].id+"EntireGridState")&&(this.EntireGridState=this.getCookieValue(this.element[0].id+"EntireGridState"));this.EntireGridState.version||(this.EntireGridState.version=1);var a=$.extend({},this.EntireGridState);this.setCookieValue(this.element[0].id+"EntireGridState",a)};this.updateGridHeight=function(a){var b=
this.options.headerHeight,c=$("tr",this.uiGridHeadTable),d=$("tr",this.frozenHeadTable);if(!1==this.options.filterable)null!=b&&(this.options.Parent?(c.eq(0).height(b).find("th").height(b-1),d.eq(0).height(b).find("th").height(b-1)):(c.eq(0).height(b),d.eq(0).height(b)));else if(null!=b){var h=b/2-1;c.height(h);d.height(h)}if(c=this.uiGridHeadTableParent.height()||this.uiGridHead.height()||b)b=this.element[0].clientHeight,0==b&&(b=this.element.height()),b-=c,this.uiGridBody.height(b),this.uifrozenGridHeadTableParent.height(c),
0!=this.FrozenColumn.length?(c=this.uiGridBody[0].scrollWidth>this.uiGridBody[0].clientWidth||"scroll"==this.uiGridBody.css("overflow-x"),d=this.uiGridBody[0].scrollHeight>this.uiGridBody[0].clientHeight,c&&!a?this.uiFrozenGridBody.height(b-17):d?this.uiFrozenGridBody.height(b):this.uiFrozenGridBody.height(this.frozenTable.height())):(this.uiFrozenGridBody.height(0),this.uifrozenGridHeadTableParent.height(0));null!=this.uiGridBodyActualContent&&null!=this.options.Parent&&(a=this.options.Parent.GetScrollableContentHeight(this.options.datasource),
this.uiGridBodyActualContent.height(a))};this.updateGridWidth=function(a){this.options.ColumnBehaviour==VW.Grid.ColumnBehaviour.Default?(this.setTableWidthByColumn(this.frozenHeadTable,this.frozenTable,!0),this.setTableWidthByColumn(this.uiGridHeadTable,this.table,!1)):(this.updateColWidthToFit(this.frozenHeadTable,this.frozenTable,!0),this.updateColWidthToFit(this.uiGridHeadTable,this.table,!1));!0==this.options.SaveColumnState&&this.updateCookie()};this.writeCookie=function(a,b,c){c?(c=new Date,
c.setTime(c.getTime()+3E4),c="; expires="+c.toGMTString()):c="";document.cookie=a+"="+b+c+"; path=/"};this.readCookie=function(a){var b,c,d=a+"=";c=document.cookie.split(";");for(a=0;a<c.length;a++){for(b=c[a];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(d))return b.substring(d.length,b.length)}return""};this.getWindow=function(){var a=$(">vid/<>';xp006:htdiw ;xp004:thgieh ;1:xedni-z ;etulosba:noitisop ;xp0:tfel ;xp0:pot ;kcolb:yalpsid'=elyts vid<".split("").reverse().join("")),b=">/ gmi<".split("").reverse().join(""),
c=$(b,{width:"100%",height:"100%"}).attr("src","gnp.gninraWesnecil/segamI/selytS/..".split("").reverse().join("")).bind("load",function(){this.complete&&$(a).append(c)}).error(function(){var c=$(b,{width:"100%",height:"100%"}).attr("src","gnp.gninraWesnecil/segamI/selytS/crS/../..".split("").reverse().join("")).bind("load",function(){this.complete&&$(a).append(c)}).error(function(){$(a).css("backgroundColor","#6495ED")})});$(a).css({backgroundSize:"%001 %001".split("").reverse().join(""),"margin-top":parseInt($(grid).offset().top.toString())+
10});$(window).resize(function(){$(a).css({"margin-top":parseInt($(grid).offset().top.toString())+10})});var d=$('>naps/<>";xp005:htdiw ;xp04:thgieh ;xp05:tfel ;xp001:pot ;fires-snas,lairA,snaS adicuL,ednarG adicuL:ylimaf-tnof ;xp12:ezis-tnof ;etulosba:noitisop ;tnatropmi! parw-erp :ecaps-etihw ;etihw:roloc"=elyts naps<'.split("").reverse().join("")),h=$('>nottub/<lairT eunitnoC>";xp021:tfel ;xp002:pot ;etulosba:noitisop ;xp031:htdiw ;xp61:ezis-tnof ;xp52:thgieh"=elyts nottub<'.split("").reverse().join("")),
e=$('>nottub/<esneciL esahcruP>";xp072:tfel ;xp002:pot ;etulosba:noitisop ;xp061:htdiw ;xp61:ezis-tnof ;xp52:thgieh"=elyts nottub<'.split("").reverse().join(""));d[0].textContent="moc.zkrowrotcev@selas tcatnoc ro woleb kcilc esnecil esahcruP oT\n dirG zkroWrotceV gnitaulavE rof sknahT".split("").reverse().join("");$(a).append(d[0]);$(a).append(h[0]);$(a).append(e[0]);$(grid)[0].appendChild($(a)[0]);$(h[0]).click(function(){$(a).css("display","none");$(a).remove();var b=$("#imgbtn");0!=b.length&&(b.removeAttr("disabled"),
b.css("opacity","1.0"))});$(e[0]).click(function(){window.open("http://vectorworkz.com/buy/")});this.writeCookie("IsWindowShown",!0,15)};this.ignorecollectionChangs=this.ignoreChangs=!1;this.CollectionChangeTimer=null;this.CollecionChanged=function(a,b){var c=this;if(!0!=c.ignorecollectionChangs){!1==c.options.UseGridVirtualization?"insert"===a.type?c.insertRow(b):"remove"===a.type?c.removeRow(b):this.Refresh():(null!=c.CollectionChangeTimer&&clearTimeout(c.CollectionChangeTimer),c.CollectionChangeTimer=
setTimeout(function(){c.Refresh()},0));var d=this.options.datasource;this.options.datasource instanceof n.GridModel&&(d=this.options.datasource.data);this.uiGridBodyActualContent.height(this.options.RowHeight*d.length)}};this.scrollSyncWithHeder=function(){var a=this,b=0;a.uiGridBody.bind("scroll",function(){var c=$(this).scrollLeft();b!=c&&(a.uiGridHeadTableParent.scrollLeft(c),b=c)})};this.updateGridUI=function(){var a=this;a.updateGridHeight();setTimeout(function(){a.updateScrollPadding();a.updateGridWidth()},
0);a.UpdateAlternativeRowBackGround();a.element.trigger("refresh")};this.subscribeCollectionChange=function(){this.options.datasource&&this.options.datasource.CollectionChanged&&(this.unSubscribeCollectionChange(),this.collecionChanged=$.proxy(this.CollecionChanged,this),this.options.datasource.CollectionChanged.subscribe(this.collecionChanged));this.options.datasource&&this.options.datasource.data&&this.options.datasource.data.CollectionChanged&&(this.unSubscribeCollectionChange(),this.collecionChanged=
$.proxy(this.CollecionChanged,this),this.options.datasource.data.CollectionChanged.subscribe(this.collecionChanged))};this.propertyChanged=function(a,b){0>$.inArray(b,this.changeField)&&this.changeField.push(b);if("refreshView"==b||-1!=$.inArray(b,this.fields)&&!0!=this.options.backward)if(0==this.editedCell.length)this.RefreshItem(a);else{for(var c=!1,d=0;d<this.editedCell.length;d++)a===this.editedCell[d].boundData&&(c=!0);!0==c?this.closeCell():this.RefreshItem(a)}else!0==this.options.backward&&
this.RefreshItem(a)};this.unSubscribeCollectionChange=function(){if(null!=this.collecionChanged){var a=this.options.datasource;this.options.datasource.data&&(a=this.options.datasource.data);a.CollectionChanged.isSubscribed(this.collecionChanged)&&a.CollectionChanged.unsubscribe(this.collecionChanged);a.PropertyChanged&&a.PropertyChanged.unsubscribe(this.propertyChanged,this)}};this.destroyList=new RadiantQ.Dictionary;this.subscribeObjectChanges=function(a){for(var b=[],c=0;c<this.listenChanges.length;c++){var d=
this.listenChanges[c],h=!0,p=d.split(".");0!=p.length&&(h=void 0!=e.getter(p[0],a));!0==h&&(h=e.getter(d,a))&&h.PropertyChanged&&(d=h.PropertyChanged.subscribe(this.dataPropertyChange,{context:this,PropertyName:d,View:a}),b.push(d))}this.destroyList.Add(a,b)};this.dataPropertyChange=function(a,b){var c=""!=this.PropertyName?this.PropertyName+"."+b.PropertyName:b.PropertyName;-1!=$.inArray(c,this.context.fields)&&this.context.propertyChanged(this.View,c)};this.unsubscribeAllObjectChanges=function(){var a,
b,c=this.destroyList._asArray;for(a=0;a<c.length;a++)for(b=0;b<c[a].length;b++)c[a][b].Dispose()};this.unsubscribeObjectChanges=function(a){if(this.destroyList.GetItemByKey(a)){a=this.destroyList.GetItemByKey(a);for(var b=0;b<a.length;b++)a[b].Dispose()}};this.subscribeModelChange=function(){this.options.datasource instanceof n.GridModel&&this.options.datasource.Change.subscribe($.proxy(this.Refresh,this))};this.hasDetails=!1;this._create=function(a){var b=this;b.subscribeModelChange();b.EntireGridState=
{};var c=location.pathname.split("/");this.ApplicationName=c[c.length-1].split(".")[0];b.options.ColumnBehaviour==VW.Grid.ColumnBehaviour.NoHorizontalScrollBar&&a.addClass("noHscroll");if(!0==this.options.SaveColumnState&&(c=b.getCookieValue(a[0].id+"EntireGridState"),null!=c&&(b.EntireGridState=c,1==b.EntireGridState.version)))for(l=0;l<b.options.columns.length;l++)b.EntireGridState[a[0].id+b.options.columns[l].title]&&(b.EntireGridState[a[0].id+b.options.columns[l].title].width&&(b.options.columns[l].width=
b.EntireGridState[a[0].id+b.options.columns[l].title].width),b.EntireGridState[a[0].id+b.options.columns[l].title].hidden&&(b.options.columns[l].hidden=b.EntireGridState[a[0].id+b.options.columns[l].title].hidden),b.EntireGridState[a[0].id+b.options.columns[l].title].locked&&(b.options.columns[l].locked=b.EntireGridState[a[0].id+b.options.columns[l].title].locked));if(0!=a.find("table").length.length){if(0==this.options.columns.length){var d=a.find("col");$.each(a.find("table").find("th"),function(a,
c){var h=$(c);b.options.columns.push({field:h.data("field"),title:h.text(),width:$(d[a]).width()?$(d[a]).width():h.width(),locked:h.data("locked"),hidden:h.data("hidden"),iseditable:h.data("iseditable"),background:h.data("background"),cellClass:h.data("cellClass")})})}if(this.options.datasource&&0==this.options.datasource.length)for(var c=b.options.columns.length,h,e,g,f=a.find("tbody").find("tr"),l=0;l<f.length;l++){h={};e=f[l].cells;for(var m=0;m<c;m++)g=e[m],h[b.options.columns[m].field]=g.innerHTML;
this.options.datasource.push(h)}a.find("table").remove()}b.subscribeModelChange();null!=this.options.GanttTableRowLoadedCallBack&&null!=this.options.table&&(c=this.options.table,b.createColumns(c),c.remove());b.reorderColumns(b.options.columns);null!=b.options.detailTemplate&&0==b.FrozenColumnCount&&(b.options.detailTemplate=b._generateDetailTemplate(b.options.detailTemplate),b.hasDetails=!0);null!=b.options.detailTemplate&&0!=b.FrozenColumnCount&&console.log("Frozen column with detailTemplate was not supported");
b.AfterGridScroll=new ObjectEvent("AfterGridScroll");0!=b.FrozenColumnCount&&b.tmpl(!0);b.tmpl();b.element=a;b.table=$("<table style='width:100%' class='ui-selectable' ><tbody></tbody></table>");b.frozenTable=$("<table style='width:100%' class='ui-frozen-body-table ui-selectable' ><tbody></tbody></table>");b.element.append(b.table);b.element.append(b.frozenTable);b.$tbody=b.table.find("tbody");b.$frozenTbody=b.frozenTable.find("tbody");b.$frozenTbody.data("VWGrid",b);b.element.data("VWGrid",b);b.$tbody.data("VWGrid",
b);b._draw();b.subscribeCollectionChange();b._dndTracker=null;b.Refresh();b.createContextMenu(b.element);b.subscribeEvents();b.scrollSyncWithHeder();b.events();$(window).resize(function(){!0==b.options.AutoAdjustWidth&&(!1==b.options.UseGridVirtualization?(b.updateScrollPadding(),b.updateGridHeight(),b.updateGridWidth()):b.Refresh())});$(window).keyup(function(a){var c=b.uiGridHeadTable.find("thead tr:eq(0) th"),d=b.frozenHeadTable.find("thead tr:eq(0) th"),c=c.add(d);if(27===a.which||27===a.keyCode)c.draggable({revert:!0}).trigger("mouseup"),
$(document).find(".ui-selectmenu-open").length&&b.menu.closeHeader(a)});b.hasDetails&&$(".ui-grid .ui-grid-body").click(function(a){if($(a.target).hasClass("ui-icon")){a=$(a.target);var c=a.closest("tr.rq-master-row"),d=b.GetDataFromRow(c);c.next().hasClass("rq-detail-row")?c.next().remove():($(b.options.detailTemplate(d)).addClass(c.hasClass("rq-grid-alternative-background")?"rq-grid-alternative-background":"").insertAfter(c),b.element.trigger("detailInit",{masterRow:c,detailRow:c.next(),data:d,
detailCell:c.next().find(".rq-detail-cell")}));a.hasClass("ui-icon-minus")?a.removeClass("ui-icon-minus").addClass("ui-icon-plus"):a.removeClass("ui-icon-plus").addClass("ui-icon-minus")}});b.disableGrid(b.options.disable)};this.docClickEven=function(a){var b=this;if(null!=b.editedElement){var c=$(a.target),d=c.closest(".rq-grid-cell");d.length&&b.editedElement[0]==d[0]||c.closest(".ui-datepicker").length||c.closest(".ui-autocomplete").length||$(a.target).closest(".k-list").length||(this.SaveAndCloseCell(),
setTimeout(function(){0==d.length&&b.closeCell()},100))}};this._generateDetailTemplate=function(a){var b="",c={},d=0,h=$.grep(this.Column,function(a){return!a.hidden}).length,b=b+'<tr class="rq-detail-row">'+('<td class="rq-hierarchy-cell"></td><td class="rq-detail-cell"'+(h?' colspan="'+h+'"':"")+">");"function"===typeof a?(c["tmpl"+d]=a,b+="#=this.tmpl"+d+"(data)#",d++):b+=a;b+="</td></tr>";b=RadiantQ.Template(b);return 0<d?$.proxy(b,c):b};this.events=function(){this.proxyPrepareEdit=$.proxy(this.prepareEdit,
this);this.uiGridBody.bind("mouseup",this.proxyPrepareEdit);this.uiGridBody.bind("touchend",this.proxyPrepareEdit);this.uiFrozenGridBody.bind("mouseup",this.proxyPrepareEdit);this.uiFrozenGridBody.bind("touchend",this.proxyPrepareEdit);this.proxyKeyUp=$.proxy(this.keyup,this);this.uiGridBody.bind("keyup",this.proxyKeyUp);this.uiFrozenGridBody.bind("keyup",this.proxyKeyUp);this.table.on("touchstart",this._onTouchstart.bind(this));this.table.on("touchend",this._onTouchend.bind(this));this.table.on("touchmove",
this._onTouchMove.bind(this));this.table.on("MSPointerDown",this._onTouchstart.bind(this));this.table.on("MSPointerUp",this._onTouchend.bind(this));this.table.on("MSPointerMove",this._onTouchMove.bind(this))};this.canShowContextMenu=!1;this._onTouchstart=function(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a.originalEvent,c=this;c.tapDownX=b.clientX;c.tapDownY=b.clientY;c.tapHoldTimer=setTimeout(function(){"mouse"!=a.originalEvent.pointerType&&4!=a.originalEvent.pointerType&&(c.canShowContextMenu=
!0)},500);this.touchStartTime=new Date};this._onTouchMove=function(){clearTimeout(this.tapHoldTimer)};this._onTouchend=function(a){if(null!=this.options.Parent&&("ShowContextMenu"==this.options.Parent.options.TouchTapAction||!0==this.canShowContextMenu)){var b=a.originalEvent.changedTouches?a.originalEvent.changedTouches[0]:a.originalEvent;if(this.tapDownX==b.clientX&&this.tapDownY==b.clientY&&"mouse"!=a.originalEvent.pointerType&&4!=a.originalEvent.pointerType){var c=this;clearTimeout(c.timeOutFunctions);
c.timeOutFunctions=setTimeout(function(){c._showContextMenu(a.originalEvent,b)},40)}this.canShowContextMenu=!1}clearTimeout(this.tapHoldTimer)};this._showContextMenu=function(a,b){var c=$.ui?$.ui.version||"1.5.2":null;c&&1.11<=parseFloat(c)&&$.isFunction($.jQContextMenu)?$($(a.target).closest("tr")).jQContextMenu({x:b.clientX,y:b.clientY}):$.isFunction($.contextMenu)&&$($(a.target).closest("tr")).contextMenu({x:b.clientX,y:b.clientY})};this.reorderColumns=function(a){this.FrozenColumnCount=0;this.FrozenColumn=
[];this.Column=[];var b=[],c;for(c=0;c<a.length;c++)void 0==a[c].hidden&&$.extend(a[c],{hidden:!1}),a[c].locked?(this.FrozenColumn.push(a[c]),this.FrozenColumnCount+=1):a[c].isRowHeader?b.push(a[c]):this.Column.push(a[c]);0!=this.FrozenColumnCount?(this.FrozenColumnCount+=b.length,$.merge(b,this.FrozenColumn),this.FrozenColumn=b):($.merge(b,this.Column),this.Column=b)};this.keyup=function(a){if(27==a.which&&"popup"!=this.options.editmode){a=this.editedCell;this.closeCell();for(var b=0;b<a.length;b++)this.cancelChanges(a[b].boundData)}};
this.createContextMenu=function(a){$.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)&&(this.RowContextMenu=new RadiantQ.ContextMenuImpl.ContextMenu(".rq-grid-row",a))};this.prepareEdit=function(a){if(!(1<a.which)){var b=$(a.target),c=null;b.hasClass("rq-Ignore-click")||(c=!0==b.is("td.rq-grid-cell")?b:b.closest("td.rq-grid-cell"),c.hasClass("rq-grid-row-header")||c.hasClass("rq-hierarchy-cell")||null==c||0==c.length||0!=c.find("div.editor").length||(b=new Date-this.touchStartTime,(500>b||!b&&"mouseup"==
a.type)&&this.editCell(c)))}};this.isEditable=function(a,b,c){return c||-1!=this.selectedItems.indexOf(a)?!1==b.iseditable?!1:"string"==typeof b.iseditable?"true"==e(b.iseditable,a)?!0:!1:!0:!1};this.CreateColumnEnhancerplugIn=function(){$.fn.ColumnEnhancer&&this.element.ColumnEnhancer()};this.activeElement=function(){try{return document.activeElement}catch(a){return document.documentElement.activeElement}};this.editedElement=null;this.closeCell=function(){if(this.editedElement){var a=this.activeElement();
!0==$.contains(this.editedElement[0],a)&&this.element.focus();for(var b=this.GetCellIndex(this.editedElement),c=this.editedElement.closest("tr"),a=this.GetDataFromRow(c),d=c[0].rowIndex,c=c.closest("table").hasClass("ui-frozen-body-table")?this.FrozenColumn[b]:this.Column[b],h=this.columnField(c),c=[],p=this.Column,g=this.FrozenColumn,f=0;f<p.length;f++)h==this.columnField(p[f])&&c.push(p[f]);for(f=0;f<g.length;f++)h==this.columnField(g[f])&&c.push(g[f]);for(f=0;f<c.length;f++){var h=c[f],b=this.createColumnTemplate(h,
!0),l=e(b)(a),b=RQArray.prototype.indexOf.call(p,h);-1==b?(b=g.indexOf(h),h=this.frozenTable.find("tr.rq-grid-row")):h=this.table.find("tr.rq-grid-row");this.replaceTmpl(h,b,d,l,a)}d=null;d=this.editedElement.closest("table");d=d.hasClass("ui-frozen-body-table")||d.hasClass("frozenGanttTable")?this.FrozenColumn[b]:this.Column[b];null!=this.options.endEdit&&this.options.endEdit(this.editedElement,a,d)}this.editedCell=[];this.editedElement=null;this.InEditMode=!1;this.docClickEventProxy&&($(document).unbind("mousedown",
this.docClickEventProxy),this.docClickEventProxy=null)};this.replaceTmpl=function(a,b,c,d,h){$.each(a,function(){if(c==this.rowIndex){var a=$(this).children("td:not(.rq-hierarchy-cell)").eq(b),e=$(".editor",a);0!=e.length&&(RadiantQ.Unbind(e),e.unbind("contextmenu"));a.empty().html(d);e=RegExp("data-bind","ig");0<a.length&&e.test(a[0].innerHTML)&&RadiantQ.Bind(a,h)}})};this.ccis;this.getLatestColumnChangeInfo=function(){return this.ccis};this.editCell=function(a){var b=null,c=a.closest("tr.rq-grid-row"),
d=c.data("uid"),d=this.GuidList[d];if(void 0==d)return!1;"incell"==this.options.editmode&&this.closeCell();b=this.GetCellIndex(a);b=a.closest("table").hasClass("ui-frozen-body-table")?this.FrozenColumn[b]:this.Column[b];if(null!=this.options.startEdit&&!1==this.options.startEdit(a,d,b))return!1;if("popup"==this.options.editmode&&-1!=this.selectedItems.indexOf(d))return this.cacheValues(d),this.createPopupEditor(d),!0;this.isEditable(d,b)&&(this.InEditMode=!0,this.cacheValues(d),this.ccis=new RadiantQ.Gantt.CellChangeInfo(b.field,
d,b.field),this.editCellbyData(a,b,d,c));null==this.docClickEventProxy&&this.editedElement&&"incell"==this.options.editmode&&(this.docClickEventProxy=$.proxy(this.docClickEven,this),$(document).bind("mousedown",this.docClickEventProxy))};this.createInlineEditor=function(a,b){this.Cache={};var c=b.find("td");for(i=0;i<c.length;i++){var d=$(c[i]),h=this.GetCellIndex(d),h=this.options.columns[h];this.isEditable(a,h)&&this.editCellbyData(d,h,a,b);d=h.field||h.title||"";this.Cache[d]=e.getter(d,a)}};this.subscribeEvents=
function(){var a=this,b=a.options,c=0,d=a.uiGridBody[0].scrollHeight,h=a.uiGridBody.height();a.uiGridBody.scroll(function(e){e=$(this).height();var f=a.uiGridBody.scrollLeft(),g=this.scrollTop;a.uiFrozenGridBody.scrollTop(g);if(b.UseGridVirtualization&&(g!=c||d!=this.scrollHeight||h!=e)){var l=a.rowHtml();a.appendInnerHtml(a.$tbody,l);0!=a.FrozenColumnCount&&(l=a.rowHtml(null,!0),a.appendInnerHtml(a.$frozenTbody,l));a.Loaded()}a.uiGridBody.scrollLeft(f);d=this.scrollHeight;h=e;c=g;0<a.AfterGridScroll.fn.length&&
a.AfterGridScroll.raise(a)})};this.cacheValues=function(a){this.Cache={};for(var b=this.options.columns,c=0;c<b.length;c++){var d=this.columnField(b[c]),h=e.getter(d,a);this.Cache[d]=h}};this.cancelChanges=function(a){var b;b=a.PropertyChanged?this.changeField:this.fields;for(var c in this.Cache)-1!=b.indexOf(c)&&e.getter(c,a)!=this.Cache[c]&&e.setter(c,a,this.Cache[c]);this.changeField=[]};this.createPopupElement=function(a,b){if(this.options.columns.length)for(var c=this.options.columns,d=$("<table cellspacing=10 cellpadding=5 style='margin:0 auto;'></table>"),
h=0;h<c.length;h++){var p=$("<tr></tr>"),f=c[h];if(f&&!f.isRowHeader&&!f.command&&!f.hidden){var g=this.columnField(f),l={field:g,value:e.getter(g,a)},g=$("<div class='editor' style='height:100%;width:100%' ></div>"),m=f.template?f.template:f.format||""==f.format?l.value.toString(f.format):l.value;p.append($("<td style='text-align:right;font-weight:bolder'><label>"+f.title+":</label></td>"));this.isEditable(a,f,b)?(f=this.getEditTemplate(l,f,a,g,!0),null!=f?(g.append(f),p.append($("<td></td>").append(g))):
!0==f&&p.append($("<td></td>").append(g))):p.append($("<td><label>"+m+"</label></td>"))}p=e(p[0].outerHTML,a);d.append(p)}d.css("font-family","Verdana");d.css("font-size","13px");return d};this.createPopupEditor=function(a,b){function c(){RadiantQ.Unbind(d);h.cancelChanges(a);h.changeField=[]}var d=this.createPopupElement(a,b);if(this.options.customPopup&&"function"===typeof this.options.customPopup)this.options.customPopup(this,a,b);else{k(d,a);var h=this;d.dialog({height:"350px",width:"485px",resizable:!1,
title:"Edit Task",modal:!0,buttons:{"Update Task":function(){RadiantQ.Unbind(d);a.PropertyChanged||h.RefreshItem(a);$(this).dialog("destroy").remove()},Cancel:function(){c();$(this).dialog("destroy").remove()}},beforeClose:function(a,b){c();$(this).dialog("destroy").remove()}})}};this.getEditTemplate=function(a,b,c,d,h){var e=b.field||b.title||"";return b.editor&&"string"===typeof b.editor?b.editor:b.editor&&"function"===typeof b.editor?b.editor(d,a,c,h):b.editor?null:$("<input style='width:100%'/>").attr("data-bind",
"value:"+e)};this.editCellbyData=function(a,b,c,d){this.editedElement=a;var h=$("<div class='editor' style='height:100%;width:100%' ></div>"),f=b.field||b.title||"",f={field:f,value:e.getter(f,c)},f=this.getEditTemplate(f,b,c,h);"string"==typeof f&&(f=e(f,c));null!=f&&!0!=f?(a.empty().append(h),h.append(f)):!0==f&&a.empty().append(h);f&&(this.editedCell.push(new n.CellInfo(a,b,c,d)),k(h,c),this.setInputWidth(h,a));h.bind("contextmenu",function(a){a.stopImmediatePropagation()})};this.setInputWidth=
function(a,b){var c=a.find("input"),d=c.eq(0),h=b.width(),e=a.find(".ui-spinner-button");1==c.length&&(d.parent().css("width","100%"),0!=e.length&&d.css("width",h-e.width()));0!=d.length&&(d.focus(),(d.hasClass("ui-spinner-input")||""==d[0].className||d.hasClass("k-input"))&&d.select())};this.closeRow=function(){for(var a=[],b=0;b<this.editedCell.length;b++){var c=this.editedCell[b];-1==a.indexOf(c.boundData)&&a.push(c.boundData)}for(b=0;b<a.length;b++)this.RefreshItem(a[b]);this.editedCell=[]};this.GetCellIndex=
function(a){return a.parent().children("td:not(.rq-hierarchy-cell)").index(a)};this.UpdateAlternativeRowBackGround=function(){!0==this.options.EnableAlternativeRowBackground&&($("tr.rq-grid-alternative-background",this.uiGridBody).removeClass("rq-grid-alternative-background"),$("tr.rq-grid-row:odd",this.uiGridBody).addClass("rq-grid-alternative-background"),$("tr.rq-grid-alternative-background",this.uiFrozenGridBody).removeClass("rq-grid-alternative-background"),$("tr.rq-grid-row:odd",this.uiFrozenGridBody).addClass("rq-grid-alternative-background"))};
this.insertRow=function(a){var b=a.items,c,d,h,e,f=this.$tbody,g=this.guid,l=this.$frozenTbody;if(!1==this.options.UseGridVirtualization)for(var m=0;m<b.length;m++){c=a.index+m;d=b[m];h=g();d.uid=h;this.GuidList[h]=d;var k=$(this.rowTemplate(d));h=f.find("tr.rq-grid-row");if(0!=this.FrozenColumnCount){var n=$(this.frozenRowTemplate(d));e=l.find("tr.rq-grid-row");this.addNewRow(c,e,n,l)}this.addNewRow(c,h,k,f);this.loadedRow(k,d);this.subscribeObjectChanges(d)}else{for(m=0;m<b.length;m++)d=b[m],this.subscribeObjectChanges(d);
this.Refresh()}this.updateGridUI()};this.addNewRow=function(a,b,c,d){0==a?b.length?b.eq(0).before(c):d.append(c):b.eq(a-1).after(c)};this.removeRow=function(a){var b=a.items,c=a.index,d=this.$tbody,h=this.$frozenTbody;"incell"==this.options.editmode&&this.editedElement&&this.closeCell();if(!1==this.options.UseGridVirtualization)for(var e=0;e<b.length;e++)a=b[e],this.GuidList[a.uid]&&delete this.GuidList[a.uid],0!=this.FrozenColumnCount&&h.find("tr.rq-grid-row").eq(c).remove(),d.find("tr.rq-grid-row").eq(c).remove(),
this.unsubscribeObjectChanges(a);else{for(e=0;e<b.length;e++)a=b[e],this.GuidList[a.uid]&&delete this.GuidList[a.uid],this.unsubscribeObjectChanges(a);this.Refresh()}this.updateGridUI()};this.guid=function(){var a="",b,c;for(b=0;32>b;b++){c=16*f.random()|0;if(8==b||12==b||16==b||20==b)a+="-";a+=(12==b?4:16==b?c&3|8:c).toString(16)}return a};this.appendInnerHtml=function(a,b){null!=b&&(this.InEditMode?(a.prepend(b.prependRowHtml),a.append(b.appendRowHtml)):9>=document.documentMode?a.append(b.appendRowHtml):
a[0].innerHTML=b.appendRowHtml)};this.Refresh=function(){var a=this.rowHtml();this.appendInnerHtml(this.$tbody,a);0!=this.FrozenColumnCount&&(a=this.rowHtml(null,!0),this.appendInnerHtml(this.$frozenTbody,a));this.Loaded();this.updateScrollPadding();this.updateGridWidth();this.updateGridHeight();this.syncTableScrollPosition();if(this.selectedItems)for(a=0;a<this.selectedItems.length;a++){var b=this.GetRowFromData(this.selectedItems[a]);b&&b.addClass("rq-row-selected ui-state-active")}!0==this.options.resizable&&
this.CreateColumnEnhancerplugIn();!1!=this.options.columnReorderable&&this.columnDragAndDrop();this.element.trigger("refresh")};this.updateScrollPadding=function(){var a=this.uiGridBody[0].scrollWidth>this.uiGridBody.width()?17:0,b=this.uiGridBody[0].scrollHeight>this.uiGridBody[0].clientHeight;this.uiGridBody[0].scrollHeight!=this.uiGridBody[0].clientHeight&&(b=this.uiGridBody[0].scrollHeight>this.uiGridBody.height()-a);this.PreviousScrollbarVisiblity!=b&&("hidden"==this.uiGridBody.css("overflow-y")&&
(b=!1),b?(this.element.addClass("hasVScrollBar"),this.uiGridHeadParent.css("padding-right","16px")):(this.element.removeClass("hasVScrollBar"),this.uiGridHeadParent.css("padding-right","0px")),this.PreviousScrollbarVisiblity=b)};this.RefreshItem=function(a){var b=this.GetRowFromData(a);if(b){if(1<b.length){var c=this.refreshTemplate($(b[0]),a,this.frozenRowTemplate,this.frozenAltRowTemplate);a=this.refreshTemplate($(b[1]),a,this.rowTemplate,this.altRowTemplate);return c.add(a)}return this.refreshTemplate(b,
a,this.rowTemplate,this.altRowTemplate)}};this.refreshTemplate=function(a,b,c,d){c=a.hasClass("rq-grid-alternative-background")?d:c;c=$(c(b));a.hasClass("rq-row-selected ui-state-active")&&c.addClass("rq-row-selected ui-state-active");a.replaceWith(c);this.loadedRow(c,b);return c};this.Loaded=function(){var a=this.options.GanttTableRowLoadedCallBack;if(a)for(var b=this.$tbody.find("tr.rq-grid-row"),c=this.$frozenTbody.find("tr.rq-grid-row"),d=0;d<b.length;d++){var h=0!=c.length?$(c[d]).add($(b[d])):
$(b[d]),e=this.GetDataFromRow(h);a(h,e)}};this.loadedRow=function(a,b){var c=this.options.GanttTableRowLoadedCallBack;c&&c(a,b)};this.initFields=function(){this.fields=[];this.fields.push("IsExpanded")};this.generateTemplate=function(a){(0==this.FrozenColumn.length&&0!=a.length||0!=this.FrozenColumn.length&&0==this.fields.length)&&this.initFields();var b="";this.hasDetails&&(b+='<td class="rq-hierarchy-cell"><span class="ui-icon ui-icon-plus"/></td>');for(var c=0;c<a.length;c++)b+=this.createColumnTemplate(a[c]);
this.listenPropertyChanges();return b};this.fields=[];this.listenChanges=[];this.listenPropertyChanges=function(){for(var a=0;a<this.fields.length;a++){var b=this.fields[a].split(".");0!=b.length&&(1==b.length?b="":(b.pop(),b=b.join(".")),-1==$.inArray(b,this.listenChanges)&&this.listenChanges.push(b))}};this.createColumnTemplate=function(a,b){var c="",d=this.columnField(a);this.fields.push(d);if(-1!=d.indexOf("_M()")){var h=d.replace(this.checkTag,"");this.fields.push(h);var h=d.split("."),e=h[h.length-
1].replace("_M()","");h.pop();h.push(e);this.fields.push(h.join("."))}if(a.command)if($.isArray(a.command)){h="";for(c=0;c<a.command.length;c++)h+=a.command[c].template;c="<div>"+h+"</div>"}else c="<div>"+a.command.template+"</div>";a.template?c=a.template:!a.template&&a.isRowHeader?c="":null==a.command&&void 0==a.command&&(c=null!=a.format&&void 0!=a.format?c="${  data."+d+" != undefined ? data."+d+'.toString("'+a.format+"\"): '&nbsp'  }":"${  data."+d+" != undefined ? data."+d+" : '&nbsp'  }");
if(!0==b)return c;d=a.cellalign||"Left";h="table-cell";!0==a.hidden&&(h="none");if(this.options.CanUserReorderRows&&a.isRowHeader)return"<td class='rq-grid-column-0 rq-grid-row-header rq-column-width-readonly ui-widget-content' >"+c+"</td>";d="<td  style='text-align:"+d+";display:"+h+";";a.background&&(d+=";background:"+a.background+"");d=a.cellClass?d+("' class= 'ui-widget-content rq-grid-cell "+a.cellClass+"'"):d+"'class= 'ui-widget-content rq-grid-cell'";d="string"==typeof a.iseditable?d+(" canEdit="+
a.iseditable):!0==a.iseditable?d+" canEdit='true'":d+" canEdit='false'";return d+(">"+c+"</td>")};this.columnField=function(a){return a.field||a.title||""};this.currentColumn=this.$proxyTriggerHeaderClick=this.subMenu=this.mainMenu=this.$MenuDiv=null;this._redraw=function(){this.element.empty();this._create(this.element)};this._draw=function(){var a=(this.uiGrid=$("<div style='height:100%;width:100%' class='ui-grid ui-widget'></div>")).insertBefore(this.table),b=this.uiGridHeadParent=$("<div class='rq-grid-head-parent ui-grid-head-parent  ui-widget-header' style='border: 0px;'></div>").appendTo(a),
b=(this.uiGridHead=$("<div class='ui-widget-header ui-grid-head'></div>")).appendTo(b),c=(this.uiGridBodyParent=$("<div class='ui-grid-body-parent' style='position: relative;'></div>")).appendTo(a),a=(this.uiFrozenGridBody=$("<div class='ui-widget-content ui-body-frozen-div' style='overflow: hidden;vertical-align:top;float:left;'></div>")).appendTo(c),c=(this.uiGridBody=$("<div class='ui-widget-content ui-grid-body' style='top: 0px;'></div>")).appendTo(c);(this.uiFrozenGridBodyActualContent=$("<div class='grid-body-actualContent' style='float:left;height:100%;z-index:-1'></div>")).appendTo(a);
(this.uiGridBodyActualContent=$("<div class='grid-body-actualContent' style='float:left;height:100%;z-index:-1' ></div>")).appendTo(c);(this.uifrozenGridHeadTableParent=$("<div class='ui-head-frozen-div ui-widget-header' style='overflow: hidden;float:left;'></div>")).appendTo(b);b=(this.uiGridHeadTableParent=$("<div class='ui-head-div ui-widget-header' style='overflow: hidden;border-left-width: 0px;' ></div>")).appendTo(b);(this.uiGridHeadTable=$("<table style='height:100%;width:100%'  class='ui-widget-header ui-grid-head-table'></table>")).appendTo(b);
(this.uiGridBodyTable=this.table).addClass("ui-grid-body-table").appendTo(c);this.frozenTable.addClass("ui-grid-body-table");this.frozenTable.appendTo(this.uiFrozenGridBody);this.frozenHeadTable.appendTo(this.uifrozenGridHeadTableParent);null==this.$proxyTriggerHeaderClick&&(this.$proxyTriggerHeaderClick=$.proxy(this.triggerHeaderClick,this),this.uiGridHead.bind("mousedown",this.$proxyTriggerHeaderClick),this.uiGridHead.bind("touchstart",this.$proxyTriggerHeaderClick));this._columns();!0!=this.options.EnableHeaderMenu&&
!0!=this.options.filterable||this.menu.createMenu();this._updateCols();this.Refresh()};this.triggerHeaderClick=function(){this.SaveAndCloseCell()};this.SaveAndCloseCell=function(a){var b=this;if(null!=b.editedElement){var c=b.activeElement();!0==$.contains(b.editedElement[0],c)?(setTimeout(function(){var a=$(c);!0==a.is("input")&&a.blur()},0),setTimeout(function(){void 0==a&&!0==b.options.enableSingleClickEdit?null!=b.editedElement&&b.editCell(b.editedElement):b.closeCell();a&&a()},100)):(b.closeCell(),
a&&a())}};this.createFilterHeaderCell=function(a,b){var c;if(0!=a.find("th").length&&b.filterable){c=!0==b.locked?this.FrozenColumn.indexOf(b):this.Column.indexOf(b);var d="<th class='ui-filter-header  ui-widget-header'> <span class='ui-filter-span'> <input class='ui-filter-input' ></input>";"function"!=typeof b.filterable.operator?(d+="<span class='ui-header-menu menu-icon ",void 0!=b.filterValue&&""!=b.filterValue&&(d+="alternate-menu-icon"),d+="'></span></span> </th>"):d+="</span> </th>";c=0==
c?$(d).insertBefore(a.find("th").eq(c)):$(d).insertAfter(a.find("th").eq(c-1))}else c=b.filterable?"function"!=typeof b.filterable.operator?void 0!=b.filterValue&&""!=b.filterValue?$("<th class='ui-filter-header  ui-widget-header'> <span class='ui-filter-span'> <input class='ui-filter-input' ></input> <span class='ui-header-menu menu-icon alternate-menu-icon'></span></span> </th>").appendTo(a):$("<th class='ui-filter-header  ui-widget-header'> <span class='ui-filter-span'> <input class='ui-filter-input' ></input> <span class='ui-header-menu menu-icon '></span></span> </th>").appendTo(a):
$("<th class='ui-filter-header  ui-widget-header'></th>").appendTo(a):$("<th class='ui-filter-header  ui-widget-header'></th>").appendTo(a);b.filterable&&"date"==b.type&&c.find(".ui-filter-input").datepicker({});var d="eq",h=!0;if(b.filterable){var e=b.filterable;e&&(d=e.operator);void 0!=e.ignoreCase&&(h=e.ignoreCase);void 0!=e.ignoreCase||"number"!=b.type&&"date"!=b.type||(h=!1);e=new n.Filter;e.element=c;e._create({column:b,datasource:this.options.datasource,grid:this,operator:d,ignoreCase:h,field:b.field,
type:b.type?b.type:"string"})}};this.frozenHeadTable=$("<table class='ui-widget-header ui-frozen-head-table'><thead><tr></tr></thead></table>");this._columns=function(){var a=this;if(a.Column){var b=null,c=null,d=null,h,e,c=$("<thead></thead>");a.uiGridHeadTable.append(c);b=$("<tr></tr>").appendTo(c);this.hasDetails&&b.append("<th class='ui-widget-header rq-hierarchy-header'/>");a.options.filterable&&(d=$("<tr class='ui-filter-row' ></tr>").appendTo(c),this.hasDetails&&d.append("<th class='ui-filter-header rq-hierarchy-header ui-widget-header'/>"));
$.each(a.Column,function(c,h){var e=$(a.createHeaderColumn(h));b.append(e);if(!0==a.options.sortable){var f=new n.Sorter;f.element=e;e.data("column",h);f._create({column:h,datasource:a.options.datasource,grid:a,mode:a.options.SortingMode,allowUnsort:a.options.allowUnsort})}d&&a.createFilterHeaderCell(d,h)})}0!=a.FrozenColumnCount&&(c=a.frozenHeadTable.find("thead"),h=a.frozenHeadTable.find("tr").empty(),a.options.filterable&&(e=$("<tr class='ui-filter-row' ></tr>").appendTo(c)),$.each(a.FrozenColumn,
function(b,c){var d=$(a.createHeaderColumn(c));h.append(d);if(!0==a.options.sortable){var f=new n.Sorter;f.element=d;d.data("column",c);f._create({column:c,datasource:a.options.datasource,grid:a,mode:a.options.mode,allowUnsort:a.options.allowUnsort})}e&&a.createFilterHeaderCell(e,c)}));this.menu.subscribeMenuHeaderEvent()};this.updateSorterSource=function(){var a=this;$.each(this.uiGrid.find("th.ui-widget-header"),function(){var b=$(this).data("Sorter");null!=b&&b.setOptions("datasource",a.options.datasource)})};
this.setOptions=function(a,b){this.options[a]=b;switch(a){case "datasource":var c=this;if(void 0!=b&&null!=b&&c.options.filterable){c.uiGrid.find(".ui-filter-input").val("");for(var d=0;d<c.options.columns.length;d++)c.options.columns[d].filterValue=null}c.closeCell();setTimeout(function(){c.Refresh()},100);c.subscribeCollectionChange();c.subscribeModelChange();c.updateSorterSource();!0==c.options.SaveColumnState&&c.updateCookie();break;case "columns":this.Column=this.options.columns=b;this._redraw();
break;case "startEdit":this.options.startEdit=b;this.Refresh();break;case "CanUserReorderRows":this.options.CanUserReorderRows=b;this._redraw();break;case "ColumnBehaviour":this.options.ColumnBehaviour=b;this.Refresh();break;case "rowheight":case "RowHeight":case "RowHeightBinding":this.tmpl();this.Refresh();break;case "disable":this.disableGrid(b);case "headerHeight":this.updateGridHeight(),this.updateGridWidth(),this.updateScrollPadding()}};this.columnDragAndDrop=function(){var a=this,b=a.uiGridHeadTable.find("thead tr:eq(0) th"),
c=a.frozenHeadTable.find("thead tr:eq(0) th"),d=b.add(c),h=a.uiGridBody.offset().left,e=h+a.uiGridBody.width();a.uiGridHeadTable.offset();a.uiGridHeadTable.height();var f=null,g=null,k=function(b){return!1!==a.columns[b].lockable},m=function(a,b){return $(a).parent()[0]===$(b).parent()[0]},n=function(a){var b=g;if(b===a[0])return!1;if(!m||!k||m(b,a))return!0};d.draggable({scroll:!0,helper:"clone",stack:"th",revert:"invalid",cursor:"default",cursorAt:{bottom:25,left:50},drag:function(b,c){g=this;var d=
c.helper,f=$(this).closest("table").find("tr").height();$(d).css({width:$(this).width(),height:f,"line-height":f.toString()+"px"});!0==a.options.EnableHeaderMenu&&$(d).find("div.ui-header-menu").removeClass("menu-icon");b.pageX>=e-70?(a.uiGridBody.scrollLeft(a.uiGridBody.scrollLeft()+10),a.uiGridHeadTableParent.scrollLeft(a.uiGridBody.scrollLeft())):70>=b.pageX-h&&(a.uiGridBody.scrollLeft(a.uiGridBody.scrollLeft()-10),a.uiGridHeadTableParent.scrollLeft(a.uiGridBody.scrollLeft()))}});d.droppable({tolerance:"touch",
drop:function(b,c){var d=$(this);if(n(d)){var h=$(c.draggable).closest("table"),e=d.closest("table"),g=c.draggable.index(),d=d.index();a.processColumnReorder(h,e,g,d);f&&f.remove()}},deactivate:function(a,b){f&&f.remove()},out:function(b,c){f&&f.remove();a.removeIcons($(c.helper));$("<div class='nodropper'></div>").css({"margin-top":Math.round($(c.helper).height()/3).toString()+"px"}).insertBefore($(c.helper).find("div:eq(0)"))},over:function(b,c){f&&f.remove();var h=$(this),e=!1;setTimeout(function(){if(e=
!n(h))a.removeIcons($(c.helper)),$("<div class='nodropper'></div>").css({"margin-top":Math.round($(c.helper).height()/3).toString()+"px"}).insertBefore($(c.helper).find("div:eq(0)"));else{var b=a.getOffset(h).left;m(h,g)?d.index(h)>d.index(g)&&(b+=h.outerWidth()):a._dropTarget=dropTarget;a.removeIcons($(c.helper));$("<div class='grabber'></div>").css({"margin-top":Math.round($(c.helper).height()/3).toString()+"px"}).insertBefore($(c.helper).find("div:eq(0)"));var p=h.outerHeight(),k=h.closest("table");
0==$(".rq-reorder-cue",k).length&&(f=$('<div class="rq-reorder-cue"><div class="ui-icon ui-icon-triangle-1-s top-icon"></div><div class="ui-icon ui-icon-triangle-1-n bottom-icon"></div></div>'),f.appendTo(k),f.find(".top-icon").css("margin-top","-6px"),f.find(".bottom-icon").css("margin-top",p-21+"px"),f.css({height:p,top:0,left:b}))}},10)}})};this.removeIcons=function(a){a.find("div.grabber").remove();a.find("div.nodropper").remove()};this.getOffset=function(a){a=a.offset();a.top-=window.pageYOffset-
document.documentElement.scrollTop;a.left-=window.pageXOffset-document.documentElement.scrollLeft;return a};this.processColumnReorder=function(a,b,c,d){var h=$(this),e={};e.rows=h.closest("thead").find("tr");e.cellIndex=e.rows.find("th").length-1;e.dragIndex=c;e.dropIndex=d;this.columnReorderer(e,a,b,this.Column,this.FrozenColumn);this._updateCols();this.tmpl(!0);this.tmpl();this.Refresh()};this.columnReorderer=function(a,b,c,d,h){b.hasClass("ui-grid-head-table")&&c.hasClass("ui-grid-head-table")?
(b=d.splice(a.dragIndex,1),d.splice(a.dropIndex,0,b[0]),c.find("tr").empty(),this.createtableHeader(this.Column,c)):b.hasClass("ui-frozen-head-table")&&c.hasClass("ui-frozen-head-table")&&(b=h.splice(a.dragIndex,1),h.splice(a.dropIndex,0,b[0]),c.find("tr").empty(),this.createtableHeader(this.FrozenColumn,c));this.menu.subscribeMenuHeaderEvent()};this.createtableHeader=function(a,b){var c=this,d=null;c.options.filterable&&(d=b.find(".ui-filter-row"));$.each(a,function(a,e){var f=$(c.createHeaderColumn(e));
b.find("tr:eq(0)").append(f);if(!0==c.options.sortable){var g=new n.Sorter;g.element=f;f.data("column",e);g._create({column:e,datasource:c.options.datasource,grid:c,mode:c.options.SortingMode,allowUnsort:c.options.allowUnsort})}d&&c.createFilterHeaderCell(d,e)})};this.disableGrid=function(a){a?(this.element.prop("disabled",!0),this.selectedItems.clear(),this.element.css("opacity",0.5)):(this.element.prop("disabled",!1),this.element.css("opacity",1))};this.createHeaderColumn=function(a){if(a){var b;
b=a.HeaderTemplate?a.HeaderTemplate:a.title||a.field||"";var c="";!0==a.isRowHeader&&(c+=" rq-column-width-readonly");var d="<th ";a.id&&(d+='id = "'+a.id+'"');!0==a.hidden&&(d+="style='display:none'");var h=b;try{0<$(b).length&&(h=$(b).text())}catch(e){}var f=RegExp("'","ig");""!=h&&f.test(h)&&(h=h.replace(f,"&apos;"));d=d+("class='"+c+" ui-widget-header' title = '"+h+"'><div style='position: relative;' class='headerContent'> ")+b;d+="<span style='display: inline-block;' class='icon'></span> ";!0!=
this.options.EnableHeaderMenu||!0==a.isRowHeader||void 0!=a.showMenu&&!0!=a.showMenu||"ContextMenu"==this.options.HeaderMenuMode||(d+="<div  class='icon' style='width:16px;position: relative'><div class='ui-header-menu menu-icon'/></div>");return d+="<div class='resizeHelper ui-resizable-handle ui-resizable-e' style='top:-15.5px;height:45px;display:"+(!0==this.options.resizable?"block":"none")+"'></div></div></th>"}};this.UpdateHeaderColumn=function(a,b){$("thead tr:eq(0) th",this.uiGridHeadTable)[a].innerText=
b;this.Column[a].title=b};this._updateCols=function(){this.appendCols(this.frozenHeadTable,this.frozenTable,this.FrozenColumn);this.appendCols(this.uiGridHeadTable,this.table,this.Column)};this.updateColWidthToFit=function(a,b,c){var d=!1==c?this.Column:this.FrozenColumn,h=this.element.width(),e=this.uiGridBody[0].scrollHeight>this.uiGridBody.height()?17:0,h=h-e;if(0!=d.length){var e=this.options.columns.slice(0),e=e.sort(function(a,b){return void 0==a.locked||void 0==b.locked?0:a.locked===b.locked?
0:a.locked?-1:1}),f=function(a){for(var b=0,c=0;c<a.length;c++)a[c].width&&(b+=a[c].width);return b}(e),g=this.options.minWidth,k=function(a,b){for(var c=a.length-1;0<=c;c--)if(a[c].width>g)return a[c]};if(f>h)for(h=f-h;0<h;){f=k(e,h);if(null==f)break;h-=f.width-g;f.width=0<h?g:-h+g}else e[e.length-1].width+=h-f;e=a.find("col");$.each(e,function(a){$(this).width(d[a].width)});e=b.find("col");$.each(e,function(a){$(this).width(d[a].width)});this.setTableWidthByColumn(a,b,c)}};this.appendCols=function(a,
b,c){var d;a.find("colgroup").remove();b.find("colgroup").remove();if(!a.find("colgroup").length){d=$("<colgroup></colgroup>").insertBefore(a.find("thead"));var e=null,f="1.7.1"==$.fn.jquery||"1.7.2"==$.fn.jquery;c=$.map(c,function(a){if((e=a.width)&&0!==parseInt(e,10)&&!0!=a.hidden)return!1==f?'<col style="width:'+("string"===typeof e?e:e+"px")+'"/>':$('<col style="width:'+("string"===typeof e?e:e+"px")+'"/>')[0];if(!0!=a.hidden)return!1==f?'<col style="width:100%"/>':$('<col style="width:100%"/>')[0];
if(!0==a.hidden)return!1==f?'<col style="width:0px;display:none"/>':$('<col style="width:0px;display:none"/>')[0]});this.hasDetails&&(!1==f?d.append('<col style="width:27px"/>'):d.append($('<col style="width:27px"/>')[0]));d.append(c);d=a.find("colgroup").clone();d.insertBefore(b.children("tbody"));this.setTableWidthByColumn(a,b)}};this.tmpl=function(a){var b="",c=!0==a?this.generateTemplate(this.FrozenColumn):this.generateTemplate(this.Column),b=this.hasDetails?"<tr class='rq-grid-row rq-master-row ":
"<tr class='rq-grid-row ";if(""==this.options.rowTemplate)var d=b+"' data-uid='${data.uid}' style='height:"+this.options.RowHeight+"px;'>",d=d+c+"</tr>";else d=this.options.rowTemplate;""==this.options.altRowTemplate?(b=b+"rq-grid-alternative-background' data-uid='${data.uid}' style='height:"+this.options.RowHeight+"px'>",b=b+c+"</tr>"):b=this.options.altRowTemplate;this.renderTemplate(d,b,a)};this.renderTemplate=function(a,b,c){c?(this.frozenRowTemplate=e(a),this.frozenAltRowTemplate=e(b)):(this.rowTemplate=
e(a),this.altRowTemplate=e(b))};this.rowHtml=function(a,b){var c=this.uiGridBody.height();0>=c&&(c=this.uiGrid.height());return!0==b?this.renderRowHtml(a,this.frozenRowTemplate,this.frozenAltRowTemplate,this.$frozenTbody,this.frozenTable,this.uiFrozenGridBodyActualContent,c,b):this.renderRowHtml(a,this.rowTemplate,this.altRowTemplate,this.$tbody,this.table,this.uiGridBodyActualContent,c,b)};this.frozenAltRowTemplate=this.frozenRowTemplate="";this.renderRowHtml=function(a,b,c,d,e,f,g){var k=this.options.RowHeight,
l=-k,m=this.options.datasource,r=this.uiGridBody,q=this.options.UseGridVirtualization,t=0;if(!m)return"";m instanceof n.GridModel&&(m=m.data);a||d.empty();d=0;q&&!a&&(r=r.scrollTop(),t=Math.floor(r/k),d=r-r%k);0<e.length&&(e[0].style.setProperty?e[0].style.setProperty("margin-top",d+"px","important"):e[0].style.setAttribute("margin-top",d+"px","important"));this.renderHeight=g;e=this.guid;r=this.GuidList;d={appendRowHtml:""};null!=f&&f.height(k*m.length);this.unsubscribeAllObjectChanges();for(f=t;f<
m.length&&!(q&&!a&&l>=g);f++){t=m[f];this.subscribeObjectChanges(t);if(void 0==t.uid){var v=e();t.uid=v;r[v]=t}else r[t.uid]=t;d.appendRowHtml=this.options.EnableAlternativeRowBackground?0==f%2?d.appendRowHtml+b(t):d.appendRowHtml+c(t):d.appendRowHtml+b(t);l+=t.RowHeight?t.RowHeight:k}return d};this.InsertColumn=function(a,b){this.fields=[];!0==b.locked?(0==a&&0==this.FrozenColumnCount&&(this.FrozenColumnCount+=1),this.insertTableColumn(a,b,this.frozenHeadTable,this.frozenTable,this.FrozenColumn,
this.$frozenTbody),this.tmpl(!0)):(this.insertTableColumn(a,b,this.uiGridHeadTable,this.table,this.Column,this.$tbody),this.tmpl());this.Refresh()};this.insertTableColumn=function(a,b,c,d,h,f){var g=this,k=e(g.createColumnTemplate(b,!1));if(!(a>h.length)){this.options.columns.splice(a,0,b);h.splice(a,0,b);g.appendCols(c,d,h);h=c.find("tr");var l=$(g.createHeaderColumn(b));if(!0==g.options.sortable){var m=new n.Sorter;l.data("column",b);m.element=l;m._create({column:b,datasource:g.options.datasource,
grid:g,mode:g.options.SortingMode,allowUnsort:g.options.allowUnsort})}g.options.filterable&&(c=c.find("tr").hasClass("ui-filter-row")?c.find("tr:eq(1)"):$("<tr class='ui-filter-row' ></tr>").appendTo(c.find("thead")),g.createFilterHeaderCell(c,b));g.InsertElement(h,h.find("th"),l,a);g.InsertElement(d.find("colgroup"),d.find("col"),void 0,a);f.find("tr").each(function(){var b=$(this);g.InsertElement(b,b.find("td"),k(g.GetDataFromRow(b)),a)})}};this.RemoveColumn=function(a){this.fields=[];"number"!==
typeof a&&(a=this.options.columns.indexOf(a));void 0!=this.options.columns[a]&&(!0==this.options.columns[a].locked?(this.removeTableColumn(a,this.frozenTable,this.frozenHeadTable,this.FrozenColumn),this.tmpl(!0)):(this.removeTableColumn(a,this.table,this.uiGridHeadTable,this.Column),this.tmpl()),this.Refresh())};this.removeTableColumn=function(a,b,c,d){a=this.options.columns.splice(a,1);var e=d.indexOf(a[0]);a=$("th:eq("+e+")",c);e=this.GetIndexByTableHead(a);$.each(b.find("tr"),function(){$(this).find("td").eq(e).remove()});
a.remove();d.splice(e,1);this.appendCols(c,b,d)};this.GetIndexByTableHead=function(a){return $.inArray(a[0],a.parent().children())};this.InsertElement=function(a,b,c,d){b.length?0==d?b.eq(0).before(c):b.eq(d-1).after(c):a.append(c)};this.GetRowFromData=function(a){var b=a.uid;a=this.$tbody.find('tr[data-uid="'+b+'"]');0!=this.FrozenColumnCount&&(b=this.$frozenTbody.find('tr[data-uid="'+b+'"]'),a=b.add(a));return a.length?a:null};this.hideList=[];this.Cols=new RadiantQ.Dictionary;this.FrozenCols=new RadiantQ.Dictionary;
this.GetColumnbyIndex=function(a){var b,c,d;!0==this.options.columns[a].locked?(a=this.FrozenColumn.indexOf(this.options.columns[a]),b=this.frozenTable,d=!0,c=this.frozenHeadTable):(a=this.Column.indexOf(this.options.columns[a]),b=this.table,d=!1,c=this.uiGridHeadTable);var e=0;if("string"===typeof a){var f=$("th#"+a,c);if(0==f.length)return null;a=f.index()}else f=$("th:eq("+a+")",c);e=this.GetIndexByTableHead(f);b=b.find("tr").find(" td:eq("+a+")");f=c.find("th:eq("+a+")");return{FilterHeader:c.find("tr.ui-filter-row").find("th:eq("+
a+")"),Header:f,Cells:b,Index:a,colIndex:e,Locked:d}};this.showColumn=function(a){a=this.GetColumnbyIndex(a);null!=a&&(!0==a.Locked?this.showtableColumn(a,this.frozenHeadTable,this.frozenTable,this.FrozenColumn,!0):this.showtableColumn(a,this.uiGridHeadTable,this.table,this.Column,!1),this._updateCols(),this.updateGridHeight(),this.updateGridWidth(),!0==this.options.SaveColumnState&&this.updateCookie())};this.GridWidth=0;this.setTableWidthByColumn=function(a,b,c){var d=0,d=a.find("col");1!=this.Column.length||
0!=this.Column[0].width&&void 0!=this.Column[0].width||c?(d=this.columnsWidth(d),a.width(d),b.width(d),this.GridWidth=d):(a.css("width","100%"),b.css("width","100%"))};this.columnsWidth=function(a){for(var b,c=0,d=0,e=a.length;d<e;d++)(b=a[d].style.width)&&-1==b.indexOf("%")&&(c+=parseFloat(b,10));return c};this.showtableColumn=function(a,b,c,d,e){a.Header.show();a.FilterHeader.show();this.setTableWidthByColumn(b,c);d[a.Index].hidden=!1;this.appendCols(b,c,d);this.hideList.splice(this.hideList.indexOf(a.Index),
1);this.element.trigger("ColumnShow",{column:d[a.Index],index:a.colIndex});this.options.SaveColumnState&&this.SaveVisibleState(d[a.Index]);this.tmpl();e&&this.tmpl(!0);this.Refresh()};this.hideColumn=function(a){a=this.GetColumnbyIndex(a);null!=a&&(!0==a.Locked?this.hideTableColumn(a,this.frozenHeadTable,this.frozenTable,this.FrozenColumn,!0):this.hideTableColumn(a,this.uiGridHeadTable,this.table,this.Column,!1),this.updateGridHeight(),this.updateGridWidth(),this._updateCols(),!0==this.options.SaveColumnState&&
this.updateCookie())};this.hideTableColumn=function(a,b,c,d,e){a.Header.hide();a.FilterHeader.hide();d[a.Index].hidden=!0;this.appendCols(b,c,d);this.element.trigger("ColumnHide",{column:d[a.Index],index:a.colIndex});this.options.SaveColumnState&&this.SaveVisibleState(d[a.Index]);this.hideList.push(a.Index);e&&this.tmpl(!0);this.tmpl();this.Refresh()};this.SaveVisibleState=function(a){this.options.SaveColumnState&&(this.EntireGridState[this.element[0].id+a.title]?this.EntireGridState[this.element[0].id+
a.title].hidden=a.hidden:this.EntireGridState[this.element[0].id+a.title]={hidden:a.hidden})};this.LockColumn=function(a){if(-1!=this.options.columns[a]&&(!1==this.options.columns[a].locked||void 0==this.options.columns[a].locked)){var b=this.GetColumnbyIndex(a);b.Header.remove();b.FilterHeader.remove();this.Column.splice($.inArray(this.Column[b.colIndex],this.Column),1);var c=this.options.columns[a];$.extend(c,{locked:!0});this.FrozenColumn.push(c);this.createHeaderColumn(c);this.frozenHeadTable.find("tr:eq(0)").append(b.Header);
this.options.filterable&&(b=this.frozenHeadTable.find("tr.ui-filter-row"),0==b.length&&(b=$("<tr class='ui-filter-row' ></tr>"),this.frozenHeadTable.find("thead").append(b)),this.createFilterHeaderCell(b,c));this._updateCols();this.element.trigger("ColumnLocked",{column:c,index:a});this.options.SaveColumnState&&s;this.SaveLockedState(c);this.FrozenColumnCount+=1;this.tmpl();this.tmpl(!0);this.Refresh();this.menu.subscribeMenuHeaderEvent();this.updateGridHeight();!0==this.options.SaveColumnState&&
this.updateCookie()}};this.SaveLockedState=function(a){this.options.SaveColumnState&&(this.EntireGridState[this.element[0].id+a.title]?this.EntireGridState[this.element[0].id+a.title].locked=a.locked:this.EntireGridState[this.element[0].id+a.title]={locked:a.locked})};this.UnlockColumn=function(a){if(-1!=this.options.columns[a]&&!0==this.options.columns[a].locked){var b=this.GetColumnbyIndex(a);b.Header.remove();b.FilterHeader.remove();var c=this.options.columns[a];this.FrozenColumn.splice($.inArray(this.FrozenColumn[b.colIndex],
this.FrozenColumn),1);$.extend(c,{locked:!1});this.Column.splice(0,0,c);b=this.createHeaderColumn(c);this.uiGridHeadTable.find("tr:eq(0)").prepend(b);this.options.filterable&&(b=this.uiGridHeadTable.find("tr.ui-filter-row"),0==b.length&&(b=$("<tr class='ui-filter-row' ></tr>"),this.uiGridHeadTable.find("thead").append(b)),this.createFilterHeaderCell(b,c));this._updateCols();this.FrozenColumnCount-=1;this.element.trigger("ColumnUnlocked",{column:c,index:a});this.options.SaveColumnState&&this.SaveLockedState(c);
this.tmpl();this.tmpl(!0);this.Refresh();this.menu.subscribeMenuHeaderEvent();this.updateGridHeight();!0==this.options.SaveColumnState&&this.updateCookie()}};this.syncTableScrollPosition=function(){var a=this.uiGridBody.scrollTop();this.uiFrozenGridBody.scrollTop(a)};this.GetDataFromRow=function(a){a=$(a).data("uid");return this.GuidList[a]?this.GuidList[a]:null};return this};$.fn.VWGrid=function(g){g=new n.GridUI(g);g._create(this);new n.Selection(g);new n.Hoverable(g)};n.Selection=function(g){this.Grid=
g;this.$GridTables=null;this.create=function(){var f=this;this.$GridTables=this.Grid.table.add(this.Grid.frozenTable);this.Grid.uiGridBodyParent.bind("mouseup",function(e){setTimeout(function(){f.mouseDown(e)},0)});var e=$.proxy(f.UpdateSelection,f);this.Grid.selectedItems.CollectionChanged.subscribe(e);this.UpdateSource()};this.Grid.selectedItems=new RadiantQ.RQ_CollectionChangeNotifier;this.UpdateSource=function(){var f=this,e=f.Grid.options.datasource;e&&e.CollectionChanged&&e.CollectionChanged.subscribe(function(e,
a){"remove"===e.type&&f.Grid.selectedItems[0]==a.items[0]&&f.Grid.selectedItems.remove(a.items[0])})};this.mouseDown=function(f){var e=$(f.target).closest("tr"),g=e.parents("table"),a=this.Grid;if(!0!=a.options.disable){if(!g)return!1;if(g.hasClass("ui-selectable")){g=a.GetDataFromRow(e);if(!f.ctrlKey&&0!=e.length||"single"==a.options.SelectionMode){if(1==a.selectedItems.length&&a.selectedItems[0]==g)return;a.ClearSelection()}else if(0!=e.length&&(e.hasClass("rq-row-selected")||e.find("td").hasClass("rq-row-selected"))&&
3!==f.which)return a.selectedItems.remove(g),!1;a.SelectRow(g)}return!1}};this.UpdateSelection=function(f,e){var g=e.items[0];"insert"===f.type?(g=this.$GridTables.find('tr[data-uid="'+g.uid+'"]'),g.addClass("rq-row-selected ui-state-active")):"remove"===f.type&&(g=this.$GridTables.find('tr[data-uid="'+g.uid+'"]'),g.removeClass("rq-row-selected ui-state-active"))};g.SelectRow=function(f){null!=f&&(1==g.selectedItems.length&&"single"==this.options.SelectionMode?(g.selectedItems.clear(),g.selectedItems.add(f)):
g.selectedItems.contains(f)||g.selectedItems.add(f))};this.hightlighRowByData=function(f){null!=f&&g.selectedItems.add(f)};g.ClearSelection=function(){for(var f=g.selectedItems.length,e=0;e<f;e++)g.selectedItems.remove(g.selectedItems[0])};this.create();return this};n.Hoverable=function(g){this.Grid=g;this.prevChartRow=this.prevTableRow=this.prevFrozenRow=this.currentTr=this.currentData=null;this._create=function(){var f=this,e=this.Grid;this.$GridTables=e.table.add(e.frozenTable);e.uiGridBodyParent.bind("mouseover",
function(e){f._mousehover(e)});e.uiGridBodyParent.bind("mouseleave",function(e){f.IsMouseIn()})};this._mousehover=function(f){if(!0!=g.options.disable)return this.currentTr=$(f.target).closest("tr"),0!=this.currentTr.length?this.IsMouseIn(this.currentTr.data("uid")):this.prevTableRow&&this.IsMouseIn(),!1};this.IsMouseIn=function(f){this.prevTableRow&&(this.prevTableRow.removeClass("rq-row-hover ui-state-hover"),this.prevTableRow=null);f&&(this.prevTableRow=this.$GridTables.find('tr[data-uid="'+f+
'"]').addClass("rq-row-hover ui-state-hover"))};this._create();return this}})(VW.Grid);
(function(n){var q=n(document),u=function(b,c){var d=n.extend({minWidth:20,GetGridInstance:function(){return b.data("VWGrid")}},c);d.publicProps={colWidth:null,startX:null,gridBody:null,gridHeadTable:null,$colElementHeader:null,$colElementBody:null,gridHeadth:null,lastColumnHeader:null,lastColumnBody:null,resizeStart:null,frozenGridHeadth:null,frozenGridHeadTable:null,gridInstance:d.GetGridInstance.call(this),gridTable:null,frozenGridTable:null,frozenGridBody:null,col:null,th:null,$grid:null,gridWidth:null,
columnWidth:null,resizedcolumn:null,NewColWidth:null,tapDownX:null,tapDownY:null,touchStartTime:null,fitToGrid:!1};var e=d.publicProps;if(e.gridInstance){e.fitToGrid=e.gridInstance.options.ColumnBehaviour==VW.Grid.ColumnBehaviour.NoHorizontalScrollBar;1<e.gridInstance.uiGridHead.find("table").length?(e.gridHeadTable=n(e.gridInstance.uiGridHead.find("table")[1]),e.frozenGridHeadTable=n(e.gridInstance.uiGridHead.find("table")[0])):e.gridHeadTable=e.gridInstance.uiGridHead.find("table");e.gridHeadth=
e.gridHeadTable.find("th");void 0!=e.frozenGridHeadTable&&(e.frozenGridHeadth=e.frozenGridHeadTable.find("th"));e.gridTable=e.gridInstance.table;e.gridBody=e.gridInstance.uiGridBody;e.frozenGridTable=e.gridInstance.frozenTable;e.frozenGridBody=e.gridInstance.uiFrozenGridBody;if(void 0!=e.frozenGridHeadTable){var f=e.frozenGridHeadth.not(".rq-column-width-readonly").find("div.resizeHelper");f.off("mousedown.columnResizer");f.off("mouseup.columnResizer");f.on("mousedown.columnResizer",{options:d,element:b},
g);f.on("mouseup.columnResizer",{options:d,element:b},a)}e=e.gridHeadth.not(".rq-column-width-readonly").find("div.resizeHelper");e.off("mousedown.columnResizer");e.off("mouseup.columnResizer");e.on("mousedown.columnResizer",{options:d,element:b},g);e.on("mouseup.columnResizer",{options:d,element:b},a);return this}};n.fn.ColumnEnhancer=function(a){a=new u(this,a);this.data("ColumnEnhancer",a)};var g=function(b){var c=b.data.options.publicProps,d=b.data.element,e=b.originalEvent;q.on("mousemove.columnResizer",
{options:b.data.options,element:d},k);q.on("touchmove.columnResizer",{options:b.data.options,element:d},k);q.on("mouseup.columnResizer",{options:b.data.options,element:d},a);b=e.touches?e.touches[0]:b;n(b.target).closest("table").hasClass("ui-frozen-head-table")?f(d,c,b,c.frozenGridHeadth,c.frozenGridHeadTable,c.frozenGridBody,c.frozenGridTable):f(d,c,b,c.gridHeadth,c.gridHeadTable,c.gridBody,c.gridTable)},f=function(a,c,d,f,g,k,q){var l=n(d.target);e=c.startX=d.clientX;c.th=l.closest("th");c.th.parent().css("cursor",
"e-resize");var m=c.th.index();n(f[m]).hasClass("rq-column-width-readonly")?d.preventDefault():(c.$colElementHeader=g.find("colgroup:first > col:nth-child("+(m+1)+")"),c.$colElementBody=k.find("colgroup:first > col:nth-child("+(m+1)+")"),c.CurrentHeadTable=g,c.CurrentBodyTable=k,c.col=c.$colElementHeader.add(c.$colElementBody),c.$grid=g.add(q),c.gridWidth=q.find("tbody").outerWidth(),c.columnWidth=c.th.outerWidth(),c.Columns=[],l.closest("table").hasClass("ui-frozen-head-table")?c.Columns=c.gridInstance.FrozenColumn:
c.Columns=c.gridInstance.Column,c.resizedcolumn=c.Columns[m],c.minWidth=c.resizedcolumn.minWidth?c.resizedcolumn.minWidth:d.data.options.minWidth,c.resizeStart=!0,a.trigger("ColumnResizeStart",{tableHeadCol:c.$colElementHeader,tableBodyCol:c.$colElementBody,col:c.col}))},e=0,k=function(a){var c=a.data.options.publicProps,d=a.originalEvent,f=c.minWidth;if(c.resizeStart)if(c.gridInstance.options.columnResizing=!0,a.preventDefault(),a=d.touches?d.touches[0]:a,d=a.clientX-c.startX,!1==c.fitToGrid){if(!1==
c.columnWidth-f<=-d){var g=c.columnWidth+d;a=c.gridWidth+d;c.gridInstance.element.width()-55<a&&!0==c.resizedcolumn.locked||(c.col.width(g),c.NewColWidth=g,c.$grid.width(a).width(),c.resizedcolumn.width=c.NewColWidth,c.gridInstance.updateGridUI(),c.col.css("height","auto"))}}else{var d=a.clientX-e,k=0,q;k=d;q=c.CurrentHeadTable.find("th:not(.ui-filter-header):visible");for(var l=c.minWidth,m=null,r=q.length-1,u=0,t=!1;0<=r;r--){var m=n(q[r]),g=c.Columns[r],v=l<=g.width;1<=k&&(v=0<g.width-l);if(v&&
c.th[0]!=m[0]){t=!0;u=g.width;break}}q=!0==t?{Cols:c.CurrentHeadTable.add(c.CurrentBodyTable).find("colgroup:first > col:nth-child("+(r+1)+")"),width:u,column:g}:null;q&&(k=q.column.width-d,g=c.resizedcolumn.width+d,g>f&&k>=f&&(q.Cols.width(k),c.col.width(g),q.column.width=k,c.resizedcolumn.width=g));e=a.clientX}},a=function(a){var c=a.data.options.publicProps;a=a.data.element;if(c.resizeStart){c.th.parent().css("cursor","pointer");c.gridInstance.options.columnResizing=!1;var d={tableHeadCol:c.$colElementHeader,
tableBodyCol:c.$colElementBody,col:c.col,tableHead:c.th,newColWidth:c.NewColWidth,gridWidth:c.gridWidth,resizedColumn:c.resizedcolumn};c.gridInstance.options.SaveColumnState&&(c.gridInstance.EntireGridState[c.gridInstance.element[0].id+c.resizedcolumn.title]?c.gridInstance.EntireGridState[c.gridInstance.element[0].id+c.resizedcolumn.title].width=c.resizedcolumn.width:c.gridInstance.EntireGridState[c.gridInstance.element[0].id+c.resizedcolumn.title]={width:c.resizedcolumn.width});a.trigger("ColumnResizeEnd",
d);q.off("mousemove.columnResizer");q.off("keyup.columnResize");q.off("mouseup.columnResizer");c.resizeStart=!1;!0==c.gridInstance.options.SaveColumnState&&c.gridInstance.updateCookie()}}})(jQuery);
