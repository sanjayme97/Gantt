/*!
* RadiantQ jQuery Gantt
* @author RadiantQ
* @version 8.0
* http://www.radiantq.com
*
* Copyright RadiantQ
*/
if(!window['RadiantQ']) window.RadiantQ={}; RadiantQ.Version='8.0';
/*

 jquery.layout 1.4.3
 $Date: 2014-08-30 08:00:00 (Sat, 30 Aug 2014) $
 $Rev: 1.0403 $

 Copyright (c) 2014 Kevin Dalman (http://jquery-dev.com)
 Based on work by Fabrizio Balliano (http://www.fabrizioballiano.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 SEE: http://layout.jquery-dev.com/LICENSE.txt

 Changelog: http://layout.jquery-dev.com/changelog.cfm

 Docs: http://layout.jquery-dev.com/documentation.html
 Tips: http://layout.jquery-dev.com/tips.html
 Help: http://groups.google.com/group/jquery-ui-layout
*/
(function(){var f=0;$.Widget.prototype._createWidget=function(b,d){d=$(d||this.defaultElement||this)[0];this.element=$(d);this.uuid=f++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();this.classesElementLookup={};d!==this&&($.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=$(d.style?d.ownerDocument:d.document||d),this.window=$(this.document[0].defaultView||this.document[0].parentWindow));
this.options=$.widget.extend({},this.options,this._getCreateOptions(),b);-1!=this.namespace.indexOf("radiantq")&&b&&(b.data&&(this.options.data=b.data),b.Data&&(this.options.Data=b.Data),b.DataSource&&(this.options.DataSource=b.DataSource));this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()}})();
(function(f){var b=Math.min,d=Math.max,a=Math.floor,c=function(a){return"string"===f.type(a)},e=function(a,e){if(f.isArray(e))for(var b=0,d=e.length;b<d;b++){var l=e[b];try{c(l)&&(l=eval(l)),f.isFunction(l)&&l(a)}catch(n){}}};f.layout={version:"1.4.3",revision:1.0403,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},
resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",
background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},
center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(a){a=f(a);if(a=a.data("layout")||a.data("parentLayout")){a=a.container;if(a.data("layoutPane"))return a;a=a.closest("."+f.layout.defaults.panes.paneClass);if(a.data("layoutPane"))return a}return null},getParentPaneInstance:function(a){return(a=f.layout.getParentPaneElem(a))?a.data("layoutPane"):null},getParentLayoutInstance:function(a){return(a=f.layout.getParentPaneElem(a))?
a.data("parentLayout"):null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(a){var c=f.layout.getEventObject(a);c&&(c.stopPropagation(),a=f(this).data("layoutEdge"));a&&!/^(west|east|north|south|center)$/.test(a)&&(f.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+a+'"'),a="error");return a},plugins:{draggable:!!f.fn.draggable,effects:{core:!!f.effects,slide:f.effects&&(f.effects.slide||f.effects.effect&&f.effects.effect.slide)}},onCreate:[],
onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||f.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||f.layout.getScrollbarSize("height")},getScrollbarSize:function(a){var c=f('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; border: 0; overflow: scroll;"></div>').appendTo("body"),e={width:c.outerWidth-c[0].clientWidth,height:100-c[0].clientHeight};
c.remove();window.scrollbarWidth=e.width;window.scrollbarHeight=e.height;return a.match(/^(width|height)$/)?e[a]:e},disableTextSelection:function(){var a=f(document);f.fn.disableSelection&&(a.data("textSelectionInitialized")||a.on("mouseup",f.layout.enableTextSelection).data("textSelectionInitialized",!0),a.data("textSelectionDisabled")||a.disableSelection().data("textSelectionDisabled",!0))},enableTextSelection:function(){var a=f(document);f.fn.enableSelection&&a.data("textSelectionDisabled")&&a.enableSelection().data("textSelectionDisabled",
!1)},showInvisibly:function(a,c){if(a&&a.length&&(c||"none"===a.css("display"))){var e=a[0].style,e={display:e.display||"",visibility:e.visibility||""};a.css({display:"block",visibility:"hidden"});return e}return{}},getElementDimensions:function(a,c){var e={css:{},inset:{}},b=e.css,l={bottom:0},n=f.layout.cssNum,p=Math.round,q=a.offset(),r,s,u;e.offsetLeft=q.left;e.offsetTop=q.top;c||(c={});f.each(["Left","Right","Top","Bottom"],function(d,n){r=b["border"+n]=f.layout.borderWidth(a,n);s=b["padding"+
n]=f.layout.cssNum(a,"padding"+n);u=n.toLowerCase();e.inset[u]=0<=c[u]?c[u]:s;l[u]=e.inset[u]+r});b.width=p(a.width());b.height=p(a.height());b.top=n(a,"top",!0);b.bottom=n(a,"bottom",!0);b.left=n(a,"left",!0);b.right=n(a,"right",!0);e.outerWidth=p(a.outerWidth());e.outerHeight=p(a.outerHeight());e.innerWidth=d(0,e.outerWidth-l.left-l.right);e.innerHeight=d(0,e.outerHeight-l.top-l.bottom);e.layoutWidth=p(a.innerWidth());e.layoutHeight=p(a.innerHeight());return e},getElementStyles:function(a,c){var e=
{},b=a[0].style,d=c.split(","),f=["Top","Bottom","Left","Right"],p=["Color","Style","Width"],q,r,s,u,w,t;for(u=0;u<d.length;u++)if(q=d[u],q.match(/(border|padding|margin)$/))for(w=0;4>w;w++)if(r=f[w],"border"===q)for(t=0;3>t;t++)s=p[t],e[q+r+s]=b[q+r+s];else e[q+r]=b[q+r];else e[q]=b[q];return e},cssWidth:function(a,c){if(0>=c)return 0;var e=f.layout.browser,e=e.boxModel?e.boxSizing?a.css("boxSizing"):"content-box":"border-box",b=f.layout.borderWidth,l=f.layout.cssNum,n=c;"border-box"!==e&&(n-=b(a,
"Left")+b(a,"Right"));"content-box"===e&&(n-=l(a,"paddingLeft")+l(a,"paddingRight"));return d(0,n)},cssHeight:function(a,c){if(0>=c)return 0;var e=f.layout.browser,e=e.boxModel?e.boxSizing?a.css("boxSizing"):"content-box":"border-box",b=f.layout.borderWidth,l=f.layout.cssNum,n=c;"border-box"!==e&&(n-=b(a,"Top")+b(a,"Bottom"));"content-box"===e&&(n-=l(a,"paddingTop")+l(a,"paddingBottom"));return d(0,n)},cssNum:function(a,c,e){a.jquery||(a=f(a));var b=f.layout.showInvisibly(a);c=f.css(a[0],c,!0);e=
e&&"auto"==c?c:Math.round(parseFloat(c)||0);a.css(b);return e},borderWidth:function(a,c){a.jquery&&(a=a[0]);var e="border"+c.substr(0,1).toUpperCase()+c.substr(1);return"none"===f.css(a,e+"Style",!0)?0:Math.round(parseFloat(f.css(a,e+"Width",!0))||0)},isMouseOverElem:function(a,c){var e=f(c||this),b=e.offset(),d=b.top,b=b.left,n=b+e.outerWidth(),e=d+e.outerHeight(),p=a.pageX,q=a.pageY;return f.layout.browser.msie&&0>p&&0>q||p>=b&&p<=n&&q>=d&&q<=e},msg:function(a,c,e,b){f.isPlainObject(a)&&window.debugData?
("string"===typeof c?(b=e,e=c):"object"===typeof e&&(b=e,e=null),e=e||"log( <object> )",b=f.extend({sort:!1,returnHTML:!1,display:!1},b),!0===c||b.display?debugData(a,e,b):window.console&&console.log(debugData(a,e,b))):c?alert(a):window.console?console.log(a):(c=f("#layoutLogger"),c.length||(c=f('<div id="layoutLogger" style="position: '+(f.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
c.css("left",f(window).width()-c.outerWidth()-5),f.ui.draggable&&c.draggable({handle:":first-child"})),c.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};(function(){var a=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||
[],a=c[1]||"",c=c[2]||0,e="msie"===a,b=document.compatMode,d=f.support,n=void 0!==d.boxSizing?d.boxSizing:d.boxSizingReliable,p=!e||!b||"CSS1Compat"===b||d.boxModel||!1,q=f.layout.browser={version:c,safari:"webkit"===a,webkit:"chrome"===a,msie:e,isIE6:e&&6==c,boxModel:p,boxSizing:!("function"===typeof n?!n():!n)};a&&(q[a]=!0);p||b||f(function(){q.boxModel=d.boxModel})})();f.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,
resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",
centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",
contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,
resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:f.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},
showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,
onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};f.layout.optionsMap=
{layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),
noDefault:["paneSelector","resizerCursor","customHotkey"]};f.layout.transformData=function(a,c){var e=c?{panes:{},center:{}}:{},b,d,n,p,q,r,s;if("object"!==typeof a)return e;for(d in a)for(b=e,q=a[d],n=d.split("__"),s=n.length-1,r=0;r<=s;r++)p=n[r],r===s?f.isPlainObject(q)?b[p]=f.layout.transformData(q):b[p]=q:(b[p]||(b[p]={}),b=b[p]);return e};f.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",
resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain",
"cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(a){function c(e,b){for(var h=e.split("."),d=h.length-1,m={branch:a,key:h[d]},f=0,k;f<d;f++)k=h[f],m.branch=void 0==m.branch[k]?b?m.branch[k]={}:{}:m.branch[k];return m}var e=f.layout.backwardCompatibility.map,
b,d,n,p;for(p in e)b=c(p),n=b.branch[b.key],void 0!==n&&(d=c(e[p],!0),d.branch[d.key]=n,delete b.branch[b.key])},renameAllOptions:function(a){var c=f.layout.backwardCompatibility.renameOptions;c(a);a.defaults&&("object"!==typeof a.panes&&(a.panes={}),f.extend(!0,a.panes,a.defaults),delete a.defaults);a.panes&&c(a.panes);f.each(f.layout.config.allPanes,function(e,b){a[b]&&c(a[b])});return a}};f.fn.layout=function(g){function h(a){if(!a)return!0;var c=a.keyCode;if(33>c)return!0;var e={38:"north",40:"south",
37:"west",39:"east"},b=a.shiftKey,h=a.ctrlKey,g,d,m,k;h&&37<=c&&40>=c&&t[e[c]].enableCursorHotkey?k=e[c]:(h||b)&&f.each(n.borderPanes,function(a,e){g=t[e];d=g.customHotkey;m=g.customHotkeyModifier;if((b&&"SHIFT"==m||h&&"CTRL"==m||h&&b)&&d&&c===(isNaN(d)||9>=d?d.toUpperCase().charCodeAt(0):d))return k=e,!1});if(!k||!E[k]||!t[k].closable||v[k].isHidden)return!0;ma(k);a.stopPropagation();return a.returnValue=!1}function m(a){if(G()){this&&this.tagName&&(a=this);var e;c(a)?e=E[a]:f(a).data("layoutRole")?
e=f(a):f(a).parents().each(function(){if(f(this).data("layoutRole"))return e=f(this),!1});if(e&&e.length){var b=e.data("layoutEdge");a=v[b];a.cssSaved&&k(b);if(a.isSliding||a.isResizing||a.isClosed)a.cssSaved=!1;else{var h={zIndex:t.zIndexes.resizer_normal+1},g={},d=e.css("overflow"),m=e.css("overflowX"),l=e.css("overflowY");"visible"!=d&&(g.overflow=d,h.overflow="visible");m&&!m.match(/(visible|auto)/)&&(g.overflowX=m,h.overflowX="visible");l&&!l.match(/(visible|auto)/)&&(g.overflowY=m,h.overflowY=
"visible");a.cssSaved=g;e.css(h);f.each(n.allPanes,function(a,c){c!=b&&k(c)})}}}}function k(a){if(G()){this&&this.tagName&&(a=this);var e;c(a)?e=E[a]:f(a).data("layoutRole")?e=f(a):f(a).parents().each(function(){if(f(this).data("layoutRole"))return e=f(this),!1});if(e&&e.length){a=e.data("layoutEdge");a=v[a];var b=a.cssSaved||{};a.isSliding||a.isResizing||e.css("zIndex",t.zIndexes.pane_normal);e.css(b);a.cssSaved=!1}}}var l=f.layout.browser,n=f.layout.config,p=f.layout.cssWidth,q=f.layout.cssHeight,
r=f.layout.getElementDimensions,s=f.layout.getElementStyles,u=f.layout.getEventObject,w=f.layout.parsePaneName,t=f.extend(!0,{},f.layout.defaults);t.effects=f.extend(!0,{},f.layout.effects);var v={id:"layout"+f.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},z={north:null,south:null,east:null,west:null,center:null},
x={data:{},set:function(a,c,e){x.clear(a);x.data[a]=setTimeout(c,e)},clear:function(a){var c=x.data;c[a]&&(clearTimeout(c[a]),delete c[a])}},A=function(a,c,e){var b=t;(b.showErrorMessages&&!e||e&&b.showDebugMessages)&&f.layout.msg(b.name+" / "+a,!1!==c);return!1},y=function(a,e,b){var h=e&&c(e),g=h?v[e]:v,d=h?t[e]:t,m=t.name,k=a+(a.match(/_/)?"":"_end"),l=k.match(/_end$/)?k.substr(0,k.length-4):"",n=d[k]||d[l],r="NC",p=[],q=h?E[e]:0;if(h&&!q)return r;h||"boolean"!==f.type(e)||(b=e,e="");if(n)try{c(n)&&
(n.match(/,/)?(p=n.split(","),n=eval(p[0])):n=eval(n)),f.isFunction(n)&&(r=p.length?n(p[1]):h?n(e,E[e],g,d,m):n(R,g,d,m))}catch(s){A(t.errors.callbackError.replace(/EVENT/,f.trim((e||"")+" "+k)),!1),"string"===f.type(s)&&string.length&&A("Exception:  "+s,!1)}b||!1===r||(h?(d=t[e],g=v[e],q.triggerHandler("layoutpane"+k,[e,q,g,d,m]),l&&q.triggerHandler("layoutpane"+l,[e,q,g,d,m])):(J.triggerHandler("layout"+k,[R,g,d,m]),l&&J.triggerHandler("layout"+l,[R,g,d,m])));h&&"onresize_end"===a&&Pa(e+"",!0);
return r},C=function(a){if(!l.mozilla){var c=E[a];"IFRAME"===v[a].tagName?c.css(n.hidden).css(n.visible):c.find("IFRAME").css(n.hidden).css(n.visible)}},M=function(a){var c=E[a];a=n[a].dir;c={minWidth:1001-p(c,1E3),minHeight:1001-q(c,1E3)};"horz"===a&&(c.minSize=c.minHeight);"vert"===a&&(c.minSize=c.minWidth);return c},B=function(a,e,b){var h=a;c(a)?h=E[a]:a.jquery||(h=f(a));a=q(h,e);h.css({height:a,visibility:"visible"});0<a&&0<h.innerWidth()?b&&h.data("autoHidden")&&(h.show().data("autoHidden",
!1),l.mozilla||h.css(n.hidden).css(n.visible)):b&&!h.data("autoHidden")&&h.hide().data("autoHidden",!0)},F=function(e,b,h){h||(h=n[e].dir);c(b)&&b.match(/%/)&&(b="100%"===b?-1:parseInt(b,10)/100);if(0===b)return 0;if(1<=b)return parseInt(b,10);var g=t,d=0;"horz"==h?d=K.innerHeight-(E.north?g.north.spacing_open:0)-(E.south?g.south.spacing_open:0):"vert"==h&&(d=K.innerWidth-(E.west?g.west.spacing_open:0)-(E.east?g.east.spacing_open:0));if(-1===b)return d;if(0<b)return a(d*b);if("center"==e)return 0;
h="horz"===h?"height":"width";g=E[e];e="height"===h?ca[e]:!1;var d=f.layout.showInvisibly(g),m=g.css(h),k=e?e.css(h):0;g.css(h,"auto");e&&e.css(h,"auto");b="height"===h?g.outerHeight():g.outerWidth();g.css(h,m).css(d);e&&e.css(h,k);return b},D=function(a,c){var e=E[a],b=t[a],h=v[a],g=c?b.spacing_open:0,b=c?b.spacing_closed:0;return!e||h.isHidden?0:h.isClosed||h.isSliding&&c?b:"horz"===n[a].dir?e.outerHeight()+g:e.outerWidth()+g},H=function(a,c){if(G()){var e=t[a],h=v[a],g=n[a],m=g.dir;g.sizeType.toLowerCase();
var g=void 0!=c?c:h.isSliding,f=e.spacing_open,k=n.oppositeEdge[a],l=v[k],r=E[k],p=!r||!1===l.isVisible||l.isSliding?0:"horz"==m?r.outerHeight():r.outerWidth(),k=(!r||l.isHidden?0:t[k][!1!==l.isClosed?"spacing_closed":"spacing_open"])||0,l="horz"==m?K.innerHeight:K.innerWidth,r=M("center"),r="horz"==m?d(t.center.minHeight,r.minHeight):d(t.center.minWidth,r.minWidth),g=l-f-(g?0:F("center",r,m)+p+k),m=h.minSize=d(F(a,e.minSize),M(a).minSize),g=h.maxSize=b(e.maxSize?F(a,e.maxSize):1E5,g),h=h.resizerPosition=
{},f=K.inset.top,p=K.inset.left,k=K.innerWidth,l=K.innerHeight,e=e.spacing_open;switch(a){case "north":h.min=f+m;h.max=f+g;break;case "west":h.min=p+m;h.max=p+g;break;case "south":h.min=f+l-g-e;h.max=f+l-m-e;break;case "east":h.min=p+k-g-e,h.max=p+k-m-e}}},N=function(a,c){var e=f(a),b=e.data("layoutRole"),h=e.data("layoutEdge"),g=t[h][b+"Class"],h="-"+h,d=e.hasClass(g+"-closed")?"-closed":"-open",m="-closed"===d?"-open":"-closed",d=g+"-hover "+(g+h+"-hover ")+(g+d+"-hover ")+(g+h+d+"-hover ");c&&
(d+=g+m+"-hover "+(g+h+m+"-hover "));"resizer"==b&&e.hasClass(g+"-sliding")&&(d+=g+"-sliding-hover "+(g+h+"-sliding-hover "));return f.trim(d)},O=function(a,c){var e=f(c||this);a&&"toggler"===e.data("layoutRole")&&a.stopPropagation();e.addClass(N(e))},L=function(a,c){var e=f(c||this);e.removeClass(N(e,!0))},Q=function(a){a=f(this).data("layoutEdge");var c=v[a];f(document);c.isResizing||v.paneResizing||t.maskPanesEarly&&ta(a,{resizing:!0})},S=function(a,c){var e=c||this,h=f(e).data("layoutEdge"),b=
h+"ResizerLeave";f(document);x.clear(h+"_openSlider");x.clear(b);c?t.maskPanesEarly&&!v.paneResizing&&na():x.set(b,function(){S(a,e)},200)},G=function(){return v.initialized||v.creatingLayout?!0:I()},I=function(a){var c=t;if(!J.is(":visible"))return!a&&l.webkit&&"BODY"===J[0].tagName&&setTimeout(function(){I(!0)},50),!1;if(!fa("center").length)return A(c.errors.centerPaneMissing);v.creatingLayout=!0;f.extend(K,r(J,c.inset));oa();c.scrollToBookmarkOnLoad&&(a=self.location,void 0!==a&&a.hash&&a.replace(a.hash));
R.hasParentLayout?c.resizeWithWindow=!1:c.resizeWithWindow&&f(window).bind("resize."+X,W);delete v.creatingLayout;v.initialized=!0;e(R,f.layout.onReady);y("onload_end");return!0},V=function(a,c){var e=w.call(this,a),h=E[e];if(h){var b=ca[e],g=v[e],d=t[e],m=t.stateManagement||{},d=c?d.children=c:d.children;if(f.isPlainObject(d))d=[d];else if(!d||!f.isArray(d))return;f.each(d,function(a,c){f.isPlainObject(c)&&(c.containerSelector?h.find(c.containerSelector):b||h).each(function(){var a=f(this),h=a.data("layout");
if(!h){P({container:a,options:c},g);if(m.includeChildren&&v.stateData[e]){var h=(v.stateData[e].children||{})[c.instanceKey],b=c.stateManagement||(c.stateManagement={autoLoad:!0});!0===b.autoLoad&&h&&(b.autoSave=!1,b.includeChildren=!0,b.autoLoad=f.extend(!0,{},h))}(h=a.layout(c))&&U(e,h)}})})}},P=function(a,c){var e=a.container,h=a.options,b=h.stateManagement,g=h.instanceKey||e.data("layoutInstanceKey");g||(g=(b&&b.cookie?b.cookie.name:"")||h.name);g=g?g.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,
"_"):"layout"+ ++c.childIdx;h.instanceKey=g;e.data("layoutInstanceKey",g);return g},U=function(a,c){var e=E[a],h=z[a],b=v[a];f.isPlainObject(h)&&(f.each(h,function(a,c){c.destroyed&&delete h[a]}),f.isEmptyObject(h)&&(h=z[a]=null));c||h||(c=e.data("layout"));c&&(c.hasParentLayout=!0,e=c.options,P(c,b),h||(h=z[a]={}),h[e.instanceKey]=c.container.data("layout"));R[a].children=z[a];c||V(a)},W=function(){var a=t,c=Number(a.resizeWithWindowDelay);10>c&&(c=100);x.clear("winResize");x.set("winResize",function(){x.clear("winResize");
x.clear("winResizeRepeater");var c=r(J,a.inset);c.innerWidth===K.innerWidth&&c.innerHeight===K.innerHeight||xa()},c);x.data.winResizeRepeater||da()},da=function(){var a=Number(t.resizeWithWindowMaxDelay);0<a&&x.set("winResizeRepeater",function(){da();xa()},a)},ba=function(){y("onunload_start");e(R,f.layout.onUnload);y("onunload_end")},aa=function(a){a=a?a.split(","):n.borderPanes;f.each(a,function(a,c){var e=t[c];if(e.enableCursorHotkey||e.customHotkey)return f(document).bind("keydown."+X,h),!1})},
ja=function(){function a(c){var e=t[c],h=t.panes;e.fxSettings||(e.fxSettings={});h.fxSettings||(h.fxSettings={});f.each(["_open","_close","_size"],function(a,b){var g="fxName"+b,d="fxSpeed"+b,m="fxSettings"+b,k=e[g]=e[g]||h[g]||e.fxName||h.fxName||"none",l=f.effects&&(f.effects[k]||f.effects.effect&&f.effects.effect[k]);"none"!==k&&t.effects[k]&&l||(k=e[g]="none");k=t.effects[k]||{};g=k.all||null;k=k[c]||null;e[d]=e[d]||h[d]||e.fxSpeed||h.fxSpeed||null;e[m]=f.extend(!0,{},g,k,h.fxSettings,e.fxSettings,
h[m],e[m])});delete e.fxName;delete e.fxSpeed;delete e.fxSettings}var c,e,h,b,m,k;g=f.layout.transformData(g,!0);g=f.layout.backwardCompatibility.renameAllOptions(g);if(!f.isEmptyObject(g.panes)){c=f.layout.optionsMap.noDefault;b=0;for(m=c.length;b<m;b++)h=c[b],delete g.panes[h];c=f.layout.optionsMap.layout;b=0;for(m=c.length;b<m;b++)h=c[b],delete g.panes[h]}c=f.layout.optionsMap.layout;var l=f.layout.config.optionRootKeys;for(h in g)b=g[h],0>f.inArray(h,l)&&0>f.inArray(h,c)&&(g.panes[h]||(g.panes[h]=
f.isPlainObject(b)?f.extend(!0,{},b):b),delete g[h]);f.extend(!0,t,g);f.each(n.allPanes,function(b,d){n[d]=f.extend(!0,{},n.panes,n[d]);e=t.panes;k=t[d];if("center"===d)for(c=f.layout.optionsMap.center,b=0,m=c.length;b<m;b++)h=c[b],g.center[h]||!g.panes[h]&&k[h]||(k[h]=e[h]);else k=t[d]=f.extend(!0,{},e,k),a(d),k.resizerClass||(k.resizerClass="ui-layout-resizer"),k.togglerClass||(k.togglerClass="ui-layout-toggler");k.paneClass||(k.paneClass="ui-layout-pane")});b=g.zIndex;l=t.zIndexes;0<b&&(l.pane_normal=
b,l.content_mask=d(b+1,l.content_mask),l.resizer_normal=d(b+2,l.resizer_normal));delete t.panes},fa=function(a){a=t[a].paneSelector;if("#"===a.substr(0,1))return J.find(a).eq(0);var c=J.children(a).eq(0);return c.length?c:J.children("form:first").children(a).eq(0)},oa=function(a){w(a);f.each(n.allPanes,function(a,c){Y(c,!0)});Ea();f.each(n.borderPanes,function(a,c){E[c]&&v[c].isVisible&&(H(c),pa(c))});qa("center");f.each(n.allPanes,function(a,c){ua(c)})},Y=function(a,c){if(c||G()){var e=t[a],h=v[a],
g=n[a],f=g.dir,l="center"===a,r={},u=E[a],w,y;u?Fa(a,!1,!0,!1):ca[a]=!1;u=E[a]=fa(a);if(u.length){u.data("layoutCSS")||u.data("layoutCSS",s(u,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));R[a]={name:a,pane:E[a],content:ca[a],options:t[a],state:v[a],children:z[a]};u.data({parentLayout:R,layoutPane:R[a],layoutEdge:a,layoutRole:"pane"}).css(g.cssReq).css("zIndex",t.zIndexes.pane_normal).css(e.applyDemoStyles?g.cssDemo:{}).addClass(e.paneClass+
" "+e.paneClass+"-"+a).bind("mouseenter."+X,O).bind("mouseleave."+X,L);g={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};
for(y in g)u.bind("layoutpane"+y.toLowerCase()+"."+X,R[g[y]||y]);ya(a,!1);l||(w=h.size=F(a,e.size),l=F(a,e.minSize)||1,y=F(a,e.maxSize)||1E5,0<w&&(w=d(b(w,y),l)),h.autoResize=e.autoResize,h.isClosed=!1,h.isSliding=!1,h.isResizing=!1,h.isHidden=!1,h.pins||(h.pins=[]));h.tagName=u[0].tagName;h.edge=a;h.noRoom=!1;h.isVisible=!0;va(a);"horz"===f?r.height=q(u,w):"vert"===f&&(r.width=p(u,w));u.css(r);"horz"!=f&&qa(a,!0);v.initialized&&(Ea(a),aa(a));e.initClosed&&e.closable&&!e.initHidden?ga(a,!0,!0):e.initHidden||
e.initClosed?za(a):h.noRoom||u.css("display","block");u.css("visibility","visible");e.showOverflowOnHover&&u.hover(m,k);v.initialized&&ua(a)}else E[a]=!1}},ua=function(a){var c=E[a],e=v[a],h=t[a];c&&(c.data("layout")&&U(a,c.data("layout")),e.isVisible&&(v.initialized?xa():Aa(a),h.triggerEventsOnLoad?y("onresize_end",a):Pa(a,!0)),h.initChildren&&h.children&&V(a))},va=function(a){a=a?a.split(","):n.borderPanes;f.each(a,function(a,c){var e=E[c],h=T[c],b=v[c],g=n[c].side,d={};if(e){switch(c){case "north":d.top=
K.inset.top;d.left=K.inset.left;d.right=K.inset.right;break;case "south":d.bottom=K.inset.bottom;d.left=K.inset.left;d.right=K.inset.right;break;case "west":d.left=K.inset.left;break;case "east":d.right=K.inset.right}e.css(d);h&&b.isClosed?h.css(g,K.inset[g]):h&&!b.isHidden&&h.css(g,K.inset[g]+D(c))}})},Ea=function(a){a=a?a.split(","):n.borderPanes;f.each(a,function(a,c){var e=E[c];T[c]=!1;Z[c]=!1;if(e){var e=t[c],h=v[c],b="#"===e.paneSelector.substr(0,1)?e.paneSelector.substr(1):"",g=e.resizerClass,
d=e.togglerClass,m="-"+c,k=R[c],l=k.resizer=T[c]=f("<div></div>"),k=k.toggler=e.closable?Z[c]=f("<div></div>"):!1;!h.isVisible&&e.slidable&&l.attr("title",e.tips.Slide).css("cursor",e.sliderCursor);l.attr("id",b?b+"-resizer":"").data({parentLayout:R,layoutPane:R[c],layoutEdge:c,layoutRole:"resizer"}).css(n.resizers.cssReq).css("zIndex",t.zIndexes.resizer_normal).css(e.applyDemoStyles?n.resizers.cssDemo:{}).addClass(g+" "+g+m).hover(O,L).hover(Q,S).mousedown(f.layout.disableTextSelection).mouseup(f.layout.enableTextSelection).appendTo(J);
f.fn.disableSelection&&l.disableSelection();e.resizerDblClickToggle&&l.bind("dblclick."+X,ma);k&&(k.attr("id",b?b+"-toggler":"").data({parentLayout:R,layoutPane:R[c],layoutEdge:c,layoutRole:"toggler"}).css(n.togglers.cssReq).css(e.applyDemoStyles?n.togglers.cssDemo:{}).addClass(d+" "+d+m).hover(O,L).bind("mouseenter",Q).appendTo(l),e.togglerContent_open&&f("<span>"+e.togglerContent_open+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",
c).addClass("content content-open").css("display","none").appendTo(k),e.togglerContent_closed&&f("<span>"+e.togglerContent_closed+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(k),Qa(c));Ka(c);h.isVisible?Ga(c):(Ba(c),wa(c,!0))}});Ca()},ya=function(a,c){if(G()){var e=t[a],h=e.contentSelector,b=R[a],g=E[a],d;h&&(d=b.content=ca[a]=e.findNestedContent?g.find(h).eq(0):g.children(h).eq(0));d&&d.length?(d.data("layoutRole","content"),
d.data("layoutCSS")||d.data("layoutCSS",s(d,"height")),d.css(n.content.cssReq),e.applyDemoStyles&&(d.css(n.content.cssDemo),g.css(n.content.cssDemoPane)),g.css("overflowX").match(/(scroll|auto)/)&&g.css("overflow","hidden"),v[a].content={},!1!==c&&Aa(a)):b.content=ca[a]=!1}},Ka=function(a){var c=f.layout.plugins.draggable;a=a?a.split(","):n.borderPanes;f.each(a,function(a,h){var b=t[h];if(!c||!E[h]||!b.resizable)return b.resizable=!1,!0;var g=v[h],d=t.zIndexes,m=n[h],k="horz"==m.dir?"top":"left",
l=T[h],r=b.resizerClass,p=0,q,s,u=r+"-drag",w=r+"-"+h+"-drag",Ra=r+"-dragging",F=r+"-"+h+"-dragging",I=r+"-dragging-limit",A=r+"-"+h+"-dragging-limit",z=!1;g.isClosed||l.attr("title",b.tips.Resize).css("cursor",b.resizerCursor);l.draggable({containment:J[0],axis:"horz"==m.dir?"y":"x",delay:0,distance:1,grid:b.resizingGrid,helper:"clone",opacity:b.resizerDragOpacity,addClasses:!1,zIndex:d.resizer_drag,start:function(a,c){b=t[h];g=v[h];s=b.livePaneResizing;if(!1===y("ondrag_start",h))return!1;g.isResizing=
!0;v.paneResizing=h;x.clear(h+"_closeSlider");H(h);q=g.resizerPosition;p=c.position[k];l.addClass(u+" "+w);z=!1;ta(h,{resizing:!0})},drag:function(a,c){z||(c.helper.addClass(Ra+" "+F).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),z=!0,g.isSliding&&E[h].css("zIndex",d.pane_sliding));var m=0;c.position[k]<q.min?(c.position[k]=q.min,m=-1):c.position[k]>q.max&&(c.position[k]=q.max,m=1);m?(c.helper.addClass(I+" "+A),window.defaultStatus=0<m&&h.match(/(north|west)/)||0>m&&h.match(/(south|east)/)?
b.tips.maxSizeWarning:b.tips.minSizeWarning):(c.helper.removeClass(I+" "+A),window.defaultStatus="");s&&Math.abs(c.position[k]-p)>=b.liveResizingTolerance&&(p=c.position[k],e(a,c,h))},stop:function(a,c){f("body").enableSelection();window.defaultStatus="";l.removeClass(u+" "+w);g.isResizing=!1;v.paneResizing=!1;e(a,c,h,!0)}})});var e=function(a,c,e,h){var b=c.position,g=n[e];a=t[e];c=v[e];var d;switch(e){case "north":d=b.top;break;case "west":d=b.left;break;case "south":d=K.layoutHeight-b.top-a.spacing_open;
break;case "east":d=K.layoutWidth-b.left-a.spacing_open}d-=K.inset[g.side];h?(!1!==y("ondrag_end",e)&&La(e,d,!1,!0),na(!0),c.isSliding&&ta(e,{resizing:!0})):Math.abs(d-c.size)<a.liveResizingTolerance||(La(e,d,!1,!0),ha.each(Ma))}},Ma=function(){var a=f(this),c=a.data("layoutMask"),c=v[c];"IFRAME"==c.tagName&&c.isVisible&&a.css({top:c.offsetTop,left:c.offsetLeft,width:c.outerWidth,height:c.outerHeight})},ta=function(a,c){var e=n[a],h=["center"],b=t.zIndexes,g=f.extend({objectsOnly:!1,animation:!1,
resizing:!0,sliding:v[a].isSliding},c),d,m;g.resizing&&h.push(a);g.sliding&&h.push(n.oppositeEdge[a]);"horz"===e.dir&&(h.push("west"),h.push("east"));f.each(h,function(a,c){m=v[c];d=t[c];m.isVisible&&(d.maskObjects||!g.objectsOnly&&d.maskContents)&&Ha(c).each(function(){Ma.call(this);this.style.zIndex=m.isSliding?b.pane_sliding+1:b.pane_normal+1;this.style.display="block"})})},na=function(a){if(a||!v.paneResizing)ha.hide();else if(!a&&!f.isEmptyObject(v.panesSliding)){a=ha.length-1;for(var c,e;0<=
a;a--)e=ha.eq(a),c=e.data("layoutMask"),t[c].maskObjects||e.hide()}},Ha=function(a){for(var c=f([]),e,h=0,b=ha.length;h<b;h++)e=ha.eq(h),e.data("layoutMask")===a&&(c=c.add(e));if(c.length)return c;c=E[a];e=v[a];var h=t[a],b=t.zIndexes,g,d,m,k,l;if(h.maskContents||h.maskObjects){for(l=0;l<(h.maskObjects?2:1);l++)g=h.maskObjects&&0==l,d=document.createElement(g?"iframe":"div"),m=f(d).data("layoutMask",a),d.className="ui-layout-mask ui-layout-mask-"+a,k=d.style,k.background="#FFF",k.position="absolute",
k.display="block",g?(d.src="about:blank",d.frameborder=0,k.border=0,k.opacity=0,k.filter="Alpha(Opacity='0')"):(k.opacity=0.001,k.filter="Alpha(Opacity='1')"),"IFRAME"==e.tagName?(k.zIndex=b.pane_normal+1,J.append(d)):(m.addClass("ui-layout-mask-inside-pane"),k.zIndex=h.maskZindex||b.content_mask,k.top=0,k.left=0,k.width="100%",k.height="100%",c.append(d)),ha=ha.add(d);a=ha}else a=f([]);return a},Fa=function(a,c,e,h){if(G()){a=w.call(this,a);var b=E[a],g=ca[a],d=T[a],m=Z[a];b&&f.isEmptyObject(b.data())&&
(b=!1);g&&f.isEmptyObject(g.data())&&(g=!1);d&&f.isEmptyObject(d.data())&&(d=!1);m&&f.isEmptyObject(m.data())&&(m=!1);b&&b.stop(!0,!0);var k=t[a],l=z[a],n=f.isPlainObject(l)&&!f.isEmptyObject(l);h=void 0!==h?h:k.destroyChildren;n&&h&&(f.each(l,function(a,c){c.destroyed||c.destroy(!0);c.destroyed&&delete l[a]}),f.isEmptyObject(l)&&(l=z[a]=null,n=!1));b&&c&&!n?b.remove():b&&b[0]&&(c=k.paneClass,h=c+"-"+a,c=[c,c+"-open",c+"-closed",c+"-sliding",h,h+"-open",h+"-closed",h+"-sliding"],f.merge(c,N(b,!0)),
b.removeClass(c.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+X),n&&g?(g.width(g.width()),f.each(l,function(a,c){c.resizeAll()})):g&&g.css(g.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),b.data("layout")||b.css(b.data("layoutCSS")).removeData("layoutCSS"));m&&m.remove();d&&d.remove();R[a]=E[a]=ca[a]=T[a]=Z[a]=!1;e||xa()}},Da=function(a){var c=E[a],e=c[0].style;t[a].useOffscreenClose?
(c.data(n.offscreenReset)||c.data(n.offscreenReset,{left:e.left,right:e.right}),c.css(n.offscreenCSS)):c.hide().removeData(n.offscreenReset)},Ia=function(a){var c=E[a];a=t[a];var e=n.offscreenCSS,h=c.data(n.offscreenReset),b=c[0].style;c.show().removeData(n.offscreenReset);a.useOffscreenClose&&h&&(b.left==e.left&&(b.left=h.left),b.right==e.right&&(b.right=h.right))},za=function(a,c){if(G()){var e=w.call(this,a),h=t[e],b=v[e],g=E[e],d=T[e];"center"===e||!g||b.isHidden||v.initialized&&!1===y("onhide_start",
e)||(b.isSliding=!1,delete v.panesSliding[e],d&&d.hide(),!v.initialized||b.isClosed?(b.isClosed=!0,b.isHidden=!0,b.isVisible=!1,v.initialized||Da(e),qa("horz"===n[e].dir?"":"center"),(v.initialized||h.triggerEventsOnLoad)&&y("onhide_end",e)):(b.isHiding=!0,ga(e,!1,c)))}},ia=function(a,c,e,h){if(G()){a=w.call(this,a);var b=v[a],g=E[a];"center"!==a&&g&&b.isHidden&&!1!==y("onshow_start",a)&&(b.isShowing=!0,b.isSliding=!1,delete v.panesSliding[a],!1===c?ga(a,!0):ka(a,!1,e,h))}},ma=function(a,c){if(G()){var e=
u(a),h=w.call(this,a),b=v[h];e&&e.stopImmediatePropagation();b.isHidden?ia(h):b.isClosed?ka(h,!!c):ga(h)}},Na=function(a,c){var e=v[a];Da(a);e.isClosed=!0;e.isVisible=!1;c&&Ba(a)},ga=function(a,c,e,h){function b(){f.isMoving=!1;wa(g,!0);var a=n.oppositeEdge[g];v[a].noRoom&&(H(a),pa(a));h||!v.initialized&&!m.triggerEventsOnLoad||(l||y("onclose_end",g),l&&y("onshow_end",g),r&&y("onhide_end",g))}var g=w.call(this,a);if("center"!==g)if(!v.initialized&&E[g])Na(g,!0);else if(G()){var d=E[g],m=t[g],f=v[g],
k,l,r;J.queue(function(a){if(!d||!m.closable&&!f.isShowing&&!f.isHiding||!c&&f.isClosed&&!f.isShowing)return a();var h=!f.isShowing&&!1===y("onclose_start",g);l=f.isShowing;r=f.isHiding;delete f.isShowing;delete f.isHiding;if(h)return a();k=!e&&!f.isClosed&&"none"!=m.fxName_close;f.isMoving=!0;f.isClosed=!0;f.isVisible=!1;r?f.isHidden=!0:l&&(f.isHidden=!1);f.isSliding?Ja(g,!1):qa("horz"===n[g].dir?"":"center",!1);Ba(g);k?(ra(g,!0),d.hide(m.fxName_close,m.fxSettings_close,m.fxSpeed_close,function(){ra(g,
!1);f.isClosed&&b();a()})):(Da(g),b(),a())})}},Ba=function(a){if(T[a]){var c=T[a],e=Z[a],h=t[a],b=v[a],g=n[a].side,d=h.resizerClass,m=h.togglerClass,k="-"+a;c.css(g,K.inset[g]).removeClass(d+"-open "+d+k+"-open").removeClass(d+"-sliding "+d+k+"-sliding").addClass(d+"-closed "+d+k+"-closed");b.isHidden&&c.hide();h.resizable&&f.layout.plugins.draggable&&c.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");e&&(e.removeClass(m+"-open "+m+k+"-open").addClass(m+
"-closed "+m+k+"-closed").attr("title",h.tips.Open),e.children(".content-open").hide(),e.children(".content-closed").css("display","block"));Oa(a,!1);v.initialized&&Ca()}},ka=function(a,c,e,h){function b(){f.isMoving=!1;C(g);f.isSliding||qa("vert"==n[g].dir?"center":"",!1);Ga(g)}if(G()){var g=w.call(this,a),d=E[g],m=t[g],f=v[g],k,l;"center"!==g&&J.queue(function(a){if(!d||!m.resizable&&!m.closable&&!f.isShowing||f.isVisible&&!f.isSliding)return a();if(f.isHidden&&!f.isShowing)a(),ia(g,!0);else{f.autoResize&&
f.size!=m.size?sa(g,m.size,!0,!0,!0):H(g,c);var n=y("onopen_start",g);if("abort"===n)return a();"NC"!==n&&H(g,c);if(f.minSize>f.maxSize)return Oa(g,!1),!h&&m.tips.noRoomToOpen&&alert(m.tips.noRoomToOpen),a();c?Ja(g,!0):f.isSliding?Ja(g,!1):m.slidable&&wa(g,!1);f.noRoom=!1;pa(g);l=f.isShowing;delete f.isShowing;k=!e&&f.isClosed&&"none"!=m.fxName_open;f.isMoving=!0;f.isVisible=!0;f.isClosed=!1;l&&(f.isHidden=!1);k?(ra(g,!0),d.show(m.fxName_open,m.fxSettings_open,m.fxSpeed_open,function(){ra(g,!1);f.isVisible&&
b();a()})):(Ia(g),b(),a())}})}},Ga=function(a,c){var e=E[a],h=T[a],b=Z[a],g=t[a],d=v[a],m=n[a].side,k=g.resizerClass,l=g.togglerClass,p="-"+a;h.css(m,K.inset[m]+D(a)).removeClass(k+"-closed "+k+p+"-closed").addClass(k+"-open "+k+p+"-open");d.isSliding?h.addClass(k+"-sliding "+k+p+"-sliding"):h.removeClass(k+"-sliding "+k+p+"-sliding");L(0,h);g.resizable&&f.layout.plugins.draggable?h.draggable("enable").css("cursor",g.resizerCursor).attr("title",g.tips.Resize):d.isSliding||h.css("cursor","default");
b&&(b.removeClass(l+"-closed "+l+p+"-closed").addClass(l+"-open "+l+p+"-open").attr("title",g.tips.Close),L(0,b),b.children(".content-closed").hide(),b.children(".content-open").css("display","block"));Oa(a,!d.isSliding);f.extend(d,r(e));v.initialized&&(Ca(),Aa(a,!0));!c&&(v.initialized||g.triggerEventsOnLoad)&&e.is(":visible")&&(y("onopen_end",a),d.isShowing&&y("onshow_end",a),v.initialized&&y("onresize_end",a))},ea=function(a){function c(){b.isClosed?b.isMoving||ka(h,!0):Ja(h,!0)}if(G()){var e=
u(a),h=w.call(this,a),b=v[h];a=t[h].slideDelay_open;"center"!==h&&(e&&e.stopImmediatePropagation(),b.isClosed&&e&&"mouseenter"===e.type&&0<a?x.set(h+"_openSlider",c,a):c())}},la=function(a){function c(){b.isClosed?Ja(h,!1):b.isMoving||ga(h)}if(G()){var e=u(a),h=w.call(this,a);a=t[h];var b=v[h],g=b.isMoving?1E3:300;"center"===h||b.isClosed||b.isResizing||("click"===a.slideTrigger_close?c():a.preventQuickSlideClose&&b.isMoving||a.preventPrematureSlideClose&&e&&f.layout.isMouseOverElem(e,E[h])||(e?x.set(h+
"_closeSlider",c,d(a.slideDelay_close,g)):c()))}},ra=function(a,c){var e=E[a],h=v[a],b=t[a],g=t.zIndexes;c?(ta(a,{animation:!0,objectsOnly:!0}),e.css({zIndex:g.pane_animate}),"south"==a?e.css({top:K.inset.top+K.innerHeight-e.outerHeight()}):"east"==a&&e.css({left:K.inset.left+K.innerWidth-e.outerWidth()})):(na(),e.css({zIndex:h.isSliding?g.pane_sliding:g.pane_normal}),"south"==a?e.css({top:"auto"}):"east"!=a||e.css("left").match(/\-99999/)||e.css({left:"auto"}),l.msie&&b.fxOpacityFix&&"slide"!=b.fxName_open&&
e.css("filter")&&1==e.css("opacity")&&e[0].style.removeAttribute("filter"))},wa=function(a,c){var e=t[a],h=T[a],b=e.slideTrigger_open.toLowerCase();if(h&&(!c||e.slidable)){b.match(/mouseover/)?b=e.slideTrigger_open="mouseenter":b.match(/(click|dblclick|mouseenter)/)||(b=e.slideTrigger_open="click");if(e.resizerDblClickToggle&&b.match(/click/))h[c?"unbind":"bind"]("dblclick."+X,ma);h[c?"bind":"unbind"](b+"."+X,ea).css("cursor",c?e.sliderCursor:"default").attr("title",c?e.tips.Slide:"")}},Ja=function(a,
c){function e(c){x.clear(a+"_closeSlider");c.stopPropagation()}var h=t[a],b=v[a],g=t.zIndexes,d=h.slideTrigger_close.toLowerCase(),m=c?"bind":"unbind",f=E[a],k=T[a];x.clear(a+"_closeSlider");c?(b.isSliding=!0,v.panesSliding[a]=!0,wa(a,!1)):(b.isSliding=!1,delete v.panesSliding[a]);f.css("zIndex",c?g.pane_sliding:g.pane_normal);k.css("zIndex",c?g.pane_sliding+2:g.resizer_normal);d.match(/(click|mouseleave)/)||(d=h.slideTrigger_close="mouseleave");k[m](d,la);"mouseleave"===d&&(f[m]("mouseleave."+X,
la),k[m]("mouseenter."+X,e),f[m]("mouseenter."+X,e));c?"click"!==d||h.resizable||(k.css("cursor",c?h.sliderCursor:"default"),k.attr("title",c?h.tips.Close:"")):x.clear(a+"_closeSlider")},pa=function(a,c,e,h){c=t[a];var b=v[a],g=n[a],d=E[a],m=T[a],k="vert"===g.dir,l=!1;if("center"===a||k&&b.noVerticalRoom)(l=0<=b.maxHeight)&&b.noRoom?(Ia(a),m&&m.show(),b.isVisible=!0,b.noRoom=!1,k&&(b.noVerticalRoom=!1),C(a)):l||b.noRoom||(Da(a),m&&m.hide(),b.isVisible=!1,b.noRoom=!0);"center"!==a&&(b.minSize<=b.maxSize?
(b.size>b.maxSize?sa(a,b.maxSize,e,!0,h):b.size<b.minSize?sa(a,b.minSize,e,!0,h):m&&b.isVisible&&d.is(":visible")&&(e=b.size+K.inset[g.side],f.layout.cssNum(m,g.side)!=e&&m.css(g.side,e)),b.noRoom&&(b.wasOpen&&c.closable?c.autoReopen?ka(a,!1,!0,!0):b.noRoom=!1:ia(a,b.wasOpen,!0,!0))):b.noRoom||(b.noRoom=!0,b.wasOpen=!b.isClosed&&!b.isSliding,b.isClosed||(c.closable?ga(a,!0,!0):za(a,!0))))},La=function(a,c,e,h,b){if(G()){a=w.call(this,a);var g=t[a],d=v[a];b=b||g.livePaneResizing&&!d.isResizing;"center"!==
a&&(d.autoResize=!1,sa(a,c,e,h,b))}},sa=function(a,c,e,h,g){function m(){for(var a="width"===z?u.outerWidth():u.outerHeight(),a=[{pane:k,count:1,target:c,actual:a,correct:c===a,attempt:c,cssSize:B}],h=a[0],b={},l="Inaccurate size after resizing the "+k+"-pane.";!h.correct;){b={pane:k,count:h.count+1,target:c};b.attempt=h.actual>c?d(0,h.attempt-(h.actual-c)):d(0,h.attempt+(c-h.actual));b.cssSize=("horz"==n[k].dir?q:p)(E[k],b.attempt);u.css(z,b.cssSize);b.actual="width"==z?u.outerWidth():u.outerHeight();
b.correct=c===b.actual;1===a.length&&(A(l,!1,!0),A(h,!1,!0));A(b,!1,!0);if(3<a.length)break;a.push(b);h=a[a.length-1]}s.size=c;f.extend(s,r(u));s.isVisible&&u.is(":visible")&&(I&&I.css(x,c+K.inset[x]),Aa(k));!e&&!N&&v.initialized&&s.isVisible&&y("onresize_end",k);e||(s.isSliding||qa("horz"==n[k].dir?"":"center",N,g),Ca());h=n.oppositeEdge[k];c<ba&&v[h].noRoom&&(H(h),pa(h,!1,e));1<a.length&&A(l+"\nSee the Error Console for details.",!0,!0)}if(G()){var k=w.call(this,a),l=t[k],s=v[k],u=E[k],I=T[k],x=
n[k].side,z=n[k].sizeType.toLowerCase(),N=s.isResizing&&!l.triggerEventsDuringLiveResize,D=!0!==h&&l.animatePaneSizing,ba,B;"center"!==k&&J.queue(function(a){H(k);ba=s.size;c=F(k,c);c=d(c,F(k,l.minSize));c=b(c,s.maxSize);if(c<s.minSize)a(),pa(k,!1,e);else{if(!g&&c===ba)return a();s.newSize=c;!e&&v.initialized&&s.isVisible&&y("onresize_start",k);B=("horz"==n[k].dir?q:p)(E[k],c);if(D&&u.is(":visible")){var h=f.layout.effects.size[k]||f.layout.effects.size.all,h=l.fxSettings_size.easing||h.easing,r=
t.zIndexes,w={};w[z]=B+"px";s.isMoving=!0;u.css({zIndex:r.pane_animate}).show().animate(w,l.fxSpeed_size,h,function(){u.css({zIndex:s.isSliding?r.pane_sliding:r.pane_normal});s.isMoving=!1;delete s.newSize;m();a()})}else u.css(z,B),delete s.newSize,u.is(":visible")?m():s.size=c,a()}})}},qa=function(a,c,e){a=(a?a:"east,west,center").split(",");f.each(a,function(a,h){if(E[h]){var b=t[h],g=v[h],m=E[h],k=!0,n={},s=f.layout.showInvisibly(m),u={top:D("north",!0),bottom:D("south",!0),left:D("west",!0),right:D("east",
!0),width:0,height:0};u.width=K.innerWidth-u.left-u.right;u.height=K.innerHeight-u.bottom-u.top;u.top+=K.inset.top;u.bottom+=K.inset.bottom;u.left+=K.inset.left;u.right+=K.inset.right;f.extend(g,r(m));if("center"===h){if(!e&&g.isVisible&&u.width===g.outerWidth&&u.height===g.outerHeight)return m.css(s),!0;f.extend(g,M(h),{maxWidth:u.width,maxHeight:u.height});n=u;g.newWidth=n.width;g.newHeight=n.height;n.width=p(m,n.width);n.height=q(m,n.height);k=0<=n.width&&0<=n.height;if(!v.initialized&&b.minWidth>
u.width){var b=b.minWidth-g.outerWidth,u=t.east.minSize||0,w=t.west.minSize||0,I=v.east.size,F=v.west.size,z=I,x=F;0<b&&v.east.isVisible&&I>u&&(z=d(I-u,I-b),b-=I-z);0<b&&v.west.isVisible&&F>w&&(x=d(F-w,F-b),b-=F-x);if(0===b){I&&I!=u&&sa("east",z,!0,!0,e);F&&F!=w&&sa("west",x,!0,!0,e);qa("center",c,e);m.css(s);return}}}else{g.isVisible&&!g.noVerticalRoom&&f.extend(g,r(m),M(h));if(!e&&!g.noVerticalRoom&&u.height===g.outerHeight)return m.css(s),!0;n.top=u.top;n.bottom=u.bottom;g.newSize=u.height;n.height=
q(m,u.height);g.maxHeight=n.height;k=0<=g.maxHeight;k||(g.noVerticalRoom=!0)}k?(!c&&v.initialized&&y("onresize_start",h),m.css(n),"center"!==h&&Ca(h),!g.noRoom||g.isClosed||g.isHidden||pa(h),g.isVisible&&(f.extend(g,r(m)),v.initialized&&Aa(h))):!g.noRoom&&g.isVisible&&pa(h);m.css(s);delete g.newSize;delete g.newWidth;delete g.newHeight;if(!g.isVisible)return!0;"center"===h&&(g=l.isIE6||!l.boxModel,E.north&&(g||"IFRAME"==v.north.tagName)&&E.north.css("width",p(E.north,K.innerWidth)),E.south&&(g||"IFRAME"==
v.south.tagName)&&E.south.css("width",p(E.south,K.innerWidth)));!c&&v.initialized&&y("onresize_end",h)}})},xa=function(a){w(a);if(J.is(":visible"))if(v.initialized){if(!0===a&&f.isPlainObject(t.outset)&&J.css(t.outset),f.extend(K,r(J,t.inset)),K.outerHeight){!0===a&&va();if(!1===y("onresizeall_start"))return!1;var c,e,h;f.each(["south","north","east","west"],function(a,c){E[c]&&(e=t[c],h=v[c],h.autoResize&&h.size!=e.size?sa(c,e.size,!0,!0,!0):(H(c),pa(c,!1,!0,!0)))});qa("",!0,!0);Ca();f.each(n.allPanes,
function(a,e){(c=E[e])&&v[e].isVisible&&y("onresize_end",e)});y("onresizeall_end")}}else I()},Pa=function(a,c){var e=w.call(this,a);t[e].resizeChildren&&(c||U(e),e=z[e],f.isPlainObject(e)&&f.each(e,function(a,c){c.destroyed||c.resizeAll()}))},Aa=function(a,c){if(G()){var e=w.call(this,a),e=e?e.split(","):n.allPanes;f.each(e,function(a,e){function h(a){return d(k.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function b(){var a=t[e].contentIgnoreSelector,a=m.nextAll().not(".ui-layout-mask").not(a||
":lt(0)"),c=a.filter(":visible"),g=c.filter(":last");l={top:m[0].offsetTop,height:m.outerHeight(),numFooters:a.length,hiddenFooters:a.length-c.length,spaceBelow:0};l.spaceAbove=l.top;l.bottom=l.top+l.height;l.spaceBelow=g.length?g[0].offsetTop+g.outerHeight()-l.bottom+h(g):h(m)}var g=E[e],m=ca[e],f=t[e],k=v[e],l=k.content;if(!g||!m||!g.is(":visible"))return!0;if(!m.length&&(ya(e,!1),!m))return;if(!1!==y("onsizecontent_start",e)){if(!k.isMoving&&!k.isResizing||f.liveContentResizing||c||void 0==l.top)b(),
0<l.hiddenFooters&&"hidden"===g.css("overflow")&&(g.css("overflow","visible"),b(),g.css("overflow","hidden"));g=k.innerHeight-(l.spaceAbove-k.css.paddingTop)-(l.spaceBelow-k.css.paddingBottom);m.is(":visible")&&l.height==g||(B(m,g,!0),l.height=g);v.initialized&&y("onsizecontent_end",e)}})}},Ca=function(e){e=(e=w.call(this,e))?e.split(","):n.borderPanes;f.each(e,function(e,h){var b=t[h],g=v[h],d=E[h],m=T[h],k=Z[h],l;if(d&&m){var r=n[h].dir,s=g.isClosed?"_closed":"_open",u=b["spacing"+s],w=b["togglerAlign"+
s],s=b["togglerLength"+s],I;if(0===u)m.hide();else{g.noRoom||g.isHidden||m.show();"horz"===r?(I=K.innerWidth,g.resizerLength=I,d=f.layout.cssNum(d,"left"),m.css({width:p(m,I),height:q(m,u),left:-9999<d?d:K.inset.left})):(I=d.outerHeight(),g.resizerLength=I,m.css({height:q(m,I),width:p(m,u),top:K.inset.top+D("north",!0)}));L(b,m);if(k){if(0===s||g.isSliding&&b.hideTogglerOnSlide){k.hide();return}k.show();if(!(0<s)||"100%"===s||s>I)s=I,w=0;else if(c(w))switch(w){case "top":case "left":w=0;break;case "bottom":case "right":w=
I-s;break;default:w=a((I-s)/2)}else d=parseInt(w,10),w=0<=w?d:I-s+d;if("horz"===r){var F=p(k,s);k.css({width:F,height:q(k,u),left:w,top:0});k.children(".content").each(function(){l=f(this);l.css("marginLeft",a((F-l.outerWidth())/2))})}else{var y=q(k,s);k.css({height:y,width:p(k,u),top:w,left:0});k.children(".content").each(function(){l=f(this);l.css("marginTop",a((y-l.outerHeight())/2))})}L(0,k)}v.initialized||!b.initHidden&&!g.isHidden||(m.hide(),k&&k.hide())}}})},Qa=function(a){if(G()){var c=w.call(this,
a);a=Z[c];var e=t[c];a&&(e.closable=!0,a.bind("click."+X,function(a){a.stopPropagation();ma(c)}).css("visibility","visible").css("cursor","pointer").attr("title",v[c].isClosed?e.tips.Open:e.tips.Close).show())}},Oa=function(a,c){f.layout.plugins.buttons&&f.each(v[a].pins,function(e,h){f.layout.buttons.setPinState(R,f(h),a,c)})},J=f(this).eq(0);if(!J.length)return A(t.errors.containerMissing);if(J.data("layoutContainer")&&J.data("layout"))return J.data("layout");var E={},ca={},T={},Z={},ha=f([]),K=
v.container,X=v.id,R={options:t,state:v,container:J,panes:E,contents:ca,resizers:T,togglers:Z,hide:za,show:ia,toggle:ma,open:ka,close:ga,slideOpen:ea,slideClose:la,slideToggle:function(a){a=w.call(this,a);ma(a,!0)},setSizeLimits:H,_sizePane:sa,sizePane:La,sizeContent:Aa,swapPanes:function(a,c){function e(a){var c=E[a],h=ca[a];return c?{pane:a,P:c?c[0]:!1,C:h?h[0]:!1,state:f.extend(!0,{},v[a]),options:f.extend(!0,{},t[a])}:!1}function h(a,c){if(a){var e=a.P,b=a.C,g=a.pane,m=n[c],l=f.extend(!0,{},v[c]),
r=t[c],p={resizerCursor:r.resizerCursor};f.each(["fxName","fxSpeed","fxSettings"],function(a,c){p[c+"_open"]=r[c+"_open"];p[c+"_close"]=r[c+"_close"];p[c+"_size"]=r[c+"_size"]});E[c]=f(e).data({layoutPane:R[c],layoutEdge:c}).css(n.hidden).css(m.cssReq);ca[c]=b?f(b):!1;t[c]=f.extend(!0,{},a.options,p);v[c]=f.extend(!0,{},a.state);e.className=e.className.replace(RegExp(r.paneClass+"-"+g,"g"),r.paneClass+"-"+c);Ea(c);m.dir!=n[g].dir?(e=k[c]||0,H(c),e=d(e,v[c].minSize),La(c,e,!0,!0)):T[c].css(m.side,
K.inset[m.side]+(v[c].isVisible?D(c):0));a.state.isVisible&&!l.isVisible?Ga(c,!0):(Ba(c),wa(c,!0));a=null}}if(G()){var b=w.call(this,a);v[b].edge=c;v[c].edge=b;if(!1===y("onswap_start",b)||!1===y("onswap_start",c))v[b].edge=b,v[c].edge=c;else{var g=e(b),m=e(c),k={};k[b]=g?g.state.size:0;k[c]=m?m.state.size:0;E[b]=!1;E[c]=!1;v[b]={};v[c]={};Z[b]&&Z[b].remove();Z[c]&&Z[c].remove();T[b]&&T[b].remove();T[c]&&T[c].remove();T[b]=T[c]=Z[b]=Z[c]=!1;h(g,c);h(m,b);g=m=k=null;E[b]&&E[b].css(n.visible);E[c]&&
E[c].css(n.visible);xa();y("onswap_end",b);y("onswap_end",c)}}},showMasks:ta,hideMasks:na,initContent:ya,addPane:Y,removePane:Fa,createChildren:V,refreshChildren:U,enableClosable:Qa,disableClosable:function(a,c){if(G()){var e=w.call(this,a),h=Z[e];h&&(t[e].closable=!1,v[e].isClosed&&ka(e,!1,!0),h.unbind("."+X).css("visibility",c?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(G()){a=w.call(this,a);var c=T[a];c&&c.data("draggable")&&(t[a].slidable=!0,v[a].isClosed&&
wa(a,!0))}},disableSlidable:function(a){if(G()){a=w.call(this,a);var c=T[a];c&&(t[a].slidable=!1,v[a].isSliding?ga(a,!1,!0):(wa(a,!1),c.css("cursor","default").attr("title",""),L(null,c[0])))}},enableResizable:function(a){if(G()){a=w.call(this,a);var c=T[a],e=t[a];c&&c.data("draggable")&&(e.resizable=!0,c.draggable("enable"),v[a].isClosed||c.css("cursor",e.resizerCursor).attr("title",e.tips.Resize))}},disableResizable:function(a){if(G()){a=w.call(this,a);var c=T[a];c&&c.data("draggable")&&(t[a].resizable=
!1,c.draggable("disable").css("cursor","default").attr("title",""),L(null,c[0]))}},allowOverflow:m,resetOverflow:k,destroy:function(a,c){f(window).unbind("."+X);f(document).unbind("."+X);"object"===typeof a?w(a):c=a;J.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(t.containerClass).unbind("."+X);ha.remove();f.each(n.allPanes,function(a,e){Fa(e,!1,!0,c)});J.data("layoutCSS")&&!J.data("layoutRole")&&J.css(J.data("layoutCSS")).removeData("layoutCSS");"BODY"===K.tagName&&
(J=f("html")).data("layoutCSS")&&J.css(J.data("layoutCSS")).removeData("layoutCSS");e(R,f.layout.onDestroy);ba();for(var h in R)h.match(/^(container|options)$/)||delete R[h];R.destroyed=!0;return R},initPanes:G,resizeAll:xa,runCallbacks:y,hasParentLayout:!1,children:z,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===function(){ja();var a=t,c=v;c.creatingLayout=!0;e(R,f.layout.onCreate);if(!1===y("onload_start"))return"cancel";var h=J[0],b=f("html"),g=K.tagName=h.tagName,d=K.id=h.id,m=
K.className=h.className,h=t,k=h.name,n={},p=J.data("parentLayout"),q=J.data("layoutEdge"),u=p&&q,w=f.layout.cssNum,F;K.ref=(h.name?h.name+" layout / ":"")+g+(d?"#"+d:m?".["+m+"]":"");K.isBody="BODY"===g;u||K.isBody||(g=J.closest("."+f.layout.defaults.panes.paneClass),p=g.data("parentLayout"),q=g.data("layoutEdge"),u=p&&q);J.data({layout:R,layoutContainer:X}).addClass(h.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(k in g)J.bind("layout"+k.toLowerCase()+"."+
X,R[g[k]||k]);u&&(R.hasParentLayout=!0,p.refreshChildren(q,R));J.data("layoutCSS")||(K.isBody?(J.data("layoutCSS",f.extend(s(J,"position,margin,padding,border"),{height:J.css("height"),overflow:J.css("overflow"),overflowX:J.css("overflowX"),overflowY:J.css("overflowY")})),b.data("layoutCSS",f.extend(s(b,"padding"),{height:"auto",overflow:b.css("overflow"),overflowX:b.css("overflowX"),overflowY:b.css("overflowY")}))):J.data("layoutCSS",s(J,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));
try{n={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};J.css(n);h.inset&&!f.isPlainObject(h.inset)&&(F=parseInt(h.inset,10)||0,h.inset={top:F,bottom:F,left:F,right:F});if(K.isBody)h.outset?f.isPlainObject(h.outset)||(F=parseInt(h.outset,10)||0,h.outset={top:F,bottom:F,left:F,right:F}):h.outset={top:w(b,"paddingTop"),bottom:w(b,"paddingBottom"),left:w(b,"paddingLeft"),right:w(b,"paddingRight")},b.css(n).css({height:"100%",border:"none",padding:0,margin:0}),l.isIE6?(J.css({width:"100%",height:"100%",
border:"none",padding:0,margin:0,position:"relative"}),h.inset||(h.inset=r(J).inset)):(J.css({width:"auto",height:"auto",margin:0,position:"absolute"}),J.css(h.outset)),f.extend(K,r(J,h.inset));else{var z=J.css("position");z&&z.match(/(fixed|absolute|relative)/)||J.css("position","relative");J.is(":visible")&&(f.extend(K,r(J,h.inset)),1>K.innerHeight&&A(h.errors.noContainerHeight.replace(/CONTAINER/,K.ref)))}w(J,"minWidth")&&J.parent().css("overflowX","auto");w(J,"minHeight")&&J.parent().css("overflowY",
"auto")}catch(x){}aa();f(window).bind("unload."+X,ba);e(R,f.layout.onLoad);a.initPanes&&I();delete c.creatingLayout;return v.initialized}()?null:R}})(jQuery);
(function(f){"function"===typeof define&&define.amd?define(["jquery"],f):"object"===typeof exports?f(require("jquery")):f(jQuery)})(function(f){function b(a){return c.raw?a:encodeURIComponent(a)}function d(e,b){var h;if(c.raw)h=e;else a:{var d=e;0===d.indexOf('"')&&(d=d.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{d=decodeURIComponent(d.replace(a," "));h=c.json?JSON.parse(d):d;break a}catch(k){}h=void 0}return f.isFunction(b)?b(h):h}var a=/\+/g,c=f.cookie=function(a,g,h){if(void 0!==
g&&!f.isFunction(g)){h=f.extend({},c.defaults,h);if("number"===typeof h.expires){var m=h.expires,k=h.expires=new Date;k.setTime(+k+864E5*m)}return document.cookie=[b(a),"=",b(c.json?JSON.stringify(g):String(g)),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}h=a?void 0:{};for(var m=document.cookie?document.cookie.split("; "):[],k=0,l=m.length;k<l;k++){var n=m[k].split("="),p;p=n.shift();p=c.raw?p:decodeURIComponent(p);
n=n.join("=");if(a&&a===p){h=d(n,g);break}a||void 0===(n=d(n))||(h[p]=n)}return h};c.defaults={};f.removeCookie=function(a,c){if(void 0===f.cookie(a))return!1;f.cookie(a,"",f.extend({},c,{expires:-1}));return!f.cookie(a)}});var __extends=this&&this.__extends||function(f,b){function d(){this.constructor=f}for(var a in b)b.hasOwnProperty(a)&&(f[a]=b[a]);d.prototype=b.prototype;f.prototype=new d};window.__extends=__extends;var RQArray=function(f){function b(){f.apply(this,arguments)}__extends(b,f);return b}(Array);
window.RQArray=RQArray;
(function(f,b){function d(a){var c=a||window.event,e=[].slice.call(arguments,1),g=0,d=0,p=0;a=f.event.fix(c);a.type="mousewheel";c.wheelDelta&&(g=c.wheelDelta/120);c.detail&&(g=-c.detail/3);p=g;c.axis!==b&&c.axis===c.HORIZONTAL_AXIS&&(p=0,d=-1*g);c.wheelDeltaY!==b&&(p=c.wheelDeltaY/120);c.wheelDeltaX!==b&&(d=-1*c.wheelDeltaX/120);e.unshift(a,g,d,p);return(f.event.dispatch||f.event.handle).apply(this,e)}var a=["DOMMouseScroll","mousewheel"];if(f.event.fixHooks)for(var c=a.length;c;)f.event.fixHooks[a[--c]]=f.event.mouseHooks;
f.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var c=a.length;c;)this.addEventListener(a[--c],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var c=a.length;c;)this.removeEventListener(a[--c],d,!1);else this.onmousewheel=null}};f.fn.mousewheel==b&&f.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});if(f.observable==b){f.observable=
function(a){return new g(a)};var e=[].splice,g=f.observable.Observable=function(a){this.data=a};g.prototype={data:null,_set:function(a,c){var e=a.split("."),b=e.pop();this._get(e)[b]=c},_get:function(a){a="string"===f.type(a)?a.split("."):a;var c,e=this.data;if(0===a.length)return e;for(;1<a.length;)c=a.shift(),e=e[c];return e[a[0]]},property:function(a,c){if("object"===f.type(a)){var e={},b={},g=!1,d;for(d in a){var q=this._get(d);q!=a[d]&&(g=!0,e[d]=q,b[d]=a[d])}if(g)return this._property(e,b)}else{if(1==
arguments.length)return this._get(a);q=this._get(a);if(q!=c)return e={},e[a]=q,b={},b[a]=c,this._property(e,b)}return this},_property:function(a,c){var e=this;f.each(c,function(a,c){e._set(a,c)});return this._trigger("change",{oldValues:a,newValues:c})},insert:function(a,c){"object"===f.type(a)?(c=[a],a=this.data.length):f.isArray(c)||(c=[c]);return this._insert(a,c)},_insert:function(a,c){if(this.data)return this.data.splice.apply(this.data,[a,0].concat(c)),this._trigger("insert",{index:a,items:c});
console.error("Can't insert item into '"+this.data+"'")},remove:function(a,c){var e=!1;if("array"===f.type(a)){var b,g,d,q,e=[],r=a;b=0;for(d=this.data.length;b<d;b++)for(g=0,q=r.length;g<q;g++)if(r[g]===this.data[b]){e.push({index:b,item:this.data[g]});break}b=g=0;for(d=e.length;b<d;b++)this.data.splice(e[b].index-g,1),g+=1;return this._trigger("remove",{items:e})}"number"===f.type(a)&&a<=this.data.length-1&&(e=!0);if("object"===f.type(a))for(b=0,d=this.data.length;b<d;b++)if(this.data[b]===a){a=
b;e=!0;break}c||(c=1);return this._remove(a,c,e)},_remove:function(a,c,e){if(!0==e)return e=this.data.slice(a,a+c),this.data.splice(a,c),this._trigger("remove",{index:a,items:e})},replaceAll:function(a){var c={oldItems:this.data.slice(0),newItems:a};e.apply(this.data,[0,this.data.length].concat(a));return this._trigger("replaceAll",c)}};f.each({bind:"bind",unbind:"unbind",_trigger:"triggerHandler"},function(a,c){g.prototype[a]=function(){var a=f([this.data]);a[c].apply(a,arguments);return this}})}})(jQuery);
void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){RadiantQ.RQ_CollectionChangeNotifier=function(b){RQArray.call(this);if(b&&b.length){this.length=b.length;for(var d=0,a=b.length;d<a;d++)this[d]=b[d]}this.CollectionChanged=new ObjectEvent("CollectionChanged")};RadiantQ.RQ_CollectionChangeNotifier.prototype=new RQArray;RadiantQ.RQ_CollectionChangeNotifier.prototype.add=function(b){this.push(b)};RadiantQ.RQ_CollectionChangeNotifier.prototype.reset=function(b){if(b&&b.length){this.clear();this.length=b.length;for(var d=0,a=b.length;d<a;d++)this[d]=
b[d];this.CollectionChanged.raise({type:"reset",sender:this,target:this},null)}else b&&(this.length=b.length)};RadiantQ.RQ_CollectionChangeNotifier.prototype.contains=function(b){return-1!=f.inArray(b,this)};RadiantQ.RQ_CollectionChangeNotifier.prototype.push=function(b){RQArray.prototype.push.call(this,b);this.triggerCollectionChanged({Action:"Add",NewItems:[b],index:this.length-1})};RadiantQ.RQ_CollectionChangeNotifier.prototype.insert=function(b,d){"number"==typeof b?this.splice(b,0,d):this.add(b)};
RadiantQ.RQ_CollectionChangeNotifier.prototype.splice=function(b,d,a){var c=[],e=[];void 0==a?c=RQArray.prototype.splice.call(this,b,d):(c=RQArray.prototype.splice.apply(this,arguments),e=this.slice(b,arguments.length-2+b));!1==RadiantQ.CanUseDefineProperty&&void 0!=this[b]&&delete this[this.length];if(a){var g={Action:"Add"};g.index=b;g.NewItems=0==e.length?a:e;this.triggerCollectionChanged(g)}d&&0<d&&(g={Action:"Remove"},g.index=b,g.OldItems=c,this.triggerCollectionChanged(g))};RadiantQ.RQ_CollectionChangeNotifier.prototype.merge=
function(b,d){if(!1==d instanceof Array||d instanceof RQArray)d=[d];var a=d.slice(0);a.splice(0,0,b,0);RQArray.prototype.splice.apply(this,a);d&&(a={Action:"Add"},a.index=b,a.NewItems=d instanceof Array||d instanceof RQArray?d:[d],this.triggerCollectionChanged(a))};RadiantQ.RQ_CollectionChangeNotifier.prototype.pop=function(){var b=RQArray.prototype.pop.call(this);args={};b&&(args.Action="Remove",args.index=this.length,args.OldItems=[b]);this.triggerCollectionChanged(args);return b};RadiantQ.RQ_CollectionChangeNotifier.prototype.remove=
function(b){if("number"==typeof b)return this.splice(b,1);b=this.indexOf(b);if(-1!=b)return this.splice(b,1)};RadiantQ.RQ_CollectionChangeNotifier.prototype.clear=function(){this.splice(0,this.length)};RadiantQ.RQ_CollectionChangeNotifier.prototype.triggerCollectionChanged=function(b){var d={type:"",sender:this,target:this};"Add"==b.Action?(d.type="insert",b.items=b.NewItems):(d.type="remove",b.items=b.OldItems);this.CollectionChanged.raise(d,b)}})(jQuery);
(function(f){var b=f(document);if(f.fn.menu){f.jQContextMenu=function(e,g){this.options;var h=f.extend({selector:null,target:null,beforeContextMenu:null,itemClick:null,position:c},g);this.options=h;this.options.menuParent=null;this.options.menuElement=null;this.options.menuWidget=null;this.options.menuLayer=null;this.options.currentElement=null;b.on("contextmenu."+h.selector,h.selector,this.options,a.contextMenuHandler);d(this.options);this.hide=function(){"block"==this.options.menuParent.style("display")&&
a.hideMenu()};this.Dispose=function(){f(e).data("jQContextMenu",null);b.off("contextmenu."+h.selector)}};f.fn.jQContextMenu=function(a){var c=this.data("jQContextMenu");if(a.x&&a.y)this.first().trigger(jQuery.Event("contextmenu",{pageX:a.x,pageY:a.y}));else if("hide"==a&&c)c.hide();else if(void 0==c||void 0!=a.selector&&c.options.selector!=a.selector)c=new f.jQContextMenu(this,a),this.data("jQContextMenu",c),a.selector&&f(a.selector).data("jQContextMenu",c);return this};var d=function(c){var b=f(c.target),
h;0!=b.length?(c.menuElement=b,h=b.parent()):c.menuElement=f("<ul>");h&&"menuParent"==h[0].id?c.menuParent=h:(c.menuParent=f("<div id='menuParent' style='overflow: inherit; font-size: 12px; position: absolute;'>"),c.menuParent.append(c.menuElement).appendTo("body"),c.menuParent.hide(),c.menuParent.on("mouseleave",{options:c},a.onMenuMouseLeave),c.menuParent.on("mouseenter",{options:c},a.onMenuMouseEnter),c.menuElement.menu({select:a.menuSelectHandler}));c.menuWidget=c.menuElement.menu("instance");
b=f(window);c.menuLayer=f("#menuLayerDiv","body");0==c.menuLayer.length&&(c.menuLayer=f('<div id="menuLayerDiv" style="position:fixed; top:0; left:0; filter: alpha(opacity=0); opacity: 0; background-color: #000;"></div>'),c.menuLayer.css({height:b.height(),width:b.width(),display:"block"}),c.menuLayer.insertBefore(c.menuParent),c.menuLayer.on("contextmenu",{options:c},a.onLayerContextMenu),c.menuLayer.on("mousedown",{options:c},a.onLayerMouseDown),b.on("resize",{options:c},a.onWinResize),c.menuLayer.hide())},
a={options:null,contextMenuHandler:function(c){c.preventDefault();c.stopImmediatePropagation();var g=c.data;a.options=g;g.currentElement=f(c.currentTarget);g.menuWidget.target=f(c.target);0<=navigator.platform.toUpperCase().indexOf("MAC")&&g.currentElement.trigger("mouseup",[{shiftKey:c.shiftKey||!1}]);var h=c.pageX;c=c.pageY;g.beforeContextMenu&&"function"==typeof g.beforeContextMenu&&g.beforeContextMenu(g.currentElement,g.menuWidget);if(0!=g.menuElement[0].children.length){f(window);var d=b[0].body.scrollHeight,
k=b[0].body.scrollWidth,l=g.menuParent.height(),n=g.menuParent.width();h+n>k&&(h=k-n);c+l>d&&(c=d-l);g.position(g,h,c);h=0;for(c=g.currentElement;h=Math.max(h,parseInt(c.css("z-index"),10)||0),c=c.parent(),c&&c.length&&!(-1<"html body".indexOf(c.prop("nodeName").toLowerCase())););h+=1;g.menuParent.css({"z-index":h});g.menuLayer.css({"z-index":h});g.menuParent.show();g.menuLayer.show();g.menuElement.focus();b.on("keydown.jQContextMenu",a.onDocKeyDown)}},menuSelectHandler:function(c,b){if(0<f("ul",
b.item).length)return!1;a.options.itemClick&&"function"==typeof a.options.itemClick&&a.options.itemClick(a.options.currentElement,{event:c,items:b.item});a.hideMenu()},onLayerContextMenu:function(a){a.preventDefault();a.stopImmediatePropagation()},onLayerMouseDown:function(a){a.preventDefault();a.stopImmediatePropagation();opn=a.data.options;opn.menuParent.hide();f(this).hide();b.off("keydown.jQContextMenu")},onDocKeyDown:function(c){switch(c.keyCode){case 27:a.hideMenu()}},onMenuMouseEnter:function(a){a.data.options.menuElement.focus()},
onMenuMouseLeave:function(a){a.data.options.menuElement.blur()},onWinResize:function(a){var c=a.data.options;a=f(a.currentTarget);c.menuLayer.css({height:a.height(),width:a.width()})},hideMenu:function(){a.options.menuParent.hide();a.options.menuLayer.hide();b.off("keydown.jQContextMenu",a.onDocKeyDow)}},c=function(a,c,b){a.menuParent.css({top:b,left:c})}}})(jQuery);
(function(f){var b=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,a=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,c=/(?:^|:|,)(?:\s*\[)+/g,e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?Z/i,g=/\/Date\((\d+)(?:-\d+)?\)\//i,h=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?(\-|\+)\d{2}:\d{2}/,m=/\/Date\((-\d+)(?:-\d+)?\)\//i,k=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(:(\d{2})(\.\d*)?)/,l=/^(\d{4})-(\d{2})-(\d{2})/,n=/"(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:[.,](\d+))?Z"/gi,
p=/"\\\/Date\((\d+)(?:-\d+)?\)\\\/"/gi,q=/^(\d*.\d{2}:\d{2}:\d{2})$/,r=/^(\d{2}:\d{2}:\d{2})/,s=window.JSON&&window.JSON.parse?!0:!1,u=s&&"Y"===window.JSON.parse('{"x":9}',function(a,c){return"Y"});f.extend({parseJSON:function(w,t,v,z,x){try{RadiantQ.Gantt.Utils.InjectGetAndSetOnData.HoldTriggeringPropertyChange=!0;if("string"!==typeof w||!w)return null;null!=Date.prototype._toString&&-1==Date.prototype._toString.toString().indexOf("[native code]")&&console.error("Multiple references to 'date.js' is found. Correct this and ensure that there is only a single reference.");
w=f.trim(w);this.jsonDateConverter=function(a,c){var b=null;if("string"===typeof c&&(!x||0<=f.inArray(a,x))){if(q.test(c)||r.test(c))b=RQTimeSpan.parse(c);if(e.test(c)){b=new Date(c);if(isNaN(b)){var d=/^(\d{4})-(\d{2})-(\d{2})((T)(\d{2}):(\d{2})(:(\d{2})(\.\d*)?)?)?(Z)?$/;if(d="string"===typeof c&&c.match(d))b=new Date(+d[1],+d[2]-1,+d[3],+d[6]||0,+d[7]||0,+d[9]||0,parseInt(1E3*+d[10])||0),-1!=c.indexOf("Z")&&!0==v&&b.addMinutes(-(new Date).getTimezoneOffset())}"Invalid Date"!=b&&!0==v&&b.addMinutes(b.getTimezoneOffset())}else h.test(c)?
b=new Date(c):g.test(c)?b=new Date(parseInt(g.exec(c)[1],10)):m.test(c)?b=Date.MinValue:k.test(c)?b=Date.parse(c):l.test(c)&&(b=Date.parse(c))}return z&&(d=z.apply(this,[a,b||c]),null!=d)?d:b||c};if(b.test(w.replace(d,"@").replace(a,"]").replace(c,""))){if(u||s&&!0!==t)return window.JSON.parse(w,!0===t?this.jsonDateConverter:void 0);w=!0===t?w.replace(n,"new Date(parseInt('$1',10),parseInt('$2',10)-1,parseInt('$3',10),parseInt('$4',10),parseInt('$5',10),parseInt('$6',10),(function(s){return parseInt(s,10)||0;})('$7'))").replace(p,
"new Date($1)"):w;return(new Function("return "+w))()}f.error("Invalid JSON: "+w)}finally{RadiantQ.Gantt.Utils.InjectGetAndSetOnData.HoldTriggeringPropertyChange=!1}}})})(jQuery);"use strict";
(function(f){function b(a,c){this.type=a;this.fn=[];this._thisArgs=[];this.handlers=[];"function"==typeof c&&(this.handlers.push(new b.handlerInfo(this,c,this)),this.fn.push(c),this._thisArgs.push(this))}function d(a,c,e){this.event=a;this.fn=c;this.DataContext=e}b.prototype.isSubscribed=function(a){return a?-1==f.inArray(a,this.fn)?!1:!0:0<this.fn.length?!0:!1};b.prototype.raise=function(a,c){for(var e=this.handlers.slice(0),b=0;b<e.length;b++){var h=e[b];"function"==typeof h.fn&&h.fn.apply(h.DataContext,
arguments)}};b.prototype.subscribe=function(a,c){c=c||this._callee||this;var e=new b.handlerInfo(this,a,c);this.handlers.push(e);this.fn.push(a);this._thisArgs.push(c);return e};b.prototype.unsubscribe=function(a,c){if(c)for(var e=0;e<this._thisArgs.length;e++){if(this._thisArgs[e]===c&&this.fn[e]==a){this.handlers[e]._makeObjectsNull();this.fn.splice(e,1);this._thisArgs.splice(e,1);this.handlers.splice(e,1);break}}else for(e=0;e<this.fn.length;e++)if(this.fn[e]===a){this.fn.splice(e,1);this._thisArgs.splice(e,
1);this.handlers.splice(e,1);break}};b.prototype.Dispose=b.prototype.clear=function(){for(var a=this.handlers.slice(0),c=0;c<a.length;c++)a[c].Dispose();b.call(this,this.type)};b.prototype.IsEqual=function(a){var c=null,e=null;if(!this.isSubscribed()&&a.isSubscribed()||this.isSubscribed()&&!a.isSubscribed())return!1;if(this.isSubscribed()&&a.isSubscribed()){c=this.fn;e=a.fn;if(this.fn.length!=a.fn.length)return!1;for(a=0;a<c.length;a++)if(c[a]!=e[a])return!1}return!0};d.prototype.Dispose=function(){null!=
this.event&&this.event.unsubscribe(this.fn,this.DataContext);this._makeObjectsNull()};d.prototype._makeObjectsNull=function(){this.DataContext=this.fn=this.event=null};b.handlerInfo=d;window.ObjectEvent=b})(jQuery);
(function(f,b){Template=function(b,a){var c=b.replace(/\\\}/g,"__CURLY__").replace(/\$\{([^}]*)\}/g,"#=($1)#").split("#"),e="var x=";for(i=0;i<c.length;i++){var g;g=c[i];g=0===i%2?"'"+g.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'":"="===g.charAt(0)?"+("+g.substring(1)+")+":";"+g+";x+=";e+=g}e+=";return x;";e=e.replace("__CURLY__","}");c=new Function("data",e);return a?c(a):c};getHasValue=function(d,a){for(var c=a.split("."),
e=0;e<c.length;e++)"undefined"!=typeof d&&(d=d[c[e]+"_M"]?d[c[e]+"_M"]():d[c[e]]);if(!0==b.isFunction(d))return!0;if(void 0==d)return!1};Template.hasValueInWindow=function(b){return!1==getHasValue(window,b)?!1:!0};Template.getterCache={};Template.getter=function(b,a){if(""==b)return"";var c=null;null==Template.getterCache[b]&&(c=" if(d."+b+" != undefined)  if(typeof(d."+b+") ==='function')   return d."+b+"(); else return d."+b+";else if("+Template.hasValueInWindow(b)+" ){ if(typeof "+b+" === 'function')    return "+
b+"(d); else return "+b+";}else return null;",c=Function("d",c),Template.getterCache[b]=c);c=Template.getterCache[b];return a?c(a):c};Template.setterCache={};Template.setter=function(b,a,c){var e=null;null==Template.setterCache[b]&&(e=" if(d."+b+" != undefined) if(typeof(d."+b+") ==='function') d."+b+"(value);else d."+b+"= value;else if("+Template.hasValueInWindow(b)+" ){ if(typeof "+b+" === 'function') "+b+"(d,value); else "+b+"=value;}else d."+b+"= value;",e=Function("d","value",e),Template.setterCache[b]=
e);e=Template.setterCache[b];return a?e(a,c):e};f.Default={};f.Default.Template={};f.Template=Template;f.Default.Template.ProjectGanttExpandableTextBlockTemplate=function(b){var a=/data.Activity.ActivityName/g;return b?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${data.Activity_M().ActivityName_M()}</div>'.replace(a,
b):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${data.Activity_M().ActivityName_M()}</div>'};f.Default.Template.FlexyGanttExpandableTextBlockTemplate=
function(b){var a=/name/g;return b?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'.replace(a,
b):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'};
ExpanderOnclick=function(d,a){var c=b(d).closest("tr"),e=c.closest("table.ui-grid-body-table").find("tbody").data("VWGrid"),c=e.GetDataFromRow(c);c instanceof f.FlexyGantt.FlexyNodeData?(c.HierarchicalItem._forceToCreateNewChildList=!0,c.HierarchicalItem.IsExpanded(!c.HierarchicalItem.IsExpanded()),c.HierarchicalItem._forceToCreateNewChildList=!1,e.RefreshItem(c)):c.IsExpanded_M(!c.IsExpanded_M());void 0!=a.stopPropagation&&a.stopPropagation()}})(RadiantQ,jQuery);
function NotifyPropertyChanged(){this.PropertyChanged=new ObjectEvent("PropertyChanged")}NotifyPropertyChanged.prototype.OnPropertyChanged=function(f,b,d){d?this.PropertyChanged.raise(this,{PropertyName:f,value:b,context:d}):this.PropertyChanged.raise(this,{PropertyName:f,value:b})};NotifyPropertyChanged.prototype.Dispose=function(){this.PropertyChanged&&this.PropertyChanged.Dispose();this.PropertyChanged=null};
function Binding(f,b,d,a,c,e,g){var h=b.split(".");1<h.length&&(f=RadiantQ.Gantt.Utils.getChildObject(f,b),b=h[h.length-1]);h=a.split(".");1<h.length&&(d=RadiantQ.Gantt.Utils.getChildObject(f,a),a=h[h.length-1]);this.source=f;this.sourcePropertyName=b;this.targetPropertyName=a;this.sourceProperty=f[b+"_M"]?b+"_M":b;this.targetProperty=d[a+"_M"]?a+"_M":a;this.converterFn=c;this.ConvertBack=this.Convert=null;this.target=d;this.targetKOSubscriberInstance=this.sourceKOSubscriberInstance=null;this.bindingMode=
void 0==e?"OneWay":e;this.ConverterContext=g;null!=this.converterFn&&(this.Convert=c.Convert?c.Convert:null,this.ConvertBack=c.ConvertBack?c.ConvertBack:null);this.targetChanging=this.sourceChanging=!1;var m=this;this.SourcePropertyChangeListener=function(a,c){c.PropertyName==m.sourcePropertyName&&(m.sourceChanging=!0,!1==m.targetChanging&&m.updateTarget(),m.sourceChanging=!1)};this.TargetPropertyChangeListener=function(a,c){c.PropertyName==m.targetPropertyName&&(m.targetChanging=!0,!1==m.sourceChanging&&
m.updateSource(),m.targetChanging=!1)};this.subscribePropchangeNotifier();m.sourceChanging=!0;this.updateTarget.apply(this,arguments);m.sourceChanging=!1;this.Dispose=function(){this._sourcePropertyChangedHandler?(this._sourcePropertyChangedHandler.Dispose(),this._sourcePropertyChangedHandler=null):this.sourceKOSubscriberInstance&&(this.sourceKOSubscriberInstance.dispose(),this.sourceKOSubscriberInstance=null);this.bindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&(this._targetPropertyChangedHandler?
(this._targetPropertyChangedHandler.Dispose(),this._targetPropertyChangedHandler=null):this.targetKOSubscriberInstance&&(this.targetKOSubscriberInstance.dispose(),this.targetKOSubscriberInstance=null))}}
Binding.prototype.subscribePropchangeNotifier=function(){var f=this;"function"===typeof this.source[this.sourcePropertyName]&&this.source[this.sourcePropertyName].subscribe&&(this.sourceKOSubscriberInstance=this.source[this.sourcePropertyName].subscribe(function(b){Binding.prototype.updateTarget.apply(f,arguments)}.bind(this)));null==this.sourceKOSubscriberInstance&&this.source.PropertyChanged&&(this._sourcePropertyChangedHandler=this.source.PropertyChanged.subscribe(this.SourcePropertyChangeListener,
this));if(this.bindingMode==RadiantQ.Gantt.BindingMode.TwoWay){"function"===typeof this.target[this.targetPropertyName]&&this.target[this.targetPropertyName].subscribe&&(this.targetKOSubscriberInstance=this.target[this.targetPropertyName].subscribe(function(b){Binding.prototype.updateSource.apply(f,arguments)}.bind(this)));if(!this.target.PropertyChanged)throw Error("Binding should be used with a source that is of type NotifyPropertyChanged");null==this.targetKOSubscriberInstance&&(this._targetPropertyChangedHandler=
this.target.PropertyChanged.subscribe(this.TargetPropertyChangeListener));if(!this.ConvertBack&&this.Convert)throw Error("Two Way binding requires ConvertBack");}};Binding.prototype.updateTarget=function(){this.updateValue(this.source,this.sourceProperty,this.target,this.targetProperty,this.Convert)};Binding.prototype.updateSource=function(){this.updateValue(this.target,this.targetProperty,this.source,this.sourceProperty,this.ConvertBack)};
Binding.prototype.updateValue=function(f,b,d,a,c){var e=null,g=this.ConverterContext||this,e="function"===typeof f[b]?f[b]():f[b];null!=c&&(e=c.call(g,e,f,d));if("function"===typeof d[a])d[a](e);else d[a]=e};
(function(f){void 0==window.RadiantQ&&(window.RadiantQ={});"undefined"==typeof Function.prototype.bind&&(Function.prototype.bind=function(a,c){return void 0==c?f.proxy(this,a):f.proxy(this,a,c)});if(Object.defineProperty){RadiantQ.CanUseDefineProperty=!0;try{Object.defineProperty({},"test",{get:function(){return!0}})}catch(b){RadiantQ.CanUseDefineProperty=!1}}else RadiantQ.CanUseDefineProperty=!1;RadiantQ.Gantt={};RadiantQ.Gantt.Widget={};RadiantQ.Gantt.Utils={};RadiantQ.Gantt.TimeScaleType={Minutes:90,
Hours:180,Days:270,Weeks:360,Months:450,Years:540,Custom:630};RadiantQ.Gantt.RoundToOptions={None:"None",Auto:"Auto",Minute:"Minute",FifteenMinutes:"FifteenMinutes",ThirtyMinutes:"ThirtyMinutes",Hour:"Hour",HalfDay:"HalfDay",Day:"Day"};RadiantQ.Gantt.DependencyType={FinishToStart:"FinishToStart",StartToStart:"StartToStart",FinishToFinish:"FinishToFinish",StartToFinish:"StartToFinish",None:"None"};RadiantQ.Gantt.RowDragBehavior={DragRowHeader:1,DragEntireRow:2,DragElement:3};RadiantQ.Gantt.TimeUnitsCache=
function(){this._timeUnitsByRange=new RadiantQ.Gantt.Dictionary;this.GetRangeString=function(a,c){return a.toString()+"-"+c.toString()};this.SetTimeUnitsCacheForRange=function(a,c,b){a=this.GetRangeString(a,c);4<this._timeUnitsByRange.Keys.length&&this._timeUnitsByRange.Remove(this._timeUnitsByRange.Keys[0]);this._timeUnitsByRange.Add(a,b)};this.GetTimeUnitsCacheForRange=function(a,c){var b=this.GetRangeString(a,c);return this._timeUnitsByRange.GetItemByKey(b)};this.ClearTimeUnitsCacheForRange=function(a,
c){var b=this.GetRangeString(a,c);this._timeUnitsByRange.Remove(b)}};RadiantQ.Gantt.CustomTimeScaleTypeHint=function(a,c){this.EquivalentUnits=a;this.EquivalentType=c;this.Clone=function(){var a=new RadiantQ.Gantt.CustomTimeScaleTypeHint;a.EquivalentType=this.EquivalentType;a.EquivalentUnits=this.EquivalentUnits;return a};this.IsEqual=function(a){if(this instanceof RadiantQ.Gantt.CustomTimeScaleTypeHint&&a instanceof RadiantQ.Gantt.CustomTimeScaleTypeHint)return null==this&&null==a?!0:null==this||
null==a||this.EquivalentType!=a.EquivalentType||this.EquivalentUnits!=a.EquivalentUnits?!1:!0}};RadiantQ.Gantt.TimeScaleHeaderDefinition=function(){NotifyPropertyChanged.apply(this,arguments);this.ProvideCustomTimeIntervals=new ObjectEvent("ProvideCustomTimeIntervals");this.ProvideCustomHeaderText=new ObjectEvent("ProvideCustomHeaderText");this.RenderCallBack=new ObjectEvent("RenderCallBack");this.TimeUnitsCache=new RadiantQ.Gantt.TimeUnitsCache;this._name=null;this.Type=RadiantQ.Gantt.TimeScaleType.Days;
this.CustomTimeScaleTypeHint=null;this.BaseTimeUnitWidth=25;this.BaseTimeScaleType=RadiantQ.Gantt.TimeScaleType.Hours;this.textFormat="";this.TextFormat_M=function(a){if(0==arguments.length)return this._textFormat;this._textFormat!=a&&(this._textFormat=a,this.OnPropertyChanged("TextFormat",a))};RadiantQ.CanUseDefineProperty?Object.defineProperty(this,"TextFormat",{get:function(){return this._textFormat},set:function(a){this._textFormat!=a&&(this._textFormat=a,this.OnPropertyChanged("TextFormat",a))},
enumerable:!0,configurable:!0}):this.TextFormat="";this.HeaderHeight=22;this.name=function(a){if(void 0==a)if(null==this._name||""==this._name)if(this.Type!=RadiantQ.Gantt.TimeScaleType.Custom)for(key in RadiantQ.Gantt.TimeScaleType){if(RadiantQ.Gantt.TimeScaleType[key]==this.Type)return key.toString()}else return new String;else return this._name;else this._name=a};this.Clone=function(){var a=new RadiantQ.Gantt.TimeScaleHeaderDefinition;a.CustomTimeScaleTypeHint=this.CustomTimeScaleTypeHint;a.HeaderHeight=
this.HeaderHeight;a.TextFormat=this.TextFormat;a.Type=this.Type;a.TimeUnitTemplate=this.TimeUnitTemplate;if(this.ProvideCustomHeaderText.isSubscribed())for(var c=0;c<this.ProvideCustomHeaderText.fn.length;c++)a.ProvideCustomHeaderText.subscribe(this.ProvideCustomHeaderText.fn[c]);if(this.ProvideCustomTimeIntervals.isSubscribed())for(c=0;c<this.ProvideCustomTimeIntervals.fn.length;c++)a.ProvideCustomTimeIntervals.subscribe(this.ProvideCustomTimeIntervals.fn[c]);return a};this.IsEqual=function(a){var c=
null,b=null;if(null==this&&null==a)return!0;if(null==this||null==a)return!1;if(null!=this.CustomTimeScaleTypeHint&&null!=a.CustomTimeScaleTypeHint){if(!this.CustomTimeScaleTypeHint.IsEqual(a.CustomTimeScaleTypeHint))return!1}else{if(this.HeaderHeight!=a.HeaderHeight||this.TextFormat!=a.TextFormat||this.Type!=a.Type||this.TimeUnitTemplate!=a.TimeUnitTemplate||!this.ProvideCustomHeaderText.IsEqual(a.ProvideCustomHeaderText))return!1;if(this.ProvideCustomHeaderText.IsEqual(a.ProvideCustomHeaderText)){c=
this.ProvideCustomHeaderText.fn;b=a.ProvideCustomHeaderText.fn;if(this.ProvideCustomHeaderText.fn.length!=a.ProvideCustomHeaderText.fn.length)return!1;for(var d=0;d<c.length;d++)if(c[d]!=b[d])return!1}}if(!this.ProvideCustomTimeIntervals.IsEqual(a.ProvideCustomTimeIntervals))return!1;if(this.ProvideCustomTimeIntervals.IsEqual(a.ProvideCustomTimeIntervals)){c=this.ProvideCustomTimeIntervals.fn;b=a.ProvideCustomTimeIntervals.fn;if(this.ProvideCustomTimeIntervals.fn.length!=a.ProvideCustomTimeIntervals.fn.length)return!1;
for(d=0;d<c.length;d++)if(c[d]!=b[d])return!1}return!0};this.IsGreater=function(a){var c=this.Type,b=a.Type;if(c==RadiantQ.Gantt.TimeScaleType.Custom){if(null==this.CustomTimeScaleTypeHint)throw"Encountered a Custom TimeScaleType header with CustomTimeScaleTypeHint not set in TimeScaleHeaderDefinition's > operator.";c=this.CustomTimeScaleTypeHint.EquivalentType}if(b==RadiantQ.Gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"Encountered a Custom TimeScaleType header with CustomTimeScaleTypeHint not set in TimeScaleHeaderDefinition's > operator.";
b=a.CustomTimeScaleTypeHint.EquivalentType}return c>b?!0:c!=b||this.Type!=RadiantQ.Gantt.TimeScaleType.Custom&&a.Type!=RadiantQ.Gantt.TimeScaleType.Custom?!1:(this.Type==RadiantQ.Gantt.TimeScaleType.Custom?this.CustomTimeScaleTypeHint.EquivalentUnits:1)>(a.Type==RadiantQ.Gantt.TimeScaleType.Custom?a.CustomTimeScaleTypeHint.EquivalentUnits:1)?!0:!1}};RadiantQ.Gantt.TimeScaleHeaderDefinition.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.ProvideCustomerHeaderTextEventArgs=function(a,c,b){this.dateTime=
a;this.Text=c;this.TooltipText=null;this.width=b};RadiantQ.Gantt.ProvideCustomTimeIntervalsEventArgs=function(a,c){this.ViewStartTime=a;this.ViewEndTime=c;this.TimeIntervals=[]};RadiantQ.Gantt.RoundDownDuration=function(a){var c=RadiantQ.Gantt.Utils.TimeComputingUtils,b=Date.today();a=b.addTimeSpan(a);a=this.RoundTimeDown(a,this.GetActualRoundToOption());return c.GetTimeSpan(b,a)};RadiantQ.Gantt.RoundDown=function(a){return this.RoundTimeDown(a,this.GetActualRoundToOption())};RadiantQ.Gantt.RoundTimeDown=
function(a,c){var b=a.getHours(),d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);switch(c){case RadiantQ.Gantt.RoundToOptions.HalfDay:if(d==a||d.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours())==a)break;return 12>b?a.Date():a.Date().addHours(12);case RadiantQ.Gantt.RoundToOptions.Day:return a.Date();case RadiantQ.Gantt.RoundToOptions.Hour:return b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,0,0);case RadiantQ.Gantt.RoundToOptions.ThirtyMinutes:if(d=a.getMinutes(),!(0==d||30>
d)&&(30==d||59>=d))return d=30,new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,d,0,DateTimeKind.Utc);case RadiantQ.Gantt.RoundToOptions.FifteenMinutes:d=a.getMinutes();if(0==d||15>d)d=0;else if(15==d||30>d)d=15;else if(30==d||45>d)d=30;else if(45==d||59>=d)d=45;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,d,0,DateTimeKind.Utc);case RadiantQ.Gantt.RoundToOptions.Minute:return b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,a.Minute,0,DateTimeKind.Utc)}return a};RadiantQ.Gantt.TimeSpanHeaderMouseTracker=
function(a){this.Headers=function(){return a};this.LatestPos=function(a){if(void 0==a){if(null!=this.xLatestPos)return this.xLatestPos}else this.xLatestPos=a};this.IsDragging=function(a){if(void 0==a){if(null!=this._isDragging)return this._isDragging}else this._isDragging=a,RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal=a,this._isDragging||this.OnDoneDragging()}};RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal=!1;RadiantQ.Gantt.TimeSpanHeaderZoomTracker=function(){this.StartDragging=
function(a,c){this.LatestPos(a);this.StartBTUW=c;this.IsDragging(!0);return!0};this.MouseMovedTo=function(a,c){if(this.IsDragging()){var b=this.LatestPos()-a;c._trigger("zoomed",this,this.StartBTUW-b/5)}};this.OnDoneDragging=function(){}};RadiantQ.Gantt.TimeSpanHeaderZoomTracker.prototype=new RadiantQ.Gantt.TimeSpanHeaderMouseTracker;RadiantQ.Gantt.TimeSpanHeaderScrollTracker=function(){this.StartDragging=function(a,c,b){this.LatestPos(a);this.StartBTUW=c;b.StartPanning();this.IsDragging(!0);return!0};
this.MouseMovedTo=function(a,c){if(this.IsDragging()){var b=this.LatestPos()-a;c.ScrollBy(b);this.LatestPos(a)}};this.OnDoneDragging=function(){}};RadiantQ.Gantt.TimeSpanHeaderScrollTracker.prototype=new RadiantQ.Gantt.TimeSpanHeaderMouseTracker;RadiantQ.Gantt.AnchorTimeToStartTimeConverter=function(){};RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime=function(a,c){c>RadiantQ.Gantt.TimeScaleType.Hours?a=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)).clone():c>RadiantQ.Gantt.TimeScaleType.Minutes?
a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),0,0):c==RadiantQ.Gantt.TimeScaleType.Minutes&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0));return a.clone()};RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert=function(a){var c=a.options.BaseTimeScaleType,b;if(!0==a.options.ResizeToFit)b=a.options.AnchorTime.clone();else{b=a.options.AnchorTime.clone();var d=0,d=RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal?a.options.ViewWidth/
2/a.options.BaseTimeUnitWidth:Math.ceil(a.options.ViewWidth/2/a.options.BaseTimeUnitWidth),d=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(c,d);b=b.clone().add({millisecond:-d.millisecond||d.milliseconds_M(),seconds:-d.seconds_M(),minutes:-d.minutes_M(),hours:-d.hours_M(),days:-d.days_M()})}a=null==a?c:a.GetBTSTToRenderAgainst();return b=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime(b,a)};RadiantQ.Gantt.AnchorTimeToEndTimeConverter=function(){};RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert=
function(a){var c=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(a),b=RadiantQ.Gantt.Utils.TimeComputingUtils,d=a.options.BaseTimeScaleType;a=Math.ceil(a.options.ViewWidth/a.options.BaseTimeUnitWidth);a=b.ConvertTimeUnitsToTimeSpan(d,a);c=c.addTimeSpan(a);return c=d==RadiantQ.Gantt.TimeScaleType.Minutes?b.CeilToNextMinute(c):d==RadiantQ.Gantt.TimeScaleType.Hours?b.CeilToNextHour(c):b.CeilToNextDay(c)};RadiantQ.Gantt.GanttChartPanningUtil=function(a,c,b){var d=RadiantQ.Gantt.Utils.TimeComputingUtils;
this.IntermediateAnchorTime=a.clone();this.CurAnchorTime=a.clone();this.BaseTimeScaleType=c;this.BaseTimeUnitWidth=b;this.AnchorTimeChanged=new ObjectEvent("AnchorTimeChanged");this.ApplyXChange=function(a){a=d.ConvertTimeUnitsToTimeSpan(this.BaseTimeScaleType,a/this.BaseTimeUnitWidth);this.IntermediateAnchorTime=this.IntermediateAnchorTime.addTimeSpan(a);a=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime(this.IntermediateAnchorTime,this.BaseTimeScaleType);a.equals(this.CurAnchorTime)||
(this.CurAnchorTime=a.clone(),this.AnchorTimeChanged.raise(this,null))}};RadiantQ.Gantt.ChartZoomOptions={None:0,ShowZoomSliderInHeader:1,MouseWheelZoomOnTimeScaleHeaders:2,MouseWheelZoomOnGanttChart:4,LeftMouseButtonDownDrag:8};RadiantQ.Gantt.ChartScrollOptions={None:0,LeftMouseButtonDownDrag:1,CtrlAndLeftMouseButtonDownDrag:2};RadiantQ.Gantt.CustomRangeInformationEventArgs=function(a,c){this.ViewStartTime=a;this.ViewEndTime=c;this.CustomRanges=[]};RadiantQ.Gantt.CustomRangeInfo=function(a,c,b){this.StartTime=
a;this.EndTime=c;if(c<a)throw"endTime cannot be earlier than startTime in a call to CustomRangeInfo constructor.";this.DataTemplate=b};RadiantQ.Gantt.CustomRangesInfos=function(){this.ProvideRepeatingCustomRanges=new ObjectEvent("ProvideRepeatingCustomRanges");this.DiscreetCustomRanges=new RadiantQ.RQ_CollectionChangeNotifier;this.RaiseProvideRepeatingCustomRanges=function(a){this.ProvideRepeatingCustomRanges.raise(this,a)}};RadiantQ.Gantt.CustomRangeTimeUnit=function(a,c,b){this.Width=a;this.CanvasLeft=
c;this.CustomRangeInfo=b};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings=function(c){this.AutoHidingTimeScaleHeaders=!0;this.MaximumTimeScaleHeadersCount=2;this.DefaultBottomHeaderWidth=-1;this.BottomHeaderMaxWidth=35;this.TopHeaderMinWidth=40;this.ResizeToFit=!1;var b=c,h=c;this.IsProjectGantt=!1;this.TimeScaleHeaders=function(a){if(void 0==a)return h;h=a};var d=null;this.BoundGantt=function(a){if(void 0==a)return d;if(d!=a){if(!f(a).hasClass("rq-ganttBase"))throw"Invalid Selector";d=f(a);
this.IsProjectGantt=null!=d.data("GanttControl");null!=d&&this.ApplySettingsOnGantt()}};this.SelectedHeaders=function(a){if(void 0==a)return b;b=a};this.Clone=function(){var a=new RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings(this.SelectedHeaders);a.AutoHidingTimeScaleHeaders=this.AutoHidingTimeScaleHeaders;a.TimeScaleHeaders(this.TimeScaleHeaders().Clone());a.BottomHeaderMaxWidth=this.BottomHeaderMaxWidth;a.DefaultBottomHeaderWidth=this.DefaultBottomHeaderWidth;a.MaximumTimeScaleHeadersCount=
this.MaximumTimeScaleHeadersCount;a.TopHeaderMinWidth=this.TopHeaderMinWidth;a.ResizeToFit=this.ResizeToFit;return a};this.IsEqual=function(a){if(null==this&&null==a)return!0;if(null==this||null==a||this.AutoHidingTimeScaleHeaders!=a.AutoHidingTimeScaleHeaders||this.BottomHeaderMaxWidth!=a.BottomHeaderMaxWidth||this.DefaultBottomHeaderWidth!=a.DefaultBottomHeaderWidth||this.MaximumTimeScaleHeadersCount!=a.MaximumTimeScaleHeadersCount||this.TopHeaderMinWidth!=a.TopHeaderMinWidth||this.ResizeToFit!=
a.ResizeToFit||!this.TimeScaleHeaders().IsEqual(a.TimeScaleHeaders())||this.SelectedHeaders().length!=a.SelectedHeaders().length)return!1;for(var c=0;c<this.SelectedHeaders().length;c++)if(-1==f.inArray(this.SelectedHeaders()[c],a.SelectedHeaders()))return!1;return!0};this.ConvertWidths=function(a,c,b){if(a==c)return b;switch(a){case RadiantQ.Gantt.TimeScaleType.Minutes:return c==RadiantQ.Gantt.TimeScaleType.Years?b/525600:c==RadiantQ.Gantt.TimeScaleType.Months?b/43200:c==RadiantQ.Gantt.TimeScaleType.Weeks?
b/10080:c==RadiantQ.Gantt.TimeScaleType.Days?b/1440:b/60;case RadiantQ.Gantt.TimeScaleType.Hours:return c==RadiantQ.Gantt.TimeScaleType.Years?b/8760:c==RadiantQ.Gantt.TimeScaleType.Months?b/720:c==RadiantQ.Gantt.TimeScaleType.Weeks?b/168:b/24;case RadiantQ.Gantt.TimeScaleType.Days:return c==RadiantQ.Gantt.TimeScaleType.Years?b/365:c==RadiantQ.Gantt.TimeScaleType.Months?b/30:b/7}return b};this.GetDefaultBottomHeaderWidth=function(){if(-1==this.DefaultBottomHeaderWidth){var c=RadiantQ.Gantt.TimeScaleType.Days;
0<this.SelectedHeaders().length&&(c=a(this.SelectedHeaders()).BaseTimeScaleType);switch(c){default:return 25;case RadiantQ.Gantt.TimeScaleType.Months:return 50;case RadiantQ.Gantt.TimeScaleType.Weeks:return 65;case RadiantQ.Gantt.TimeScaleType.Years:return 100}}else return this.DefaultBottomHeaderWidth};this.GetDefaultBaseTimeUnitWidth=function(){var c=this.SelectedHeaders();if(0==c.length)return this.GetDefaultBottomHeaderWidth();var b=a(c).BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b),
c=a(c).Type;return this.ConvertWidths(b,c,this.GetDefaultBottomHeaderWidth())};this.GetPreferredMaximumBaseTimeUnitWidth=function(){var c=this.SelectedHeaders();if(0==c.length)return 40;var b=a(c).BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b),c=a(c).Type;return this.ConvertWidths(b,c,this.BottomHeaderMaxWidth)};this.GetPreferredMinimumBaseTimeUnitWidth=function(){var c=this.SelectedHeaders();if(0==c.length)return 20;var b=a(c).BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b);
return this.ConvertWidths(b,c[0].Type,this.TopHeaderMinWidth)};this.UpdateHeadersOnZoom=function(){var c=this.SelectedHeaders();if(0!=c.lenght){var b=this.getGanttChartProperty("TimeScaleHeaders"),e=this.getGanttChartProperty("BaseTimeScaleType"),h=this.getGanttChartProperty("BaseTimeUnitWidth"),g=this.getGanttChartProperty("MinTimeUnitWidthForHeaderVisibility");if(!(null==a(c)||c.lenght<=this.MaximumTimeScaleHeadersCount))for(var d=0,m=c.length-1;0<=m;m--)d<this.MaximumTimeScaleHeadersCount?(-1==
f.inArray(c[m],b)&&b.insertInOrder(c[m]),RadiantQ.Gantt.IsHeaderViewable(c[m],e,h,g)&&d++):b.remove(c[m])}};this.ApplyTimeScaleHeaderSettings=function(){for(var a=new RadiantQ.Gantt.TimeScaleHeaderDefinitions,c=this.SelectedHeaders(),b=0;b<c.length;b++)a.insertInOrder(c[b]);this.BeginUpdate();this.setGanttChartProperty("TimeScaleHeaders",a)};this.ApplySettingsOnGantt=function(){if(1>this.MaximumTimeScaleHeadersCount)throw"MaximumTimeScaleHeadersCount cannot be less than 2.";if(10>this.BottomHeaderMaxWidth||
100<this.BottomHeaderMaxWidth)throw"BottomHeaderMaxWidth cannot be less than 10 or greater than 100.";if(10>this.TopHeaderMinWidth||400<this.TopHeaderMinWidth)throw"TopHeaderMinWidth cannot be less than 10 or greater than 400.";if(-1>this.DefaultBottomHeaderWidth||100<this.DefaultBottomHeaderWidth)throw"DefaultBottomHeaderWidth cannot be less than -1 or greater than 100.";if(null==this.TimeScaleHeaders())throw"TimeScaleHeaders in GanttChartTimeScaleHeaderSettings cannot be null when BoundGantt property is set.";
if(0==this.SelectedHeaders().length)throw"There are no selected TimeScaleHeaders to apply on the gantt in the call to ApplySettingsOnGantt.";this.ApplyTimeScaleHeaderSettings();var a=this.GetPreferredMinimumBaseTimeUnitWidth(),c=this.GetPreferredMaximumBaseTimeUnitWidth(),b=this.GetDefaultBaseTimeUnitWidth();b<a&&(b=a);b>c&&(b=c);this.BeginUpdate();this.setGanttChartProperty("BaseTimeUnitWidthMinimum",a);this.setGanttChartProperty("BaseTimeUnitWidthMaximum",c);this.setGanttChartProperty("BaseTimeUnitWidth",
b);this.setGanttChartProperty("ResizeToFit",this.ResizeToFit);this.EndUpdate();var e=this,a=this.BoundGantt();this.AutoHidingTimeScaleHeaders&&(!1==this.IsProjectGantt?a.bind("flexyganttbeforezooming",function(a,c){e.UpdateHeadersOnZoom()}):a.bind("ganttcontrolbeforezooming",function(a,c){e.UpdateHeadersOnZoom()}));(a=a.data("GanttBase"))&&a.CanAllowBTUW.subscribe(this.CanAllowBTUW,this);this.UpdateHeadersOnZoom()};this.CanAllowBTUW=function(a,c){var b=a.options,e=c.NewBTUW,h=this.SelectedHeaders();
-1==b.TimeScaleHeaders.indexOf(h[0])&&(e*=a.getCurrentTimeUnitsForBaseType(h[0]),c.Allow=e>=b.MinTimeUnitWidthForHeaderVisibility)};this.BeginUpdate=function(){this.CallGanttMethod("BeginUpdate")};this.EndUpdate=function(){this.CallGanttMethod("EndUpdate")}};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.getGanttChartProperty=function(a){var c=this.BoundGantt();return!1==this.IsProjectGantt?c.FlexyGantt("option",a):c.GanttControl("option",a)};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.CallGanttMethod=
function(a){var c=this.BoundGantt();!1==this.IsProjectGantt?c.FlexyGantt(a):c.GanttControl(a)};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.setGanttChartProperty=function(a,c){var b=this.BoundGantt();!1==this.IsProjectGantt?b.FlexyGantt("option",a,c):b.GanttControl("option",a,c)};var d=function(){Array.apply(this,arguments);this.CollectionChanged=new ObjectEvent("CollectionChanged");f.observable(this).unbind("insert remove replaceAll",this.collectionChanged);f.observable(this).bind("insert remove replaceAll",
this.collectionChanged)};window.ObservableCollection=d;d.prototype=[];d.prototype.OnCollectionChanged=function(a,c){this.CollectionChanged.raise(a,c)};d.prototype.collectionChanged=function(a,c){a.target.OnCollectionChanged(a,c)};d.prototype.remove=function(a,c){var b=!1;if("number"===f.type(a))if(c){if("number"===f.type(c))for(var d=a;d<c;d++)if(void 0!=this[d])b=!0;else{b=!1;break}}else void 0!=this[a]&&(b=!0);else"string"===f.type(a)?(d=f.inArray(a,this),-1!=d&&(b=!0,a=d)):-1!=f.inArray(a,this)&&
(b=!0);b&&c?f.observable(this).remove(a,c):b&&f.observable(this).remove(a)};d.prototype.insert=function(a,c){f.observable(this).insert(a,c)};d.prototype.contains=function(a){return-1!=f.inArray(a,this)};d.prototype.replaceAll=function(a){f.observable(this).replaceAll(a)};d.prototype.clear=function(){0!=this.length&&this.remove(0,this.length)};d.prototype.add=function(a){f.observable(this).insert(this.length,a)};d.prototype.indexOf=function(a,c){var b=this.length,d=Number(c)||0,d=0>d?Math.ceil(d):
Math.floor(d);for(0>d&&(d+=b);d<b;d++)if(d in this&&this[d]===a)return d;return-1};d.prototype.Dispose=function(){this.CollectionChanged&&this.CollectionChanged.Dispose&&this.CollectionChanged.Dispose();f.observable(this).unbind("insert remove replaceAll",this.collectionChanged)};RadiantQ.Gantt.TimeScaleHeaderDefinitions=function(){RadiantQ.RQ_CollectionChangeNotifier.apply(this,arguments);this.getById=function(a){if(this.isValidateIndex(a))return this[a]};this.getByType=function(a){for(var c=0;c<
this.length;c++){var b=this[c];if(b.Type==a)return b}};this.insertInOrder=function(a){for(var c=0;c<this.length;c++)if(!this[c].IsGreater(a)){this.insert(c,a);return}this.add(a)};this.removeType=function(a){if(a==RadiantQ.Gantt.TimeScaleType)throw"RemoveType is not supported for TimeScaleType.Custom type.";for(var c=0;c<this.length;c++){var b=this.getById(c);if(b.Type==a){this.remove(b);break}}};this.IsContentEqual=function(a){if(null==this&&null==a)return!0;if(null==this&&null!=a||null!=this&&null==
a||this.length!=a.length)return!1;for(var c=0;c<this.length;c++)if(!this.getById(c).IsEqual(a.getById(c)))return!1;return!0};this.Clone=function(){for(var a=new RadiantQ.Gantt.TimeScaleHeaderDefinitions,c=0;c<this.length;c++){var b=this[c].Clone();a.add(b)}return a};this.IsEqual=function(a){if(null==this&&null==a)return!0;if(null==this||null==a||this.length!=a.length)return!1;for(var c=0;c<this.length;c++)if(!this.getById(c).IsEqual(a.getById(c)))return!1;return!0};this.isValidateIndex=function(a){return this.length>
a}};RadiantQ.Gantt.TimeScaleHeaderDefinitions.prototype=new RadiantQ.RQ_CollectionChangeNotifier;RadiantQ.Gantt.BottomTwoHeaderDefinitions=function(){RadiantQ.Gantt.TimeScaleHeaderDefinitions.apply(this,arguments);this.UpdateIndexProperties=function(){for(var a=0,c=0;c<this.length;c++)this.SetIndex(this[c],a++)};var a=this;this.collectionChanged=function(c,b){"insert"==c.type?a.UpdateIndexProperties():a.remove(b.items[0])};this.CollectionChanged.isSubscribed()?this.CollectionChanged.unsubscribe(this.collectionChanged):
this.CollectionChanged.subscribe(this.collectionChanged);this.SetIndex=function(a,c){a.IndexProperty=c};this.remove=function(a){a.IndexProperty=-1}};RadiantQ.Gantt.BottomTwoHeaderDefinitions.GetIndex=function(a){return a.IndexProperty};RadiantQ.Gantt.BottomTwoHeaderDefinitions.prototype=new RadiantQ.Gantt.TimeScaleHeaderDefinitions;RadiantQ.Gantt.IsHeaderViewable=function(a,c,b,d){var f=a.Type,l=RadiantQ.Gantt.Utils.TimeComputingUtils,n=1;if(f==ns_gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw new "CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";
f=a.CustomTimeScaleTypeHint.EquivalentType;n=a.CustomTimeScaleTypeHint.EquivalentUnits}a=l.ConvertToApproxUnitsOfBaseType(c,f,n)*b;return Math.round(a)<d?!1:!0};RadiantQ.Gantt.AdjustBaseScaleType=function(a){return a>RadiantQ.Gantt.TimeScaleType.Days?RadiantQ.Gantt.TimeScaleType.Days:a};var a=function(a){return a[a.length-1]};window.RemoveInArray=function(a,c){var b=RQArray.prototype.indexOf.call(a,c);-1!=b&&a.splice(b,1)};RadiantQ.Gantt.isModifierKeyIsPresed=function(a){return a.ctrlKey||a.shiftKey||
a.altKey||a.metaKey};RadiantQ.Gantt.addMethod=function(a,c,b){var d=a[c];a[c]=d?function(){if(b.length==arguments.length)return b.apply(this,arguments);if("function"==typeof d)return d.apply(this,arguments)}:b};(function(a){var c=function(a){function c(){a.apply(this,arguments);this.Type=this.Width=this.ToolTipText=this.TextFormat=this.Text=this.Tag=0;this.IsWorkingTime=!0;this._binding=null;this.BindingObject=function(a){if(void 0==a||null==a)return this._binding;null!=this._binding&&this._binding.Dispose();
this._binding=a};this._isHighlighted=!1;this.IsHighlighted=function(a){if(void 0==a||null==a)return this._isHighlighted;this._isHighlighted!=a&&(this._isHighlighted=a,this.OnPropertyChanged("IsHighlighted",a))}}__extends(c,a);return c}(NotifyPropertyChanged);a.TimeUnit=c})(RadiantQ.Gantt);RadiantQ.Gantt.SpecialLineInfo=function(){this.ToolTipText="";this.LineColor=void 0;this.LineDateTime=new Date;this.ClassName=""};RadiantQ.Gantt.CancellableActivityEventArgs=function(a){this._cancel=!0;this._activity=
a};RadiantQ.Gantt.CancellableActivityEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.Gantt.CancellableActivityEventArgs.prototype.Cancel_M=function(a){if(0==arguments.length)return this._cancel;this._cancel=a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.CancellableActivityEventArgs.prototype,"Activity",{get:function(){return this._activity}}),Object.defineProperty(RadiantQ.Gantt.CancellableActivityEventArgs.prototype,"Cancel",{get:function(){return this._cancel},
set:function(a){this._cancel=a}}));RadiantQ.Gantt.TimeRangeHighlightBehavior={None:0,HighlightInChartOnHeaderMouseHover:1};RadiantQ.Gantt.ActivityTimeChangeType={StartTimeChanged:"StartTimeChanged",DurationResized:"DurationResized"};RadiantQ.Gantt.ActivityTimeChangedEventArgs=function(a,c,b){this.Activity=a;this.Type=c;this.UserSpecifiedTime=b};RadiantQ.Gantt.SelectionMode={Multiple:"Multiple",Single:"Single"};RadiantQ.Gantt.TimeIndicatorLines={None:0,Always:1,OnHover:2,OnResize:3};RadiantQ.Gantt.SelectionChanged=
function(a,c){this.AddedItems=a;this.RemovedItems=c};RadiantQ.Gantt.DefaultStyles={};var c=RadiantQ.Gantt.DefaultStyles;c.direction=["top","bottom","right","left"];c.CreateCssTxt=function(a,b,h){var d=f.isArray(b);2==b.length&&(b.splice.apply(b,[1,0].concat(b[0])),b.push(b[b.length-1]));return f.map(c.direction,function(c,f){var n=void 0==h?a+"-"+c+":":a+"-"+c+"-"+h+":";return d?n+b[f]+";":n+b+";"}).toString().replace(/,/g,"")};c.ZeroMargin=function(){return c.CreateCss("margin","0px").toString()};
c.init=function(){var a=RadiantQ.Gantt.DefaultStyles;c.GanttTableTRStyleTxt=a.CreateCssTxt("padding","0px")+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border","0px","width");c.GanttTableTDStyleTxt=a.CreateCssTxt("padding",["0.2em","0.4em"])+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border",["0px","1px","1px","0px"],"width");c.ZeroStyle=a.CreateCssTxt("padding","0px")+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border","0px","width")+"border-collapse: collapse;border-spacing: 0;width:100%;height:100%;"};
document.mouseButtonPressed=!1})(jQuery);RadiantQ.ContextMenuImpl={};
(function(f){function b(a,c){var b=function(a){a=a.originalEvent.touches?a.originalEvent.touches[0]:a;var c=this;c.tapDownX=a.clientX;c.tapDownY=a.clientY;c.tapHoldTimer=setTimeout(function(){c.canShowContextMenu=!0},500)},g=function(){clearTimeout(null)},h=function(a){if(!0==this.canShowContextMenu){var c=a.originalEvent.changedTouches?a.originalEvent.changedTouches[0]:a;this.tapDownX==c.clientX&&this.tapDownY==c.clientY&&(clearTimeout(this.timeOutFunctions),this.timeOutFunctions=setTimeout(function(){var b=
a.originalEvent;if("mouse"!=b.pointerType&&4!=b.pointerType){var e=f.ui?f.ui.version||"1.5.2":null;e&&1.11<=parseFloat(e)&&f.isFunction(f.jQContextMenu)?f(b.target).jQContextMenu({x:c.clientX,y:c.clientY}):f.isFunction(f.contextMenu)&&f(b.target).contextMenu({x:c.clientX,y:c.clientY})}},100));this.canShowContextMenu=!1}clearTimeout(this.tapHoldTimer)},d=f(a,c);d.on("touchstart",b.bind(this));d.on("touchend",h.bind(this));d.on("touchmove",g.bind(this));d.on("MSPointerDown",b.bind(this));d.on("MSPointerUp",
h.bind(this));d.on("MSPointerMove",g.bind(this))}var d=f.ui?f.ui.version||"1.5.2":null;d&&1.11<=parseFloat(d)&&f.isFunction(f.jQContextMenu)?RadiantQ.ContextMenuImpl.ContextMenu=function(a,c){var e=this;this.ItemClicked=new ObjectEvent("ItemClicked");this.BeforeContextMenu=new ObjectEvent("BeforeContextMenu");this.ContextHandler=new ObjectEvent("ContextHandler");this.selector=a;var g=this;this._position={x:0,y:0};this.updateMenuItemDetails=function(a,c){!0==a.disabled&&c.addClass("ui-state-disabled");
a.icon&&c.find("span.icon").addClass(a.icon);f.isFunction(a.callback)&&e.ItemCallbacks.Add(a.keyName,a.callback)};this.getSubMenuItems=function(a){for(var c=f("<ul style='width:100%;'></ul>"),b=0;b<a.items.length;b++){var h=a.items[b],g=f("<div keyName='"+h.keyName+"'><li keyName='"+h.keyName+"' ><span class='icon' ></span><span>"+h.name+"</span></li></div>");if(h.items){var d=e.getSubMenuItems(h);g.append(d)}e.updateMenuItemDetails(h,g);c.append(g)}return c};this.Items=new RadiantQ.Dictionary;this.ItemCallbacks=
new RadiantQ.Dictionary;var h=f('<ul id="context-menu"></ul>');f(document.body).append(h);f(c).jQContextMenu({target:"#context-menu",beforeContextMenu:function(a,c){f("#context-menu").empty();var b={Context:a};e.ContextHandler.raise(b,c);a=b.Context;e.BeforeContextMenu.raise(a,c);if(g.Items&&0!=g.Items.length){for(var b=g.Items.asArray,h=0;h<b.length;h++){var d=b[h],q=f("<div keyName='"+d.keyName+"'><li keyName='"+d.keyName+"' ><span class='icon' ></span><span>"+d.name+"</span></li></div>");if(d.items){var r=
e.getSubMenuItems(d);q.append(r)}e.updateMenuItemDetails(d,q);f("#context-menu").append(q)}c.refresh();return!0}},selector:a,itemClick:function(a,c){var b=f(c.items[0]).attr("keyName"),h=e.ItemCallbacks.GetItemByKey(b),g={$trigger:a,args:c,Cancel:!1};h&&h(b,g);!0!=g.Cancel&&e.ItemClicked.raise(b,a)}});this.AddNewItems=function(a,c){if(!1==c){this.Items=new RadiantQ.Dictionary;var b=0}else b=0;for(;b<a.length;b++)this.Items.Add(a[b].keyName,a[b])};b(a,c);this.Dispose=function(){var a=f(c).data("jQContextMenu");
a&&a.Dispose&&a.Dispose();this.ItemClicked&&this.ItemClicked.Dispose&&this.ItemClicked.Dispose();this.BeforeContextMenu&&this.BeforeContextMenu.Dispose&&this.BeforeContextMenu.Dispose();this.Items&&this.Items.Dispose&&this.Items.Dispose();this.Items=this.BeforeContextMenu=this.ItemClicked=null};return this}:f.isFunction(f.contextMenu)&&(RadiantQ.ContextMenuImpl.ContextMenu=function(a,c){this.ItemClicked=new ObjectEvent("ItemClicked");this.BeforeContextMenu=new ObjectEvent("BeforeContextMenu");this.selector=
a;var e=this;this._position={x:0,y:0};this.Items=new RadiantQ.Dictionary;f.contextMenu&&f.contextMenu({selector:a,position:function(a,c,b){var d=f(document.body).width(),l=f(document.body).height(),n=c+a.$menu.width(),p=b+a.$menu.height();n>d&&(c=d-a.$menu.width()-10);p>l&&(b=l-a.$menu.height()-10);e._position={x:c,y:b};"function"==typeof e.position&&e.position(e._position);a.$menu.css({top:e._position.y,left:e._position.x})},build:function(a,c){e.BeforeContextMenu.raise(a,c);if(e.Items&&0<e.Items.length){c.Cancel=
!1;if(!0==c.Cancel)return!1;for(var b=e.Items.asArray,d=0;d<b.length;d++){var l=b[d].keyName||b[d].name;!0==b[d].separator?c.data.items["separator"+d]="separator"+d:c.data.items[l]={name:b[d].name,icon:b[d].icon,callback:b[d].callback,disabled:b[d].disabled,items:b[d].items}}}return void 0==c.data.items||f.isEmptyObject(c.data.items)?!1:{GetPosition:function(){return e._position},callback:function(a,c){e.ItemClicked.raise(a,c.$trigger)}}}});this.AddNewItems=function(a,c){if(!1==c){this.Items=new RadiantQ.Dictionary;
var b=0}else b=0;for(;b<a.length;b++)this.Items.Add(a[b].keyName,a[b])};b(a,c);this.Dispose=function(){f.contextMenu("destroy",this.selector);this.Items=this.BeforeContextMenu=this.ItemClicked=null};return this})})(jQuery);var EXPANDER_WIDTH=12;RadiantQ.INDENT_WIDTH=12;RadiantQ.Gantt.LevelToIndentWidth=function(f,b){var d;return d=0+(f*RadiantQ.INDENT_WIDTH+RadiantQ.INDENT_WIDTH)};function Expander(){this._isExpanded=!1}Expander.prototype=new NotifyPropertyChanged;
Expander.prototype.IsExpanded=function(f){if(null==f)return this._isExpanded;this._isExpanded!=f&&(this._isExpanded=f,this.OnPropertyChanged("IsExpanded"))};
(function(f){RadiantQ.FlexyGantt={};var b=RadiantQ.FlexyGantt;(function(b){var a=function(a){function b(e){a.apply(this,arguments);this._data=e.data;this.HierarchicalItem=e;var h=1;this._displayIndex=-1;this._guid=RadiantQ.Gantt.guidGenerator();var d,k;this.MaxOverlappingBlocksRowCount=function(a){if(void 0==a||null==a)return h;h!=a&&(h=a,this.OnPropertyChanged("MaxOverlappingBlocksRowCount",a,null,!1),this.PropertyChanged&&0==this.PropertyChanged.fn.length&&(this.RowHeight=0))};this._resetMaxOverlappingBlocksRowCount=
function(){h=0};this.TableRow=function(a){if(void 0==a||null==a)return d;if(!this.IsSelected)return 0;if(void 0!=d){this.IsSelected()&&this.addSelectionClassToTable(a);this.IsMouseIn()&&this.addHoverClassToTable(a);var c=f(d).height();this.RowHeight&&(c=this.RowHeight);f(a).height(c)}d=a;this.OnPropertyChanged("TableRow",a,null,!1)};this.ChartRow=function(a){if(void 0==a||null==a)return k;k=a;this.OnPropertyChanged("ChartRow",a,null,!1)};this._isSelected=!1;this.IsSelected=function(a){if(void 0==
a||null==a)return this._isSelected;this._isSelected!=a&&(this._isSelected=a,this.OnPropertyChanged("IsSelected",a,null,!1),this.UpdateSelection(a))};this._isMouseIn=!1;this.IsMouseIn=function(a){if(void 0==a||null==a)return this._isMouseIn;this._isMouseIn!=a&&(this._isMouseIn=a,this.UpdateHoverStyle(a))};this.DataPropertyChangeListener=function(a){this.OnPropertyChanged("Data")};this._data.PropertyChanged&&this._data.PropertyChanged.subscribe();this.Dispose=function(){this.DisplayIndex(-1);this._data.PropertyChanged&&
this._data.PropertyChanged.unsubscribe(this.DataPropertyChangeListener)}}__extends(b,a);return b}(NotifyPropertyChanged);b.FlexyNodeData=a})(b);b.FlexyNodeData.prototype.UpdateHoverStyle=function(b){if(!0==b&&void 0!=b)f(this.TableRow()).addClass("rq-row-hover ui-state-hover"),f(this.ChartRow()).find("td").addClass("rq-row-hover ui-state-hover");else if(!1==b||void 0==b)f(this.TableRow()).removeClass("rq-row-hover ui-state-hover"),f(this.ChartRow()).find("td").removeClass("rq-row-hover ui-state-hover")};
b.FlexyNodeData.prototype.addSelectionClassToTable=function(b){b.addClass("rq-row-selected ui-state-active")};b.FlexyNodeData.prototype.addHoverClassToTable=function(b){b.addClass("rq-row-hover ui-state-hover")};b.FlexyNodeData.prototype.UpdateSelection=function(b){if(!0==b&&void 0!=b)f(this.TableRow()).addClass("rq-row-selected ui-state-active"),f(this.ChartRow()).find("td").addClass("rq-row-selected ui-state-active");else if(!1==b||void 0==b)f(this.TableRow()).removeClass("rq-row-selected ui-state-active"),
f(this.ChartRow()).find("td").removeClass("rq-row-selected ui-state-active")};b.FlexyNodeData.prototype.IsParentType=function(){var b=this.HierarchicalItem.GetChildList();return null!=b&&void 0!=b&&(0<b.length||!0==this.HierarchicalItem._parent._fxGantt.ForceParentTemplateEvenIfChildless)?!0:!1};b.FlexyNodeData.prototype.IsExpandable=function(){return null!=this.HierarchicalItem._childItems&&0<this.HierarchicalItem._childItems.length};b.FlexyNodeData.prototype.Data=function(){return this._data};b.FlexyNodeData.prototype.DisplayIndex=
function(b){if(null==b)return this._displayIndex;this._displayIndex!=b&&(this._displayIndex=b,this.OnPropertyChanged("DisplayIndex",b,null,!1))};b.FlexyNodeData.prototype.Level=function(){return this.HierarchicalItem._level}})(jQuery);
(function(f){RQArray.prototype.indexOf||(RQArray.prototype.indexOf=function(b,a){var c=this.length,e=Number(a)||0,e=0>e?Math.ceil(e):Math.floor(e);for(0>e&&(e+=c);e<c;e++)if(e in this&&this[e]===b)return e;return-1});var b=RadiantQ.FlexyGantt;(function(b){var a=function(a){function b(e,h,d,k){a.apply(this,arguments);this.isExpanded=!1;this.data=d;this._level=k;this.isUpdatingChildListAsync=this._childListResolved=!1;this._resolvedChildList=null;this._parent=e;this._parentItem=h;this._childItems=new ObservableCollection;
this._forceToCreateNewChildList=!1;this._chartRow=this._tableRow=null;this._forceToBindtheEvents=!0;var l=this;this.notifyChange=function(a,c,b){l.OnPropertyChanged("Data."+a,b,c)};this.subscribChangeListener=function(a){for(var c in a){var b=a[c];if(!b)break;if(b.subscribe&&void 0!=b.getSubscriptionsCount&&0==b.getSubscriptionsCount())if(f.isArray(b())&&!this.isExpandable())for(var e=0;e<b().length;e++)this.subscribChangeListener(b()[e]);else b.subscribe(this.notifyChange.bind(b,c,a))}};this.subscribChangeListener(this.data);
this.listenChanges&&this.listenChanges(this.data);var n=!1;this.CanShowCue=function(a){if(void 0==a||null==a)return!1==n&&!1==this._parent._fxGantt.AutoExpandNodes?!1==this._parent.hasDynamicResolver&&this._resolvedChildList&&0==this._resolvedChildList.length?!1:this.corrFlexyNodeData.IsParentType():n;n!=a&&(n=a,this.OnPropertyChanged("CanShowCue",a))};this.isSelected=!1;this.IsSelected=function(a){if(!0==a&&void 0!=a)f(this.TableRow).addClass("rq-row-selected ui-state-active"),f(this.ChartRow).addClass("rq-row-selected ui-state-active"),
this.isSelected=!0;else if(!1==a&&void 0!=a)f(this.TableRow).removeClass("rq-row-selected ui-state-active"),f(this.ChartRow).removeClass("rq-row-selected ui-state-active"),this.isSelected=!1;else if(void 0==a)return this.isSelected};this.isExpanding=!1}__extends(b,a);return b}(NotifyPropertyChanged);b.HierarchicalItem=a})(b);b.HierarchicalItem.prototype.ResourceSchedule_M=function(){if(null!=this._resourceSchedule)return this._resourceSchedule;var b=this._parent._fxGantt.RowRenderingScheduleBinding;
if(b){var a=this._getNestedValue(this.data,b.Property);this._resourceSchedule=b.Converter?b.Converter.Convert.call(this.data,a,b.Property):""==f.trim(a)?null:a;void 0===this._resourceSchedule&&(this._resourceSchedule=this._parent._fxGantt.WorkTimeSchedule)}else this._resourceSchedule=this._parent._fxGantt.WorkTimeSchedule;return this._resourceSchedule};b.HierarchicalItem.prototype._getNestedValue=function(b,a){for(var c=a.split("."),e=0;e<c.length;e++)"undefined"!=typeof b&&(b=b[c[e]+"_M"]?b[c[e]+
"_M"]():b[c[e]]);return!0==f.isFunction(b)?b():b||""};b.HierarchicalItem.prototype.FlatItemsSource=function(){return this._parent.FlatItemsSource};b.HierarchicalItem.prototype.FlatHierarchicalItemsList=function(){return this._parent.FlatHierarchicalItemsList};b.HierarchicalItem.prototype.isExpandable=function(){var b=this.GetChildList();return!0==this._forceToBindtheEvents&&void 0!=b&&null!=b?!0:void 0==b||null==b||0==b.length?!1:!0};b.HierarchicalItem.prototype.GetChildList=function(){!1==this._childListResolved?
(this._childListResolved=!0,this._resolvedChildList=null,null!=this._parent._fnChildListResolver&&(this._resolvedChildList=this._parent._fnChildListResolver(this.data,this))):null!=this._parent.dynamicResolver&&!0==this._forceToCreateNewChildList&&(this._forceToCreateNewChildList=!1,this._resolvedChildList=this._parent.dynamicResolver(this.data,this));return this._resolvedChildList};b.HierarchicalItem.prototype.IsExpanded=function(b){if(null==b)return this.isExpanded;if(this._parent._expansionStateHandler){var a=
this._parent._expansionStateHandler(this.data,b);if(!1==a){var c=this.GetChildList();this.CanShowCue(c&&0<c.length)}if(void 0==a||null==a)a=b;b=a}this.isExpanded!=b&&(this._parent._fxGantt&&this._parent._fxGantt.BeforeNodeExpansionStateChangeFn&&this._parent._fxGantt.BeforeNodeExpansionStateChangeFn(this,b),!0==b?this.PrepareChildrenHierarchicalList(!0):(this._parent.ClearHierarchyFromList(this,!1),this.isExpanded=!1,this.OnPropertyChanged("IsExpanded",!1)),0!=this._parent.NodeExpansionStateChanged.fn.length&&
this._parent.NodeExpansionStateChanged.raise(this,b),this._parent._fxGantt&&this._parent._fxGantt.AfterNodeExpansionStateChangeFn&&this._parent._fxGantt.AfterNodeExpansionStateChangeFn(this,b));this._parent.IsCollapsed.raise(this)};b.HierarchicalItem.prototype.PrepareChildrenHierarchicalList=function(b){b&&(this.isExpanding=!0);if(this.isExpandable()){this.isExpanding=this.isExpanded=!0;if(0==this._childItems.length)this.CreateChildList();else{b=this._prepareChildren();var a=this._parent.FlatHierarchicalItemsList,
c=this._parent.FlatItemsSource,e=a.indexOf(this);b.HierItems.splice(0,0,e+1,0);b.FlatItems.splice(0,0,e+1,0);a.splice.apply(a,b.HierItems);c.splice.apply(c,b.FlatItems);for(a=0;a<b.Parents.length;a++)c=b.Parents[a],c.OnPropertyChanged("IsExpanded",!0),0!=c._parent.NodeExpansionStateChanged.fn.length&&c._parent.NodeExpansionStateChanged.raise(c)}this.isExpanding=!1;this.OnPropertyChanged("IsExpanded",!0)}this.isExpanding=!1};b.HierarchicalItem.prototype.CreateChildList=function(){var b=this.GetChildList(),
a=this;if(null==this.onChildCollectionChanged||void 0==this.onChildCollectionChanged)this.onChildCollectionChanged=function(c,b){if("insert"==c.type)a.AddItemToChildList(b.index,b.items[0]);else if("remove"==c.type){var e=a._parent.GetFlatHierarchicalItemByData(b.items[0]);a._childItems.remove(e);a._parent.ClearHierarchyFromList(e,!0)}a.CanShowCue(0<a._childItems.length)};f.observable(b).bind("insert remove replaceAll",this.onChildCollectionChanged);var b=this._createChildList(b),c=this._parent.FlatHierarchicalItemsList,
e=this._parent.FlatItemsSource,g=c.indexOf(this);b.HierItems.splice(0,0,g+1,0);b.FlatItems.splice(0,0,g+1,0);c.splice.apply(c,b.HierItems);e.splice.apply(e,b.FlatItems);for(c=0;c<b.Parents.length;c++)e=b.Parents[c],e.OnPropertyChanged("IsExpanded",!0),0!=e._parent.NodeExpansionStateChanged.fn.length&&e._parent.NodeExpansionStateChanged.raise(e);a._parent.hasDynamicResolver?a.CanShowCue(0<=a._childItems.length?!0:!1):a.CanShowCue(0<a._childItems.length)};b.HierarchicalItem.prototype._createChildList=
function(d){var a={HierItems:[],FlatItems:[],Parents:[]};if(this.isExpanded){this.isExpanding=!0;for(var c=0;c<d.length;c++){var e=new b.HierarchicalItem(this._parent,this,d[c],this._level+1);this._childItems.insert(c,e);var g=new b.FlexyNodeData(e);e.corrFlexyNodeData=g;a.HierItems.push(e);a.FlatItems.push(g);if(e.isExpandable()&&this._parent._fxGantt.AutoExpandNodes){e.isExpanded=!0;a.Parents.push(e);if(0==e._childItems.length){g=e.GetChildList();if(null==e.onChildCollectionChanged||void 0==e.onChildCollectionChanged)e.onChildCollectionChanged=
function(a,c){if("insert"==a.type)this.AddItemToChildList(c.index,c.items[0]);else if("remove"==a.type){var b=this._parent.GetFlatHierarchicalItemByData(c.items[0]);this._childItems.remove(b);this._parent.ClearHierarchyFromList(b,!0)}this.CanShowCue(0<this._childItems.length)};f.observable(g).bind("insert remove replaceAll",e.onChildCollectionChanged.bind(e));e._createChildList(g)}g=e._prepareChildren();a.HierItems=a.HierItems.concat(g.HierItems);a.FlatItems=a.FlatItems.concat(g.FlatItems);a.Parents=
a.Parents.concat(g.Parents);e._parent.hasDynamicResolver?e.CanShowCue(0<=e._childItems.length?!0:!1):e.CanShowCue(0<e._childItems.length)}}this.isExpanding=!1}return a};b.HierarchicalItem.prototype.UpdateDynamicResolvedChildList=function(b){this.isUpdatingChildListAsync=!1;this._resolvedChildList=b;this.ExpandAll()};b.HierarchicalItem.prototype.AddItemToChildList=function(d,a){a=new b.HierarchicalItem(this._parent,this,a,this._level+1);this._childItems.insert(d,a);this.isExpanded&&this.PrepareNewFlexyTreeViewItem(a)};
b.HierarchicalItem.prototype.PrepareChildren=function(){if(this.isExpanded){this.isExpanding=!0;for(var b=0;b<this._childItems.length;b++)this.PrepareNewFlexyTreeViewItem(this._childItems[b]);this.isExpanding=!1}};b.HierarchicalItem.prototype._prepareChildren=function(){var d={HierItems:[],FlatItems:[],Parents:[]};if(this.isExpanded){this.isExpanding=!0;for(var a=0;a<this._childItems.length;a++){var c=this._childItems[a];c.corrFlexyNodeData=c.corrFlexyNodeData?c.corrFlexyNodeData:new b.FlexyNodeData(c);
d.HierItems.push(c);d.FlatItems.push(c.corrFlexyNodeData);c.isExpandable()&&(c.isExpanded||this._parent._fxGantt.AutoExpandNodes)&&(c.isExpanded=!0,d.Parents.push(c),c=c._prepareChildren(),d.HierItems=d.HierItems.concat(c.HierItems),d.FlatItems=d.FlatItems.concat(c.FlatItems),d.Parents=d.Parents.concat(c.Parents))}this.isExpanding=!1}return d};b.HierarchicalItem.prototype.PrepareNewFlexyTreeViewItem=function(d){if(0==this._childItems.indexOf(d)){var a=this.FlatHierarchicalItemsList().indexOf(this);
this.FlatHierarchicalItemsList().insert(a+1,d);var c=new b.FlexyNodeData(d);this.FlatItemsSource().insert(a+1,c)}else{c=d;a=-1;do if(a=-1,null!=c._parentItem){var e=c._parentItem,c=c._parentItem.GetNextItem(c);null!=c?(a=this.FlatHierarchicalItemsList().indexOf(c),-1==a&&(c=c._parentItem)):c=e}else c=this._parent.GetNextItem(c),null!=c&&(a=this.FlatHierarchicalItemsList().indexOf(c),-1==a&&(c=null));while(null!=c&&-1==a);null!=c?(this.FlatHierarchicalItemsList().insert(a,d),c=new b.FlexyNodeData(d),
this.FlatItemsSource().insert(a,c)):(this.FlatHierarchicalItemsList().add(d),c=new b.FlexyNodeData(d),this.FlatItemsSource().add(c))}d.corrFlexyNodeData=c;d.isExpanded&&(d.isExpanded=!1);d.isExpandable()&&this._parent._fxGantt.AutoExpandNodes&&d.IsExpanded(!0)};b.HierarchicalItem.prototype.GetNextItem=function(b){b=this._childItems.indexOf(b);return!this.isExpanding&&b+1<this._childItems.length?this._childItems[b+1]:null!=this._parentItem?this._parentItem.GetNextItem(this):this._parent.GetNextItem(this)};
b.HierarchicalItem.prototype.ExpandAll=function(){var d=0;if(!1==this.isExpanded&&this.isExpandable()){this.isExpanding=this.isExpanded=!0;if(0==this._childItems.length)for(var a=this.GetChildList(),c=0;c<a.length;c++){var e=new b.HierarchicalItem(this._parent,this,a[c],this._level+1);e._forceToBindtheEvents=!1;this._childItems.add(e);this.isExpanded&&(this.PrepareNewFlexyTreeViewItem(e),e=e.ExpandAll(),d+=e)}else this.PrepareChildren();this.isExpanding=!1;this.OnPropertyChanged("IsExpanded")}return++d};
b.HierarchicalItem.prototype.CollapseAll=function(){if(this.isExpandable()&&this.isExpanded){for(var b=0;b<this._childItems.length;b++)this._childItems[b].CollapseAll();this.IsExpanded(!1)}};b.HierarchicalItem.prototype.GetFlexyNodeData=function(){return this.corrFlexyNodeData};b.HierarchyToList=function(d,a,c,e){if(null==d)return null;this._fnChildListResolver=a;this._expansionStateHandler=e;this.hasDynamicResolver=null!=c.dynamicResolverFunction?f.isFunction(c.dynamicResolverFunction):!1;this._fxGantt=
c;this.data=d;this.IsCollapsed=new ObjectEvent("IsCollapsed");this.NodeExpansionStateChanged=new ObjectEvent("NodeExpansionStateChanged");this.FlatHierarchicalItemsList=new RadiantQ.RQ_CollectionChangeNotifier;this.FlatItemsSource=new RadiantQ.RQ_CollectionChangeNotifier;this._topLevelItems=new RadiantQ.RQ_CollectionChangeNotifier;this.FlatItemsSource.CollectionChanged.subscribe(this.FlatItemsSourceCollectionChange,this);this.FlatHierarchicalItemsList.CollectionChanged.subscribe(this.FlatHierarchicalItemsListCollectionChange);
this.init(d);var g=this;d.CollectionChanged&&d.CollectionChanged instanceof ObjectEvent&&d.CollectionChanged.subscribe(function(a,c){if("insert"==c.type)for(var e=0;e<c.NewItems.length;e++){var d=new b.HierarchicalItem(g,null,c.NewItems[e],0);g._topLevelItems.insert(c.NewStartingIndex+e,d);g.createList(d,c.NewStartingIndex+e)}if("remove"==c.type)for(e=0;e<c.OldItems.length;e++){var d=g.GetFlatHierarchicalItemByData(c.OldItems[e]),n=d.GetChildList();null!=n&&f.observable(n).unbind("insert remove replaceAll",
d.onChildCollectionChanged);g._topLevelItems.remove(d);g.ClearHierarchyFromList(d,!0)}},this);f.observable(d).bind("insert remove replaceAll",function(a,c){if("insert"==a.type){var e=new b.HierarchicalItem(g,null,c.items[0],0);g._topLevelItems.insert(c.index,e);g.createList(e,c.index)}if("remove"==a.type){var e=g.GetFlatHierarchicalItemByData(c.items[0]),d=e.GetChildList();null!=d&&f.observable(d).unbind("insert remove replaceAll",e.onChildCollectionChanged);g._topLevelItems.remove(e);g.ClearHierarchyFromList(e,
!0)}})};b.HierarchyToList.prototype.UpdateDisplayIndex=function(){for(var b=-1,a=0;a<this.FlatItemsSource.length;a++)b++,this.FlatItemsSource[a].DisplayIndex(b)};b.HierarchyToList.prototype.GetItemFromDataSource=function(b){if((b=this.GetFlatHierarchicalItemByData(b))&&b.corrFlexyNodeData)return b.corrFlexyNodeData};b.HierarchyToList.prototype.GetFlatHierarchicalItemByData=function(b){for(var a=this.FlatHierarchicalItemsList,c=0;c<a.length;c++){var e=a[c];if(e.data===b)return e}};b.HierarchyToList.prototype.isArray=
function(b){return b instanceof Array};b.HierarchyToList.prototype.init=function(d){0<this.FlatItemsSource.length&&0<this.FlatHierarchicalItemsList.length&&(this.FlatItemsSource.remove(0,this.FlatItemsSource.length),this.FlatHierarchicalItemsList.remove(0,this.FlatHierarchicalItemsList.length));if(this.isArray(d))for(var a=0;a<d.length;a++){var c=new b.HierarchicalItem(this,null,d[a],0);this._topLevelItems.add(c);this.createList(c,a);c._forceToBindtheEvents=!1}else d=new b.HierarchicalItem(this,null,
d,0),this._topLevelItems.add(d),this.FlatHierarchicalItemsList.add(d),d=new b.FlexyNodeData(d),this.FlatItemsSource.add(d)};b.HierarchyToList.prototype.createList=function(d,a){void 0==this._fxGantt.AutoExpandNodes&&(this._fxGantt.AutoExpandNodes=!0);var c=null;if(0==a)this.FlatHierarchicalItemsList.insert(0,d),c=new b.FlexyNodeData(d),this.FlatItemsSource.insert(0,c);else if(c=this.GetNextItem(d),null!=c){var e=this.FlatHierarchicalItemsList.indexOf(c),c=new b.FlexyNodeData(d);this.FlatHierarchicalItemsList.insert(e,
d);this.FlatItemsSource.insert(e,c)}else this.FlatHierarchicalItemsList.add(d),c=new b.FlexyNodeData(d),this.FlatItemsSource.add(c);null!=c&&this._fxGantt.AutoExpandNodes&&c.HierarchicalItem.IsExpanded(!0);"function"==typeof this._fxGantt.AutoExpandNodes&&(e=this._fxGantt.AutoExpandNodes(c.HierarchicalItem),c.HierarchicalItem.IsExpanded(e))};b.HierarchyToList.prototype.FlatHierarchicalItemsListCollectionChange=function(b,a){for(var c=0;c<a.items.length;c++);};b.HierarchyToList.prototype.FlatItemsSourceCollectionChange=
function(b,a){if("insert"==b.type)for(var c=0;c<a.items.length;c++)a.items[c].HierarchicalItem.corrFlexyNodeData=a.items[c];else for(c=0;c<a.items.length;c++){var e=a.items[c].HierarchicalItem._parentItem;e&&0==e._childItems.length&&(e._childListResolved=!1)}this.UpdateDisplayIndex()};b.HierarchyToList.prototype.ClearHierarchyFromList=function(b,a){if(a){var c=this.FlatHierarchicalItemsList,e=c.indexOf(b),e=c[e];c.remove(e);c=this.FlatItemsSource;e=c.indexOf(b.corrFlexyNodeData);e=c[e];c.remove(e);
if(b.isExpanded)for(b.isExpanded=!1,c=0;c<b._childItems.length;c++)this.ClearHierarchyFromList(b._childItems[c],!0)}else{var g=this._clearHierarchyFromList(b);0<g&&(c=this.FlatHierarchicalItemsList,e=c.indexOf(b),c.splice(e+1,g),c=this.FlatItemsSource,e=c.indexOf(b.corrFlexyNodeData),c.splice(e+1,g))}};b.HierarchyToList.prototype._clearHierarchyFromList=function(b,a){if(b.isExpanded){b.isExpanded=2==arguments.length&&!0==a?b.isExpanded:!1;for(var c=length=b._childItems.length,e=0;e<c;e++){var g=b._childItems[e];
g.isExpanded&&(length+=this._clearHierarchyFromList(g,!0))}return length}return 0};b.HierarchyToList.prototype.GetNextItem=function(b){b=RQArray.prototype.indexOf.call(this._topLevelItems,b);return this._topLevelItems.length>b+1?this._topLevelItems[b+1]:null};b.HierarchyToList.prototype.ExpandAll=function(){for(var b=0;b<this.FlatHierarchicalItemsList.length;){var a=this.FlatHierarchicalItemsList[b];a.isExpandable()&&(a=a.ExpandAll(),b+=a-1);b++}};b.HierarchyToList.prototype.CollapseAll=function(){};
b.HierarchicalItem.prototype.TableRow=function(b){if(void 0==b||null==b)return this._tableRow;void 0!=this._tableRow&&(this.IsSelected()&&newValue.addClass("rq-row-selected ui-state-active"),b=f(this._tableRow).height(),f(newValue).height(b));this._tableRow=newValue};b.HierarchicalItem.prototype.ChartRow=function(b){if(void 0==b||null==b)return this._chartRow;void 0!=this._chartRow&&(this.IsSelected()&&newValue.addClass("rq-row-selected ui-state-active"),b=f(this._chartRow).height(),f(newValue).height(b));
this._chartRow=newValue}})(jQuery);
(function(f){RadiantQ.FlexyGantt.ConvertToValidTimes=function(a,c,b,g,h){g.Value=c.clone();h.Value=c.clone().addMilliseconds(b.totalMilliseconds_M())};RadiantQ.FlexyGantt.TaskItemControl={};RadiantQ.FlexyGantt.TaskItemControl.TaskBar_BorderTopWidth=1;RadiantQ.FlexyGantt.TaskItemControl.TaskBar_BorderBottomWidth=1;RadiantQ.FlexyGantt.TaskItemControl.ParentBar_BorderTopWidth=0;RadiantQ.FlexyGantt.TaskItemControl.ParentBar_BorderBottomWidth=0;"Microsoft Internet Explorer"==navigator.appName&&(f=parseInt(navigator.userAgent.split(";")[1].split(" ")[2]),
window.msie={version:f},9>f&&window.console&&console.error&&console.log("It appears that the gantt is loaded in a IE browser version earlier than IE9. Some features are not supported in earlier than IE9. Or you might be running IE 9+ in Compatibility View mode, which is also not supported by the gantt."));!1==RadiantQ.CanUseDefineProperty&&(RadiantQ.FlexyGantt.TaskItemControl.MarginForBars=2);var b=2;RadiantQ.FlexyGantt.TaskItemControl.MarginForBars_M=function(){if(0==arguments.length)return b;0>
value||5<value||(b=value)};if(RadiantQ.CanUseDefineProperty)try{Object.defineProperty(RadiantQ.FlexyGantt.TaskItemControl,"MarginForBars",{get:function(){return b},set:function(a){0>a||5<a||(b=a)}})}catch(d){window.console&&console.error("Gantt will load only in browsers: IE: 9+, FF: 11+, Chrome: 11+, Safari: 4.0.4(531.21.10)+. \n Or you might be running IE 9+ in Compatibility View mode, which is also not supported by the gantt.")}})(jQuery);
RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization={None:"None",ShrinkHeight:"ShrinkHeight"};
(function(f){(function(b){var d=function(a){function c(c,b,h,d){a.apply(this,arguments);this._fg=c;this._sourceItems=b;this._startTimeBinding=h;this._endTimeBinding=d;if(b&&this._sourceItems.CollectionChanged)this._sourceItems.CollectionChanged.subscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);else{var k=this;f.observable(b).bind("insert remove replaceAll",function(a,c){if(eventType=a.type)"insert"==eventType&&k.OnSourceItemsCollectionChanged(this,{Action:RadiantQ.NotifyCollectionChangedAction.Add,
NewItems:c.items}),"remove"==eventType&&k.OnSourceItemsCollectionChanged(this,{Action:RadiantQ.NotifyCollectionChangedAction.Remove,OldItems:c.items}),"Reset"==eventType&&k.OnSourceItemsCollectionChanged(this,{Action:RadiantQ.NotifyCollectionChangedAction.Reset})})}}__extends(c,a);return c}(ObservableCollection);b.ItemsSourceListening=d})(RadiantQ.FlexyGantt);RadiantQ.FlexyGantt.ItemsSourceListening.prototype.FlexyGantt_M=function(){return this._fg};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.SourceItems_M=
function(){return this._sourceItems};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.StartTimeBinding_M=function(){return this._startTimeBinding};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.EndTimeBinding_M=function(){return this._endTimeBinding};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"FlexyGantt",{get:function(){return this._fg}}),Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"SourceItems",{get:function(){return this._sourceItems}}),
Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"StartTimeBinding",{get:function(){return this._startTimeBinding}}),Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"EndTimeBinding",{get:function(){return this._endTimeBinding}}));RadiantQ.FlexyGantt.ItemsSourceListening.prototype.TimeRangeBasedItemsFilter_CollectionChanged=function(b,d){this.OnSourceItemsCollectionChanged(b,d)};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.OnSourceItemsCollectionChanged=
function(b){};(function(b){var d=function(a){function c(c,b,h,d){a.apply(this,arguments);this._fg=c;this._sourceItems=b;this._startTime=h;this._endTime=d;var k=this,l=f(".rq-ganttChart",this._fg.element).data("GanttChart");this.Filter=function(){this.splice(0,this.length);var a=this._fg.RaiseFilterTasksByTimeRange(this._sourceItems);if(null!=a&&void 0!=a)this.splice.apply(this,[0,a.length].concat(a));else for(a=0;a<this._sourceItems.length;a++)this.IsInTimeRange(this._sourceItems[a])&&this.insert(this.length,
this._sourceItems[a]);this.OnCollectionChanged({type:"Reset"},null)};this.refreshUIEventHandler=l.RefreshUIEvent.subscribe(this.Filter,this);this._fg.GanttChartIsLoaded&&this.Filter();this.GanttChart_Loaded=function(a,c){k._fg.GanttChartLoaded.unsubscribe(this.GanttChart_Loaded);k.Filter()};this.IsInTimeRange=function(a){var c=a.StartTime;a=a.EndTime;var b=RQTimeSpan.parse(this._fg.options.TimeRangeFilteredTasksTimeBuffer),e=new RQTimeSpan(-b.totalMilliseconds_M());return c==DateTime.MinValue||a==
DateTime.MinValue||c<f(this._fg.GetGanttChart()).data().GanttChart.options.ComputedStartTime.addTimeSpan(e)&&a<f(this._fg.GetGanttChart()).data().GanttChart.options.ComputedStartTime.addTimeSpan(e)||c>f(this._fg.GetGanttChart()).data().GanttChart.options.ComputedEndTime.addTimeSpan(b)&&a>f(this._fg.GetGanttChart()).data().GanttChart.options.ComputedEndTime.addTimeSpan(b)?!1:!0};this.OnSourceItemsCollectionChanged=function(a,c){switch(c.Action){case RadiantQ.NotifyCollectionChangedAction.Add:for(var b=
0;b<c.NewItems.length;b++){var e=c.NewItems[b];this.IsInTimeRange(e)&&this.add(e)}break;case RadiantQ.NotifyCollectionChangedAction.Remove:for(b=0;b<c.OldItems.length;b++)e=c.OldItems[b],this.remove(e);break;case RadiantQ.NotifyCollectionChangedAction.Reset:case RadiantQ.NotifyCollectionChangedAction.Replace:this.Filter()}};this.Destroy=function(a,c){this.refreshUIEventHandler&&this.refreshUIEventHandler.Dispose();this.OnSourceItemsCollectionChanged=this.IsInTimeRange=this.GanttChart_Loaded=null}}
__extends(c,a);return c}(RadiantQ.FlexyGantt.ItemsSourceListening);b.TimeRangeFilteredItems=d})(RadiantQ.FlexyGantt);RadiantQ.FlexyGantt.FilterTasksByTimeRangeEventArgs=function(b,d,a){var c=b,e=d,g=a,h=null;this.SourceList_M=function(a){if(0==arguments.length){if(c)return c;c=null}else c=a};this.TimeRangeStart_M=function(a){if(0==arguments.length){if(e)return e;e=null}else e=a};this.TimeRangeEnd_M=function(a){if(0==arguments.length){if(g)return g;g=null}else g=a};this.FilteredList_M=function(a){if(0==
arguments.length){if(h)return h;h=null}else h=a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(this,"SourceList",{get:function(){if(c)return c;c=null},set:function(a){c=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,"TimeRangeStart",{get:function(){if(e)return e;e=null},set:function(a){e=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,"TimeRangeEnd",{get:function(){if(g)return g;g=null},set:function(a){g=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,
"FilteredList",{get:function(){if(h)return h;h=null},set:function(a){h=a},enumerable:!0,configurable:!0}))}})(jQuery);
function RQTimeSpan(f,b,d,a,c,e){this._isInit=!0;var g=arguments.length;if(1==g){g=0>f?-1:1;this._totalMS=f;var h=Math.abs(f);this.days=Math.floor(h/864E5)*g;h%=864E5;this.milliseconds=this._seconds=this._minutes=this._hours=0;if(0==h)return this;this._hours=Math.floor(h/36E5)*g;h%=36E5;if(0==h)return this;this._minutes=Math.floor(h/6E4)*g;h%=6E4;if(0==h)return this;this._seconds=Math.floor(h/1E3)*g;this.milliseconds=h%1E3*g}else 4==g?(this.days=f,this._hours=b,this._minutes=d,this._seconds=a,this.milliseconds=
0,this._totalMS=864E5*f+36E5*b+6E4*d+1E3*a):5<=g?(this.days=f,this._hours=b,this._minutes=d,this._seconds=a,this.milliseconds=c,this._totalMS=5<g?e:864E5*f+36E5*b+6E4*d+1E3*a+c):this._totalMS=this.milliseconds=this._seconds=this._minutes=this._hours=0;return this}window.RQTimeSpan=RQTimeSpan;
(function(){var f=null,b=null,d=null;RQTimeSpan.MaxValue_M=function(){return f};RQTimeSpan.MinValue_M=function(){return b};RQTimeSpan.Zero_M=function(){return d};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RQTimeSpan,"MaxValue",{get:function(){return f},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(RQTimeSpan,"MinValue",{get:function(){return b},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(RQTimeSpan,"Zero",{get:function(){return d},set:function(){},
enumerable:!0,configurable:!1}));RQTimeSpan.parse=function(a){if(a instanceof RQTimeSpan)return a;if("string"!=typeof a)return RQTimeSpan.Zero;try{var c=a.split(".");if(2==c.length){var b=parseInt(c[0]),g=c[1].split(":"),h=parseInt(g[0]),d=parseInt(g[1]),f=parseInt(g[2]);return new RQTimeSpan(b,h,d,f,0)}g=c[0].split(":");if(1==g.length){var l=g[0];a="";for(var n=null,p="",f=d=h=b=g=c=0,q=!1,r=!1,s=!1,u=0;u<=l.length;u++){var w=l.charAt(u),t;t="NaN"!=parseInt(w).toString()?!0:!1;if(t)q=!0,a+=w;else{if(""!=
p&&!0==q){s=!0;switch(p){case "PT":p="";break;case "P":p="";break;case "Y":p="";c=n;r=!0;break;case "M":p="";r?(g=n,r=!1):d=n;break;case "DT":p="";b=n;break;case "H":p="";h=n;break;case "S":p="",f=n}n=parseInt(a);a=""}p+=w}}l=0;return!0!=s?(l=parseInt(a),RQTimeSpan.Zero_M().addMilliseconds(l)):new RQTimeSpan(b+365*c+30*g,h,d,f,l)}h=parseInt(g[0],10);d=parseInt(g[1],10);f=parseInt(g[2],10);return new RQTimeSpan(0,h,d,f,0)}catch(v){return RQTimeSpan.Zero}};RQTimeSpan.fromTicks=function(a){return new RQTimeSpan(a/
1E4)};RQTimeSpan.FromDays=function(a){if(!a)return RQTimeSpan.Zero;var c=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(c*Math.floor(a),24*c*(a%1),0,0)};RQTimeSpan.FromHours=function(a){if(!a)return RQTimeSpan.Zero;var c=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(0,c*Math.floor(a),60*c*(a%1),0)};RQTimeSpan.FromMinutes=function(a){if(!a)return RQTimeSpan.Zero;var c=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(0,0,c*Math.floor(a),60*c*(a%1))};RQTimeSpan.prototype.days_M=function(a){if(0==arguments.length)return this.days;
this.days=a};RQTimeSpan.prototype.hours_M=function(a){if(0==arguments.length)return this._hours;if(-24<a&&24>a)this._hours=a;else{var c=a%1;for(c&&this.minutes_M(60*c);24<=a;)this.days++,a-=24;c=0>a?-1:1;a=Math.abs(a);this._hours=c*Math.floor(a)}};RQTimeSpan.prototype.minutes_M=function(a){if(0==arguments.length)return this._minutes;if(-60<a&&60>a)this._minutes=a;else{var c=a%1;for(c&&this.seconds_M(60*c);60<=a;)c=this.hours_M(),this.hours_M(++c),a-=60;this._isInit&&(a+=this._minutes);c=0>a?-1:1;
a=Math.abs(a);this._minutes=c*Math.floor(a)}};RQTimeSpan.prototype.seconds_M=function(a){if(0==arguments.length)return this._seconds;if(-60<a&&60>a)this._seconds=a;else{for(;60<=a;){var c=this.minutes_M();this.minutes_M(c++);a-=60}this._isInit&&(a+=this._seconds);this._seconds=Math.round(a)}};RQTimeSpan.prototype.milliseconds_M=function(a){if(0==arguments.length)return this.milliseconds;this.milliseconds=a};RQTimeSpan.prototype.totalMilliseconds_M=function(){return this._totalMS};RQTimeSpan.prototype.Ticks_M=
function(){return 1E4*this.totalMilliseconds_M()};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RQTimeSpan.prototype,"hours",{get:function(){return this._hours},set:function(a){var c=a%1;c&&(this.minutes=60*c);for(;24<=a;)this.days++,a-=24;c=0>a?-1:1;a=Math.abs(a);this._hours=c*Math.floor(a)}}),Object.defineProperty(RQTimeSpan.prototype,"minutes",{get:function(){return this._minutes},set:function(a){var c=a%1;c&&(this.seconds=60*c);for(;60<=a;)this.hours++,a-=60;this._isInit&&(a+=this._minutes);
c=0>a?-1:1;a=Math.abs(a);this._minutes=c*Math.floor(a)}}),Object.defineProperty(RQTimeSpan.prototype,"seconds",{get:function(){return this._seconds},set:function(a){for(;60<=a;)this.minutes++,a-=60;this._isInit&&(a+=this._seconds);this._seconds=Math.round(a)}}),Object.defineProperty(RQTimeSpan.prototype,"totalMilliseconds",{get:function(){return 864E5*this.days+36E5*this._hours+6E4*this._minutes+1E3*this._seconds},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RQTimeSpan.prototype,
"Ticks",{get:function(){return 1E4*this.totalMilliseconds},set:function(){},enumerable:!0,configurable:!0}));RQTimeSpan.prototype.valueOf=function(){return this.totalMilliseconds_M()};RQTimeSpan.prototype.getTotalDays=function(){return this.totalMilliseconds_M()/864E5};RQTimeSpan.prototype.getTotalHours=function(){return this.totalMilliseconds_M()/36E5};RQTimeSpan.prototype.getTotalMinutes=function(){return this.totalMilliseconds_M()/6E4};RQTimeSpan.prototype.getTotalSeconds=function(){return this.totalMilliseconds_M()/
1E3};RQTimeSpan.prototype.equals=function(a){return 0===this.compareTo(a)};RQTimeSpan.prototype.add=function(a){return null===a?this:this.addSeconds(a.totalMilliseconds_M()/1E3)};RQTimeSpan.prototype.subtract=function(a){return null===a?this:new RQTimeSpan(this._totalMS-a._totalMS)};RQTimeSpan.prototype.addDays=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+864E5*a)};RQTimeSpan.prototype.addHours=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+36E5*a)};RQTimeSpan.prototype.addMinutes=
function(a){return new RQTimeSpan(this.totalMilliseconds_M()+6E4*a)};RQTimeSpan.prototype.addSeconds=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+1E3*a)};RQTimeSpan.prototype.addMilliseconds=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+a)};RQTimeSpan.prototype.get12Hour=function(){return 12<this.hours?this.hours-12:0===this.hours?12:this.hours};RQTimeSpan.prototype.getDesignator=function(){return 12>this.hours?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator};
RQTimeSpan.prototype.isGreaterThan=function(a){return this.totalMilliseconds_M()>a.totalMilliseconds_M()?!0:!1};RQTimeSpan.prototype.isGreaterThanOrEqualTo=function(a){return this.totalMilliseconds_M()>=a.totalMilliseconds_M()?!0:!1};RQTimeSpan.prototype.isLessThan=function(a){return this.totalMilliseconds_M()<a.totalMilliseconds_M()?!0:!1};RQTimeSpan.prototype.compareTo=function(a){a||(a=RQTimeSpan.Zero_M());return this>a?1:this<a?-1:0};RQTimeSpan.prototype.toString=function(){var a=this.days_M(),
c=this.hours_M(),b=this.minutes_M(),g=this.seconds_M(),c=10>c?"0"+c:c,b=10>b?"0"+b:b,g=10>g?"0"+g:g;return 0<a?""+a+"."+c+":"+b+":"+g+"":""+c+":"+b+":"+g+""};RQTimeSpan.prototype.toJSON=function(){return this.toString()};window.TimeSpan||(window.TimeSpan=RQTimeSpan);RQTimeSpan.prototype.getEqualNegative=function(){return new RQTimeSpan(-this.days,-this._hours,-this._minutes,-this._seconds,-this.milliseconds,-this._totalMS)};f=new RQTimeSpan(10675199,2,48,5,477);b=new RQTimeSpan(-10675199,-2,-48,-5,
-477);d=new RQTimeSpan(0,0,0,0,0)})();
(function(f){RadiantQ.Gantt.Utils.TimeComputingUtils={};RadiantQ.Gantt.Utils.TimeComputingUtils.AddLagToStartTime=function(a,c,b){return null==b?a.addTimeSpan(c):c.isGreaterThanOrEqualTo(RQTimeSpan.Zero_M())?b.GetEnd(a,c):b.GetStart(a,new RQTimeSpan(-c.totalMilliseconds_M()))};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType=function(a,c,b){var g=RadiantQ.Gantt;if(c==g.TimeScaleType.Weeks)switch(a){case g.TimeScaleType.Minutes:return 10080*b;case g.TimeScaleType.Hours:return 168*b;
case g.TimeScaleType.Days:return 7*b;case g.TimeScaleType.Weeks:return b;case g.TimeScaleType.Months:case g.TimeScaleType.Years:return 1}else if(c==g.TimeScaleType.Days)switch(a){case g.TimeScaleType.Minutes:return 1440*b;case g.TimeScaleType.Hours:return 24*b;case g.TimeScaleType.Days:return b;case g.TimeScaleType.Weeks:return b/7;case g.TimeScaleType.Months:case g.TimeScaleType.Years:return 1}else if(c==g.TimeScaleType.Hours)switch(a){case g.TimeScaleType.Minutes:return 60*b;case g.TimeScaleType.Hours:return b;
case g.TimeScaleType.Days:return b/24;case g.TimeScaleType.Weeks:return b/168;case g.TimeScaleType.Months:case g.TimeScaleType.Years:return 1}else if(c==g.TimeScaleType.Minutes)switch(a){case g.TimeScaleType.Minutes:return b;case g.TimeScaleType.Hours:return b/60;case g.TimeScaleType.Days:return b/1440;case g.TimeScaleType.Weeks:return b/10080;case g.TimeScaleType.Months:case g.TimeScaleType.Years:return 1}throw"Not yet supported 2";};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeSpanToTimeUnits=
function(a,c){var b=RadiantQ.Gantt;switch(a){case b.TimeScaleType.Minutes:return c.getTotalMinutes();case b.TimeScaleType.Hours:return c.getTotalHours();case b.TimeScaleType.Days:return c.getTotalDays();case b.TimeScaleType.Months:return c.getTotalDays()/30;case b.TimeScaleType.Weeks:return c.getTotalDays()/7;case b.TimeScaleType.Years:return c.getTotalDays()/365;default:throw"Missing case for TimeScaleType: "+a+" in ConvertTimeSpanToTimeUnits";}};RadiantQ.Gantt.Utils.TimeComputingUtils.IsWorkingTime=
function(a,c,b){var g=RadiantQ.Gantt;if(null!=b)switch(b=null==b?a:b.ConvertToNextWorkingTime(a),c){case g.TimeScaleType.Minutes:return!a.Date().compareTo(b.Date())&&b.getHours()==a.getHours()&&b.getMinutes()==a.getMinutes();case g.TimeScaleType.Hours:return!a.Date().compareTo(b.Date())&&b.getHours()==a.getHours();case g.TimeScaleType.Days:return!a.Date().compareTo(b.Date());case g.TimeScaleType.Weeks:return this.FirstDayOfWeek(b).equals(this.FirstDayOfWeek(a));case g.TimeScaleType.Months:return b.getFullYear()==
a.getFullYear()&&b.getMonth()==a.getMonth();case g.TimeScaleType.Years:return b.getFullYear()==a.getFullYear()}return!0};RadiantQ.Gantt.Utils.TimeComputingUtils.FirstDayOfWeek=function(a){var c=a.getDay();return c==Date.CultureInfo.firstDayOfWeek?a.Date():0==Date.CultureInfo.firstDayOfWeek?a.Date().clone().addDays(-c):0>c-Date.CultureInfo.firstDayOfWeek?a.Date().moveToDayOfWeek(Date.CultureInfo.firstDayOfWeek,-1):a.Date().moveToDayOfWeek(Date.CultureInfo.firstDayOfWeek,1)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInWeek=
function(a){var c=a.getDay(),c=c-Date.CultureInfo.firstDayOfWeek;0>c&&(c=7+c);return 7-c-a.getHours()/24-a.getMinutes()/1440};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInMonth=function(a){var c=(new Date(a.getFullYear(),a.getMonth(),1)).addMonths(1).addDays(-1);return rqTCUtils.GetTimeSpan(a,c).getTotalDays()+1};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInYear=function(a){var c=(new Date(a.getFullYear(),0,1)).clone().addYears(1).addDays(-1);return rqTCUtils.GetTimeSpan(a,
c).getTotalDays()+1};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToFractionalWorkingDay=function(a,c,b,g){if(c.equals(b))return 0;if(null==g){var h=b.totalMilliseconds_M(),d=c.totalMilliseconds_M();return(new RQTimeSpan(h-d)).getTotalHours()/24}h=new RadiantQ.Gantt.TimePeriod(a.addTimeSpan(c),a.addTimeSpan(b));d=RQTimeSpan.Zero_M();a=g.WorkTimeScheduleProvider(a);if(null!=a){c=a._intervals;for(b=0;b<c.length;b++)(g=c[b].Intersect(h))&&(d=d.add(g.Duration_M()));return isNaN(d.getTotalHours()/a.Duration.getTotalHours())?
0:d.getTotalHours()/a.Duration.getTotalHours()}return(b.Ticks_M()-c.Ticks_M())/RQTimeSpan.FromDays(1).Ticks_M()};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToFractionalDurationInHours=function(a,c,b){if(null==b)return 24*c;a=b.WorkTimeScheduleProvider(a);return null!=a?a.Duration.getTotalHours()*c:0};RadiantQ.Gantt.Utils.TimeComputingUtils.GetLeadingNonWorkingHours=function(a,c){if(null==c)return RQTimeSpan.Zero_M();var b=c.WorkTimeScheduleProvider(a.Date());return null!=b?new RQTimeSpan(b.Start-
a.Date()):RQTimeSpan.Zero_M()};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType=function(a,c,b){var g=RadiantQ.Gantt;if(c==g.TimeScaleType.Years)switch(a){case g.TimeScaleType.Minutes:return 525600*b;case g.TimeScaleType.Hours:return 8760*b;case g.TimeScaleType.Days:return 365*b;case g.TimeScaleType.Weeks:return 52*b;case g.TimeScaleType.Months:return 12*b;case g.TimeScaleType.Years:return b}else if(c==g.TimeScaleType.Months)switch(a){case g.TimeScaleType.Minutes:return 44640*
b;case g.TimeScaleType.Hours:return 744*b;case g.TimeScaleType.Days:return 31*b;case g.TimeScaleType.Weeks:return 4*b;case g.TimeScaleType.Months:return b;case g.TimeScaleType.Years:return 1}return g.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(a,c,b)};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextDay=function(a){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);return 0<a.compareTo(c)?c.clone().addDays(1):a};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextHour=function(a){var c=
new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),0,0);0<a.compareTo(c)&&c.addHours(1);return c};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextMinute=function(a){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0);0<a.compareTo(c)&&c.addMinutes(1);return c};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextYear=function(a){return(new Date(a.getFullYear(),0,1,0,0,0)).addYears(1)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextWeek=function(a){a=
a.addDays(RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInWeek(a));return RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextDay(a)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextMonth=function(a){var c=a.getMonth(),b=new Date(a.getFullYear(),c+1,1);c==b.getMonth()&&(b=new Date(a.getFullYear(),c+1,1,1,0,0));return b};RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeBreaks=function(a,c,b,g){if(!1!=a instanceof Date&&!1!=c instanceof Date){g||(g=[]);var h=new RQTimeSpan(c-a);if(h<=RQTimeSpan.Zero_M())return!1;
if(null!=b){var d=b.ConvertToNextWorkingTime(a).equals(a)?!0:!1;g.push(a);a=b.ConvertToNextWorkingTimeIntervals(a,h);if(0==a.length)return!1;!d&&a[0].Start_M().isLessThan(c)&&g.push(a[0].Start_M());for(b=1;b<a.length;b++)if(!1==a[b].Start_M().equals(a[b-1].End_M())){if(0<=a[b-1].End_M().compareTo(c))break;g.push(a[b-1].End_M());if(0<=a[b].Start_M().compareTo(c))break;g.push(a[b].Start_M())}b==a.length&&a[b-1].End_M().isLessThan(c)&&g.push(a[b-1].End_M());g.push(c);return d}g.push(a);g.push(c);return!0}};
RadiantQ.Gantt.BindingMode={OneWay:"OneWay",TwoWay:"TwoWay"};void 0==window.__rqGanttInSP&&void 0==Array.prototype.filter&&(RadiantQ.canLogMessages&&window.console&&console.log&&console.log("'__rqGanttInSP' value is undefined."),Array.prototype.filter=function(a,c){if(void 0===this||null===this)throw new TypeError;var b=Object(this),g=b.length>>>0;if("function"!==typeof a)throw new TypeError;for(var h=[],d=0;d<g;d++)if(d in b){var f=b[d];a.call(c,f,d,b)&&h.push(f)}return h});Date.prototype.Date=function(){return new Date(this.getFullYear(),
this.getMonth(),this.getDate(),0,0,0)};Date.prototype.addTimeSpan=function(a){return a?this.clone().add({millisecond:a.millisecond||a.milliseconds_M(),seconds:a.seconds_M(),minutes:a.minutes_M(),hours:a.hours_M(),days:a.days_M()}):this};Date.MaxValue=new Date(9999,11,30,11,59,59);Date.MinValue=new Date(1E3,0,1,12,0,0);var b={};window.DateTime=b;b.MaxValue=new Date(9999,11,30,11,59,59);b.MinValue=new Date(1E3,0,1,12,0,0);Date.prototype.isGreaterThan=function(a){return 1==this.compareTo(a)?!0:!1};Date.prototype.isLessThan=
function(a){return-1==this.compareTo(a)?!0:!1};Date.prototype.subtract=function(a){return this-a};String.prototype.trim=function(){if(0==arguments.length)return this.replace(/^\s+|\s+$/,"");for(var a=this,c=0;c<arguments.length;c++)a=a.replace(arguments[c],"");return a};String.prototype.trimEnd=function(){if(0==arguments.length)return this.replace(/^\s+|\s+$/,"");var a=this.lastIndexOf(arguments[0]),c=this.slice(0,a),a=this.slice(a+1);return c+a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(String,
"trim",{enumerable:!1}),Object.defineProperty(String,"trimEnd",{enumerable:!1}));try{window.JSON.toXML=function(a,c,b){if(a instanceof Array){for(var g="<"+c+">",h=0;h<a.length;h++){var d=a[h],g=g+"\n",f="<"+b+" ",l;for(l in d)void 0!=d[l]&&(f+=l+'="'+d[l]+'" ');f+="/>";g+=f}return'<?xml version="1.0" encoding="utf-8" ?>\n'+(g+("\n</"+c+">"))}}}catch(d){}RadiantQ.RQ_ObservableCollection=function(a){Array.call(a);a.DataSource=a;a.CollectionChanged=new ObjectEvent("CollectionChanged");a.push=function(a){Array.prototype.push.call(this,
a);args={Action:"Add",NewItems:[a]};this.CollectionChanged.raise(this,args)};a.splice=function(a,b,g){var h=[],h=void 0==g?Array.prototype.splice.call(this,a,b):Array.prototype.splice.call(this,a,b,g);args={};g&&(args.Action="Add",args.NewItems=g instanceof Array?g:[g]);b&&0<b&&(args.Action="Remove",args.OldItems=h);this.CollectionChanged.raise(this,args)};a.pop=function(){var a=Array.prototype.pop.call(this);args={};a&&(args.Action="Remove",args.OldItems=[a]);this.CollectionChanged.raise(this,args);
return a};a.remove=function(a){return RemoveInArray(this,a)};return a};RadiantQ.RQ_ObservableCollection.prototype=[];window.ko&&(ko.bindingHandlers.GanttControl={init:function(a,c,b,g,h){f(a).GanttControl(c())},update:function(a,c,b,g,h){}},ko.bindingHandlers.FlexyGantt={init:function(a,c,b,g,h){f(a).FlexyGantt(c())},update:function(a,c,b,g,h){}});RadiantQ.Gantt.Utils.SaveCanvasAsImage=function(a,c,b){if(a.msToBlob&&window.navigator.msSaveOrOpenBlob)window.ganttBlob=a.msToBlob(),window.navigator.msSaveOrOpenBlob(ganttBlob,
c);else if(window.Blob||window.webkitURL){window.readyState=0;var g=document.createElementNS("http://www.w3.org/1999/xhtml","a");g.target="_blank";g.href=a.toDataURL("image/png");g.download=c;a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);g.dispatchEvent(a);window.readyState=2;b&&setTimeout(function(){window.close()},1E3)}};RadiantQ.Gantt.Utils.getChildObject=function(a,c){for(var b=c.split("."),g=a,h=0;h<b.length-1;h++)var d=b[h],g=g[d+"_M"]?
g[d+"_M"]():g[d];return g};RadiantQ.Gantt.Utils.FilterOptions=function(){this.IncludeParent=this.AlwaysShowSummaryTask=!1};RadiantQ.Gantt.Utils.GetEarliestStartAndLatestEndTimes=function(a){if("FlexyGantt"==a.GanttType){a=a.options.DataSource;for(var c=Date.MaxValue,b=Date.MinValue,g=0;g<a.length;g++){var h=a[g].Tasks.length;if(0<h)for(var d=0;d<h;d++){var f=a[g].Tasks[d].StartTime,l=a[g].Tasks[d].EndTime;f<c&&(c=f);l>b&&(b=l)}}return{EarliestStart:c,LatestEnd:b}}};RadiantQ.Gantt.Utils.GetTotalHorizontalPages=
function(a,c,b,g){return a&&c&&b&&g?(a=g.ConvertTimeToX(a),c=g.ConvertTimeToX(c)-a,totalScrollPages=Math.ceil(c/b)):-1};RadiantQ.Gantt.Utils.setInterval=function(a,c,b){setTimeout(function(){a();setInterval(function(){a()},c)},b)}})(jQuery);
(function(){function f(a,c,h,d,f){if(null==c)this._binding=c,this.IsBound=!1;else{this.model=f;this._isValueUpdating=this._isSrcUpdating=!1;d=c.Property.split(".");h=c.Property;1<d.length&&(h=d.pop(),d=d.join(),a=RadiantQ.Template.getter(d,a));this.property=h;c.Converter&&(c.Convert=c.Converter.Convert,c.ConvertBack=c.Converter.ConvertBack);this.BindingMode=d=c.Mode||RadiantQ.Gantt.BindingMode.OneWay;this.boundedObj=a;this._binding=this.OriginalBinding=c;this._isdisposed=!1;this._value=null;this.ValueChanged=
new ObjectEvent("ValueChanged");if(a&&a._boundProps&&this.property&&a._boundProps[this.property]&&"function"!=typeof a[this.property]&&a._boundProps[this.property])for(h=a._boundProps[this.property],d=0;d<h.length;d++){var l=h[d];l.PropertyChangedTrigger&&l.model==this.model&&l.PropertyChangedTrigger.Dispose()}f&&f.canInsertPropertyChangeTriggeringPropertiesInData&&(this._isdisposed=!1,this.PropertyChangedTrigger=new b(a,this.property));this._value=c.Convert&&"function"==typeof c.Convert?"function"==
typeof a[this.property]?c.Convert.call(a,a[this.property]()):c.Convert.call(a,a[this.property],a):"function"==typeof a[this.property]?a[this.property]():"function"==typeof a[this.property+"_M"]?a[this.property+"_M"]():a[this.property];a.PropertyChanged&&!1==a.PropertyChanged.isSubscribed(this.onSourcePropertyChanged,a)&&a.PropertyChanged.subscribe(this.onSourcePropertyChanged,a);a._boundProps||(a._boundProps={},RadiantQ.CanUseDefineProperty&&Object.defineProperty(a,"_boundProps",{enumerable:!1,configurable:!0}));
a._boundProps[this.property]?!1==(-1!=a._boundProps[this.property].indexOf(this))&&a._boundProps[this.property].push(this):a._boundProps[this.property]=[this]}}function b(a,c,b){this.originalData=a;this.originalProperty=c;var m=c.split(".");1<m.length&&(c=m.pop(),m=m.join(),a=RadiantQ.Template.getter(m,a));this.data=a;this.property=c;a.PropertyChanged||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));var m=a,f=a[c];void 0===b&&"function"===typeof a.ID&&(b=!0);if("function"===typeof f)b=!0,b=
function(b){a.PropertyChanged.raise(a,{PropertyName:c,Value:b})},a[c].subscribe(b);else{if(!0==RadiantQ.CanUseDefineProperty){var l=d(a,c);a["Bounded_"+c]=l;b&&(m={});Object.defineProperty(m,c,{get:function(){return l.get?l.get.call(this):"function"===typeof l.value?l.value.call(this):l.value},set:function(a){l.set?l.set.call(this,a):"function"===typeof l.value?l.value.call(this,a):l.value=a;this.PropertyChanged.raise(this,{PropertyName:c,Value:a})},enumerable:!0,configurable:!0})}void 0===f&&b&&
(b=ko.mapping.fromJS(m[c]),a[c]=b,b=function(b){a.PropertyChanged.raise(a,{PropertyName:c,Value:b})},a[c].subscribe(b))}}function d(a,c){var b=a,d=a[c],f=Object.getOwnPropertyDescriptor(b,c);if(void 0===d&&void 0===f)return{value:void 0};for(;void 0===f&&void 0!==d;)b=Object.getPrototypeOf(b),f=Object.getOwnPropertyDescriptor(b,c),d=a[c];return f}function a(a,c,b){var d=a,f=c,l=c.split(".");1<l.length&&(c=l.pop(),l=l.join(),a=RadiantQ.Template.getter(l,a));a.PropertyChanged||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));
var n=a[c];RadiantQ.CanUseDefineProperty&&Object.defineProperty(a,c,{get:function(){return n},set:function(a){if(a&&a.equals&&n&&n.equals){if(!1==a.equals(n)){var b=n;n=a;this.PropertyChanged.raise(this,{PropertyName:c,OldValue:b,Value:a,ActualData:d,ActualProperty:f})}}else a!=n&&(b=n,n=a,!1==RadiantQ.Gantt.Utils.InjectGetAndSetOnData.HoldTriggeringPropertyChange&&this.PropertyChanged instanceof ObjectEvent&&this.PropertyChanged.raise(this,{PropertyName:c,OldValue:b,Value:a,ActualData:d,ActualProperty:f}))},
enumerable:!0,configurable:!0});b&&(a[c+"_M"]=function(a){if(0==arguments.length)return n;if(a&&a.equals){if(!1==a.equals(n)){var b=n;this[c]=n=a;this.PropertyChanged.raise(this,{PropertyName:c,OldValue:b,Value:a,ActualData:d,ActualProperty:f})}}else a!=n&&(b=n,this[c]=n=a,this.PropertyChanged.raise(this,{PropertyName:c,OldValue:b,Value:a,ActualData:d,ActualProperty:f}))})}function c(a,c,b){this.Property=a;this.Mode=c;this.Converter=b}f.prototype.IsBound_M=function(){return null!=this._binding};f.prototype.Binding_M=
function(){return this._binding};f.prototype.Value_M=function(a){if(0==arguments.length)return this._value;!1!=this.IsBound_M()&&this._value!==a&&(this._isValueUpdating=!0,this.BindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&!1==this._isSrcUpdating&&(a=this.updateSrc(a)),this._value=this._binding.Convert?this._binding.Convert.call(this,a,this.boundedObj):a,this._isValueUpdating&&this.ValueChanged&&this.ValueChanged.raise(this,this._value),this._isValueUpdating=!1)};RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(f.prototype,"IsBound",{get:function(){return this.IsBound_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Binding",{get:function(){return this.Binding_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Value",{get:function(){return this.Value_M()},set:function(a){this.Value_M(a)},enumerable:!0,configurable:!0}));f.prototype.updateSrc=function(a){if(this.BindingMode!=RadiantQ.Gantt.BindingMode.TwoWay)return a;
this._isSrcUpdating=!0;var c=this.boundedObj[this.property],b=this._binding;a=b.ConvertBack?b.ConvertBack.call(this,a,this.boundedObj):a;if(null==c||void 0==c)this.boundedObj[this.property]=a;else if("function"==typeof c)this.boundedObj[this.property](a);else this.boundedObj[this.property]=a;this._isSrcUpdating=!1;return a};f.prototype.onSourcePropertyChanged=function(a,c){var b=this._boundProps[c.PropertyName];if(b)for(var d=0;d<b.length;d++){var f=b[d];f._isSrcUpdating=!0;!1==f._isValueUpdating&&
f.Value_M(c.Value);f._isSrcUpdating=!1}};f.prototype.Dispose=function(){this._isdisposed=!0;if(!1!=this.IsBound){this.model&&this.model.canInsertPropertyChangeTriggeringPropertiesInData&&this.UnBindDataWithGantt();this.PropertyChanged&&this.PropertyChanged.Dispose();this.ValueChanged&&this.ValueChanged.Dispose();delete this.PropertyChanged;delete this.ValueChanged;delete this.Value;var a=this.boundedObj._boundProps,c=!0,b;for(b in a){c=!1;break}c&&(this.boundedObj.PropertyChanged&&this.boundedObj.PropertyChanged.unsubscribe(this.onSourcePropertyChanged,
this.boundedObj),delete this.boundedObj._boundProps)}};f.prototype.UnBindDataWithGantt=function(){var a=this._value,c=this._binding.Property;this.PropertyChangedTrigger&&this.PropertyChangedTrigger.Dispose(a);delete this[c+"_Binder"];delete this.boundedObj[c+"_Binder"];delete this.boundedObj._boundProps[c]};RadiantQ.Gantt.Utils.ValueBinder=f;b.prototype.Dispose=function(a){var c=this.data,b=this.property,d=c["Bounded_"+b];!1==RadiantQ.CanUseDefineProperty&&(a=c[b]);delete c[b];delete c["Bounded_"+
b];RadiantQ.CanUseDefineProperty&&void 0!==d?(void 0===d.configurable&&(d.configurable=!0),Object.defineProperty(c,b,d)):c[b]=a};RadiantQ.Gantt.Utils.InsertPropertyChangedTriggeringProperty=function(c,b,h,d){if(c&&b&&!1!=b instanceof Array)for(c.PropertyChanged||(c.PropertyChanged=new ObjectEvent("PropertyChanged")),d&&"function"==typeof d&&c.PropertyChanged.subscribe(d),d=0;d<b.length;d++)new a(c,b[d],h)};RadiantQ.Gantt.Utils.InjectGetAndSetOnData=function(c,b,h,d){c.PropertyChanged||(c.PropertyChanged=
new ObjectEvent("PropertyChanged"));d&&"function"==typeof d&&c.PropertyChanged.subscribe(d);return new a(c,b,h)};RadiantQ.Gantt.Utils.InjectGetAndSetOnData.HoldTriggeringPropertyChange=!1;RadiantQ.BindingOptions=function(a,b,h){if(a)return b||(b=RadiantQ.Gantt.BindingMode.TwoWay),new c(a,b,h);window.console&&console.error&&console.error(a+" is not a vaild PropertyName for BindingOptions")};RadiantQ.ValueConverter=function(){};RadiantQ.ValueConverter.prototype.Convert=function(a,c){return a};RadiantQ.ValueConverter.prototype.ConvertBack=
function(a,c){return a}})();var ns_gantt=RadiantQ.Gantt;window.ns_gantt=ns_gantt;var rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;
(function(f){RadiantQ.Gantt.Global={};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseScaleType=function(b,d,a,c){var e=d>a,g=0;if(e){var h=a;a=d;d=h}var h=d.Date(),m=a.Date();switch(b){case ns_gantt.TimeScaleType.Minutes:g=rqTCUtils.GetTimeSpan(d,a).getTotalMinutes();break;case ns_gantt.TimeScaleType.Hours:g=rqTCUtils.GetTimeSpan(d,a).getTotalHours();break;case ns_gantt.TimeScaleType.Days:m.equals(h)?g=rqTCUtils.ConvertToFractionalWorkingDay(m,rqTCUtils.GetTimeSpan(h,d),rqTCUtils.GetTimeSpan(m,
a),c):(b=rqTCUtils.ConvertToFractionalWorkingDay(h,rqTCUtils.GetTimeSpan(h,d),new RQTimeSpan(0,24,0,0),c),b+=rqTCUtils.GetTimeSpan(h,a).days-1,g=b+=rqTCUtils.ConvertToFractionalWorkingDay(m,RQTimeSpan.Zero_M(),rqTCUtils.GetTimeSpan(m,a),c));break;case ns_gantt.TimeScaleType.Weeks:g=rqTCUtils.ConvertToUnitsOfBaseScaleType(ns_gantt.TimeScaleType.Days,d,a,c)/7;break;case ns_gantt.TimeScaleType.Years:g=rqTCUtils.ConvertToUnitsOfBaseScaleType(ns_gantt.TimeScaleType.Days,d,a,c)/365}e&&(g=-g);return g};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan=function(b,d){d=rqTCUtils.GetAdjustEndForDSTChange(b,d);return new RQTimeSpan(d-b)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetAdjustEndForDSTChange=function(b,d){var a=b.getTimezoneOffset(),c=d.getTimezoneOffset();return a!=c?d.clone().addHours((a-c)/60):d};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan=function(b,d){switch(b){case ns_gantt.TimeScaleType.Minutes:return new RQTimeSpan(0,0,d,0);case ns_gantt.TimeScaleType.Hours:return new RQTimeSpan(0,
d,0,0);case ns_gantt.TimeScaleType.Days:return new RQTimeSpan(d,0,0,0);case ns_gantt.TimeScaleType.Months:return new RQTimeSpan(30*d,0,0,0);case ns_gantt.TimeScaleType.Weeks:return new RQTimeSpan(7*d,0,0,0);case ns_gantt.TimeScaleType.Years:return new RQTimeSpan(365*d,0,0,0);default:throw"Missing case for TimeScaleType: {0} in ConvertTimeUnitsToTimeSpan"+b.toString();}};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertUnitsInBaseScaleTypeToDurationInHours=function(b,d,a,c,e){var g=0;if(null!=d)switch(g=
new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()),b){case ns_gantt.TimeScaleType.Minutes:if(null==e)return(c-a)/60;c=d.clone().addTimeSpan(new RQTimeSpan(0,c-a,0,0));e=e.GetEffort(d,c);return e.getTotalHours();case ns_gantt.TimeScaleType.Hours:if(null==e)return c-a;c=d.clone().addTimeSpan(new RQTimeSpan(0,c-a,0,0));e=e.GetEffort(d,c);return e.getTotalHours();case ns_gantt.TimeScaleType.Days:var h=Math.round(a);b=Math.round(c);if(h==b)return rqTCUtils.ConvertToFractionalDurationInHours(d,
c-a,e);if(c>a){d=g;var m=d.Date(),g=rqTCUtils.ConvertToFractionalDurationInHours(m,1-(a-h),e);a=parseInt(Math.round(c-h))-1;for(h=1;h<=a;h++)d=d.addDays(1),m=d.Date(),g+=rqTCUtils.ConvertToFractionalDurationInHours(m,1,e);d=d.addDays(1);m=d.Date();g+=rqTCUtils.ConvertToFractionalDurationInHours(m,c-b,e)}else{d=g;m=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds());g=rqTCUtils.ConvertToFractionalDurationInHours(m,a-h,e);a=Math.abs(parseInt(Math.round(c-h))-
1);for(h=1;h<=a;h++)d=d.addDays(-(new RQTimeSpan(1,0,0,0)).getTotalDays()),m=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()),g+=rqTCUtils.ConvertToFractionalDurationInHours(m,1,e);d=d.addDays(-(new RQTimeSpan(1,0,0,0)).getTotalDays());m=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds());g+=rqTCUtils.ConvertToFractionalDurationInHours(m,1-(c-b),e);g=-g}break;default:throw new Exception("Not supported yet.");}return g};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToEndTimeInBaseScaleType=function(b,d,a,c,e){var g=new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);switch(b){case ns_gantt.TimeScaleType.Minutes:if(null==e)return d.addMinutes((new RQTimeSpan(0,c-a,0,0)).getTotalHours());c=new RQTimeSpan(0,0,c-a,0);c=d.addTimeSpan(c);return e.ConvertToNextWorkingTime(c);case ns_gantt.TimeScaleType.Hours:if(null==e)return d.addHours((new RQTimeSpan(0,c-a,0,0)).getTotalHours());c=new RQTimeSpan(0,c-a,0,0);c=d.addTimeSpan(c);
return e.ConvertToNextWorkingTime(c);case ns_gantt.TimeScaleType.Days:var h=Math.round(a);b=Math.round(c);if(h==b)return d.addHours((new RQTimeSpan(0,rqTCUtils.ConvertToFractionalDurationInHours(d,c-a,e),0,0)).getTotalHours());c>a?(d=g,a=parseInt(Math.round(c-h)),d.addDays(a),a=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())):(d=g,a=parseInt(Math.ceil(h-c)),d.addDays(-a),a=new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0));g=rqTCUtils.GetLeadingNonWorkingHours(a,
e);d=d.addHours(rqTCUtils.ConvertToFractionalDurationInHours(a,c-b,e));return d=d.addHours(g.getTotalHours());default:throw"Not supported yet.";}};RadiantQ.Gantt.Utils.TimeComputingUtils.GetDesiredBaseTimeUnitWidthForEndTime=function(b,d,a,c,e,g){var h=RadiantQ.Gantt.Utils.TimeComputingUtils;a=h.ConvertTimeSpanToTimeUnits(e,h.GetTimeSpan(a,c));b=h.ConvertTimeSpanToTimeUnits(e,h.GetTimeSpan(b,d));return a*g/b};RadiantQ.Gantt.Print=function(b,d){function a(a){if(b&&b.AfterCanvasGenerated&&"function"==
typeof b.AfterCanvasGenerated&&(canProcessDefault=b.AfterCanvasGenerated(a[0]),!1==canProcessDefault))return!1}!1!=("FlexyGantt"==d.widgetName?!0:"GanttControl"==d.widgetName?!0:!1)&&(b||(b={}),d&&"FlexyGantt"==d.GanttType?b.NoOfRowsInPage=d.FlatItemsSource.FlatItemsSource.length:d&&d.options.DataSource&&(b.NoOfRowsInPage=d.options.DataSource.length),RadiantQ.Gantt.RQPrint(d,b,a))};RadiantQ.Gantt.ConvertHTMLToCanvas=function(b,d,a){function c(a,c,b,h){c="";f(".resizer-style",a).remove();f(".rq-gc-progressbar-resizer",
a).remove();if(!0==d.IsGridVisible){var e=f(".ui-grid-body",a),g=f(".ui-grid-head",a),m=f(".timeSpanHeader",a);if(d.VisibleColumnIndices&&d.VisibleColumnIndices instanceof Array){var k=d.VisibleColumnIndices;f("col",a).css("display","none");e.find("tr").find("td").hide();g.find("th").hide();f("th.rq-column-width-readonly",f(".ui-head-frozen-div",g)).css("display","block");for(var l=0;l<k.length;l++){var n=(parseInt(k[l])+1).toString();c+=" .ui-grid-body-table tbody td:nth-of-type("+n+") {display:table-cell !important;}";
c+=".ui-grid-head-table thead th:nth-of-type("+n+") {display:table-cell !important;}"}}k=f(".ui-grid-head-table",a);f("tr",k).height(m.outerHeight());m=f(".rq-grid-head-parent",a);m=f(".ui-grid-head",m);m.css("padding-right","0px");f("td#gridContainer>:first-child",a);var k=f(".ui-grid-body-table",a),r=k.eq(0),l=k.eq(1),n=r.width();r.parent().css("width",n+"px");r.parent().css("height","100%");f(".ui-head-frozen-div",a).css("width",n+"px");r=l.width();l.parent().css("width",r+"px");var p=f(".ui-head-div",
a);p.css("width",r+"px");p.css("margin-left",n+"px");p.css("position","absolute");m.css("height",p.height()+"px");e.css({height:"100%"});l.css({height:"100%"});g.css("width","100%");e.height(b);e.parent().height(h);f(".ui-gridpanel",a).height(h);0<k.length&&k[1].style.setProperty("margin-top","0px","important")}a.height(h);if(void 0===d.IsChartVisible||!1!==d.IsChartVisible)f(".rq-gc-rowsParent-table",a).height(b),f(".rq-gc-rowsParent",a).css({height:b+"px"}),f(".rq-gc-chartArea-div",a).height(b),
f(".rq-gc-chartArea",a).height(h),f(".rq-ganttChart",a)[0].style.setProperty("height",h+"px","important"),f(".ui-GanttTimeUnitBackground-unit",a).css("height","100%"),f(".ui-GanttChartScaleBackground",a).height(b),f(".rq-gc-dependencysParent",a).height(b),f(a).append("<style>td.rq-fg-gc-row{overflow: inherit !important;}\n"+c+"</style>")}if(!b){var e=f(".rq-ganttBase");b=e.data("FlexyGantt")||e.data("GanttControl")}if(b&&b.widgetName&&!1!=("FlexyGantt"==b.widgetName?!0:"GanttControl"==b.widgetName?
!0:!1)){var g=b.element;d=d||{};var e=f(".ui-gridpanel",g),h=f(".rq-ganttChart",g),m=g.data(),k=m.GanttControl||m.FlexyGantt,l=f.extend(!0,l,h.data("GanttChart").options);l.Parent.UseTimeRangeFilteredTasksInRows?(_useTimeRangeFilteredTasksInRows=l.Parent.UseTimeRangeFilteredTasksInRows(),l.Parent={UseTimeRangeFilteredTasksInRows:function(){return _useTimeRangeFilteredTasksInRows}}):l.Parent={};k.ActivityViews&&(l.Parent.ActivityViews=k.ActivityViews,l.Parent.DependencyViews=k.DependencyViews);l.Parent.getVirtualizedChartHeight=
k.getVirtualizedChartHeight;l.ResizeToFit=!0;l.IsPrinting=!0;l.UseChartVirtualization=!1;l.UseVirtualization=!1;l.BaseTimeUnitWidthMinimum=0.1;var n=f("<div id='printableGanttChart'></div>"),p=e.clone(),m=0;d.IsGridVisible=void 0==d.IsGridVisible&&k.options.ShowGridTable?!0:!1;if(d.VisibleColumnIndices===[]||null===d.VisibleColumnIndices||!1===d.VisibleColumnIndices)d.IsGridVisible=!1;var q=f("div.ui-grid-body",p);if(!1!==d.IsGridVisible){var r=f("tr.ui-widget-header",g),g=f("tr.ui-widget-header>th",
g),s=d.VisibleColumnIndices;if(s&&f.isArray(s)&&s.length<g.length)for(r=m=0;r<s.length;r++)m+=f(g[s[r]]).outerWidth(!0);else void 0==s&&(m=r.outerWidth(!0));r=f("table.ui-grid-body-table",e);g=r.outerWidth(!0)-r.width();m+=g;g=r.find("tbody").data("VWGrid");s=g.rowHtml(!0);g.appendInnerHtml(r.find("tbody"),s)}var u=f("tr",q),w=RadiantQ.Gantt.View.IActivityView.prototype.TableRow,t=RadiantQ.Gantt.View.IActivityView.prototype.ChartRow,v=RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow,z=RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow;
RadiantQ.Gantt.View.IActivityView.prototype.TableRow=function(){var a=this.DisplayIndex;return-1==a||a>=u.length?null:f(u[a])};RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow=function(){var a=this.corrFlexyNodeData.DisplayIndex();return-1==a||a>=u.length?null:f(u[a])};var x=f(".rq-gc-rowsParent-table",n);RadiantQ.Gantt.View.IActivityView.prototype.ChartRow=function(){0==x.length&&(x=f(".rq-gc-rowsParent-table",n));var a=f("tr",x),c=this.DisplayIndex;return-1==c||c>=a.length?null:f(a[c])};
RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow=function(){0==x.length&&(x=f(".rq-gc-rowsParent-table",n));var a=f("tr",x),c=this.corrFlexyNodeData.DisplayIndex();return-1==c||c>=a.length?null:f(a[c])};q=f("table.ui-grid-body-table",e);q=q.eq(0).width()+q.eq(1).width();m=!1===d.IsGridVisible?0:m||q;$tempCont=f("<div id='tempCont'></div>").append(p);!1!==d.IsChartVisible&&($tempCont.append(n),n.css({"margin-left":"6px",width:h.width()-6+"px",height:h.height()+"px",position:"absolute","z-index":0}),
l=n.GanttChart(l).data("GanttChart"),d.ViewStartTime?l.SetStartTime(d.ViewStartTime):l.SetStartTime(h.data("GanttChart").VisualStartTime.clone()),d.ViewEndTime&&l.TrySetEndTime(d.ViewEndTime),l.initializeGanttComponents(),k&&k.options.KnockoutObjectName&&setTimeout(function(){n.css("display","none");f(document.body).append(n);var a=eval(k.options.KnockoutObjectName);ko.applyBindings(a,n[0]);a=n[0].innerHTML;ko.cleanNode(n[0]);n.remove();n[0].innerHTML=a;n.css("display","block")},0));b.element.width();
p.css({width:m+"px",position:"absolute"});p.find(".ui-head-div").css({width:m+"px"}).addClass("utrst");n.css({left:m+"px"});f("script[src*=jquery]",document);f("script[src*=html2canvas]",document);if(html2canvas){b=f("link",document);for(var h=f("style"),A="",r=0;r<b.length;r++)A+=b[r].outerHTML+"\n";for(r=0;r<h.length;r++)location.href.replace(/([^\/]*$)/,""),A+=h[r].outerHTML;!1===d.IsChartVisible?f('<div id="__gantt__test" style="height:'+f("tbody",e).height()+'px;">\n'+p[0].outerHTML+"\n</div>\n"):
f('<div id="__gantt__test" style="height:'+n.height()+'px;">\n'+(!0==d.IsGridVisible?p[0].outerHTML:"")+"\n"+n[0].outerHTML+"\n</div>\n");var y=function(a,c){var b=void 0==d.Format?"png":d.Format,h=!0;try{if(d.AfterCanvasGenerated&&"function"==typeof d.AfterCanvasGenerated&&(h=d.AfterCanvasGenerated(a)),!1!=h){var e=a.toDataURL("image/"+b+"");$image=f("<img src="+e+"></img>");f(newWindow.document.body).html("<img id='__RQ_PrintImage' src="+e+" style='width:100%;'></img>").ready(function(){var h=this.document.title;
if(c){var g=function(){f("#__RQ_iframeCont").remove()};window.__RQ_iframe?(__RQ_iframe.onafterprint=g,setTimeout(function(){"function"==typeof __RQ_iframe.print?(__RQ_iframe.focus(),__RQ_iframe.print()):(__RQ_iframe.contentWindow.focus(),__RQ_iframe.contentWindow.print(),g())},1)):(this.onafterprint=g,this.print());this.close()}else if(window.Blob)RadiantQ.Gantt.Utils.SaveCanvasAsImage(a,h+"."+b+""),f("#__RQ_iframeCont").remove(),M||alert("Please close this new window when download is complete.");
else{var d=window.open("","_blank");d.document.write("<!DOCTYPE html>\n",'<html xmlns="http://www.w3.org/1999/xhtml">\n',"<head>\n","<title>"+h+"</title>\n","</head>\n","<body>\n","<img src="+e+"></img>\n","</body>\n","</html>");d.document.close()}}.bind(newWindow))}}catch(g){window.console&&console.error(g.message+" in afterCanvasGenerated.")}},C=d.Title||document.title,M;(function(){window.RadiantQ.Gantt.Utils.AfterIframeContentLoad=function(b){delete window.RadiantQ.Gantt.Utils.AfterIframeContentLoad;
var h=f("#__gantt__test",b.document),e=f(".ui-grid",b.document),g=0,m=0;0==e.length?(g=f(".rq-gc-rowsParent-table",b.document)[0].scrollHeight,m=f(".rq-tsh-div",b.document).height()+g):(g=f(".grid-body-actualContent",b.document)[1].scrollHeight,m=f(".rq-grid-head-parent",b.document).height()+f(".ui-grid-foot",b.document).height()+g);c(h,a,g,m);f(b.document).ready(function(){function c(){f(".ui-gridpanel",b.document).css("visibility","hidden");var e=f("#printableGanttChart",b.document).css({left:0});
html2canvas(e,{allowTaint:!0,useCORS:!0,onrendered:function(c){c=c.getContext("2d");g.putImageData(c.getImageData(0,0,e.width(),m),k+6,0);y(h,a)}})}var h=document.createElement("canvas");h.width=p.width()+n.width();h.height=m;var g=h.getContext("2d"),k=e.width();0<window.navigator.userAgent.toLowerCase().indexOf("trident")&&(8192<m||8192<e.width()+n.width())?alert(RadiantQ_PrintErrorString):d.IsGridVisible?html2canvas(e,{allowTaint:!0,useCORS:!0,onrendered:function(b){b=b.getContext("2d");g.putImageData(b.getImageData(0,
0,k,m),0,0);!1!=d.IsChartVisible?c():y(h,a)}}):!1!=d.IsChartVisible&&c()})};M=document.createElement("iframe");M.id="__RQ_iframe";M.width=window.innerWidth;M.height=window.innerHeight;f("#__RQ_iframeCont").remove();var b=f("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(M);f(document.body).append(b);setTimeout(function(){M.contentWindow.document.open();newWindow=M.contentWindow;M.contentWindow.document.write("<!DOCTYPE html>\n",'<html xmlns="http://www.w3.org/1999/xhtml">\n',
"<head>\n","<title>"+C+"</title>\n",""+A+"\n","<style>\n","div.rq-gc-progressbar, div.progressbarStyle {border-radius: 0px !important;}",".rq-timeUnit-div{overflow:initial !important;}\n",".ui-grid-body {overflow-x: hidden !important; overflow-y: hidden !important;}\n","</style>\n",'<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\n','<body onload="window.parent.RadiantQ.Gantt.Utils.AfterIframeContentLoad(this)">\n','<div id="__gantt__test" style="height:'+n.height()+"px; width:"+
window.innerWidth+'px;">\n',""+(!0==d.IsGridVisible?p[0].outerHTML:"")+"\n",""+n[0].outerHTML+"\n","</div>\n","</body>\n","</html>");M.contentWindow.document.close();p.empty();n.empty();n.empty()},0);return M.contentWindow})();setTimeout(function(){RadiantQ.Gantt.View.IActivityView.prototype.TableRow=w;RadiantQ.Gantt.View.IActivityView.prototype.ChartRow=t;RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow=v;RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow=z},100)}else window.console?
console.error("html2canvas.js file is not found."):alert("html2canvas.js file is not found.")}};RadiantQ.Gantt.ExportToImage=function(b,d){b||(b={});"FlexyGantt"==d.GanttType?b.NoOfRowsInPage=d.FlatItemsSource.FlatItemsSource.length:d.options.DataSource&&(b.NoOfRowsInPage=d.options.DataSource.length);RadiantQ.Gantt.RQPrint(d,b,function(a){var c=document.title,e="png";if(b){if(b.AfterCanvasGenerated&&"function"==typeof b.AfterCanvasGenerated&&(canProcessDefault=b.AfterCanvasGenerated(a[0]),!1==canProcessDefault))return!1;
b.Title&&(c=b.Title);b.Format&&(e=b.Format)}RadiantQ.Gantt.Utils.SaveCanvasAsImage(a[0],c+"."+e+"");return!1})};RadiantQ.Gantt.PrintWYSIWYG=function(b,d){function a(a,c){var b=document.createElement("canvas");b.width=c.width();b.height=c.height();var e=b.getContext("2d");html2canvas(c,{allowTaint:!0,useCORS:!0,onrendered:function(d){var f=d.getContext("2d");e.putImageData(f.getImageData(0,0,c.width(),c.height()),0,0);a(d,b,c)}})}function c(a,c,b){a=e="<img class='printableImg' src="+a.toDataURL("image/png")+
" style='width:100%;'></img>";c=d;iframe=document.createElement("iframe");iframe.id="__RQ_iframe";iframe.width=window.innerWidth;iframe.height=window.innerHeight;f("#__RQ_iframeCont").remove();b=f("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(iframe);f(document.body).append(b);iframe.contentWindow.document.open();iframe.contentWindow.document.write('<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<title>'+c+'</title>\n<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\n</head><script>function printGantt(){  parent.restorePrintDefaultSettings(); }\x3c/script><body onload="this.window.printGantt()">\n'+
a+"</body>\n</html>");iframe.contentWindow.document.close()}var e;d=d?d:document.title;b&&(window.restorePrintDefaultSettings=function(){function a(){f("#__RQ_iframeCont").remove()}window.__RQ_iframe?setTimeout(function(){"function"==typeof __RQ_iframe.print?(__RQ_iframe.focus(),__RQ_iframe.print()):(__RQ_iframe.contentWindow.focus(),__RQ_iframe.contentWindow.print());a()},1):(this.onafterprint=a,this.print())},a(c,b))};RadiantQ.Gantt.PrintImageUsingIframe=function(b,d,a){window.restorePrintDefaultSettings=
function(){function c(){f("#__RQ_iframeCont").remove();a.AfterPrintComplete.raise()}window.__RQ_iframe?setTimeout(function(){"function"==typeof __RQ_iframe.print?(__RQ_iframe.focus(),__RQ_iframe.print()):(__RQ_iframe.contentWindow.focus(),__RQ_iframe.contentWindow.print());c()},1):(this.onafterprint=c,this.print())};(function(a,b){iframe=document.createElement("iframe");iframe.id="__RQ_iframe";iframe.width="100%";iframe.height="100%";f("#__RQ_iframeCont").remove();var g=f("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(iframe);
f(document.body).append(g);iframe.contentWindow.document.open();iframe.contentWindow.document.write('<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<title>'+b+'</title>\n<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\n<style type="text/css">\n@media print {button, .ui-grid, #ChartRow {display: none;}.printableImg {display: block;}.printableImg:nth-child(n+2) {page-break-before: always;}}</style></head><script>function printGantt(){ parent.restorePrintDefaultSettings();}\x3c/script><body onload="this.window.printGantt()" style="margin:0px;">\n'+
a+"</body>\n</html>");iframe.contentWindow.document.close();f(".rq-busyIndicator").remove()})(b,d)}})(jQuery);
(function(){var f=function(){this._collections=[];this.keys=[];this._asArray=[];this.CollectionChanged=new ObjectEvent("CollectionChanged");this._asArray.CollectionChanged=new ObjectEvent("CollectionChanged");this.keys.indexOf=function(a){if(a&&a.equals){for(var c=0;c<this.length;c++)if(this[c].equals(a))return c;return-1}return Array.prototype.indexOf?Array.prototype.indexOf.call(this,a):Array.indexOf(this,a)};this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;return this};
f.prototype.Add=function(a,c){if(null==a||void 0==a)window.console&&console.log(a+" is not a valid key for Dictionary.");else{"string"===typeof a||"number"===typeof a?this[a]=c:"function"==typeof a.ID_M?this[a.ID_M()]=c:void 0!=a.ID&&(this[a.ID]=c);var b=this.keys.indexOf(a);-1==b?(b=this._asArray.length,this.keys.push(a),this._collections.push({key:a,value:c}),this._asArray.push(c)):(this._collections[b].value=c,this._asArray[b]=c);this.length=this._collections.length;this.asArray=this._asArray;
this.Keys=this.keys;this.OnCollectionChanged(null,c,b)}};f.prototype.Contains=function(a){return-1==this.keys.indexOf(a)?!1:!0};f.prototype.indexOf=function(a){return this._asArray.indexOf(a)};f.prototype.Remove=function(a){"string"===typeof a||"number"===typeof a?delete this[a]:a.ID_M?delete this[a.ID_M()]:a.ID&&delete this[a.ID];a=this.keys.indexOf(a);if(-1!=a){var c=this._asArray[a];this._collections.splice(a,1);this.keys.splice(a,1);this._asArray.splice(a,1)}this.length=this._collections.length;
this.asArray=this._asArray;this.Keys=this.keys;-1!=a&&this.OnCollectionChanged(c,null,a);return!1};f.prototype.RemoveAt=function(a){if(-1!=a&&0<=a&&a<this.length){var c=this._asArray[a];this._collections.splice(a,1);var b=this.keys[a];this.keys.splice(a,1);"string"===typeof b||"number"===typeof b?delete this[b]:b.ID_M?delete this[b.ID_M()]:b.ID&&delete this[b.ID];this._asArray.splice(a,1)}this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;-1!=a&&this.OnCollectionChanged(c,
null,a);return!1};f.prototype.Clear=function(){for(var a=this.keys.indexOf,c=0;c<this.keys.length;c++){var b=this.keys[c];"string"===typeof b||"number"===typeof b?delete this[b]:b.ID_M?delete this[b.ID_M()]:b.ID&&delete this[b.ID]}this.keys=[];this.keys.indexOf=a;this._collections=[];this._asArray=[];this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;this.OnCollectionChanged()};f.prototype.GetItemByKey=function(a){a=this.keys.indexOf(a);return-1==a||a>=this.length?
null:this._collections[a].value};f.prototype.GetItemByIndex=function(a){return this._collections.length<=a||0>a?null:this._collections[a].value};f.prototype.CollectionChanged=new ObjectEvent("CollectionChanged");f.prototype.OnCollectionChanged=function(a,c,e){var g={};if(0<this.CollectionChanged.fn.length||this._asArray.CollectionChanged&&0<this._asArray.CollectionChanged.fn.length)a||c?a?g=new b(a,null,e):c&&(g=new b(null,c,e)):g=new b,0<this.CollectionChanged.fn.length&&this.CollectionChanged.raise(this.asArray,
g),0<this._asArray.CollectionChanged.fn.length&&this._asArray.CollectionChanged.raise(this.asArray,g)};f.prototype.subscribe=function(a){this.CollectionChanged.subscribe(a)};f.prototype.Dispose=function(){this._collections=[];this.keys=[];this._asArray=[];this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null;this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys};var b=function(a,c,b){a||c||(this.NewItems=this.OldItems=null,this.type="reset",
this.Action=d.Reset);a&&(this.type="remove",this.OldStartingIndex=b,a instanceof Array?this.OldItems=a.slice(0):(this.OldItems=[],this.OldItems.push(a)));c&&(this.type="insert",this.NewStartingIndex=b,c instanceof Array?this.NewItems=c.slice(0):(this.NewItems=[],this.NewItems.push(c)))},d={Add:0,Remove:1,Replace:2,Reset:4};RadiantQ.Gantt&&(RadiantQ.Gantt.Dictionary=f,RadiantQ.Gantt.NotifyCollectionChangedEventArgs=b);RadiantQ&&(RadiantQ.Dictionary=f,RadiantQ.NotifyCollectionChangedEventArgs=b,RadiantQ.NotifyCollectionChangedAction=
d)})();var Utils=RadiantQ.Gantt.Utils;Utils.DelayUpdateUtil={};Utils.DelayUpdateUtil._dirtyDic=new RadiantQ.Gantt.Dictionary;Utils.DelayUpdateUtil._dirtyList=[];Utils.DelayUpdateUtil._isUpdating=!1;Utils.DelayUpdateUtil.IsUpdating=function(){return Utils.DelayUpdateUtil._isUpdating};Utils.DelayUpdateUtil.BeginUpdate=function(){if(Utils.DelayUpdateUtil.IsUpdating())return!1;Utils.DelayUpdateUtil._dirtyDic.Clear();Utils.DelayUpdateUtil._dirtyList=[];return Utils.DelayUpdateUtil._isUpdating=!0};
Utils.DelayUpdateUtil.TryDelayedUpdate=function(f,b,d){Utils.DelayUpdateUtil.IsUpdating()?Utils.DelayUpdateUtil.DelayUpdate(f,b,d):f.PartialUpdate(b)};Utils.DelayUpdateUtil.RemoveUpdates=function(f){RemoveInArray(Utils.DelayUpdateUtil._dirtyList,f)};
Utils.DelayUpdateUtil.DelayUpdate=function(f,b,d){var a=Utils.DelayUpdateUtil._dirtyList;try{if(!1==ContainsValueInArray(Utils.DelayUpdateUtil._dirtyList,f)){if(null!=d)for(var c=-1,e=0;e<a.length;e++){if(g=a[e],c++,g instanceof d){a.splice(c,0,f);break}}else a.push(f);null!=b&&Utils.DelayUpdateUtil._dirtyDic.Add(f,b)}else{var g=Utils.DelayUpdateUtil._dirtyDic.GetItemByKey(f);g&&g!=b&&Utils.DelayUpdateUtil._dirtyDic.Remove(f)}}catch(h){window.console&&console.error(h.message+" from Utils.DelayUpdateUtil.DelayUpdate method.")}};
Utils.DelayUpdateUtil.EndUpdate=function(){Utils.DelayUpdateUtil._isUpdating=!1;var f=Utils.DelayUpdateUtil._dirtyList,b=Utils.DelayUpdateUtil._dirtyDic;Utils.DelayUpdateUtil._dirtyDic=new RadiantQ.Gantt.Dictionary;Utils.DelayUpdateUtil._dirtyList=[];for(var d=f.length-1;0<=d;d--){var a=f[d],c=b.GetItemByKey(a);c?a.PartialUpdate(c):a.TotalUpdate()}};Utils.DelayUpdateUtil.CopyDictionary=function(f,b){for(var d=0;d<f.Keys.length;d++){var a=f.Keys[d];b[a]=f[a]}};
Utils.DelayUpdates=function(){this.startedBeginUpdate=Utils.DelayUpdateUtil.BeginUpdate();this.Dispose=function(){this.startedBeginUpdate&&Utils.DelayUpdateUtil.EndUpdate()}};Utils.IUIUpdateable=function(){this.PartialUpdate=function(f){};this.TotalUpdate=function(){}};
(function(f){RadiantQ.FlexyGantt.TasksPositionTracker=function(b,d,a){this._fg=b;this._sourceItems=d;this._startTimeBinding=a;this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.subscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);this._startTimesList=new RadiantQ.FlexyGantt.StartTimesList;this.InitOrderedList()};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.FlexyGantt_M=function(){return this._fg};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.SourceItems_M=
function(){return this._sourceItems};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.StartTimeBinding_M=function(){return this._startTimeBinding};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"FlexyGantt",{get:function(){return this._fg}}),Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"SourceItems",{get:function(){return this._sourceItems}}),Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,
"StartTimeBinding",{get:function(){return this._startTimeBinding}}));RadiantQ.FlexyGantt.TasksPositionTracker.prototype.UpdateTimes=function(b,d){this._startTimesList.RemoveStartTimeFromList(d);this._startTimesList.AddStartTimeToList(b)};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.AreTasksAvailableBefore=function(b){var d=this._startTimesList.GetMatchingEntry(b);return-1==d?!1:b<=this._startTimesList.GetTimeAtIndex(d)&&0<d?!0:b>this._startTimesList.GetTimeAtIndex(d)?!0:!1};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetNextTaskStartTimeLeft=
function(b){var d=this._startTimesList.GetMatchingEntry(b);return-1==d?Date.MinValue:b<=this._startTimesList.GetTimeAtIndex(d)&&0<d?this._startTimesList.GetTimeAtIndex(d-1):b>this._startTimesList.GetTimeAtIndex(d)?this._startTimesList.GetTimeAtIndex(d):Date.MinValue};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.AreTasksAvailableAfter=function(b){var d=this._startTimesList.GetMatchingEntry(b);return-1==d?!1:b<=this._startTimesList.GetTimeAtIndex(d)?!0:!1};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetNextTaskStartTimeRight=
function(b){var d=this._startTimesList.GetMatchingEntry(b);return-1==d?Date.MinValue:b<=this._startTimesList.GetTimeAtIndex(d)?this._startTimesList.GetTimeAtIndex(d):Date.MinValue};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetStartTime=function(b){if(null==b)return Date.MinValue;var d=this._startTimeBinding.Property;b=(new RadiantQ.Gantt.Utils.ValueBinder(b,this.StartTimeBinding_M(),null,RadiantQ.Gantt.BindingMode.OneWay))._value;this._startTimeBinding.Property=d;return b};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.TimeRangeBasedItemsFilter_CollectionChanged=
function(b,d){this.OnSourceItemsCollectionChanged(d)};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.OnSourceItemsCollectionChanged=function(b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var a=b.NewItems[d];this._startTimesList.AddStartTimeToList(this.GetStartTime(a))}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)a=b.OldItems[d],this._startTimesList.RemoveStartTimeFromList(this.GetStartTime(a));else this.InitOrderedList()};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.InitOrderedList=
function(){this._startTimesList.Clear();for(var b=this.SourceItems_M(),d=0;d<b.length;d++)this._startTimesList.AddStartTimeToList(this.GetStartTime(b[d]))};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.Dispose=function(){this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.unsubscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);this._startTimesList.Clear()};RadiantQ.FlexyGantt.StartTimesList=function(){this._orderedStartTimes=[];this._timeVsEntries=new RadiantQ.Gantt.Dictionary};
RadiantQ.FlexyGantt.StartTimesList.prototype.GetTimeAtIndex=function(b){return this._orderedStartTimes.length<=b?Date.MinValue:this._orderedStartTimes[b]};RadiantQ.FlexyGantt.StartTimesList.prototype.AddStartTimeToList=function(b){if(0==this._orderedStartTimes.length)this._orderedStartTimes.push(b),this._timeVsEntries.Add(b,1);else{var d=this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,b);this._orderedStartTimes[d].equals(b)?(b=this._timeVsEntries.keys.indexOf(b),b=this._timeVsEntries._collections[b],
this._timeVsEntries.Add(b.key,++b.value)):this._orderedStartTimes[d]<b?(this._orderedStartTimes.splice(d+1,0,b),this._timeVsEntries.Add(b,1)):this._orderedStartTimes[d]>b&&(this._orderedStartTimes.splice(d,0,b),this._timeVsEntries.Add(b,1))}};RadiantQ.FlexyGantt.StartTimesList.prototype.RemoveStartTimeFromList=function(b){if(0!=this._orderedStartTimes.length){var d=this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,b);if(this._orderedStartTimes[d].equals(b)){var a=this._timeVsEntries.GetItemByKey(b);
a--;0==a?(this._orderedStartTimes.splice(d,1),this._timeVsEntries.Remove(b)):this._timeVsEntries.Add(b,a)}}};RadiantQ.FlexyGantt.StartTimesList.prototype.Clear=function(){this._timeVsEntries.Clear();this._orderedStartTimes=[]};RadiantQ.FlexyGantt.StartTimesList.prototype.GetMatchingEntry=function(b){return 0==this._orderedStartTimes.length?-1:this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,b)};RadiantQ.FlexyGantt.StartTimesList.prototype.GetMatchingEntryRecursively=function(b,
d,a){if(a<this._orderedStartTimes[b])return b;if(this._orderedStartTimes[d]<a)return d;if(a.equals(this._orderedStartTimes[b]))return b;if(a.equals(this._orderedStartTimes[d]))return d;var c=Math.floor((d+b)/2);return this._orderedStartTimes[c].equals(a)?c:this._orderedStartTimes[c]<a?this.GetMatchingEntryRecursively(c+1,d,a):this.GetMatchingEntryRecursively(b,c,a)}})(jQuery);
(function(){var f=RadiantQ.Gantt;f.TimePeriod={};f.TimePeriod=function(b,d,a,c){if(2>arguments.length)throw Error("Please pass the start and finish date or start and duration as args");this._start=b;d&&!a&&(a=new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(b,d));a&&!d&&(d=b.addTimeSpan(a));this._end=d;this._duration=a;this.IsReadOnly=c;return this};f.TimePeriod.prototype.notifyChange=function(b,d){"Start"==b?this.UpdateEnd():"End"==b?this.UpdateDuration():"Duration"==b&&this.UpdateEnd()};
f.TimePeriod.prototype.Start_M=function(b){if(0==arguments.length)return this._start;if(!this._start||!this._start.equals(b)){if(this.IsReadOnly)throw Error("Cannot set Start on a ReadOnly TimePeriod.");this._start=b;this.notifyChange("Start",b)}};f.TimePeriod.prototype.End_M=function(b){if(0==arguments.length)return this._end;if(!this._end||!this._end.equals(b)){if(this.IsReadOnly)throw Error("Cannot set Duration on a ReadOnly TimePeriod.");this._end=b;this.notifyChange("End",b)}};f.TimePeriod.prototype.Duration_M=
function(b){if(0==arguments.length)return this._duration;if(!this._duration||!this._duration.equals(b)){if(this.IsReadOnly)throw Error("Cannot set End on a ReadOnly TimePeriod.");this._duration=b;this.notifyChange("Duration",b)}};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.TimePeriod.prototype,"Start",{get:function(){return this._start},set:function(b){if(!this._start||!Start.equals(b)){if(this.IsReadOnly)throw Error("Cannot set Start on a ReadOnly TimePeriod.");this._start=b;this.notifyChange("Start",
b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.TimePeriod.prototype,"End",{get:function(){return this._end},set:function(b){if(!this._end||!this._end.equals(b)){if(this.IsReadOnly)throw Error("Cannot set Duration on a ReadOnly TimePeriod.");this._end=b;this.notifyChange("End",b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.TimePeriod.prototype,"Duration",{get:function(){return this._duration},set:function(b){if(!this._duration||!this._duration.equals(b)){if(this.IsReadOnly)throw Error("Cannot set End on a ReadOnly TimePeriod.");
this._duration=b;this.notifyChange("Duration",b)}},enumerable:!0,configurable:!0}));f.TimePeriod.prototype.UpdateEnd=function(){this._end=this._start.clone().addTimeSpan(this._duration)};f.TimePeriod.prototype.UpdateDuration=function(){this._duration=new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(this._start,this._end)};f.TimePeriod.prototype.Equals=function(b){return this.Start_M().equals(b.Start_M())&&this._duration.equals(b._duration)};f.TimePeriod.prototype.CompareTo=function(b){return this.Start.compareTo(b.Start)};
f.TimePeriod.prototype.clone=function(b){return new TimePeriod(b.Start,b.End,null,b.IsReadOnly)};f.TimePeriod.prototype.Intersect=function(b){if(!b)return null;var d,a,c,e=0<=this._duration._totalMS,g=0<=b._duration._totalMS;e?(a=this._start,c=this._end):(a=this._end,c=this._start);g?(d=b._start,b=b._end):(d=b._end,b=b._start);if(a>=b||c<=d)return null;d=a>d?a:d;c=c<b?c:b;return e==g?new RadiantQ.Gantt.TimePeriod(d,c):new RadiantQ.Gantt.TimePeriod(c,d)};f.TimePeriod.IsPositiveDuration=function(b){return 0<=
b._duration.totalMilliseconds_M()};f.TimePeriod.prototype.Union=function(b){if(!b)return this;var d=RQTimeSpan.Zero_M(),a,c,e,g;this._duration>=d?(e=this.Start_M(),g=this.End_M()):(e=this.End_M(),g=this.Start_M());b._duration>=d?(a=b.Start_M(),c=b.End_M()):(a=b.End_M(),c=b.Start_M());a=e<a?e:a;c=g>c?g:c;return this._duration>=d==b._duration>=d?new f.TimePeriod(a,c):new f.TimePeriod(c,a)}})();
(function(f){var b=RadiantQ.Gantt;b.TimePeriodCollection={};b.TimePeriodCollection=function(b){b&&!f.isArray(b)?(this._intervals=[],this._intervals.push(b),this.Start=b._start,this.Duration=b._duration,this.Finish=b._end,this.length=1):(this._intervals=[],this.Start=Date.MaxValue,this.Duration=new RQTimeSpan(0,0,0,0,0,0),this.Finish=Date.MinValue,this.length=this._intervals.length,b&&this.AddRange(b));return this};b.TimePeriodCollection.prototype.Add=function(d){d.IsReadOnly=!0;d._duration<RQTimeSpan.Zero_M()&&
(d=new b.TimePeriod(d._end,d._start,null,!0));this.length=this._intervals.length;if(d._start<this.Finish)for(var a=0;a<this.length;a++){var c=this._intervals[a];if(d._end<c.Start){this._intervals.splice(a,0,d);this.length=this._intervals.length;d._start<this.Start&&(this.Start=d._start);this.Duration=this.Duration.add(d._duration);return}if(d._start<c.Start){var e=0<a?this._intervals[a-1]:null;if(!e||d._start>e.Value.End){d=c.Union(d);this._intervals[a]=d;d.Start<this.Start&&(this.Start=d.Start);
this.Duration=this.Duration.add(d.Duration_M().subtract(c.Duration_M()));d.End>this.Finish&&(this.Finish=d.End);return}d=c.Union(e.Value);this._intervals.splice(a,1);this.length=this._intervals.length;this._intervals[a-1]=d;this.Duration=this.Duration.add(d.Duration.subtract(c.Duration));d.End>this.Finish&&(this.Finish=d.End);return}if(d._start<c.End){if((e=a<this.length-1?this._intervals[a+1]:null)&&d._end<e.Start){d=c.Union(d);this._intervals[a]=d;this.Duration=this.Duration.add(d.Duration.subtract(c.Duration));
d.End>this.Finish&&(this.Finish=d.End);return}d=c.Union(e);this._intervals.splice(a,1);this.length=this._intervals.length;this._intervals[a]=d;this.Duration=this.Duration.add(d.Duration.subtract(c.Duration));d.End>this.Finish&&(this.Finish=d.End);return}}this._intervals.push(d);d._start<this.Start&&(this.Start=d._start);this.Finish=d._end;this.Duration=this.Duration.add(d._duration)};b.TimePeriodCollection.prototype.AddRange=function(b){for(var a=0;a<b.length;a++)this.Add(b[a])};b.TimePeriodCollection.prototype.Ascending=
function(){return this._intervals.sort};b.TimePeriodCollection.prototype.Descending=function(){this._intervals.sort();return this._intervals.sort()};b.TimePeriodCollection.prototype.getItemByIndex=function(b){return this._intervals[b]};b.TimePeriodCollection.prototype.Count=function(){return this._intervals.length}})(jQuery);
(function(){function f(){RadiantQ.ValueConverter.call(this)}var b=RadiantQ.Gantt;b.WorkTimeSchedule={};b.WorkTimeSchedule.TaskResolutionInfo={};RadiantQ.Gantt.guidGenerator=function(){var b=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};b.WorkTimeSchedule=function(b,a){this.IsCachingEnabled=!0;this._guid=RadiantQ.Gantt.guidGenerator();this._cachedResolvedIntervals={};if(null==a)throw Error("dayCalendarProvider","The specified CalendarProvider delegate cannot be null.");
this.Name=b;this.scheduleProvider=a;this.WorkTimeScheduleProvider=function(a){return this.scheduleProvider(a)};return this};b.WorkTimeSchedule.prototype.ClearCache=function(){this._cachedResolvedIntervals={}};b.WorkTimeSchedule.CachedResolvedIntervals=function(){this._cachedResolvedIntervals={}};b.WorkTimeSchedule.CachedResolvedIntervals.prototype.Add=function(b,a,c){this._cachedResolvedIntervals[b._testName]||(this._cachedResolvedIntervals[b._testName]=a)};b.WorkTimeSchedule.CachedResolvedIntervals.prototype.ContainsKey=
function(b,a){return this._cachedResolvedIntervals[b._testName]?!0:!1};b.WorkTimeSchedule.CachedResolvedIntervals.prototype.GetIntervalsFromCache=function(b,a){var c=this._cachedResolvedIntervals[b._testName];return c?c:null};b.WorkTimeSchedule.CachedContWorkingTimes=function(){this._cachedContWorkingTimes={}};b.WorkTimeSchedule.CachedContWorkingTimes.prototype.Add=function(b,a){this._cachedContWorkingTimes[b]||(this._cachedContWorkingTimes[b]=a)};b.WorkTimeSchedule.CachedContWorkingTimes.prototype.ContainsKey=
function(b){return this._cachedContWorkingTimes[b]?!0:!1};b.WorkTimeSchedule.CachedContWorkingTimes.prototype.GetIntervalsFromCache=function(b){return(b=this._cachedContWorkingTimes[b])?b:null};b.WorkTimeSchedule._cachedStdWorkingTimes=new b.WorkTimeSchedule.CachedContWorkingTimes;b.WorkTimeSchedule._continuousSchedule=null;b.WorkTimeSchedule.cachedContWorkingTimes={};b.WorkTimeSchedule.prototype.GetResolvedIntervals=function(d,a,c,e,g){d=d.clone();var h=RQTimeSpan.Zero_M();0>a._totalMS&&window.console&&
console.error("requiredWorkEffort: Required work effort must be a positive TimeSpan.");0>e._totalMS&&window.console&&console.error("maxSearchEffort: Maximum search effort must be a positive TimeSpan.");var m=this.IsCachingEnabled?new b.WorkTimeSchedule.TaskResolutionInfo(d,a,c,e,g):null;if(m){var f=this._cachedResolvedIntervals[m._testName];if(f)return f}var f=[],l=new RadiantQ.Gantt.TimePeriod(d,null,g?e:h.subtract(e)),n=!1,p=Date.MaxValue;if(g&&d<p||!g&&d>Date.MinValue)for(p=d.Date();0<=a._totalMS&&
!n&&!(g&&p-d>e._totalMS||!g&&d-p.clone().addDays(1)>e._totalMS);p=p.addDays(g?1:-1)){var q=this.WorkTimeScheduleProvider(p);if(null!=q){if(q.Start<p||864E5<q.Duration._ticks)throw Error("CalendarProvider must provide time intervals that start and finish on the specified date.");for(var q=q._intervals,r=0;r<q.length&&!n;r++){var s=q[r];if((!g||s._end>l._start)&&(g||s._start<l._start)){var u=s.Intersect(l);if(!u){n=!0;break}s=[];s.push(u);if(null!=c)for(var w=0;w<c.length&&!n;w++)if(schedule=c[w],null!=
schedule){for(var t=[],u=0;u<s.length;u++)for(var v=s[u],v=schedule.GetResolvedIntervals(v.Start,RQTimeSpan.MaxValue_M(),null,v._duration>=h?v.Duration:new RQTimeSpan(-v.Duration.totalMilliseconds_M()),g),z=0;z<v.length;z++)t.push(v[z]);s=t}for(u=0;u<s.length&&!n;u++)if(w=s[u],t=w._duration,0!=t._totalMS||0>=a._totalMS){v=a.getEqualNegative();if(g&&t._totalMS>a._totalMS||!g&&t._totalMS<v._totalMS)w.Duration_M(0<=t._totalMS?a:v),t=w._duration;0==t._totalMS&&0!=a._totalMS||f.push(w);a=g?a.subtract(t):
a.add(t);if(0==a._totalMS){n=!0;break}}}}}}void 0!=m&&(this._cachedResolvedIntervals[m._testName]=f);return f};b.WorkTimeSchedule.TwentyFourByFiveScheduleProvider=function(d){d||(d=new Date);_cachedContWorkingTimes=b.WorkTimeSchedule.cachedContWorkingTimes;d=d.Date();var a=d.toDateString(),c=_cachedContWorkingTimes[a];return void 0===c?(c=d.getDay(),0<c&&5>=c?(d=new b.TimePeriodCollection(new b.TimePeriod(d,d.clone().addDays(1),new RQTimeSpan(1,0,0,0,0,864E5))),_cachedContWorkingTimes[a]=d):_cachedContWorkingTimes[a]=
null):c};b.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider=function(d){d=d.Date();if(!b.WorkTimeSchedule._cachedStdWorkingTimes.ContainsKey(d)){var a=d.getDay();if(0<a&&5>=a)return a=new b.TimePeriodCollection,a.Add(new b.TimePeriod(d.clone().addHours(8),null,new RQTimeSpan(0,8,0,0,0))),b.WorkTimeSchedule._cachedStdWorkingTimes.Add(d,a),a;b.WorkTimeSchedule._cachedStdWorkingTimes.Add(d,null);return null}return b.WorkTimeSchedule._cachedStdWorkingTimes.GetIntervalsFromCache(d)};b.WorkTimeSchedule.SearchBreakTimeSpan=
new RQTimeSpan(3650,0,0,0,0);b.WorkTimeSchedule.prototype.GetEffort=function(d,a,c){a=b.Utils.TimeComputingUtils.GetTimeSpan(d,a);return(new b.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(d,RQTimeSpan.MaxValue_M(),c,a))).Duration};b.WorkTimeSchedule.prototype.GetWorkingDayIntervals=function(d,a,c){a=b.Utils.TimeComputingUtils.GetTimeSpan(d,a);return(new b.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(d,RQTimeSpan.MaxValue_M(),c,a)))._intervals};b.WorkTimeSchedule.prototype.GetStart=
function(d,a,c){return(new b.TimePeriodCollection(this.ConvertToPreviousWorkingTimeIntervals(d,a,c))).Start};b.WorkTimeSchedule.prototype.GetEnd=function(d,a,c){return(new b.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(d,a,c))).Finish};b.WorkTimeSchedule.prototype.ConvertToNextWorkingTime=function(b,a){var c=this.ConvertToNextWorkingTimeIntervals(b,RQTimeSpan.Zero_M(),a);return 0<c.length?c[0]._start:Date.MaxValue};b.WorkTimeSchedule.prototype.ConvertToNextWorkingTimeIntervals=function(d,
a,c,e){return e?this.GetResolvedIntervals(d,a,c,e,!0):this.GetResolvedIntervals(d,a,c,b.WorkTimeSchedule.SearchBreakTimeSpan,!0)};b.WorkTimeSchedule.prototype.ConvertToPreviousWorkingTime=function(b,a){var c=this.ConvertToPreviousWorkingTimeIntervals(b,RQTimeSpan.Zero_M(),a);return 0<c.length?c[0].Start_M():Date.MinValue};b.WorkTimeSchedule.prototype.ConvertToPreviousWorkingTimeIntervals=function(d,a,c,e){return e?this.GetResolvedIntervals(d,a,c,e,!1):this.GetResolvedIntervals(d,a,c,b.WorkTimeSchedule.SearchBreakTimeSpan,
!1)};b.WorkTimeSchedule.prototype.ConverToPreviousWorkingTime=function(b,a){var c=this.ConvertToPreviousWorkingTimeIntervals(b,RQTimeSpan.Zero_M(),a);return 0<c.length?c[0]._start:Date.MinValue};b.WorkTimeSchedule.prototype.toString=function(){return null==this.Name?"":this.Name};b.WorkTimeSchedule._continuousSchedule||(b.WorkTimeSchedule._continuousSchedule=new b.WorkTimeSchedule("24X5 Schedule",b.WorkTimeSchedule.TwentyFourByFiveScheduleProvider));b.WorkTimeSchedule.Schedule24X5=b.WorkTimeSchedule._continuousSchedule;
null==b.WorkTimeSchedule._cached8X5ScheduleTimes&&(b.WorkTimeSchedule._cached8X5ScheduleTimes=new b.WorkTimeSchedule("8X5 Schedule",b.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider));b.WorkTimeSchedule.Schedule8X5=b.WorkTimeSchedule._cached8X5ScheduleTimes;b.WorkTimeSchedule.TaskResolutionInfo=function(b,a,c,e,g){this._start=b;b||(this._start=Date.MinValue);this._duration=a;a||(this._duration=RQTimeSpan.Zero_M());this._calenders=c;this._searchDuration=e;this.isForward=g;this._testName="start="+
b.toString()+", duration="+a.toString()+", searchDuration="+e.toString()+", isForward="+g};b.WorkTimeSchedule.TaskResolutionInfo.prototype.CompareTo=function(b){var a=0;0==a&&(a=this._start.compareTo(b._start));0==a&&(a=this._duration.compareTo(b._duration));if(0==a&&null!=this._calenders&&null!=b._calenders&&(a=this._calenders.length-b._calenders.length,a=0<a?1:0>a?-1:0,0==a))for(var c=0;c<this._calenders.length;c++){var e=this._calenders[c],g=b._calenders[c];if(e!=g&&(null!=e&&null!=g?(a=e._guid-
g._guid,a=0<a?1:0>a?-1:0):a=null==e?-1:1,0!=a))break}0==a&&(a=this._searchDuration.compareTo(b._searchDuration));0==a&&this.isForward==b.isForward&&(a=0);return a};b.WorkTimeSchedule.TaskResolutionInfo.prototype.equals=function(b){if(this._testName!=b._testName||this.isForward!=b.isForward)return!1;var a=0;if(0==a&&null!=this._calenders&&null!=b._calenders&&(a=this._calenders.length-b._calenders.length,a=0<a?1:0>a?-1:0,0==a))for(var c=0;c<this._calenders.length;c++){var e=this._calenders[c],g=b._calenders[c];
if(e!=g&&(null!=e&&null!=g?(a=e._guid-g._guid,a=0<a?1:0>a?-1:0):a=null==e?-1:1,0!=a))break}return 0==a?!0:!1};RadiantQ.Gantt.Calendar={};RadiantQ.Gantt.Calendar=function(b,a,c){this.id=b;this.Name=this.WeekDays=null;this.HolidayList=new RadiantQ.Gantt.Dictionary;this._schedule=null;3==arguments.length?(this.WeekDays=a,this.id=b,this.Name=c):1==arguments.length?(this.WeekDays=this.CreateWeekDayList(arguments[0]),this.CreateCalendarFromScheduleString(arguments[0]),this.id=-1,this.Name=""):2==arguments.length&&
(this.WeekDays=this.CreateWeekDayList(arguments[1]),this.CreateCalendarFromScheduleString(arguments[1]),this.id=-1,this.Name=arguments[0])};RadiantQ.Gantt.Calendar.prototype.Schedule_M=function(){null==this._schedule&&(this._schedule=RadiantQ.Gantt.Calendar.CreateSchedule(this));return this._schedule};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.Calendar.prototype,"Schedule",{get:function(){null==this._schedule&&(this._schedule=RadiantQ.Gantt.Calendar.CreateSchedule(this));
return this._schedule}});b.Calendar.prototype.CreateCalendarFromScheduleString=function(d){var a=d.split("HOL"),c=null;a[0].replace(/[ ,;]+$/,"").split(";");-1!=d.indexOf("HOL")&&(c=a[1].trim().replace(/[ ,;]+$/,"").split(";"));if(null!=c)try{for(a=0;a<c.length;a++){var e=b.ExceptionDay.ParseExceptionDay(c[a]),g=e.Date.getTime();!1==this.HolidayList.Contains(g)&&this.HolidayList.Add(g,e)}}catch(h){throw Error("Invalid  Date value encountered in this Calendar definition string: "+d);}};b.Calendar.prototype.CreateWeekDayList=
function(d){d=d.toLowerCase().split("hol");return b.Calendar.ParseWeekDays(d[0])};b.Calendar.CreateSchedule=function(d){if(d instanceof b.Calendar)return this.scheduleProvider=function(a){return d.GetWorkingTimes(a)},new b.WorkTimeSchedule(d.Name,this.scheduleProvider);if("string"===typeof d){var a=new b.Calendar(d);return b.Calendar.CreateSchedule(a)}};b.Calendar.prototype.GetWorkingTimes=function(d){var a=this.WeekDays[parseInt(Date.getDayNumberFromName(d.getDayName()))];if(this.IsHoliday(d))return null;
for(var c=new b.TimePeriodCollection,e=0;e<a.WorkingTimes.length;e++){var g=a.WorkingTimes[e],h=d.clone().Date();c.Add(new b.TimePeriod(h.addTimeSpan(g.From),h.addTimeSpan(g.To)))}return c};b.Calendar.prototype.IsHoliday=function(b){return!1==this.WeekDays[parseInt(Date.getDayNumberFromName(b.getDayName()))].IsWorkingDay||!0==this.HolidayList.Contains(b.getTime())};b.Calendar.prototype.GetWorkDayWorkingTimes=function(d){d=this.WeekDays[d];return 0<d.WorkingTimes.length?d.WorkingTimes:[new b.WorkDayWorkingTime(RQTimeSpan.Zero_M(),
new RQTimeSpan(0,24,0,0))]};b.Calendar.ParseWeekDays=function(d){for(var a=d.replace(/[ ,;]+$/,"").split(";"),c=[],e=0;7>e;e++)0==d.length?c.push(new b.WeekDay(!0,b.Calendar.GetWorkingTimes())):c.push(new b.WeekDay(!1));if(0==d.length)return c;for(e=0;e<a.length;e++)if(d=a[e],0!=d.length){d=d.trim();if(3>d.length)throw Error("Encoutered a day value string: '"+d.toString()+"' that is smaller than 3 days.");var g=d.substring(0,3);switch(g.toLowerCase()){case "sun":c[0]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(d.substring(3)));
break;case "mon":c[1]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(d.substring(3)));break;case "tue":c[2]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(d.substring(3)));break;case "wed":c[3]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(d.substring(3)));break;case "thu":c[4]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(d.substring(3)));break;case "fri":c[5]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(d.substring(3)));break;case "sat":c[6]=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(d.substring(3)));break;
default:throw Error("Invalid day name encountered: '"+g+"'. Expected a day name of the form 'SUN', 'MON', etc.");}}return c};b.Calendar.GetWorkingTimes=function(d){var a=[];if(d){d=d.trim();for(var c=d.split(","),e=0;e<c.length;e++){var g=c[e].trim(),h=g.split(" ");if(2>h.length)throw Error("Expected 2 time span strings of the form '09:00:00 17:00:00'. Encountered string '"+g+"'");try{var m=h[0].split(":");if(3>m.length)throw Error();var f=new RQTimeSpan(0,m[0],m[1],m[2])}catch(l){throw Error("Cannot parse working time string '"+
h[0]+"'. Should be of the format 09:00:00.");}try{m=h[1].split(":");if(3>m.length)throw Error();var n=new RQTimeSpan(0,m[0],m[1],m[2])}catch(p){throw Error("Cannot parse working time string '"+h[1]+"'. Should be of the format 09:00:00.");}if(n.isLessThan(f))throw Error(string.Format("Error in '{0}' syntax. The end time for a day is earlier than the start time.",d));a.push(new b.WorkDayWorkingTime(f,n))}}else a.push(new b.WorkDayWorkingTime(new RQTimeSpan(0,0,0,0),new RQTimeSpan(0,24,0,0)));return a};
b.Calendar.prototype.getWorkingTimesString=function(b){for(var a="",c=0;c<b.length;c++)a+=b[c].toString()+",";return a.replace(/[ ,]+$/,"")};b.Calendar.prototype.toString=function(){for(var b="",a=0;a<this.WeekDays.length;a++){var c=this.WeekDays[a];if(!0==c.IsWorkingDay)switch(a){case 0:b+="SUN "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 1:b+="MON "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 2:b+="TUE "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 3:b+=
"WED "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 4:b+="THU "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 5:b+="FRI "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 6:b+="SAT "+this.getWorkingTimesString(c.WorkingTimes)+";"}}if(0<this.HolidayList.length){b+="HOL ";for(a=0;a<this.HolidayList.asArray.length;a++)b+=this.HolidayList.asArray[a].toString("yyyy-M-d")+";";b=b.replace(/[;]+$/,"").trim()}return b.trim()};f.prototype=new RadiantQ.ValueConverter;f.prototype.Convert=
function(d,a,c,e){return d?b.Calendar.CreateSchedule(d):null};b.StringToWorkTimeScheduleConverter=new f;b.WeekDay=function(b,a){this.IsWorkingDay=b;this.WorkingTimes=a?a:[];this.IsUndefined=!1};b.WeekDay.Undefined=new b.WeekDay(!0);b.WeekDay.Undefined.IsUndefined=!0;b.WeekDay.prototype.clone=function(){for(var b=new WeekDay(this.IsWorkingDay),a=0;a<this.WorkingTimes.length;a++)workingTime=this.WorkingTimes[a],b.WorkingTimes.Add(workingTime.clone());return b};b.WorkDayWorkingTime=function(b,a){this.From=
b;this.To=a};b.WorkDayWorkingTime.clone=function(){return new b.WorkDayWorkingTime(this.From,this.To)};b.WorkDayWorkingTime.prototype.toString=function(){return this.From.toString()+" "+this.To.toString()};b.ExceptionDay=function(b,a,c){this.Name=b;this.Date=a.Date();this.TimePeriods=c?c:[]};b.ExceptionDay.ParseExceptionDay=function(d){var a=null,c="",e=Date.MinValue;d=d.split("TimePeriod");var g=d[0].split(":");2==g.length?(a=g[1].split("-"),e=new Date(a[0],a[1]-1,a[2]),c=g[0],a=new b.ExceptionDay(c,
e)):1==g.length&&(a=g[0].split("-"),e=new Date(a[0],a[1]-1,a[2]),a=new b.ExceptionDay("",e));2==d.length&&(a=new b.ExceptionDay(c,e,b.Calendar.GetWorkingTimes(d[1])));return a};b.ExceptionDay.prototype.toString=function(){var b="",b="";if(null!=this.TimePeriods&&0<this.TimePeriods.length){for(var a=0;a<this.TimePeriods.length;a++)b+=this.TimePeriods[a].toString()+",";b=" TimePeriod "+b.replace(/[,]+$/,"").trim()}a=this.Date.toString("yyyy-M-d");return b=""===this.Name?a+" "+b:this.Name+":"+a+" "+
b};RadiantQ.Gantt.addMethod(RadiantQ.Gantt,"CalendarWithExceptions",function(d,a){this.WorkingDayExceptions=new RadiantQ.Gantt.Dictionary;this.NonWorkingdayExceptions=new b.Dictionary;this.ExceptionWeekDays=[];this.BaseCalendar=d;this.Tag=null;var c=this.IsBaseCalendarUndefined=!1;"string"===typeof d&&(a=d,c=!0);var e=b.CalendarWithExceptions.ParseExceptionsList(a,this.WorkingDayExceptions,this.NonWorkingdayExceptions,this.ExceptionWeekDays,c);c&&(this.IsBaseCalendarUndefined=!0,c=a.replace(e,""),
this.BaseCalendar=new RadiantQ.Gantt.Calendar(c))});RadiantQ.Gantt.addMethod(RadiantQ.Gantt,"CalendarWithExceptions",function(b,a,c,e){if(7!=a.length)throw new Exception("weekDayExceptions should be a list of exactly 7 in the call to CalendarWithExceptions constructor.");this.BaseCalendar=b;this.WorkingDayExceptions=c;this.NonWorkingdayExceptions=e;this.ExceptionWeekDays=a});b.CalendarWithExceptions.ParseExceptionDays=function(d,a){for(var c=0;c<d.length;c++){var e=b.ExceptionDay.ParseExceptionDay(d[c]);
if(null!=e){var g=e.Date.getTime();!1==a.Contains(g)&&a.Add(g,e)}}return a};b.CalendarWithExceptions.ParseExceptionsList=function(d,a,c,e){d||(d="");var g=[],h=b.CalendarWithExceptions.splitString(d,g);try{null!=g.WorkDaySpecific&&b.CalendarWithExceptions.ParseExceptionDays(g.WorkDaySpecific,a),null!=g.NonWorkDaySpecific&&b.CalendarWithExceptions.ParseExceptionDays(g.NonWorkDaySpecific,c)}catch(m){throw Error("Invalid Date format encountered in this CalendarWithException definition string: "+d);}for(d=
0;d<c.asArray.length;d++){var f=c.asArray[d].Date.getTime();null!=a.Contains(f)&&a.Remove(f)}if(null!=g.WeekDaySpecific)b.CalendarWithExceptions.ParseWeekDays(g.WeekDaySpecific,e);else for(d=0;7>d;d++)e.push(b.WeekDay.Undefined);return h};b.CalendarWithExceptions.splitString=function(b,a){var c=[],e=b.indexOf("WeekDaySpecific"),g=b.indexOf("NonWorkDaySpecific");b=b.replace("NonWorkDaySpecific","__NoNWorkDay__");var h=b.indexOf("WorkDaySpecific");b=b.replace("__NoNWorkDay__","NonWorkDaySpecific");
-1!=e&&c.push(e);-1!=g&&c.push(g);-1!=h&&c.push(h);e="";c.sort(function(a,c){return a-c});for(g=0;g<c.length;g++)g+1<=c.length&&(h=b.substring(c[g],c[g+1]),-1!=h.indexOf("WeekDaySpecific")?a.WeekDaySpecific=h.replace("WeekDaySpecific","").replace(/[ ; ]+$/,"").trim():-1!=h.indexOf("NonWorkDaySpecific")?a.NonWorkDaySpecific=h.replace("NonWorkDaySpecific","").replace(/[ ; ]+$/,"").trim().split(";"):-1!=h.indexOf("WorkDaySpecific")&&-1==h.indexOf("NonWorkDaySpecific")&&(a.WorkDaySpecific=h.replace("WorkDaySpecific",
"").replace(/[ ; ]+$/,"").trim().split(";")),e+=h);return e};b.CalendarWithExceptions.prototype.IsHoliday=function(b){if(this.WorkingDayExceptions.Contains(b.getTime()))return!1;if(this.NonWorkingdayExceptions.Contains(b.getTime()))return!0;var a=this.ExceptionWeekDays[parseInt(Date.getDayNumberFromName(b.getDayName()))];return!1==a.IsUndefined?!1==a.IsWorkingDay?!0:!1:this.BaseCalendar.IsHoliday(b)};b.CalendarWithExceptions.prototype.GetWorkingTimes=function(b){var a=this.WorkingDayExceptions.GetItemByKey(b.getTime());
if(null!=a&&a.TimePeriods&&0<a.TimePeriods.length)return a.TimePeriods;b=parseInt(Date.getDayNumberFromName(b.getDayName()));return!1==this.ExceptionWeekDays[b].IsUndefined&&(a=this.ExceptionWeekDays[b].WorkingTimes,0<a.Count)?a:this.BaseCalendar.GetWorkDayWorkingTimes(b)};b.CalendarWithExceptions.ParseWeekDays=function(d,a){for(var c=d.replace(/[ ,;]+$/,"").split(";"),e=0;7>e;e++)a.push(b.WeekDay.Undefined);if(0==d.length)return a;for(e=0;e<c.length;e++){var g=c[e];if(0!=g.length){var h=g.trim();
if(3>h.length)throw Error("Encoutered a day value string: '"+h.toString()+"' that is smaller than 3 days.");g=h.substring(0,3);h=h.substring(3);"nwork"==h.trim().toLowerCase()?h=new b.WeekDay(!1):(""===h&&(h="00:00:00 1.00:00:00"),h=new b.WeekDay(!0,b.Calendar.GetWorkingTimes(h)));switch(g.toLowerCase()){case "sun":a[0]=h;break;case "mon":a[1]=h;break;case "tue":a[2]=h;break;case "wed":a[3]=h;break;case "thu":a[4]=h;break;case "fri":a[5]=h;break;case "sat":a[6]=h;break;default:throw Error("Invalid day name encountered: '"+
g+"'. Expected a day name of the form 'SUN', 'MON', etc.");}}}return a};b.CalendarWithExceptions.CreateWorkTimeSchedule=function(d){this.scheduleProvider=function(a){if(!0==d.IsHoliday(a.Date()))return null;for(var c=new b.TimePeriodCollection,e=d.GetWorkingTimes(a.Date()),g=0;g<e.length;g++){var h=e[g];c.Add(new b.TimePeriod(a.Date().addTimeSpan(h.From),a.Date().addTimeSpan(h.To),!1))}return c};return new b.WorkTimeSchedule(d.BaseCalendar.Name,this.scheduleProvider)};b.CalendarWithExceptions.Merge=
function(b,a){for(var c=new RadiantQ.Gantt.CalendarWithExceptions(a),e=c.WorkingDayExceptions,g=c.NonWorkingdayExceptions,c=c.ExceptionWeekDays,h=new RadiantQ.Gantt.CalendarWithExceptions(b.BaseCalendar,b.toString()),m=0;m<e.keys.length;m++){var f=e.keys[m],l=e.GetItemByKey(f),n=l.Date.getTime();!0==h.NonWorkingdayExceptions.Contains(n)&&h.NonWorkingdayExceptions.Remove(n);!1==h.WorkingDayExceptions.Contains(f)&&h.WorkingDayExceptions.Add(f,l)}for(m=0;m<g.keys.length;m++)f=g.keys[m],l=g.GetItemByKey(f),
l.Date.getTime(),!0==h.WorkingDayExceptions.Contains(f)&&h.WorkingDayExceptions.Remove(f),!1==h.NonWorkingdayExceptions.Contains(f)&&h.NonWorkingdayExceptions.Add(f,l);for(m=0;m<c.length;m++)e=c[m],!1==e.IsUndefined&&h.ExceptionWeekDays.splice(m,1,e);return h};b.CalendarWithExceptions.prototype.toString=function(){for(var b="",a="",c="",e="",g=0;g<this.WorkingDayExceptions.asArray.length;g++)b+=this.WorkingDayExceptions.asArray[g].toString()+";";b.trim();for(g=0;g<this.NonWorkingdayExceptions.asArray.length;g++)a+=
this.NonWorkingdayExceptions.asArray[g].toString()+";";a.trim();for(var h=!0,g=0;g<this.ExceptionWeekDays.length&&(h=this.ExceptionWeekDays[g].IsUndefined,h);g++);if(!1==h)for(c+=" WeekDaySpecific ",g=0;g<this.ExceptionWeekDays.length;g++){var h=this.ExceptionWeekDays[g],m=Date.CultureInfo.dayNames[g].substring(0,3);if(!1==h.IsUndefined)if(!0==h.IsWorkingDay){for(var f="",l=0;l<h.WorkingTimes.length;l++)f+=h.WorkingTimes[l].toString()+",";f=f.replace(/[,]+$/,"").trim();c+=m+" "+f+";"}else c+=m+" NWork;"}""!=
b&&(e+="WorkDaySpecific "+b);""!=a&&(e+=" NonWorkDaySpecific "+a);""!=c&&(e+=c);return e.trim()};b.SubCalendar=function(b,a){this.Calendar=b;this.CalendarValidUntil=a;this.IsValidDateUndefined=!1;void 0==a&&(this.CalendarValidUntil=Date.MaxValue,this.IsValidDateUndefined=!0)};b.SubCalendarList=function(){b.Dictionary.call(this);this.OnCollectionChanged=function(){this._keys=this.Keys.slice(0).sort();b.Dictionary.prototype.OnCollectionChanged.apply(this,arguments)};this.IsHoliday=function(b){return this.getSubCalendar(b).Calendar.IsHoliday(b)};
this.getSubCalendar=function(b){for(var a=Date.MinValue,c=0;c<this._keys.length;c++){var e=this._keys[c];if(e.equals(b)||e.isGreaterThan(b)){a=e;break}}return this.GetItemByKey(a)};this.GetWorkDayWorkingTimes=function(b){var a=this.getSubCalendar(b);b=parseInt(Date.getDayNumberFromName(b.getDayName()));return a.Calendar.GetWorkDayWorkingTimes(b)}};b.SubCalendarList.prototype=new b.Dictionary;b.CombinedCalendarWithExceptions=function(d,a){this.SubCalendars=d;this.WorkingDayExceptions=new b.Dictionary;
this.NonWorkingdayExceptions=new b.Dictionary;this.ExceptionWeekDays=[];this.Tag=null;b.CalendarWithExceptions.ParseExceptionsList(a,this.WorkingDayExceptions,this.NonWorkingdayExceptions,this.ExceptionWeekDays)};b.CombinedCalendarWithExceptions.prototype.IsHoliday=function(b){if(this.WorkingDayExceptions.Contains(b.getTime()))return!1;if(this.NonWorkingdayExceptions.Contains(b.getTime()))return!0;var a=this.ExceptionWeekDays[parseInt(Date.getDayNumberFromName(b.getDayName()))];return!1==a.IsUndefined?
!1==a.IsWorkingDay?!0:!1:this.SubCalendars.IsHoliday(b)};b.CombinedCalendarWithExceptions.prototype.GetWorkingTimes=function(b){var a=this.WorkingDayExceptions.GetItemByKey(b.getTime());if(null!=a&&a.TimePeriods&&0<a.TimePeriods.length)return a.TimePeriods;a=parseInt(Date.getDayNumberFromName(b.getDayName()));return!1==this.ExceptionWeekDays[a].IsUndefined&&(a=this.ExceptionWeekDays[a].WorkingTimes,0<a.Count)?a:this.SubCalendars.GetWorkDayWorkingTimes(b)};b.CombinedCalendarWithExceptions.prototype.GetCalendarName=
function(b){b=this.SubCalendars.getSubCalendar(b);return null!=b?b.Calendar.Name:""};b.CombinedCalendarWithExceptions.CreateWorkTimeSchedule=function(d){this.scheduleProvider=function(a){if(!0==d.IsHoliday(a.Date()))return null;for(var c=new b.TimePeriodCollection,e=d.GetWorkingTimes(a.Date()),g=0;g<e.length;g++){var h=e[g];c.Add(new b.TimePeriod(a.Date().addTimeSpan(h.From),a.Date().addTimeSpan(h.To),!1))}return c};return new b.WorkTimeSchedule(d.GetCalendarName(new Date),this.scheduleProvider)}})();
(function(){var f=RadiantQ.Gantt.DependencyType;RadiantQ.Gantt.ValueConverters={};RadiantQ.Gantt.ValueConverters.ConverterUtils={};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText=function(b,d,a){for(var c="",e=0;e<b.length;e++)var g=b[e],h=g.Resource_M(),h=d?h.ResourceID_M():h.ResourceName_M(),c=c+(h+" "+RadiantQ.Gantt.ValueConverters.ConverterUtils.AllocationUnitText(g,a)),c=c.trim(),c=c+",";return c.trimEnd(",")};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetAssignedResourceInstances=
function(b){for(var d=[],a=0;a<b.length;a++)d.push(b[a].Resource_M());return d};RadiantQ.Gantt.ValueConverters.ConverterUtils.AllocationUnitText=function(b,d){var a=b.AllocationUnits_M();if(100==a)return"";a=100*(a/100);return"["+(d?Math.round(a).toString():a.toString())+"%]"};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetMissingResourceKeys=function(b,d){var a=[];if(void 0!=b&&null!=b&&""!=b)for(var c=b.split(","),e=c.length,g=0;g<e;g++){var h=c[g],m=h;-1!=m.indexOf("[")&&(this.ParseAllocUnitsString(m.substring(h.indexOf("["))),
m=h.substring(0,m.indexOf("[")));m=m.trim();h=d[m];null==h&&(h=d.GetResourceByName(m.trim()));null==h&&0<m.length&&a.push(m)}return a};RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertResourceTextToAssignments=function(b,d,a){var c=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);if(b){var e=b.split(",");for(b=0;b<e.length;b++){var g=e[b],h=g,m=100;-1!=h.indexOf("[")&&(m=this.ParseAllocUnitsString(h.substring(g.indexOf("["))),h=g.substring(0,h.indexOf("[")));g=d._resByID[h.trim()];
null==g&&(g=d.GetResourceByName(h.trim()));g&&!1==c.ContainsResource(g)&&c.add(new RadiantQ.Gantt.Model.ResourceAssignment(g,m))}}if(!1==this.IsContentEqual(c,a)){d=new RadiantQ.Gantt.Utils.DelayUpdates;a.clear();for(b=0;b<c.length;b++)a.add(c[b]);d.Dispose()}};RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments=function(b,d){for(var a=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null),c=0;c<b.length;c++){var e=b[c];!1==a.ContainsResource(e)&&a.add(new RadiantQ.Gantt.Model.ResourceAssignment(e))}if(!1==
this.IsContentEqual(a,d)){e=new RadiantQ.Gantt.Utils.DelayUpdates;d.clear();for(c=0;c<a.length;c++)d.add(a[c]);e.Dispose()}};RadiantQ.Gantt.ValueConverters.ConverterUtils.IsContentEqual=function(b,d){if(b.length!=d.length)return!1;for(var a=0;a<b.length;a++)if(b[a]!=d[a]||b[a].AllocationUnits_M()!=d[a].AllocationUnits_M())return!1;return!0};RadiantQ.Gantt.ValueConverters.ConverterUtils.ParseAllocUnitsString=function(b){b=b.trim(" ","[","]","%");var d=100;return d=parseFloat(b)};RadiantQ.Gantt.ValueConverters.ConverterUtils.AddAssignmentToActivity=
function(b,d){var a=b.Assignments_M(),c=b.Model.GanttResources_M().getResourceByID(d);c&&!1==a.ContainsResource(c)&&a.add(new RadiantQ.Gantt.Model.ResourceAssignment(c))};RadiantQ.Gantt.ValueConverters.ParentViewToIndentConverter={Convert:function(b,d,a){return null==b?0:b+1},ConvertBack:function(){throw Error("Not Implemented");}};RadiantQ.Gantt.ValueConverters.SortIDAsPredIDConverter={GC:null,Convert:function(b,d,a){if(null==b)return b;d=[];a=[];var c=[],e=this.GC.options.LagStringUnitsInHours;
RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(b,e,d,a,c,[]);b="";if(0<d.length)for(var g=0;g<d.length;g++){var h=this.GC.Model.GetActivityById(d[g]);null!=h&&(h=this.CreateDepStringFor(h.SortOrder_M(),a[g],c[g],e),b+=h,b+=",")}return b.trimEnd(",")},ConvertBack:function(b,d,a){d=[];a=[];var c=[],e=this.GC.options.LagStringUnitsInHours;RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(b.toString(),e,d,a,c,"");b="";if(0<d.length)for(var g=0;g<d.length;g++){var h=
this.GetActivityFromSortID(d[g]);null!=h&&(h=this.CreateDepStringFor(h.ID_M(),a[g],c[g],e),b+=h,b+=",")}return b.trimEnd(",")},CreateDepStringFor:function(b,d,a,c){var e=RQTimeSpan.Zero_M();b=b.toString();switch(d){case f.FinishToFinish:b+="FF";break;case f.StartToFinish:b+="SF";break;case f.StartToStart:b+="SS"}a.isGreaterThan(e)?b+="+"+(a.getTotalHours()/c).toString():a.isLessThan(e)&&(b+="-"+(-(a.getTotalHours()/c)).toString());return b},GetActivityFromSortID:function(b){return this.RecursivelyFindSortID(this.GC.Model.Activities_M(),
b)},RecursivelyFindSortID:function(b,d){for(var a=0;a<b.length;a++){var c=b[a];if(c.SortOrder_M()==d)return c;c=c.ChildActivities_M();if(null!=c&&0<c.length&&(c=this.RecursivelyFindSortID(c,d),null!=c))return c}return null}}})();
(function(){var f=RadiantQ.Gantt.Model={};RadiantQ.Gantt.Model.IGanttModel=function(){this.OnPropertyChanged=function(b,d){"Start"==b&&UpdateEnd()};this.GetNewID||(this.GetNewID=function(){});this._lagStringUnitsInHours=null;this.canShiftInProgressTasks=this.autoCalculateSummaryTaskTimes=!1;return this};RadiantQ.Gantt.Model.IGanttModel.prototype.LagStringUnitsInHours_M=function(b){if(0==arguments.length)return this._lagStringUnitsInHours;this._lagStringUnitsInHours!=b&&(this._lagStringUnitsInHours=
b)};RadiantQ.Gantt.Model.IGanttModel.prototype.AllActivities_M=function(){return this._dictActivityById};RadiantQ.Gantt.Model.IGanttModel.prototype.Activities_M=function(){return this._activities};RadiantQ.Gantt.Model.IGanttModel.prototype.Dependencies_M=function(){return this._dependencies};RadiantQ.Gantt.Model.IGanttModel.prototype.GanttResources_M=function(){return this._resources};RadiantQ.Gantt.Model.IGanttModel.prototype.WorkTimeSchedule_M=function(b){if(0==arguments.length)return this._schedule;
this._schedule!=b&&(this._schedule=b,this.OnPropertyChanged("WorkTimeSchedule"))};RadiantQ.Gantt.Model.IGanttModel.prototype.EnforceDependencyConstraints_M=function(b){if(0==arguments.length)return this.enforceDependencyConstraints;b!=this.enforceDependencyConstraints&&(this.enforceDependencyConstraints=b,this.OnPropertyChanged("EnforceDependencyConstraints",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.ValidateDependencySetting_M=function(b){if(0==arguments.length)return this.validateDependencySetting;
b!=this.validateDependencySetting&&(this.validateDependencySetting=b,this.OnPropertyChanged("ValidateDependencySetting",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.AutoCalculateSummaryTaskTimes_M=function(b){if(0==arguments.length)return this.autoCalculateSummaryTaskTimes;b!=this.autoCalculateSummaryTaskTimes&&(this.autoCalculateSummaryTaskTimes=b,this.OnPropertyChanged("AutoCalculateSummaryTaskTimes",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.CanShiftInProgressTasks_M=function(b){if(0==
arguments.length)return this.canShiftInProgressTasks;b!=this.canShiftInProgressTasks&&(this.canShiftInProgressTasks=b,this.OnPropertyChanged("CanShiftInProgressTasks",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustDurationOnAssignment_M=function(b){if(0==arguments.length)return this.adjustDurationOnAssignment;b!=this.adjustDurationOnAssignment&&(this.adjustDurationOnAssignment=b,this.OnPropertyChanged("AdjustDurationOnAssignment",b))};RadiantQ.Gantt.Model.IGanttModel.prototype.CustomProgressCalculation_M=
function(){return this._customProgressCalculation};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"LagStringUnitsInHours",{get:function(){return this.LagStringUnitsInHours_M()},set:function(b){this.LagStringUnitsInHours_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AllActivities",{get:function(){return this.AllActivities_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"Activities",{get:function(){return this.Activities_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"Dependencies",{get:function(){return this.Dependencies_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"GanttResources",{get:function(){return this.GanttResources_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"WorkTimeSchedule",{get:function(){return this.WorkTimeSchedule_M()},set:function(b){this.WorkTimeSchedule_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"EnforceDependencyConstraints",{get:function(){return this.EnforceDependencyConstraints_M()},set:function(b){this.EnforceDependencyConstraints_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"ValidateDependencySetting",{get:function(){return this.ValidateDependencySetting_M()},
set:function(b){this.ValidateDependencySetting_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AutoCalculateSummaryTaskTimes",{get:function(){return this.AutoCalculateSummaryTaskTimes_M()},set:function(b){this.AutoCalculateSummaryTaskTimes_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CanShiftInProgressTasks",{get:function(){return this.CanShiftInProgressTasks_M()},set:function(b){this.CanShiftInProgressTasks_M(b)},
enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AdjustDurationOnAssignment",{get:function(){return this.AdjustDurationOnAssignment_M()},set:function(b){this.AdjustDurationOnAssignment_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CustomProgressCalculation",{get:function(){return this.CustomProgressCalculation_M()},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IGanttModel.prototype.GetNewSortOrder=
function(){};RadiantQ.Gantt.Model.IGanttModel.prototype.CreateNewActivity=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.CreateNewDependency=function(b,d,a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.RemoveActivity=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.CanAddNewDependency=function(b,d,a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.DependencyFailedNotifierCallBack=function(b,d,a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.PrepareParenting=function(b,d){};
RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertToValidTimes=function(b,d,a,c,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertToValidStartTime=function(b,d,a){};RadiantQ.Gantt.Model.IGanttModel.prototype.GetStart=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.ApplyPreferredStartTimeOnActivity=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustStartTimeWithEffort=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustStartTime=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustEffort=
function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeEndTime=function(b){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeDuration=function(b){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeEffort=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertDurationToEffort=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.UpdateSortOrderFrom=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.UpdateSortOrders=function(){};RadiantQ.Gantt.Model.IGanttModel.prototype.GetCriticalActivities=
function(b){};RadiantQ.Gantt.Model.IGanttModel.prototype.LevelResources=function(b,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.Filter=function(b,d){};RadiantQ.Gantt.Model.IActivity=function(){NotifyPropertyChanged.call(this);this.PropertyChanged=new ObjectEvent("PropertyChanged");this.VerticalPositionChanged=new ObjectEvent("VerticalPositionChanged");this._assignments=[];this.propertiesDict=[];this.ChildCollectionChanged=new ObjectEvent("ChildCollectionChanged");this.AdjustStartTimeForConstraints=
new ObjectEvent("AdjustStartTimeForConstraints");this.isIActivity=!0;this.id=0;this._sortOrder=-1;this._prefStartTime=this._startTime=Date.MinValue;this._effort=RQTimeSpan.Zero_M();this._cumEffort=RQTimeSpan.Zero_M();this._progressPercent=0;this._isMilestone=!1;this._isVisible=this._isExpanded=!0;this._isFilteredOut=!1;this._displayIndex=-1;return this};RadiantQ.Gantt.Model.IActivity.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.Model.IActivity.prototype.OnPropertyChanged=function(b,d){this.PropertyChanged.raise(this,
{PropertyName:b,Value:d})};RadiantQ.Gantt.Model.IActivity.prototype.OnVerticalPositionChanged=function(){this.VerticalPositionChanged.raise(this,{})};RadiantQ.Gantt.Model.IActivity.prototype.ID_M=function(b){if(0==arguments.length)return this.id;if(this.id!=b){var d=this.id;this.id=b;this.OnPropertyChanged("ID",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.ActivityName_M=function(b){if(0==arguments.length)return this._name;var d=this._name;this._name=b;this.OnPropertyChanged("ActivityName",d,b)};
RadiantQ.Gantt.Model.IActivity.prototype.SortOrder_M=function(b){if(0==arguments.length)return this._sortOrder;if(b&&this._sortOrder!=b){var d=this._sortOrder;this._sortOrder=b;this.OnPropertyChanged("SortOrder",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.StartTime_M=function(b){if(0==arguments.length)return this._startTime;this._startTime.equals(b)||(this._startTime=b)};RadiantQ.Gantt.Model.IActivity.prototype.PreferredStartTime_M=function(b){if(0==arguments.length)return null==this._prefStartTime||
void 0==this._prefStartTime?this.Model.ProjectStartDate:this._prefStartTime;if(!(this._prefStartTime&&b&&this._prefStartTime.equals(b))){var d=this._prefStartTime;this._prefStartTime=b;this.OnPropertyChanged("PreferredStartTime",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.Effort_M=function(b){if(0==arguments.length)return this._effort;this._effort!=b&&(this._effort=b)};RadiantQ.Gantt.Model.IActivity.prototype.Times_M=function(){var b=this.Parent_M();return null==b?!0:b.IsExpanded_M()};RadiantQ.Gantt.Model.IActivity.prototype.PredecessorIndexString_M=
function(b){if(0==arguments.length)return this._predecssorIndexString;if(this._predecssorIndexString!=b){var d=this._predecssorIndexString;this._predecssorIndexString=b;this.OnPropertyChanged("PredecessorIndexString",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.CumulativeEffort_M=function(b){if(0==arguments.length){var d=this.ChildActivities_M();return d&&0!=d.length?this._cumEffort:this._effort}this._cumEffort!=b&&(d=this._cumEffort,this._cumEffort=b,this.OnPropertyChanged("CumulativeEffort",
d,b))};RadiantQ.Gantt.Model.IActivity.prototype.ProgressPercent_M=function(b){if(0==arguments.length)return this._progressPercent||(this._progressPercent=0),this._progressPercent;if(this._progressPercent!=b){0>b&&(b=0);100<b&&(b=100);var d=parseInt(b),a=this._progressPercent;this._progressPercent=isNaN(d)?0:d;this.OnPropertyChanged("ProgressPercent",a,b)}};RadiantQ.Gantt.Model.IActivity.prototype.ProgressEndTime_M=function(){var b=this.StartTime_M();if(b==Date.MaxValue||b==Date.MinValue)return b;
var d=this.ProgressPercent_M();if(0>=d)return b;var a=this.GetWorkingHoursTimeSpan(),d=new RQTimeSpan(0,0,d/100*a.getTotalMinutes(),0),a=this.Schedule_M();return f.BaseGanttModel.ComputeEndTime(b,d,null!=a?a:this.Model.WorkTimeSchedule_M())};RadiantQ.Gantt.Model.IActivity.prototype.Description_M=function(b){if(0==arguments.length)return this._description;b!=this._description&&(this._description=b,this.OnPropertyChanged("Description",b))};RadiantQ.Gantt.Model.IActivity.prototype.Parent_M=function(b){if(0==
arguments.length)return this._parent;if(this._parent!=b){var d=this._parent;this._parent=b;this.IsVisible_M(this.IsParentExpanded_M()&&this.IsParentVisible_M());this.OnPropertyChanged("Parent",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.IsMilestone_M=function(b){if(0==arguments.length)return this._isMilestone;if(this._isMilestone!=b){var d=this._isMilestone;this._isMilestone=b;this.OnPropertyChanged("IsMilestone",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.IsExpanded_M=function(b){if(0==arguments.length)return this._isExpanded;
if(this._isExpanded!=b){var d=this._isExpanded;this._isExpanded=b;for(var a=this.ChildActivities_M(),c=this.IsVisible_M(),e=0;e<a.length;e++)a[e].IsVisible_M(this._isExpanded&&c);this.OnPropertyChanged("IsExpanded",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.IsVisible_M=function(b){if(0==arguments.length)return this._isVisible&!this._isFilteredOut;if(this._isVisible!=b){var d=this._isVisible;this._isVisible=b;for(var a=this.ChildActivities_M(),c=this.IsVisible_M(),e=0;e<a.length;e++)a[e].IsVisible_M(this._isExpanded&&
c);this.OnPropertyChanged("IsVisible",d,c)}};RadiantQ.Gantt.Model.IActivity.prototype.IsFilteredOut_M=function(b){if(0==arguments.length)return this._isFilteredOut;if(this._isFilteredOut!=b){var d=this._isFilteredOut;this._isFilteredOut=b;this.OnPropertyChanged("IsFilteredOut",d,b);this.OnPropertyChanged("IsVisible",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.DisplayIndex_M=function(b){if(0==arguments.length)return this._displayIndex;if(this._displayIndex!=b){var d=this._displayIndex;this._displayIndex=
b;this.OnVerticalPositionChanged();this.OnPropertyChanged("DisplayIndex",d,b)}};RadiantQ.Gantt.Model.IActivity.prototype.Schedule_M=function(b){if(0==arguments.length)return this._schedule;if(this._schedule!=b){var d=this._schedule;this._schedule=b;this.OnPropertyChanged("Schedule",d,b)}};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ID",{get:function(){return this.ID_M()},set:function(b){this.ID_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"ActivityName",{get:function(){return this.ActivityName_M()},set:function(b){this.ActivityName_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"SortOrder",{get:function(){return this.SortOrder_M()},set:function(b){this.SortOrder_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"StartTime",{get:function(){return this.StartTime_M()},set:function(b){this.StartTime_M(b)},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"PreferredStartTime",{get:function(){return this.PreferredStartTime_M()},set:function(b){this.PreferredStartTime_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Effort",{get:function(){return this.Effort_M()},set:function(b){this.Effort_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Times",{get:function(){return this.Times_M()},
set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"PredecessorIndexString",{get:function(){return this.PredecessorIndexString_M()},set:function(b){this.PredecessorIndexString_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"CumulativeEffort",{get:function(){return this.CumulativeEffort_M()},set:function(b){this.CumulativeEffort_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"ProgressPercent",{get:function(){return this.ProgressPercent_M()},set:function(b){this.ProgressPercent_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Schedule",{get:function(){return this.Schedule_M()},set:function(b){this.Schedule_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ProgressEndTime",{get:function(){return this.ProgressEndTime_M()},set:function(){},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Description",{get:function(){return this.Description_M()},set:function(b){this.Description_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Parent",{get:function(){return this.Parent_M()},set:function(b){this.Parent_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsMilestone",{get:function(){return this.IsMilestone_M()},set:function(b){this.IsMilestone_M(b)},
enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsExpanded",{get:function(){return this.IsExpanded_M()},set:function(b){this.IsExpanded_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsVisible",{get:function(){return this.IsVisible_M()},set:function(b){this.IsVisible_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsFilteredOut",{get:function(){return this.IsFilteredOut_M()},
set:function(b){this.IsFilteredOut_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"DisplayIndex",{get:function(){return this.DisplayIndex_M()},set:function(b){this.DisplayIndex_M(b)},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IActivity.prototype.GetWorkingHoursTimeSpan=function(){};RadiantQ.Gantt.Model.IActivity.prototype.ShiftForwardTo=function(b){};RadiantQ.Gantt.Model.IActivity.prototype.CreateNewChildActivity=function(b){};RadiantQ.Gantt.Model.IActivity.prototype.OnAddedPredecessorDependency=
function(b){};RadiantQ.Gantt.Model.IActivity.prototype.OnRemovedPredecessorDependency=function(b){};RadiantQ.Gantt.Model.IActivity.prototype.IsCritical=function(b,d,a){};RadiantQ.Gantt.Model.IActivity.prototype.GetScheduleToPlotWith=function(b){};RadiantQ.Gantt.Model.IActivity.prototype.Dispose=function(){this.PropertyChanged&&this.PropertyChanged.Dispose();this.VerticalPositionChanged&&this.VerticalPositionChanged.Dispose();this.ChildCollectionChanged&&this.ChildCollectionChanged.Dispose();this.AdjustStartTimeForConstraints&&
this.AdjustStartTimeForConstraints.Dispose();this.AdjustStartTimeForConstraints=this.ChildCollectionChanged=this.VerticalPositionChanged=this.PropertyChanged=null};RadiantQ.Gantt.Model.IActivityDependency=function(){this.OnPropertyChanged=function(b,d){this.PropertyChanged.raise(this,{PropertyName:b,Value:d})};return this};RadiantQ.Gantt.Model.IActivityDependency.prototype.FromActivity_M=function(){return this._fromActivity};RadiantQ.Gantt.Model.IActivityDependency.prototype.ToActivity_M=function(){return this._toActivity};
RadiantQ.Gantt.Model.IActivityDependency.prototype.Type_M=function(b){if(0==arguments.length)return this._type;this._type=b;this.OnPropertyChanged("Type",b)};RadiantQ.Gantt.Model.IActivityDependency.prototype.Lag_M=function(b){if(0==arguments.length)return this._lag;this._lag=b;this.OnPropertyChanged("Lag",b)};RadiantQ.Gantt.Model.IActivityDependency.prototype.Tag_M=function(b){if(0==arguments.length)return this._tag;this._tag=b;this.OnPropertyChanged("Tag",b)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,
"FromActivity",{get:function(){return this.FromActivity_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"ToActivity",{get:function(){return this.ToActivity_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Type",{get:function(){return this.Type_M()},set:function(b){this.Type_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,
"Lag",{get:function(){return this.Lag_M()},set:function(b){this.Lag_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Tag",{get:function(){return this.Tag_M()},set:function(b){this.Tag_M(b)},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IActivityDependency.prototype.ComputeLatestToActivityStartTime=function(){};RadiantQ.Gantt.Model.IActivityDependency.prototype.EnsureActivityOrder=function(){};RadiantQ.Gantt.Model.IGanttResource=
function(){this.PropertyChanged=new ObjectEvent("PropertyChanged");return this};RadiantQ.Gantt.Model.IGanttResource.prototype.ResourceName_M=function(b){if(0==arguments.length)return this._resNamebinder?this._resNamebinder.Value_M():this._resIDbinder?this._resIDbinder.Value_M():this._boundObj?this._boundObj.toString():"";this.ResourceName_M()!=b&&null!=this._resNamebinder&&this._resNamebinder.Value_M(b)};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.Model.IGanttResource.prototype,
"ResourceName",{get:function(){return this.ResourceName_M()},set:function(b){this.ResourceName_M(b)},enumerable:!0,configurable:!0});RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs=function(b,d,a,c){this._activity=b||null;this.NewWBSID_M(d||"");this._collection=c||[];this.childIndex=a||-1};RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.NewWBSID_M=function(b){if(0==arguments.length)return this.newWbs;
this.newWbs=b};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype,"Activity",{get:function(){return this.Activity_M()}}),Object.defineProperty(RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype,"NewWBSID",{get:function(){return this.NewWBSID_M()},set:function(b){this.NewWBSID_M(b)}}));RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.GetActivityChildIndex=function(){return-1!=this.childIndex?this.childIndex:this._collection.indexOf(this._activity)};
RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs=function(b){this._enforce=!0;this._activity=b};RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype.Enforce_M=function(b){if(0==arguments.length)return this._enforce;this._enforce=b};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype,"Activity",
{get:function(){return this.Activity_M()}}),Object.defineProperty(RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype,"Enforce",{get:function(){return this.Enforce_M()},set:function(b){this.Enforce_M(b)}}))})();
(function(f){var b=RadiantQ.Gantt.Model;b.ResourceLoadTracker=function(d,a){this._resourceLoadLists=this._model=null;this._enableRoundingToDays=!0;this._enableRoundingToDays=a;null==d&&alert("model cannot be null in ResourceLoadTracker constructor.");this._model=d;this._resourceLoadLists=new RadiantQ.Gantt.Dictionary;for(var c=this._model.GanttResources_M(),e=0;e<c.length;e++){var g=c[e],h=new b.ResourceLoadList(g,this._model,this._dispatcher,this._enableRoundingToDays);this._resourceLoadLists.Add(g,
h)}c.CollectionChanged.subscribe(this.ganttResources_CollectionChanged,this)};b.ResourceLoadTracker.prototype.ganttResources_CollectionChanged=function(d,a){if("insert"==a.type)for(var c=0;c<a.NewItems.length;c++){var e=a.NewItems[c],g=new b.ResourceLoadList(e,this._model,this._dispatcher,this._enableRoundingToDays);this._resourceLoadLists.Add(e,g)}if("remove"==a.type)for(c=0;c<a.OldItems.length;c++)e=a.OldItems[c],this._resourceLoadLists.Remove(e)};b.ResourceLoadTracker.prototype.ResourceLoadLists_M=
function(){return this._resourceLoadLists};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.ResourceLoadTracker.prototype,"ResourceLoadLists",{get:function(){return this._resourceLoadLists},set:function(){},enumerable:!0,configurable:!0});b.LoadInfo=function(b,a,c){this.TimePeriod=new RadiantQ.Gantt.TimePeriod(b,null,new RQTimeSpan(a-b));this.LoadPerc=c};b.LoadInfo.prototype.ToString=function(){return"Start: "+this.TimePeriod.Start_M()+", End: "+this.TimePeriod.End_M()+", Load: "+this.LoadPerc};
b.ResourceLoadList=function(b,a,c,e){this._enableRoundToDays=e;this._model=a;this._resource=b;this._orderedLoadInfos=new RadiantQ.RQ_ObservableCollection([]);this._temLoadLists=new RadiantQ.RQ_ObservableCollection([]);this.refreshTimer=null;this._dispatcher=c;this._activities=a.GetResourceActivityList(b.DataSource);f.observable(this._activities).bind("insert remove replaceAll",this._activities_CollectionChanged.bind(this));for(b=0;b<this._activities.length;b++)this._activities[b].PropertyChanged.subscribe(this.activity_PropertyChanged,
this);this.LoadInfos=this._orderedLoadInfos;this.AssignedActivities=this._activities;this.Resource=this._resource;this.initLoadInfo()};b.ResourceLoadList.prototype.activity_PropertyChanged=function(b,a){"Times"==a.PropertyName&&this.delayedRefresh()};b.ResourceLoadList.prototype._activities_CollectionChanged=function(b,a){if("insert"==b.type)for(var c=0;c<a.items.length;c++)a.items[c].PropertyChanged.subscribe(this.activity_PropertyChanged,this);if("remove"==b.type)for(c=0;c<a.items.length;c++)a.items[c].PropertyChanged.unsubscribe(this.activity_PropertyChanged,
this);this.delayedRefresh()};b.ResourceLoadList.prototype.delayedRefresh=function(){var b=this;null!=this.refreshTimer&&clearTimeout(this.refreshTimer);this.refreshTimer=setTimeout(function(){b.refresh()},200)};b.ResourceLoadList.prototype.refresh=function(){this._orderedLoadInfos.splice(0,this._orderedLoadInfos.length);this.initLoadInfo()};b.ResourceLoadList.prototype.initLoadInfo=function(){for(var d=[],a=0;a<this.AssignedActivities.length;a++){var c=this.AssignedActivities[a],e=c.Assignments_M(),
g=e.GetAssignmentForResource(this.Resource),h=g.AllocationUnits_M(),m=c.StartTime_M(),c=c.Effort_M();this._model.AdjustDurationOnAssignment&&c!=RQTimeSpan.Zero_M()&&(e=c.Ticks_M()/e.length,e*=100/g.AllocationUnits,c=TimeSpan.fromTicks(e));g=null!=this.Resource.Schedule_M()?this.Resource.Schedule_M():this._model.WorkTimeSchedule_M();if(null!=g)for(m=g.ConvertToNextWorkingTimeIntervals(m,c),e=0;e<m.length;e++){var c=m[e],f=c.Start_M(),l=c.End_M();this._enableRoundToDays&&(f=g.ConverToPreviousWorkingTime(c.Start_M().clone().addMinutes(-1)),
l=g.ConvertToNextWorkingTime(c.End_M().clone().addMinutes(1)),f.Date().equals(c.Start_M().Date())||(f=c.Start_M().Date()),l.Date().equals(c.End_M().Date())||(l=c.End_M().Date().clone().addDays(1)));d.push(new b.LoadInfo(f,l,h))}else d.push(new b.LoadInfo(m,m.addTimeSpan(c),h))}this.addLoadInfos(d)};b.ResourceLoadList.prototype.addLoadInfos=function(b){for(var a=0;a<b.length;a++)this.addLoadInfo(b[a]);for(b=0;b<this._temLoadLists.length;b++)this._orderedLoadInfos.push(this._temLoadLists[b]);this._temLoadLists=
new RadiantQ.RQ_ObservableCollection([])};b.ResourceLoadList.prototype.addLoadInfo=function(d){var a=this._temLoadLists.length;if(0!=a)for(var c=0;c<=a-1;c++){var e=this._temLoadLists[c];if(d.TimePeriod.End_M()<=e.TimePeriod.Start_M()){this.combineOrInsert(c,d);return}if(c==a-1&&e.TimePeriod.End_M()<=d.TimePeriod.Start_M()){this.combineWithPrevOrInsert(c+1,d);return}var g=e.TimePeriod.Intersect(d.TimePeriod);if(null!=g&&g.Duration_M()>RQTimeSpan.Zero_M())if(e.TimePeriod.Equals(g)){e.LoadPerc+=d.LoadPerc;
if(d.TimePeriod.Start_M().isLessThan(g.Start_M()))var h=this.combineWithPrevOrInsert(c,new b.LoadInfo(d.TimePeriod.Start_M(),g.Start_M(),d.LoadPerc)),c=c+1-h;if(g.End_M().isLessThan(d.TimePeriod.End_M()))d=new b.LoadInfo(g.End_M(),d.TimePeriod.End_M(),d.LoadPerc);else return}else if(d.TimePeriod.Equals(g)){if(e.TimePeriod.Start_M().isLessThan(d.TimePeriod.Start_M())){this._temLoadLists.splice(c,0,new b.LoadInfo(e.TimePeriod.Start_M(),d.TimePeriod.Start_M(),e.LoadPerc));a=new b.LoadInfo(g.Start_M(),
g.End_M(),e.LoadPerc+d.LoadPerc);this._temLoadLists.splice(c+1,1);this._temLoadLists.splice(c+1,0,a);e.TimePeriod.End_M().isGreaterThan(d.TimePeriod.End_M())&&this._temLoadLists.splice(c+2,0,new b.LoadInfo(g.End_M(),e.TimePeriod.End_M(),e.LoadPerc));return}if(e.TimePeriod.End_M().isGreaterThan(d.TimePeriod.End_M()))h=new b.LoadInfo(g.End_M(),e.TimePeriod.End_M(),e.LoadPerc),e=new b.LoadInfo(g.Start_M(),g.End_M(),e.LoadPerc+d.LoadPerc),this._temLoadLists.splice(c,1),this._temLoadLists.splice(c,0,e),
d=h;else{e.LoadPerc+=d.LoadPerc;return}}else{if(d.TimePeriod.Start_M().isLessThan(g.Start_M())){h=this.combineWithPrevOrInsert(c,new b.LoadInfo(d.TimePeriod.Start_M(),g.Start_M(),d.LoadPerc));c=c+1-h;this._temLoadLists.splice(c,0,new b.LoadInfo(g.Start_M(),g.End_M(),e.LoadPerc+d.LoadPerc));c++;this._temLoadLists.splice(c,1);this._temLoadLists.splice(c,0,new b.LoadInfo(g.End_M(),e.TimePeriod.End_M(),e.LoadPerc));return}this._temLoadLists.splice(c,1);h=this.combineWithPrevOrInsert(c,new b.LoadInfo(e.TimePeriod.Start_M(),
g.Start_M(),e.LoadPerc));c=c+1-h;this._temLoadLists.splice(c,0,new b.LoadInfo(g.Start_M(),g.End_M(),e.LoadPerc+d.LoadPerc));d=new b.LoadInfo(g.End_M(),d.TimePeriod.End_M(),d.LoadPerc)}}this._temLoadLists.push(d)};b.ResourceLoadList.prototype.combineWithPrevOrInsert=function(d,a){var c=0;if(0<d){var e=this._temLoadLists[d-1];e.TimePeriod.End_M().equals(a.TimePeriod.Start_M())&&e.LoadPerc==a.LoadPerc&&(this._temLoadLists.splice(d-1,1),d--,a=new b.LoadInfo(e.TimePeriod.Start_M(),a.TimePeriod.End_M(),
a.LoadPerc),c++)}this._temLoadLists.splice(d,0,a);return c};b.ResourceLoadList.prototype.combineOrInsert=function(d,a){var c=0;if(0<d){var e=this._temLoadLists[d-1];e.TimePeriod.End_M().equals(a.TimePeriod.Start_M())&&e.LoadPerc==a.LoadPerc&&(this._temLoadLists.splice(d-1,1),d--,a=new b.LoadInfo(e.TimePeriod.Start_M(),a.TimePeriod.End_M(),a.LoadPerc),c++)}d<this._temLoadLists.Count-1&&(e=this._temLoadLists[d],a.TimePeriod.End_M().equals(e.TimePeriod.Start_M())&&a.LoadPerc==e.LoadPerc&&(this._temLoadLists.splice(d,
1),a=new b.LoadInfo(a.TimePeriod.Start_M(),e.TimePeriod.End_M(),a.LoadPerc),c++));this._temLoadLists.splice(d,0,a);return c}})(jQuery);
(function(){var f=RadiantQ.Gantt.Model;RadiantQ.Gantt.Model.Dependency=function(b,d,a,c){RadiantQ.Gantt.Model.IActivityDependency.call(this);RadiantQ.Gantt.Utils.IUIUpdateable.call(this);c||(c=RadiantQ.Gantt.DependencyType.FinishToStart);this.PropertyChanged=new ObjectEvent("PropertyChanged");this.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a);this.MonitorThisChanges(a)};this.PartialUpdate=function(a){this.TotalUpdate()};this.TotalUpdate=function(){this.EnsureActivityOrder()};
this.ensuringActivityOrder=!1;this.Model=null;b&&d&&a&&c&&(this.Model=b,this._fromActivity=d,this._toActivity=a,this.Type_M(c),this.Lag_M(RQTimeSpan.Zero_M()),this.FromActivity_M().PropertyChanged.subscribe(this.Activity_PropertyChanged,this),this.ToActivity_M().PropertyChanged.subscribe(this.Activity_PropertyChanged,this),this.TryUpdate());return this};RadiantQ.Gantt.Model.Dependency.prototype=new RadiantQ.Gantt.Utils.IUIUpdateable;RadiantQ.Gantt.Model.Dependency.prototype=new RadiantQ.Gantt.Model.IActivityDependency;
RadiantQ.Gantt.Model.Dependency.prototype.ComputeErrorTimeSpan=function(b,d,a,c){var e=RQTimeSpan.Zero_M();switch(this.Type_M()){case RadiantQ.Gantt.DependencyType.FinishToFinish:e=c-d;break;case RadiantQ.Gantt.DependencyType.StartToFinish:e=c-b;break;case RadiantQ.Gantt.DependencyType.StartToStart:e=a-b;break;default:a.equals(d)||(e=a-d)}return e};RadiantQ.Gantt.Model.Dependency.prototype.TryUpdate=function(){!1==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
null)};RadiantQ.Gantt.Model.Dependency.prototype.MonitorThisChanges=function(b){"Type"!=b&&"Lag"!=b||this.TryUpdate()};RadiantQ.Gantt.Model.Dependency.prototype.Activity_PropertyChanged=function(b,d){if("StartTime"==d.PropertyName||"EndTime"==d.PropertyName)this.TryUpdate();else if(b==this.FromActivity_M()&&"SortOrder"==d.PropertyName){var a=this.ToActivity_M();(a instanceof f.BaseActivity||!0==this.isBaseActivity)&&a.OnPropertyChanged("PredecessorIndexString")}};RadiantQ.Gantt.Model.Dependency.prototype.toString=
function(){return this.FromActivity_M().ActivityName_M()+" / "+this.ToActivity_M().ActivityName_M()+"; "+this.Type_M()};RadiantQ.Gantt.Model.Dependency.prototype.Dispose=function(){var b=this.ToActivity_M();this.FromActivity_M().PropertyChanged.unsubscribe(this.Activity_PropertyChanged,this);b.PropertyChanged.unsubscribe(this.Activity_PropertyChanged,this);RadiantQ.Gantt.Utils.DelayUpdateUtil.RemoveUpdates(this);b instanceof RadiantQ.Gantt.Model.BaseActivity&&b.IsDisposed||this.Model.ApplyPreferredStartTimeOnActivity(b,
b.PreferredStartTime_M())};RadiantQ.Gantt.Model.Dependency.prototype.CanMoveActivityTo=function(b,d){if(b==this.ToActivity_M()){var a=Date.MinValue,a=this.Model.ConvertToValidTimes(d,b.Effort_M(),d,a);d=a.adjustedStart;var a=a.adjustedEnd,c=this.FromActivity_M(),a=this.ComputeErrorTimeSpan(c.StartTime_M(),c.EndTime_M(),d,a);if(a<RQTimeSpan.Zero_M())return!1;a=this.Model.ConvertToValidStartTime(d-a,this.Lag_M(),b.Effort_M());if(d<a)return!1}return!0};RadiantQ.Gantt.Model.Dependency.prototype.ComputeLatestToActivityStartTime=
function(){var b=Date.MinValue,b=this.FromActivity_M(),d=this.ToActivity_M(),a=this.Lag_M();switch(this.Type_M()){default:case RadiantQ.Gantt.DependencyType.None:case RadiantQ.Gantt.DependencyType.FinishToStart:return this.Model.ConvertToValidStartTime(b.EndTime_M(),a,d.Effort_M());case RadiantQ.Gantt.DependencyType.StartToStart:return this.Model.ConvertToValidStartTime(b.StartTime_M(),a,d.Effort_M());case RadiantQ.Gantt.DependencyType.FinishToFinish:return b=this.Model.GetStart(b.EndTime_M(),d.Effort_M()),
this.Model.ConvertToValidStartTime(b,a,d.Effort_M());case RadiantQ.Gantt.DependencyType.StartToFinish:return b=this.Model.GetStart(b.StartTime_M(),d.Effort_M()),this.Model.ConvertToValidStartTime(b,a,d.Effort_M())}};RadiantQ.Gantt.Model.Dependency.prototype.EnsureActivityOrder=function(){if(!1!=this.Model.EnforceDependencyConstraints_M()&&!this.ensuringActivityOrder)try{this.ensuringActivityOrder=!0;var b=this.ToActivity_M();if(!1!=f.BaseGanttModel.ShouldEnforceDependency(b,this.Model)){var d=this.FromActivity_M(),
a=new RQTimeSpan(this.ComputeErrorTimeSpan(d.StartTime_M(),d.EndTime_M(),b.StartTime_M(),b.EndTime_M())),c=this.ComputeLatestToActivityStartTime();b.StartTime_M()<c?(a=a.getEqualNegative(),a.isLessThan(RQTimeSpan.Zero_M())&&RQTimeSpan.Zero_M(),b.ShiftForwardTo(c)):b.StartTime_M()>c&&!1==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel?this.Model.ApplyPreferredStartTimeOnActivity(b,c):!0==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
null)}}finally{this.ensuringActivityOrder=!1}};RadiantQ.Gantt.Model.DependenciesCollection=function(){this._depByActivities=new RadiantQ.Gantt.Dictionary;this._predsByActivity=new RadiantQ.Gantt.Dictionary;this._succsByActivity=new RadiantQ.Gantt.Dictionary;this._fromActs={};this._toActs={};this._directPredActsByAct={};Array.call(this);this.CollectionChanged=new ObjectEvent("CollectionChanged");this._inCollectionChanged=!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype=[];RadiantQ.Gantt.Model.DependenciesCollection.prototype.add=
function(b){this.push(b);this.updatePredsAndSuccessors(b);this.updateBaseActsAndDepActsCollection(b);this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,b,this.length-1))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.updatePredsAndSuccessors=function(b,d){var a=b.FromActivity_M(),c=b.ToActivity_M(),e=this._predsByActivity[c.ID_M()],g=this._succsByActivity[a.ID_M()];d?(e&&1<e.length?(c=e.indexOf(b),-1!=c&&e.splice(c,1)):this._predsByActivity.Remove(c),g&&1<g.length?
(c=g.indexOf(b),-1!=c&&g.splice(c,1)):this._succsByActivity.Remove(a)):(e||(e=new RQArray,this._predsByActivity.Add(c,e)),e.push(b),g||(g=new RQArray,this._succsByActivity.Add(a,g)),g.push(b))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.updateFromAndToActs=function(b,d){var a=b.ID_M(),c=d.ID_M(),e=this._fromActs[a];e?void 0!=e._repeatingCnt[c]?e._repeatingCnt[c]++:(e.push(d),e._repeatingCnt[c]=0):(e=new RQArray,e.push(d),this._fromActs[a]=e,this._fromActs[a]._repeatingCnt={},this._fromActs[a]._repeatingCnt[c]=
0);(e=this._toActs[c])?void 0!=e._repeatingCnt[a]?e._repeatingCnt[a]++:(e.push(b),e._repeatingCnt[a]=0):(this._toActs[c]=e=new RQArray,e.push(b),this._toActs[c]._repeatingCnt={},this._toActs[c]._repeatingCnt[a]=0)};RadiantQ.Gantt.Model.DependenciesCollection.prototype.updateBaseActsAndDepActsCollection=function(b){var d=b.FromActivity_M();b=b.ToActivity_M();var a=d.ID_M(),c=b.ID_M(),e=this._directPredActsByAct[a];e?e.push(b):(e=new RQArray,e.push(b),this._directPredActsByAct[a]=e);this.updateFromAndToActs(d,
b);a=this._toActs[a];c=this._fromActs[c];if(a)for(e=0;e<a.length;e++){if(a[e].ID_M(),this.updateFromAndToActs(a[e],b),c)for(var g=0;g<c.length;g++)c[g].ID_M(),this.updateFromAndToActs(d,c[g]),this.updateFromAndToActs(a[e],c[g])}else if(c)for(g=0;g<c.length;g++)c[g].ID_M(),this.updateFromAndToActs(d,c[g])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.remove=function(b){if(b instanceof f.IActivity)return this.removeDependenciesOf(b);this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(b,
null))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.removeDependenciesOf=function(b){b&&b instanceof f.IActivity&&(b=this._depByActivities[b.ID_M()],this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(b,null)))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.removeBaseActsAndDepActsCollection=function(b){var d=b.FromActivity_M();b=b.ToActivity_M();var a=d.ID_M(),c=b.ID_M(),e=this._directPredActsByAct[d.ID_M()];if(1<e.length){var g=e.indexOf(b);e.splice(g,
1)}else delete this._directPredActsByAct[d.ID_M()];var e=this._toActs[a],h=this._fromActs[c];if(e)for(var m=0;m<e.length;m++){var f=e[m].ID_M();0==this._fromActs[f]._repeatingCnt[c]?1<this._fromActs[f].length?(delete this._fromActs[f]._repeatingCnt[c],g=this._fromActs[f].indexOf(b),this._fromActs[f].splice(g,1)):delete this._fromActs[f]:0<this._fromActs[f]._repeatingCnt[c]&&this._fromActs[f]._repeatingCnt[c]--;0==this._toActs[c]._repeatingCnt[f]?1<this._toActs[c].length?(delete this._toActs[c]._repeatingCnt[f],
g=this._toActs[c].indexOf(e[m]),this._toActs[c].splice(g,1)):delete this._toActs[c]:0<this._toActs[c]._repeatingCnt[f]&&this._toActs[c]._repeatingCnt[f]--;if(h)for(var l=0;l<h.length;l++){var n=h[l].ID_M();0==this._fromActs[a]._repeatingCnt[n]?1<this._fromActs[a].length?(delete this._fromActs[a]._repeatingCnt[n],g=this._fromActs[a].indexOf(h[l]),this._fromActs[a].splice(g,1)):delete this._fromActs[a]:0<this._fromActs[a]._repeatingCnt[n]&&this._fromActs[a]._repeatingCnt[n]--;0==this._toActs[n]._repeatingCnt[a]?
1<this._toActs[n].length?(delete this._toActs[n]._repeatingCnt[a],g=this._toActs[n].indexOf(d),this._toActs[n].splice(g,1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[a]&&this._toActs[n]._repeatingCnt[a]--;0==this._fromActs[f]._repeatingCnt[n]?1<this._fromActs[f].length?(delete this._fromActs[f]._repeatingCnt[n],g=this._fromActs[f].indexOf(h[l]),this._fromActs[f].splice(g,1)):delete this._fromActs[f]:0<this._fromActs[f]._repeatingCnt[n]&&this._fromActs[f]._repeatingCnt[n]--;0==this._toActs[n]._repeatingCnt[f]?
1<this._toActs[n].length?(delete this._toActs[n]._repeatingCnt[f],g=this._toActs[n].indexOf(e[m]),this._toActs[n].splice(g,1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[f]&&this._toActs[n]._repeatingCnt[f]--}}else if(h)for(l=0;l<h.length;l++)n=h[l].ID_M(),0==this._fromActs[a]._repeatingCnt[n]?1<this._fromActs[a].length?(delete this._fromActs[a]._repeatingCnt[n],g=this._fromActs[a].indexOf(h[l]),this._fromActs[a].splice(g,1)):delete this._fromActs[a]:0<this._fromActs[a]._repeatingCnt[n]&&
this._fromActs[a]._repeatingCnt[n]--,0==this._toActs[n]._repeatingCnt[a]?1<this._toActs[n].length?(delete this._toActs[n]._repeatingCnt[a],g=this._toActs[n].indexOf(d),this._toActs[n].splice(g,1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[a]&&this._toActs[n]._repeatingCnt[a]--;e=this._fromActs[a];h=this._toActs[c];e&&(0==e._repeatingCnt[c]?(delete e._repeatingCnt[c],g=e.indexOf(b),e.splice(g,1)):0<e._repeatingCnt[c]&&e._repeatingCnt[c]--,0==e.length&&delete this._fromActs[a]);h&&(0==
h._repeatingCnt[a]?(delete h._repeatingCnt[a],g=h.indexOf(d),h.splice(g,1)):0<h._repeatingCnt[a]&&h._repeatingCnt[a]--,0==h.length&&delete this._toActs[c])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.contains=function(b){return this._depByActivities.Contains(b)};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearItems=function(){for(var b=0;b<this.length;b++)this[b].Dispose();this.splice(0,this.length);this._depByActivities=new RadiantQ.Gantt.Dictionary};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetDependenciesByActivity=
function(b){return this._depByActivities[b.ID_M()]};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetDepenedenciesByIndex=function(b){return b<this.length?this._depByActivities.GetItemByIndex(b):null};RadiantQ.Gantt.Model.DependenciesCollection.prototype.OnCollectionChanged=function(b){if(null!=b.OldItems)for(var d=0;d<b.OldItems.length;d++){var a=b.OldItems[d];this.UnsubscribeToChildEvents(a);this.ClearDependencyCacheInfo(a);this.removeBaseActsAndDepActsCollection(a);this.updatePredsAndSuccessors(a,
!0);a.Dispose()}if(null!=b.NewItems)for(d=0;d<b.NewItems.length;d++)a=b.NewItems[d],this.CacheDependencyInfo(a),this.SubscribeToChildEvents(a);try{this._inCollectionChanged=!0,this.CollectionChanged&&this.CollectionChanged.raise(this,b)}finally{this._inCollectionChanged=!1}};RadiantQ.Gantt.Model.DependenciesCollection.prototype.SubscribeToChildEvents=function(b){};RadiantQ.Gantt.Model.DependenciesCollection.prototype.UnsubscribeToChildEvents=function(b){};RadiantQ.Gantt.Model.DependenciesCollection.prototype.SetItem=
function(b,d){this.ClearDependencyCacheInfo(this[b]);this[b].Dispose();this.CacheDependencyInfo(this[b])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.CacheDependencyInfo=function(b){var d=b.FromActivity_M(),a=b.ToActivity_M(),c=this._depByActivities[d.ID_M()];if(c){if(ContainsValueInArray(c,b))return;c.push(b)}else this._depByActivities.Add(d,Array(b));(c=this._depByActivities[a.ID_M()])?ContainsValueInArray(c,b)||c.push(b):this._depByActivities.Add(a,Array(b))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearDependencyCacheInfo=
function(b){var d=b.FromActivity_M(),a=b.ToActivity_M(),c=this._depByActivities[d.ID_M()];if(c){var e=RQArray.prototype.indexOf.call(c,b);c.splice(e,1)}0==c.length&&this._depByActivities.Remove(d);if(c=this._depByActivities[a.ID_M()])e=RQArray.prototype.indexOf.call(c,b),c.splice(e,1);0==c.length&&this._depByActivities.Remove(a);e=RQArray.prototype.indexOf.call(this,b);this.splice(e,1)};RadiantQ.Gantt.Model.DependenciesCollection.prototype.IsActivityFinishDependentOnAnother=function(b){var d=this._depByActivities[b.ID_M()];
if(d)for(var a=0;a<d.length;a++){var c=d[a];if(c.ToActivity_M()==b&&(c.Type_M()==RadiantQ.Gantt.DependencyType.FinishToFinish||c.Type_M()==RadiantQ.Gantt.DependencyType.StartToFinish))return!0}return!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.DoesDependencyExist=function(b,d,a){return this.DoesConstraintExist(b,d,a)||this.DoesConstraintExist(d,b,a)?!0:!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.DoesConstraintExist=function(b,d,a){if(0==this.length)return!1;var c=this._predsByActivity[d.ID_M()];
if(a){if(c){if((a=this._directPredActsByAct[b.ID_M()])&&-1!=a.indexOf(d))return!0;for(d=0;d<c.length;d++)if(c[d].FromActivity_M()==b)return!0}}else{if((c=this._fromActs[b.ID_M()])&&-1!=c.indexOf(d)||(c=this._toActs[d.ID_M()])&&-1!=c.indexOf(b))return!0;if(b.Parent_M()){if(d.Parent_M()){if((c=this.DoesConstraintExist(b.Parent_M(),d,a))||(c=this.DoesConstraintExist(b,d.Parent_M(),a)))return!0;c=this.DoesConstraintExist(b.Parent_M(),d.Parent_M(),a)}else c=this.DoesConstraintExist(b.Parent_M(),d,a);if(c)return!0}else if(d.Parent_M()&&
(c=this.DoesConstraintExist(b,d.Parent_M(),a)))return!0}return!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearDependencies=function(b){b=(this._predsByActivity[b.ID_M()]||[]).slice();for(var d=0;d<b.length;d++)this.remove(b[d])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetPredecessors=function(b){return(b=this._predsByActivity[b.ID_M()])?b:[]};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetSuccessors=function(b){return(b=this._succsByActivity[b.ID_M()])?b:[]};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.Dispose=function(){this._depByActivities&&this._depByActivities.Dispose();this._depByActivities=null;this._predsByActivity&&this._predsByActivity.Dispose();this._predsByActivity=null;this._succsByActivity&&this._succsByActivity.Dispose();this._succsByActivity=null;this._fromActs={};this._toActs={};this._directPredActsByAct={};Array.call(this);this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null;this._inCollectionChanged=
!1}})();
(function(f){var b=RadiantQ.Gantt.Model,d=RadiantQ.Gantt.DependencyType;b.BaseGanttModel=function(a,c,e){this.isBaseGanttModel=!0;b.IGanttModel.call(this);b.BaseGanttModel.IdCounter=1;this.topID=-1;this.AdjustDurationOnAssignment_M(null);this.EnforceDependencyConstraints_M(null);this.ResourceCapacityProvider=null;this.GetActivityById=function(a){return this._dictActivityById.GetItemByKey(a)};this._topSortOrder=0;this.BeforeEffortChanging=new ObjectEvent("BeforeEffortChanging");this.PropertyChanged=new ObjectEvent("PropertyChanged");
this.NewActivityAdded=new ObjectEvent("NewActivityAdded");this.ActivityEventHandler=new ObjectEvent("ActivityEventHandler");this.ActivityRemoved=new ObjectEvent("ActivityRemoved");this.BeforeStartTimeChanging=new ObjectEvent("BeforeStartTimeChanging");this.BeforeEndTimeChanging=new ObjectEvent("BeforeEndTimeChanging");this._dictActivityById=new RadiantQ.Gantt.Dictionary;this.ShouldEnforceDependencyConstraintsOnActivity=new ObjectEvent("ShouldEnforceDependencyConstraintsOnActivity");this.ProvideDefaultWBSID=
new ObjectEvent("ProvideDefaultWBSID");if(this&&0!=arguments.length)return this.ValidateDependencySetting_M(!0),this.EnforceDependencyConstraints_M(!0),this.AutoCalculateSummaryTaskTimes_M(!0),this.CanShiftInProgressTasks_M(!0),this.AdjustDurationOnAssignment_M(!0),this.LagStringUnitsInHours_M(1),this._dictActivityById=new RadiantQ.Gantt.Dictionary,this._activities=this.CreateActivitiesCollection(),this._dependencies=new RadiantQ.Gantt.Model.DependenciesCollection,this._resources=new b.GanttResourcesCollection,
this._childCollectionChangedHandler=this._activities.ChildCollectionChanged.subscribe(this.actitivites_ChildCollectionChanged,this),this._actsCollectionChangedHandler=this._activities.CollectionChanged.subscribe(this.actitivites_ChildCollectionChanged,this),this._depsCollectionChangedHandler=this._dependencies.CollectionChanged.subscribe(this._dependencies_CollectionChanged,this),this.WorkTimeSchedule_M(a),c&&("function"==typeof c?this.ShouldEnforceDependencyConstraintsOnActivity.subscribe(c,this):
"function"==typeof c.Handler&&this.ShouldEnforceDependencyConstraintsOnActivity.subscribe(c.Handler,c.Context||this)),e&&("function"==typeof e?this.ProvideDefaultWBSID.subscribe(e,this):"function"==typeof e.Handler&&this.ProvideDefaultWBSID.subscribe(e.Handler,e.Context||this)),this};b.BaseGanttModel.prototype=new b.IGanttModel;RadiantQ.Gantt.addMethod(b.BaseGanttModel.prototype,"UpdateSortOrderFrom",function(a){a=this.Activities_M();0<a.length&&this.UpdateSortOrderFrom(a[0],1)});RadiantQ.Gantt.addMethod(b.BaseGanttModel.prototype,
"UpdateSortOrderFrom",function(a,c){for(var b=a.Parent_M(),b=null!=b?b.ChildActivities_M():this.Activities_M(),e=b.indexOf(a);e<b.length;e++){0>e&&(e=0);b[e].SortOrder_M(c);c++;var g=b[e].ChildActivities_M();0<g.length&&(c=this.UpdateSortOrderFrom(g[0],c))}return c});b.BaseGanttModel.prototype._depTestResults=new RadiantQ.Gantt.Dictionary;b.BaseGanttModel.prototype._depInParents=new RadiantQ.Gantt.Dictionary;b.BaseGanttModel.prototype.ActivitiesCount_M=function(){return this._dictActivityById.length};
b.BaseGanttModel.prototype.ActivityById_M=function(){return this._dictActivityById};b.BaseGanttModel.prototype.ResourceAssignmentTracker_M=function(){this._resourceAssignmentTracker||(this._resourceAssignmentTracker=this.CreateResourceAssignmentTracker(this));return this._resourceAssignmentTracker};b.BaseGanttModel.prototype.CustomProgressCalculation_M=function(){return this._customProgressCalculation};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.BaseGanttModel.prototype,"ActivitiesCount",
{get:function(){return this.ActivitiesCount_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseGanttModel.prototype,"ActivityById",{get:function(){return this.ActivityById_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseGanttModel.prototype,"ResourceAssignmentTracker",{get:function(){return this.ResourceAssignmentTracker_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"CustomProgressCalculation",{get:function(){return this.CustomProgressCalculation_M()},enumerable:!0,configurable:!0}));b.BaseGanttModel.prototype.OnShouldEnforceDependencyConstraints=function(a){0<this.ShouldEnforceDependencyConstraintsOnActivity.fn.length&&this.ShouldEnforceDependencyConstraintsOnActivity.raise(this,a)};b.BaseGanttModel.ShouldEnforceDependency=function(a,c){if(!1==c.CanShiftInProgressTasks_M()&&0<a.ProgressPercent_M())return!1;var e=new b.EnforceDependencyConstraintsEventArgs(a);
return c?(c.OnShouldEnforceDependencyConstraints(e),e.Enforce_M()):!0};b.BaseGanttModel.prototype.CanProvideWBSID=function(a,c){0<this.ProvideDefaultWBSID.fn.length};b.BaseGanttModel.prototype.RaiseProvideWBSID=function(a){0<this.ProvideDefaultWBSID.fn.length&&this.ProvideDefaultWBSID.raise(this,a)};b.BaseGanttModel.prototype._dependencies_CollectionChanged=function(a,c){if(null!=c.OldItems)for(var b=0;b<c.OldItems.length;b++){var e=c.OldItems[b];e.ToActivity_M().OnRemovedPredecessorDependency(e)}if(null!=
c.NewItems)for(b=0;b<c.NewItems.length;b++)e=c.NewItems[b],e.ToActivity_M().OnAddedPredecessorDependency(e)};b.BaseGanttModel.prototype.GetPredecessorsHierarchy=function(a){var c=[];a=this.Dependencies_M().GetPredecessors(a);for(var b=0;b<a.length;b++)dep=a[b],this.AddActivityHierarchyToList(c,dep.FromActivity_M());return c};b.BaseGanttModel.prototype.AddActivityHierarchyToList=function(a,c){var b=c.ChildActivities_M();if(0==b.length)ContainsValueInArray(a,c)||a.push(c);else for(var e=0;e<b.length;e++)this.AddActivityHierarchyToList(a,
b[e])};b.BaseGanttModel.prototype.GetResourcesDictionary=function(a){var c=new RadiantQ.Gantt.Dictionary;a=a.Assignments_M();for(var b=0;b<a.length;b++){var e=a[b];c.Add(e.Resource_M(),e.AllocationUnits_M())}return c};b.BaseGanttModel.prototype.GetActivitiesWithConflictingAssignments=function(){var a=[],c=this.AllActivities_M();if(0<c.length){for(var b=new RadiantQ.Gantt.Dictionary,e=0;e<c.length;e++){var g=c[e],d=g.Assignments_M();if(0==g.ChildActivities_M().length&&null!=d&&0!=d.length)for(var f=
0;f<d.length;f++){var r=d[f].Resource_M(),s=b.GetItemByKey(r);s||(s=[],b.Add(r,s));s.push(g)}}for(c=0;c<b.Keys.length;c++)for(g=b.GetItemByKey(b.Keys[e]),e=0;e<g.length-1;){d=!1;r=g[e];s=new TimePeriod(r.StartTime_M(),r.EndTime_M());for(f=e+1;f<g.length;){var u=g[f],w=new TimePeriod(u.StartTime_M(),u.EndTime_M()),w=s.Intersect(w);null!=w&&w.Value.Duration_M()>RQTimeSpan.Zero_M()?(d=!0,a.push(u),g.RemoveAt(f)):f++}d?(a.push(r),g.RemoveAt(e)):e++}}return a};b.BaseGanttModel.GetEndTimeForAssignmentInActivity=
function(a,c,b,e){if(c.equals(RQTimeSpan.Zero_M()))return a.StartTime_M();c=c.Ticks_M()/a.Assignments_M().length;c*=100/b.AllocationUnits_M();b=b.Resource_M().Schedule_M();b=null==b?e:b;return null!=b?b.GetEnd(a.StartTime_M(),RQTimeSpan.fromTicks(c)):a.StartTime_M().addTimeSpan(RQTimeSpan.fromTicks(c))};b.BaseGanttModel.prototype.OnBeforeEffortChanging=function(a,c){if(this.BeforeEffortChanging&&0<this.BeforeEffortChanging.fn.length){var e=new b.BeforeEffortChangingEventArgs(a,c);this.BeforeEffortChanging.raise(this,
e);return e.NewEffort}return c};b.BaseGanttModel.ConvertEffortToDuration=function(a,c,b,e){a=a.Assignments_M();if(!1==b||0==a.length)return c;for(e=b=0;e<a.length;e++){var g=a[e];b+=g.AllocationUnits_M();g.Resource_M().Schedule_M()}c=c.Ticks_M();c=Math.ceil(c/(b/100));return RQTimeSpan.fromTicks(c)};b.BaseGanttModel.prototype.OnBeforeStartTimeChanging=function(a,c){if(this.BeforeStartTimeChanging&&0<this.BeforeStartTimeChanging.fn.length){var e=new b.BeforeStartTimeChangingEventArgs(a,c);this.BeforeStartTimeChanging.raise(this,
e);return e.NewStartTime}return c};b.BaseGanttModel.prototype.OnBeforeEndTimeChanging=function(a,c){if(this.BeforeEndTimeChanging&&0<this.BeforeEndTimeChanging.fn.length){var e=new b.BeforeEndTimeChangingEventArgs(a,c);this.BeforeEndTimeChanging.raise(this,e);return e.NewEndTime}return c};b.BaseGanttModel.prototype.actitivites_ChildCollectionChanged=function(a,c){if(null!=c.NewItems)for(var b=0;b<c.NewItems.length;b++){var e=c.NewItems[b];(a instanceof RadiantQ.Gantt.Model.IActivity||a.isIActivity)&&
this.RemoveAnyParentChildDependencies(a,e);this.RecursivelyRegisterActivities(e)}else if(null!=c.OldItems)for(b=0;b<c.OldItems.length;b++)e=c.OldItems[b],this.RecursivelyUnRegisterActivities(e)};b.BaseGanttModel.prototype.RemoveActivity=function(a,c){this.RecursivelyClearDependencies(c);null!=a?a.ChildActivities_M().remove(c):this.Activities_M().remove(c);this.OnActivityRemoved(new b.ActivityEventArgs(c))};b.BaseGanttModel.prototype.RecursivelyClearDependencies=function(a){var c=this._dependencies.GetDependenciesByActivity(a);
if(null!=c)for(var b=c.length-1;0<=b;b--){var e=c[b];this.Dependencies_M().remove(e)}a=a.ChildActivities_M();for(b=0;b<a.length;b++)this.RecursivelyClearDependencies(a[b])};b.BaseGanttModel.prototype.RecursivelyRegisterActivities=function(a){var c=a.ID_M(),b=this._dictActivityById.GetItemByKey(c);if(null!=b&&b!=a)throw Error("A new activity () with the ID ("+c+") same as another activity ("+b.ActivityName_M()+") was added. This is not supported.");this._dictActivityById.Add(c,a);this.topID<c&&(this.topID=
c);a=a.ChildActivities_M();for(c=0;c<a.length;c++)this.RecursivelyRegisterActivities(a[c])};b.BaseGanttModel.prototype.RecursivelyUnRegisterActivities=function(a){var c=null,b=a.ID_M();this._dictActivityById.Contains(b)&&(c=this.GetActivityById(b));null!=c&&c==a&&this._dictActivityById.Remove(b);a=a.ChildActivities_M();for(c=0;c<a.length;c++)this.RecursivelyUnRegisterActivities(a[c])};b.BaseGanttModel.prototype.RemoveAnyParentChildDependencies=function(a,c){var b=this._dependencies.GetDependenciesByActivity(c);
if(null!=b)for(var e=b.length-1;0<=e;e--){var g=b[e];g.FromActivity_M()!=a&&g.ToActivity_M()!=a||this.Dependencies_M().remove(g)}b=c.ChildActivities_M();for(e=0;e<b.length;e++)this.RemoveAnyParentChildDependencies(a,b[e])};b.BaseGanttModel.prototype.CreateNewDependencyInternal=function(a,c,e,g,d){if(!1==d&&!1==this.CanAddNewDependency(a,c,b.NewDependencyAddScenarioType.None,e))return a="Cannot add a dependency between activities "+a.ActivityName_M()+" and "+c.ActivityName_M()+". They are either already directly or indirectly dependent or one of them is, directly or indirectly, a summary task of another. Use the Model.CanAddNewDependency method to determine if dependencies can be added between two tasks, before adding a new dependency.",
window.console&&console.log(a),!1;try{var f=new RadiantQ.Gantt.Utils.DelayUpdates,q=new RadiantQ.Gantt.Model.Dependency(this,a,c,e);q.Lag_M(g);this.Dependencies_M().add(q);return q}finally{f.Dispose()}};b.BaseGanttModel.prototype.RemoveDependenciesLeadingTo=function(a,c){var b=this.Dependencies_M(),e=a.ToActivity_M();if(e==c)b.remove(a);else{for(var g=b.GetSuccessors(e),d=0;d<g.length;d++)this.RemoveDependenciesLeadingTo(g[d],c);e=e.ChildActivities_M();for(d=0;d<e.length;d++){g=e[d];if(this.IsAncestor(g,
c)){b.Remove(a);break}for(var g=b.GetSuccessors(g),f=0;f<g.length;f++)this.RemoveDependenciesLeadingTo(g[f],c)}}};b.BaseGanttModel.prototype.InitDepResultsCache=function(){this._depTestResults=new RadiantQ.Gantt.Dictionary};b.BaseGanttModel.prototype.ClearDepResultsCache=function(){this._depTestResults.Clear();this._depTestResults=new RadiantQ.Gantt.Dictionary};b.BaseGanttModel.prototype.AddToDepResultsCache=function(a,c){this._depTestResults.Add(a.ID_M()+"+"+c.ID_M(),!0)};b.BaseGanttModel.prototype.IsInDepResultsCache=
function(a,c){return this._depTestResults.Contains(a.ID_M()+"+"+c.ID_M())?!0:!1};b.BaseGanttModel.prototype.InitDepInParentsResultsCache=function(){this._depInParents=new RadiantQ.Gantt.Dictionary};b.BaseGanttModel.prototype.ClearDepInParentsResultsCache=function(){this._depInParents.Clear();this._depInParents=null};b.BaseGanttModel.prototype.AddToDepInParentsResultsCache=function(a,c){this._depInParents.Add(a.ID_M()+"+"+c.ID_M(),!0)};b.BaseGanttModel.prototype.IsInDepInParentsResultsCache=function(a,
c){return this._depInParents.Contains(a.ID_M()+"+"+c.ID_M())?!0:!1};b.BaseGanttModel.prototype.CanAddNewDependencyRecursive=function(a,c,b){function e(a,c){var b=c.ID_M();if(f[b]&&f.Dependencies==a)return f[b];for(var h=new RQArray,g=a._fromActs[b]||[],d=0;d<g.length;d++){var m=g[d],k=m.ChildActivities_M();if(k.length)for(var n=0;n<k.length;n++){var r=e(a,k[n]);if(r.length)for(var p=0;p<r.length;p++)h.push(r[p])}h.push(m)}return f[b]=h}function g(a){var c=new RQArray;for(a=a.Parent_M();a;)c.push(a),
a=a.Parent_M();return c.reverse()}function d(a){var c=a.ID_M();if(r[c])return r[c];var b=new RQArray;a=a.ChildActivities_M();for(var e=0;e<a.length;e++){var h=a[e];b.push(h);h=d(h);if(0<h.length)for(var g=0;g<h.length;g++)b.push(h[g])}return r[c]=b}if(!1==this.ValidateDependencySetting_M())return!0;if(0==b)this.InitDepResultsCache();else if(this.IsInDepResultsCache(a,c))return!0;if(this.IsAncestor(a,c)||this.IsAncestor(c,a))return!1;var f={Dependencies:this._dependencies},r={};if(function(a,c){var b=
this._fromActs[a.ID_M()];return b&&-1!=b.indexOf(c)?!0:(b=this._toActs[c.ID_M()])&&-1!=b.indexOf(a)?!0:!1}.call(this._dependencies,c,a))return!1;var s=a.Parent_M(),u=c.Parent_M();s&&u&&s==u?(s=a,u=c):(s=a.Parent_M()?g(a)[0]:a,u=c.Parent_M()&&c.Parent_M()!=a.Parent_M()?g(c)[0]:c);fromChilds=d(s);toChilds=d(u);var w=e(this._dependencies,c);if(-1!=w.indexOf(a)||-1!=w.indexOf(s))return!1;u=e(this._dependencies,u);if(-1!=u.indexOf(a)||-1!=u.indexOf(s))return!1;if(fromChilds.length&&fromChilds!=toChilds)for(var t=
0;t<fromChilds.length;t++){var v=fromChilds[t];if(-1!=w.indexOf(v)||-1!=u.indexOf(v))return!1;_toChilds=d(c);if(0<_toChilds.length)for(var z=0;z<_toChilds.length;z++){var x=_toChilds[z];if(v!=x&&(x=e(this._dependencies,x),-1!=x.indexOf(a)||-1!=x.indexOf(s)||-1!=x.indexOf(v)))return!1}}else for(toChilds=d(c),t=0;t<toChilds.length;t++)if(x=toChilds[t],x=e(this._dependencies,x),-1!=x.indexOf(a)||-1!=x.indexOf(s))return!1;this.AddToDepResultsCache(a,c);0==b&&this.ClearDepResultsCache();return!0};b.BaseGanttModel.prototype.HasDependencyInParentsRecursive=
function(a,c,b,e){if(0==e)this.InitDepInParentsResultsCache();else if(this.IsInDepInParentsResultsCache(a,c))return!1;var g=this.Dependencies_M();if(0==g.length)return!1;if(b&&g.DoesDependencyExist(a,c,!0))return!0;b=a.Parent_M();g=c.Parent_M();if(null!=b&&void 0!=b&&this.HasDependencyInParentsRecursive(b,c,!0,e+1)||null!=g&&void 0!=g&&this.HasDependencyInParentsRecursive(a,g,!0,e+1))return!0;this.AddToDepInParentsResultsCache(a,c);return!1};b.BaseGanttModel.prototype.OnNewActivityAdded=function(a){null!=
this.NewActivityAdded&&this.NewActivityAdded.raise(this,a)};b.BaseGanttModel.prototype.OnActivityRemoved=function(a){null!=this.ActivityRemoved&&this.ActivityRemoved.raise(this,a);a.Dispose()};b.BaseGanttModel.prototype.OnPropertyChanged=function(a,c){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,{propertyName:a,value:c})};b.BaseGanttModel.prototype.CreateResourceAssignmentTracker=function(a){return new b.ResourceAssignmentTracker(a)};b.BaseGanttModel.prototype.CreateActivitiesCollection=
function(){return new b.ActivitiesCollection(null,this)};b.BaseGanttModel.prototype.GetActivityById=function(a){return this._dictActivityById.ContainsKey(a)?this._dictActivityById[a]:null};b.BaseGanttModel.prototype.Dispose=function(){for(var a=this.AllActivities_M(),c=0;c<a.length;c++)a.asArray[c].Dispose();this._dictActivityById=null;this._childCollectionChangedHandler&&(this._childCollectionChangedHandler.Dispose(),this._childCollectionChangedHandler=null);this._actsCollectionChangedHandler&&(this._actsCollectionChangedHandler.Dispose(),
this._actsCollectionChangedHandler=null);this._depsCollectionChangedHandler&&(this._depsCollectionChangedHandler.Dispose(),this._depsCollectionChangedHandler=null);this._activities&&this._activities.Dispose();this._activities=null;this._dependencies&&this._dependencies.Dispose();this._dependencies=null;this._resources&&this._resources.Dispose();this._resources=null;this.BeforeEffortChanging&&this.BeforeEffortChanging.Dispose();this.BeforeEffortChanging=null;this.PropertyChanged&&this.PropertyChanged.Dispose();
this.PropertyChanged=null;this.NewActivityAdded&&this.NewActivityAdded.Dispose();this.NewActivityAdded=null;this.ActivityEventHandler&&this.ActivityEventHandler.Dispose();this.ActivityEventHandler=null;this.ActivityRemoved&&this.ActivityRemoved.Dispose();this.ActivityRemoved=null;this.BeforeStartTimeChanging&&this.BeforeStartTimeChanging.Dispose();this.BeforeStartTimeChanging=null;this.BeforeEndTimeChanging&&this.BeforeEndTimeChanging.Dispose();this.BeforeEndTimeChanging=null;this._dictActivityById&&
this._dictActivityById.Dispose();this._dictActivityById=null;this.ShouldEnforceDependencyConstraintsOnActivity&&this.ShouldEnforceDependencyConstraintsOnActivity.Dispose();this.ShouldEnforceDependencyConstraintsOnActivity=null;this.ProvideDefaultWBSID&&this.ProvideDefaultWBSID.Dispose();this.base=this.ProvideDefaultWBSID=null};b.BaseGanttModel.prototype.GetCriticalActivities=function(a){for(var c=Date.MinValue,b=this.AllActivities_M()._collections,e=0;e<b.length;e++){var g=b[e].value,g=g.EndTime_M();
g>c&&(c=g)}for(var d=new RQArray,e=0;e<b.length;e++)g=b[e].value,g.IsCritical(c,a,null)&&d.push(g);return d};b.BaseGanttModel.prototype.LevelResources=function(a,c){var e=this.AllActivities_M();if(0<e.length){for(var g=new RadiantQ.Gantt.Dictionary,d=new RadiantQ.Gantt.Dictionary,f=0;f<e.length;f++){var q=e.GetItemByIndex(f),r=q.Assignments_M();0==q.ChildActivities_M().length&&null!=r&&0!=r.length&&(g.Add(q,this.GetPredecessorsHierarchy(q)),d.Add(q,this.GetResourcesDictionary(q)))}e=new RadiantQ.Gantt.Dictionary;
for(f=g.length;0<f;f=g.length){for(var r=[],s=0;s<g.length;s++){for(var q=g._collections[s].key,u=!0,w=g.GetItemByKey(q),t=0;t<w.length;t++){var v=w[t];if(g.Contains(v)&&!ContainsValueInArray(r,v)){u=!1;break}}if(u){u=c;w=d.GetItemByKey(q);for(t=0;t<w.length;t++){var v=w._collections[t],z=v.key,x=v.value,A=e.GetItemByKey(z);if(A)for(v=0;v<A.length;v++){var y=A._collections[v],C=y.key,y=this.GetResourceCapacity(z);C+x>y&&(C=A.GetItemByKey(C),C.isGreaterThan(u)&&(u=C))}}!a&&0!=q.ProgressPercent_M()||
u==q.StartTime_M()||(q.PreferredStartTime_M(u),q.StartTime_M(u));x=this.AdjustDurationOnAssignment_M();for(t=0;t<w.length;t++){v=w._collections[t];z=v.key;y=v.value;e.Contains(z)||e.Add(z,new RadiantQ.Gantt.Dictionary);var A=e.GetItemByKey(z),C=new RadiantQ.Gantt.Dictionary,M=x?b.BaseGanttModel.GetEndTimeForAssignmentInActivity(q,q.Effort_M(),q.Assignments_M().GetAssignmentForResource(z),this.WorkTimeSchedule_M()):q.EndTime_M();C.Add(y,M);for(v=0;v<A.length;v++){var z=A._collections[v].key,B=A.GetItemByKey(z);
B.isGreaterThan(u)&&(B.isLessThan(M)?C.Add(z+y,B):C.Add(z+y,M))}for(v=0;v<C.length;v++)y=C._collections[v],z=y.key,y=y.value,M=A.indexOf(z),-1==M?A.Add(z,y):y>A._collections[M].value&&(A._collections[M].value=y)}r.push(q)}}for(v=0;v<r.length;v++)g.Remove(r[v]);if(g.length==f)break}}};b.BaseGanttModel.prototype.GetResourceCapacity=function(a){return this.ResourceCapacityProvider?this.ResourceCapacityProvider(a):100};b.BaseGanttModel.prototype.ConvertToValidTimes=function(a,b,e,g,d){b||(b=RQTimeSpan.Zero_M());
g=a;g.addTimeSpan(b);g=this.AdjustStartTimeWithEffort(g,b);d=c(g,b,null!=e?e:this.WorkTimeSchedule_M());return{adjustedStart:g,adjustedEnd:d}};b.BaseGanttModel.prototype.ConvertToValidStartTime=function(c,b,e){return b.equals(RQTimeSpan.Zero_M())&&a(c,e,this.WorkTimeSchedule_M())?c:RadiantQ.Gantt.Utils.TimeComputingUtils.AddLagToStartTime(c,b,this.WorkTimeSchedule_M())};var a=b.BaseGanttModel.ApplyMilestoneExceptionToStartTime=function(a,c,b){c||(c=RQTimeSpan.Zero_M());return c.equals(RQTimeSpan.Zero_M())&&
(null==b?a:b.GetStart(a,RQTimeSpan.Zero_M())).equals(a)?!0:!1};b.BaseGanttModel.ComputeStartTime=function(a,c,b){return null==b?(c=c.getEqualNegative(),a.addTimeSpan(c)):b.GetStart(a,c)};var c=b.BaseGanttModel.ComputeEndTime=function(a,c,g,d,f){if(!(a.isBaseActivity||a instanceof b.IActivity))return e(a,c,g,d);var p=a.ChildActivities_M();if(0<p.length&&f)return p.EndTime_M();f=a.Assignments_M();p=a.Schedule_M();if(!1==d||0==f.length)return e(a.StartTime_M(),c,null==p?g:p);d=Date.MinValue;for(var q=
0;q<f.length;q++){var r=b.BaseGanttModel.GetEndTimeForAssignmentInActivity(a,c,f[q],null==p?g:p);r>d&&(d=r)}return d},e=function(c,b,e){var g=RQTimeSpan.Zero_M();b||(b=g);return b.equals(g)&&a(c,g,e)?c:null==e?c.addTimeSpan(b):e.GetEnd(c,b)};b.BaseGanttModel.prototype.ComputeEndTime=function(a){var b=c(a,a.Effort_M(),this.WorkTimeSchedule_M(),this.AdjustDurationOnAssignment_M(),this.AutoCalculateSummaryTaskTimes_M());return this.OnBeforeEndTimeChanging(a,b)};b.BaseGanttModel.prototype.ComputeEffort=
function(a,c){var b=a.StartTime_M();if(b==Date.MinValue||b==Date.MaxValue)return RQTimeSpan.Zero_M();var e=a.Assignments_M(),g=a.Schedule_M(),g=null!=g?g:this.WorkTimeSchedule_M();if(!1==this.AdjustDurationOnAssignment_M()||0==e.length||0<a.ChildActivities_M().length)return null==g?new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(b,c):g.GetEffort(b,c);for(var d=RQTimeSpan.MaxValue_M(),f=0;f<e.length;f++){var r=e[f],s=r.Resource_M().Schedule_M(),s=null==s?g:s,u=RQTimeSpan.MinValue_M();s?(u=
s.GetEffort(b,c),u=RQTimeSpan.fromTicks(u.Ticks_M()*(r.AllocationUnits_M()/100))):u=new RQTimeSpan(c-b);u.isLessThan(d)&&(d=u)}return RQTimeSpan.fromTicks(d.Ticks_M()*e.length)};b.BaseGanttModel.prototype.AdjustEffort=function(a,c){return this.OnBeforeEffortChanging(a,c)};b.BaseGanttModel.prototype.ConvertDurationToEffort=function(a,c){var b=c.Assignments_M();if(!1==this.AdjustDurationOnAssignment_M()||0==b.length)return a;for(var e=0,g=0;g<b.length;g++)e+=b[g].AllocationUnits_M();b=Math.ceil(a.Ticks_M()*
(e/100));return RQTimeSpan.fromTicks(b)};b.BaseGanttModel.prototype.ComputeDuration=function(a){return g(a,a.Effort_M(),this.AdjustDurationOnAssignment_M())};var g=b.BaseGanttModel.ComputeDuration=function(a,c,e){return!1==e||0==a.Assignments_M().length?a.Effort_M():b.BaseGanttModel.ConvertEffortToDuration(a,c,e,!1)};b.BaseGanttModel.prototype.GetStart=function(a,c){var b=this.WorkTimeSchedule_M();return null==b?a.addTimeSpan(RQTimeSpan.Zero_M().subtract(c)):b.GetStart(a,c)};b.BaseGanttModel.AdjustEndTime=
function(a,c){return a<=DateTime.MinValue||a>=DateTime.MaxValue?a:null==c?a:c.ConverToPreviousWorkingTime(a)};b.BaseGanttModel.prototype.AdjustStartTime=function(a,c){var e=!1;if(!0==this.adjustDurationOnAssignment&&0<a._assignments.length&&0==a._childActivities.length){for(var g=Date.MaxValue,d=a._assignments.length,f=0;f<d;f++){var q=a._assignments[f]._resource.Schedule_M();null!=q&&(e=b.BaseGanttModel.AdjustStartTime(c,a._effort,q),g.isGreaterThan(e)&&(g=e),e=!0)}e&&(c=g)}!1!=e||0!=a._childActivities.length&&
!1!=this.AutoCalculateSummaryTaskTimes_M()||(g=a.Schedule_M(),c=null!=g?b.BaseGanttModel.AdjustStartTime(c,a._effort,g):this.AdjustStartTimeWithEffort(c,a._effort));return this.OnBeforeStartTimeChanging(a,c)};b.BaseGanttModel.prototype.AdjustStartTimeWithEffort=function(a,c){return b.BaseGanttModel.AdjustStartTime(a,c,this.WorkTimeSchedule_M())};b.BaseGanttModel.AdjustStartTime=function(c,b,e){return c==Date.MinValue||c==Date.MaxValue||a(c,b,e)?c:null==e?c:e.ConvertToNextWorkingTime(c)};b.BaseGanttModel.prototype.RemoveActivity=
function(a,c){this.RecursivelyClearDependencies(c);null!=a?a.ChildActivities_M().remove(c):this.Activities_M().remove(c);this.OnActivityRemoved(c)};b.BaseGanttModel.prototype.GetNewID=function(){return this.topID+1};b.BaseGanttModel.prototype.SetTopSortOrder=function(a){var c=this.ActivitiesCount_M();this._topSortOrder<c-1&&(this._topSortOrder=c-1);this._topSortOrder<a&&(this._topSortOrder=a)};b.BaseGanttModel.prototype.GetNewSortOrder=function(){return this.ActivitiesCount_M()+1};b.BaseGanttModel.prototype.UpdateSortOrders=
function(){this.UpdateSortOrderFrom(null)};b.BaseGanttModel.prototype.IsAncestor=function(a,c){for(var b=a.ChildActivities_M(),e=0;e<b.length;e++){var g=b[e];if(g==c||this.IsAncestor(g,c))return!0}return!1};b.BaseGanttModel.prototype.CreateNewActivity=function(a,c){};b.BaseGanttModel.prototype.CreateNewDependency=function(a,c,b,e){b||(b=RadiantQ.Gantt.DependencyType.FinishToStart);e||(e=RQTimeSpan.Zero_M());return this.CreateNewDependencyInternal(a,c,b,e,!1)};b.BaseGanttModel.prototype.PrepareParenting=
function(a,c){var b=this.Dependencies_M();this.RemoveAnyParentChildDependencies(a,c);for(var e=b.GetSuccessors(a),g=0;g<e.length;g++)this.RemoveDependenciesLeadingTo(e[g],c);b=b.GetSuccessors(c);for(g=0;g<b.length;g++)this.RemoveDependenciesLeadingTo(b[g],a);b=c.ChildActivities_M();for(g=0;g<b.length;g++)this.PrepareParenting(a,b[g]);for(;null!=(a=a.Parent);)this.RemoveAnyParentChildDependencies(a,c)};b.BaseGanttModel.prototype.CanAddNewDependency=function(a,c,e,g){e||(e=b.NewDependencyAddScenarioType.None);
if(!1==this.ValidateDependencySetting_M())return!0;var d=this.Dependencies_M();return a==c||!0==d.DoesConstraintExist(a,c,!0)||!0==d.DoesConstraintExist(c,a,!1)||!1==this.CanAddNewDependencyRecursive(a,c,0)?!1:null!=this.NewDependencyValidator&&"function"==typeof this.NewDependencyValidator?this.NewDependencyValidator(a,c,e,g):!0};b.BaseGanttModel.prototype.NewDependencyValidator=null;b.BaseGanttModel.prototype.ApplyPreferredStartTimeOnActivity=function(a,c){var b=a.ChildActivities_M();if(0<b.length&&
this.AutoCalculateSummaryTaskTimes_M())for(var e=0;e<b.length;e++)this.ApplyPreferredStartTimeOnActivity(b[e],c);else b=a.PreferredStartTime_M(),b>c&&(c=b),a.StartTime_M(c)};b.BaseGanttModel.prototype.GetEnumerator=function(){return null!=this._actitivites?this._actitivites.GetEnumerator():null};b.BaseGanttModel.prototype.GetResourceActivityList=function(a){return this.ResourceAssignmentTracker_M().GetResourceActivityList(a)};b.BaseGanttModel.prototype.Filter=function(a,c){var b=this.Activities_M();
null==c&&(c=new RadiantQ.Gantt.Utils.FilterOptions);for(var e=0;e<b.length;e++)this.ApplyFilterOnActivity(b[e],a,c)};b.BaseGanttModel.prototype.ApplyFilterOnActivity=function(a,c,b){var e=a.ChildActivities_M(),g=!1;if(0<e.length){for(var d=0;d<e.length;d++)var f=!this.ApplyFilterOnActivity(e[d],c,b),g=g|f;a.IsFilteredOut_M(!g)}null==c||0<e.length&&!0==b.AlwaysShowSummaryTask?a.IsFilteredOut_M(!1):!1!=g||0!=e.length&&!b.IncludeParent||(c=!c(a),a.IsFilteredOut_M(c));return a.IsFilteredOut_M()};b.ActivitiesCollection=
function(a,c){this.isActivitiesCollection=!0;this._actColl=new RQArray;this.isRecalculatingTimes=!1;this.AdjustStartTimeForConstraints=new ObjectEvent("AdjustStartTimeForConstraints");this.CollectionChanged=new ObjectEvent("CollectionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.ChildCollectionChanged=new ObjectEvent("ChildCollectionChanged");this.base=RadiantQ.Gantt.Utils.IUIUpdateable;this.base();Array.call(this);this._parent=a;this._model=c;this._progressPercent=0;this._startTime=
Date.MaxValue;this._endTime=Date.MinValue;this._cumEffort=RQTimeSpan.Zero_M();this._prefStartTime=Date.MinValue;null!=this._parent&&(this._parent_PropertyChangedHandler=this._parent.PropertyChanged.subscribe(this._parent_PropertyChanged,this));this.OnAdjustStartTimeForConstraints=function(a){null!=this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.raise(this,a)};this.OnChildCollectionChanged=function(a,c){null!=this.ChildCollectionChanged&&this.ChildCollectionChanged.raise(a,c)};
this.OnPropertyChanged=function(a){this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:a})};this.PartialUpdate=function(a){this._disposed||(a&&(!0==a.isIActivity||a instanceof RadiantQ.Gantt.Model.IActivity)?(this.UpdateTimes(a),this.UpdateProgressPercent()):this.TotalUpdate())};this.TotalUpdate=function(){this._disposed||(this.RecalculateTimes(),this.UpdateProgressPercent())};this._disposed=!1;b.ActivitiesCollection.prototype.Dispose=this.Dispose=
function(){for(var a=0;a<this.length;a++)this[a].Dispose();this._disposed=!0;null!=this._parent&&this._parent_PropertyChangedHandler&&(this._parent_PropertyChangedHandler.Dispose(),this._parent_PropertyChangedHandler=null);this._actChildCollectionChangedHandler&&(this._actChildCollectionChangedHandler.Dispose(),this._actChildCollectionChangedHandler=null);this._actPropertyChangedHandler&&(this._actPropertyChangedHandler.Dispose(),this._actPropertyChangedHandler=null);this._actAdjustStartTimeForConstraintsHandler&&
(this._actAdjustStartTimeForConstraintsHandler.Dispose(),this._actAdjustStartTimeForConstraintsHandler=null);this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.Dispose();this.AdjustStartTimeForConstraints=null;this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null;this.PropertyChanged&&this.PropertyChanged.Dispose();this.PropertyChanged=null;this.ChildCollectionChanged&&this.ChildCollectionChanged.Dispose();this.ChildCollectionChanged=null};return this};
b.ActivitiesCollection.prototype=new RadiantQ.Gantt.Utils.IUIUpdateable;b.ActivitiesCollection.prototype=[];b.ActivitiesCollection.prototype.Model_M=function(){return this._model};b.ActivitiesCollection.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;!1==this._startTime.equals(a)&&(this._startTime=a,this.OnPropertyChanged("StartTime",a))};b.ActivitiesCollection.prototype.PreferredStartTime_M=function(a){if(0==arguments.length)return this._prefStartTime;!1==this._prefStartTime.equals(a)&&
(this._prefStartTime=a,this.OnPropertyChanged("PreferredStartTime",a))};b.ActivitiesCollection.prototype.EndTime_M=function(a){if(0==arguments.length)return this._endTime;!1==this._endTime.equals(a)&&(this._endTime=a,this.OnPropertyChanged("EndTime",a))};b.ActivitiesCollection.prototype.CumulativeEffort_M=function(){if(0==arguments.length)return this._cumEffort};b.ActivitiesCollection.prototype.ProgressPercent_M=function(a){if(0==arguments.length)return this._progressPercent;this._progressPercent!=
a&&(this._progressPercent=a,this.OnPropertyChanged("ProgressPercent",a))};b.ActivitiesCollection.prototype.Schedule_M=function(a){if(0==arguments.length)return this._schedule;this._schedule!=a&&(this._schedule=a,this.OnPropertyChanged("Schedule",a))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.ActivitiesCollection.prototype,"Model",{get:function(){return this.Model_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"StartTime",
{get:function(){return this.StartTime_M()},set:function(a){this.StartTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"PreferredStartTime",{get:function(){return this.PreferredStartTime_M()},set:function(a){this.PreferredStartTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"EndTime",{get:function(){return this.EndTime_M()},set:function(a){this.EndTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,
"CumulativeEffort",{get:function(){return this.CumulativeEffort_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.ActivitiesCollection.prototype,"ProgressPercent",{get:function(){return this.ProgressPercent_M()},set:function(a){this.ProgressPercent_M(a)},enumerable:!0,configurable:!0}));b.ActivitiesCollection.prototype._parent_PropertyChanged=function(a,c){"DefaultWBSID"==c.PropertyName&&this.UpdateChildWBSIDs()};b.ActivitiesCollection.prototype.UpdateChildWBSIDs=function(){if(!1!=
this.IsWBSCalcEnabled())for(var a=0;a<this.length;a++)this.UpdateChildWBSID(a)};b.ActivitiesCollection.prototype.UpdateChildWBSID=function(a){var c=this[a];a=new b.ProvideDefaultWBSIDEventArgs(c,c.WBSID_M(),a,this);this._model.RaiseProvideWBSID(a);c.DefaultWBSID_M(a.NewWBSID_M())};b.ActivitiesCollection.prototype.IsWBSCalcEnabled=function(){var a=this._model;return null==a||!1==a.CanProvideWBSID()?!1:!0};b.ActivitiesCollection.prototype.add=function(a){0<=this.indexOf(a)||(this.push(a),this.OnCollectionChanged(this,
new RadiantQ.NotifyCollectionChangedEventArgs(null,a,this.length-1)))};b.ActivitiesCollection.prototype.insert=function(a,c){if(a<=this.length||0==a)this.splice(a,0,c),this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(null,c,a))};b.ActivitiesCollection.prototype.remove=function(a){var c=this.indexOf(a);0>c||(this.splice(c,1),this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(a,null,c)))};b.ActivitiesCollection.prototype.indexOf=function(a){return f.inArray(a,
this)};b.ActivitiesCollection.prototype.contains=function(a){return-1===this.indexOf(a)?!0:!1};b.ActivitiesCollection.prototype.ClearItems=function(){if(b.AutoCalculateSummaryTaskTimes_M())for(var a=0;a<this.collections.length;a++){var c=this.collections.GetItemByIndex(a);this.UnsubscribeToChildEvents(c)}this.splice(0,this._length)};b.ActivitiesCollection.prototype.OnCollectionChanged=function(a,c){this.CollectionChanged.raise(this,c);var b=2147483647;if(null!=c.OldItems)for(var b=c.OldStartingIndex,
e=0;e<c.OldItems.length;e++){var g=c.OldItems[e];this.UnsubscribeToChildEvents(g)}if(null!=c.NewItems)for(b=b<c.NewStartingIndex?b:c.NewStartingIndex,e=0;e<c.NewItems.length;e++)g=c.NewItems[e],this.SubscribeToChildEvents(g);if(2147483647!=b&&this.IsWBSCalcEnabled())for(e=b;e<this.length;e++)this.UpdateChildWBSID(e);"remove"==c.type&&0==this.length&&(this._model.AutoCalculateSummaryTaskTimes_M()?(this.StartTime_M(Date.MaxValue),this.EndTime_M(Date.MinValue),this.PreferredStartTime_M(Date.MaxValue)):
this._parent&&this._parent.OnPropertyChanged&&this._parent.OnPropertyChanged("IsParent",!0,!1))};RadiantQ.Gantt.Model.ActivitiesCollection.prototype.SubscribeToChildEvents=function(a){b.DataBoundGanttModel.IsBuildingModel||this.UpdateProgressPercentForChild(a,!0);(!0==a.isBaseActivity||a instanceof RadiantQ.Gantt.Model.BaseActivity)&&a.Parent_M(this._parent);this._actChildCollectionChangedHandlers||(this._actChildCollectionChangedHandlers={});this._actPropertyChangedHandlers||(this._actPropertyChangedHandlers=
{});this._actAdjustStartTimeForConstraintsHandlers||(this._actAdjustStartTimeForConstraintsHandlers={});var c=a.ChildCollectionChanged.subscribe(this.activity_ChildCollectionChanged,this);this._actChildCollectionChangedHandlers[a.id]=c;var e=this._model;!1!=e.AutoCalculateSummaryTaskTimes_M()&&(c=a.PropertyChanged.subscribe(this.activity_PropertyChanged,this),this._actPropertyChangedHandlers[a.id]=c,c=a.AdjustStartTimeForConstraints.subscribe(this.activity_AdjustStartTimeForConstraints,this),this._actAdjustStartTimeForConstraintsHandlers[a.id]=
c,!1==a.isBaseActivity&&!1==a instanceof RadiantQ.Gantt.Model.BaseActivity&&RadiantQ.Gantt.Model.BaseActivity.call(a,e),c=a.ComputeConstrainedStartTime(),a.StartTime_M()<=c&&a.ShiftForwardTo(c),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a),(a=a.CumulativeEffort_M())&&this.UpdateEffort(RQTimeSpan.Zero_M(),a))};b.ActivitiesCollection.prototype.UnsubscribeToChildEvents=RadiantQ.Gantt.Model.ActivitiesCollection.prototype.UnsubscribeToChildEvents=function(a){(a instanceof RadiantQ.Gantt.Model.BaseActivity||
a.isBaseActivity)&&a.Parent_M(null);if(this._actChildCollectionChangedHandlers&&this._actChildCollectionChangedHandlers[a.id]){var c=this._actChildCollectionChangedHandlers[a.id];c.Dispose();delete this._actChildCollectionChangedHandlers[a.id]}this._actPropertyChangedHandlers&&this._actPropertyChangedHandlers[a.id]&&(c=this._actPropertyChangedHandlers[a.id],c.Dispose(),delete this._actPropertyChangedHandlers[a.id]);this._actAdjustStartTimeForConstraintsHandlers&&this._actAdjustStartTimeForConstraintsHandlers[a.id]&&
(c=this._actAdjustStartTimeForConstraintsHandlers[a.id],c.Dispose(),delete this._actAdjustStartTimeForConstraintsHandlers[a.id]);!1!=this._model.AutoCalculateSummaryTaskTimes_M()&&(RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,null),this.UpdateEffort(a.CumulativeEffort_M(),RQTimeSpan.Zero_M()))};b.ActivitiesCollection.prototype.activity_PropertyChanged=function(a,c){this.OnChildPropertyChanged(a,c)};b.ActivitiesCollection.prototype.OnChildPropertyChanged=function(a,c){"StartTime"!=c.PropertyName&&
"EndTime"!=c.PropertyName&&"PreferredStartTime"!=c.PropertyName||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a);"CumulativeEffort"==c.PropertyName&&this.UpdateEffort(c.OldValue,a.CumulativeEffort_M());if("ProgressPercent"==c.PropertyName||null!=this._model.CustomProgressCalculation_M()&&("Effort"==c.PropertyName||"CumulativeEffort"==c.PropertyName))RadiantQ.Gantt.Utils.DelayUpdateUtil.IsUpdating()||this.UpdateProgressPercent()};b.ActivitiesCollection.prototype.DelayUpdate=function(a){RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
a)};b.ActivitiesCollection.prototype.UpdateEffort=function(a,c){var b=this.CumulativeEffort_M();c&&b&&(b=b.add(c));a&&b&&(b=b.subtract(a));b&&c||(b=c);this._cumEffort&&this._cumEffort.equals&&!1!=this._cumEffort.equals(b)||(this._cumEffort=b,this.OnPropertyChanged("CumulativeEffort",a,c))};b.ActivitiesCollection.prototype.UpdateTimes=function(a){if(!1!=this._model.AutoCalculateSummaryTaskTimes_M()){this.isRecalculatingTimes=!0;var c=!1,b=this.StartTime_M(),e=a.StartTime_M();e<=b?this.StartTime_M(e):
c=!0;b=a.PreferredStartTime_M();b<=this.PreferredStartTime_M()?this.PreferredStartTime_M(b):c=!0;!1==c&&(a=a.EndTime_M(),a>=this.EndTime_M()?this.EndTime_M(a):c=!0);this.isRecalculatingTimes=!1;c&&this.RecalculateTimes()}};b.ActivitiesCollection.prototype.UpdateProgressPercent=function(){if(null!=this._parent&&!1!=this._model.AutoCalculateSummaryTaskTimes_M())if(0==this.length)this.ProgressPercent_M(0);else{var a=this._model.CustomProgressCalculation_M();if(null!=a)this.ProgressPercent_M(a(this._parent));
else{for(var c=a=0;c<this.length;c++)a+=this[c].ProgressPercent_M();this.ProgressPercent_M(a/this.length)}}};b.ActivitiesCollection.prototype.UpdateProgressPercentForChild=function(a,c){var b=this._model.CustomProgressCalculation_M();null!=b&&null!=this._parent?this.ProgressPercent_M(b(this._parent)):c?(b=this.ProgressPercent_M()*(this.length-1),b+=a.ProgressPercent_M(),this.ProgressPercent_M(b/this.length)):0==this.length?this.ProgressPercent_M(0):(b=this.ProgressPercent_M()*(this.length+1),b-=a.ProgressPercent_M(),
this.ProgressPercent_M(b/this.length))};b.ActivitiesCollection.prototype.activity_AdjustStartTimeForConstraints=function(a,c){this.OnAdjustStartTimeForConstraints(c)};b.ActivitiesCollection.prototype.activity_ChildCollectionChanged=function(a,c){this.OnChildCollectionChanged(a,c)};b.ActivitiesCollection.prototype.RecalculateTimes=function(){if(!1!=this._model.autoCalculateSummaryTaskTimes){this.isRecalculatingTimes=!0;if(0<this.length){for(var a=Date.MaxValue,c=Date.MinValue,b=Date.MaxValue,e=0;e<
this.length;e++){var g=this[e];g._startTime<a&&(a=g._startTime);var d=g.PreferredStartTime_M();d<b&&(b=d);g=g.EndTime_M();g>c&&(c=g)}e=new RadiantQ.Gantt.Utils.DelayUpdates;this.StartTime_M(a);this.EndTime_M(c);this.PreferredStartTime_M(b);e.Dispose()}this.isRecalculatingTimes=!1}};b.BaseActivity=function(a){this.processingPredString=!1;this.isBaseActivity=!0;RadiantQ.Gantt.Model.IActivity.call(this);this.IsDisposed=!1;this.Model=a;this._assignments=new b.ResourceAssignmentCollection(this);this.propertiesDict=
null;this._updatedProps={};0==arguments.length&&(RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled=!0);this.cachedEndTime=null;RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled=!0;this.CreateChildActivitiesCollection||(b.BaseActivity.prototype.CreateChildActivitiesCollection=function(){return new b.ActivitiesCollection(this,this.Model)});this.PartialUpdate=function(a){"AssignmentsCollectionChanged"==a?(this.OnPropertyChanged("Assignments"),this.OnPropertyChanged("EndTime")):this.TotalUpdate()};
this.TotalUpdate=function(){var a=this.ChildActivities_M();if(0<a.length&&this.Model.AutoCalculateSummaryTaskTimes_M()){var c=this.StartTime_M(),b=a.StartTime_M(),e=a.EndTime_M();this.StartTime_M(b);var g=this.EndTime_M();!1==a.PreferredStartTime_M().equals(Date.MinValue)&&this.PreferredStartTime_M(a.PreferredStartTime_M());!0==a.isRecalculatingTimes&&!1==c.equals(b)&&!1==g.equals(Date.MinValue)&&g.equals(e)?this.UpdateEndTime(g):this.EndTime_M(e)}};this._defWbsID=this._wbsID="";this._isAutoWBSID=
!0;a&&(this.Model=a,this.id=b.BaseGanttModel.IdCounter++,this.propertiesDict=new RQArray,this._childActivities=this.CreateChildActivitiesCollection(),this._childActsPropertyChangedHandler=this._childActivities.PropertyChanged.subscribe(this.childActivities_PropertyChanged,this),this._childActsCollectionChangedHandler=this._childActivities.CollectionChanged.subscribe(this.childActivities_CollectionChanged,this),this._childActsChildCollectionChangedHandler=this._childActivities.ChildCollectionChanged.subscribe(this.childActivities_ChildCollectionChanged,
this),this._childActsAdjustStartTimeForConstraintsHandler=this._childActivities.AdjustStartTimeForConstraints.subscribe(this._childActivities_AdjustStartTimeForConstraints,this),this._assignsCollectionChangedHandler=this._assignments.CollectionChanged.subscribe(this._assignments_CollectionChanged,this),this._assignsPropertyChangedHandler=this._assignments.PropertyChanged.subscribe(this.Assignments_PropertyChanged,this),this._startTime=a.AdjustStartTimeWithEffort(Date.today(),new RQTimeSpan(1,0,0,
0,0)),this._prefStartTime=this.GetDefaultStartTime());return this};b.BaseActivity.prototype=new RadiantQ.Gantt.Model.IActivity;b.BaseActivity.prototype.OnTimesChanged=function(){this.cachedEndTime=null;this.UpdateIsMileStone()};b.BaseActivity.prototype.UpdateIsMileStone=function(){this.StartTime_M().equals(this.EndTime_M())?this.IsMilestone_M(!0):this.IsMilestone_M(!1)};b.BaseActivity.prototype.Dispose=function(){!0!=this.IsDisposed&&(RadiantQ.Gantt.Model.IActivity.prototype.Dispose.call(this),this._childActsPropertyChangedHandler&&
(this._childActsPropertyChangedHandler.Dispose(),this._childActsPropertyChangedHandler=null),this._childActsCollectionChangedHandler&&(this._childActsCollectionChangedHandler.Dispose(),this._childActsCollectionChangedHandler=null),this._childActsChildCollectionChangedHandler&&(this._childActsChildCollectionChangedHandler.Dispose(),this._childActsChildCollectionChangedHandler=null),this._childActsAdjustStartTimeForConstraintsHandler&&(this._childActsAdjustStartTimeForConstraintsHandler.Dispose(),this._childActsAdjustStartTimeForConstraintsHandler=
null),this._assignsCollectionChangedHandler&&(this._assignsCollectionChangedHandler.Dispose(),this._assignsCollectionChangedHandler=null),this._assignsPropertyChangedHandler&&(this._assignsPropertyChangedHandler.Dispose(),this._assignsPropertyChangedHandler=null),this._depPropertyChangedHandler&&(this._depPropertyChangedHandler.Dispose(),this._depPropertyChangedHandler=null),this._childActivities.Dispose(),this._assignments.Dispose(),this.IsDisposed=!0)};b.BaseActivity.prototype.IsParentExpanded_M=
function(){var a=this.Parent_M();return null==a?!0:a.IsExpanded_M()};b.BaseActivity.prototype.IsParentVisible_M=function(){var a=this.Parent_M();return null==a?!0:a.IsVisible_M()};b.BaseActivity.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;this._startTime.equals(a)||this.ValidateAndSetStartTime(a)};b.BaseActivity.prototype.ValidateAndSetStartTime=function(a){a=new b.AdjustStartTimeEventArgs(this,a);this.OnAdjustStartTimeForConstraints(a);a=a.StartTime;a=this.Model.AdjustStartTime(this,
a);if(!this._startTime.equals(a)){var c=this._startTime instanceof Date?this._startTime.clone():this._startTime;this._startTime=a.clone();var e=new RadiantQ.Gantt.Utils.DelayUpdates;this.OnPropertyChanged("EndTime",this.cachedEndTime);this.OnPropertyChanged("StartTime",c,a);e.Dispose()}};b.BaseActivity.prototype.EndTime_M=function(a){if(0==arguments.length)return RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled?(null==this.cachedEndTime&&(this.cachedEndTime=this.Model.ComputeEndTime(this)),
this.cachedEndTime):this.Model.ComputeEndTime(this);var c=this.EndTime_M();c&&a&&c.equals(a)||(null==a?this.cachedEndTime=a:0<=a.compareTo(this.StartTime_M())&&this.UpdateEndTime(a))};b.BaseActivity.prototype.Effort_M=function(a){if(0==arguments.length)return this._effort?this._effort:RQTimeSpan.Zero_M();"string"==typeof a&&(a=RQTimeSpan.parse(a));if(!1==this._effort.equals(a)){var c=this._effort,b=this.CumulativeEffort_M(),e=this.Duration_M(),g=this.EndTime_M(),d=this.Model.AdjustEffort(this,a);
this._effort=d;this._isUpdating=!0;this.OnPropertyChanged("Effort",c,d);this.OnPropertyChanged("Duration",e);this._isUpdating=!1;this.OnPropertyChanged("EndTime",g);this.OnPropertyChanged("CumulativeEffort",b,d)}};b.BaseActivity.prototype.Duration_M=function(a){if(0==arguments.length)return this.Model.ComputeDuration(this);this.Duration_M()!=a&&this.Effort_M(this.Model.ConvertDurationToEffort(a,this))};b.BaseActivity.prototype.Properties_M=function(){return this.propertiesDict};b.BaseActivity.prototype.Assignments_M=
function(a){if(0==arguments.length)return this._assignments;this._assignments=a};b.BaseActivity.prototype.ChildActivities_M=function(){return this._childActivities};b.BaseActivity.prototype.WBSID_M=function(a){if(0==arguments.length)return this.IsAutoWBSID_M()?this._defWbsID:this._wbsID;this.IsAutoWBSID_M(null==a||void 0==a||""==a);this._wbsID!=a&&(this._wbsID=a,this.OnPropertyChanged("WBSID"))};b.BaseActivity.prototype.DefaultWBSID_M=function(a){if(0==arguments.length)return this._defWbsID;this._defWbsID!=
a&&(this._defWbsID=a,this.OnPropertyChanged("DefaultWBSID"),this.IsAutoWBSID_M()&&this.OnPropertyChanged("WBSID"))};b.BaseActivity.prototype.IsAutoWBSID_M=function(a){if(0==arguments.length)return this._isAutoWBSID;this._isAutoWBSID!=a&&(this._isAutoWBSID=a,this.OnPropertyChanged("IsAutoWBSID"))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.BaseActivity.prototype,"IsParentExpanded",{get:function(){return this.IsParentExpanded_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,
"IsParentVisible",{get:function(){return this.IsParentVisible_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"StartTime",{get:function(){return this.StartTime_M()},set:function(a){this.StartTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"EndTime",{get:function(){return this.EndTime_M()},set:function(a){this.EndTime_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"Effort",
{get:function(){return this.Effort_M()},set:function(a){this.Effort_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"Duration",{get:function(){return this.Duration_M()},set:function(a){this.Duration_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"Properties",{get:function(){return this.Properties_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"Assignments",{get:function(){return this.Assignments_M()},
set:function(a){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"ChildActivities",{get:function(){return this.ChildActivities_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"WBSID",{get:function(){return this.WBSID_M()},set:function(a){this.WBSID_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"DefaultWBSID",{get:function(){return this.DefaultWBSID_M()},set:function(a){this.DefaultWBSID_M(a)},
enumerable:!0,configurable:!0}),Object.defineProperty(b.BaseActivity.prototype,"IsAutoWBSID",{get:function(){return this.IsAutoWBSID_M()},set:function(a){this.IsAutoWBSID_M(a)},enumerable:!0,configurable:!0}));b.BaseActivity.prototype.SetPreCalculatedEndTime=function(a,c){this.cachedEndTime=a;this._childActivities.EndTime_M(a);this.Effort_M(c)};b.BaseActivity.prototype.UpdateEndTime=function(a){this.cachedEndTime=null;var c=this.Model.ComputeEffort(this,a);!1==this.Effort_M().equals(c)?this.Effort_M(c):
this.OnPropertyChanged("EndTime",a)};b.BaseActivity.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this,null)};b.BaseActivity.prototype.AdjustFinishForLag=function(a,c,b){if(null==b)return a.addTimeSpan(c);a=c.isGreaterThanOrEqualTo(RQTimeSpan.Zero_M())?(new RadiantQ.Gantt.TimePeriodCollection(b.ConvertToNextWorkingTimeIntervals(a,c))).Finish:(new RadiantQ.Gantt.TimePeriodCollection(b.ConvertToPreviousWorkingTimeIntervals(a,new RQTimeSpan(-c.totalMilliseconds_M())))).Finish;
return b.ConvertToNextWorkingTime(a)};b.BaseActivity.prototype.GetScheduleToPlotWith=function(a){var c=this.Assignments_M(),b=this.Schedule_M();a=null!=b?b:a;if(null==c||0==c.length||1<c.length||1!=c.length)return a;c=c[0].Resource_M().Schedule_M();return null!=c?c:a};RadiantQ.Gantt.Model.BaseActivity.prototype.WorkTimeSchedule_M=function(a){if(0==arguments.length)return this._schedule;this._schedule!=a&&(this._schedule=a,this.OnPropertyChanged("WorkTimeSchedule"))};RadiantQ.Gantt.Model.BaseActivity.prototype.Schedule_M=
function(a){if(0==arguments.length)return this._schedule;this._schedule!=a&&a instanceof RadiantQ.Gantt.WorkTimeSchedule&&(this._schedule=a,this.OnPropertyChanged("Schedule"),this.ValidateAndSetStartTime(this._startTime),this.OnPropertyChanged("EndTime"))};b.BaseActivity.prototype._childActivities_AdjustStartTimeForConstraints=function(a,c){this.OnAdjustStartTimeForConstraints(c)};b.BaseActivity.prototype.childActivities_ChildCollectionChanged=function(a,c){this.OnChildCollectionChanged(a,c)};b.BaseActivity.prototype.childActivities_CollectionChanged=
function(a,c){this.OnChildCollectionChanged(this,c);var b=this.ChildActivities_M();"remove"==c.type&&0==b.length?this.Model.ApplyPreferredStartTimeOnActivity(this,this.PreferredStartTime_M()):"insert"==c.type&&1==b.length&&this.OnPropertyChanged("CumulativeEffort",this.Effort_M())};b.BaseActivity.prototype.childActivities_PropertyChanged=function(a,c){"StartTime"==c.PropertyName||"EndTime"==c.PropertyName||"Effort"==c.PropertyName?this.Model.AutoCalculateSummaryTaskTimes_M()&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
null):"ProgressPercent"==c.PropertyName?this.ProgressPercent_M(this.ChildActivities_M().ProgressPercent_M()):"CumulativeEffort"==c.PropertyName&&this.CumulativeEffort_M(this.ChildActivities_M().CumulativeEffort_M())};b.BaseActivity.prototype.OnChildCollectionChanged=function(a,c){null!=this.ChildCollectionChanged&&this.ChildCollectionChanged.raise(a,c)};b.BaseActivity.prototype.OnPropertyChanged=function(a,c){if("EndTime"==a||"StartTime"==a||"Effort"==a||"Duration"==a||"Assignments"==a||"IsMilestone"==
a)this.OnTimesChanged(),this.OnPropertyChanged("Times",c);"Assignments"==a&&this.OnPropertyChanged("EndTime");null!=this.PropertyChanged&&this.PropertyChanged.raise(_baseActivity,a,c)};b.BaseActivity.prototype.Assignments_PropertyChanged=function(a,c){"ResourceInfo"==c.PropertyName&&this.OnPropertyChanged("Assignments")};b.BaseActivity.prototype._assignments_CollectionChanged=function(a,c){null==c.NewItems&&null==c.OldItems&&c.Action!=RadiantQ.NotifyCollectionChangedAction.Reset||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
"AssignmentsCollectionChanged")};b.BaseActivity.prototype.dependency_PropertyChanged=function(a,c){this.UpdatePredecessorString()};b.BaseActivity.prototype.processingPredString=!1;b.BaseActivity.prototype.UpdatePredecessorString=function(){if(this.Model&&!0!=this.processingPredString){var a=this.Model.Dependencies_M().GetPredecessors(this),a=b.DataBoundGanttModel.ConstructPredecessorString(a,this.Model.LagStringUnitsInHours_M());this.PredecessorIndexString_M(a)}};b.BaseActivity.prototype.OnPropertyChanged=
function(a,c,b){if(!1==this.Model._onInit)switch(a){case "Times":case "StartTime":case "EndTime":case "PreferredStartTime":case "Effort":case "Parent":case "PredecessorIndexString":case "ProgressPercent":case "ID":case "ActivityName":case "SortOrder":case "Description":case "Assignments":var e=this._updatedProps[a];e||(e=this._updatedProps[a]={});e.OldValue=c;this._propertyChangeTimer&&clearTimeout(this._propertyChangeTimer);this._propertyChangeTimer=setTimeout(function(){var c=this.Parent_M(),c=
c?c:this.Model._activities;this.Model.ActivityUpdated&&this.Model.ActivityUpdated.raise(c._childActivities,this,this._updatedProps);this.triggerEvent&&this.triggerEvent(a);this._updatedProps={}}.bind(this),0)}if("EndTime"==a||"StartTime"==a||"Effort"==a||"Duration"==a||"Assignments"==a)this.OnTimesChanged(),this.OnPropertyChanged("Times",c,b);"Assignments"==a&&this.OnPropertyChanged("EndTime");this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:a,
OldValue:c,value:b})};b.BaseActivity.prototype.ComputeConstrainedStartTime=function(){var a=new b.AdjustStartTimeEventArgs(this,this.StartTime_M());this.OnAdjustStartTimeForConstraints(a);return a.StartTime};b.BaseActivity.prototype.OnAdjustStartTimeForConstraints=function(a){if(!1!=this.Model.EnforceDependencyConstraints_M()&&!1!=b.BaseGanttModel.ShouldEnforceDependency(this,this.Model)){for(var c=a.StartTime,e=0<this.Model.Dependencies_M().length?this.Model.Dependencies_M().GetPredecessors(this):
[],g=0;g<e.length;g++){var d=e[g];d.FromActivity_M()!=this&&(d=d.ComputeLatestToActivityStartTime(),d>c&&(c=d))}a.StartTime=c;null!=this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.raise(this,a)}};b.BaseActivity.prototype.GetDefaultStartTime=function(){return Date.today()};b.BaseActivity.prototype.CreateNewChildActivity=function(a){};b.BaseActivity.prototype.IsCritical=function(a,c,b){if(null!=this.Model){var e=this.Model.AllActivities_M().asArray,g=this.Model.WorkTimeSchedule_M(),
f=null==g?this.EndTime_M().addTimeSpan(c):(new RadiantQ.Gantt.TimePeriodCollection(g.ConvertToNextWorkingTimeIntervals(this.EndTime_M(),c))).Finish;if(f>=a||null!=b&&b.ContainsKey(this)&&f>=b[this])return!0;if(0==this.ChildActivities_M().length)for(var q=this;null!=q;q=q.Parent_M())for(var r=0;r<e.length;r++){var s=e[r];if(q!=s)for(var u=this.Model.Dependencies_M().GetPredecessors(s),w=0;w<u.length;w++){var t=u[w];if(t.FromActivity_M()==q&&(t.Type_M()==d.FinishToStart||t.Type_M()==d.StartToStart)&&
this.AdjustFinishForLag(f,t.Lag_M(),g)>=s.StartTime_M()&&s.IsCritical(a,c,b))return!0}}else for(e=this.ChildActivities_M(),r=0;r<e.length;r++)if(e[r].IsCritical(a,c,b))return!0}return!1};b.BaseActivity.prototype.GetWorkingHoursTimeSpan=function(){var a=this.Effort_M(),c=this.Schedule_M(),c=null!=c?c:this.Model.WorkTimeSchedule_M();0<this.Assignments_M().length&&null!=c&&(a=c.GetEffort(this.StartTime_M(),this.EndTime_M()));return a};b.BaseActivity.prototype.OnAddedPredecessorDependency=function(a){a.ToActivity_M()==
this&&(this._depPropertyChangedHandler=a.PropertyChanged.subscribe(this.dependency_PropertyChanged,this),this.UpdatePredecessorString())};b.BaseActivity.prototype.OnRemovedPredecessorDependency=function(a){a.PropertyChanged.unsubscribe(this.dependency_PropertyChanged,this);this.UpdatePredecessorString()};b.BaseActivity.prototype.ShiftForwardTo=function(a){this.StartTime_M();var c=this.ChildActivities_M();if(0<c.length&&this.Model.AutoCalculateSummaryTaskTimes_M()){for(var b=new RadiantQ.Gantt.Utils.DelayUpdates,
e=0;e<c.length;e++)c[e].ShiftForwardTo(a);b.Dispose()}else this.Model&&this.StartTime_M()<a&&(a=this.Model.ConvertToValidStartTime(a,RQTimeSpan.Zero_M(),this.Effort_M()),this.StartTime_M(a))};b.BaseActivity.prototype.toString=function(){return this.ID_M()+"; "+this.ActivityName_M()+"; "+this.StartTime_M().Date()+"/"+(this.Effort_M()?this.Effort_M().hours_M():void 0)+"hrs; ChildCount: "+this.ChildActivities_M().length+" "};b.BaseGanttResource=function(){this.BaseGanttResource=!0;this.base=b.IGanttResource;
this.base();return this};b.BaseGanttResource.prototype=new b.IGanttResource;b.BaseGanttResource.prototype.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a)};b.BaseGanttResource.prototype.toString=function(){return this.ResourceName_M()};b.BaseGanttResource.prototype.Dispose=function(){};b.ResourceAssignment=function(a,c){this.ResourceAssignment=!0;this._allocUnits=0;c||(c=100);this._allocUnits=c;a&&(this._resource=a,this._allocUnits=1E5>c?this._allocUnits:
1E5);return this};b.ResourceAssignment.prototype.Resource_M=function(){return this._resource};b.ResourceAssignment.prototype.AllocationUnits_M=function(){return this._allocUnits};b.ResourceAssignment.prototype.toString=function(a,c){var b=a?this._resource.ResourceID_M():this._resource.ResourceName_M(),e=this._allocUnits;if(100==e)return b;e=100*(e/100);return b+"["+(Math.round?Math.round(e).toString():e.toString())+"%]"};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.ResourceAssignment.prototype,
"Resource",{get:function(){return this.Resource_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.ResourceAssignment.prototype,"AllocationUnits",{get:function(){return this.AllocationUnits_M()},set:function(){},enumerable:!0,configurable:!0}));b.ResourceAssignmentCollection=function(a){this.base=Array;this.base();this.parentActivity=a;this.CollectionChanged=new ObjectEvent("CollectionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.push=b.ResourceAssignmentCollection.prototype.add;
this.schedules=[];return this};b.ResourceAssignmentCollection.prototype=[];b.ResourceAssignmentCollection.prototype.ParentActivity_M=function(){return this.parentActivity};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.ResourceAssignmentCollection.prototype,"ParentActivity",{get:function(){return this.ParentActivity_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.ResourceAssignmentCollection.prototype,"AsText",{get:function(){return this.AsText_M()},set:function(a){this.AsText_M(a)},
enumerable:!0,configurable:!0}));b.ResourceAssignmentCollection.prototype.AsText_M=function(a){if(0==arguments.length){if(0==this.length)return"";for(var c=new b.ConvertResourceListFromResourceStringEventArgs("",!0),e=0;e<this.length;e++){var g=this[e];c._assignments.add(g)}this.parentActivity.OnConvertResourceListFromResourceString(c);return c.ResourceText}this.clear();if(a&&""!=a)for(c=new b.ConvertResourceListFromResourceStringEventArgs(a,!1),this.parentActivity.OnConvertResourceListFromResourceString(c),
e=0;e<c._assignments.length;e++)g=c._assignments[e],this.add(g)};b.ResourceAssignmentCollection.prototype.add=function(a){if(a){var c=a.Resource_M().Schedule_M();c&&this.schedules.push(c);Array.prototype.push.call(this,a);this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(null,a))}};b.ResourceAssignmentCollection.prototype.remove=function(a){var c=this.indexOf(a);if(!(0>c)){var b=a.Resource_M().Schedule_M();if(b){b=this.schedules.indexOf(b);if(0>b)return;this.schedules.splice(b,
1)}this.splice(c,1);this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(a,null))}};b.ResourceAssignmentCollection.prototype.clear=function(){0!=this.length&&(this.splice(0,this.length),this.OnCollectionChanged(this,new RadiantQ.NotifyCollectionChangedEventArgs(null,null)))};b.ResourceAssignmentCollection.prototype.indexOf=function(a){for(var c=0;c<this.length;c++)if(this[c]===a)return c;return-1};b.ResourceAssignmentCollection.prototype.ContainsResource=function(a){return null!=
this.GetAssignmentForResource(a)?!0:!1};b.ResourceAssignmentCollection.prototype.GetAssignmentForResource=function(a){for(var c=0;c<this.length;c++){var b=this[c],e=b.Resource_M();if(e==a||e._boundObj==a)return b}return null};b.ResourceAssignmentCollection.prototype.OnCollectionChanged=function(a,c){if(null!=c.NewItems)for(var b=0;b<c.NewItems.length;b++){var e=c.NewItems[b];this._resPropertyChangedHandler=e.Resource_M().PropertyChanged.subscribe(this.Resource_PropertyChanged,this)}if(null!=c.OldItems)for(b=
0;b<c.OldItems.length;b++)e=c.OldItems[b],e.Resource_M().PropertyChanged.unsubscribe(this.Resource_PropertyChanged,this);this.CollectionChanged.raise(a,c)};b.ResourceAssignmentCollection.prototype.Resource_PropertyChanged=function(a,c){this.OnPropertyChanged("ResourceInfo")};b.ResourceAssignmentCollection.prototype.Dispose=function(){this._resPropertyChangedHandler&&(this._resPropertyChangedHandler.Dispose(),this._resPropertyChangedHandler=null);this.CollectionChanged&&this.CollectionChanged.Dispose();
this.CollectionChanged=null;this.PropertyChanged&&this.PropertyChanged.Dispose();this.parentActivity=this.PropertyChanged=null;this.splice(0,this.length)};b.GanttResourcesCollection=function(){this.CollectionChanged=new ObjectEvent("CollectionChanged");Array.call(this);this._resByID=new RadiantQ.Gantt.Dictionary;this._resByName=new RadiantQ.Gantt.Dictionary;this.getResourceByID=function(a){return this._resByID[a]};return this};b.GanttResourcesCollection.prototype=[];b.GanttResourcesCollection.prototype.ClearItems=
function(){0!=this.length&&(this.splice(0,this.length),this._resByID=new RadiantQ.Gantt.Dictionary,this._resByName=new RadiantQ.Gantt.Dictionary)};b.GanttResourcesCollection.prototype.OnCollectionChanged=function(a){if(null!=a.OldItems)for(var c=0;c<a.OldItems.length;c++){var b=a.OldItems[c];this._resByID.Remove(b.ResourceID_M());var e=b.ResourceName_M();!1==(""==e||null==e)&&this._resByName.Remove(b.ResourceName_M());b.Dispose()}if(null!=a.NewItems)for(c=0;c<a.NewItems.length;c++)b=a.NewItems[c],
e=b.ResourceName_M(),this._resByID.Add(b.ResourceID_M(),b),!1==(""==e||null==e)&&this._resByName.Add(b.ResourceName_M(),b);this.CollectionChanged.raise(this,a)};b.GanttResourcesCollection.prototype.SetItem=function(a,c){if(a>this.length)alert("Can't add the item to the "+a+"index which is greater than the length");else if(-1!=a){var b=this[a],e=b.ResourceName_M();this._resByID.Remove(b.ResourceID_M());!1==(""==e||null==e)&&this._resByName.Remove(e);b.Dispose();this.splice(a,1,c);b=c.ResourceName_M();
this._resByID[c.ResourceID_M()]=c;!1==(""==b||null==b)&&(this._resByName[b]=c)}};b.GanttResourcesCollection.prototype.Add=function(a){var c=a.ResourceID_M();if(this._resByID[c]){var b=this.indexOf(a);this.splice(b,0,a)}else this.push(a);this._resByID[c]=a;this.OnCollectionChanged(new RadiantQ.NotifyCollectionChangedEventArgs(null,a))};b.GanttResourcesCollection.prototype.Remove=function(a){var c=this.indexOf(a);-1!=c&&(this.splice(c,1),delete this._resByID[a.ResourceID_M()],this.OnCollectionChanged(new RadiantQ.NotifyCollectionChangedEventArgs(a,
null)))};b.GanttResourcesCollection.prototype.GetResourceByName=function(a){return this._resByName.Contains(a)?this._resByName[a]:null};b.GanttResourcesCollection.prototype.Dispose=function(){this.CollectionChanged&&this.CollectionChanged.Dispose();this.CollectionChanged=null};b.AdjustStartTimeEventArgs=function(a,c){this.StartTime=this.Activity=null;a&&c&&(this.Activity=a,this.StartTime=c);return this};b.ActivityEventHandler=function(a,c){};b.ActivityEventArgs=function(a){a&&(this._activity=a);return this};
b.ActivityEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.ActivityEventArgs.prototype,"Activity",{get:function(){return this.Activity_M()},set:function(){},enumerable:!0,configurable:!0});b.NewActivityAddedEventArgs=function(a,c,b){a&&(this._activity=a,this._parent=c,this._childIndex=b);return this};b.NewActivityAddedEventArgs.prototype.NewActivity_M=function(){return this._activity};b.NewActivityAddedEventArgs.prototype.Parent_M=
function(){return this._parent};b.NewActivityAddedEventArgs.prototype.ChildIndex_M=function(){return this._childIndex};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.NewActivityAddedEventArgs.prototype,"NewActivity",{get:function(){return this.NewActivity_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.NewActivityAddedEventArgs.prototype,"Parent",{get:function(){return this.Parent_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(b.NewActivityAddedEventArgs.prototype,
"ChildIndex",{get:function(){return this.ChildIndex_M()},set:function(){},enumerable:!0,configurable:!0}));b.BeforeStartTimeChangingEventArgs=function(a,c){this.NewStartTime=null;a&&c&&(this.Activity=a,this.NewStartTime=c);return this};b.BeforeEndTimeChangingEventArgs=function(a,c){this.NewEndTime=null;a&&c&&(this.Activity=a,this.NewEndTime=c);return this};b.BeforeEffortChangingEventArgs=function(a,c){this.NewEffort=null;a&&c&&(this.Activity=a,this.NewEffort=c);return this};b.ResourceAssignmentTracker=
function(a){this.activitiesByResources=new RadiantQ.Gantt.Dictionary;this.OnActivityAdded=function(a){this._activityPropertyChangedHandler=a.PropertyChanged.subscribe(this.activity_PropertyChanged,this);for(var c=a.Assignments_M(),b=0;b<c.length;b++){var e=this.GetResourceActivityList(c[b].Resource_M()._boundObj);f.observable(e).insert(a)}};if(a){this.Model=a;this._modelNewActivityAddedHandler=a.NewActivityAdded.subscribe(this.model_NewActivityAdded,this);this._modelActivityRemovedHandler=a.ActivityRemoved.subscribe(this.model_ActivityRemoved,
this);a=a.AllActivities_M();for(var c=0;c<a.length;c++){var b=a.GetItemByIndex(c);this.OnActivityAdded(b)}}};b.ResourceAssignmentTracker.prototype.model_ActivityRemoved=function(a,c){this.ProcessActivityRemovedRecursively(c)};b.ResourceAssignmentTracker.prototype.model_NewActivityAdded=function(a,c){this.OnActivityAdded(c.NewActivity_M())};b.ResourceAssignmentTracker.prototype.GetResourceActivityList=function(a){var c=this.activitiesByResources.GetItemByKey(a);c||(c=new RQArray,this.activitiesByResources.Add(a,
c));return c};b.ResourceAssignmentTracker.prototype.activity_PropertyChanged=function(a,c){"Assignments"==c.PropertyName&&(this.OnActivityRemoved(a),this.OnActivityAdded(a))};b.ResourceAssignmentTracker.prototype.ProcessActivityRemovedRecursively=function(a){if(a){this.OnActivityRemoved(a);a=a.ChildActivities_M();for(var c=0;c<a.length;c++)this.ProcessActivityRemovedRecursively(a[c])}};b.ResourceAssignmentTracker.prototype.Dispose=function(){this._activityPropertyChangedHandler&&this._activityPropertyChangedHandler.Dispose();
this._activityPropertyChangedHandler=null;this._modelNewActivityAddedHandler&&this._modelNewActivityAddedHandler.Dispose();this._modelNewActivityAddedHandler=null;this._modelActivityRemovedHandler&&this._modelActivityRemovedHandler.Dispose();this._modelActivityRemovedHandler=null};b.ResourceAssignmentTracker.prototype.OnActivityRemoved=function(a){for(var c=this.Model.GanttResources_M(),b=0;b<c.length;b++){var e=this.GetResourceActivityList(c[b]._boundObj),g=e.indexOf(a);-1!=g&&(f.observable(e).remove(g,
1),a.PropertyChanged.unsubscribe(this.activity_PropertyChanged,this))}};b.ResourceToActivitiesListConverter=function(){this.Model=null;this.Convert=function(a,c,b,e){if(null==this.Model)throw Error("ResourceToActivitiesListConverter's Convert is called before setting it's Model property.");if(null==a)throw Error("value passed to ResourceToActivitiesListConverter's Convert method must be of type IGanttResource.");return this.Model.GetResourceActivityList(a)}};b.PropertyChangedWithOldValueEventArgs=
function(a,c){c&&(this._oldValue=c);return this};b.PropertyChangedWithOldValueEventArgs.prototype.OldValue=function(){return this._oldValue};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.PropertyChangedWithOldValueEventArgs.prototype,"OldValue",{get:function(){return this._oldValue},set:function(){},enumerable:!0,configurable:!0});b.NewDependencyAddScenarioType={None:"None",UserDragOver:"UserDragOver",UserDragDrop:"UserDragDrop",UserGridEdit:"UserGridEdit"}})(jQuery);
(function(f){function b(a,c){this.ResourceText=a;this._assignments=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);this.ConvertBack=!1;c&&(this.ConvertBack=c);return this}function d(a){this._dict=new RadiantQ.Gantt.Dictionary;this._cachedItem={};this.last=this.first=null;if(a){this._deps=a;for(var b=0;b<a.length;b++)this.ProcessDependency(a[b])}this.GetEnumerator=function(){return new c(this)};return this}function a(a){this.Next=this.Previous=null;this.Activity=a;this._index=-1;return this}
function c(a){this._list=a;this.current=null;return this}var e=RadiantQ.Gantt,g=RadiantQ.Gantt.Model,h=RadiantQ.Gantt.Utils.ValueBinder;g.DataBoundGanttModel=function(a,c,b,d,f,q,r,s,u,w,t,v,z,x,A,y,C,M,B,F,D,H,N,O,L,Q,S,G,I,V,P,U,W,da,ba,aa){this.DependencyFailedNotifierCallBack=aa;this.CreateActivitiesCollection=function(){return new g.DataBoundActivitiesCollection(null,this)};g.BaseGanttModel.prototype.CreateActivitiesCollection=this.CreateActivitiesCollection;this.base=g.BaseGanttModel;g.BaseGanttModel.call(this,
I,V,P);if(!a)return null;this._boundColl=a;this.canInsertPropertyChangeTriggeringPropertiesInData=!1;this.ScheduleFrom=this.ProjectEndDate=this.ProjectStartDate=this._resAssgnStringConverter=null;this._onInit=!0;this.ProcessPredecessorString=g.DataBoundGanttModel.ProcessPredecessorString;this.ActivityUpdated=new ObjectEvent("ActivityUpdated");this.canInsertPropertyChangeTriggeringPropertiesInData=U?!0:!1;this.ScheduleFrom=d;this.ProjectStartDate=c;this.ProjectEndDate=b;this.ValidateDependencySetting_M(f);
this.EnforceDependencyConstraints_M(q);this.AutoCalculateSummaryTaskTimes_M(r);this._customProgressCalculation=G;this.AutoExpandNodes=W;this._resAssgnStringConverter=da;RadiantQ.Gantt.WorkTimeSchedule._cachedStdWorkingTimes=new e.WorkTimeSchedule.CachedContWorkingTimes;RadiantQ.Gantt.WorkTimeSchedule._continuousSchedule=null;RadiantQ.Gantt.WorkTimeSchedule.cachedContWorkingTimes=new e.WorkTimeSchedule.CachedContWorkingTimes;this._resList=H;this.AdjustDurationOnAssignment_M(s);this.LagStringUnitsInHours_M(u);
this.parentActivities=[];a=null;c=0;this.IDBinding=w;this.NameBinding=v;this.SortOrderBinding=t;this.IndentLevelBinding=z;this.StartTimeBinding=x;this.PrefStartTimeBinding=A;this.EffortBinding=y;this.EndTimeBinding=C;this.PredecessorBinding=M;this.ProgressPercentBinding=B;this.ScheduleBinding=F;this.DescBinding=D;this.ResourceNameBinding=N;this.ResourceIDBinding=O;this.ResourceScheduleBinding=L;this.AssignedResourcesBinding=Q;this.WBSIDBinding=S;this._convertResListFromResStringHandler=this.DataBoundActivities_M().ConvertResourceListFromResourceString.subscribe(this.DataBoundGanttModel_ConvertResourceListFromResourceString,
this);w=[];v=new RadiantQ.Gantt.Utils.DelayUpdates;try{for(g.DataBoundGanttModel.IsBuildingModel=!0,null!=this._resList&&this.AddNewResources(this._resList),x=1,t=0;t<this._boundColl.length;t++){var ja=this._boundColl[t],fa=new h(ja,z,null,RadiantQ.Gantt.BindingMode.OneWay,this);fa._value||(fa._value=0);var oa=fa._value;if(0>oa)throw new NotSupportedException("Specified Indent is < 0 and not supported.");var Y=this.CreateNewDataBoundActivity(ja,W);Y.TransferIDFromBoundToSelf();Y.TransferWBSFromBoundToSelf();
if(0==oa||null==a)this._activities.add(Y),a=Y,c=0,this.parentActivities=[];else if(oa>c)a.ChildActivities_M().add(Y),this.parentActivities.push(a),a=Y,c++;else{A=c-oa;for(y=1;y<=A;y++)this.parentActivities.pop();this.parentActivities[this.parentActivities.length-1].ChildActivities_M().add(Y);a=Y;c-=A}Y.TransferDataFromBoundToSelf();Y.PredecessorIndexString_M()&&w.push(Y);null==this.SortOrderBinding&&Y.SortOrder_M(x);x++}}catch(ua){throw window.console&&window.console.error&&window.console.error("DataBoundGanttModel constructor throws "+
ua+" in ID:"+Y.id),Error(ua);}finally{g.DataBoundGanttModel.IsBuildingModel=!1}v.Dispose();z=new RadiantQ.Gantt.Utils.DelayUpdates;try{g.DataBoundGanttModel.IsBuildingModel=!0;for(t=0;t<w.length;t++)this.ProcessPredecessorsAndAddDependencies(w[t]);this.ApplyDependencyConstraintsForAllDependencies();this.Activities_M().UpdateChildWBSIDs()}catch(va){throw window.console&&window.console.error&&window.console.error("DataBoundGanttModel constructor throws "+va),Error(va);}finally{g.DataBoundGanttModel.IsBuildingModel=
!1}z.Dispose();this._onInit=!1;return this};g.DataBoundGanttModel.IsBuildingModel=!1;g.DataBoundGanttModel.prototype=new g.BaseGanttModel;g.DataBoundGanttModel.prototype.ApplyDependencyConstraintsForAllDependencies=function(){if(!0==this.EnforceDependencyConstraints_M())for(var a=new d(this.Dependencies_M()),c=0;c<a.length_M();c++){var b=a.GetItemByIndex(c);this.ApplyDependencyConstraints(b.Activity)}};g.DataBoundGanttModel.prototype.BoundCollAsList_M=function(){return this._boundColl};g.DataBoundGanttModel.prototype.DataBoundActivities_M=
function(){return this.Activities_M()};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(g.DataBoundGanttModel.prototype,"BoundCollAsList",{get:function(){return this.BoundCollAsList_M()},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(g.DataBoundGanttModel.prototype,"DataBoundActivities",{get:function(){return this.DataBoundActivities_M()},set:function(){},enumerable:!0,configurable:!0}));g.DataBoundGanttModel.prototype.ApplyDependencyConstraints=function(a){if(a=this.Dependencies_M()._predsByActivity[a.ID_M()])for(var c=
0;c<a.length;c++)a[c].EnsureActivityOrder()};g.DataBoundGanttModel.prototype.CreateNewDataBoundActivity=function(a,c){return new g.DataBoundActivity(this,a,this.IDBinding,this.SortOrderBinding,this.NameBinding,this.IndentLevelBinding,this.StartTimeBinding,this.PrefStartTimeBinding,this.EffortBinding,this.EndTimeBinding,this.PredecessorBinding,this.ProgressPercentBinding,this.ScheduleBinding,this.DescBinding,this.AssignedResourcesBinding,this.WBSIDBinding,this.AutoExpandNodes)};g.DataBoundGanttModel.prototype.DataBoundGanttModel_ConvertResourceListFromResourceString=
function(a,c){var b=e.ValueConverters.ConverterUtils;if(!1==c.ConvertBack)if(null!=this._resAssgnStringConverter)this._resAssgnStringConverter.Convert(c,null,this,null);else{var g=c.Assignments_M();g.clear();b.ConvertResourceTextToAssignments(c.ResourceText,this.GanttResources_M(),g)}else null!=this._resAssgnStringConverter?this._resAssgnStringConverter.ConvertBack(c,null,this,null):c.ResourceText=b.GetResourcesText(c.Assignments_M(),!0,!1)};g.DataBoundGanttModel.prototype.ProcessPredecessorsAndAddDependencies=
function(a){var c=a.PredecessorIndexString_M();if(c){var b=[],e=[],g=[],d=this.ProcessPredecessorString(c,this.LagStringUnitsInHours_M(),b,e,g,d);a.processingPredString=!0;for(c=0;c<b.length;c++)d=this.GetActivityById(b[c]),null!=d&&(this.CanAddNewDependency(d,a,null,e[c])?this.CreateNewDependencyInternal(d,a,e[c],g[c],!0):null!=this.DependencyFailedNotifierCallBack&&"function"==typeof this.DependencyFailedNotifierCallBack&&this.DependencyFailedNotifierCallBack(d,a,null,e[c]));a.processingPredString=
!1;a.UpdatePredecessorString()}};g.DataBoundGanttModel.prototype.ValidatePredecessorString=function(a,c,b){if(a){c=[];if(b=this.ProcessPredecessorString(a,c,[],[],b))return!1;for(a=0;a<c.Length;a++)if(null==this[c[a]])return!1}return!0};g.DataBoundGanttModel.ProcessPredecessorString=function(a,c,b,e,d,h){h="";if(a){a=a.split(",");for(var f=0;f<a.length;f++){var s=a[f].trim();if(0!=s.length){var u=null,w=!0;-1!=s.indexOf("-")?(u=s.split("-"),w=!1):u=s.split("+");var s=-1,t=RadiantQ.Gantt.DependencyType.FinishToStart,
v=RQTimeSpan.Zero_M(),z=u[0].trim(),s=parseInt(z),x=z.toLowerCase().search("s"),A=z.toLowerCase().search("f");if(0<x||0<A)if(2>z.length){h+="Unexpected string encountered: "+z+". (Valid examples: 10, 10SS, 5FS, etc.)";continue}else x=z.substring(z.length-2,z.length),z=z.substring(0,z.length-2),s=parseInt(z),void 0==s||-1==s?(s=-1,h+=z+" is not a valid ID (number)."):void 0!=s&&-1!=s&&(A=g.DataBoundGanttModel.TryParse(x,t),t=A.Type,!1==A.status&&(h+=x+" is not a valid Dependency Type"));void 0!=s&&
-1!=s?(1<u.length&&(v=0,(v=parseFloat(u[1].trim()))||(h+=u[1].trim()+" is not a valid lag string. Specify a valid number."),v=new RQTimeSpan(0,v*c,0,0,0),!1==w&&(v=v.getEqualNegative())),-1==RQArray.prototype.indexOf.call(b,s)&&(b.push(s),e.push(t),d.push(v))):h+="Unexpected string encountered: "+z+". (Valid examples: 10, 10SS, 5FS, etc.)"}}}return h};g.DataBoundGanttModel.ConstructPredecessorString=function(a,c){var b=RQTimeSpan.Zero_M(),e="";if(null!=a)for(var g=0;g<a.length;g++){var d=a[g],h=d.FromActivity_M().ID_M().toString();
switch(d.Type_M()){case RadiantQ.Gantt.DependencyType.FinishToFinish:h+="FF";break;case RadiantQ.Gantt.DependencyType.StartToFinish:h+="SF";break;case RadiantQ.Gantt.DependencyType.StartToStart:h+="SS"}d=d.Lag_M();d>b?h+="+"+(d.getTotalHours()/c).toString():d<b&&(h+="-"+-(d.getTotalHours()/c).toString());e+=h;e+=","}return e?e.slice(0,e.length-1):e};g.DataBoundGanttModel.TryParse=function(a,c){a=a.toLowerCase();switch(a){case "ss":return{Type:RadiantQ.Gantt.DependencyType.StartToStart,status:!0};
case "sf":return{Type:RadiantQ.Gantt.DependencyType.StartToFinish,status:!0};case "fs":return{Type:RadiantQ.Gantt.DependencyType.FinishToStart,status:!0};case "ff":return{Type:RadiantQ.Gantt.DependencyType.FinishToFinish,status:!0}}return{Type:RadiantQ.Gantt.DependencyType.FinishToStart,status:!1}};g.DataBoundGanttModel.prototype.GetIndent=function(a,c){return ModelExtensions.GetValue(a,c,new StringToIntConverter)};g.DataBoundGanttModel.prototype.CreateNewActivity=function(a,c){null==c&&(c=!0);if(c)if(null!=
this._boundColl)a&&f.observable(this._boundColl).insert(this._boundColl.length,a);else throw new NotSupportedException("The bound ItemsSource should be of type IList to be able to add the new item into it.");var b=this.GetNewSortOrder(),e=this.CreateNewDataBoundActivity(a,this.AutoExpandNodes);e.TransferIDFromBoundToSelf();e.TransferWBSFromBoundToSelf();this.Activities_M().add(e);this._isNewActInit=!0;e.TransferDataFromBoundToSelf();this._isNewActInit=!1;e.SortOrder_M(b);this.OnNewActivityAdded(new g.NewActivityAddedEventArgs(e,
null,-1));this.ProcessPredecessorsAndAddDependencies(e);return e};g.DataBoundGanttModel.prototype.AddNewResources=function(a){var c=this,b=this.GanttResources_M();if(null!=a){f.isArray(a)||(a=[a]);f.observable(a).bind("insert remove replaceAll",function(a,e){if("insert"==a.type){var d=e.items;if(null!=d)for(var h=0;h<d.length;h++)b.Add(new g.DataBoundGanttResource(d[h],c.ResourceNameBinding,c.ResourceIDBinding,c.ResourceScheduleBinding))}});for(var e=0;e<a.length;e++)b.Add(new g.DataBoundGanttResource(a[e],
c.ResourceNameBinding,c.ResourceIDBinding,c.ResourceScheduleBinding));return a}};g.DataBoundGanttModel.prototype.CreateNewDependency=function(a,c,b,e){a=g.BaseGanttModel.prototype.CreateNewDependency.call(this,a,c,b,e);if(!a)return!1;c.OnAddedPredecessorDependency(a);return a};g.DataBoundGanttModel.prototype.Dispose=function(){g.BaseGanttModel.prototype.Dispose.call(this);this._convertResListFromResStringHandler&&(this._convertResListFromResStringHandler.Dispose(),this._convertResListFromResStringHandler=
null);this._schedule=this._resources=null;this._activities&&this._activities.Dispose();this._boundColl=this._activities=null;this.canInsertPropertyChangeTriggeringPropertiesInData=!1;this.ScheduleFrom=this.ProjectEndDate=this.ProjectStartDate=this._resAssgnStringConverter=null;this._onInit=!1;this.ActivityUpdated=this.ProcessPredecessorString=null;this.canInsertPropertyChangeTriggeringPropertiesInData=!1;this._resAssgnStringConverter=this.AutoExpandNodes=this._customProgressCalculation=this.ProjectEndDate=
this.ProjectStartDate=this.ScheduleFrom=null;e.WorkTimeSchedule._cachedStdWorkingTimes=new e.WorkTimeSchedule.CachedContWorkingTimes;e.WorkTimeSchedule._continuousSchedule=null;e.WorkTimeSchedule.cachedContWorkingTimes={};this.WBSIDBinding=this.AssignedResourcesBinding=this.ResourceScheduleBinding=this.ResourceIDBinding=this.ResourceNameBinding=this.DescBinding=this.ScheduleBinding=this.ProgressPercentBinding=this.PredecessorBinding=this.EndTimeBinding=this.EffortBinding=this.PrefStartTimeBinding=
this.StartTimeBinding=this.IndentLevelBinding=this.SortOrderBinding=this.NameBinding=this.IDBinding=this.parentActivities=this._resList=null;RadiantQ.Gantt.WorkTimeSchedule._cached8X5ScheduleTimes=new e.WorkTimeSchedule("8X5 Schedule",e.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider)};g.DataBoundActivitiesCollection=function(a,c){g.ActivitiesCollection.call(this,a,c);this._model=c;this._parent=a;!1==this.isActivitiesCollection&&!1==this instanceof g.ActivitiesCollection&&g.ActivitiesCollection.call(this,
a,c);this.ConvertResourceListFromResourceString=new ObjectEvent("ConvertResourceListFromResourceString");this.OnChildPropertyChanged=function(a,c){g.ActivitiesCollection.prototype.OnChildPropertyChanged.call(this,a,c);if("ID"==c.PropertyName){var b=this._idByActivity.GetItemByKey(a);b&&(this._activityByID.Remove(b),this._idByActivity.Remove(a));b=a.ID_M();this._activityByID.Add(b,a);this._idByActivity.Add(a,b)}};this._indentLevel=0;g.DataBoundActivitiesCollection.prototype.Dispose=this.Dispose=function(){g.ActivitiesCollection.prototype.Dispose.call(this);
this._parent=this._model=null;this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.Dispose();this.ConvertResourceListFromResourceString=null;this._actConvertResListFromResStrHandlerByID&&(this._actConvertResListFromResStrHandlerByID={})};return this};g.DataBoundActivitiesCollection.prototype=new g.ActivitiesCollection;g.DataBoundActivitiesCollection.prototype._activityByID=new RadiantQ.Gantt.Dictionary;g.DataBoundActivitiesCollection.prototype._idByActivity=new RadiantQ.Gantt.Dictionary;
g.DataBoundActivitiesCollection.prototype.IndentLevel_M=function(a){if(0==arguments.length)return this._indentLevel;if(this._indentLevel!=a){this._indentLevel=a;this.OnPropertyChanged("IndentLevel");for(var c=0;c<this.length;c++)this[c].IndentLevel_M(a)}};RadiantQ.CanUseDefineProperty&&Object.defineProperty(g.DataBoundActivitiesCollection.prototype,"IndentLevel",{get:function(){return this.IndentLevel_M()},set:function(a){this.IndentLevel_M(a)},enumerable:!0,configurable:!0});g.DataBoundActivitiesCollection.prototype.SubscribeToChildEvents=
function(a){this._actConvertResListFromResStrHandlerByID||(this._actConvertResListFromResStrHandlerByID={});var c=a.ConvertResourceListFromResourceString.subscribe(this.dbActivity_ConvertResourceListFromResourceString,this);this._actConvertResListFromResStrHandlerByID[a.id]=c;a.IndentLevel_M(this.IndentLevel_M());RadiantQ.Gantt.Model.ActivitiesCollection.prototype.SubscribeToChildEvents.call(this,a)};g.DataBoundActivitiesCollection.prototype.dbActivity_ConvertResourceListFromResourceString=function(a,
c){this.OnConvertResourceListFromResourceString(c)};g.DataBoundActivitiesCollection.prototype.UnsubscribeToChildEvents=function(a){this._actConvertResListFromResStrHandlerByID&&this._actConvertResListFromResStrHandlerByID[a.id]&&(this._actConvertResListFromResStrHandlerByID[a.id].Dispose(),delete this._actConvertResListFromResStrHandlerByID[a.id]);g.ActivitiesCollection.prototype.UnsubscribeToChildEvents.call(this,a)};g.DataBoundActivitiesCollection.prototype.OnConvertResourceListFromResourceString=
function(a){null!=this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.raise(this,a)};g.DataBoundActivitiesCollection.prototype.GetActivityById=function(a){return this._activityByID.GetItemByKey(a)};g.DataBoundActivitiesCollection.prototype.GetIdByActivity=function(a){a=this._idByActivity.GetItemByKey(a);return null==a||void 0==a?-1:a};g.DataBoundActivity=function(a,c,b,e,d,f,r,s,u,w,t,v,z,x,A,y,C){this.CreateChildActivitiesCollection=function(){return new g.DataBoundActivitiesCollection(this,
this.Model)};g.BaseActivity.call(this,a);this.ConvertResourceListFromResourceString=new ObjectEvent("ConvertResourceListFromResourceString");this._indentLevel=-1;this._isOverlapping=!1;a&&c&&(this._boundObject=c,this._boundProps={},this._ignoreSelfUpdates=this.IgnoreBDUpdates=!1,this._idBinder=new h(this._boundObject,b,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._nameBinder=new h(this._boundObject,d,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._sortOrderBinder=new h(this._boundObject,e,null,
RadiantQ.Gantt.BindingMode.TwoWay,a),this._indentBinder=new h(this._boundObject,f,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._startTimeBinder=new h(this._boundObject,r,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._prefStartTimeBinder=new h(this._boundObject,s,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._effortBinder=new h(this._boundObject,u,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._endTimeBinder=new h(this._boundObject,w,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._predIndexBinder=
new h(this._boundObject,t,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._progressPercentBinder=new h(this._boundObject,v,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._scheduleBinder=new h(this._boundObject,z,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._descBinder=new h(this._boundObject,x,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._assignedResourcesBinder=new h(this._boundObject,A,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._wbsIdBinder=new h(this._boundObject,y,null,RadiantQ.Gantt.BindingMode.TwoWay,
a),this._idBinder.IsBound_M()&&(this._boundProps[this._idBinder._binding.Property]=this._idBinder,this._idBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._nameBinder.IsBound_M()&&(this._boundProps[this._nameBinder._binding.Property]=this._nameBinder,this._nameBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._sortOrderBinder.IsBound_M()&&(this._boundProps[this._sortOrderBinder._binding.Property]=this._sortOrderBinder,this._sortOrderBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,
this)),this._indentBinder.IsBound_M()&&(this._boundProps[this._indentBinder._binding.Property]=this._indentBinder,this._indentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._assignedResourcesBinder.IsBound_M()&&(this._boundProps[this._assignedResourcesBinder._binding.Property]=this._assignedResourcesBinder,this._assignedResourcesBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._startTimeBinder.IsBound_M()&&(this._boundProps[this._startTimeBinder._binding.Property]=
this._startTimeBinder,this._startTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._prefStartTimeBinder.IsBound_M()&&(this._boundProps[this._prefStartTimeBinder._binding.Property]=this._prefStartTimeBinder,this._prefStartTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._effortBinder.IsBound_M()&&(this._boundProps[this._effortBinder._binding.Property]=this._effortBinder,this._effortBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._endTimeBinder.IsBound_M()&&
(this._boundProps[this._endTimeBinder._binding.Property]=this._endTimeBinder,this._endTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._predIndexBinder.IsBound_M()&&(this._boundProps[this._predIndexBinder._binding.Property]=this._predIndexBinder,this._predIndexBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._progressPercentBinder.IsBound_M()&&(this._boundProps[this._progressPercentBinder._binding.Property]=this._progressPercentBinder,this._progressPercentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,
this)),this._scheduleBinder.IsBound_M()&&(this._boundProps[this._scheduleBinder._binding.Property]=this._scheduleBinder,this._scheduleBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._descBinder.IsBound_M()&&(this._boundProps[this._descBinder._binding.Property]=this._descBinder,this._descBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._wbsIdBinder.IsBound_M()&&(this._boundProps[this._wbsIdBinder._binding.Property]=this._wbsIdBinder,this._wbsIdBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,
this)),this._isExpanded="function"==typeof C?C(this):C,this._childActivities.ConvertResourceListFromResourceString.subscribe(this.ChildActivity_ConvertResourceListFromResourceString,this));this._ignoreSelfUpdates=!1;this.OnPropertyChanged=function(a,c,b){if(!1==this._ignoreSelfUpdates)try{switch(this.IgnoreBDUpdates=!0,a){case "ActivityName":this._nameBinder.Value_M(this.ActivityName_M());break;case "IndentLevel":this._indentBinder&&this._indentBinder.Value_M(this.IndentLevel_M());break;case "StartTime":this._startTimeBinder.Value_M(this.StartTime_M());
break;case "PreferredStartTime":this._prefStartTimeBinder.Value_M(b);break;case "Effort":this._effortBinder.Value_M(this.Effort_M());break;case "ProgressPercent":this._progressPercentBinder.Value_M(this.ProgressPercent_M());break;case "Schedule":this._scheduleBinder.Value_M(this.Schedule_M());break;case "Description":this._descBinder.Value_M(this.Description_M());break;case "ID":this._idBinder.Value_M(this.ID_M());break;case "SortOrder":this._sortOrderBinder.Value_M(this.SortOrder_M());break;case "PredecessorIndexString":this._predIndexBinder.Value_M(this.PredecessorIndexString_M());
break;case "Assignments":this.UpdateResourcesString();break;case "DefaultWBSID":case "WBSID":case "IsAutoWBSID":this.PersistWBSInData();break}}finally{this.IgnoreBDUpdates=!1}g.BaseActivity.prototype.OnPropertyChanged.call(this,a,c,b);if(!1==this._ignoreSelfUpdates)try{switch(this.IgnoreBDUpdates=!0,a){case "EndTime":null!=this._endTimeBinder&&null!=this._endTimeBinder._binding&&this._endTimeBinder.Value_M(this.EndTime_M());break}}finally{this.IgnoreBDUpdates=!1}};return this};g.DataBoundActivity.prototype=
new g.BaseActivity;g.DataBoundActivity.prototype.DataSource_M=function(){return this._boundObject};g.DataBoundActivity.prototype.IndentLevel_M=function(a){if(0==arguments.length)return this._indentLevel;if(this._indentLevel!=a){var c=this._indentLevel;this._indentLevel=a;this.OnPropertyChanged("IndentLevel",c,a);this._childActivities.IndentLevel_M(a+1)}};g.DataBoundActivity.prototype.IgnoreSelfUpdates_M=function(a){if(0==arguments.length)return this._ignoreSelfUpdates;this._ignoreSelfUpdates=a};g.DataBoundActivity.prototype.IsOverlapping_M=
function(a){if(0==arguments.length)return this._isOverlapping;this._isOverlapping!=a&&(this._isOverlapping=a,this.OnPropertyChanged("IsOverlapping"))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(g.DataBoundActivity.prototype,"DataSource",{get:function(){return this.DataSource_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(g.DataBoundActivity.prototype,"IndentLevel",{get:function(){return this.IndentLevel_M()},set:function(a){this.IndentLevel_M(a)},enumerable:!1,
configurable:!0}),Object.defineProperty(g.DataBoundActivity.prototype,"IgnoreSelfUpdates",{get:function(){return this.IgnoreSelfUpdates_M()},set:function(a){this.IgnoreSelfUpdates_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(g.DataBoundActivity.prototype,"IsOverlapping",{get:function(){return this.IsOverlapping_M()},set:function(a){this.IsOverlapping_M(a)},enumerable:!0,configurable:!0}));g.DataBoundActivity.prototype.BoundData_ValueChanged=function(a,c){if(!this.IgnoreBDUpdates)try{switch(this._ignoreSelfUpdates=
!0,a){case this._idBinder:this.ID_M(parseInt(this._idBinder._value));break;case this._sortOrderBinder:this.SortOrder_M(this._sortOrderBinder._value);break;case this._nameBinder:this.ActivityName_M(this._nameBinder._value);break;case this._startTimeBinder:this._startTimeBinder._value&&this._startTimeBinder._value!=Date.MinValue?(this.StartTime_M(this._startTimeBinder._value),!1==this._prefStartTimeBinder.IsBound_M()&&this.PreferredStartTime_M(this.StartTime_M())):this.StartTime_M(this.GetDefaultStartTime());
break;case this._prefStartTimeBinder:this._prefStartTimeBinder._value!=Date.MinValue&&this._prefStartTimeBinder._value?this.PreferredStartTime_M(this._prefStartTimeBinder._value):this.PreferredStartTime_M(this.GetDefaultStartTime());break;case this._indentBinder:this.IndentLevel_M(this._indentBinder._value);break;case this._progressPercentBinder:var b=parseInt(this._progressPercentBinder._value);this.ProgressPercent_M(isNaN(b)?0:b);break;case this._scheduleBinder:this.Schedule_M(this._scheduleBinder._value);
break;case this._effortBinder:this.Effort_M(this._effortBinder._value);break;case this._endTimeBinder:this._endTimeBinder._isValueUpdating&&(this._ignoreSelfUpdates=!1);this.EndTime_M(this._endTimeBinder._value);break;case this._descBinder:this._description=this._descBinder._value;break;case this._predIndexBinder:this.PredecessorIndexString_M(this._predIndexBinder._value);break;case this._assignedResourcesBinder:this.UpdateResourcesCollection(this._assignedResourcesBinder._value);break;case this._wbsIdBinder:this.ProcessWBSIDInData(this._wbsIdBinder._value);
break}}finally{this._ignoreSelfUpdates=!1}};g.DataBoundActivity.prototype.ProcessWBSIDInData=function(a){var c=!0;!1==(null==a||void 0==a||""==a)&&"*"==a[0]&&1<a.length&&(this.WBSID_M(a.substring(1)),c=!1);this.IsAutoWBSID_M(c)};g.DataBoundActivity.prototype.Dispose=function(){g.BaseActivity.prototype.Dispose.call(this);null!=this._idBinder&&(this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.Dispose(),this.ConvertResourceListFromResourceString=null,this._idBinder.Dispose(),
this._idBinder=null,this._nameBinder.Dispose(),this._nameBinder=null,this._sortOrderBinder.Dispose(),this._sortOrderBinder=null,this._indentBinder.Dispose(),this._indentBinder=null,this._startTimeBinder.Dispose(),this._startTimeBinder=null,this._prefStartTimeBinder.Dispose(),this._prefStartTimeBinder=null,this._effortBinder.Dispose(),this._effortBinder=null,this._endTimeBinder.Dispose(),this._endTimeBinder=null,this._predIndexBinder.Dispose(),this._predIndexBinder=null,this._progressPercentBinder.Dispose(),
this._progressPercentBinder=null,this._scheduleBinder.Dispose(),this._scheduleBinder=null,this._descBinder.Dispose(),this._descBinder=null,this._assignedResourcesBinder.Dispose(),this._assignedResourcesBinder=null,this._wbsIdBinder.Dispose(),this._wbsIdBinder=null,this.Model.canInsertPropertyChangeTriggeringPropertiesInData&&delete this._boundObject.PropertyChanged,delete this._boundObject._boundProps,delete this._boundProps)};g.DataBoundActivity.prototype.GetDefaultStartTime=function(){g.BaseActivity.prototype.GetDefaultStartTime=
this.GetDefaultStartTime;return this.Model.ScheduleFrom==g.ScheduleFrom.ProjectStartDate?this.Model.ProjectStartDate:this.Model.WorkTimeSchedule_M().GetStart(this.Model.ProjectEndDate,this.Effort_M())};g.DataBoundActivity.prototype.ChildActivity_ConvertResourceListFromResourceString=function(a,c){this.OnConvertResourceListFromResourceString(c)};g.DataBoundActivity.prototype.TransferIDFromBoundToSelf=function(){this._idBinder.IsBound_M()&&this.BoundData_ValueChanged(this._idBinder)};g.DataBoundActivity.prototype.TransferWBSFromBoundToSelf=
function(){this._wbsIdBinder.IsBound_M()&&this.BoundData_ValueChanged(this._wbsIdBinder)};g.DataBoundActivity.prototype.TransferDataFromBoundToSelf=function(){this._sortOrderBinder.IsBound_M()&&this.BoundData_ValueChanged(this._sortOrderBinder);this._nameBinder.IsBound_M()&&this.BoundData_ValueChanged(this._nameBinder);this._descBinder.IsBound_M()&&this.BoundData_ValueChanged(this._descBinder);this._scheduleBinder.IsBound_M()&&this.BoundData_ValueChanged(this._scheduleBinder);this._assignedResourcesBinder.IsBound_M()&&
this.BoundData_ValueChanged(this._assignedResourcesBinder);var a=!1;if(this._endTimeBinder.IsBound_M()){this._ignoreSelfUpdates=!0;var c=this._endTimeBinder.Value_M();if(c!=DateTime.MinValue){var b=RQTimeSpan.Zero_M();this._effortBinder.IsBound_M()&&((b=this._effortBinder.Value_M())||(b=RQTimeSpan.Zero_M()),"string"==typeof b&&(b=RQTimeSpan.parse(b)));a=!0;this.SetPreCalculatedEndTime(c,b)}this._ignoreSelfUpdates=!1}this._effortBinder.IsBound_M()&&!a&&this.BoundData_ValueChanged(this._effortBinder);
this._startTimeBinder.IsBound_M()&&(this.BoundData_ValueChanged(this._startTimeBinder),this.UpdateIsMileStone());this._prefStartTimeBinder.IsBound_M()&&this.BoundData_ValueChanged(this._prefStartTimeBinder);this._indentBinder.IsBound_M()&&this.BoundData_ValueChanged(this._indentBinder);this._progressPercentBinder.IsBound_M()&&this.BoundData_ValueChanged(this._progressPercentBinder);this._predIndexBinder.IsBound_M()&&this.BoundData_ValueChanged(this._predIndexBinder);this._wbsIdBinder.IsBound_M()&&
this.BoundData_ValueChanged(this._wbsIdBinder);this.Model.SetTopSortOrder(this.SortOrder_M())};g.DataBoundActivity.prototype.UpdateResourcesString=function(){var a=this._assignments.AsText_M();this._assignedResourcesBinder.Value_M(a)};g.DataBoundActivity.prototype.UpdateResourcesCollection=function(a){this._assignments.AsText_M(a)};g.DataBoundActivity.prototype.OnConvertResourceListFromResourceString=function(a){null!=this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.raise(this,
a)};g.DataBoundActivity.prototype.OnTimesChanged=function(){this._ignoreSelfUpdates&&this._endTimeBinder.IsBound_M()||g.BaseActivity.prototype.OnTimesChanged.call(this)};g.DataBoundActivity.prototype.PersistWBSInData=function(){var a=this.WBSID_M();!1==this.IsAutoWBSID_M()&&(a="*"+a);this._wbsIdBinder.Value_M(a)};g.DataBoundActivity.prototype.CreateNewChildActivity=function(a){a=new RadiantQ.Gantt.Model.DataBoundActivity(this.Model,a,this._idBinder.OriginalBinding,this._sortOrderBinder.OriginalBinding,
this._nameBinder.OriginalBinding,this._indentBinder.OriginalBinding,this._startTimeBinder.OriginalBinding,this._prefStartTimeBinder.OriginalBinding,this._effortBinder.OriginalBinding,this._endTimeBinder.OriginalBinding,this._predIndexBinder.OriginalBinding,_progressPercentBinder.OriginalBinding,this._scheduleBinder.OriginalBinding,this._descBinder.OriginalBinding,this._assignedResourcesBinder.OriginalBinding,this._wbsIdBinder.OriginalBinding);a.TransferIDFromBoundToSelf();a.TransferWBSFromBoundToSelf();
this.ChildActivities_M().Add(a);a.TransferDataFromBoundToSelf();return a};g.ConvertResourceListFromResourceStringEventArgs=b;b.prototype.Assignments_M=function(){return this._assignments};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.prototype,"Assignments",{get:function(){return this.Assignments_M()},set:function(){},enumerable:!0,configurable:!0});g.DataBoundGanttResource=function(a,c,b,e){this.base=g.BaseGanttResource;this.base();this._resScheduleBinder=null;this.DataSource=this._boundObj=
a;null!=b&&(this._resIDbinder=new h(a,b));null!=c&&(this._resNamebinder=new h(a,c),this._resNamebinder.ValueChanged.subscribe(this._resNamebinder_ValueChanged,this));null!=e&&(this._resScheduleBinder=new h(a,e),this._resScheduleBinder.ValueChanged.subscribe(this._resScheduleBinder_ValueChanged));return this};g.DataBoundGanttResource.prototype=new g.BaseGanttResource;g.DataBoundGanttResource.prototype.ResourceID_M=function(){if(0==arguments.length)return this._resIDbinder?this._resIDbinder._value:
this.ResourceName;window.console&&console.error&&console.error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");throw Error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");};g.DataBoundGanttResource.prototype.Schedule_M=function(){if(0==arguments.length)return null!=this._resScheduleBinder?this._resScheduleBinder.Value_M():null;window.console&&console.error&&console.error("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");
throw Error("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(g.DataBoundGanttResource.prototype,"ResourceID",{get:function(){return this.ResourceID_M()},set:function(a){throw Error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");},enumerable:!0,configurable:!0}),Object.defineProperty(g.DataBoundGanttResource.prototype,"Schedule",{get:function(){return this.Schedule_M()},
set:function(){throw new Exception("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");},enumerable:!0,configurable:!0}));g.DataBoundGanttResource.prototype.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a)};g.DataBoundGanttResource.prototype.toString=function(){return this.ResourceName_M()};g.DataBoundGanttResource.prototype._resNamebinder_ValueChanged=function(a,c){this.OnPropertyChanged("ResourceName")};
g.DataBoundGanttResource.prototype._resScheduleBinder_ValueChanged=function(a,c){this.OnPropertyChanged("Schedule")};g.DataBoundGanttResource.prototype.Dispose=function(){this._resNamebinder&&(this._resNamebinder.Dispose(),this._resNamebinder=null);this._resScheduleBinder&&(this._resScheduleBinder.Dispose(),this._resScheduleBinder=null)};g.ScheduleFrom={ProjectStartDate:"ProjectStartDate",ProjectEndDate:"ProjectEndDate"};d.prototype.ProcessDependency=function(c){this._cachedItem={};var b=c.FromActivity_M(),
e=c.ToActivity_M(),g=this._dict[b.ID_M()],d=this._dict[e.ID_M()];if(null==g)null==d?(c=new a(b),this._dict.Add(b,c),this.Append(c),c=new a(e),this._dict.Add(e,c),this.Append(c)):(c=new a(b),this._dict.Add(b,c),this.InsertBefore(c,d));else if(null==d)c=new a(e),this._dict.Add(e,c),this.InsertAfter(c,g);else if(d.Index<g.Index)for(this.InsertBefore(g,d),b=this._deps.GetPredecessors(g.Activity),e=0;e<b.length;e++)g=b[e],g!=c&&this.ProcessDependency(g)};d.prototype.InsertBefore=function(a,c){null!=a.Previous&&
(a.Previous.Next=a.Next);null!=a.Next&&(a.Next.Previous=a.Previous);a==this.last&&(this.last=a.Previous);a.Next=c;a.Previous=c.Previous;null!=c.Previous&&(c.Previous.Next=a);c.Previous=a;null!=a.Previous?a.Index_M(a.Previous.Index_M()+1):(this.first=a,a.Index_M(0))};d.prototype.InsertAfter=function(a,c){a.Next=c.Next;a.Previous=c;null!=c.Next&&(c.Next.Previous=a);c.Next=a;null==a.Next&&(this.last=a);a.Index_M(a.Previous.Index_M()+1)};d.prototype.Append=function(a){null==this.first?(this.first=this.last=
a,a.Index_M(0)):(this.last.Next=a,a.Previous=this.last,a.Index_M(this.last.Index_M()+1),this.last=a)};d.prototype.GetItemByIndex=function(a){for(var c=0;c<this._dict.asArray.length;c++){var b=this._dict.asArray[c];if(this._cachedItem[a])return this._cachedItem[a];this._cachedItem[b._index]=b;if(b._index===a)return b}return null};d.prototype.length_M=function(){return this._dict.length};RadiantQ.CanUseDefineProperty&&Object.defineProperty(d.prototype,"length",{get:function(){return this._dict.length},
set:function(){},configurable:!0});a.prototype.Index_M=function(a){if(0==arguments.length)return this._index;this._index!==a&&(this._index=a,null!=this.Next&&this.Next.Index_M(this._index+1))};RadiantQ.CanUseDefineProperty&&Object.defineProperty(a.prototype,"Index",{get:function(){return this._index},set:function(a){this._index!==a&&(this._index=a,null!=this.Next&&(this.Next.Index=this._index+1))},enumerable:!0,configurable:!0});c.prototype.Current_M=function(){return this.current.Activity};RadiantQ.CanUseDefineProperty&&
Object.defineProperty(c.prototype,"Current",{get:function(){return this.current.Activity},set:function(){},enumerable:!0,configurable:!0});c.prototype.MoveNext=function(){this.current=null==this.current?this._list.first:this.current.Next;return null!=this.current};c.prototype.Reset=function(){this.current=null}})(jQuery);
(function(){RadiantQ.Gantt.View={};RadiantQ.Gantt.DependencyType={FinishToStart:"FinishToStart",StartToStart:"StartToStart",FinishToFinish:"FinishToFinish",StartToFinish:"StartToFinish",None:"None"};var f=RadiantQ.Gantt;RadiantQ.Gantt.View.IDependencyView=function(){NotifyPropertyChanged.apply(this,arguments);this.OnPropertyChanged=NotifyPropertyChanged.prototype.OnPropertyChanged;this._endTime=this._startTime=this.Dependency=null;this.StartItemPosAdjustment={X:0,Y:0};this.EndItemPosAdjustment={X:0,
Y:0};this._endItemYPosAdjustment=this._endItemXPosAdjustment=this._startItemYPosAdjustment=this._startItemXPosAdjustment=0;this.VerticalPositionChanged=null};RadiantQ.Gantt.View.IDependencyView.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.View.IDependencyView.prototype.GetStartItemScheduleToPlotWith=function(b){};RadiantQ.Gantt.View.IDependencyView.prototype.GetEndItemScheduleToPlotWith=function(b){};RadiantQ.Gantt.View.IGanttControlDependencyView=function(){this.GanttControl=this.Dependency=
null};RadiantQ.Gantt.View.GanttDependencyView=function(b,d,a){RadiantQ.Gantt.View.IDependencyView.call(this,arguments);this._onInit=!0;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.notifyChange=function(a,c){!0!=this._onInit&&this.PropertyChanged.raise(this,{PropertyName:a,value:c})};this.GanttControl=a;this._startTime=new Date;this._endTime=new Date;this.Dependency=this.Dependency=b;this.StartActivity=b.FromActivity_M();this.EndActivity=b.ToActivity_M();this.ActivityViewsCollection=
d;this.UpdateTimes();this._depPropertyChangedHandler&&this._depPropertyChangedHandler.Dispose();this._startPropertyChangedHandler&&this._startPropertyChangedHandler.Dispose();this._endPropertyChangedHandler&&this._endPropertyChangedHandler.Dispose();this._startVerticalPositionChangedHandler&&this._startVerticalPositionChangedHandler.Dispose();this._endVerticalPositionChangedHandler&&this._endVerticalPositionChangedHandler.Dispose();this._depPropertyChangedHandler=b.PropertyChanged.subscribe(this.dependency_PropertyChanged,
this);this._startPropertyChangedHandler=this.StartActivity.PropertyChanged.subscribe(this.StartActivity_PropertyChanged,this);this._endPropertyChangedHandler=this.EndActivity.PropertyChanged.subscribe(this.EndActivity_PropertyChanged,this);this._startVerticalPositionChangedHandler=this.StartActivity.VerticalPositionChanged.subscribe(this.Activity_VerticalPositionChanged,this);this._endVerticalPositionChangedHandler=this.EndActivity.VerticalPositionChanged.subscribe(this.Activity_VerticalPositionChanged,
this);this._visibility=this._fromVisibility=this._toVisibility=this._workTimeSchedule=null;if(this._bindings&&this._bindings.length)for(var c=0;c<this._bindings.length;c++)this._bindings[c].Dispose();else this._bindings=[];c=new Binding(this.StartActivity,"IsVisible",this,"FromVisibility",null,RadiantQ.Gantt.BindingMode.TwoWay);this._bindings.push(c);c=new Binding(this.EndActivity,"IsVisible",this,"ToVisibility",null,RadiantQ.Gantt.BindingMode.TwoWay);this._bindings.push(c);c=new Binding(this.GanttControl.options,
"WorkTimeSchedule",this,"WorkTimeSchedule",null,RadiantQ.Gantt.BindingMode.OneWay);this._bindings.push(c);this.UpdateVisibility();this._onInit=!1};RadiantQ.Gantt.View.GanttDependencyView.prototype=new RadiantQ.Gantt.View.IDependencyView;RadiantQ.Gantt.View.GanttDependencyView.prototype.StartTime_M=function(b){if(0==arguments.length)return this._startTime;this._startTime=b;this.notifyChange("StartTime",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndTime_M=function(b){if(0==arguments.length)return this._endTime;
this._endTime=b;this.notifyChange("EndTime",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.DataSource_M=function(){return this.Dependency};RadiantQ.Gantt.View.GanttDependencyView.prototype.DependencyType_M=function(){return this.Dependency.Type_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.IsEndFixedShape_M=function(){return this.EndActivity.IsMilestone_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.IsStartFixedShape_M=function(){return this.StartActivity.IsMilestone_M()};
RadiantQ.Gantt.View.GanttDependencyView.prototype.StartRowIndex_M=function(){return this.GanttControl.IsSortingApplied?this.ActivityViewsCollection._dictActivityVsView[this.StartActivity.id]?this.ActivityViewsCollection._dictActivityVsView[this.StartActivity.id].VisualSortOrder:-1:this.StartActivity.DisplayIndex_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndRowIndex_M=function(){return this.GanttControl.IsSortingApplied?this.ActivityViewsCollection._dictActivityVsView[this.EndActivity.id]?
this.ActivityViewsCollection._dictActivityVsView[this.EndActivity.id].VisualSortOrder:-1:this.EndActivity.DisplayIndex_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.WorkTimeSchedule_M=function(b){if(0==arguments.length)return this._workTimeSchedule;this._workTimeSchedule=b;this.notifyChange("WorkTimeSchedule",b);this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.ToVisibility_M=function(b){if(0==arguments.length)return this._toVisibility;this._toVisibility=b;this.notifyChange("ToVisibility",
b);this.UpdateTimes();this.UpdateVisibility()};RadiantQ.Gantt.View.GanttDependencyView.prototype.FromVisibility_M=function(b){if(0==arguments.length)return this._fromVisibility;this._fromVisibility=b;this.notifyChange("FromVisibility",b);this.UpdateVisibility()};RadiantQ.Gantt.View.GanttDependencyView.prototype.Visibility_M=function(b){if(0==arguments.length)return this._visibility;this._visibility=b;this.notifyChange("Visibility",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.StartItemXPosAdjustment_M=
function(b){if(0==arguments.length){var d=0;this.StartActivity.IsMilestone?d=8:0<this.StartActivity._childActivities.length&&(d=10);switch(this.Dependency._type){case f.DependencyType.StartToFinish:case f.DependencyType.StartToStart:return-1*d;default:return d}}else this._startItemXPosAdjustment=b,this.notifyChange("StartItemXPosAdjustment",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.StartItemYPosAdjustment_M=function(b){if(0==arguments.length)return this._startItemYPosAdjustment;this._startItemYPosAdjustment=
b;this.notifyChange("StartItemYPosAdjustment",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndItemXPosAdjustment_M=function(b){if(0==arguments.length)return this.EndActivity.IsMilestone?this.Dependency._type==RadiantQ.Gantt.DependencyType.StartToStart?-8.5:8.5:0<this.EndActivity._childActivities.length?this.Dependency._type==RadiantQ.Gantt.DependencyType.StartToStart?-10:10:this._endItemXPosAdjustment;this._endItemXPosAdjustment=b;this.notifyChange("EndItemXPosAdjustment",b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndItemYPosAdjustment_M=
function(b){if(0==arguments.length){if(0<this.EndActivity._childActivities.length)if(this.GanttControl.IsSortingApplied){if(this.Dependency._type==RadiantQ.Gantt.DependencyType.FinishToStart&&this.ActivityViewsCollection._dictActivityVsView[this.StartActivity.id].VisualSortOrder>this.ActivityViewsCollection._dictActivityVsView[this.EndActivity.id].VisualSortOrder)return-10}else if(this.Dependency._type==RadiantQ.Gantt.DependencyType.FinishToStart&&this.StartActivity._sortOrder>this.EndActivity._sortOrder)return-10;
return this._endItemYPosAdjustment}this._endItemYPosAdjustment=b;this.notifyChange("EndItemYPosAdjustment",b)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartTime",{get:function(){return this._startTime},set:function(b){this._startTime=b;this.notifyChange("StartTime",b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndTime",{get:function(){return this._endTime},set:function(b){this._endTime=
b;this.notifyChange("EndTime",b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"DataSource",{get:function(){return this.Dependency},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"DependencyType",{get:function(){return this.Dependency.Type},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"IsEndFixedShape",
{get:function(){return this.EndActivity.IsMilestone},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"IsStartFixedShape",{get:function(){return this.StartActivity.IsMilestone},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartRowIndex",{get:function(){return this.StartActivity.DisplayIndex},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,
"EndRowIndex",{get:function(){return this.EndActivity.DisplayIndex},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"WorkTimeSchedule",{get:function(){return this._workTimeSchedule},set:function(b){this._workTimeSchedule=b;this.notifyChange("WorkTimeSchedule",b);this.UpdateTimes()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"ToVisibility",{get:function(){return this._toVisibility},
set:function(b){this._toVisibility=b;this.notifyChange("ToVisibility",b);this.UpdateTimes();this.UpdateVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"FromVisibility",{get:function(){return this._fromVisibility},set:function(b){this._fromVisibility=b;this.notifyChange("FromVisibility",b);this.UpdateVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"Visibility",
{get:function(){return this._visibility},set:function(b){this._visibility=b;this.notifyChange("Visibility",b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartItemXPosAdjustment",{get:function(){return this.StartItemXPosAdjustment_M()},set:function(b){this.StartItemXPosAdjustment_M(b)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndItemXPosAdjustment",{get:function(){return this.EndItemXPosAdjustment_M()},
set:function(b){this.EndItemXPosAdjustment_M(b)},enumerable:!0,configurable:!0}));RadiantQ.Gantt.View.GanttDependencyView.prototype.dependency_PropertyChanged=function(){this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.StartActivity_PropertyChanged=function(b,d){"StartTime"!=d.PropertyName&&"EndTime"!=d.PropertyName||this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndActivity_PropertyChanged=function(b,d){"StartTime"!=d.PropertyName&&"EndTime"!=d.PropertyName||
this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.Activity_VerticalPositionChanged=function(){};RadiantQ.Gantt.View.GanttDependencyView.prototype.GetStartItemScheduleToPlotWith=function(b){return this.StartActivity.GetScheduleToPlotWith(b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.GetEndItemScheduleToPlotWith=function(b){return this.EndActivity.GetScheduleToPlotWith(b)};RadiantQ.Gantt.View.GanttDependencyView.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&
this.VerticalPositionChanged.raise(this)};RadiantQ.Gantt.View.GanttDependencyView.prototype.UpdateTimes=function(){switch(this.Dependency.Type_M()){case f.DependencyType.FinishToFinish:this.StartTime_M(this.Dependency._fromActivity.EndTime_M());this.EndTime_M(this.Dependency._toActivity.EndTime_M());break;case f.DependencyType.StartToFinish:this.StartTime_M(this.Dependency._fromActivity.StartTime_M());this.EndTime_M(this.Dependency._toActivity.EndTime_M());break;case f.DependencyType.StartToStart:this.StartTime_M(this.Dependency._fromActivity.StartTime_M());
this.EndTime_M(this.Dependency._toActivity.StartTime_M());break;default:this.StartTime_M(this.Dependency.FromActivity_M().EndTime_M()),this.EndTime_M(this.Dependency._toActivity.StartTime_M())}};RadiantQ.Gantt.View.GanttDependencyView.prototype.UpdateVisibility=function(){!0==this.ToVisibility_M()&&!0==this.FromVisibility_M()?this.Visibility_M(!0):this.Visibility_M(!1)};RadiantQ.Gantt.View.GanttDependencyView.prototype.Dispose=function(){this._depPropertyChangedHandler&&this._depPropertyChangedHandler.Dispose();
this._depPropertyChangedHandler=null;this._startPropertyChangedHandler&&this._startPropertyChangedHandler.Dispose();this._startPropertyChangedHandler=null;this._endPropertyChangedHandler&&this._endPropertyChangedHandler.Dispose();this._endPropertyChangedHandler=null;this._startVerticalPositionChangedHandler&&this._startVerticalPositionChangedHandler.Dispose();this._startVerticalPositionChangedHandler=null;this._endVerticalPositionChangedHandler&&this._endVerticalPositionChangedHandler.Dispose();this._endVerticalPositionChangedHandler=
null;for(var b=0;b<this._bindings.length;b++)this._bindings[b].Dispose()};RadiantQ.Gantt.View.IParentData=function(){};RadiantQ.Gantt.View.IParentData.prototype.HasParent_M=function(){return this};RadiantQ.Gantt.View.IParentData.prototype.Parent_M=function(){return this};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.View.IParentData.prototype,"HasParent",{get:function(){return this},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.IParentData.prototype,
"Parent",{get:function(){return this},set:function(){},enumerable:!0,configurable:!0}));CollectionOFIDependencyView=function(){};CollectionOFIDependencyView.prototype=new RadiantQ.RQ_CollectionChangeNotifier;RadiantQ.Gantt.GanttFlatDependenciesList=function(b,d,a){this.activityViewsList=d;this.chart=a;this.model=b;this.model.Dependencies.CollectionChanged.subscribe(this.model_NewActivityAdded)};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.CreateFromModel=function(b){this.Clear();for(var d=0;d<
b.Dependencies.length;d++)this.add(this.CreateNew(dependency))};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.CreateNew=function(b){return new GanttDependencyView(b,this.activityViewsList,this.chart)};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.FindView=function(b){for(var d=0;d<this.length;d++)if(this[d].DataSource==b)return d;return-1};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.model_NewActivityAdded=function(b,d){if("remove"==b.type||"replaceAll"==b.type)for(var a=0;a<d.items.length;a++){var c=
this.FindView(d.items[a]);-1!=c&&this.remove(c)}if("insert"==b.type)for(a=0;a<d.items.length;a++)this.add(this.CreateNew(d.items[a]))}})();
(function(f){function b(a,c,b,g){var d=g.field;this.index=a;this.level=c;this.ActivityView=b;this.column=g.columnInfo;this.value=b[d];this.property=d;this.children=[];for(a=d.split(".");0<a.length;)d=a.shift(),d=-1==d.indexOf("_M()")?d:d.replace("_M()","_M"),b="function"==typeof b[d]?b[d]():b[d];this.value=b}function d(a,c,e,g,d,f,k){var l=function(a,c,e,g,f){for(;c<a.length;){var m=new b(c,e,a[c],d);f.push(m);if(c<a.length-1&&(e<a[c+1][g]&&(c=l(a,c+1,e+1,g,m.children)),c<a.length-1&&e>a[c+1][g]))break;
c++}return c<a.length?c:a.length},n=function(a,c){var b=null==c?0:c==RadiantQ.SortingOrder.DESC?-1:1;a.sort(function(a,e){return k&&"function"==typeof k?k(a,e,c):a.value>e.value?1*b:a.value<e.value?-1*b:0});if(0<a.length)for(var e=0;e<a.length;e++)0<a[e].children.length&&n(a[e].children,c);return a},p=function(c,b){for(var e=0;e<c.length;e++)c[e].ActivityView.VisualSortOrder=b,a[b++]=c[e].ActivityView,0<c[e].children.length&&(b=p(c[e].children,b));return b},q=[];l(a,c,e,g,q);return function(a,c){var b=
n(a,c);return p(b,0)}(q,f)}View=RadiantQ.Gantt.View;View.IActivityView=function(){NotifyPropertyChanged.apply(this,arguments);this.OnPropertyChanged=NotifyPropertyChanged.prototype.OnPropertyChanged;this._indentLevel=0;this._isExpanded=!0;this._isParent=this._isReadOnly=this._isMouseIn=this._isSelected=!1;this._isRegularTask=!0;this.ExpandedChanged=new ObjectEvent("ExpandedChanged");this.$chartRow=this.$tableRow=null;return this};View.IActivityView.prototype=new NotifyPropertyChanged;View.IActivityView.prototype.Activity_M=
function(a){if(0==arguments.length)return this._activity;this._activity!=a&&(this._activity=a,this.OnPropertyChanged("Activity",a))};View.IActivityView.prototype.ParentView_M=function(a){if(0==arguments.length)return this._parentView;this._parentView!=a&&(this._parentView=a,this.OnPropertyChanged("ParentView",a))};View.IActivityView.prototype.ParentActivity_M=function(a){if(0==arguments.length)return this._activity.Parent_M();this._activity.Parent_M()!=a&&(this._activity.Parent_M(a),this.OnPropertyChanged("ParentActivity",
a))};View.IActivityView.prototype.IndentLevel_M=function(a){if(0==arguments.length)return this._indentLevel;this._indentLevel!=a&&(this._indentLevel=a,this.OnPropertyChanged("IndentLevel",a))};View.IActivityView.prototype.IsExpanded_M=function(a){if(0==arguments.length)return this._isExpanded;this._isExpanded!=a&&(this._isExpanded=a,this.OnPropertyChanged("IsExpanded",a))};View.IActivityView.prototype.IsReadOnly_M=function(a){if(0==arguments.length)return this._isReadOnly;this._isReadOnly!=a&&(this._isReadOnly=
a,this.OnPropertyChanged("IsReadOnly",a))};View.IActivityView.prototype.IsParent_M=function(a){if(0==arguments.length)return this._isParent;this._isParent!=a&&(this._isParent=a,this.OnPropertyChanged("IsParent",a))};View.IActivityView.prototype.IsRegularTask_M=function(a){if(0==arguments.length)return this._isRegularTask;this._isRegularTask!=a&&(this._isRegularTask=a,this.OnPropertyChanged("IsRegularTask",a))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(View.IActivityView.prototype,"Activity",
{get:function(){return this._activity},set:function(a){this._activity!=a&&(this._activity=a,this.OnPropertyChanged("Activity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"ParentView",{get:function(){return this._parentView},set:function(a){this._parentView!=a&&(this._parentView=a,this.OnPropertyChanged("ParentView",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"ParentActivity",{get:function(){return this._activity.Parent_M()},
set:function(a){this._activity.Parent_M()!=a&&(this._activity.Parent_M(a),this.OnPropertyChanged("ParentActivity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){this._indentLevel!=a&&(this._indentLevel=a,this.OnPropertyChanged("IndentLevel",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsExpanded",{get:function(){return this._isExpanded},set:function(a){this._isExpanded!=
a&&(this._isExpanded=a,this.OnPropertyChanged("IsExpanded",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsReadOnly",{get:function(){return this._isReadOnly},set:function(a){this._isReadOnly!=a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsParent",{get:function(){return this._isParent},set:function(a){this._isParent!=a&&(this._isParent=a,this.OnPropertyChanged("IsParent",
a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsRegularTask",{get:function(){return this._isRegularTask},set:function(a){this._isRegularTask!=a&&(this._isRegularTask=a,this.OnPropertyChanged("IsRegularTask",a))},enumerable:!0,configurable:!0}));View.IActivityView.prototype.IsSelected=function(a){if(void 0==a||null==a)return this._isSelected;this._isSelected!=a&&(this._isSelected=a,this.OnPropertyChanged("IsSelected",a,null,!1),this.UpdateSelection(a))};View.IActivityView.prototype.TableRow=
function(a){if(void 0==a||null==a)return this.$tableRow;a=a instanceof jQuery?a:f(a);if(!this.IsSelected)return 0;if(void 0!=this.$tableRow){this.IsSelected()&&this.addSelectionClassToTable(a);this.IsMouseIn()&&this.addHoverClassToTable(a);var c=this.$tableRow.height();a.height(c)}this.$tableRow=a;!0==this._isParent?this.$tableRow.css("font-weight","bolder"):this.$tableRow.css("font-weight","normal")};View.IActivityView.prototype.ChartRow=function(a){if(void 0==a||null==a)return this.$chartRow;a=
a instanceof jQuery?a:f(a);if(void 0!=this.$chartRow){var c=this.$chartRow.height();a.height(c)}this.$chartRow=a};View.IActivityView.prototype.IsMouseIn=function(a){if(void 0==a||null==a)return this._isMouseIn;this._isMouseIn!=a&&(this._isMouseIn=a,this.UpdateHoverStyle(a))};View.IActivityView.prototype.UpdateHoverStyle=function(a){};View.IActivityView.prototype.addSelectionClassToTable=function(a){a.addClass("rq-row-selected ui-state-active")};View.IActivityView.prototype.addHoverClassToTable=function(a){a.addClass("rq-row-hover ui-state-hover")};
View.IActivityView.prototype.UpdateSelection=function(a){};View.IActivityView.prototype.Dispose=function(){NotifyPropertyChanged.prototype.Dispose.call(this);this._indentLevel=0;this._isExpanded=!0;this._isParent=this._isReadOnly=this._isMouseIn=this._isSelected=!1;this._isRegularTask=!0;this.ExpandedChanged&&this.ExpandedChanged.Dispose();this.$chartRow=this.$tableRow=this.ExpandedChanged=null};View.GanttActivityView=function(a,c,b,g){View.IActivityView.apply(this,arguments);this.IndentLevelBinding=
this.ParentActivityBinding=null;this._activity=this.activity=a;this._isExpanded=a.IsExpanded_M();this.Model=b;this.GC=g;this._isParent=this._ignorePredUpdates=!1;this._indentLevel=0;this._isReadOnly=!1;this.ParentView_M(c);this._childActsCollChangedHandler&&this._childActsCollChangedHandler.Dispose();this._actPropertyChangedHandler&&this._actPropertyChangedHandler.Dispose();this._childActsCollChangedHandler=this.activity.ChildActivities_M().CollectionChanged.subscribe(this.ChildActivities_CollectionChanged,
this);this._actPropertyChangedHandler=this.activity.PropertyChanged.subscribe(this.activity_PropertyChanged,this);this.listenChanges();this.OnChildListChanged();this.OnTimesChanged();if(null!=this.GC.options.IsTaskReadOnlyBinding){var d=this.GC.options.IsTaskReadOnlyBinding,f=d.Property,d=d.Converter,k=f.split("."),l=null;1<k.length?(l=this[k[0]],f=k[1]):l=this;this.IsTaskReadOnlyBinding&&this.IsTaskReadOnlyBinding.Dispose();this.IsTaskReadOnlyBinding=new Binding(l,f,this,"IsReadOnly",{Convert:d})}this.RefreshPredString(!0);
this.UpdateIndentWidth();return this};View.GanttActivityView.prototype=new View.IActivityView;View.GanttActivityView.prototype.IndentWidth_M=function(a){if(0==arguments.length)return this._indentWidth;this._indentWidth!=a&&(this._indentWidth=a,this.OnPropertyChanged("IndentWidth",a))};View.GanttActivityView.prototype.Background_M=function(a){if(0==arguments.length)return this._background;this._background!=a&&(this._background=a,this.OnPropertyChanged("Background",a))};View.GanttActivityView.prototype.ParentView_M=
function(a){if(0==arguments.length)return this._parentView;this._parentView!=a&&(this._parentView=a,null!=a?(this.updateParentViewActivityBinding(),this.updateParentViewIndentLevelBinding()):(this.ParentActivityBinding.Dispose(),this.IndentLevelBinding.Dispose(),this.IndentLevelBinding=this.ParentActivityBinding=null,this.IndentLevel_M(0)),this.OnPropertyChanged("ParentView",a))};View.GanttActivityView.prototype.ParentActivity_M=function(a){if(0==arguments.length)return this.activity.Parent_M();this.activity.Parent_M()!=
a&&(this.activity.Parent_M(a),this.OnPropertyChanged("ParentActivity",a))};View.GanttActivityView.prototype.SelectionFill_M=function(a){if(0==arguments.length)return this._selectionFill;this._selectionFill!=a&&(this._selectionFill=a,this.OnPropertyChanged("SelectionFill",a))};View.GanttActivityView.prototype.SelectionFillOpacity_M=function(a){if(0==arguments.length)return this._selectionFillOpacity;this._selectionFillOpacity!=a&&(this._selectionFillOpacity=a,this.OnPropertyChanged("SelectionFillOpacity",
a))};View.GanttActivityView.prototype.PredecessorIndexString_M=function(a){if(0==arguments.length)return this._predecessorIndexString;if(this._predecessorIndexString!=a){var c=this._predecessorIndexString;this._predecessorIndexString=a;!1==this.UpdateActivityDependencies()?(this._predecessorIndexString=c,this.activity.PredecessorIndexString_M(c)):this.OnPropertyChanged("PredecessorIndexString",a)}};View.GanttActivityView.prototype.Activity_M=function(){return this.activity};View.GanttActivityView.prototype.IndentLevel_M=
function(a){if(0==arguments.length)return this._indentLevel;this._indentLevel!=a&&(this._indentLevel=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IndentLevel",a))};View.GanttActivityView.prototype.IsParent_M=function(a){if(0==arguments.length)return this._isParent;var c=this.TableRow();null!=c&&(!0==a?c.css("font-weight","bolder"):c.css("font-weight","normal"));this._isParent!=a&&(this._isParent=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IsParent",a))};View.GanttActivityView.prototype.IsExpanded_M=
function(a){if(0==arguments.length)return this._isExpanded;this._isExpanded!=a&&(this._isExpanded=a,this.OnExpandedChanged(),this.OnPropertyChanged("IsExpanded",a,null,!1))};View.GanttActivityView.prototype.DisplayIndex_M=function(a){if(0==arguments.length)return this.GC.IsSortingApplied?this.VisualSortOrder:this.activity.DisplayIndex_M();this.GC.IsSortingApplied?this.VisualSortOrder!=a&&(this.VisualSortOrder=a):this.activity.DisplayIndex_M()!=a&&(this.activity.DisplayIndex_M(a),this.OnPropertyChanged("DisplayIndex",
a,null,!1))};View.GanttActivityView.prototype.HasParent_M=function(){return null!=this._parentView};View.GanttActivityView.prototype.Parent_M=function(){return this._parentView};View.GanttActivityView.prototype.IsReadOnly_M=function(a){if(0==arguments.length)return this._isReadOnly;this._isReadOnly!=a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(View.GanttActivityView.prototype,"IndentWidth",{get:function(){return this._indentWidth},
set:function(a){this._indentWidth!=a&&(this._indentWidth=a,this.OnPropertyChanged("IndentWidth",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Background",{get:function(){return this._background},set:function(a){this._background!=a&&(this._background=a,this.OnPropertyChanged("Background",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"ParentView",{get:function(){return this._parentView},set:function(a){this._parentView!=
a&&(this._parentView=a,null!=a?(this.updateParentViewActivityBinding(),this.updateParentViewIndentLevelBinding()):(this.ParentActivityBinding.Dispose(),this.IndentLevelBinding.Dispose(),this.IndentLevel_M(0)),this.OnPropertyChanged("ParentView",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"ParentActivity",{get:function(){return this.activity.Parent_M()},set:function(a){this.activity.Parent_M()!=a&&(this.activity.Parent_M(a),this.OnPropertyChanged("ParentActivity",
a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"SelectionFill",{get:function(){return this._selectionFill},set:function(a){this._selectionFill!=a&&(this._selectionFill=a,this.OnPropertyChanged("SelectionFill",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"SelectionFillOpacity",{get:function(){return this._selectionFillOpacity},set:function(a){this._selectionFillOpacity!=a&&(this._selectionFillOpacity=a,this.OnPropertyChanged("SelectionFillOpacity",
a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"PredecessorIndexString",{get:function(){return this._predecessorIndexString},set:function(a){if(this._predecessorIndexString!=a){var c=this._predecessorIndexString;this._predecessorIndexString=a;!1==this.UpdateActivityDependencies()?(this._predecessorIndexString=c,this.activity.PredecessorIndexString_M(c)):this.OnPropertyChanged("PredecessorIndexString",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,
"Activity",{get:function(){return this.activity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){this._indentLevel!=a&&(this._indentLevel=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IndentLevel",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsParent",{get:function(){return this._isParent},set:function(a){var c=this.TableRow();
null!=c&&(!0==a?c.css("font-weight","bolder"):c.css("font-weight","normal"));this._isParent!=a&&(this._isParent=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IsParent",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsExpanded",{get:function(){return this._isExpanded},set:function(a){this._isExpanded!=a&&(this._isExpanded=a,this.OnExpandedChanged(),this.OnPropertyChanged("IsExpanded",a,null,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,
"DisplayIndex",{get:function(){return this.DisplayIndex_M()},set:function(a){this.DisplayIndex_M(a)},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"HasParent",{get:function(){return null!=this.ParentView},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Parent",{get:function(){return this.ParentView},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,
"IsReadOnly",{get:function(){return this._isReadOnly},set:function(a){this._isReadOnly!=a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))},enumerable:!0,configurable:!0}));View.GanttActivityView.prototype.listenChanges=function(){};View.GanttActivityView.prototype.updateParentViewActivityBinding=function(){this.ParentActivityBinding&&this.ParentActivityBinding.Dispose();this.ParentActivityBinding=new Binding(this.ParentView_M(),"Activity",this,"ParentActivity",null,null)};View.GanttActivityView.prototype.updateParentViewIndentLevelBinding=
function(){this.IndentLevelBinding&&this.IndentLevelBinding.Dispose();this.IndentLevelBinding=new Binding(this.ParentView_M(),"IndentLevel",this,"IndentLevel",RadiantQ.Gantt.ValueConverters.ParentViewToIndentConverter,null)};View.GanttActivityView.prototype.UpdateIsRegularTask=function(){this.IsParent_M()||this.activity.IsMilestone_M()?this.IsRegularTask_M(!1):this.IsRegularTask_M(!0)};View.GanttActivityView.prototype.OnChildListChanged=function(){this.IsParent_M(0<this.activity.ChildActivities_M().length);
this.UpdateIsRegularTask()};View.GanttActivityView.prototype.ChildActivities_CollectionChanged=function(a,c){this.OnChildListChanged()};View.GanttActivityView.prototype.UpdateIndentWidth=function(){this.IndentWidth_M(RadiantQ.Gantt.LevelToIndentWidth(this._indentLevel,this._isParent))};View.GanttActivityView.prototype.RefreshPredString=function(a){try{this._ignorePredUpdates=a,this.PredecessorIndexString_M(this.activity.PredecessorIndexString_M())}finally{this._ignorePredUpdates=!1}};View.GanttActivityView.prototype.OnExpandedChanged=
function(){var a=new RadiantQ.Gantt.Utils.DelayUpdates;this.ExpandedChanged.isSubscribed()&&this.ExpandedChanged.raise(this,this);a.Dispose()};View.GanttActivityView.prototype.activity_PropertyChanged=function(a,c){"StartTime"==c.PropertyName||"EndTime"==c.PropertyName||"Assignments"==c.PropertyName?this.OnTimesChanged():"PredecessorIndexString"==c.PropertyName&&this.RefreshPredString(this.Model._dependencies._inCollectionChanged)};View.GanttActivityView.prototype.OnTimesChanged=function(){this.UpdateIsRegularTask()};
View.GanttActivityView.prototype.ConvertToMilestone=function(a,c){a.PreferredStartTime_M(a.StartTime_M());var b=new RadiantQ.Gantt.SetEndTimeAction(c,a,a.StartTime_M(),a.PreferredStartTime_M(),a.EndTime_M(),!1);c.ActionManager.RecordAction(b)};View.GanttActivityView.prototype.ConvertToNormalTask=function(a,c){var b=c.BottomTwoHeaders;null!=b&&(b=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(b[0].BaseTimeScaleType,1),b=a.StartTime_M().addTimeSpan(b),b=new RadiantQ.Gantt.SetEndTimeAction(c,
a,b,a.PreferredStartTime_M(),a.EndTime_M(),!1),c.ActionManager.RecordAction(b))};View.GanttActivityView.prototype.ReparentView=function(a){a!=this.ParentView_M()&&(this.ParentView_M(null),this.ParentView_M(a),null!=a&&!1==a.IsExpanded_M()&&(a.IsExpanded_M(!0),a.IsExpanded_M(!1)))};View.GanttActivityView.prototype.UpdateActivityDependencies=function(){if(!this._ignorePredUpdates){var a=this.PredecessorIndexString_M();this.UpdateActivityDependency(this.Model,this.activity,a,RadiantQ.Gantt.Model.NewDependencyAddScenarioType.UserGridEdit);
this.RefreshPredString(!0)}};View.GanttActivityView.prototype.UpdateActivityDependency=function(a,c,b,g){g=new ObservableCollection;var d=new ObservableCollection,f=new ObservableCollection,k=RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(b,a.LagStringUnitsInHours_M(),g,d,f,k);if(k)return alert(k),!1;b=new RadiantQ.Gantt.Utils.DelayUpdates;a.Dependencies_M().ClearDependencies(c);for(var k=new RadiantQ.Gantt.Utils.DelayUpdates,l=0;l<g.length;l++){var n=a.GetActivityById(g[l]);null!=
n&&a.CanAddNewDependency(n,c,null,d[l])&&a.CreateNewDependency(n,c,d[l],f[l])}k.Dispose();b.Dispose()};View.GanttActivityView.prototype.toString=function(){var a=this.ParentActivity_M();return""+this.activity.ActivityName_M()+", Parent: "+(a?a.ActivityName_M():"null")+", Indent:"+this.IndentLevel_M()+", IsParent:"+this.IsParent_M()+""};View.GanttActivityView.prototype.Dispose=function(){View.IActivityView.prototype.Dispose.call(this);this._childActsCollChangedHandler&&(this._childActsCollChangedHandler.Dispose(),
this._childActsCollChangedHandler=null);this._actPropertyChangedHandler&&(this._actPropertyChangedHandler.Dispose(),this._actPropertyChangedHandler=null);this.IsTaskReadOnlyBinding&&(this.IsTaskReadOnlyBinding.Dispose(),this.IsTaskReadOnlyBinding=null);this.ParentActivityBinding&&(this.ParentActivityBinding.Dispose(),this.ParentActivityBinding=null);this.IndentLevelBinding&&(this.IndentLevelBinding.Dispose(),this.IndentLevelBinding=null)};View.GanttFlatActivitiesList=function(a,c){RadiantQ.RQ_CollectionChangeNotifier.apply(this,
arguments);this._dictActivityVsView=new RadiantQ.Gantt.Dictionary;this._dictChildActivityViews=new RadiantQ.Gantt.Dictionary;this.model=a;this.gantt=c;this._collectionChangedHandler&&this._collectionChangedHandler.Dispose();this._collectionChangedHandler=this.CollectionChanged.subscribe(this.OnCollectionChanged,this);this.RowVisiblityChanged=new ObjectEvent("RowVisiblityChanged");this._ignoreRemove=!1;var b=this;this.view_ExpandedChanged=function(a,c){b.HoldtriggeringChange=!0;!1==a._isExpanded?b.ClearHierarchyFromList(a):
b.AddHierarchyToList(a);b.gantt.RefreshDisplayIndex();b.OnRowVisiblityChanged(a,a._isExpanded);b.HoldtriggeringChange=!1};this.model&&(this.CreateFromModel(),this.ListenToModelChanges());this._init=!0};View.GanttFlatActivitiesList.prototype=new RadiantQ.RQ_CollectionChangeNotifier;View.GanttFlatActivitiesList.prototype.OnCollectionChanged=function(a,c){if("remove"==a.type||"replaceAll"==a.type)for(var b=0;b<c.items.length;b++)this.UnsubscribeToActivityView(c.items[b]);if("insert"==a.type)for(b=0;b<
c.items.length;b++)this.SubscribeToActivityView(c.items[b]);this._init&&this.gantt.RefreshDisplayIndex()};View.GanttFlatActivitiesList.prototype.model_ChildCollectionChanged=function(a,c){if("insert"==c.type)for(var b=c.NewItems,g=0;g<b.length;g++){var d=b[g],d=this._dictActivityVsView[d.id];this._updateChildsOnAdd(d,this._dictActivityVsView[a.id])}else if("remove"==c.type)for(b=c.OldItems,g=0;g<b.length;g++)d=b[g],(d=this._dictActivityVsView[d.id])&&this._updateChildsOnRemove(d)};View.GanttFlatActivitiesList.prototype.GetActivityViewByID=
function(a){a=this.model.GetActivityById(a);return this.GetIActivityView(a)};View.GanttFlatActivitiesList.prototype.CreateFromModel=function(){this.clear();if(null!=this.model)for(var a=0;a<this.model._activities.length;a++)!1==this.model._activities[a].IsFilteredOut_M()&&this.AddActivities(this.model._activities[a],null,this.model,0)};View.GanttFlatActivitiesList.prototype.AddActivities=function(a,c,b,g){c=new View.GanttActivityView(a,c,b,this.gantt);this.add(c);if(c.IsParent_M()&&a.IsExpanded_M()){a=
a.ChildActivities_M();for(var d=0;d<a.length;d++)!1==a[d].IsFilteredOut_M()&&this.AddActivities(a[d],c,b,g+1)}};View.GanttFlatActivitiesList.prototype.model_NewActivityAdded=function(a,c){var b=c.NewActivity_M(),g=0;if(0<b.ChildActivities_M().length)throw"Encountered a newly added activity which already has children. This is not supported.";var d=null,f=c.Parent_M();if(null!=f){d=this[f];if(null==d)throw"Encountered a new activity whose parent activity is not already in the view.";g=d._indentLevel+
1}this.AddActivities(b,d,this.model,g)};View.GanttFlatActivitiesList.prototype._newActivityAddedHandler=null;View.GanttFlatActivitiesList.prototype._actsChildCollectionChangedHandler=null;View.GanttFlatActivitiesList.prototype.ListenToModelChanges=function(){this._newActivityAddedHandler=this.model.NewActivityAdded.subscribe(this.model_NewActivityAdded,this);this._actsChildCollectionChangedHandler=this.model._activities.ChildCollectionChanged.subscribe(this.model_ChildCollectionChanged,this)};View.GanttFlatActivitiesList.prototype.remove=
function(a){this[a].DisplayIndex_M(-1);RadiantQ.RQ_CollectionChangeNotifier.prototype.remove.apply(this,arguments)};View.GanttFlatActivitiesList.prototype.Move=function(a,c,b){var g=new RadiantQ.Gantt.Utils.DelayUpdates,d,f;try{this._ignoreRemove=!0;if(b>a){d=a;for(var k=0;k<c;k++){var l=this[a];this.remove(a);this.insert(b-1,l)}f=b-c}else{d=b;for(k=0;k<c;k++)l=this[a+k],this.remove(a+k),this.insert(b+k,l);f=b}this.gantt.Model.UpdateSortOrderFrom(this[d].activity);return f}finally{this._ignoreRemove=
!1}g.Dispose()};View.GanttFlatActivitiesList.prototype.ClearHierarchyFromList=function(a){var c=this.indexOf(a),b=a.activity._indentLevel,g=this.length,d=this._getLastChildActivityViewIndex(a),d=d>c?d:c;for(d++;d<g;){var f=this[d];if(f._parentView==a||f.activity._indentLevel>b){var k=-1;0<f.activity._childActivities.length&&(k=this._getLastChildActivityViewIndex(f));d=k>d?k:d;d++}else break}c++;this.splice(c,d-c);a.activity.IsExpanded_M(!1)};View.GanttFlatActivitiesList.prototype.ClearHierarchyFromListRecursive=
function(a,c){if(a.activity.IsExpanded_M()){var b=this.length;for(c++;c<b;)if(b=this[c],b.ParentView_M()==a)this.ClearHierarchyFromListRecursive(b,c),this.RemoveAndDispose(c),b=this.length;else break}};View.GanttFlatActivitiesList.prototype.RemoveAndDispose=function(a){var c=0,c="number"===f.type(a)?a:this.indexOf(a);this.remove(c)};RadiantQ.Gantt.addMethod(View.GanttFlatActivitiesList.prototype,"AddHierarchyToList",function(a){a.activity.IsExpanded_M(!0);this.AddHierarchyToList(a,{value:-1})});RadiantQ.Gantt.addMethod(View.GanttFlatActivitiesList.prototype,
"AddHierarchyToList",function(a,c){-1==c.value&&(c.value=this.indexOf(a));if(a.activity.IsExpanded_M()){a.Activity_M().ChildActivities_M();var b=[],g=c.value+1;this.GetHierarchyToListRecursive(a,b);0<b.length&&this.merge(g,b)}});View.GanttFlatActivitiesList.prototype.GetHierarchyToListRecursive=function(a,c){var b=a.activity._childActivities;if(0<b.length)for(var g=0;g<b.length;g++){var d=b[g];if(!1==d.IsFilteredOut_M()){var f=new RadiantQ.Gantt.View.GanttActivityView(d,a,this.model,this.gantt);c.push(f);
!0==d._isExpanded&&0<d._childActivities.length&&this.GetHierarchyToListRecursive(f,c)}}return c};View.GanttFlatActivitiesList.prototype.GetIActivityView=function(a){return this._dictActivityVsView.GetItemByKey(a)};View.GanttFlatActivitiesList.prototype.clear=function(a){for(a=0;a<this.length;a++)this.UnsubscribeToActivityView(this[a]),RadiantQ.RQ_CollectionChangeNotifier.prototype.splice.apply(this,a,1)};View.GanttFlatActivitiesList.prototype.Contains=function(a){return this._dictActivityVsView.Contains(a)};
View.GanttFlatActivitiesList.prototype.SubscribeToActivityView=function(a){this._dictActivityVsView.Add(a.activity,a);this.actViewExpandedChangedHandlers||(this.actViewExpandedChangedHandlers={});this.actViewExpandedChangedHandlers[a.activity.id]&&this.actViewExpandedChangedHandlers[a.activity.id].Dispose();var c=a.ExpandedChanged.subscribe(this.view_ExpandedChanged);this.actViewExpandedChangedHandlers[a.activity.id]=c;this._updateChildsOnAdd(a)};View.GanttFlatActivitiesList.prototype.UnsubscribeToActivityView=
function(a){this._dictActivityVsView.Remove(a.activity);this.actViewExpandedChangedHandlers[a.activity.id]?(this.actViewExpandedChangedHandlers[a.activity.id].Dispose(),delete this.actViewExpandedChangedHandlers[a.activity.id]):a.ExpandedChanged.unsubscribe(this.view_ExpandedChanged);this._updateChildsOnRemove(a)};View.GanttFlatActivitiesList.prototype._updateChildsOnAdd=function(a,c){if(c=c||a.ParentView_M()){var b=this._dictChildActivityViews[c.activity.id];b?b.push(a):this._dictChildActivityViews.Add(c.activity,
[a])}};View.GanttFlatActivitiesList.prototype._updateChildsOnRemove=function(a){var c=a.ParentView_M();if(c){var b=this._dictChildActivityViews[c.activity.id];b&&(0==b.length?this._dictChildActivityViews.Remove(c.activity):0<b.length&&(a=RQArray.prototype.indexOf.call(b,a),b.splice(a,1)))}};View.GanttFlatActivitiesList.prototype._getLastChildActivityViewIndex=function(a){if(!a.activity.IsExpanded_M())return-1;for(;null!=a;){var c=this._dictChildActivityViews[a.activity.id];if(c&&0<c.length)a=c[c.length-
1]||null;else break}return this.indexOf(a)};View.GanttFlatActivitiesList.prototype.OnRowVisiblityChanged=function(a,c){this.RowVisiblityChanged.isSubscribed()&&this.RowVisiblityChanged.raise(this,a,c)};View.GanttFlatActivitiesList.prototype.RefreshDisplayIndexOfChildren=function(){this.RefreshDisplayIndexOfChildrenPrivate()};View.GanttFlatActivitiesList.prototype.RefreshDisplayIndexOfChildrenPrivate=function(){for(var a=-1,c=0;c<this.length;c++)a++,this[c].DisplayIndex_M(a)};View.GanttFlatActivitiesList.prototype.VisibleIndexOf=
function(a){return a.DisplayIndex_M()};View.GanttFlatActivitiesList.prototype.Dispose=function(){this._newActivityAddedHandler&&(this._newActivityAddedHandler.Dispose(),this._newActivityAddedHandler=null);this._actsChildCollectionChangedHandler&&(this._actsChildCollectionChangedHandler.Dispose(),this._actsChildCollectionChangedHandler=null);this._collectionChangedHandler&&(this._collectionChangedHandler.Dispose(),this._collectionChangedHandler=null);this.CollectionChanged.unsubscribe(this.OnCollectionChanged,
this);this.IsTaskReadOnlyBinding&&this.IsTaskReadOnlyBinding.Dispose();for(var a=0;a<this.length;a++){var c=this[a];c.Dispose();this.actViewExpandedChangedHandlers&&this.actViewExpandedChangedHandlers[c.activity.id]&&(this.actViewExpandedChangedHandlers[c.activity.id].Dispose(),delete this.actViewExpandedChangedHandlers[c.activity.id])}RQArray.prototype.splice.call(this,0,this.length);this.actViewExpandedChangedHandlers={}};RadiantQ.SortingOrder={ASC:"asc",DESC:"desc",NULL:null};View.GanttFlatActivitiesList.prototype.RQSort=
function(a,c,e){var g=a.field,h=this.gantt;if(null==c){h.IsSortingApplied=!1;var f=this.map(function(c,e){a.field="Activity.SortOrder";return new b(e,c.IndentLevel,c,a)});f.sort(function(a,b){return e&&"function"==typeof e?e(a,b,c):a.value>b.value?1:a.value<b.value?-1:0});var k=this;f.map(function(a,c){k[c]=a.ActivityView});""===g&&VW.Grid.GCSorter.reset(this.gantt.grid)}else h.IsSortingApplied=!0,d(this,0,0,"IndentLevel",a,c,e);h.RefreshDisplayIndex();h.grid.Refresh();h.options.ShowGanttChart&&h.GetGanttChartInstance().UpdateGanttComponents(!0)};
View.GanttFlatDependenciesList=function(a,c,b){RadiantQ.RQ_CollectionChangeNotifier.call(this);this.model=a;this.activityViewsList=c;this.gantt=b;this._depViewByActivity={};this.model&&(this._collectionChangedHandler&&this._collectionChangedHandler.Dispose(),this._collectionChangedHandler=this.model._dependencies.CollectionChanged.subscribe(this.model_NewDependencyAdded,this),this.CreateFromModel(a))};View.GanttFlatDependenciesList.prototype=new RadiantQ.RQ_CollectionChangeNotifier;View.GanttFlatDependenciesList.prototype.CreateFromModel=
function(a){for(var c=0;c<a._dependencies.length;c++)this.add(this.CreateNew(a._dependencies[c]))};View.GanttFlatDependenciesList.prototype.DependencyViewByActivityID_M=function(){return this._depViewByActivity};RadiantQ.CanUseDefineProperty&&Object.defineProperty(View.GanttFlatDependenciesList.prototype,"DependencyViewByActivityID",{get:function(){return this._depViewByActivity}});View.GanttFlatDependenciesList.prototype._depViewByActivity={};View.GanttFlatDependenciesList.prototype.CreateNew=function(a){var c=
new RadiantQ.Gantt.View.GanttDependencyView(a,this.activityViewsList,this.gantt),b=a._fromActivity.ID_M();a=a._toActivity.ID_M();var g=this._depViewByActivity[b];g?-1==g.indexOf(c)&&g.push(c):(g=new RQArray,g.push(c),this._depViewByActivity[b]=g);(b=this._depViewByActivity[a])?-1==b.indexOf(c)&&b.push(c):(b=new RQArray,b.push(c),this._depViewByActivity[a]=b);return c};View.GanttFlatDependenciesList.prototype.FindView=function(a){for(var c=0;c<this.length;c++)if(this[c].Dependency==a)return c;return-1};
View.GanttFlatDependenciesList.prototype.model_NewDependencyAdded=function(a,c){if("remove"==c.type||"replaceAll"==c.type)for(var b=0;b<c.OldItems.length;b++){var g=c.OldItems[b],d=this.FindView(g);if(-1!=d){var f=this[d];this.splice(d,1);var k=g._fromActivity.ID_M(),l=this._depViewByActivity[k];l&&(d=l.indexOf(f),-1!=d&&l.splice(d,1),0==l.length&&delete this._depViewByActivity[k]);g=g._toActivity.ID_M();if(k=this._depViewByActivity[g])d=k.indexOf(f),-1!=d&&k.splice(d,1),0==k.length&&delete this._depViewByActivity[g]}}if("insert"==
c.type)for(b=0;b<c.NewItems.length;b++)g=c.NewItems[b],f=this.CreateNew(g),this.add(f)};View.GanttFlatDependenciesList.prototype.Dispose=function(){for(var a=0;a<this.length;a++)this[a].Dispose();this._collectionChangedHandler&&(this._collectionChangedHandler.Dispose(),this._collectionChangedHandler=null);this.model&&(this.model.Dependencies&&this.model.Dependencies.CollectionChanged.unsubscribe(this.model_NewDependencyAdded,this),this.model._dependencies&&this.model._dependencies.CollectionChanged.unsubscribe(this.model_NewDependencyAdded,
this),this.model.NewActivityAdded&&this.model.NewActivityAdded.unsubscribe(this.model_NewActivityAdded,this));this.activityViewsList&&(this.activityViewsList=null)}})(jQuery);
(function(f){RadiantQ.Gantt.OverlappedTasksRenderingOptimization={None:"None",ShrinkHeight:"ShrinkHeight"};Array.max=function(b,a){var c;return null!=a||a?(f.each(b,function(b,g){if(0==b||c<g.options[a])c=g.options[a]}),c):Math.max.apply(Math,b)};Array.min=function(b,a){var c;return null!=a?(f.each(b,function(b,g){if(0==b||c>g.options[a])c=g.options[a]}),c):Math.min.apply(Math,b)};window.FindByPropertyValueInArray=function(b,a,c){var e=-1;f.each(b,function(g,h){b[a]===c&&(e=g)});return e};window.RemoveByValueInArray=
function(b,a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}};window.ContainsValueInArray=function(b,a){for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1};window.FirstOrDefaultEndityInArray=function(b,a){for(var c=0;c<b.length;c++)if(b[c].options.Data===a)return b[c];return null};var b=function(d){d.OverlappingBlock=this;this.StartTime=d.options.StartTime;this.EndTime=d.options.EndTime;var a=d.options.GanttChart.options.CustomOverlappingBlockFn;a&&"function"==typeof a&&a(this,
d);this.entities=[];this.entities.push(d);this.IsOverlappingWithExcludeCurrentItem=function(a){for(var b=0;b<this.entities.length;b++){var g=this.entities[b];if(g!=a&&(g.options&&(g=g.options),a.StartTime>=g.StartTime&&a.StartTime<g.EndTime||a.EndTime>g.StartTime&&a.EndTime<=g.EndTime||g.StartTime>a.StartTime&&g.EndTime<a.EndTime))return!0}return!1};this.IsOverlapping=function(c,e){var g=c.options,g=c.OverlappingBlock?c.OverlappingBlock:new b(c),d=!1,f=c.options.GanttChart.options.AreTasksOverlappingCallBack;
if(e){if(g.StartTime>=this.StartTime&&g.StartTime<this.EndTime)d=!0;else if(g.EndTime>this.StartTime&&g.EndTime<=this.EndTime)d=!0;else if(this.StartTime>g.StartTime&&this.EndTime<g.EndTime)d=!0;else if(this.StartTime.equals(g.StartTime)||this.EndTime.equals(g.EndTime))d=!0;f&&"function"==typeof f&&(d=f(this.entities[0],c,d));return d}for(index=0;index<this.entities.length;index++){var k=this.entities[index],l=k.options,l=k.OverlappingBlock?k.OverlappingBlock:new b(k);if(c.options.Parent.element.options.Data==
k.options.Parent.element.options.Data){if(g.StartTime>=l.StartTime&&g.StartTime<l.EndTime)d=!0;else if(g.EndTime>l.StartTime&&g.EndTime<=l.EndTime)d=!0;else if(l.StartTime>g.StartTime&&l.EndTime<g.EndTime)d=!0;else if(l.StartTime.equals(g.StartTime)||l.EndTime.equals(g.EndTime))d=!0;a&&"function"==typeof a&&(g.StartTime>this.StartTime&&g.StartTime<this.EndTime||g.EndTime>this.StartTime&&g.EndTime<this.EndTime)&&(d=!0);f&&"function"==typeof f&&(d=f(k,c,d));return d}}return!1};this.AddEntity=function(a){this.entities.push(a);
this.UpdateTimeLength()};this.RemoveEntity=function(a){(a=this.entities.Remove(a))&&0<this.entities.length&&this.UpdateTimeLength();return a};this.UpdateTimeLength=function(){if(0<this.entities.length){for(var a=this.StartTime,b=this.EndTime,g=0;g<this.entities.length;g++){var d=this.entities[g];d.OverlappingBlock.StartTime<a&&(a=d.OverlappingBlock.StartTime);d.OverlappingBlock.EndTime>b&&(b=d.OverlappingBlock.EndTime)}this.StartTime=a;this.EndTime=b}};this.ComputeIndicesAndHeight=function(){var a=
this.GetBlocksFromEntities();for(i=0;i<a.length;i++){var b=a[i];for(index=0;index<b.entities.length;index++){var g=b.entities[index],d=RadiantQ.FlexyGantt.TaskItemControl;0==g.Height&&(g.Height=g.element.height());var d=g.Height-2*d.MarginForBars-(d.TaskBar_BorderTopWidth+d.TaskBar_BorderBottomWidth),f=a.length>d&&d?d:a.length;void 0!=g.element.attr("heightSetBySrc")||isNaN(parseInt(g.element[0].style.height))?g._updateTaskItem(i,d/f,1<a.length,f):g._updateTaskItem(i,parseInt(g.element[0].style.height),
1<a.length)}}};this.GetBlocksFromEntities=function(){for(var a=[],e=0;e<this.entities.length;e++){for(var g=this.entities[e],d=!1,f=0;f<a.length;f++){var k=a[f];if(!1==k.IsOverlapping(g,!1)){k.AddEntity(g);d=!0;break}}!1==d&&a.push(new b(g))}return a};this.GetRowCount=function(){return this.GetBlocksFromEntities().length};return this};window.OverlappingBlock=b})(jQuery);
(function(f,b){var d=function(a,b){for(var g=a.replace(/\\\}/g,"__CURLY__").replace(/\\#/g,"__SHARP__").replace(/\$\{([^}]*)\}/g,"#=($1)#").split("#"),d="var x=",f=0;f<g.length;f++){var k;k=g[f];k=0===f%2?"'"+k.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'":"="===k.charAt(0)?"+("+k.substring(1)+")+":";"+k+";x+=";d+=k}d+=";return x;";d=d.replace(/__CURLY__/g,"}").replace(/__SHARP__/g,"#");g=new Function("data",d);return b?g(b):
g};d.hasValueInWindow=function(a){var e;e=window;a=a.split(".");for(var g=0;g<a.length;g++)"undefined"!=typeof e&&(e=e[a[g]+"_M"]?e[a[g]+"_M"]():e[a[g]]);e=!0==b.isFunction(e)?!0:void 0==e?!1:void 0;return!1==e?!1:!0};d.checkProperty=function(a){return" "==a?!0:!1};d.getterCache={};d.getter=function(a,b){var g=null;null==d.getterCache[a]&&(g=""==a?"return d;":" if(d."+a+" != undefined)  if(typeof(d."+a+") ==='function')   return d."+a+"(); else return d."+a+";else if("+d.hasValueInWindow(a)+" ){ if(typeof "+
a+" === 'function')    return "+a+"(d); else return "+a+";}else return null;",g=Function("d",g),d.getterCache[a]=g);g=d.getterCache[a];return b?g(b):g};d.setterCache={};d.setter=function(a,b,g){var h=null;null==d.setterCache[a]&&(h=" if(d."+a+" != undefined) if(typeof(d."+a+") ==='function') d."+a+"(value);else d."+a+"= value;else if("+d.hasValueInWindow(a)+" ){ if(typeof "+a+" === 'function') "+a+"(d,value); else "+a+"=value;}else d."+a+"= value;",h=Function("d","value",h),d.setterCache[a]=h);h=
d.setterCache[a];return b?h(b,g):h};f.Default={};f.Default.Template={};var a=function(a){var b=/name/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'},
a=function(a){var b=/name/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${name(data)}</div>'};
f.Template=d;f.Default.Template.ProjectGanttExpandableTextBlockTemplate=function(a){var b=/data.Activity.ActivityName/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${data.Activity_M().ActivityName_M()}</div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text">${data.Activity_M().ActivityName_M()}</div>'};f.Default.Template.FlexyGanttExpandableTextBlockTemplate=
a;f.Default.Template.ProjectGanttExpandableTextboxEditor=function(a){var b=/data.Activity.ActivityName/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text"><input data-bind=value:Activity_M().ActivityName_M /></div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${data.IndentWidth_M()}px"></div><div style="width: 12px; display: ${data.IsParent_M() ? "block" :"none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${ data.IsExpanded_M() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text"><input data-bind=value:Activity_M().ActivityName_M /></div>'};
f.Default.Template.FlexyGanttExpandableTextBoxEditor=function(a){var b=/name/g;return a?'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text"><input data-bind="value:name"/></div>'.replace(b,
a):'<div class="rq-grid-expand-indentWidth" style="height: 1px; width: ${RadiantQ.Gantt.LevelToIndentWidth(data.Level(), data.IsParentType())}px"></div><div style="width: 12px; display: ${data.IsParentType() ? (data.HierarchicalItem.CanShowCue() ? "block" :"none") : "none" }" class="arrowContainer">   <div onclick="RadiantQ.Gantt.ExpanderOnclick(this,event)" id="arrow" class="${data.HierarchicalItem.IsExpanded() ? " rq-grid-expand-arrow rq-grid-collapse-arrow": "rq-grid-expand-arrow"} rq-Ignore-click"></div></div> <div class="rq-grid-expander-text"><input data-bind="value:name"/></div>'};
f.Gantt.ExpanderOnclick=function(a,e){var g=b(a).closest("tr.rq-grid-row"),d=g.closest("table.ui-grid-body-table").find("tbody").data("VWGrid"),g=d.GetDataFromRow(g);if(g instanceof f.FlexyGantt.FlexyNodeData)g.HierarchicalItem._forceToCreateNewChildList=!0,g.HierarchicalItem.IsExpanded(!g.HierarchicalItem.IsExpanded()),g.HierarchicalItem._forceToCreateNewChildList=!1,d.RefreshItem(g);else{var m=new f.Gantt.ExpandCollapseActivityViewAction(g.GC,g,!g.IsExpanded_M());g.GC.ActionManager.RecordAction(m)}d.InEditMode&&
d.closeCell();void 0!=e.stopPropagation&&e.stopPropagation()}})(RadiantQ,jQuery);
(function(f,b){function d(a,b,g,d,f){var k=this;k.data=d;k.Value=g;k.getMethodName=a.data("getvaluename")||"value";k.setMethodName=a.data("setvaluename")||"value";k.$elem=a;k.role=b;k.UpdatedValue=null;k.getOptions=function(a){return a.data("options")||{}};k.SetValueToElement=function(){if(null==this.data&&!1==this.initChange)return null;var a=this.Value.getter(d);if(!1==this.compareObject(this.UpdatedValue,a))this.$elem[this.role](this.setMethodName,a)};this.compareObject=function(a,c){return null!=
a&&null!=c&&a.equals&&c.equals?a.equals(c):a==c};k.initChange=!1;var l=this.getOptions(a);d&&(l[f]=function(){!1==k.initChange&&(k.initChange=!0,k.UpdatedValue=k.GetValueToElement(),!1==k.compareObject(k.UpdatedValue,g.getter(d))&&g.setter(d,k.UpdatedValue),k.initChange=!1)});a[b](l);k.initChange=!0;k.SetValueToElement();k.initChange=!1}d.prototype.GetValueToElement=function(){return this.$elem[this.role](this.getMethodName)};f.Binder=function(){};var a=f.Binder;f.Binder.value=function(a,b,g,h){var f=
a.data("valueupdate")||"change",k=null;g.getter(h);a.val(g.getter(h));b?k=new d(a,b,g,h,f):a.bind(f,function(){var b=a.val();g.setter(h,b)});this.refresh=function(){if(k)k.SetValueToElement();else{var b=g.getter(h);a.val()!=b&&a.val(b)}}};f.Binder.text=function(a,b,g,d){this.element=a;this.value=g;this.data=d;this.init=function(){this.element.text(this.value.getter(this.data))};this.refresh=function(){this.init()}};a.attr=function(a,e,g,d,f){b(a).attr(f,g.getter(d));this.refresh=function(){b(a).attr(f,
g.getter(d))}};a.style=function(a,e,g,d,f){b(a).css(f,g.getter(d));this.refresh=function(){b(a).css(f,g.getter(d))}};f.Bind=function(c,e){this.data=e;this.bindings=[];this.bindAllElem=function(a){var c=this.bindElement(a);c&&(this.bindings=c.concat(this.bindings));c=a.childNodes;c=a.children;a=[];for(var b=0;b<c.length;b++)a[b]=c[b];for(b=0;b<a.length;b++)this.bindAllElem(a[b])};this.getValue=function(a,c){return a&&c.value?(getter=f.Template.getter(c.value),setter=f.Template.setter(c.value),value=
{getter:getter,setter:setter,field:c.value}):null};this.createBindings=function(c,e,g){var d=[];c=b(c);var n=a[g.key],p=g.value;!1==p instanceof Array&&(p=[g]);for(var q=0;q<p.length;q++){var r=p[q],s=this.getValue(this.data,r),n=a[r.key]?a[r.key]:a[g.key];if(null==n)return;n=new n(c,e,s,this.data,r.key);n.init&&n.init(c,e,s,this.data,r.key);r=r.value.split(".");s=null;1<r.length?(n.property=r.pop(),r=r.join("."),s=f.Template.getter(r,this.data)):(s=this.data,n.property=r[0]);s&&n.refresh&&s.PropertyChanged&&
(n.PropertyName=n.property,r=s.PropertyChanged.subscribe(function(a,c){var b=c.PropertyName;if(-1!=b.indexOf("_M")||-1!=this.PropertyName.indexOf("_M"))b=b.replace(/_M/ig,""),this.PropertyName=this.PropertyName.replace(/_M/ig,"");this.PropertyName==b&&this.refresh(a,c)},n),n.destroyEvent=r);d.push(n)}return d};this.bindElement=function(a){var c=a.getAttribute("data-bind"),b=a.getAttribute("data-role"),e=[];if(c)for(var c=this.parseBind(c),g=0;g<c.length;g++)var d=this.createBindings(a,b,c[g]),e=e.concat(d);
return e};this.parseBind=function(a){var c=[],b,e,g,d,f;a=a.replace(/\s/g,"");f=a.match(/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g);a=0;for(b=f.length;a<b;a++)e=f[a],g=e.indexOf(":"),d=e.substring(0,g),e=e.substring(g+1),"{"==e.charAt(0)&&(e=this.parseBind(e)),c.push({key:d,value:e});return c};var g=c[0];c.bindObject&&unbind(c);this.bindAllElem(g);g.bindObject=this.bindings};f.Unbind=function(a){var b=a[0].bindObject;if(b){for(var g=0;g<b.length;g++)b[g].destroyEvent&&b[g].destroyEvent.Dispose(),b[g].destroy&&
b[g].destroy();delete a[0].bindObject}}})(RadiantQ,jQuery);var RQStyle=RadiantQ.Gantt.DefaultStyles;
(function(f,b){var d=RadiantQ.Template||kendo.template;f.ScaleRendererBase={options:{name:"ScaleRendererBase",ViewStartTime:null,ViewEndTime:null,headerInfo:null,BaseTimeUnitWidth:25,BaseTimeScaleType:null,timeUnits:[],GanttChart:null,ViewWidth:null,WorkTimeSchedule:null},guid:function(){var a="",c,b,g=Math;for(c=0;32>c;c++){b=16*g.random()|0;if(8==c||12==c||16==c||20==c)a+="-";a+=(12==c?4:16==c?b&3|8:b).toString(16)}return a},_requiresTimeUnitText:!0,_floorToHour:function(a){return new Date(a.getFullYear(),
a.getMonth(),a.getDate(),a.getHours(),0,0)},_floorToMinute:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0)},_floorWidth:function(a,c){a+=c;var b=Math.floor(a);return{FlooredWidth:b,Residue:a-b}},drawHourHeader:function(a,c,b){var g=RadiantQ.Gantt,d=Date.CultureInfo.formatPatterns.shortDate;this.element.show();var f=0,k=0;for(c=c.clone();0>=c.compareTo(b);){var l=1;0<c.getMinutes()&&(l=1-c.getMinutes()/60);try{var f={Value:f},n={Value:k};if(!1==this.AddTimeUnit(c,
l,g.TimeScaleType.Hours,a,g.TimeScaleType.Hours,c.toString("HH"),c.toString(d)+" "+c.toString("htt"),f,n))break;c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),0,0);c=c.clone().addHours(1)}finally{f=f.Value,k=n.Value}}},drawDayHeader:function(a,c,b){var g=RadiantQ.Gantt,d=Date.CultureInfo.formatPatterns.shortDate,f=0,k=0,l=new Date,k=0;this.element.show();for(l=c.clone();0>=l.compareTo(b);){c=1;var n=l.clone().clearTime();0>n.compareTo(l)&&(c=1-(new RQTimeSpan(l-n)).getTotalMinutes()/
1440);try{var f={Value:f},p={Value:k};if(!1==this.AddTimeUnit(l,c,g.TimeScaleType.Days,a,g.TimeScaleType.Days,l.getDate(),l.toString(d),f,p))break;l=n.clone().addDays(1)}finally{f=f.Value,k=p.Value}}},UpdateTimeUnits:function(){this.options.timeUnits.length=0;var a=this.options;if(!(null==a.ViewStartTime||null==a.ViewEndTime||null==a.headerInfo||0<=a.ViewStartTime.compareTo(a.ViewEndTime))){var c=RadiantQ.Gantt,e=RadiantQ.Gantt.Utils,g=a.ViewStartTime.clone(),d=a.ViewEndTime.clone(),f=Date.CultureInfo.formatPatterns.shortDate,
k=RQTimeSpan.Zero_M(),l=[],n=0,k=0;switch(a.headerInfo.Type){case c.TimeScaleType.Days:this.drawDayHeader(l,g,d);break;case c.TimeScaleType.Weeks:var k=new RQTimeSpan(d.clone()-g.clone()),d=k.getTotalDays(),p=g.clone();this.element.show();for(k=0;0<d;){var q=e.TimeComputingUtils.GetRemainingDaysInWeek(p),p=p.clone().addDays(q-7);23==p.getHours()&&(p=new Date(p.getFullYear(),p.getMonth(),p.getDate()+1,1,0,0));q=q>d?d:q;try{var r={Value:n},s={Value:k};if(!1==this.AddTimeUnit(p,q,c.TimeScaleType.Days,
l,c.TimeScaleType.Weeks,p.toString("MMMM dd, yyyy"),p.toString(f)+" - "+p.clone().addDays(6).toString(f),r,s))break}finally{n=r.Value,k=s.Value}d-=q;r=p.clone().addDays(7);23==r.getHours()&&(r=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1,1,0,0));p=r}break;case c.TimeScaleType.Months:k=new RQTimeSpan(d-g);d=k.getTotalDays();p=g.clone();this.element.show();for(k=0;0<d;){q=e.TimeComputingUtils.GetRemainingDaysInMonth(p);q=q>d?d:q;try{if(r={Value:n},s={Value:k},!1==this.AddTimeUnit(p,q,c.TimeScaleType.Days,
l,c.TimeScaleType.Months,p.toString("MMMM yyyy"),(new Date(p.getFullYear(),p.getMonth(),1)).toString(f)+" - "+(new Date(p.getFullYear(),p.getMonth()+1,0,23,59,59)).toString(f),r,s))break}finally{n=r.Value,k=s.Value}d-=q;p=e.TimeComputingUtils.GetStartOfNextMonth(p.clone())}break;case c.TimeScaleType.Years:k=new RQTimeSpan(d-g);d=k.getTotalDays();p=g.clone();this.element.show();for(k=0;0<d;){q=e.TimeComputingUtils.GetRemainingDaysInYear(p.clone());q=q>d?d:q;try{if(r={Value:n},s={Value:k},!1==this.AddTimeUnit(p.clone(),
q,c.TimeScaleType.Days,l,c.TimeScaleType.Years,p.toString("yyyy"),p.toString(f)+" - "+p.clone().addYears(1).addDays(-1).toString(f),r,s))break}finally{n=r.Value,k=s.Value}d-=q;p=e.TimeComputingUtils.GetStartOfNextYear(p.clone())}break;case c.TimeScaleType.Minutes:k=new RQTimeSpan(d-g);d=k.getTotalMinutes();this.element.show();for(e=k=0;e<d;e++)try{if(r={Value:n},s={Value:k},q=g.clone().addMinutes(e),!1==this.AddTimeUnit(q,1,c.TimeScaleType.Minutes,l,c.TimeScaleType.Minutes,q.toString("mm"),q.toString(f)+
" "+q.toString("htt"),r,s))break}finally{n=r.Value,k=s.Value}break;case c.TimeScaleType.Hours:this.drawHourHeader(l,g,d);break;case c.TimeScaleType.Custom:if(null==this.options.headerInfo.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in a TimeScaleHeaderDefinition of type TimeScaleType.Custom.";a=this.options.headerInfo.CustomTimeScaleTypeHint.EquivalentType;b(this.element).show();n=k=0;q=g.clone();g=new RadiantQ.Gantt.ProvideCustomTimeIntervalsEventArgs(q.clone(),d.clone());this.options.headerInfo.ProvideCustomTimeIntervals.raise(this,
g);0==g.TimeIntervals.length&&g.TimeIntervals.push(d.clone());g.TimeIntervals.splice(0,0,q.clone());for(e=0;e<g.TimeIntervals.length;e++){var q=g.TimeIntervals[e],q=a<c.TimeScaleType.Hours?this._floorToMinute(q):q,u=e<g.TimeIntervals.length-1?g.TimeIntervals[e+1]:d.clone(),u=a<c.TimeScaleType.Hours?rqTCUtils.GetTimeSpan(q,this._floorToMinute(u)):rqTCUtils.GetTimeSpan(q,u);if(u<RQTimeSpan.Zero_M())throw"Custom time interval entries are out of order.";a>c.TimeScaleType.Hours&&(a=c.TimeScaleType.Hours);
u=a>=c.TimeScaleType.Hours?u.getTotalHours():u.getTotalMinutes();try{r={Value:n},s={Value:k},p=this.AddTimeUnit(q,u,a,l,a,q.getDate().toString(),q.toString(f)+" "+q.toString("htt"),r,s)}finally{n=r.Value,k=s.Value}q=l[l.length-1];this.options.headerInfo.CustomTimeScaleTypeHint.EquivalentType>c.TimeScaleType.Days&&(q.IsWorkingTime=!0);if(!1==p)break}}this.options.timeUnits=l}},GetWorkTimeSchedule:function(){return this.options.WorkTimeSchedule},AddTimeUnit:function(a,c,e,g,d,f,k,l,n){var p=this.options,
q=RadiantQ.Gantt,r=RadiantQ.Gantt.Utils,s=p.headerInfo,u=f,w=null;f=!1;this._requiresTimeUnitText&&s.ProvideCustomHeaderText.isSubscribed()&&(f=!0);if(!f&&null!=s._textFormat&&""!=s._textFormat)if(-1!=s._textFormat.indexOf("|"))w=s._textFormat,u=" ";else try{u=a.toString(s.TextFormat)}catch(t){}q=new q.TimeUnit;q.Text=u;q.TextFormat=w;q.ToolTipText=k;q.Type=d;c=this._floorWidth(r.TimeComputingUtils.ConvertToUnitsOfBaseType(s.BaseTimeScaleType,e,c)*p.BaseTimeUnitWidth,n.Value);q.Width=c.FlooredWidth;
n.Value=c.Residue;q.IsWorkingTime=r.TimeComputingUtils.IsWorkingTime(a,d,this.GetWorkTimeSchedule());q.Tag=a.clone();q.guid=this.guid();g.push(q);d=p.ViewWidth;if(2==g.length&&g[0].Width<p.GanttChart.options.MinTimeUnitWidthForHeaderVisibility&&g[1].Width<p.GanttChart.options.MinTimeUnitWidthForHeaderVisibility)return b(this.element).hide(),!1;g=g[g.length-1];g.Width>d&&(g.Width=d);l.Value+=g.Width;f&&(a=new RadiantQ.Gantt.ProvideCustomerHeaderTextEventArgs(a,q.Text,q.Width),s.ProvideCustomHeaderText.raise(s,
a),q.Text=a.Text,a.TooltipText&&(q.ToolTipText=a.TooltipText));return l.Value>=d?(l=g.Width-(l.Value-d),0<l&&(g.Width=l),!1):!0},_create:function(){this._refresh()},_refresh:function(){var a=this.options;this.UpdateTimeUnits();this.element.width(a.ViewWidth);this.renderUnites(this.options.timeUnits)},_destroy:function(){this.element.empty()},_refreshWidth:function(a){b(this.element).width(a)},_setOption:function(a,c){this.widgetBaseSetOption.apply(this,arguments);"ViewWidth"==a&&this._refreshWidth(c);
this._refresh()}};f.TimeSpanHeader={options:{name:"TimeSpanHeader"},renderUnites:function(a){var c;c='<div class="rq-timeUnit-div '+window.radiantQclasses.headerClass+'" data-uid=${data.guid} title="${data.ToolTipText }" style="width: ${ data.Width}px;height:100%;"><div >${ data.Text }</div></div>';for(var b=this.options.headerInfo.Template||d(c),g="<div style='height:100%' >",f=0;f<a.length;f++)c=a[f],this.guidList[c.guid]=c,c.Width&&(g+=b(c));this.element[0].innerHTML=g+"</div>"},_renderTimeUnit:function(a,
c,e){var g=b('<div class="rq-timeUnit-div '+window.radiantQclasses.headerClass+'" style="width: '+a.Width+'px;height:100%;" ></div>'),d=g[0];c.appendChild(d);c=RQStyle.ZeroStyle;var f=b("<table ></table>")[0];f.style.cssText=c;var k=f.insertRow(-1),l=k.insertCell(-1);k.style.cssText=c;l.style.cssText=c;l.align="center";l.vAlign="middle";l.width="100%";l.height="100%";b(l).attr({align:"center",vAlign:"middle",title:a.ToolTipText});var n=this,p=RadiantQ.Gantt.TimeRangeHighlightBehavior;g.mouseenter(function(){a.IsHighlighted(!0);
(n.options.GanttChart.options.TimeRangeHighlightBehavior&p.HighlightInChartOnHeaderMouseHover)==p.HighlightInChartOnHeaderMouseHover&&g.addClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass)});g.mouseleave(function(){a.IsHighlighted(!1);(n.options.GanttChart.options.TimeRangeHighlightBehavior&p.HighlightInChartOnHeaderMouseHover)==p.HighlightInChartOnHeaderMouseHover&&g.removeClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass)});d.appendChild(f);e&&this.options.headerInfo.RenderCallBack.raise(this,
{timeUnit:a,headerUnit:g})},CreateSmartDateTimeText:function(a,c){a[this.getChildWidgetName("SmartDateTimeText")]({text:c.Text,timeUnit:c})},guidList:[],prevTaget:null,prevTimeunit:null,addHoverStyle:function(a,c){null!=this.prevTaget&&this.removeHoverStyle(this.prevTaget,this.prevTimeunit);a&&!0==a.hasClass("rq-timeUnit-div")&&(this.prevTaget=a,this.prevTimeunit=c,c.IsHighlighted(!0),a.addClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass))},removeHoverStyle:function(a,c){a.hasClass("rq-tsh-timeUnit-hover")&&
(c.IsHighlighted(!1),a.removeClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass),this.prevTimeunit=this.prevTaget=null)},_create:function(){RQStyle.init();var a=this,c=RadiantQ.Gantt.TimeRangeHighlightBehavior;a.guidList=[];a.element.height(a.options.headerInfo.HeaderHeight);a.baseCreate.apply(a,arguments);a.element.mouseover(function(e){if((a.options.GanttChart.options.TimeRangeHighlightBehavior&c.HighlightInChartOnHeaderMouseHover)==c.HighlightInChartOnHeaderMouseHover&&(e=b(e.target).closest("div.rq-timeUnit-div").not(".rq-tsh-timeUnit-hover"),
e.length)){var d=e.data("uid");d&&a.addHoverStyle(e,a.guidList[d])}});a.element.mouseleave(function(c){a.addHoverStyle(null,null)});var e=a.options;e.headerInfo.PropertyChanged.clear();e.headerInfo.PropertyChanged.subscribe(a.PropertyChange,a)},PropertyChange:function(a,c){"TextFormat"==c.PropertyName&&this._refresh()},UpdateTimeUnits:function(){var a=this.options,c=a.headerInfo,b=a.ViewStartTime,g=a.ViewEndTime;null!=c&&c.TimeUnitsCache.ClearTimeUnitsCacheForRange(b,g);this.ScaleRendererBaseUpdateTimeUnits();
null!=c&&null!=a.timeUnits&&0<a.timeUnits.length&&c.TimeUnitsCache.SetTimeUnitsCacheForRange(b,g,a.timeUnits)},_setOption:function(a,c){this.baseSetOption.apply(this,arguments)}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){var d=RadiantQ.Gantt;f.GanttChartBackground={options:{name:"GanttChartBackground",WorkTimeSchedule:null,WorkingTimeBackground:null,NonWorkingTimeBackground:null,BottomTwoHeaders:null,ViewStartTime:null,ViewEndTime:null,BaseTimeUnitWidth:25,BaseTimeScaleType:null,timeUnits:[],GanttChart:null,ViewWidth:null,Parent:null,TimeRangeHighlightBehavior:null},_create:function(){this._refresh();this._subscribeEvents()},_subscribeEvents:function(){var a=this,c=this.options.Parent.element;null!=
c&&(c.bind("ganttchartrefreshui.GanttChartBGRefreshUI",function(c,b){a._ConvertGanttChartOptionsToChatBGOptions(b.options);a.draw()}),c.bind("ganttchartoptionchanged.GanttChartBGRefreshUI",function(c,b){a._ConvertGanttChartOptionsToChatBGOptions(b.options)}))},_refresh:function(){this.element.empty();this.draw()},propertyChanged:function(a,c){if("IsHighlighted"==c.PropertyName){var b=a.IsHighlighted(),g=this.element.find("#"+a.guid);b?this.addHoverStyle(g,a):this.removeHoverStyle(g,a)}},prevTaget:null,
prevTimeunit:null,addHoverStyle:function(a,c){null!=this.prevTaget&&this.removeHoverStyle(this.prevTaget,this.prevTimeunit);if(a&&!0==a.hasClass("ui-GanttTimeUnitBackground-unit")){this.prevTaget=a;this.prevTimeunit=c;var b=a.data("level");a.hasClass("rq-gc-nonWorking-background")&&a.removeClass(window.radiantQclasses.highlightingClass);1==b&&a.css("background","");a.addClass("rq-Background-timeUnit-hover "+window.radiantQclasses.hoveringClass)}},removeHoverStyle:function(a,c){if(a.hasClass("rq-Background-timeUnit-hover")){var b=
a.data("level");a.hasClass("rq-gc-nonWorking-background")&&a.addClass(window.radiantQclasses.highlightingClass);1==b&&a.css("background","transparent");a.removeClass("rq-Background-timeUnit-hover "+window.radiantQclasses.hoveringClass);this.prevTimeunit=this.prevTaget=null}},drawUnits:function(a,c,b){var g="<div class='ui-GanttChartScaleBackground ui-GanttChart-Background' >",d="",f,k;if(null!=a)for(var l=0;l<a.length;l++)d="ui-GanttTimeUnitBackground-unit ",f=a[l],f.PropertyChanged.subscribe(this.propertyChanged,
this),0==c?(d+=f.IsWorkingTime?"ui-WorkingTimeBackground ":"rq-gc-nonWorking-background "+window.radiantQclasses.highlightingClass,k='"height: '+b+"px;z-index: "+c+";width: "+f.Width+'px;"'):1==c&&(d+="rq-gc-timeunit-border ui-widget-content",k='"height: '+b+"px;z-index: "+c+";width: "+f.Width+'px; border-left-width:1px;"'),g+="<div id="+f.guid+" data-level="+c+' class="'+d+'" style='+k+" ></div>";return g+"</div>"},draw:function(){var a=this.options,c=a.BottomTwoHeaders;if(null!=c){for(var b=this.element.parent("div.rq-gc-chartArea-div").height(),
g="",d=0;d<c.length;d++)var f=c[d],k=f.TimeUnitsCache.GetTimeUnitsCacheForRange(a.ViewStartTime,a.ViewEndTime),f=RadiantQ.Gantt.BottomTwoHeaderDefinitions.GetIndex(f),g=g+this.drawUnits(k,f,b);this.element[0].innerHTML=g}},_ConvertGanttChartOptionsToChatBGOptions:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart=
{MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};this.options.ViewWidth=a.ViewWidth;this.options.BottomTwoHeaders=a.BottomTwoHeaders;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.NonWorkingTimeBackground=a.NonWorkingTimeBackground;this.options.TimeRangeHighlightBehavior=a.TimeRangeHighlightBehavior},_setOption:function(a,c){this.widgetBaseSetOption.apply(this,arguments)},_destroy:function(){this.element.empty();
var a=this.options.Parent.element;a.unbind("ganttchartrefreshui.GanttChartBGRefreshUI");a.unbind("ganttchartoptionchanged.GanttChartBGRefreshUI")}};f.GanttChartCustomRangeBackground={options:{name:"GanttChartCustomRangeBackground",CustomChartBackgroundRanges:null,Parent:null},_create:function(){var a=this;a._refresh();var c=a.options.Parent.element;null!=c&&(c.bind("ganttchartrefreshui.CustomBGRefreshUI",function(c,b){a._ConvertGanttChartOptionsToChatBGOptions(b.options);a._refresh()}),c.bind("ganttchartoptionchanged.CustomBGRefreshUI",
function(c,b){a._ConvertGanttChartOptionsToChatBGOptions(b.options)}));null!=a.options.CustomChartBackgroundRanges&&a.options.CustomChartBackgroundRanges.DiscreetCustomRanges.CollectionChanged.subscribe(function(){this._refresh()},a)},_refresh:function(){this.element.empty();this.element.width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){var a=this.options,c=a.ViewStartTime.clone(),b=a.ViewEndTime.clone(),g=a.BaseTimeUnitWidth,d=a.BaseTimeScaleType;if(!(null==c||null==
b||null==a.CustomChartBackgroundRanges||0<=c.compareTo(b))){for(var f=[],k=[],l=0;l<a.CustomChartBackgroundRanges.DiscreetCustomRanges.length;l++)k.push(a.CustomChartBackgroundRanges.DiscreetCustomRanges[l]);var n=new RadiantQ.Gantt.CustomRangeInformationEventArgs(c,b);a.CustomChartBackgroundRanges.RaiseProvideRepeatingCustomRanges(n);a=RadiantQ.Gantt.Utils.TimeComputingUtils;for(l=0;l<n.CustomRanges.length;l++)k.push(n.CustomRanges[l]);for(l=0;l<k.length;l++)if(n=k[l],0<n.EndTime.compareTo(c)&&(0>
n.EndTime.compareTo(b)||0>n.StartTime.compareTo(b))){var p=a.GetTimeSpan(n.StartTime.clone(),n.EndTime.clone()),q=RadiantQ.Gantt.TimeScaleType.Hours,p=p.getTotalHours(),r=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(d,q,p)*g,p=a.GetTimeSpan(c.clone(),n.StartTime.clone()),p=p.getTotalHours(),q=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(d,q,p)*g;f.push(new RadiantQ.Gantt.CustomRangeTimeUnit(r,q,n))}c="";for(l=0;l<f.length;l++)c+=this._renderCustomChartBackGround(f[l]);
this.element[0].innerHTML=c}},_renderCustomChartBackGround:function(a){return'<div class=ui-customBackgroundRange-unit style="width: '+a.Width+"px;;margin-left: "+a.CanvasLeft+'px;" >'+a.CustomRangeInfo.DataTemplate(a)+"</div>"},_setOption:function(a,c){},_ConvertGanttChartOptionsToChatBGOptions:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;
this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};this.options.ViewWidth=a.ViewWidth;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.WorkingTimeBackground=a.WorkingTimeBackground},_destroy:function(){var a=this.options.Parent.element;a.unbind("ganttchartrefreshui.CustomBGRefreshUI");a.unbind("ganttchartoptionchanged.CustomBGRefreshUI")}};f.SpecialLines={options:{SpecialLineInfos:null,
name:"SpecialLines",Parent:null},height:0,_create:function(){this.baseCreate.apply(this,arguments);var a=this,c=a.options.Parent.element;null!=c&&(c.bind("ganttchartrefreshui.SplLinesRefreshUI",function(c,b){a._ConvertGanttChartOptsToSpecialLineOpts(b.options);a._refresh()}),c.bind("ganttchartoptionchanged.SplLinesRefreshUI",function(c,b){a._ConvertGanttChartOptsToSpecialLineOpts(b.options)}));null!=this.options.SpecialLineInfos&&this.options.SpecialLineInfos.CollectionChanged.subscribe(function(){a._refresh()})},
_refresh:function(){this.element.empty().width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){var a=RadiantQ.Gantt.Utils.TimeComputingUtils,c=this.options,b=c.ViewStartTime.clone(),g=c.ViewEndTime.clone(),f=c.BaseTimeUnitWidth,m=c.BaseTimeScaleType;if(!(null==b||null==g||null==c.SpecialLineInfos||0<=b.compareTo(g))){for(var g=[],k=0;k<c.SpecialLineInfos.length;k++){var l=c.SpecialLineInfos[k],n=a.GetTimeSpan(b,l.LineDateTime);if(!(n<RQTimeSpan.Zero_M())){var p=new RadiantQ.Gantt.TimeUnit;
if(0>=b.compareTo(l.LineDateTime))switch(void 0==l.ToolTipText&&(l.ToolTipText=""),p.Tag=l,m){case d.TimeScaleType.Minutes:p.Type=d.TimeScaleType.Minutes;p.Tag=l;p.Width=a.ConvertToUnitsOfBaseType(m,d.TimeScaleType.Minutes,n.getTotalMinutes())*f;g.push(p);break;case d.TimeScaleType.Hours:p.Type=d.TimeScaleType.Hours;p.Tag=l;p.Width=a.ConvertToUnitsOfBaseType(m,d.TimeScaleType.Hours,n.getTotalHours())*f;g.push(p);break;case d.TimeScaleType.Days:p.Type=d.TimeScaleType.Days;p.Tag=l;p.Width=a.ConvertToUnitsOfBaseType(m,
d.TimeScaleType.Days,n.getTotalDays())*f;g.push(p);break;case d.TimeScaleType.Weeks:p.Type=d.TimeScaleType.Weeks;p.Tag=l;p.Width=a.ConvertToUnitsOfBaseType(m,d.TimeScaleType.Weeks,n.getTotalDays()/7)*f;g.push(p);break;case d.TimeScaleType.Months:p.Type=d.TimeScaleType.Months;p.Tag=l;var q=b,n=12*(l.LineDateTime.getFullYear()-q.getFullYear()),l=l.LineDateTime.getMonth()-q.getMonth(),n=0<l?n+l:n-(12-Math.Abs(l));p.Width=a.ConvertToUnitsOfBaseType(m,d.TimeScaleType.Days,n)*f;g.push(p);break;case d.TimeScaleType.Years:p.Type=
d.TimeScaleType.Years,p.Tag=l,p.Width=a.ConvertToUnitsOfBaseType(m,d.TimeScaleType.Weeks,l.LineDateTime.getFullYear()-b.getFullYear())*f,g.push(p)}}}a="";for(k=0;k<g.length;k++)a+=this._renderCustomChartBackGround(g[k],-1);this.element[0].innerHTML=a}},_renderCustomChartBackGround:function(a,c){void 0==a.Tag.LineColor&&(a.Tag.LineColor="#C5C5C5");return'<div class="rq-gc-specialLine '+(a.Tag.ClassName||"")+'" style="height: 100%; Background-color:'+a.Tag.LineColor+"; width: 1px; margin-left: "+a.Width+
'px;" title="'+a.Tag.ToolTipText+'"></div>'},createToolTip:function(a,c){a.tooltip({track:!0,content:function(a){return"<div align='center'>NaN"}})},_ConvertGanttChartOptsToSpecialLineOpts:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};
this.options.ViewWidth=a.ViewWidth;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.WorkingTimeBackground=a.WorkingTimeBackground},_setOption:function(a,c){},_destroy:function(){var a=this.options.Parent.element;a.unbind("ganttchartrefreshui.SplLinesRefreshUI");a.unbind("ganttchartoptionchanged.SplLinesRefreshUI")}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){f.ScalePanelRendererBase={options:{ViewStartTime:null,ViewEndTime:null,name:"ScalePanelRendererBase"},_create:function(){},_setOption:function(b,a){this.widgetBaseSetOption.apply(this,arguments)}};f.TimeSpanHeaders={panningUtil:null,options:{TimeScaleHeaders:null,ComputedStartTime:null,ComputedEndTime:null,BaseTimeUnitWidth:null,BaseTimeScaleType:null,AnchorTime:null,ViewWidth:null,ResizeToFit:null,ZoomOptions:null,ScrollOptions:null,CustomChartBackgroundRanges:null,BaseTimeUnitWidthMinimum:null,
BaseTimeUnitWidthMaximum:null,MinTimeUnitWidthForHeaderVisibility:null,WorkTimeSchedule:null,TimeRangeHighlightBehavior:null,GanttChart:null,name:"TimeSpanHeaders"},_previousHeight:null,heightChangeListener:function(b){b!=this._previousHeight&&(this._previousHeight=b,this.element.trigger("heightChanged"))},redraw:function(){this._renderTimeLineHeaders(this.options)},_create:function(){this.baseCreate.apply(this,arguments);var d=this;this.element.addClass("rq-tsh-div").data("TimeSpanHeaders",this);
this._previousHeight=this.element.height();var a=b(this.element).parents(".rq-ganttChart");a.bind("ganttchartrefreshui.TimeSpanHeadersRefreshUI",function(a,e){b.extend(d.options,e.options);d._renderTimeLineHeaders(e.options)});a.bind("ganttchartoptionchanged",function(a,e){a.preventDefault();a.stopPropagation();b.extend(d.options,e.options)});b(this.element).parents("div").filter(".rq-ganttBase").bind("ganttbaseheadercollectionschanged",function(a,e){void 0!=(a.originalEvent.preventDefault&&a.originalEvent.stopPropagation)&&
(a.preventDefault(),a.stopPropagation());b.extend(d.options,e.options);var g=e.value.items;if("insert"==e.event.type)for(var f=0;f<g.length;f++)d._insertTimeLineHeader(g[f],e.value.index,e.options);else"remove"==e.event.type&&d._removeTimeLineHeader(e.value.index);d.heightChangeListener(d.element.height())});this.redraw()},widget:function(){return this.element},ShouldZoomWithLeftMouse:function(b){b=RadiantQ.Gantt.isModifierKeyIsPresed(b);return(this.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag)==
RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag&&!b},ShouldScrollWithLeftMouse:function(b){var a=RadiantQ.Gantt.isModifierKeyIsPresed(b);return(this.options.ScrollOptions&RadiantQ.Gantt.ChartScrollOptions.LeftMouseButtonDownDrag)==RadiantQ.Gantt.ChartScrollOptions.LeftMouseButtonDownDrag&&!a||(this.options.ScrollOptions&RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag)==RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag&&b.ctrlKey},_renderTimeLineHeaders:function(d){var a=
this;this.element[0].style.display="none";this._refreshWidth(this.options.ViewWidth);null!=this.options.TimeScaleHeaders&&b.map(this.options.TimeScaleHeaders,function(c,b){var g=a._addTimeLineHeader(c,d);a.element.append(g);return g});this.heightChangeListener(this.element.height());this.element[0].style.display="block"},_refreshWidth:function(d){b(this.element).empty();b(this.element).width(d)},_addTimeLineHeader:function(b,a){return this._newTimeLine(b,a)},_insertTimeLineHeader:function(d,a,c){d=
this._newTimeLine(d,c);b(".rq-tlh-div",this.element).eq(a).before(d)},_removeTimeLineHeader:function(d){b(".rq-tlh-div",this.element).eq(d).remove()},_newTimeLine:function(d,a){return b('<div class="rq-tlh-div" />')[this.getChildWidgetName("TimeSpanHeader")]({ViewStartTime:this.options.ComputedStartTime,ViewEndTime:this.options.ComputedEndTime,headerInfo:d,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:d.BaseTimeScaleType,GanttChart:this.options.GanttChart,ViewWidth:this.options.ViewWidth,
WorkTimeSchedule:this.options.WorkTimeSchedule})},StartPanning:function(){function b(c,e){a._trigger("AnchorTimeChanged",this,a.panningUtil.CurAnchorTime)}null!=this.panningUtil&&this.panningUtil.AnchorTimeChanged.isSubscribed&&this.panningUtil.AnchorTimeChanged.unsubscribe(b);this.panningUtil=new RadiantQ.Gantt.GanttChartPanningUtil(this.options.AnchorTime,this.options.BaseTimeScaleType,this.options.BaseTimeUnitWidth);this.panningUtil.AnchorTimeChanged.subscribe(b);var a=this},_getGanttChartDivsUniqueSelectorIdByID:function(b){return"#"+
this.element[0].id.toString().replace(/timeSpanHeader/g,"")+b},ScrollBy:function(d){if(!1==this.options.ResizeToFit){var a=b(this._getGanttChartDivsUniqueSelectorIdByID("GanttChart")),c=b(".rq-gc-horizontalScrollBar",a.parent()),c=b(".rq-gc-chart-HScrollBar-content",c).width()-c.width(),e=a.scrollLeft(),e=e+d;e<=c&&a.scrollLeft(e)}else null!=this.panningUtil?this.panningUtil.ApplyXChange(d):(d=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(this.options.BaseTimeScaleType,d/this.options.BaseTimeUnitWidth),
d=this.options.AnchorTime.addTimeSpan(d),self._trigger("AnchorTimeChanged",this,d))},_setOption:function(b,a){this.baseSetOption.apply(this,arguments)},_destroy:function(){this.element.data("TimeSpanHeaders",null)},destroy:function(){this.element.empty();this.element.parents(".rq-ganttChart").unbind("ganttchartrefreshui.TimeSpanHeadersRefreshUI");this.element.data("TimeSpanHeaders",null)}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f){RadiantQ.Gantt.Widget.rowbase={options:{filter:"tbody > tr",canhHighlightAdjacentElement:null,name:"rowbase"},_create:function(){this.options.canhHighlightAdjacentElement=!0},IsChart:function(b){return f(b).parents("table").hasClass("rq-gc-rowsParent-table")?!0:f(b).parents("table").hasClass("ui-grid-body-table")?!1:null},getParent:function(b){return this.IsChart(b)?f(b).parents(".rq-ganttChart")[0]:f(b).parents(".rq-FlexyTable")[0]},getAdjacentTR:function(b,d){if(b){var a=-1==b[0].rowIndex?
b.index():b[0].rowIndex,c=this.IsChart(b),e;!0==c?(c=f(".ui-grid-body-table",this.element)[0],void 0!=c.rows&&(e=c.rows[a])):!1==c&&null!=c&&(c=f(".rq-gc-rowsParent-table",this.element)[0])&&void 0!=c.rows&&(e=c.rows[a]);return f(e,this.element)}}}})(jQuery);
(function(f){var b={options:{SelectionMode:RadiantQ.Gantt.SelectionMode.Multiple,IsFlexyGantt:!0,name:"GanttRowselectable",SelectEvent:"mouseup",EnableMultipleSelection:!1},gridTable:null,frozenGridTable:null,chartTable:null,chart:null,grid:null,ganttBase:null,Source:null,recursive:!1,shiftKey:!1,selectedItems:new ObservableCollection,_create:function(){var b=this;b.selectedItems=new ObservableCollection;b.$ganttBase=this.element.parent(".rq-ganttBase");b.gridTable=this.element.find(".ui-grid-body-table").addClass("ui-selectable").find("tbody");
b.frozenGridTable=this.element.find(".ui-frozen-body-table").addClass("ui-selectable").find("tbody");b.chartTable=this.element.find(".rq-gc-rowsParent-table").addClass("ui-selectable");b.grid=b.gridTable.data("VWGrid");b.chart=this.chartTable.parents(".rq-ganttChart").data("GanttChart");b.ganttBase=this.element.parent().data("GanttBase");this.element.attr("tabIndex",1);b.baseCreate.apply(this,arguments);b.element.data("GanttRowselectable",this);document.body.onselectstart=function(a){return b.shiftKey?
!1:!0};b.element.unbind(b.options.SelectEvent+this.eventNamespace);b.element.bind(b.options.SelectEvent+b.eventNamespace,function(a,e){b.chartTable=b.element.find(".rq-gc-rowsParent-table").addClass("ui-selectable");!1!=b.$ganttBase.data("GanttBase").PreventDefaultFns||void 0!=RadiantQ.Gantt.RowDragDropTracker&&!1!=RadiantQ.Gantt.RowDragDropTracker.IsDragStarted_M()||(0<=navigator.platform.toUpperCase().indexOf("MAC")&&(a.shiftKey=e&&e.shiftKey?e.shiftKey:a.shiftKey||!1),b._mousedown(a))});var a=
!1;b.element.bind("keydown"+b.eventNamespace,f.proxy(function(c){setTimeout(function(){b.$ganttBase.data("GanttBase").PreventDefaultFns||0==b.selectedItems.length||!1!=a||17==c.which&&!b.recursive||(c.shiftKey&&(b.recursive=!0),38===c.which&&(b.KeyUp(c),a=!0,b.element.focus(),c.preventDefault()),40===c.which&&(b.KeyDown(c),a=!0,b.element.focus(),c.preventDefault()),13===c.which&&(a=!0,b.element.focus(),c.preventDefault()),34!=c.which&&33!=c.which&&36!=c.which&&35!=c.which)||(b.grid.uiGridBody.focus(),
c.preventDefault())},0,this)},this));b.element.bind("keyup"+b.eventNamespace,f.proxy(function(c){b.shiftKey=c.shiftKey;16==c.which&&(b.recursive=!1);a=!1},b));f(b.gridTable).bind("keydown"+b.eventNamespace,f.proxy(function(a){b.shiftKey=a.shiftKey;b.$ganttBase.data("GanttBase").PreventDefaultFns||0==b.selectedItems.length||(13!==a.which||a.isPropagationStopped()||(null!=b.mouseDownTarget&&0!=b.mouseDownTarget.length||b.updateMouseDownTarget(a),0!=b.mouseDownTarget.length&&(b.mouseDownTarget[0]!=b.element[0]&&
b.mouseDownTarget[0]!=b.element.parent()[0]||b._keydown(a))),a.shiftKey&&9==a.which&&!a.isPropagationStopped()?(b._keydown(a),a.preventDefault(),b.element.focus()):9!=a.which||a.isPropagationStopped()||(b._keydown(a),a.preventDefault(),b.element.focus()))},this));b.mouseDownTarget=null;f(b.document).bind("mousedown"+b.eventNamespace,f.proxy(function(a){b.updateMouseDownTarget(a)},b));b.updateMouseDownTarget=function(a){this.mouseDownTarget=f(a.target);this.mouseDownTarget.hasClass(".rq-ganttBase")||
(this.mouseDownTarget=this.mouseDownTarget.parents(".rq-ganttBase"))};b.UpdateSource();f.observable(b.selectedItems).bind("insert remove replaceAll",function(a,e){b.UpdateSelection(a,e)})},getSource:function(){return this.element.parent(".rq-ganttBase").data("GanttBase").options.FlatItemsSource},UpdateSource:function(b){var a=this;(b=a.Source=b?b:this.getSource())&&b.CollectionChanged.subscribe(function(c,b){if(0!=b.items.length){var g=b.items[0].IsSelected();"remove"===c.type&&!0==g&&a.selectedItems.remove(b.items[0])}})},
multiSelect:!1,multiSelectedData:[],multiSelectedTableRows:[],multiSelectedChartRows:[],lastSelectedRow:null,_mousedown:function(b){var a=f(b.target).closest("tr.rq-grid-row"),c=a.parents("table");if(!c)return!1;(!0==this.options.EnableMultipleSelection||this.grid&&!0==this.grid.options.enableSingleClickEdit||1<this.selectedItems.length)&&0==c.length&&(a=f(".editor",this.gridTable).closest("tr.rq-grid-row"),c=a.parents("table"));if(c.hasClass("ui-selectable")){c=this.chart?this.chart.GetDataFromRow(a):
this.grid.GetDataFromRow(a);if(!1==b.shiftKey){if(!b.ctrlKey&&0!=a.length&&!b.shiftKey||this.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single){if(1==this.selectedItems.length&&this.selectedItems[0]==c&&!1==this.ganttBase.options.EnableMultipleSelection)return;if(!0==this.options.EnableMultipleSelection){if(a=this.selectedItems.indexOf(c),-1!=a&&3!=b.which){this.selectedItems.remove(a);return}}else(3!=b.which||3==b.which&&-1==this.selectedItems.indexOf(c))&&this.removeAllHighlight()}else if(0!=
a.length&&!b.shiftKey&&(a.hasClass("rq-row-selected")||a.find("td").hasClass("rq-row-selected"))&&3!==b.which)return this.selectedItems.remove(c),!1;this.lastSelectedRow=c;-1==this.selectedItems.indexOf(c)&&this.hightlighRow(c)}if(b.shiftKey){if(this.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single)return this.removeAllHighlight(),this.hightlighRow(c),!1;var e=0,g=0;"function"===typeof c.DisplayIndex?(e=c.DisplayIndex(),this.lastSelectedRow&&(g=this.lastSelectedRow.DisplayIndex())):(e=c.DisplayIndex,
this.lastSelectedRow&&(g=this.lastSelectedRow.DisplayIndex));var h=0,a=e;this.lastSelectedRow&&(h=Math.min(g,e),a=Math.max(g,e));if(h==a)return;this.multiSelect=!0;this.multiSelectedData=[];this.multiSelectedTableRows=[];this.multiSelectedChartRows=[];this.removeAllHighlight();for(e=h;e<=a;e++)g=this.Source[e],-1==this.selectedItems.indexOf(g)&&this.hightlighRow(g);null==this.lastSelectedRow&&(this.lastSelectedRow=this.selectedItems[0]);-1==this.selectedItems.indexOf(c)&&this.hightlighRow(c);c=new RadiantQ.Gantt.SelectionChanged({TableRow:this.multiSelectedTableRows,
ChartRow:this.multiSelectedChartRows,Data:this.multiSelectedData},[]);this.triggerEvent("selectedChange",b,c);this.multiSelect=!1}}return!1},KeyUp:function(){var b=this.selectedItems.length;this.selectedItems.sort(function(a,b){return a.DisplayIndex_M&&b.DisplayIndex_M?a.DisplayIndex_M()-b.DisplayIndex_M():a.DisplayIndex()-b.DisplayIndex()});if(!1==this.recursive||null==this.lastProcessedRow)this.lastProcessedRow=this.selectedItems[b-1];var a=b=this.getPrevData(this.lastProcessedRow);-1!=this.selectedItems.indexOf(b)&&
(a=this.lastProcessedRow);this.selectAndScrollRow(a,null,this.recursive)},KeyDown:function(){var b=this.selectedItems.length;this.selectedItems.sort(function(a,b){return a.DisplayIndex_M&&b.DisplayIndex_M?a.DisplayIndex_M()-b.DisplayIndex_M():a.DisplayIndex()-b.DisplayIndex()});if(!1==this.recursive||null==this.lastProcessedRow)this.lastProcessedRow=this.selectedItems[b-1];var a=b=this.getNextData(this.lastProcessedRow);-1!=this.selectedItems.indexOf(b)&&(a=this.lastProcessedRow);this.selectAndScrollRow(a,
null,this.recursive)},lastProcessedRow:null,_keydown:function(b){if(void 0!=this.grid&&null!=this.grid){var a=this,c=this.selectedItems.length;this.$ganttBase.data("GanttBase");if(0!=c){this.selectedItems.sort(function(a,c){return a.DisplayIndex_M&&c.DisplayIndex_M?a.DisplayIndex_M()-c.DisplayIndex_M():a.DisplayIndex()-c.DisplayIndex()});if(!1==a.recursive||null==this.lastProcessedRow)this.lastProcessedRow=this.selectedItems[c-1];switch(b.which){case 13:this.grid.SaveAndCloseCell();setTimeout(function(){a.grid.options.enableSingleClickEdit&&
null!=a.grid.editedElement&&a.grid.closeCell()},100);break;case 9:!0==b.shiftKey?this.editNextCell(this.lastProcessedRow,-1):this.editNextCell(this.lastProcessedRow,1)}}}},editNextCell:function(b,a){if(null!=b){var c=!1,e=function(){var e=this.grid.GetRowFromData(b);1<e.length&&!0==c?e=e.eq(0):1<e.length&&!1==c&&(e=e.eq(1));this.lastCellIndex+=a;e=e.find("td:eq("+this.lastCellIndex+")");0>this.lastCellIndex&&(e=null);if(null==e||0==e.length)e=this.getNextEditableCell(a,this.lastCellIndex,c);else{var f;
f=!0==c?this.grid.FrozenColumn[e.index()]:this.grid.Column[e.index()];!1==this.grid.isEditable(b,f)&&(e=this.getNextEditableCell(a,e.index(),c))}null!=e&&void 0!=e&&e.length&&null!=e&&void 0!=e&&e.length&&!1==this.grid.editCell(e)&&this.element.focus()};null!=this.grid.editedElement&&(c=0<this.grid.editedElement.parents(".ui-frozen-body-table").length,this.submitCurentRowChanges(e))}},getNextEditableCell:function(b,a,c){var e=null,g=this.grid.GetRowFromData(this.selectedItems[this.selectedItems.length-
1]);for(b=0<b?1:-1;null==e;){if(0==g.length)return null;var f=this.grid.GetDataFromRow(g),g=this.grid.GetRowFromData(f);this.selectAndScrollRow(f,null,!1);if(c)if(0>a)c=!1,g=g.eq(0).prev(),a=this.grid.Column.length-1;else if(a<this.grid.FrozenColumn.length){var m=this.grid.FrozenColumn[a];if(f=this.grid.isEditable(f,m))return e=g.eq(0).find("td:eq("+a+")");a+=b}else c=!1,a=0;else{var k=0<this.grid.FrozenColumn.length?1:0;if(0>a)c=!0,a=this.grid.FrozenColumn.length-1;else if(a<this.grid.Column.length){m=
this.grid.Column[a];if(f=this.grid.isEditable(f,m))return e=g.eq(k).find("td:eq("+a+")");a+=b}else if(c=!0,a=0,g=g.eq(0).next(),null==g||0==g.length)return null}}},getNextData:function(b){var a,c=this.grid.GetRowFromData(b),c=c?c[0].nextElementSibling:null;null==c?null!=this.Source&&(b=this.Source.indexOf(b)+1,this.Source.length>b&&(a=this.Source[b])):a=this.chart.GetDataFromRow(c);return a},getPrevData:function(b){var a,c=this.grid.GetRowFromData(b),c=c?c[0].previousElementSibling:null;null==c?null!=
this.Source&&(b=this.Source.indexOf(b)-1,0==f(this).index()&&(a=this.Source[b])):a=this.chart.GetDataFromRow(c);return a},selectAndScrollRow:function(b,a,c){function e(){g.selectItemByitems(b,c);g.ganttBase.ScrollIntoView(b,a);g.lastSelectedRow=b;g.element.focus()}var g=this;b&&g.submitCurentRowChanges(e)},selectItemByitems:function(b,a){a||this.removeAllHighlight();null!=b&&(-1==this.selectedItems.indexOf(b)?this.selectedItems.add(b):this.selectedItems.remove(b),setTimeout(function(){}))},lastCellIndex:null,
EditCurrentRow:function(){var b=this.grid.GetRowFromData(this.selectedItems[this.selectedItems.length-1]),b=f(b).find("td:eq("+this.lastCellIndex+")");!1==this.grid.editCell(b)&&this.element.focus()},submitCurentRowChanges:function(b){var a=this.grid.editedElement;a?(this.lastCellIndex=a.index(),this.grid.SaveAndCloseCell(f.proxy(b,this))):b.call(this,!1)},selectingRowByKeyDown:function(b,a,c){b=null;null==a?(a=this.Source.indexOf(c)+1,this.Source.length>a&&(b=this.Source[a])):b=this.chart.GetDataFromRow(a);
null!=b&&(this.selectItemByitem(b),this.ganttBase.ScrollIntoView(b))},selectItemByitem:function(b){this.removeAllHighlight();this.hightlighRowByData(b)},UpdateSelection:function(b,a){var c=this.$ganttBase.data("GanttBase"),e=a.items[0];if(!0==c.PreventDefaultFns||void 0==e.IsSelected()||!c.options.ApplySelectionAndHoverEffect)return!1;if("insert"===b.type){e.IsSelected(!0);c=this.frozenGridTable.find('tr[data-uid="'+e.uid+'"]');if(this.grid)var g=this.grid.table.find('tr[data-uid="'+e.uid+'"]');var f=
this.chartTable.find('tr[data-uid="'+e.uid+'"]');c.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);g&&g.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);f.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);this.lastProcessedRow=a.items[0];!1==this.multiSelect?(e=new RadiantQ.Gantt.SelectionChanged({TableRow:g,ChartRow:f,Data:a.items[0]},[]),this.triggerEvent("selectedChange",b,e)):(this.multiSelectedData.push(e),this.multiSelectedTableRows.push(g),
this.multiSelectedChartRows.push(f))}else"remove"===b.type&&(e.IsSelected(!1),this.lastProcessedRow=null,c=this.frozenGridTable.find('tr[data-uid="'+e.uid+'"]'),this.grid&&(g=this.grid.table.find('tr[data-uid="'+e.uid+'"]')),f=this.chartTable.find('tr[data-uid="'+e.uid+'"]'),c.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass),g&&g.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass),f.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass),!1==this.multiSelect&&
(e=new RadiantQ.Gantt.SelectionChanged([],{TableRow:g,ChartRow:f,Data:a.items[0]}),this.triggerEvent("selectedChange",b,e)))},IsTable:function(b){return b.parent().parent().is(f(".ui-grid-body-table",this.element))},SelectedItems:function(){return this.selectedItems},hightlighRow:function(b){null!=b&&this.selectedItems.add(b)},hightlighRowByData:function(b){null!=b&&(this.selectedItems.add(b),this.lastSelectedRow=b)},removeAllHighlight:function(){for(var b=this.selectedItems.length,a=0;a<b;a++)this.selectedItems.remove(this.selectedItems[0])},
_setOption:function(b,a){this.widgetBaseSetOption.apply(this,arguments);switch(b){case "Source":this.removeAllHighlight(),this.UpdateSource(a?a:null)}},_destroy:function(){this.element.unbind(this.eventNamespace);f(this.gridTable).unbind(this.eventNamespace);f(this.document).unbind(this.eventNamespace);this.selectedItems&&this.selectedItems.Dispose&&this.selectedItems.Dispose();this.element.data("GanttRowselectable",null)},destroy:function(){this.removeAllHighlight();this.$ganttBase.unbind("mousedown");
this.element.data("GanttRowselectable",null);this.baseDestroy.apply(this,arguments)}};RadiantQ.Gantt.Widget.GanttRowselectable=b})(jQuery);
(function(f){RadiantQ.Gantt.Widget.hoverable={options:{name:"hoverable"},currentData:null,currentTr:null,_create:function(){var b=this;this.gridTable=this.element.find(".ui-grid-body-table").find("tbody");this.chartTable=this.element.find(".rq-gc-rowsParent-table");this.element.data("hoverable",this);this.baseCreate.apply(this,arguments);this.element.bind("mouseover",function(d){b._mousehover(d)});this.element.bind("mouseleave",function(d){b.IsMouseIn()})},_mousehover:function(b){f(b.target);this.currentTr=
f(b.target).closest("tr.rq-grid-row");0!=this.currentTr.length?this.IsMouseIn(this.currentTr.data("uid")):this.prevTableRow&&this.prevChartRow&&this.IsMouseIn();return!1},prevFrozenRow:null,prevTableRow:null,prevChartRow:null,IsMouseIn:function(b){if(!f(this.element).data("GanttRowselectable").ganttBase.options.ApplySelectionAndHoverEffect)return!1;0==this.chartTable.length&&(this.chartTable=this.element.find(".rq-gc-rowsParent-table"));this.prevTableRow&&this.prevChartRow&&(this.prevTableRow.removeClass("rq-row-hover ui-state-hover"),
this.prevChartRow.removeClass("rq-row-hover ui-state-hover"),this.prevTableRow=this.prevChartRow=null);b&&(this.prevTableRow=this.gridTable.find('tr[data-uid="'+b+'"]').addClass("rq-row-hover ui-state-hover"),this.prevChartRow=this.chartTable.find('tr[data-uid="'+b+'"]').addClass("rq-row-hover ui-state-hover"))},_setOption:function(b,d){this.widgetBaseSetOption.apply(this,arguments);switch(b){case "Source":this.removeAllHighlight(),this.UpdateSource()}},_destroy:function(){this.element.data("hoverable",
null)},destroy:function(){this.baseDestroy.apply(this,arguments);this.element.unbind("mouseover");this.element.data("hoverable",null)}}})(jQuery);
(function(f){function b(a,c){this.pagingCount=this.StartYScrollPos=this.StartXScrollPos=0;this.topLeft={X:0,Y:0};this.bottomRight={X:0,Y:0};this.mouseCurPos={X:0,Y:0};this.scrollTimer=null;this.prevDeltaEndY=this.prevDeltaStartY=this.prevDeltaEndX=this.prevDeltaStartX=0;this.ValidateScrollMode=c||!1;this.asMode;this.IgnoreVerticalAutoScroll=!1;this.GanttBase=a;this.GanttChart=a.GetGanttChartInstance();this.EnablePagingOnAutoScroll=this.GanttChart.options.EnablePagingOnAutoScroll;this.ActualViewStartTime=
this.GanttChart.options.ComputedStartTime.clone();this.StartXScrollPos=this.GanttChart.$GanttChart.scrollLeft();this.StartYScrollPos=this.GanttChart.VSB.$scrollContainer.scrollTop();var b=this.GanttChart.element[0].getBoundingClientRect();this.topLeft.X=b.left;this.bottomRight.X=b.right;this.ViewportWidth=!1==RadiantQ.CanUseDefineProperty?b.right-b.left:b.width;var e=f(".rq-gc-rowsParent",this.GanttChart.element)[0].getBoundingClientRect();this.topLeft.Y=e.top;this.bottomRight.Y=e.bottom;this.ViewportHeight=
!1==RadiantQ.CanUseDefineProperty?b.bottom-b.top:b.height;this.preventAutoscroll=!1;this.OnScroll=new ObjectEvent("OnScroll")}var d=RadiantQ.Gantt,a=RadiantQ.Gantt.Utils.TimeComputingUtils,c=RadiantQ.Template||kendo.template,e=RadiantQ.Gantt.Model,g=RadiantQ.Gantt.Utils.ValueBinder,h={currentBlock:null,options:{name:"taskbar",ProgressPercentBinding:null,StartTime:null,EndTime:null,Parent:null,Height:null,GanttChart:null,ApplyBarWidthOptimization:null,IsParentTypeRow:null,OverlappedTasksRenderingOptimization:null,
ComputedStartTime:null,index:-1,Data:null,PropertyName:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,TaskTooltipTemplate:null,MovingInfoPopup:null,ResizeInfoPopup:null,ConnectingInfoPopup:null,ParentTasksListProperty:null,DataSource:null,KnockoutObjectName:null,FlexyGantt:null,TimeIndicatorLineOption:null,UseRQModelBinder:!1,EnableAutoAdjustForSchedule:!0,CanDrawDependency:!1,MinimumWidthForParentBar:1},ProgressPercent:function(a){if(null==
a)return this._progressPercentBinder.Value;this._progressPercentBinder.Value=a},isKOBinding:!1,HasChanged:!1,stSourceBinding:null,peSourceBinding:null,etSourceBinding:null,_progressPercentBinder:null,BoundData_ValueChanged:function(a,c){if(!this.IgnoreBDUpdates)try{switch(this._ignoreSelfUpdates=!0,a){case this._progressPercentBinder:var b=parseInt(this._progressPercentBinder._value);this.ProgressPercent(isNaN(b)?0:b);break}}finally{this._ignoreSelfUpdates=!1}},updateValues:function(){var a=this.options;
if(null!=this.stSourceBinding){var c=a.BoundStartPropData[a.BoundStartProperty];f.isFunction(c)?(c.subscribe&&c.subscribe(this.startTimeChanged.bind(this)),a.StartTime=c()):a.StartTime=c.clone()}null!=this.etSourceBinding&&(c=a.BoundEndPropData[a.BoundEndProperty],f.isFunction(c)?(c.subscribe&&c.subscribe(this.endTimeChanged.bind(this)),a.EndTime=c()):a.EndTime=c.clone());null!=this.peSourceBinding&&(a.Data._boundProps={},this._progressPercentBinder=new g(a.Data,this.peSourceBinding,null,RadiantQ.Gantt.BindingMode.TwoWay,
e),this._progressPercentBinder.IsBound_M()&&(a.Data._boundProps[this._progressPercentBinder._binding.Property]=this._progressPercentBinder,this._progressPercentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),c=a.BoundEndPropData[a.BoundProgProperty],void 0!=c&&null!=c&&(f.isFunction(c)?a[this.peSourceBinding.Property]=c():a[this.peSourceBinding.Property]=c));this.taskStartAndEndTime&&(this.taskStartAndEndTime.originalStart=a.StartTime,this.taskStartAndEndTime.originalEnd=a.EndTime,
this.taskStartAndEndTime.ProposedStart=a.StartTime,this.taskStartAndEndTime.ProposedEnd=a.EndTime)},getSchedule:function(){return this.options.Parent.element.GetScheduleToPlotWith()},startTimeChanged:function(a){var c=this.options.StartTime;this._setOption("StartTime",a);this._OnRecomputeLocation();this.options.Parent.element.UpdateItemForCue(this.options.Data,a,c)},endTimeChanged:function(a){this._setOption("EndTime",a);this._OnRecomputeLocation()},_updateBindingProp:function(){var a=this.options;
if(null==a.TaskStartTime)throw"TaskStartTime is not set.";if(null==a.TaskEndTime)throw"TaskEndTime is not set.";a.IsParentTypeRow?(this.stSourceBinding=a.ParentTaskStartTime,this.etSourceBinding=a.ParentTaskEndTime):(this.stSourceBinding=a.TaskStartTime,this.etSourceBinding=a.TaskEndTime,this.peSourceBinding=a.ProgressPercentBinding);if(f.isFunction(a.Data)){var c=a.Data();a.Data=c[0]}var b=a.Data,e=this.stSourceBinding.split("."),c=this.stSourceBinding;1<e.length&&(c=e.pop(),e=e.join(),b=RadiantQ.Template.getter(e,
b));this.options.BoundStartProperty=c;this.options.BoundStartPropData=b;b=a.Data;e=this.etSourceBinding.split(".");c=this.etSourceBinding;1<e.length&&(c=e.pop(),e=e.join(),b=RadiantQ.Template.getter(e,b));this.options.BoundEndProperty=c;this.options.BoundEndPropData=b;this.peSourceBinding&&(a=a.Data,e=this.peSourceBinding.Property.split("."),c=this.peSourceBinding,1<e.length&&(c=e.pop(),e=e.join(),a=RadiantQ.Template.getter(e,a)),this.options.BoundProgProperty=c,this.options.BoundProgPropData=a)},
_updateTaskBarHeight:function(){var a=this.element,c=RadiantQ.FlexyGantt.TaskItemControl,b=c.MarginForBars,e=2*b,g=a[0].style.borderTopWidth,d=a[0].style.borderBottomWidth,h=parseInt(a[0].style.height),m=this.options.GanttChart.options.RowHeight-1;a.hasClass("rq-gc-parentBar")||a.hasClass("parentBar-style")?(g="0px"==g||""==g?c.ParentBar_BorderTopWidth:parseInt(g),d="0px"==d||""==d?c.ParentBar_BorderBottomWidth:parseInt(taskbarDiv[0].style.borderBottomWidth),c=0,void 0!=a.attr("heightSetBySrc")||
isNaN(h)?(c=m-e-(g+d),a.attr("heightSetBySrc","true")):c=h):(g="0px"==g||""==g?c.TaskBar_BorderTopWidth:parseInt(g),d="0px"==d||""==d?c.TaskBar_BorderBottomWidth:parseInt(d),c=0,void 0!=a.attr("heightSetBySrc")||isNaN(h)?(c=m-e-(g||0+d||0),a.attr("heightSetBySrc","true")):c=parseInt(h));a.css({height:c+"px","margin-top":b+"px"});if(null!=this.options.GanttChart.options.RowHeightBinding){var k=this;f(this.options.Parent.element.element).bind("heightChange."+this.eventNamespace,function(){k._OnRecomputeLocation();
k.options.Parent.element.element[0]._isTriggered=!1})}},_events:function(){var a=this.options.GanttChart;this.element.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this));this.element.bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));a.RefreshUIEvent.subscribe(this.OnChartRefreshUI,this)},$startResizeMarker:null,$endResizeMarker:null,TaskBarMouseHover:function(){this.options.GanttChart.TaskOnMouseHover=this.options.Data;this.options.GanttChart.TaskViewOnMouseHover=
this.options;this.options.GanttChart.options.TimeIndicatorLineOption==d.TimeIndicatorLines.OnHover&&(this.element.find(".rq-gc-start-verticalLine").show(),this.element.find(".rq-gc-end-verticalLine").show());this.element.hasClass("rq-gc-parentBar")&&this.element.hasClass("parentBar-style")||this.element.addClass("rq-taskbar-shadow");if(f.fn.RQTooltip.CanShowTooltip&&this.options.GanttChart.options.EnableResizeCues&&(null!=this.$startResizeMarker&&this.$startResizeMarker.show(),null!=this.$endResizeMarker&&
this.$endResizeMarker.show(),null==this.$startResizeMarker&&null==this.$endResizeMarker&&!this.element.hasClass("rq-gc-hide-resizeMarker"))){var a;if(null!=this.StartResizeThumb&&0<this.StartResizeThumb.length){this.$startResizeMarker=f("<div class='start-resizeMarker'></div>");this.StartResizeThumb.append(this.$startResizeMarker);a=this.element.height();var c=this.$startResizeMarker.outerHeight();a=a/2-c/2;this.$startResizeMarker.css("margin-top",a)}null!=this.ResizeThumb&&0<this.ResizeThumb.length&&
(this.$endResizeMarker=f("<div class='end-resizeMarker'></div>"),this.ResizeThumb.append(this.$endResizeMarker),this.$endResizeMarker.css("margin-top",a))}},TaskBarMouseLeave:function(){this.options.GanttChart.TaskOnMouseHover=null;this.options.GanttChart.TaskViewOnMouseHover=null;this.options.GanttChart.options.TimeIndicatorLineOption==d.TimeIndicatorLines.OnHover&&(this.element.find(".rq-gc-start-verticalLine").hide(),this.element.find(".rq-gc-end-verticalLine").hide());this.element.hasClass("rq-gc-parentBar")&&
this.element.hasClass("parentBar-style")||this.element.removeClass("rq-taskbar-shadow");null!=this.$startResizeMarker&&this.$startResizeMarker.hide();null!=this.$endResizeMarker&&this.$endResizeMarker.hide()},taskStartAndEndTime:null,DragThumb:null,ResizeThumb:null,StartResizeThumb:null,_onInit:!1,_create:function(){this._onInit=!0;var a=this,c=this.options.GanttChart;!1==c.options.IsPrinting&&(a._validateOptions(),c.AddTICByData(this.options.Data,this));c=a.element;a.SizeChanged=c.attr("SizeChanged");
a.SizeChanged=a.SizeChanged&&window[a.SizeChanged]?window[a.SizeChanged]:null;c.data("TaskBar",a);c.attr("index",this.options.index);a.element[0].DataContext=a.options.Data;c=a.options;a._updateBindingProp();a.updateValues();a._updateTaskBarHeight();a._events();this.taskStartAndEndTime={Data:c.Data,Name:c.Data.Name,originalStart:a.options.StartTime,originalEnd:c.EndTime,originalWidth:0,originalLeft:0,ProposedEnd:null,ProposedStart:null,HasChanged:a.HasChanged};a.options.FlexyGantt.options&&!1==a.options.FlexyGantt.options.isStaticTaskBars&&
(a.DragThumb=f(".rq-taskbar-dragThumb:eq(0)",this.element),0==a.DragThumb.length&&(a.DragThumb=f(".dragThumb:eq(0)",this.element)),a.ResizeThumb=f(".rq-taskbar-resizeThumb:eq(0)",a.element).addClass("rq-fg-gc-taskBarResizer"),0==a.ResizeThumb.length&&(a.ResizeThumb=f(".resizeThumb:eq(0)",a.element).addClass("rq-fg-gc-taskBarResizer")),a.StartResizeThumb=f(".rq-gc-startTaskBarResizer:eq(0)",a.element).addClass("rq-fg-gc-taskBarResizer"),0==a.StartResizeThumb.length&&(a.StartResizeThumb=f(".start-resizeThumb:eq(0)",
a.element).addClass("rq-fg-gc-taskBarResizer")),a.listenToInitShiftAndResizeTracker());this._listenForMouseEnterAndLeave();a.progressTemp();a._OnRecomputeLocation();c=a.options.GanttChart;c.element.bind("ganttcharttimeindicatorlineoptionchanged",function(c,b){a._OnRecomputeLocation()}.bind(this));void 0!=a.options.Data.PropertyChanged&&a.options.Data.PropertyChanged.subscribe(a.DataPropertyChangeFunction,a);a.options.BoundStartPropData&&a.options.Data!=a.options.BoundStartPropData&&void 0!=a.options.BoundStartPropData.PropertyChanged&&
a.options.BoundStartPropData.PropertyChanged.subscribe(a.DataPropertyChangeFunction,a);a.options.BoundEndPropData&&a.options.Data!=a.options.BoundEndPropData&&a.options.BoundStartPropData!=a.options.BoundEndPropData&&void 0!=a.options.BoundEndPropData.PropertyChanged&&a.options.BoundEndPropData.PropertyChanged.subscribe(a.DataPropertyChangeFunction,a);0!=c.options.TimeIndicatorLineOption&&f(".verticalLine:eq(0)",this.element).click(function(a){a.stopPropagation()});this._onInit=!1;this.options.FlexyGantt.MulipleTaskSelector&&
(this.options.Data&&this.options.Data.guid&&this.element.attr("guid",this.options.Data.guid),this.options.FlexyGantt.MulipleTaskSelector._includeElements(this.element,this.options.Data.isSelected))},_listenForMouseEnterAndLeave:function(){this.TaskBarRectangle=this.element;this.TaskBarRectangle.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));this.TaskBarRectangle.bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this)).bind("mouseleave."+
this.widgetName,this.TaskBarMouseLeave.bind(this))},enableTemp:function(){return this._progressPercentBinder&&!1==this.TaskBarRectangle.hasClass("rq-gc-milestoneBar")?!0:!1},progressTemp:function(){if(this.enableTemp()){var a=f(".rq-gc-progressbar",this.element);a.length?this.ProgressBarRectangle=a:(this.ProgressBarRectangle=f("<div class='rq-gc-progressbar progressbarStyle'></div>"),this.element.append(this.ProgressBarRectangle))}},getProgressstyle:function(){this.BarWidth=this.OriginalWidth;this._UpdateProgressBarPosition(this.OriginalLeft);
this.ProgressBarRectangle[0].style.width=(0>this.CompletedWidth?this.BarWidth:this.CompletedWidth).toString()+"px";this.ProgressBarRectangle.css("border-width","1px");this.ProgressBarRectangle.css("border-style","solid");1>=this.CompletedWidth&&this.ProgressBarRectangle.css("border-width","0px");var a=this.element.height();this.ProgressBarRectangle.css("margin-top",a/2-3+"px")},_UpdateProgressBarPosition:function(a){var c=this.ProgressPercent(),c=this.OriginalWidth*(c?c:0)/100;0==this.BarWidth?this.OriginalCompletedWidth=
this.CompletedWidth=0:0>c?this.OriginalCompletedWidth=this.CompletedWidth=0:(this.OriginalCompletedWidth=c,c-=a-this.OriginalLeft,0>c&&(c=0),c>this.BarWidth?c=this.BarWidth:c==this.BarWidth&&(c-=2),this.CompletedWidth=c);this.ProgressPercentResizeThumb=f("div.rq-gc-progressbar-resizer",this.element);0==this.ProgressPercentResizeThumb.length&&(this.ProgressPercentResizeThumb=f("div.ui-progress-resizer",this.element));this.ProgressPercentResizeThumb.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+
this.widgetName,this.TaskBarMouseLeave.bind(this));null!=this.ProgressPercentResizeThumb&&(10<this.BarWidth?(this.ProgressPercentResizeThumb.show(),this.ProgressPercentResizeThumb.css("margin-left",this.CompletedWidth),this.ProgressPercentResizeThumb.css("height",f(this.TaskBarRectangle).css("height"))):this.ProgressPercentResizeThumb.hide())},asyncApplyToolTip:function(){},listenToInitShiftAndResizeTracker:function(){if(!0!=this.options.GanttChart.options.IsPrinting){var a=this;null==this._asyncShiftTimer&&
(0<a.DragThumb.length||0<a.ResizeThumb.length||0<a.StartResizeThumb.length)&&f(a.element).unbind("mouseenter.tic").bind("mouseenter.tic",function(){f(a.element).unbind("mouseenter.tic");a.ApplyTooltipSettings(a.element,a.options);0<a.DragThumb.length&&a.element.shiftTracker(a);(0<a.ResizeThumb.length||0<a.StartResizeThumb.length)&&a.element.resizeTracker(a,a.ResizeEnd);a.UpdateShiftAndResizeTracker(a.options)})}},asyncInitShiftTracker:function(){},asyncInitResizeTracker:function(){},getChildObject:function(a,
c,b){c=c.split(".");for(var e=0;e<c.length;e++){var g=c[e],d=a;a=a[g+"_M"]?a[g+"_M"]():a[g];"function"==typeof a&&!1!=b&&(a=a.call(d))}return a},OnChartRefreshUI:function(a,c){this._OnRecomputeLocation()},asyncUpdateShiftAndResizeTracker:function(a){},UpdateShiftAndResizeTracker:function(a){a=this.element[0].getBoundingClientRect();var c=a.width;!1==RadiantQ.CanUseDefineProperty&&(c=a.right-a.left);a=Math.round(100*c)/100;a=parseFloat(a);parseInt(this.element.css("margin-left"));for(var c=f(".resizer-style",
this.element),b=0;b<c.length;b++)f(c[b]).hasClass("start-resizer-style")&&f(c[b]).hasClass("rq-gc-startTaskBarResizer")||f(c[b]).css("margin-left",a-4)},_validateOptions:function(){var a=this.options;window.console&&(a.IsParentTypeRow?(a.ParentTaskStartTime&&void 0==this.getChildObject(a.Data,a.ParentTaskStartTime)&&console.error("Data at Row no:"+(a.DataSource._displayIndex+1)+' does not have a property called "'+a.ParentTaskStartTime+'". Specify a correct ParentTaskStartTime value.'),a.ParentTaskEndTime&&
void 0==this.getChildObject(a.Data,a.ParentTaskEndTime)&&console.error("Data at Row no:"+(a.DataSource._displayIndex+1)+' does not have a property called "'+a.ParentTaskEndTime+'". Specify a correct ParentTaskEndTime value.')):a.Data&&(a.TaskStartTime&&void 0==this.getChildObject(a.Data,a.TaskStartTime)&&console.error("Data at Row No:"+(a.DataSource._displayIndex+1)+' does not have a property called "'+a.TaskStartTime+'". Specify a correct TaskStartTime value.'),a.TaskEndTime||void 0!=this.getChildObject(a.Data,
a.TaskStartTime)||console.error("Data at Row No:"+(a.DataSource._displayIndex+1)+' does not have a property called "'+a.TaskEndTime+'". Specify a correct TaskEndTime value.')))},DataPropertyChangeFunction:function(a,c){if(this.options.DataSource.IsParentType()){if(c.PropertyName==this.options.ParentTaskStartTime||c.PropertyName==this.options.ParentTaskEndTime)this.updateValues(),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this)}else if(c.PropertyName==this.options.TaskStartTime||c.PropertyName==
this.options.TaskEndTime||c.PropertyName==this.options.BoundStartProperty||c.PropertyName==this.options.BoundEndProperty)this.updateValues(),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this)},PartialUpdate:function(){this.refreshTaskBar()},TotalUpdate:function(){this.options.Parent.element.RedrawTaskRow()},_destroy:function(){f(this.options.Parent.element.element).unbind("heightChange."+this.eventNamespace);clearTimeout(this._asyncShiftTimer);clearTimeout(this._asyncResizeTimer);clearTimeout(this._asyncTooltipTimer);
this._asyncShiftTimer=this._asyncResizeTimer=this._asyncTooltipTimer=null;if(this.options.GanttChart){var a=this.options.GanttChart.TaskItemCtrlByData.indexOf(this);-1!=a&&this.options.GanttChart.TaskItemCtrlByData.RemoveAt(a)}this._onTaskBarLoadTimer&&(clearTimeout(this._onTaskBarLoadTimer),this._onTaskBarLoadTimer=null);this.disposeBindings&&this.disposeBindings();this.options.GanttChart.element.unbind("ganttcharttimeindicatorlineoptionchanged");this.options.FlexyGantt.MulipleTaskSelector&&this.options.FlexyGantt.MulipleTaskSelector._excludeElements(this.element);
this.options.GanttChart.RefreshUIEvent.unsubscribe(this.OnChartRefreshUI,this);this.options.Data.PropertyChanged&&this.options.Data.PropertyChanged.unsubscribe(this.DataPropertyChangeFunction,this);this.options.Parent&&this.options.Parent.element&&(a=this.options.Parent.element._getIntersectingBlock(this,this.options.Parent.element),null!=a&&this.options.Parent.element.RemoveEntity(a,this));this.options.UseRQModelBinder&&RadiantQ.Unbind(this.element);delete this.element.taskBarInstance;delete this.element.taskClone;
delete this.element.$dragThumbClone;delete this.element.$resizeThumbClone;this.element.empty();this.element.data("TaskBar",null)},refreshTaskBar:function(){!0==this.CanUpdate()&&(this.options.GanttChart.options.OverlappedTasksRenderingOptimization?this.options.Parent.element.RedrawTaskRow():(this.updateValues(),this._OnRecomputeLocation(),this.UpdateTooltipContent(this.options.Data)))},_canUpdate:!0,TaskOnMouseHover:null,TaskViewOnMouseHover:null,CanUpdate:function(a){if(void 0==a)return this._canUpdate;
a!=this._canUpdate&&(this._canUpdate=a)&&this.refreshTaskBar()},initChanges:!1,DragEnd:function(a,c){a.CanUpdate(!1);if(!a.options.StartTime.equals(c.originalStart)||!a.options.EndTime.equals(c.originalEnd)){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var b=new TimesChangingEventArgs(a.options.Data,c.originalStart,c.originalEnd,"DragEnd",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(a,b);c.originalStart=b.StartTime;c.originalEnd=b.EndTime}b=c.originalEnd;a._setOption("StartTime",
c.originalStart);a._setOption("EndTime",b);a.CanUpdate(!0)}a._canUpdate=!0},ResizeEnd:function(a,c){a.CanUpdate(!1);if(!(c.forProgressBar&&!0==c.forProgressBar.isTrue||a.options.EndTime.equals(c.originalEnd))){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var b=new TimesChangingEventArgs(a.options.Data,c.originalStart,c.originalEnd,"ResizeEnd",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(a,b);c.originalEnd=b.EndTime}a._setOption("EndTime",c.originalEnd);a.CanUpdate(!0)}a._canUpdate=
!0},ResizeStart:function(a,c){a.CanUpdate(!1);if(!a.options.StartTime.equals(c.originalStart)){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var b=new TimesChangingEventArgs(a.options.Data,c.originalStart,c.originalEnd,"ResizeStart",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(a,b);c.originalStart=b.StartTime}a._setOption("StartTime",c.originalStart);a.CanUpdate(!0)}a._canUpdate=!0},TooltipContent:null,DragTooltipContent:null,ResizeTooltipContent:null,ApplyTooltipSettings:function(a){a.attr("title",
"");this.LoadDefaultTooltipStyle();this.UpdateTooltipContent(this.options.Data)},closeToolTip:function(){},UpdateTooltipContent:function(a,c){if(a.ProposedStart&&a.ProposedEnd){0==a.OriginalStart.compareTo(a.ProposedStart)&&0==a.OriginalEnd.compareTo(a.ProposedEnd)&&(a.HasChanged=!1);var b={Name:a.Name,StartTime:a.ProposedStart,DataSource:this.options.Data,EndTime:a.ProposedEnd,OriginalStart:a.OriginalStart,OriginalEnd:a.OriginalEnd,HasChanged:a.HasChanged,IsStartResize:c||!1};if(a.Duration){if(0>
a.Duration.days)return;b.Duration=a.Duration}this.popupTemplate(b)}else a[this.stSourceBinding]&&a[this.etSourceBinding]&&this.options.TaskTooltipTemplate&&this.UpdateTemplateContent(a)},popupTemplate:function(a){this.DragTooltipContent=f('<div align="center" ></div>').append(this.options.MovingInfoPopup(a));a.Duration&&(this.ResizeTooltipContent=f('<div align="center" ></div>').append(this.options.ResizeInfoPopup(a)))},toolTipTemplate:null,UpdateTemplateContent:function(a){this.toolTipTemplate=c(this.options.TaskTooltipTemplate);
this.TooltipContent=f('<div class="TaskTooltip" ></div>').append(this.toolTipTemplate(a))},ConnectingInfo:function(a){this.options.ConnectingInfoPopup&&(this.DepConnContent=this.options.ConnectingInfoPopup(a))},LoadDefaultTooltipStyle:function(){f.isFunction(this.options.Data[this.stSourceBinding]);f.isFunction(this.options.Data[this.stSourceBinding]);!1==this.options.FlexyGantt.options.isStaticTaskBars&&this.popupStyle()},popupStyle:function(){this.options.MovingInfoPopup=this.options.MovingInfoPopup?
c(this.options.MovingInfoPopup):c("<div><table class='rq-gc-taskbar-popup' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_StartString} :</b></td><td> "+this._MakeItBoldWhenActualDate("${data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_FinishString}:</b> </td><td> "+this._MakeItBoldWhenActualDate("${data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>");
this.options.ResizeInfoPopup=this.options.ResizeInfoPopup?c(this.options.ResizeInfoPopup):c("<div><table class='rq-gc-taskbar-popup' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_DurationString} :</b></td><td> "+this._MakeItBoldWhenActualDate("#if (data.Duration){# #= data.Duration.days_M() #d #= data.Duration.hours_M() #h #}#")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_StartTimeString} :</b> </td><td> "+
this._MakeItBoldWhenActualDate("${data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_EndTimeString} :</b></td><td> "+this._MakeItBoldWhenActualDate("${data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>");this._progressPercentBinder&&(this.ProgressResizeContent=this.options.ProgressTemplate?c(this.options.ProgressTemplate):c("<div><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td><b>${ RadiantQ_ProgressPercentString }:</td><td>${ data }%</b></td></tr></table></div>"));
!0==this.options.CanDrawDependency&&!this.options.ConnectingInfoPopup&&this.options.GanttChart.options.ConnectingInfoPopup&&(this.options.ConnectingInfoPopup=c(this.options.GanttChart.options.ConnectingInfoPopup))},_MakeItBoldWhenActualDate:function(a){return"#if( data.HasChanged ){# "+a+"#}else {# <b>"+a+"</b>#}#"},LocationRecomputed:new ObjectEvent("LocationRecomputed"),SizeChanged:null,_OnRecomputeLocation:function(){var c,b;this._onTaskBarLoadTimer&&clearTimeout(this._onTaskBarLoadTimer);var e=
this,g=e.options.GanttChart,d=e.options.Parent.element,h=e.element,m=g.options.ComputedStartTime,k=g.options.ComputedEndTime,l=e.options.StartTime,n=e.options.EndTime;0<=l.compareTo(m)&&0>=l.compareTo(k)||0>=l.compareTo(m)&&0<=n.compareTo(k)||0<=n.compareTo(m)&&0>=n.compareTo(k)?!1==this._onInit&&(this.element.removeClass("notInRange"),m=this.options.index,0==f("[index='"+m+"']",d.TaskListControl).length&&(k=d.TaskListControl.eq(0).children(),0<k.length?(l=parseInt(k.eq(0).attr("index")),m<=l?this.element.insertBefore(k.eq(0)):
d.TaskListControl.append(this.element)):d.TaskListControl.append(this.element))):(this.element.addClass("notInRange"),d._cache._taskItemCtrlByTicID[e.uuid]=this,d._cache._hiddenTaskItemCtrlElems.append(this.element),this.element.addClass("notInRange"));e.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&(c=parseFloat(h.css("width")),b=parseFloat(h.css("margin-left")));var d=e.options,n=d.Parent.element,p=g.options,m=p.ComputedStartTime;
e.getSchedule();if(null!=e.options.GanttChart){k=g.GetBTSTToRenderAgainst();l=g.GetBTUWToRenderAgainst();n=n.GetScheduleToPlotWith();this.CompletedWidth=0;var q=a.ConvertToUnitsOfBaseScaleType(k,m,d.StartTime,n)*l,B=0,B=d.EndTime<d.StartTime?0:a.ConvertToUnitsOfBaseScaleType(k,d.StartTime,d.EndTime,n)*l;1>B&&(B=1);this.OriginalLeft=q;this.OriginalWidth=B;if(!(0>this.OriginalLeft+this.OriginalWidth||this.OriginalLeft>p.ViewWidth)){var p=e._GetBarRenderStartTime(d.StartTime),F=e._GetBarRenderStartTime(d.EndTime);
(p!=d.StartTime||F!=d.EndTime)&&p<F&&(B=a.ConvertToUnitsOfBaseScaleType(k,p,F,n)*l,q=a.ConvertToUnitsOfBaseScaleType(k,m,p,n)*l)}this.enableTemp()&&this.getProgressstyle();h.hasClass("rq-gc-parentBar")&&(B=Math.max(B,e.options.MinimumWidthForParentBar));h[0].style.width=B+"px";h[0].style["margin-left"]=q+"px";e.options.OverlappedTasksRenderingOptimization!=RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight||c==B&&b==q||(e.currentBlock=this.options.Parent.element._getIntersectingBlocks(this,
this.options.Parent.element),e.options.Parent.element._blockIntact(this.currentBlock));0<e.LocationRecomputed.fn.length&&e.LocationRecomputed.raise(this);e.updateThumbsAndRenderVerticalLines(h,B,q);e.SizeChanged&&e.SizeChanged.call(e.element,e.options.Data,g);e.options.GanttChart.options.OnTaskBarLoad&&(e._onTaskBarLoadTimer=setTimeout(function(){var a=e.options.GanttChart.options.OnTaskBarLoad;null!=a&&"function"==typeof a&&a.call(h,e);e._onTaskBarLoadTimer=null}.bind(e),0))}},asyncUpdateThumbs:function(a,
c){},UpdateThumbs:function(a,c){var b=a.height();this.StartResizeThumb&&this.StartResizeThumb.length&&this.StartResizeThumb.css({height:b+"px",width:"5px"});this.ResizeThumb&&this.ResizeThumb.length&&this.ResizeThumb.css({height:b+"px",width:"5px","margin-left":c-4+"px"})},updateThumbsAndRenderVerticalLines:function(a,c,b){var e=this;f(e.element).unbind("mouseenter.tic2").bind("mouseenter.tic2",function(){f(e.element).unbind("mouseenter.tic2");e.UpdateThumbs(a,c)});e.options.GanttChart.options.TimeIndicatorLineOption!=
d.TimeIndicatorLines.None&&(!0==e._onInit?e.asyncRenderVerticalLine(b,c):e.renderVerticalLine(b,c))},asyncRenderVerticalLine:function(a,c){var b=this;setTimeout(function(){b.renderVerticalLine(a,c)},0)},renderVerticalLine:function(a,c){var b=null,e={Data:this.options.Data,UseWidthForVerticalLines:!1,IsShifting:!1,UseWidthForTaskBar:!0};null!=this.options.GanttChart.options.ProvideWidthForMilestoneShape&&(b=this.options.GanttChart.options.ProvideWidthForMilestoneShape(this,e));var g=this.element,f=
g.find("div.rq-gc-start-verticalLine"),h=g.find("div.rq-gc-end-verticalLine");if(0!=f.length||0!=h.length){var m=g.closest("tr");if(m.length){var k=parseInt(g.css("margin-top"));g.height();var g=g.width(),m=m[0].offsetTop,l=0;!0==e.UseWidthForVerticalLines&&(l=b/2);b={height:m+k+"px","margin-left":l+"px","margin-top":-(m+k)+"px"};0!=f.length&&f.css(b);0!=h.length&&(!1==e.UseWidthForVerticalLines&&(b["margin-left"]=g+"px"),h.css(b))}}e=this.options.GanttChart.options.TimeIndicatorLineOption;(e&d.TimeIndicatorLines.Always)!=
d.TimeIndicatorLines.Always||(e&d.TimeIndicatorLines.OnResize)==d.TimeIndicatorLines.OnResize?(f.hide(),h.hide()):(f.show(),h.show())},_GetBarRenderStartTime:function(a){if(this.options.ApplyBarWidthOptimization){var c=this._ConvertXToTime(-10);if(a<c)return c}return a},_beginUpdateOverlapTasks:function(a){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){var c=this.options.Parent.element;this.currentBlock=c._getIntersectingBlock(a,
c)}},_endUpdateOverlapTasks:function(a){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){var c=this.options.Parent.element;null!=this.currentBlock&&(c._blockIntact([this.currentBlock]),this.currentBlock=null);a=c._getIntersectingBlocks(a);null!=a&&0<a.length&&c._blockIntact(a)}},_updateTaskItem:function(a,c,b,e){var g=this.element,d=RadiantQ.FlexyGantt.TaskItemControl,h=d.MarginForBars;f(g.parent().parent());var m=this.options.GanttChart.options.RowHeight-
1,h=2*h,k=g[0].style.borderTopWidth,l=0,l=g[0].style.borderBottomWidth;g.hasClass("rq-gc-parentBar")&&g.hasClass("parentBar-style")?(k="0px"==k||""==k?d.ParentBar_BorderTopWidth:parseInt(k),d="0px"==l||""==l?d.ParentBar_BorderBottomWidth:parseInt(g[0].style.borderBottomWidth),l=(m-h-(k+d))/e):(g="0px"==k||""==k?d.TaskBar_BorderTopWidth:parseInt(k),d="0px"==l||""==l?d.TaskBar_BorderBottomWidth:parseInt(l),l=(m-h-(g+d))/e);void 0!=e&&(c=l);b?(this.options.Parent.element.options.EnableOverlappedRenderingBindingProperty&&
"string"==typeof this.options.Parent.element.options.EnableOverlappedRenderingBindingProperty&&!0!=this.options.DataSource._data[this.options.Parent.element.options.EnableOverlappedRenderingBindingProperty]&&(a=0),a=0==a||void 0!=this.element.attr("heightSetBySrc")?a*c+RadiantQ.FlexyGantt.TaskItemControl.MarginForBars:a*(c+2*RadiantQ.FlexyGantt.TaskItemControl.MarginForBars+2)+RadiantQ.FlexyGantt.TaskItemControl.MarginForBars,this.element.css("height",c+"px").css("margin-top",a+"px"),this.setOverlappingProperty(this.options.Data,
!0)):(this.element.css("height",c+"px").css("margin-top",RadiantQ.FlexyGantt.TaskItemControl.MarginForBars+"px"),this.setOverlappingProperty(this.options.Data,!1))},setOverlappingProperty:function(a,c){-1!=this.options.index&&"3.1.1"==f.fn.jquery&&(a=this.options.DataSource._data[this.options.Parent.element.options.TasksListProperty][this.options.index]);f.isFunction(a.IsOverlapping)?a.IsOverlapping(c):a.IsOverlapping=c},_ConvertXToTime:function(c){var b=this.options,e=b.GanttChart.options;return b.ComputedStartTime+
a.ConvertTimeUnitsToTimeSpan(e.BaseTimeScaleType,c/e.baseTimeUnitWidth)},_setOption:function(a,c){if("StartTime"==a||"EndTime"==a){var b;b="StartTime"==a?this.options.StartTime:this.options.EndTime;if(!b.equals(c)){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "StartTime":this._updateStartAndEnd("StartTime");this.options.Parent.element.UpdateItemForCue(this.options.Data,c,b);break;case "EndTime":this._updateStartAndEnd("EndTime");break;case "TimeIndicatorLineOption":this._OnRecomputeLocation()}this.UpdateTooltipContent(this.options.Data);
this.triggerEvent("startAndEndTimeChange",this,this.options.Data)}}},_updateStartAndEnd:function(a){switch(a){case "StartTime":if(this.options.StartTime){a=this.options.Data;var c=this.stSourceBinding;-1!=this.options.index&&"3.1.1"==f.fn.jquery&&(a=this.options.DataSource._data[this.options.Parent.element.options.TasksListProperty][this.options.index]);this.options.BoundStartPropData&&(a=this.options.BoundStartPropData,c=this.options.BoundStartProperty);var b=a[c];a instanceof RadiantQ.Gantt.Model.IActivity&&
(a.PreferredStartTime=this.options.StartTime.clone());if(f.isFunction(b))b()!=this.options.StartTime&&b(this.options.StartTime.clone());else if(a[c+"_M"])a[c+"_M"](this.options.StartTime.clone());else a[c]=this.options.StartTime.clone()}break;case "EndTime":if(this.options.EndTime)if(a=this.options.Data,c=this.etSourceBinding,-1!=this.options.index&&"3.1.1"==f.fn.jquery&&(a=this.options.DataSource._data[this.options.Parent.element.options.TasksListProperty][this.options.index]),this.options.BoundEndPropData&&
(a=this.options.BoundEndPropData,c=this.options.BoundEndProperty),b=a[c],f.isFunction(b))b()!=this.options.EndTime&&b(this.options.EndTime.clone());else if(a[c+"_M"])a[c+"_M"](this.options.EndTime.clone());else a[c]=this.options.EndTime.clone()}}};RadiantQ.Gantt.Widget.taskbar=h;RadiantQ.FlexyGantt.ShiftTrackerGlobal={IncludeVerticalMovingSupport:!1,TrackingTaskItemControl:null,MinDeltaYValue:4,CurrentDropRow:null,CurrentStartRow:null,deltaX:null,deltaY:null,GetDropCueLocationIn:function(a){var c,
b;if(a.pageX||a.pageY)c=a.pageX,b=a.pageY;else if(a.clientX||a.clientY)c=a.clientX,b=a.clientY;return{X:c,Y:b}},GetAdjustedDatetime:null,BeginVerticalDrag:new ObjectEvent("BeginVerticalDrag"),VerticalDragOver:new ObjectEvent("VerticalDragOver"),VerticalDragDrop:new ObjectEvent("VerticalDragDrop"),CreateDependencyEvent:new ObjectEvent("CreateDependencyEvent")};var m=null,k=null,l=null,n=!1,p=!1;f.fn.shiftTracker=function(c){function e(a,c,b,g){var d=this.taskBarInstance,h=c.parents("div.rq-ganttChart"),
m=d.options.GanttChart.VSB.$scrollContainer.scrollTop(),k=c.parents("div.rq-ganttChart"),d=c.offset();a.offsetX=a.clientX-d.left;a.offsetY=a.clientY-d.top;this.timelineHeight=f("div.rq-tsh-div",h).outerHeight(!0);h=c.height()/2;h=d.top-k.offset().top-(this.timelineHeight-h)+m;!0==b?(this.clickPosition={x:a.originalEvent.touches[0].clientX,y:a.originalEvent.touches[0].clientY},c=a.originalEvent.touches[0].pageX-d.left+c[0].offsetLeft):(this.clickPosition={x:a.clientX,y:a.clientY},c=a.offsetX+c[0].offsetLeft);
b=this.taskBarInstance.options.FlexyGantt;b.AdjustLinkLineStartPosition.isSubscribed()&&(d={},d.top=h,d.left=c,d.event=a,b.AdjustLinkLineStartPosition.raise(this,d),h=d.top,c=d.left);g.css({top:h,left:c})}var g=this;c={that:this,$dragThumbClone:this.$dragThumbClone=null,taskBarInstance:this.taskBarInstance=c,widgetName:this.widgetName="TaskItemControl",$doc:f(document),DragThumb:this.taskBarInstance.DragThumb,lastMouseX:0,lastMouseY:0,lastElemLeft:0,lastElemTop:0,_mouseMoveDelegate:null,_mouseUpDelegate:null,
DragComplet:new ObjectEvent("DragComplet"),totalMouseMoves:0,shiftTrackerGlobal:RadiantQ.FlexyGantt.ShiftTrackerGlobal,cloneMarginLeft:0,asTracker:null,IncludeVerticalMovingSupport:!1,BeginVerticalDrag:null,VerticalDragOver:null,VerticalDragDrop:null,CreateDependencyEvent:null,dropTarget:null,CurrentDropRow:null,TrackingTaskItemControl:null,IsShifting:!1,IsConnecting:!1,timelineHeight:0,timer:null,clicks:0,$dragPopup:null,_renderer:null,prefrdLeft:0,clickPosition:{x:0,y:0},isTouchEnabled:!1,flexyGanttOptions:this.taskBarInstance.options.FlexyGantt.options,
tstToRenderWith:null,btuwToRenderWith:0,wtsToRenderWith:null};c.taskBarInstance.IsVerticallyMoving=function(){return IsVerticallyMoving};g.dblclick(function(){this.clicks=0;clearTimeout(this.timer)}.bind(c));g.bind("touchstart."+this.widgetName,function(a){if(!this.flexyGanttOptions.IsReadOnly&&(this.isTouchEnabled=!0,document.mouseButtonPressed=!0,f.fn.RQTooltip.CanShowTooltip=!1,!f(a.target).hasClass("label"))){a.stopPropagation();var c=m.call(this,a,g,!0),b=this;this.$doc.unbind("mousemove."+this.widgetName).unbind("mouseup."+
this.widgetName).unbind("keydown."+this.widgetName);this.$doc.unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown."+this.widgetName);this.$doc.bind("touchmove."+this.widgetName,function(a){q.call(b,a,c,g,!0)}).bind("touchend."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;x.call(b,a,c,g,!0);f(".rq-gc-dependencyCue-parent",b.taskBarInstance.options.GanttChart.element).remove()})}}.bind(c));g.bind("mousedown."+this.widgetName,
function(a){if(3!=a.which&&!this.flexyGanttOptions.IsReadOnly&&!this.isTouchEnabled){g[0].uiTooltip&&(g[0].isDragging=!0);var c=this,b=c.DragThumb.clone();if(!f(a.target).hasClass("label")&&"collapse"!=b.css("visibility")&&"none"!=b.css("display")){document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var e=a.screenX,d=a.screenY,h=m.call(this,a,g,!1);this._mouseMoveDelegate=function(a){return q.call(c,a,h,g,!1)};this._mouseUpDelegate=function(a){g[0].uiTooltip&&(g[0].isDragging=!1);document.mouseButtonPressed=
!1;f.fn.RQTooltip.CanShowTooltip=!0;a.screenX==e&&a.screenY==d?(null!=this.timer&&clearTimeout(this.timer),this.clicks++,this.timer=setTimeout(function(){2<=this.clicks&&g.dblclick();this.clicks=0}.bind(this),80),this.$doc.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName),this.$doc.unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown."+this.widgetName),f("#clone",c.element).remove(),this.IsShifting=!1,this.shiftTrackerGlobal&&
(this.shiftTrackerGlobal.CurrentDropRow=null),B&&B.call(this,a,!1)):x.call(c,a,h,g,!1);f(".rq-gc-dependencyCue-parent",this.taskBarInstance.options.GanttChart.element).remove()}.bind(this);this.$doc.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate)}}}.bind(c));var h,m=function(c,g,m){var l=this.taskBarInstance;l.KeyDownProxy=null;this.IncludeVerticalMovingSupport=this.shiftTrackerGlobal.IncludeVerticalMovingSupport;this.BeginVerticalDrag=
this.shiftTrackerGlobal.BeginVerticalDrag;this.VerticalDragOver=this.shiftTrackerGlobal.VerticalDragOver;this.VerticalDragDrop=this.shiftTrackerGlobal.VerticalDragDrop;this.CreateDependencyEvent=this.shiftTrackerGlobal.CreateDependencyEvent;this.TrackingTaskItemControl=this.shiftTrackerGlobal.TrackingTaskItemControl;var n=l.options.GanttChart,p=l.options.Parent.element;this.tstToRenderWith=n.GetBTSTToRenderAgainst();this.btuwToRenderWith=n.GetBTUWToRenderAgainst();this.wtsToRenderWith=p.GetScheduleToPlotWith();
this.asTracker=new b(l.options.FlexyGantt);var q=A(c,g,m);this.asTracker.OnScroll.subscribe(function(a,b){y.call(this,c,l.$dragThumbClone,g,m,q)},this);n=g[0].getBoundingClientRect();this.asTracker.prevDeltaStartX=n.left;this.asTracker.prevDeltaEndX=n.right;n=c.srcElement;if(!f(n).hasClass("resizer-style")||!f(n).hasClass("rq-fg-gc-taskBarResizer")){n=g[0].offsetWidth;p=g.height();l.$dragThumbClone=this.DragThumb.clone();l.$dragThumbClone[0].id="clone";l.$dragThumbClone.addClass("taskclone rq-taskbar-clone");
h=f("<div id='rq-gc-dependencyCue-parent' class='rq-gc-dependencyCue-parent "+window.radiantQclasses.defaultClass+"'><div id='rq-gc-dependencyCue' class='rq-gc-dependencyCue'></div></div>");e.call(this,c,g,m,h);if(l.options.FlexyGantt.OnTaskBarMouseDown.isSubscribed()){var r={};r.event=c;r.dragThumbWidth=n;r.dragThumbHeight=p;l.options.FlexyGantt.OnTaskBarMouseDown.raise(this,r);n=r.dragThumbWidth;p=r.dragThumbHeight}var u=!0,t=g.data("TaskBar");this.shiftTrackerGlobal.TrackingTaskItemControl=t;var r=
t.options,t=r.GanttChart.options,x=t.TimeIndicatorLineOption,z=d.TimeIndicatorLines;if((x&z.OnResize)==z.OnResize||(x&z.Always)==z.Always)$startVerticalLineClone=g.find("div.rq-gc-start-verticalLine").clone().show(),$endVerticalLineClone=g.find("div.rq-gc-end-verticalLine").clone().show(),r={Data:r.Data,UseWidthForVerticalLines:!1,IsShifting:!0,UseWidthForTaskBar:!0},t=t.ProvideWidthForMilestoneShape,null!=t&&(this.$dragThumbClone.css("width",n+"px"),t=t(l,r),null!=t&&(u=!1,this.cloneMarginLeft=0,
!0==r.UseWidthForTaskBar&&(this.cloneMarginLeft=t/2,l.$dragThumbClone.css("margin-left",-this.cloneMarginLeft+"px"),l.$dragThumbClone.css("width",n+"px")),!0==r.UseWidthForVerticalLines&&(this.cloneMarginLeft=t/2,$startVerticalLineClone.css("margin-left",this.cloneMarginLeft+"px"),$endVerticalLineClone.css("margin-left",this.cloneMarginLeft+"px")))),l.$dragThumbClone.append($startVerticalLineClone),l.$dragThumbClone.append($endVerticalLineClone);!0==u&&l.$dragThumbClone.css("width",n-2+"px");l.$dragThumbClone.css("height",
p-1+"px");p=g[0].getBoundingClientRect();n=p.width;!1==RadiantQ.CanUseDefineProperty&&(n=p.right-p.left);p=l.taskStartAndEndTime;p.originalStart=l.options.StartTime;p.originalEnd=l.options.EndTime;p.ProposedStart=p.originalStart;p.ProposedEnd=p.originalEnd;p.OriginalStart=p.originalStart;p.OriginalEnd=p.originalEnd;p.originalLeft=parseFloat(f(g).css("margin-left"));n=Math.round(100*n)/100;p.originalWidth=p.OriginalWidth=n;p.Duration=p.OriginalDuration=null==this.wtsToRenderWith?a.GetTimeSpan(p.originalStart,
p.originalEnd):this.wtsToRenderWith.GetEffort(p.originalStart,p.originalEnd);k.call(this,c,l.$dragThumbClone,g,m,h)}return l.$dragThumbClone},k=function(a,c,b,e,g){var d=this.taskBarInstance,h;p=!1;void 0!=a.originalEvent.touches||null!=a.originalEvent.touches?(this.shiftTrackerGlobal.deltaX=0,this.shiftTrackerGlobal.deltaY=0):(this.shiftTrackerGlobal.deltaX=void 0==a.offsetX?a.originalEvent.layerX:a.offsetX,this.shiftTrackerGlobal.deltaY=void 0==a.offsetY?a.originalEvent.layerY:a.offsetY);a||(a=
window.event);a.which?h=3==a.which:a.button&&(h=2==a.button);h||(g=A(a,c,b,e),l=f(a.target).closest("tr"),this.lastMouseX=g.x,this.lastMouseY=g.y,this.lastElemLeft=c[0].offsetLeft,this.lastElemTop=c[0].offsetTop,d._beginUpdateOverlapTasks(d),d.UpdateTooltipContent(d.taskStartAndEndTime),this.shiftTrackerGlobal.CurrentStartRow=d.options.DataSource,f(d).GetDragOrResizeContent(d.DragTooltipContent,a,b,e),this.$dragPopup=f(".dragPopup",d.options.FlexyGantt.element),d.KeyDownHandler=function(a){27==a.keyCode&&
(f.fn.RQTooltip.CanShowTooltip=!0,d.KeyDownProxy=null,this.asTracker.EndTracking(),this.$doc.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName),f(d).RemoveDragOrResizeContent(b),d.$dragThumbClone.remove(),p=!0,a.cancel=!0,f(".rq-gc-dependencyCue-parent",d.options.GanttChart.element).remove(),!0==this.IsConnecting&&(this.IsConnecting=!1),null!=this.dropTarget&&(this.dropTarget=null),this.IsShifting=!1,this.shiftTrackerGlobal.CurrentDropRow=null,
B.call(this,a,!1),b[0].uiTooltip&&(b[0].isDragging=!1))},null==d.KeyDownProxy&&(d.KeyDownProxy=f.proxy(d.KeyDownHandler,this),this.$doc.bind("keydown."+this.widgetName,d.KeyDownProxy)))},q=function(a,c,b,e){var g=this.taskBarInstance;f(b).append(c);(n||"false"==c.attr("canhzdrag"))&&c.css("display","none");g=g.taskStartAndEndTime;null!=g.originalStart&&(this._renderer={StartTime:g.originalStart.clone(),EndTime:g.originalEnd.clone(),CanvasLeft:g.originalLeft});this._renderer.StartTime<=this._renderer.EndTime&&
(g=A(a,c,b,e),this.prefrdLeft=g.x-this.lastMouseX+this.lastElemLeft,y.call(this,a,c,b,e,g),b[0].uiTooltip&&b[0].uiTooltip.hide(),this.asTracker.MouseMovedTo({X:a.clientX,Y:a.clientY},n||this.IsConnecting))},x=function(a,c,b){f.fn.RQTooltip.CanShowTooltip=!0;this.asTracker.EndTracking();var e=this.taskBarInstance;this.IsShifting=!1;var g=e.taskStartAndEndTime;if(null!=g.ProposedStart&&null!=g.ProposedEnd){f(e).RemoveDragOrResizeContent(b);if(f(c).css("margin-left")){b=f(b).css("margin-left");""==b&&
(b=0);var d=f(c).css("margin-left");parseInt(d);parseInt(b)}g.originalStart=g.ProposedStart;g.originalEnd=g.ProposedEnd;e._endUpdateOverlapTasks(e);!1==this.DragComplet.isSubscribed(e.DragEnd)&&this.DragComplet.subscribe(e.DragEnd);this.DragComplet.raise(e,g)}!0==e.options.CanDrawDependency&&null!=this.dropTarget&&(this.CreateDependencyEvent.raise(e,{}),this.dropTarget=null);n&&C.call(this,a,B,!1);if(!0==this.IsConnecting||e.options.FlexyGantt.options.IsDependencyLinesReadOnly)this.IsConnecting=!1;
this.clickPosition={x:0,y:0};e.UpdateTooltipContent(e.taskStartAndEndTime);this.$doc.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName);this.$doc.unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName);this.$dragThumbClone=e.KeyDownProxy=null;c.remove();f("#rq-gc-dependencyCue-parent",e.options.GanttChart.element).remove()},A=function(a,c,b,e){b=c=0;a=!0==e?a.originalEvent.touches[0]:a;if(a.pageX||a.pageY)c=a.pageX,b=a.pageY;
else if(a.clientX||a.clientY)c=a.clientX,b=a.clientY;return{x:c,y:b}},y=function(c,b,e,g,d){c.shouldSyncDragCue=!1;var m=l;if(m&&0!=m.length){c.row_index=m[0].rowIndex;-1==c.row_index&&(c.row_index=f("tr",f(e).closest("table")).index(m));m=this.prefrdLeft+this.asTracker.GetOffsetDueToHScroll()+this.asTracker.GetOffsetDueToHPaging();var k=d.x-this.lastMouseX,q=d.y-this.lastMouseY;d=this.taskBarInstance;this.totalMouseMoves++;if(!(this.totalMouseMoves<this.shiftTrackerGlobal.MinDeltaYValue&&this.IncludeVerticalMovingSupport)){if(!1==
n&&!1==this.IsShifting&&!1==this.IsConnecting){Math.abs(q)>=this.shiftTrackerGlobal.MinDeltaYValue&&this.IncludeVerticalMovingSupport?n=!0:4<=Math.abs(q)&&!d.options.FlexyGantt.options.IsDependencyLinesReadOnly&&!d.options.FlexyGantt.options.IsReadOnly&&!0==d.options.CanDrawDependency?this.IsConnecting=!0:4<=Math.abs(k)&&"false"!=b.attr("canhzdrag")&&(this.IsShifting=!0);var r=this.taskBarInstance.options.FlexyGantt;if(r.DetermineShiftBehavior.isSubscribed()){var s={};s.event=c;s.xDelta=k;s.yDelta=
q;s.canHorizantalDrag=this.IsShifting;s.canDependencyDraw=this.IsConnecting;s.canVerticalDrag=n;r.DetermineShiftBehavior.raise(this,s);n=s.canVerticalDrag;this.IsConnecting=s.canDependencyDraw;this.IsShifting=s.canHorizantalDrag}this.IsConnecting&&f(".rq-gc-dependencysParent",d.options.GanttChart.element).append(h);!0==n&&(this.BeginVerticalDrag?(k={},k.event=c,k.cancel=!1,this.BeginVerticalDrag.raise(this,k),n=!1==k.cancel):n=!0)}if(n)p||(b.remove(),this.$dragPopup.remove(),C.call(this,c,M,!0));
else if(this.IsShifting){g=this.taskBarInstance;var q=this.asTracker.GetOffsetDueToHPaging(),r=this.asTracker.GetOffsetDueToHScroll(),k=g.options.GanttChart,s=this._renderer.CanvasLeft+this.cloneMarginLeft,u=s+this.prefrdLeft+r+q;if(k.options.CustomBarShiftOnMove)k.options.CustomBarShiftOnMove.call(this,c,s,u,k);else{var q=this.taskBarInstance,r=this.wtsToRenderWith,s=a.ConvertToEndTimeInBaseScaleType(this.tstToRenderWith,this._renderer.StartTime.clone(),s/this.btuwToRenderWith,u/this.btuwToRenderWith,
r),t=Date.today(),u={Value:s},t={Value:t},v=null==r?a.GetTimeSpan(this._renderer.StartTime,this._renderer.EndTime):r.GetEffort(this._renderer.StartTime,this._renderer.EndTime);q.options.FlexyGantt.ConvertToValidTimes(q.options.Data,s,v,u,t,"Move",c,q.element,r);s=u.Value;t=t.Value;q.taskStartAndEndTime.ProposedStart=k.options.Parent.RoundUp(s);q.taskStartAndEndTime.ProposedEnd=k.options.Parent.RoundUp(t)}0==g.taskStartAndEndTime.ProposedStart.compareTo(g.taskStartAndEndTime.originalStart)&&0==g.taskStartAndEndTime.ProposedEnd.compareTo(g.taskStartAndEndTime.originalEnd)?
g.taskStartAndEndTime.HasChanged=!1:g.taskStartAndEndTime.HasChanged=!0;d.UpdateTooltipContent(d.taskStartAndEndTime);this.$dragPopup.empty();this.$dragPopup.append(d.DragTooltipContent);this.$dragPopup.css("visibility","visible");e[0].uiTooltip&&e[0].uiTooltip.hide()}else this.IsConnecting&&(d=this.taskBarInstance,b.remove(),k=this.asTracker.GetOffsetDueToHScroll(),q=this.asTracker.GetOffsetDueToVScroll(),!0==g&&(c.pageX=c.originalEvent.touches[0].pageX,c.pageY=c.originalEvent.touches[0].pageY),
f(".rq-gc-dependencyCue-parent:gt(0)").remove(),$DeplinkLine=f(".rq-gc-dependencyCue-parent",d.options.GanttChart.element),0==f(".rq-gc-dependencyCue-arrow",d.options.GanttChart.element).length&&$DeplinkLine.append("<div id='rq-gc-dependencyCue-arrow' class='rq-gc-dependencyCue-arrow "+window.radiantQclasses.defaultClass+"' style='width:0; height:0; z-index:2;  position:relative; border-top-width:5px; border-top-style:solid; border-right:5px solid transparent; border-left:5px solid transparent; border-bottom-width:0px; margin-left:-4px;'</div>"),
$DeplinkInnerLineArrow=f(".rq-gc-dependencyCue",d.options.GanttChart.element),0<$DeplinkLine.length&&(e.parents("div.rq-ganttChart"),s=d.options.GanttChart.VSB.$scrollContainer.scrollTop(),r=e.offset().left+$DeplinkLine[0].offsetLeft-e[0].offsetLeft,s=$DeplinkLine[0].offsetTop-(e[0].parentElement.offsetHeight+e[0].offsetTop)+s,u=e.offset().top+s,s=e=0,this.clickPosition?(s=r=0,!0==g?(r=c.originalEvent.touches[0].clientX,s=c.originalEvent.touches[0].clientY):(r=c.clientX,s=c.clientY),r+=k,s+=q,e=d.options.FlexyGantt,
e.OnDependencyDrag.isSubscribed()&&(g={},g.fromTask=d.options.Data,g.lengtoTask=d.options.GanttChart.TaskOnMouseHover,g.startX=this.clickPosition.x,g.startY=this.clickPosition.y,g.currentX=r,g.currentY=s,e.OnDependencyDrag.raise(this,g),this.clickPosition.x=g.startX,this.clickPosition.y=g.startY,r=g.currentX,s=g.currentY),e=Math.sqrt((r-this.clickPosition.x)*(r-this.clickPosition.x)+(s-this.clickPosition.y)*(s-this.clickPosition.y)),s=180/3.1415*Math.acos((s-this.clickPosition.y)/e),r>this.clickPosition.x&&
(s*=-1)):(e=Math.sqrt((c.pageX-r)*(c.pageX-r)+(c.pageY-u)*(c.pageY-u)),s=180/3.1415*Math.acos((c.pageY-u)/e),c.pageX>r&&(s*=-1)),$DeplinkInnerLineArrow.css({height:e-7,"-webkit-transform":"rotate("+s+"deg)","-moz-transform":"rotate("+s+"deg)","-o-transform":"rotate("+s+"deg)","-ms-transform":"rotate("+s+"deg)",transform:"rotate("+s+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"}),$DeplinkLine.css({height:e-5,"-webkit-transform":"rotate("+s+"deg)","-moz-transform":"rotate("+
s+"deg)","-o-transform":"rotate("+s+"deg)","-ms-transform":"rotate("+s+"deg)",transform:"rotate("+s+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"}),$DeplinkLine.css({"pointer-events":"none"}),this.dropTarget=d.options.GanttChart.TaskOnMouseHover,e={ConnectingInfoFromTaskText:d.options.Data,ConnectingInfoToTaskText:""},null!=this.dropTarget&&this.dropTarget!=d.options.Data&&(e={ConnectingInfoFromTaskText:d.options.Data,ConnectingInfoToTaskText:d.options.Data!=this.dropTarget?
this.dropTarget:""}),d.ConnectingInfo(e),this.$dragPopup.empty(),this.$dragPopup.append(d.DepConnContent),this.$dragPopup.css("visibility","visible")))}!0==c.shouldSyncDragCue||n||b.css("margin-left",m+"px")}},C=function(a,c,b){var e;e=a.originalEvent;e=void 0!=e.changedTouches||null!=e.changedTouches?f(document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY)).closest("td.FlexyChartRow"):void 0!=e.touches||null!=e.touches?f(document.elementFromPoint(e.changedTouches[0].clientX,
e.changedTouches[0].clientY)).closest("td.FlexyChartRow"):f(a.target).closest("td.FlexyChartRow");this.shiftTrackerGlobal.CurrentDropRow=0<e.length&&n?e.parent()[0]["data-grid-item"]:null;c.call(this,a,b)},M=function(a,c){p||(this.VerticalDragOver&&this.VerticalDragOver.raise(this,a),n=c)},B=function(a,c){this.VerticalDragDrop&&this.shiftTrackerGlobal.IncludeVerticalMovingSupport&&n&&this.VerticalDragDrop.raise(this,a);n=c};this.data("TaskBar").options.FlexyGantt.element.getGridBody();this[0].mouseMovedTo=
y;this[0].mouseClick=k};f.fn.getGridBody=function(a){return f(".ui-grid-body",a)};f.fn.resizeTracker=function(c,e){function g(a){27==a.keyCode&&(f.fn.RQTooltip.CanShowTooltip=!0,G.EndTracking(),f(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName),f(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName),isShiftOrResize=!1,D[0].uiTooltip?(D[0].disableTooltip=!1,D[0].uiTooltip.show()):D.parent()[0].uiTooltip&&
(D.parent()[0].disableTooltip=!1,D.parent()[0].uiTooltip.show()),f(this).RemoveDragOrResizeContent(D),f("#clone").remove())}var h=this,l=this;l.taskBarInstance=c;var n,p;l.$resizeThumbClone=null;var x=f(document),A=new ObjectEvent("ResizeComplet"),y=c.ResizeThumb,C=c.StartResizeThumb,M=null,B=null,F=0,D=f(h),H=D.data("TaskBar").options.FlexyGantt.options,N=!1;null!=l.taskBarInstance.options.ProgressPercentBinding&&function(){var a=f("<div class='rq-gc-progressbar-resizer'></div>"),b=f("div.progressbarStyle",
D);0==b.length&&(b=f("div.rq-gc-progressbar",D));if(b.length){var g=D.height(),d=b.width(),h=b.css("margin-top");a.css({height:g,"margin-left":d,"margin-top":h})}g=!1;0<D.parent("div.rq-gc-progressbar-resizer").length?g=!0:0<D.parent("div.ui-progress-resizer").length&&(g=!0);b.length&&c.enableTemp()&&!1==g&&D.append(a);b.length&&a.bind("mousedown."+c.widgetName,function(a){if(!N){document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var c=a.currentTarget;forProgressBar={isTrue:!0};var g=
O.call(this,a,D,b,forProgressBar,!1);f(document).bind("mousemove."+this.widgetName,function(a){forProgressBar={isTrue:!0};var c=b,e=forProgressBar;F=S(a,g,c,!1,e).x-n+p;L.call(this,a,g,c,!1,e);G.MouseMovedTo({X:a.clientX,Y:a.clientY})}.bind(this)).bind("mouseup."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;forProgressBar={isTrue:!0};a=b;var d=forProgressBar;G.EndTracking();document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;isShiftOrResize=
!1;a[0].uiTooltip?(a[0].disableTooltip=!1,a[0].uiTooltip.show()):a.parent()[0].uiTooltip&&(a.parent()[0].disableTooltip=!1,a.parent()[0].uiTooltip.show());f(this).RemoveDragOrResizeContent(a);f("#clone").remove();this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd?this.taskStartAndEndTime.ProposedEnd:this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.OriginalDuration=this.ProposedDuration;if(!0==d.isTrue){var h=f(g).css("width");h&&(a.css({width:h}),0!=parseInt(h)&&
a.css({"border-width":"1px"}),f(c).css("margin-left",parseInt(a.css("width"))+"px"));this.ProgressPercent(_proposedProgress)}else h=new RadiantQ.Gantt.SetDurationAction(this.GanttControl,this.ActivityView.Activity_M(),this.ProposedDuration),this.GanttControl.ActionManager.RecordAction(h);this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime>this.taskStartAndEndTime.OriginalEnd?this.taskStartAndEndTime.OriginalEnd:this.taskStartAndEndTime.ProgressEndTime;A.subscribe(e,this);
A.raise(this,{taskStartAndEndTime:this.taskStartAndEndTime,forProgressBar:d});this.UpdateTooltipContent(this.options.Data);A.unsubscribe(e,this);a.removeClass("rq-taskbar-shadow");f(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown."+this.widgetName);f(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName)}.bind(this))}}.bind(l.taskBarInstance))}();var O=function(a,c,b,e,g){var d=this.options;this.taskStartAndEndTime={Name:d.Data.TaskName,
OriginalStart:d.StartTime,OriginalEnd:d.EndTime,originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProposedEnd:null,ProposedStart:null};this.taskStartAndEndTime[d.ProgressPercentProperty]=d.ProgressPercent;$progressClone=f("<div id='clone' class='taskclone rq-taskbar-clone  "+window.radiantQclasses.defaultClass+"'></div>");G=new RadiantQ.FlexyGantt.AutoScrollTracker(this.options.FlexyGantt);G.OnScroll.subscribe(function(c,d){L.call(this,a,$progressClone,
b,g,e)},this);$progressClone.css({width:b[0].offsetWidth-2+"px",height:c[0].offsetHeight-3+"px"});c.append($progressClone);Q.call(this,a,$progressClone,b,e,g);a.stopPropagation();return $progressClone},L=function(a,c,b,e,g){a=G.GetOffsetDueToHScroll();a=F+a;e=b.parents(".rq-gc-taskbar");e.length||(e=b.parents(".taskbar"));e=e.width()||a;!0==g.isTrue&&(_proposedProgress=Math.round(100*(a/e)),0>_proposedProgress||0>a)&&(a=_proposedProgress=0,G.preventAutoscroll=!0);a>e?(g.isTrue&&(G.preventAutoscroll=
!0),F=e,f(c).css("width",F+"px")):(f(c).css("width",a+"px"),null!=B&&null!=B[0]&&(B[0].style["margin-left"]=a+"px"));!1==g.isTrue&&b.addClass("rq-taskbar-shadow");this.getSchedule();!0==g.isTrue&&(100<_proposedProgress?_proposedProgress=100:0>_proposedProgress&&(_proposedProgress=0));c=f(".dragPopup");c.empty();!0==g.isTrue?c.append(this.ProgressResizeContent(_proposedProgress)):c.append(this.ResizeTooltipContent);c.css("visibility","visible");b[0].uiTooltip?b[0].uiTooltip.hide():b.parent()[0].uiTooltip&&
b.parent()[0].uiTooltip.hide()},Q=function(a,c,b,e,d){this.getSchedule();isShiftOrResize=!0;this.closeToolTip();b[0].uiTooltip?b[0].disableTooltip=!0:b.parent()[0].uiTooltip&&(b.parent()[0].disableTooltip=!0);n=S(a,c,b,d).x;p=c[0].offsetWidth;this.taskStartAndEndTime.ProposedStart=this.taskStartAndEndTime.OriginalStart;this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime;_proposedProgress=this.ProgressPercent();
c=b.closest(".rq-gc-taskbar");0==c.length&&(c=b.closest(".taskbar-style"));!0==e.isTrue?f(this).GetDragOrResizeContent(this.ProgressResizeContent(_proposedProgress),a,c,d):f(this).GetDragOrResizeContent(this.ResizeTooltipContent,a,b,d);f(document).bind("keydown."+this.widgetName,g.bind(this))},S=function(a,c,b,e,g){if(!0==e)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var d=a.originalEvent.touches[0].pageX,f=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||
a.originalEvent.touches[0].clientY)d=a.originalEvent.touches[0].clientX,f=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)d=a.pageX,f=a.pageY;else if(a.clientX||a.clientY)d=a.clientX,f=a.clientY;return{x:d,y:f}};0<y.length&&(y.bind("mousedown."+l.widgetName,function(a){if(!H.IsReadOnly&&!N){document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var c=this,b=U.call(this,a,h,!1);x.bind("mousemove."+this.widgetName,function(a){return ba.call(c,a,b,h)}).bind("mouseup."+this.widgetName,
function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;return aa.call(c,a,b,h)})}}.bind(l.taskBarInstance)),y.bind("touchstart."+l.widgetName,function(a){if(!H.IsReadOnly){N=!0;var c=this;document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var b=U.call(c,a,h,!0);x.bind("touchmove."+this.widgetName,function(a){return ba.call(c,a,b,h,!0)}.bind(this)).bind("touchend."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;return aa.call(c,
a,b,h,!0)}.bind(this))}}.bind(l.taskBarInstance)));0<C.length&&(C.bind("mousedown."+l.widgetName,function(a){if(!H.IsReadOnly&&!N){var c=this;document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var b=U.call(c,a,h,!1,!0);x.bind("mousemove."+this.widgetName,function(a){return ba.call(c,a,b,h,null,!0)}.bind(this)).bind("mouseup."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;return aa.call(c,a,b,h,null,!0)}.bind(this))}}.bind(l.taskBarInstance)),
C.bind("touchstart."+l.widgetName,function(a){if(!H.IsReadOnly){N=!0;var c=this;document.mouseButtonPressed=!0;f.fn.RQTooltip.CanShowTooltip=!1;var b=U.call(c,a,h,!0,!0);x.bind("touchmove."+this.widgetName,function(a){return ba.call(c,a,b,h,!0,!0)}.bind(c)).bind("touchend."+this.widgetName,function(a){document.mouseButtonPressed=!1;f.fn.RQTooltip.CanShowTooltip=!0;return aa.call(c,a,b,h,!0,!0)}.bind(c))}}.bind(l.taskBarInstance)));var G=null,I,V,P,U=function(a,c,e,g){var f=this;f.KeyDownProxy=null;
f.$resizeThumbClone=y.clone();I=this.options.GanttChart.GetBTSTToRenderAgainst();V=this.options.GanttChart.GetBTUWToRenderAgainst();P=this.options.Parent.element.GetScheduleToPlotWith();var h=c.height(),m=c[0].offsetWidth,k=2;G=g?new b(this.options.FlexyGantt,q.Left):new b(this.options.FlexyGantt,q.Right);G.OnScroll.subscribe(function(b,d){fa.call(this,a,f.$resizeThumbClone,c,e,g)},this);var l="auto";!0==g&&(k=5,l=c.css("left"));f.$resizeThumbClone[0].id="clone";f.$resizeThumbClone.css({width:m-k+
"px",height:h-1+"px","margin-left":"0px",left:l,display:"block"}).addClass("taskclone rq-taskbar-clone");f.$resizeThumbClone.appendTo(c);da.call(this,a,f.$resizeThumbClone,c,e,g);a.stopPropagation();h=f.options.GanttChart.options.TimeIndicatorLineOption;if((h&d.TimeIndicatorLines.OnResize)==d.TimeIndicatorLines.OnResize||(h&d.TimeIndicatorLines.Always)==d.TimeIndicatorLines.Always)M=c.find("div.rq-gc-start-verticalLine").clone().show(),B=c.find("div.rq-gc-end-verticalLine").clone().show(),f.$resizeThumbClone.append(M),
f.$resizeThumbClone.append(B);return f.$resizeThumbClone},W=0,da=function(c,b,e,g,d){this.closeToolTip();e[0].uiTooltip&&(e[0].isResizing=!0);var h=this.element[0].getBoundingClientRect(),m=h.width;!1==RadiantQ.CanUseDefineProperty&&(m=h.right-h.left);n=ja(c,b,e,g).x;p=Math.round(100*m)/100;W=parseFloat(e.css("margin-left"));this._beginUpdateOverlapTasks(this);b=this.options.GanttChart.options.Parent;this.taskStartAndEndTime.originalStart=this.options.StartTime;this.taskStartAndEndTime.originalEnd=
this.options.EndTime;this.taskStartAndEndTime.ProposedStart=b.RoundUp(this.taskStartAndEndTime.originalStart);this.taskStartAndEndTime.ProposedEnd=b.RoundUp(this.taskStartAndEndTime.originalEnd);this.taskStartAndEndTime.OriginalStart=this.taskStartAndEndTime.originalStart;this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.originalEnd;this.taskStartAndEndTime.Duration=this.taskStartAndEndTime.OriginalDuration=null==P?a.GetTimeSpan(this.taskStartAndEndTime.originalStart,this.taskStartAndEndTime.originalEnd):
P.GetEffort(this.taskStartAndEndTime.originalStart,this.taskStartAndEndTime.originalEnd);this.taskStartAndEndTime.OriginalLeft=this.taskStartAndEndTime.originalLeft=parseFloat(e.css("margin-left"));m=Math.round(100*m)/100;this.taskStartAndEndTime.originalWidth=m;this.taskStartAndEndTime.OriginalWidth=this.taskStartAndEndTime.originalWidth;this.ProposedDuration=this.taskStartAndEndTime.OriginalDuration;this.UpdateTooltipContent(this.taskStartAndEndTime,d);f(this).GetDragOrResizeContent(this.ResizeTooltipContent,
c,e,g);this.KeyDownHandler=function(a){27==a.keyCode&&(f.fn.RQTooltip.CanShowTooltip=!0,this.KeyDownProxy=null,G.EndTracking(),x.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName),f(this).RemoveDragOrResizeContent(e),this.$resizeThumbClone.remove(),e[0].uiTooltip&&(e[0].isResizing=!1))};null==this.KeyDownProxy&&(this.KeyDownProxy=f.proxy(this.KeyDownHandler,this),x.bind("keydown."+this.widgetName,this.KeyDownProxy))},ba=function(a,c,b,e,g){F=
ja(a,c,b,e).x-n+this.taskStartAndEndTime.originalWidth;fa.call(this,a,c,b,e,g);G.MouseMovedTo({X:a.clientX,Y:a.clientY})},aa=function(a,c,b,e,g){null!=k&&clearInterval(k);null!=m&&clearInterval(m);k=m=null;G.EndTracking();b[0].uiTooltip&&(b[0].isResizing=!1);f(this).RemoveDragOrResizeContent(b);this.$resizeThumbClone.remove();this.KeyDownProxy=null;this._endUpdateOverlapTasks(this);A.clear();!0==g?A.subscribe(this.ResizeStart):A.subscribe(this.ResizeEnd);A.raise(this,this.taskStartAndEndTime);this.taskStartAndEndTime.originalEnd=
this.taskStartAndEndTime.originalEnd;this.taskStartAndEndTime.OriginalDuration=this.ProposedDuration;this.taskStartAndEndTime.originalStart=this.taskStartAndEndTime.ProposedStart;x.unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName);x.unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName)},ja=function(a,c,b,e){if(!0==e)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var g=a.originalEvent.touches[0].pageX,
d=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)g=a.originalEvent.touches[0].clientX,d=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)g=a.pageX,d=a.pageY;else if(a.clientX||a.clientY)g=a.clientX,d=a.clientY;return{x:g,y:d}},fa=function(c,b,e,g,d){var h=G.GetOffsetDueToHScroll(),m=G.GetOffsetDueToHPaging();g=this.options.GanttChart;if(!0==d){var m=F-p+h+m,h=p-m,k=W;0>h?(h=0,k+=p,G.preventAutoscroll=!0):(k+=m,b.css("margin-left",
m+"px"));b.css("width",h+"px");null!=B&&0<B.length&&(B[0].style["margin-left"]=b.css("width"))}else h=F+h+m,0>h&&(h=0,G.preventAutoscroll=!0),b.css("width",h+"px"),null!=B&&null!=B[0]&&(B[0].style["margin-left"]=h+"px");g.options.CustomBarResizeOnMove?g.options.CustomBarResizeOnMove.call({taskBarInstance:this,taskStartAndEndTime:this.taskStartAndEndTime,element:e,GanttChart:g,tstToRenderWith:I,btuwToRenderWith:V,wtsToRenderWith:P},c,k,h,d,e):(d?(this.taskStartAndEndTime.HasChanged=this.taskStartAndEndTime.OriginalDuration==
this.ProposedDuration?!1:!0,b=this.options.GanttChart.options,g=a.ConvertToEndTimeInBaseScaleType(I,this.taskStartAndEndTime.OriginalStart.clone(),this.taskStartAndEndTime.OriginalLeft/V,k/V,P),k=a.ConvertUnitsInBaseScaleTypeToDurationInHours(I,g,k/V,(this.taskStartAndEndTime.OriginalLeft+this.taskStartAndEndTime.originalWidth)/V,P),0>k&&(window.catchAllGanttExcetions&&window.console&&window.console.error&&console.error("'durInHours' wouldn't be less than 0(zero) issue in 'resizeStartTo' method in TaskItemControl.js file."),
k=0),b=b.Parent.RoundUpDuration(new RQTimeSpan(0,k,0,0)),g=k=Date.MinValue,k={Value:k},g={Value:g},this.options.FlexyGantt.ConvertToValidTimes(this.options.Data,this.taskStartAndEndTime.originalEnd.clone(),b,g,k,"ResizeAtStart",c,e,P),null!=RadiantQ.FlexyGantt.ShiftTrackerGlobal.GetAdjustedDatetime&&RadiantQ.FlexyGantt.ShiftTrackerGlobal.GetAdjustedDatetime(refadjustedStart,!0),k=k.Value,g=g.Value,b=null==P?new RQTimeSpan(g-k):P.GetEffort(k,g),this.taskStartAndEndTime.ProposedStart=k,this.taskStartAndEndTime.originalStart=
this.taskStartAndEndTime.ProposedStart,this.ProposedDuration=this.taskStartAndEndTime.ProposedDuration=b,this.taskStartAndEndTime.Duration=b,this.UpdateTooltipContent(this.taskStartAndEndTime,!0),c=f(".dragPopup"),c.empty(),c.append(this.ResizeTooltipContent),c.css("visibility","visible")):(this.taskStartAndEndTime.HasChanged=this.taskStartAndEndTime.OriginalDuration==this.ProposedDuration?!1:!0,b=this.options.GanttChart.options,k=a.ConvertUnitsInBaseScaleTypeToDurationInHours(I,this.taskStartAndEndTime.originalStart,
this.taskStartAndEndTime.originalLeft/V,(this.taskStartAndEndTime.originalLeft+h)/V,P),k=new RQTimeSpan(0,k,0,0),g=this.taskStartAndEndTime.originalStart.clone(),m=g.clone(),m.addHours(k.getTotalHours()),h={Value:g},m={Value:m},this.options.FlexyGantt.ConvertToValidTimes(this.options.Data,this.taskStartAndEndTime.originalStart.clone(),k,h,m,"ResizeAtEnd",c,e,P),m=m.Value,this.taskStartAndEndTime.originalStart<m&&(this.taskStartAndEndTime.ProposedStart=g,this.taskStartAndEndTime.ProposedEnd=b.Parent.RoundUp(m.clone()),
this.taskStartAndEndTime.Duration=a.GetTimeSpan(this.taskStartAndEndTime.originalStart,m),k=null==P?a.GetTimeSpan(this.taskStartAndEndTime.originalStart,m):P.GetEffort(this.taskStartAndEndTime.originalStart,m),this.ProposedDuration=b.Parent.RoundUpDuration(k),this.taskStartAndEndTime.Duration=this.ProposedDuration,this.taskStartAndEndTime.originalEnd=this.taskStartAndEndTime.ProposedEnd,this.UpdateTooltipContent(this.taskStartAndEndTime,!1)),c=f(".dragPopup"),f(c).empty(),f(c).append(this.ResizeTooltipContent),
f(c).css("visibility","visible")),e[0].uiTooltip&&e[0].uiTooltip.hide());this.taskStartAndEndTime.HasChanged=this.taskStartAndEndTime.OriginalDuration==this.ProposedDuration?!1:!0;this.UpdateTooltipContent(this.taskStartAndEndTime,d);d=f(".dragPopup");d.empty();d.append(this.ResizeTooltipContent);d.css("visibility","visible");e[0].uiTooltip&&e[0].uiTooltip.hide()}};f.fn.GetDragOrResizeContent=function(a,c,b,e){f(".dragPopup").remove();var g=f('<div class="dragPopup" style="visibility: hidden; position: absolute;" ></div>');
if(a){f(g).append(a);var d=!1;f(g).mousemove(function(){void 0!=this.refreshPostion&&(this.refreshPostion(d),d=!d)})}f(b).parents("div").filter(".rq-gc-viewsContainer-div");var h=f(b).parents("div").filter(".rq-ganttBase"),m=f(".rq-gc-taskbar-popup",a);0==m.length&&(m=f(".draggingContent",a));f(h).append(g);f(b).css("z-index",15);g.css("z-index",25);b=f(b).height()+2;var k;!0==e?(h=c.originalEvent.touches[0].pageX,k=c.originalEvent.touches[0].pageY):(h=c.pageX,k=c.pageY);e=k+(b-(c.originalEvent.offsetY||
0));a=h;g.css({left:a,top:e});var l=m.outerWidth(!0),n=m.outerHeight(!0),m=f(window);0>m.scrollTop()+m.height()-(g.offset().top+n)&&(e=k-(n+b),g.css({top:e}));b=h+l-m.width();0<b?(h-l,g.css({left:a})):-150<b&&(h-150,g.css({left:a}));h=g[0].getBoundingClientRect();b=h.top-e;h=h.left-a;0==h&&0==b||g.css({left:a-h,top:e-b});c.clientX>m.width()-200&&g.css({left:c.pageX-200,top:e-b})};f.fn.RemoveDragOrResizeContent=function(a){f(a).css("z-index",10);f(".dragPopup").remove()};b.prototype.AutoScrollMode=
function(a){if(0==arguments.length)return this.asMode;this.removeScrollTimers();if(a!=q.None){var c=this;this.scrollTimer=setInterval(function(){c.ScrollTick()},150)}this.asMode=a};b.prototype.GetOffsetDueToHScroll=function(){return this.GanttChart.$GanttChart.scrollLeft()-this.StartXScrollPos};b.prototype.GetOffsetDueToHPaging=function(){return-1*this.GanttChart.ConvertTimeToX(this.ActualViewStartTime)};b.prototype.GetOffsetDueToVScroll=function(){return this.GanttChart.VSB.$scrollContainer.scrollTop()-
this.StartYScrollPos};b.prototype.MouseMovedTo=function(a,c){this._pagingTimer&&(clearTimeout(this._pagingTimer),this._pagingTimer=null);if(!0==this.preventAutoscroll)return this.PreventAutoscroll();c=c||!1;var b=this.mouseCurPos;this.mouseCurPos={X:a.X,Y:a.Y};null!=this.scrollTimer&&(this.prevDeltaStartX==this.mouseCurPos.X&&this.prevDeltaEndX==this.mouseCurPos.X&&b.Y==this.mouseCurPos.Y||this.prevDeltaStartY==this.mouseCurPos.Y&&this.prevDeltaEndY==this.mouseCurPos.Y)||(this.removeScrollTimers(),
this.CheckForScroll(c),this.prevDeltaStartX=this.prevDeltaEndX=this.mouseCurPos.X)};b.prototype.CheckForScroll=function(a){if(!0==this.preventAutoscroll)return this.PreventAutoscroll();this.ValidateScrollMode==q.Left?this.mouseCurPos.X<=this.topLeft.X+25?this.AutoScrollMode(q.Left):this.mouseCurPos.X>=this.bottomRight.X-25&&this.AutoScrollMode(q.Right):this.ValidateScrollMode==q.Right?this.mouseCurPos.X<=this.topLeft.X+25?this.AutoScrollMode(q.Left):this.mouseCurPos.X>=this.bottomRight.X-25&&this.AutoScrollMode(q.Right):
this.mouseCurPos.X<=this.topLeft.X+10?this.AutoScrollMode(q.Left):this.mouseCurPos.X>=this.bottomRight.X-10?this.AutoScrollMode(q.Right):!a||"FlexyGantt"!=this.GanttBase.GanttType&&!1!=this.GanttChart.options.UseChartVirtualization||!0==this.IgnoreVerticalAutoScroll||(this.mouseCurPos.Y<=this.topLeft.Y+10?this.AutoScrollMode(q.Up):this.mouseCurPos.Y>=this.bottomRight.Y-20&&this.AutoScrollMode(q.Bottom))};b.prototype.ScrollTick=function(){if(!0==this.preventAutoscroll)return this.PreventAutoscroll();
switch(this.AutoScrollMode()){case q.Left:var a=this.GanttChart.HScrollBar.scrollLeft();0==a&&!0==this.EnablePagingOnAutoScroll?this._pagingTimer||(this._pagingTimer=setTimeout(function(){this.GanttChart.PageLeft();this.pagingCount--;this._pagingTimer=null}.bind(this),500)):this.GanttChart.HScrollBar.scrollLeft(a-100);break;case q.Right:var a=this.GanttChart.HScrollBar.scrollLeft(),c=this.GanttChart.HScrollBar[0].scrollWidth-this.GanttChart.HScrollBar[0].clientWidth,b=Math.round(a);c==b&&!0==this.EnablePagingOnAutoScroll?
this._pagingTimer||(this._pagingTimer=setTimeout(function(){this.GanttChart.PageRight();this.pagingCount++;this._pagingTimer=null}.bind(this),500)):this.GanttChart.HScrollBar.scrollLeft(a+100);break;case q.Up:a=this.GanttChart.VSB.$scrollContainer.scrollTop();if(0==a)return this.PreventAutoscroll();this.GanttChart.VSB.$scrollContainer.scrollTop(a-100);break;case q.Bottom:a=this.GanttChart.VSB.$scrollContainer.scrollTop();if(a+2>=this.GanttChart.VSB.$scrollContainer[0].scrollHeight-this.GanttChart.VSB.$scrollContainer[0].clientHeight)return this.PreventAutoscroll();
this.GanttChart.VSB.$scrollContainer.scrollTop(a+100)}this.OnScroll.raise(this)};b.prototype.HasPaged=function(){return 0!=this.pagingCount};b.prototype.PreventAutoscroll=function(){this.EndTracking()};b.prototype.removeScrollTimers=function(){clearInterval(this.scrollTimer);this.scrollTimer=null;this.asMode=q.None};b.prototype.EndTracking=function(){this.removeScrollTimers();this.preventAutoscroll=!1};var q={None:"None",Left:"Left",Right:"Right",Up:"Up",Bottom:"Bottom"};RadiantQ.FlexyGantt.AutoScrollTracker=
b;RadiantQ.FlexyGantt.AutoScrollModes=q})(jQuery);
(function(f,b){var d={tasksCollection:null,currentUniqueTaskSuffix:0,blocks:[],ItemTemplate:null,options:{name:"TasksListControl",viewStartTime:null,viewEndTime:null,ViewWidth:null,TreeViewItem:null,Data:null,TasksListProperty:null,ParentTasksListProperty:null,GanttChart:null,TimeIndicatorLineOption:null,IsParentTypeRow:null,BaseTimeUnitWidth:null,OverlappedTasksRenderingOptimization:null,TaskTemplate:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,
RowCount:null,Parent:null,KnockoutObjectName:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,FlexyGantt:null,DragThumb:null,ResizeThumb:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,UseRQModelBinder:!1,EnableAutoAdjustForSchedule:!0,CanDrawDependency:!1,MinimumWidthForParentBar:1,ProgressPercentBinding:null},TasksList:null,BrowseToTaskCueLeft:null,BrowseToTaskCueRight:null,BrowseToCueLeft:0,BrowseToCueRight:0,BrowseToTaskCueLeftVisibility:"none",
BrowseToTaskCueRightVisibility:"none",_cache:{_taskItemCtrlByTicID:{},_hiddenTaskItemCtrlElems:b("<div></div>"),_allTaskItemCtrls:[],_taskItemCtrlsInRange:[]},_create:function(){this._cache={_taskItemCtrlByTicID:{},_hiddenTaskItemCtrlElems:b("<div></div>"),_allTaskItemCtrls:[],_taskItemCtrlsInRange:[]};this._schedule=null;!1==this.options.GanttChart.options.IsPrinting&&this.options.Data.ChartRow(this.element.parent());this.element.data("TasksListControl",this);this._validateOptions();this.refresh()},
WorkTimeSchedule_M:function(a){if(null!=this._schedule)return this._schedule;if(a=this.options.GanttChart.options.RowRenderingScheduleBinding){var c=this.getNestedValue(this.options.Data._data,a.Property);this._schedule=a.Converter?a.Converter.Convert.call(this.options.Data,c,a.Property):""==b.trim(c)?null:c;void 0===this._schedule&&(this._schedule=this.options.GanttChart.options.WorkTimeSchedule)}else this._schedule=this.options.GanttChart.options.WorkTimeSchedule;return this.options.Data.Schedule=
this._schedule},GetScheduleToPlotWith:function(){var a=this.options.Data,c=this.options.GanttChart.options;if(null!=c.GetScheduleToPlotWith&&"function"==typeof c.GetScheduleToPlotWith){var b=c.GetScheduleToPlotWith(a);if(void 0!=b)return b}return null!=a&&null!=a.HierarchicalItem.ResourceSchedule_M()?a.HierarchicalItem.ResourceSchedule_M():c.WorkTimeSchedule},getNestedValue:function(a,c){for(var e=c.split("."),g=0;g<e.length;g++)"undefined"!=typeof a&&(a=a[e[g]+"_M"]?a[e[g]+"_M"]():a[e[g]]);return!0==
b.isFunction(a)?a():a||""},refreshVerticalLine:function(){for(var a=0;a<this.TasksList.length;a++){var c=this.TasksList[a].data("TaskBar");c&&c.renderVerticalLine()}},_validateOptions:function(){var a=this.options;window.console&&(a.Data.IsParentType()?!a.ParentTasksListProperty||"string"==typeof a.ParentTasksListProperty&&void 0!=a.Data._data[a.ParentTasksListProperty]||console.error('Data does not have a property called "'+a.ParentTasksListProperty+'". Specify a correct ParentTasksListProperty value.'):
a.TasksListProperty&&("string"==typeof a.TasksListProperty&&void 0!=a.Data._data[a.TasksListProperty]||console.error('Data does not have a property called "'+a.TasksListProperty+'". Specify a correct TaskListProperty value.')))},refresh:function(){this.TasksList=[];var a=this.element;b(this.element).bind("heightChange",function(){});this.TaskListControl=b("<div class='rq-gc-taskListContainer' style='height:100%;'></div>");a[0].appendChild(this.TaskListControl[0]);this.options.KnockoutObjectName=eval(this.options.KnockoutObjectName);
this._updateItemsSourceAndTemplates();this._enableTouchEvents();this._drawTaskBar();this.OnApplyTemplate();this.options.GanttChart.ViewportTimeRangeChanged.subscribe(this._ganttChart_ViewportTimeRangeChanged,this)},OnApplyTemplate:function(){this.BrowseToTaskCueLeft=b(this.options.TaskBarBrowseToCueLeftTemplate).css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.BrowseToTaskCueRight=b(this.options.TaskBarBrowseToCueRightTemplate).css({"margin-left":this.BrowseToCueRight,
display:this.BrowseToTaskCueRightVisibility});0<this.BrowseToTaskCueLeft.length&&(this.BrowseToTaskCueLeft.bind("touchstart mousedown",this._browseToTaskCue_Click),this.BrowseToTaskCueLeft[0].tasksListControl=this,this.BrowseToTaskCueLeft.addClass("rq-gc-browseCue-left"),this.BrowseToTaskCueLeft[0].title=window.RadiantQ_ScrollToTask,b("div:eq(0)",this.element).append(this.BrowseToTaskCueLeft));0<this.BrowseToTaskCueRight.length&&(this.BrowseToTaskCueRight.bind("touchstart mousedown",this._browseToTaskCue_Click),
this.BrowseToTaskCueRight[0].tasksListControl=this,this.BrowseToTaskCueRight.addClass("rq-gc-browseCue-right"),this.BrowseToTaskCueRight[0].title=window.RadiantQ_ScrollToTask,b("div:eq(0)",this.element).append(this.BrowseToTaskCueRight));this._ganttChart_ViewportTimeRangeChanged(this,null);(this.options.TaskBarBrowseToCueLeftTemplate||this.options.TaskBarBrowseToCueRightTemplate)&&this.options.GanttChart.BeforeChartHZScroll.subscribe(this._GanttChart_BeforeChartHZScroll,this)},_enableTouchEvents:function(){},
tapDownX:null,tapDownY:null,tapHoldTimer:null,canShowContextMenu:!1,timeOutFunctions:null,_onTouchstart:function(a){a=a.touches?a.touches[0]:a;var c=this;c.tapDownX=a.clientX;c.tapDownY=a.clientY;c.tapHoldTimer=setTimeout(function(){c.canShowContextMenu=!0},500)},_onTouchMove:function(){clearTimeout(this.tapHoldTimer)},_onTouchend:function(a){if("ShowContextMenu"==this.options.GanttChart.options.TouchTapAction||!0==this.canShowContextMenu){var c=a.changedTouches?a.changedTouches[0]:a;if(this.tapDownX==
c.clientX&&this.tapDownY==c.clientY){var b=this;clearTimeout(b.timeOutFunctions);b.timeOutFunctions=setTimeout(function(){b._showContextMenu(a,c)},40)}this.canShowContextMenu=!1}clearTimeout(this.tapHoldTimer)},_showContextMenu:function(a,c){if("mouse"!=a.pointerType&&4!=a.pointerType){var e=b.ui?b.ui.version||"1.5.2":null;e&&1.11<=parseFloat(e)&&b.isFunction(b.jQContextMenu)?b(a.target).jQContextMenu({x:c.clientX,y:c.clientY}):b.isFunction(b.contextMenu)&&b(a.target).contextMenu({x:c.clientX,y:c.clientY})}},
_GanttChart_BeforeChartHZScroll:function(a,c){this.BrowseToCueLeft+=c.diff;this.BrowseToTaskCueLeft&&this.BrowseToTaskCueLeft.css({"margin-left":this.BrowseToCueLeft});"none"==this.BrowseToTaskCueLeftVisibility&&(this.BrowseToCueRight+=c.diff);this.BrowseToTaskCueRight&&this.BrowseToTaskCueRight.css({"margin-left":this.BrowseToCueRight})},_browseToTaskCue_Click:function(a){var c=this.tasksListControl,b=c.options.GanttChart;this==c.BrowseToTaskCueLeft[0]?(c=c._tracker.GetNextTaskStartTimeLeft(b.VisualStartTime),
c==Date.MinValue?b._setOption("AnchorTime",b.VisualStartTime):b._setOption("AnchorTime",c)):(c=c._tracker.GetNextTaskStartTimeRight(b.VisualEndTime),c==Date.MinValue?b._setOption("AnchorTime",b.VisualEndTime):b._setOption("AnchorTime",c));a.preventDefault();return!1},addToViewModel:function(a,c){this.options.KnockoutObjectName&&(this.options.KnockoutObjectName[a]=c)},removeFromViewModel:function(){for(var a=0,c=this.options.RowCount,b="Row"+c+"Task"+a,g=this.options.KnockoutObjectName[b];g;)delete this.options.KnockoutObjectName[b],
a++,b="Row"+c+"Task"+a,g=this.options.KnockoutObjectName[b]},applayBindings:function(a,c){c?ko.applyBindingsToDescendants(a,c):ko.applyBindingsToDescendants(a)},TaskCollectionChange:function(){},_drawTaskBar:function(){this._updateMaxOverlappingTasksCount();this._destory();var a=this.options;b.isFunction(this.tasksCollection)&&(this.tasksCollection=this.tasksCollection());if(null!=this.ItemTemplate&&this.taskCollectionArray(this.tasksCollection))if(this.isTemplateDefined(this.tasksCollection,a))a.FlexyGantt.UseTimeRangeFilteredTasksInRows()||
this._bindTaskCollectionChange(!0),this.tasksCollection.length&&this._createNewTaskbars();else{a=this.tasksCollection._data;a.guid||(a.guid=RadiantQ.Gantt.guidGenerator());var c=this._createNewTaskbar(a,this.currentUniqueTaskSuffix++,0);c.guid=a.guid;this.TaskListControl.append(c)}},taskCollectionArray:function(a){return a._data||a instanceof Array?!0:!1},isTemplateDefined:function(a,c){return a instanceof Array&&(c.TasksListProperty||c.ParentTasksListProperty)?!0:!1},templateCache:{},taskTemplate:function(a){var c=
null,c=null==this.templateCache[this.ItemTemplate]?RadiantQ.Template(this.ItemTemplate):this.templateCache[this.ItemTemplate];a=b.trim(c(a));this.templateCache[this.ItemTemplate]=c;c=b(a);c.hasClass("rq-gc-parentBar")||c.addClass("taskbar");c.addClass("rq-gc-tooltip");return c},_bindTaskCollectionChange:function(a){function c(a,c){a.type?e(a.type,null!=c?c.items:c,null!=c?c.index:void 0):"Add"==c.Action?e("insert",c.NewItems):"Remove"==c.Action&&e("remove",c.OldItems)}function e(a,c,e){if("insert"==
a)if(g.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight)g.RedrawTaskRow();else{for(var d=document.createDocumentFragment(),f=0;f<c.length;f++){var p=e?e:g.tasksCollection.indexOf(c[f]);(p=g._createNewTaskbar(c[f],g.currentUniqueTaskSuffix++,p))&&!1==p.hasClass("notInRange")&&d.appendChild(p[0]);g.options.Parent.ApplyTooltip(p)}g.TaskListControl.append(d)}"Reset"==a&&(g.TaskListControl.empty(),g.tasksCollection.length&&(g._createNewTaskbars(),
g.options.Parent.ApplyTooltip(b(".rq-gc-tooltip",g.options.Parent.element))));if("remove"==a)for(f=0;f<c.length;f++){e=c[f];a=[];for(d=0;d<g.blocks.length;d++){var p=g.blocks[d],q=FirstOrDefaultEndityInArray(p.entities,e);if(null!=q&&(RemoveInArray(p.entities,q),!ContainsValueInArray(a,p))){a.push(p);break}}d=g.TasksList;for(e=0;e<d.length;e++)if(d[e][0].DataContext==c[f]){g.options.FlexyGantt&&g.options.FlexyGantt.MulipleTaskSelector&&g.options.FlexyGantt.MulipleTaskSelector.ExcludeElements(d[e]);
d[e].remove();d.splice(e,1);break}g.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&g._blockIntact(a)}try{g.options.KnockoutObjectName&&g.applayBindings(g.options.KnockoutObjectName)}catch(r){}c=g.TasksList;for(f=e;f<c.length;f++)e=c[f],e.data("TaskBar").options.index=f,e.attr("index",f);g._updateBrowseToTaskCuesStates()}if(this.tasksCollection&&!1!=this.tasksCollection instanceof Array){var g=this;if(null==this.onSourceUpdated||
void 0==this.onSourceUpdated)this.onSourceUpdated=c;this.tasksCollection.CollectionChanged?this.tasksCollection.CollectionChanged.unsubscribe(this.onSourceUpdated):b.observable(this.tasksCollection).unbind("insert remove replaceAll",this.onSourceUpdated);a&&(this.tasksCollection.CollectionChanged?this.tasksCollection.CollectionChanged.subscribe(this.onSourceUpdated):b.observable(this.tasksCollection).bind("insert remove replaceAll",this.onSourceUpdated))}},RedrawTaskRow:function(){this._bindTaskCollectionChange(!1);
this.TasksList=[];this.TaskListControl.empty();this.TaskListControl.remove();this._unsubscribeEvents();this.refresh();this.options.KnockoutObjectName&&this.applayBindings(this.options.KnockoutObjectName,this.element[0]);this.options.Parent.ApplyTooltip(b(".rq-gc-tooltip",this.element))},_createNewTaskbar:function(a,c,b){var g=this.options,d=null,f=!1;if(g.KnockoutObjectName)try{for(var k in g.KnockoutObjectName)if(0==k.indexOf("Row")&&this.options.KnockoutObjectName[k]===a){d=k;f=!0;break}!1==f&&
(d="Row"+g.RowCount+"Task"+c,this.addToViewModel(d,a))}catch(l){}c=this.ItemTemplate;this.ItemTemplate=this.ItemTemplate.replace(/RQDataContext/g,d);d=this.taskTemplate(a);f=null;if(f=d)k=!1,k="rq-gc-taskbar-label"==f.className,!1==k&&(k="label"==f.className),!1==k&&(d.addClass("taskItemControl"),a.nodeType=function(){},b=d.eq(0)[this.getChildWidgetName("taskbar")]({baseTimeUnitWidth:40,GanttChart:g.GanttChart,Parent:{element:this},ApplyBarWidthOptimization:!0,OverlappedTasksRenderingOptimization:g.OverlappedTasksRenderingOptimization,
ComputedStartTime:g.GanttChart.options.ComputedStartTime,Data:a,index:b,IsParentTypeRow:g.Data.IsParentType(),TaskStartTime:g.TaskStartTime,ProgressPercentBinding:g.ProgressPercentBinding,TaskEndTime:g.TaskEndTime,ParentTaskStartTime:g.ParentTaskStartTime,ParentTaskEndTime:g.ParentTaskEndTime,TaskTooltipTemplate:g.TaskTooltipTemplate,MovingInfoPopup:g.MovingInfoPopup,TimeIndicatorLineOption:g.TimeIndicatorLineOption,FlexyGantt:g.FlexyGantt,ResizeInfoPopup:g.ResizeInfoPopup,DataSource:g.Data,KnockoutObjectName:g.KnockoutObjectName,
DragThumb:g.DragThumb,ResizeThumb:g.ResizeThumb,StartResizeThumb:g.StartResizeThumb,UseRQModelBinder:g.UseRQModelBinder,EnableAutoAdjustForSchedule:g.EnableAutoAdjustForSchedule,CanDrawDependency:g.CanDrawDependency,MinimumWidthForParentBar:g.MinimumWidthForParentBar}),a.nodeType=null,this.options.UseRQModelBinder&&RadiantQ.Bind(b,a),this.TasksList.push(b));this.ItemTemplate=c;return d},_createNewTaskbars:function(a){var c=document.createDocumentFragment();a||(a=this.tasksCollection);for(var b=0;b<
a.length;b++){a[b].guid||(a[b].guid=RadiantQ.Gantt.guidGenerator());var g=this._createNewTaskbar(a[b],this.currentUniqueTaskSuffix,b);g.guid=a[b].guid;g&&!1==g.hasClass("notInRange")&&c.appendChild(g[0]);this.currentUniqueTaskSuffix++}this.TaskListControl.append(c);this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&(this._destory(),this._processTasksListForOverlap())},_overlapTimer:null,_processTasksListForOverlap:function(){if(this.TasksList.length){for(var a=
0;a<this.TasksList.length;a++){var c=this.TasksList[a].data("TaskBar");c&&this._onNewEntityAdded(c)}this._computeIndicesAndHeight()}this._updateMaxOverlappingTasksCount()},_computeIndicesAndHeight:function(){for(var a=0;a<this.blocks.length;a++)this.blocks[a].ComputeIndicesAndHeight()},_destroy:function(){this.options.FlexyGantt&&this.options.FlexyGantt.MulipleTaskSelector&&this.options.FlexyGantt.MulipleTaskSelector._excludeElements(this.TasksList);this._refreshUIEventHandler&&(this._refreshUIEventHandler.Dispose(),
this._refreshUIEventHandler=null);this.options.Data._refreshUIEventHandler&&(this.options.Data._refreshUIEventHandler.Dispose(),this.options.Data._refreshUIEventHandler=null);this.element.empty();this._cache._hiddenTaskItemCtrlElems.empty();this._bindTaskCollectionChange(!1);this.blocks=[];this.element.data("TasksListControl",null);this._unsubscribeEvents();null!=this.options.KnockoutObjectName&&this.removeFromViewModel();!1==this.options.GanttChart.options.IsPrinting&&this.options.Data.ChartRow(null);
this.tasksCollection&&this.tasksCollection.Destroy&&this.tasksCollection.Destroy()},_destory:function(){this.blocks=[]},_unsubscribeEvents:function(){this.options.GanttChart&&(this.options.GanttChart.ViewportTimeRangeChanged.unsubscribe(this._ganttChart_ViewportTimeRangeChanged,this),this.options.GanttChart.BeforeChartHZScroll.unsubscribe(this._GanttChart_BeforeChartHZScroll,this))},_updateItemsSourceAndTemplates:function(){var a=this.options;a.IsParentTypeRow=a.Data.IsParentType();this.ItemTemplate=
a.IsParentTypeRow?a.ParentTaskTemplate:a.TaskTemplate;a.Data.IsParentType()?null!=a.ParentTasksListProperty?a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data._data[a.ParentTasksListProperty],a.ParentTaskStartTime,a.ParentTaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=a.Data._data[a.ParentTasksListProperty]:(a.FlexyGantt.UseTimeRangeFilteredTasksInRows(),
this.tasksCollection=a.Data):null!=a.TasksListProperty?a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data._data[a.TasksListProperty],a.TaskStartTime,a.TaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=a.Data._data[a.TasksListProperty]||[]:a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,
a.Data,a.TaskStartTime,a.TaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=a.Data||[];"function"==typeof this.tasksCollection&&(this.tasksCollection=this.tasksCollection());this._initBrowseToCueTracker()},_taskCollectionChange:function(a,c){if("insert"==a.type){for(var e=0;e<c.items.length;e++)this.tasksCollection.push(c.items[e]);this._createNewTaskbars();this.options.Parent.ApplyTooltip(b(".rq-gc-tooltip",this.options.Parent.element))}if("remove"==
a.type)for(var g=this.TasksList.length,e=g-1;0<=e;e--)this.TasksList[e][0].DataContext==c.items[0]&&(this.TasksList[e].remove(),this.TasksList.splice(e,1));if("Reset"==a.type){g=this.TasksList.length;for(e=0;e<g;e++)this.TasksList[e].remove();this.TasksList.splice(0,g);this._createNewTaskbars();this.options.Parent.ApplyTooltip(b(".rq-gc-tooltip",this.options.Parent.element))}try{this.options.KnockoutObjectName&&this.applayBindings(this.options.KnockoutObjectName,this.element[0])}catch(d){}},_updateMaxOverlappingTasksCount:function(){if(this.options.OverlappedTasksRenderingOptimization==
RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){for(var a=1,c=0;c<this.blocks.length;c++)var e=this.blocks[c].GetRowCount(),a=e>a?e:a;this.options.Data&&(!1==this.options.GanttChart.options.IsPrinting?this.options.Data.MaxOverlappingBlocksRowCount(a):this.options.GanttChart.options.RowHeightBinding&&this.options.GanttChart.options.RowHeightBinding.Converter?(a=this.options.GanttChart.options.RowHeightBinding.Converter(a),this.element.height(a-1),this.element.parent().height(a),
c=this.options.FlexyGantt,c=c.GetGanttTable?c.GetGanttTable():b(".rq-FlexyTable").data("VWGrid"),c=b(c.GetRowFromData(this.options.Data)),c.length&&(e=b("td",c),e.height(a-1),e.css("height",a-1+"px"),e[0]._isTriggered||(e[0]._isTriggered=!0),c.height(a)),this.options.GanttChart.updateGanttDependencyLines(),this.options.Data._resetMaxOverlappingBlocksRowCount()):this._updateChartRowHeight(this.options.Data))}},_updateChartRowHeight:function(a,c){var e=b(a.TableRow()).height();this.element.height(e-
1);this.element.parent().height(e);this.options.GanttChart.updateGanttDependencyLines()},_onNewEntityAdded:function(a){var c=[];a.Height=parseInt(this.element[0].style.height);for(var b=0;b<this.blocks.length;b++)this.blocks[b].IsOverlapping(a,!0)&&c.push(this.blocks[b]);if(0==c.length)a=new OverlappingBlock(a),this.blocks.push(a);else if(1==c.length)c[0].AddEntity(a),a=c[0];else{a=new OverlappingBlock(a);for(b=0;b<c.length;b++){for(var g=c[b],d=0;d<g.entities.length;d++)a.AddEntity(g.entities[d]);
RemoveByValueInArray(this.blocks,g)}this.blocks.push(a)}return a},_blockIntact:function(a){if(a&&0<a.length){var c=[];a=[].concat(a);for(var b=[],g=0;g<a.length;g++){var d=a[g];RemoveByValueInArray(this.blocks,d);for(var f=0;f<d.entities.length;f++){var k=d.entities[f];c.push(k);k=this._onNewEntityAdded(k);ContainsValueInArray(b,k)||b.push(k)}}for(g=0;g<b.length;g++)b[g].ComputeIndicesAndHeight()}this._updateMaxOverlappingTasksCount()},_getIntersectingBlock:function(a,c){for(var b=null,g=0;g<this.blocks.length;g++)if(this.blocks[g].IsOverlapping(a,
!1)){b=this.blocks[g];break}return b},_getIntersectingBlocks:function(a){for(var c=[],b=0;b<this.blocks.length;b++)this.blocks[b].IsOverlapping(a,!1)&&c.push(this.blocks[b]);return c},RemoveEntity:function(a,c){var b=RemoveByValueInArray(a.entities,c);0==a.entities.length&&this.RemoveBlock(a);return b},RemoveBlock:function(a){return RemoveByValueInArray(this.blocks,a)},_setOption:function(a,c){switch(a){case "viewStartTime":case "viewEndTime":this._updateStartAndEnd()}this.widgetBaseSetOption.apply(this,
arguments)},_updateStartAndEnd:function(){for(var a=0;a<this.TasksList.length;a++)b(this.TasksList[a])[this.getChildWidgetName("taskbar")]({viewStartTime:this.options.viewStartTime,viewEndTime:this.options.viewEndTime})},_tracker:null,_cueTemplatePropertyChanged:function(a,c){a._initBrowseToCueTracker()},isArray:function(a){return a instanceof Array},_initBrowseToCueTracker:function(){var a=this.options.TasksListProperty;if(null!=this.options.TaskBarBrowseToCueLeftTemplate||null!=this.options.TaskBarBrowseToCueRightTemplate){null!=
this._tracker&&this._tracker.Dispose();var c=this.options.Data._data;this.options.IsParentTypeRow||null==a||(c=this.options.Data._data[a],c="function"==typeof c?c():c);c&&(!1==c instanceof RadiantQ.RQ_ObservableCollection&&(!1==this.isArray(this.tasksCollection)&&window.console&&(c=[c]),new RadiantQ.RQ_ObservableCollection(c)),a=this.options.IsParentTypeRow?this.options.ParentTaskStartTime:this.options.TaskStartTime,RadiantQ.FlexyGantt.TasksPositionTracker&&null!=a&&(this._tracker=new RadiantQ.FlexyGantt.TasksPositionTracker(this.options.FlexyGantt,
c,{Property:a})))}else null!=this._tracker&&this._tracker.Dispose()},_ganttChart_ViewportTimeRangeChanged:function(a,c){this.BrowseToCueLeft=this.options.GanttChart.GanttChart.scrollLeft();this.BrowseToCueRight=this.BrowseToCueLeft+this.options.GanttChart.GanttChart[0].clientWidth-30;this._updateBrowseToTaskCuesStates()},_updateBrowseToTaskCuesStates:function(){this.BrowseToTaskCueLeftVisibility=null!=this.options.TaskBarBrowseToCueRightTemplate&&null!=this._tracker&&this._tracker.AreTasksAvailableBefore(this.options.GanttChart.VisualStartTime)?
"block":"none";this.BrowseToTaskCueRightVisibility=null!=this.options.TaskBarBrowseToCueLeftTemplate&&null!=this._tracker&&this._tracker.AreTasksAvailableAfter(this.options.GanttChart.VisualEndTime)?"block":"none";this.BrowseToTaskCueLeft&&this.BrowseToTaskCueLeft.css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.BrowseToTaskCueRight&&("block"==this.BrowseToTaskCueLeftVisibility&&(this.BrowseToCueRight=this.options.GanttChart.GanttChart[0].clientWidth-60),this.BrowseToTaskCueRight.css({"margin-left":this.BrowseToCueRight,
display:this.BrowseToTaskCueRightVisibility}))},UpdateItemForCue:function(a,c,b){null!=this._tracker&&(this._tracker.UpdateTimes(c,b),this._updateBrowseToTaskCuesStates())}};f.TasksListControl=d})(RadiantQ.Gantt.Widget,jQuery);
(function(f){var b=RadiantQ.Gantt.Utils.TimeComputingUtils,d={DependencyViews:null,options:{name:"GanttChart",TimeRangeHighlightBehavior:null,BottomTwoHeaders:null,TimeScaleHeaders:null,ComputedStartTime:null,ComputedEndTime:null,TimeIndicatorLineOption:RadiantQ.Gantt.TimeIndicatorLines.None,ProvideWidthForMilestoneShape:null,BaseTimeUnitWidth:null,BaseTimeScaleType:null,AnchorTime:null,ViewWidth:2E3,ResizeToFit:!1,ZoomOptions:null,ScrollOptions:null,CustomChartBackgroundRanges:null,BaseTimeUnitWidthMaximum:null,
BaseTimeUnitWidthMinimum:null,MinTimeUnitWidthForHeaderVisibility:null,OverlappedTasksRenderingOptimization:null,TaskItemTemplate:null,ParentTaskItemTemplate:null,ProgressBarTemplate:null,ProgressPercentBinding:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,TasksListProperty:null,ParentTasksListProperty:null,EnableOverlappedRenderingBindingProperty:"",FlatItemsSource:null,RowHeight:null,TaskBarHeight:null,
TaskTooltipTemplate:null,ConnectingInfoPopup:null,ResizeInfoPopup:null,MovingInfoPopup:null,EnablePagerButtonLeft:!0,EnablePagerButtonRight:!0,BeforePagingGanttChart:null,SpecialLineInfos:null,Parent:null,KnockoutObjectName:null,DependencyLineColor:null,DependencyListSource:null,GanttDependencyViews:null,WorkTimeSchedule:null,GanttType:null,EnableAlternativeRowBackground:!0,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1,UseChartVirtualization:!1,OnTaskBarLoad:null,
OnDependencyLineLoad:null,ShowContextMenuOnTouchTap:null,RowRenderingScheduleBinding:null,EnableCustomRowBackground:!1,EnableCustomRowForeground:!1,ShowVerticalScrollBar:!1,EnableAutoAdjustForSchedule:!0,CustomOverlappingBlockFn:null,AreTasksOverlappingCallBack:null,CanDrawDependency:!1,MileStoneTemplate:null,MinimumWidthForParentBar:1,EnablePagingOnAutoScroll:!1,CustomBarShiftOnMove:null,GetScheduleToPlotWith:null,DependencyTooltipTemplate:null,ShowPreferredStartIndicator:{Enabled:!1,ApplyDependenciesOnClear:!1,
initCallback:null},ShowDependencyLines:!0},AfterChartRowsRender:null,VSB:null,_canUpdate:!0,lave:null,TaskOnMouseHover:null,TaskViewOnMouseHover:null,CanUpdate:function(a,c){if(void 0==a)return this._canUpdate;a!=this._canUpdate&&(this._canUpdate=a)&&(this.UpdateGanttComponents(c),this._canUpdate=!0)},GetRowFromData:function(a){a=a.uid;a=f(".rq-gc-rowsParent-table",this.element).find('tr[uid="'+a+'"]');return a.length?a:null},GetDataFromRow:function(a){a=f(a).data("uid");for(var c=0;c<this.options.FlatItemsSource.length;c++){if(this.options.FlatItemsSource[c].uid==
a)return this.options.FlatItemsSource[c];null}},OnAnchorTimeChanged:function(){this.triggerEvent("AnchorTimeChanged")},LoadingRow:function(a){this.element.trigger("LoadingRow",[a])},ViewableDependencyViews:new RQArray,RefreshUIEvent:new ObjectEvent("RefreshUIEvent"),RefreshRowBackground:new ObjectEvent("RefreshRowBackground"),RefreshRowForeground:new ObjectEvent("RefreshRowForeground"),TriggerRefreshUI:function(a){this.triggerEvent("RefreshUi",this,a);this.RefreshUIEvent.raise(this,a)},UpdateGanttComponents:function(a){this.TriggerRefreshUI({options:this.options,
isInit:!0,ForceToReDrawRows:a});this.ScrollViewerElement_LayoutUpdated();this.options.Parent.options.ShowGridTable&&(a=this.options.Parent.GetGanttTable())&&a.showTableBody&&a.showTableBody()},BeginUpdate:function(){this.CanUpdate(!1)},EndUpdate:function(a){this.CanUpdate(!0,a)},_validateViewWidth:function(){if(!this.options.ResizeToFit&&(300>this.options.ViewWidth||12E3<this.options.ViewWidth))throw"GanttChart.ViewWidth has to be in the range 300 to 12000";},headerZoomTracker:null,headerScrollTracker:null,
VisualStartTime:null,VisualEndTime:null,ViewportTimeRangeChanged:null,BeforeChartHZScroll:null,TaskItemCtrlByData:new RadiantQ.Gantt.Dictionary,AddTICByData:function(a,c){return this.TaskItemCtrlByData.Add(a,c)},GetTICByData:function(a){return this.TaskItemCtrlByData.GetItemByKey(a)},RemoveTICByData:function(a){return this.TaskItemCtrlByData.Remove(a)},_create:function(){this.TaskItemCtrlByData=new RadiantQ.Gantt.Dictionary;this.RefreshUIEvent=new ObjectEvent("RefreshUIEvent");this.ViewportTimeRangeChanged=
new ObjectEvent("ViewportTimeRangeChanged");this.BeforeChartHZScroll=new ObjectEvent("BeforeChartHZScroll");this.AfterChartRowsRender=new ObjectEvent("AfterChartRowsRender");this.element.addClass("rq-ganttChart");var a=this.$GanttChart=f('<div id="'+this._createUniqueID("GanttChart")+'" class="rq-gc-topDiv '+window.radiantQclasses.chartBackground+'" style="height:100%; width:100%;"/>');this.element.append(a);this.GanttChart=a;this.element.addClass("ui-widget-content");this.initialization();var c=
this.$ChartArea=f('<div id="'+this._createUniqueID("rq-gc-chartArea")+'" class="rq-gc-chartArea" style="width:100%; height:100%;position:relative;"/>');this.element.data("GanttChart",this);a.append(c);!1==this.options.IsPrinting&&this.initChartScrollBar();var b=this.$TimeSpanHeader=f('<div id="'+this._createUniqueID("timeSpanHeader")+'" class="timeSpanHeader"/>');c.append(b);b=f('<div id="'+this._createUniqueID("rq-gc-chartArea-div")+'" class="rq-gc-chartArea-div" style="width:'+this.options.ViewWidth+
'px; height:100%;position:relative; overflow:hidden;"/>');c.append(b);c=this.$TaskBarContainer=f('<div id="'+this._createUniqueID("rq-gc-viewsContainer-div")+'" class="rq-gc-viewsContainer-div" style="width:100%;position:absolute; height:inherit;"/>');b.append(c);this.$GanttChartCustomRangeBackgroundDIV=f('<div id="'+this._createUniqueID("rq-gc-customRange-background")+'" class="rq-gc-customRange-background" style="position:absolute;height:inherit;"/>').appendTo(b);this.$GanttChartBackgroundDiv=f('<div id="'+
this._createUniqueID("GanttChartBackgroundDiv")+'" class="GanttChartBackgroundDiv" style="position:absolute;width:100%;height:inherit;"/>').appendTo(b);this.$SpecialLinesDiv=f('<div id="'+this._createUniqueID("SpecialLinesDiv")+'" class="SpecialLinesDiv" style="position:absolute;height: inherit;"/>').appendTo(b);a.css("overflow","hidden");!1==this.options.IsPrinting&&this.ApplyDockPanelSettings(this.element);this.CanUpdate(!1);!1==this.options.IsPrinting&&this.options.Parent.OnChartTemplateApplied(this);
this.ViewableDependencyViews=new RQArray},initChartScrollBar:function(){var a=f("<div class='rq-gc-chartVSBContainer' style='float:left;'><div class='rq-gc-SB-header ui-widget-header'></div></div>"),c=f("<div class='rq-gc-chart-VScrollBar'><div class='rq-gc-chart-scrollContent' style='width: 1px;'></div></div>");a.append(c);this.element.append(a);!1==this.options.ShowVerticalScrollBar&&a.css("display","none")},_onVerticalScroll:!1,_$chartVSBContainer:null,_vsbScrollHandler:null,syncVerticalScrollBar:function(){function a(a,
c){var b=c.scrollTop();switch(a.which){case 38:c.scrollTop(b-50);break;case 40:c.scrollTop(b+50);break;case 33:var e=c[0].clientHeight;c.scrollTop(b-e);break;case 34:e=c[0].clientHeight,c.scrollTop(b+e)}}if(this.options.IsPrinting||this._onVerticalScroll||void 0==this.VSB){if(this.options.IsPrinting){var c=this.options.ShowVerticalScrollBar&&this.$rowsParent[0].scrollHeight>this.$rowsParent[0].clientHeight,b=f(".rq-gc-chart-VScrollBar",q),g=this.element.outerWidth();if(!1==c)this.$GanttChart.width(g);
else{var d=b.outerWidth()+3;l.width(g-d)}}}else{var m=this.options.Parent.element,k=this.getGridTBodyParent(m),l=this.$GanttChart,n=f(".rq-gc-chartArea-div",l),p=this.$rowsParent;this._$chartVSBContainer||(this._$chartVSBContainer=f(".rq-gc-chartVSBContainer",m));var q=this._$chartVSBContainer,b=f(".rq-gc-chart-VScrollBar",q),r=f(".rq-gc-chart-HScrollBar-content",this.HScrollBar),s=f(".rq-gc-pager-left-Button",this.HDockPanel),d=f(".rq-gc-pager-right-Button",this.HDockPanel),u=f("div.rq-gc-dependencysParent",
l),w=this.VSB.$actualContent,t=f(".rq-gc-chart-scrollContent",b),c=this.options.ShowVerticalScrollBar&&p[0].scrollHeight>p[0].clientHeight,g=this.element.outerWidth(),v=this.options.ViewWidth,z=s.outerWidth(!0)+d.outerWidth(!0),s=parseInt(p.css("margin-top")||"0");if(!1==c)l.width(g),q.css("display","none"),!1==this.options.ResizeToFit?r.width(v-z):r.width(0),n=n.height()-this.HDockPanel.outerHeight()-s,p.height(n),u.height(n);else{d=b.parent().outerWidth()+3;l.width(g-d);q.css("display","block");
!1==this.options.ResizeToFit?r.width(v-z+d):r.width(0);g=f(".timeSpanHeader",m);m=f(".rq-gc-SB-header",m);q=g.outerHeight(!0);g=q-g.height();m.height(q+g);0<l.length&&(n=n.height()-this.HDockPanel.outerHeight()-s,b.height(n),p.height(n),u.height(n));this._vsbScrollHandler&&(this._vsbScrollHandler.Dispose(),this._vsbScrollHandler=null);0<k.length&&k.unbind(".syncGridVerticalBar");0<b.length&&b.unbind(".syncChartVerticalBar");0<p.length&&p.unbind(".syncGridVerticalBar");if(c){var x=this,A=0,y=0;0<l.length&&
this.VSB&&(this._vsbScrollHandler=this.VSB.OnScroll.subscribe(function(a,c,g){x.options.Parent.PreventDefaultFns||(y=p.scrollTop(),y!=A&&b.scrollTop(y))}),b.bind("scroll.syncChartVerticalBar",function(){if(this.options.Parent.PreventDefaultFns)return!1;this._onVerticalScroll=!0;A=b.scrollTop();y!=A&&p.scrollTop(A);this._onVerticalScroll=!1}.bind(this)),p.attr("tabindex","1"),p.bind("keydown.syncGridVerticalBar",function(c){this.options.Parent.PreventDefaultFns||(a(c,l),l.focus())}.bind(this)));if(k){var C=
null;k.bind("mousewheel.syncGridVerticalBar",function(a,c){if(this.options.Parent.PreventDefaultFns)return!1;null!=C&&clearTimeout(C);C=setTimeout(function(){var a=k.scrollTop();k.scrollTop(a-50*Math.round(c));C=null},0)}.bind(this));k.attr("tabindex","1");k.bind("keydown.syncGridVerticalBar",function(c){this.options.Parent.PreventDefaultFns||0<f(".editor",k).length||(a(c,k),k.focus())}.bind(this))}}!1==this.options.UseChartVirtualization&&(c=this.VSB.element.height(),this.VSB.UpdateScrollContentHeight(c))}w=
w.height();t.height(w);u.children(".rq-gc-dependencyControl").height(w)}},SyncChartScrollBarWith:function(a,c){RadiantQ.Gantt.RQPrint.InternalPrintOptions.IsNewPrinting||this.VSB.SyncScrollEventWith(a,c,this.options.Parent.VerticalScrollEvent)},getGridTBodyParent:function(a){return f(".ui-grid-body",a)},_createUniqueID:function(a){return this.element[0].id+"_"+a},_getUniqueSelectorIdByID:function(a){return"#"+this._createUniqueID(a)},ganttChart:null,refreshDockPanel:function(){var a=this,c=a.options.Parent.element;
this.getGridTBodyParent(c);f(".rq-gc-chart-scrollBar",c);var b=f(".rq-gc-pager-left-Button",a.element),g=f(".rq-gc-pager-right-Button",a.element);setTimeout(function(){var c=a.element.width();a.HScrollBar.width(c);var d=b.outerWidth(!0)+g.outerWidth(!0);a.HScrollBar.width(c-d);a.syncVerticalScrollBar();(a.VisualStartTime||a.options.ResizeToFit)&&a.ScrollViewerElement_LayoutUpdated()},200)},SyncChartScrollLeft:function(){var a=this.$GanttChart.scrollLeft(),c=this.HScrollBar.scrollLeft();a!=c&&this.$GanttChart.scrollLeft(c)},
ScrollLeftTo:function(a){this.HScrollBar.scrollLeft(a)},GetBTSTToRenderAgainst:function(){return this.options.BaseTimeScaleType<ns_gantt.TimeScaleType.Days?null!=this.options.BottomTwoHeaders&&0<this.options.BottomTwoHeaders.length&&this.options.BottomTwoHeaders[0].Type==ns_gantt.TimeScaleType.Days?ns_gantt.TimeScaleType.Days:this.options.BaseTimeScaleType:this.options.BaseTimeScaleType},GetBTUWToRenderAgainst:function(){return this.options.BaseTimeScaleType<ns_gantt.TimeScaleType.Days?null!=this.options.BottomTwoHeaders&&
0<this.options.BottomTwoHeaders.length&&this.options.BottomTwoHeaders[0].Type==ns_gantt.TimeScaleType.Days?this.options.BaseTimeScaleType==ns_gantt.TimeScaleType.Hours?Math.round(24E3*this.options.BaseTimeUnitWidth)/1E3:Math.round(144E4*this.options.BaseTimeUnitWidth)/1E3:this.options.BaseTimeUnitWidth:this.options.BaseTimeUnitWidth},_ganttChartEvents:function(){var a=this;f(window).resize(function(){a.refreshDockPanel()});var c=this.HScrollBar,b=this.$GanttChart,g=f(".rq-gc-pager-left-Button",this.HDockPanel),
d=f(".rq-gc-pager-right-Button",this.HDockPanel),m=f(".rq-gc-pager-left-arrow",this.HDockPanel),k=f(".rq-gc-pager-right-arrow",this.HDockPanel);c.height();var l=!0;c.scroll(function(g){g=b.scrollLeft();var d=c.scrollLeft();g==d||1==c[0].offsetHeight&&!l||(a.BeforeChartHZScroll.raise(this,{diff:d-g,value:g,newValue:d}),b.scrollLeft(d))});b.scroll(function(){b.scrollLeft()==c.scrollLeft()||1==c[0].offsetHeight&&!l||(l=!1,c.scrollLeft(b.scrollLeft()));a.ScrollViewerElement_LayoutUpdated()});g.bind("touchstart",
function(c){a.PagerLeftBtnOnMouseDown(a,m)});g.bind("touchEnd",function(c){a.PagerLeftBtnOnMouseUp(a,m)});g.mousedown(function(c){a.PagerLeftBtnOnMouseDown(a,m)});g.mouseup(function(c){a.PagerLeftBtnOnMouseUp(a,m)});d.bind("touchstart",function(c){!0!=a.options.Parent.PreventDefaultFns&&a.PagerRightBtnOnMouseDown(a,k)});d.bind("touchEnd",function(c){!0!=a.options.Parent.PreventDefaultFns&&a.PagerRightBtnOnMouseUp(a,k)});d.mousedown(function(c){!0!=a.options.Parent.PreventDefaultFns&&a.PagerRightBtnOnMouseDown(a,
k)});d.mouseup(function(c){!0!=a.options.Parent.PreventDefaultFns&&a.PagerRightBtnOnMouseUp(a,k)});d.hover(function(){a.options.EnablePagerButtonRight&&k.addClass("rq-gc-pager-right-arrow-hover")},function(){k.removeClass("rq-gc-pager-right-arrow-hover")});g.hover(function(){a.options.EnablePagerButtonLeft&&m.addClass("rq-gc-pager-left-arrow-hover")},function(){m.removeClass("rq-gc-pager-left-arrow-hover")})},PagerLeftBtnOnMouseDown:function(a,c){if(!0!=a.options.Parent.PreventDefaultFns&&a.options.EnablePagerButtonLeft){c.removeClass("rq-gc-pager-left-arrow-hover");
c.addClass("rq-gc-pager-left-arrow-click");var b=!1;null!=a.options.BeforePagingGanttChart&&(b=a.options.BeforePagingGanttChart("LeftPagerButton",c,a));b||a.PageLeft(!0)}},PagerLeftBtnOnMouseUp:function(a,c){a.options.EnablePagerButtonLeft&&(c.removeClass("rq-gc-pager-left-arrow-click"),c.addClass("rq-gc-pager-left-arrow-hover"))},PagerRightBtnOnMouseDown:function(a,c){if(!0!=a.options.Parent.PreventDefaultFns&&a.options.EnablePagerButtonRight){c.removeClass("rq-gc-pager-right-arrow-hover");c.addClass("rq-gc-pager-right-arrow-click");
var b=!1;null!=a.options.BeforePagingGanttChart&&(b=a.options.BeforePagingGanttChart("RightPagerButton",c,a));b||a.PageRight(!0)}},PagerRightBtnOnMouseUp:function(a,c){a.options.EnablePagerButtonRight&&(c.removeClass("rq-gc-pager-right-arrow-click"),c.addClass("rq-gc-pager-right-arrow-hover"))},GetBarRenderStartTime:function(a){this.ApplyBarWidthOptimization=!0;var c=this.ConvertXToTime(-10);return a.isLessThan(c)?c:a},GetBarRenderEndTime:function(a){this.ApplyBarWidthOptimization=!0;var c=this.ConvertXToTime(this.options.ViewWidth+
10);return a.isGreaterThan(c)?c:a},ScrollViewerElement_LayoutUpdated:function(){var a=this.VisualStartTime,c=this.VisualEndTime;this._updateVisualStartAndEnd();a==this.VisualStartTime&&c==this.VisualEndTime||this.OnViewportTimeRangeChanged()},_updateVisualStartAndEnd:function(){if(!0==this.options.ResizeToFit)this.VisualStartTime=this.options.ComputedStartTime,this.VisualEndTime=this.options.ComputedEndTime;else{var a=this.HScrollBar.scrollLeft();this.VisualStartTime=this.ConvertXToTime(a);this.VisualEndTime=
this.ConvertXToTime(a+this.GanttChart[0].clientWidth)}},OnViewportTimeRangeChanged:function(){this.syncVerticalScrollBar();this.ViewportTimeRangeChanged&&0<this.ViewportTimeRangeChanged.fn.length&&this.ViewportTimeRangeChanged.raise(this)},SetStartTime:function(a){var c=this.options.ComputedStartTime;if(this._isTrySetEndTime||a!=c)c=b.GetTimeSpan(c,this.options.AnchorTime),a=a.addTimeSpan(c),this._setOption("AnchorTime",a),baseUnitWidth=this.options.BaseTimeUnitWidth},ScrollToAnchorTime:function(a){if(!1==
this.options.IsPrinting){var c=this.HScrollBar,b=c[0],g=this.HScrollBar.width(),b=b.scrollWidth-g;!1==a?c.add(this.$GanttChart).scrollLeft(b/2+g/2-4):c.scrollLeft(b/2+g/2-4);this.SyncChartScrollLeft()}},BringTimeIntoView:function(a){var c=this.GetCurrentLeftMostVisibleTime(),e=this.GetCurrentRightMostVisibleTime();if(0<a.compareTo(c)||0<e.compareTo(a))!1==this.options.ResizeToFit?this._setOption("AnchorTime",a):(c=0,null!=this.options.BottomTwoHeaders&&(c=b.ConvertTimeUnitsToTimeSpan(this.options.BottomTwoHeaders[0].Type,
1)),a=a.addTimeSpan(c),this.SetStartTime(a))},TrySetEndTime:function(a){var c=this.options.ComputedStartTime,e=this.options.ComputedEndTime;if(a!=this.options.ComputedEndTime){if(a<c)throw"Specified endTime cannot be less that the current stat time of the chart view.";if(a>c){var g=f(this.element).parents().filter(".rq-ganttBase");!1==this.options.IsPrinting&&0==g.length&&window.console&&console.error&&console.error("SetEndTime can be called only when GanttChart is inside a GanttBase instance.");
var d=this.options.BaseTimeUnitWidth;a=b.GetDesiredBaseTimeUnitWidthForEndTime(c,a,c,e,this.options.BaseTimeScaleType,d);a<this.options.BaseTimeUnitWidthMinimum&&(a=this.options.BaseTimeUnitWidthMinimum);a>this.options.BaseTimeUnitWidthMaximum&&(a=this.options.BaseTimeUnitWidthMaximum);!1==this.options.IsPrinting?"ProjectGantt"==this.options.GanttType?g.data("GanttControl")._setOption("BaseTimeUnitWidth",a):g.data("FlexyGantt")._setOption("BaseTimeUnitWidth",a):this.options.BaseTimeUnitWidth=a;d!=
a&&(this._isTrySetEndTime=!0,this.SetStartTime(c),this._isTrySetEndTime=!1)}}},ApplyDockPanelSettings:function(a){var c=this.options.ViewWidth,b=this.element.width(),g="rq-gc-horizontalScrollBar";window.navigator&&navigator.platform&&null!=navigator.platform.match("Mac")&&(g+=" mac-os");var g=f('<div class="rq-gc-dockPanel rq-gc-pager-container"><table><tr><td class="pagerBtnStyle rq-gc-pager-left-Button" title="'+window.RadiantQ_TimeScaleLeftButtonTooltipString+'"><div class="rq-gc-pager-left-arrow"></div></td><td class="pagerBtnStyle rq-gc-scrollBarContainer" style="padding:0px !important;"><div class="'+
g+'" style="float: left; width: '+b+'px;"><div class="stretchDiv rq-gc-chart-HScrollBar-content" style="width: '+c+'px; height: 1px; margin-left:-2px;"></div></div></td><td class="pagerBtnStyle rq-gc-pager-right-Button" title="'+window.RadiantQ_TimeScaleRightButtonTooltipString+'"><div class="rq-gc-pager-right-arrow"></div></td></tr></table></div>'),d=f(".rq-gc-horizontalScrollBar",g),m=f(".rq-gc-pager-left-Button",g),k=f(".rq-gc-pager-right-Button",g);f(a).append(g);d.height();a=m.outerWidth(!0)+
k.outerWidth(!0);d.css({width:b-a+"px"});f(".rq-gc-chart-HScrollBar-content",d).width(c-a);this.HDockPanel=g;this.HScrollBar=d},initialization:function(){!0==this.options.ResizeToFit&&(this.options.ViewWidth=f(this.element).width());null==this.options.AnchorTime&&(this.options.AnchorTime=Date.today());this.options.ComputedStartTime=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(this);this.options.ComputedEndTime=RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert(this);this.headerZoomTracker=
new RadiantQ.Gantt.TimeSpanHeaderZoomTracker;this.headerScrollTracker=new RadiantQ.Gantt.TimeSpanHeaderScrollTracker},initializeGanttComponents:function(a){a=this.$ChartArea;f(a).height(f(a).height()-20);!1==this.options.IsPrinting&&this._ganttChartEvents();if(null!=this.options.TimeScaleHeaders){!1==this.options.IsPrinting&&this.options.Parent.triggerChildWidgetsCreated(this.element);this.initializeTimeSpanHeader();this.initializeCusromRangBackGround();this.initializeGanttChartBackground();this.initializeSpecialLine();
var c=this.RefreshUIEvent.subscribe(function(){c.Dispose();"ProjectGantt"==this.options.GanttType&&(this.initializeGanttChartRows(),this.initializeGanttDependencyLine(this.options.GanttDependencyViews));"FlexyGantt"==this.options.GanttType&&(this.initializeChartRow(),this.options.DependencyListSource&&(this.DependencyViews=new RadiantQ.FlexyGantt.FGDependencyViewList(this.options.DependencyListSource,this.options.Parent),this.initializeGanttDependencyLine(this.DependencyViews)))},this);(this._canUpdate||
!0==this.options.IsPrinting)&&c.fn.call(this)}this.ScrollToAnchorTime();a=this.getGridTBodyParent(this.options.Parent.element);this.VSB&&a&&this.SyncChartScrollBarWith(a,!0)},getLaveLeft:function(){var a=f(".ui-layout-resizer",this.element.closest(".ui-layout-container")).offset();return a=a?a.left:f(this.element).offset().left},_createLave:function(){f(".rq-gc-chartArea",this.element)},notifychange:function(a,c){},_setOption:function(a,c){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "AnchorTime":this.ViewSpanChanged();
2<arguments.length?this.ScrollToAnchorTime(arguments[2]):this.ScrollToAnchorTime();this.OnAnchorTimeChanged();break;case "ViewWidth":this._validateViewWidth();var b=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({ViewWidth:this.options.ViewWidth});else b[this.getChildWidgetName("GanttRows")]({ViewWidth:this.options.ViewWidth});this.ViewSpanChanged(!0);var b=f(".rq-gc-pager-left-Button",this.element),g=f(".rq-gc-pager-right-Button",
this.element),b=b.outerWidth(!0)+g.outerWidth(!0);f(".rq-gc-chart-HScrollBar-content",this.element).width(this.options.ViewWidth-b);f(this._getUniqueSelectorIdByID("rq-gc-chartArea-div"),this.element).width(this.options.ViewWidth);b=f(this._getUniqueSelectorIdByID("rq-gc-viewsContainer-div"),this.element);depParent=f(".rq-gc-dependencysParent",b);0<depParent.length&&(f(depParent.dependencysParentDiv).width(this.options.ViewWidth),f(this._getUniqueSelectorIdByID("dependencysParentDiv"),this.element).width(this.options.ViewWidth));
break;case "BaseTimeUnitWidth":this.ViewSpanChanged();this.options.Parent.OnBaseTimeUnitWidthChanged();break;case "ResizeToFit":this.options.ResizeToFit&&(this.optionViewWidth=this.options.ViewWidth);this.ResizeToFitChanged();this.ViewSpanChanged();break;case "BaseTimeScaleType":this.ViewSpanChanged();break;case "CustomChartBackgroundRanges":this.initializeCusromRangBackGround();break;case "SpecialLineInfos":this.initializeSpecialLine();break;case "FlatItemsSource":this.ViewableDependencyViews=new RQArray;
this.triggerEvent("SourceUpdated",this,{options:this.options});(b=this.options.Parent.GetGanttTable())&&b.showTableBody&&b.showTableBody();this.options.Parent.ReCreateSelectableAndhoverable();break;case "WorkTimeSchedule":this.TriggerRefreshUI({options:this.options});break;case "TimeRangeHighlightBehavior":this.triggerEvent("TimeRangeHighlightBehaviorChanged",this,{options:this.options,BottomtwoHeaders:this.options.BottomTwoHeaders});break;case "TimeIndicatorLineOption":this.triggerEvent("TimeIndicatorLineOptionChanged",
this,{options:this.options});break;case "TaskBarBrowseToCueLeftTemplate":b=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({TaskBarBrowseToCueLeftTemplate:c});else b[this.getChildWidgetName("GanttRows")]({TaskBarBrowseToCueLeftTemplate:c});break;case "TaskBarBrowseToCueRightTemplate":b=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({TaskBarBrowseToCueRightTemplate:c});
else b[this.getChildWidgetName("GanttRows")]({TaskBarBrowseToCueRightTemplate:c});break;case "TaskBarBackgroundTemplate":b=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({TaskBarBackgroundTemplate:c});else b[this.getChildWidgetName("GanttRows")]({TaskBarBackgroundTemplate:c});break;case "TaskBarAdornerTemplate":b=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({TaskBarAdornerTemplate:c});
else b[this.getChildWidgetName("GanttRows")]({TaskBarAdornerTemplate:c});break;case "OverlappedTasksRenderingOptimization":b=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({OverlappedTasksRenderingOptimization:c});else b[this.getChildWidgetName("GanttRows")]({OverlappedTasksRenderingOptimization:c});break;case "ShowVerticalScrollBar":this.initChartScrollBar();break;case "DependencyListSource":this.DependencyViews&&
this.DependencyViews.Dispose();this.options.DependencyListSource?(this.DependencyViews=new RadiantQ.FlexyGantt.FGDependencyViewList(this.options.DependencyListSource,this.options.Parent),this.initializeGanttDependencyLine(this.DependencyViews)):this.DependencyViews=new RadiantQ.FlexyGantt.FGDependencyViewList([],this.options.Parent);break;case "UseChartVirtualization":b=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({UseChartVirtualization:c});
else b[this.getChildWidgetName("GanttRows")]({UseChartVirtualization:c});break;case "KnockoutObjectName":this.options.KnockoutObjectName=c;b=f(".rq-gc-rowsParent",this.element);if("ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({KnockoutObjectName:c});else b[this.getChildWidgetName("GanttRows")]({KnockoutObjectName:c});break;case "RowHeight":if(this.VSB&&(this.VSB.RowHeight=c),b=f(".rq-gc-rowsParent",this.element),"ProjectGantt"==this.options.GanttType)b[this.getChildWidgetName("GanttTaskItemsControl")]({RowHeight:c});
else b[this.getChildWidgetName("GanttRows")]({RowHeight:c})}(b=this.options.Parent.options)&&b[a]&&b[a]!=c&&(b[a]=c)},GetScrollableElement:function(){return f(this._getUniqueSelectorIdByID("GanttChart"),this.element)},widget:function(){return this.element},initializeCusromRangBackGround:function(){if(null!=this.options.CustomChartBackgroundRanges)this.$GanttChartCustomRangeBackgroundDIV.empty()[this.getChildWidgetName("GanttChartCustomRangeBackground")]({ViewStartTime:this.options.ComputedStartTime.clone(),
ViewEndTime:this.options.ComputedEndTime.clone(),headerInfo:this.options.TimeScaleHeaders,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,Parent:this,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,CustomChartBackgroundRanges:this.options.CustomChartBackgroundRanges,WorkTimeSchedule:this.options.WorkTimeSchedule})},initializeGanttChartBackground:function(){var a=this.options;
this.$GanttChartBackgroundDiv.empty()[this.getChildWidgetName("GanttChartBackground")]({ViewStartTime:a.ComputedStartTime.clone(),ViewEndTime:a.ComputedEndTime.clone(),headerInfo:a.TimeScaleHeaders,BaseTimeUnitWidth:a.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,GanttChart:{MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility},Parent:this,ViewWidth:a.ViewWidth,BottomTwoHeaders:a.BottomTwoHeaders,WorkTimeSchedule:a.WorkTimeSchedule,WorkingTimeBackground:a.WorkingTimeBackground,
NonWorkingTimeBackground:a.NonWorkingTimeBackground,TimeRangeHighlightBehavior:a.TimeRangeHighlightBehavior})},updateChatBGHeight:function(){var a=this.element.parents(".ui-layout-pane")[0].clientHeight-this.$TimeSpanHeader.outerHeight(!0),c=this.$GanttChartCustomRangeBackgroundDIV,b=this.$SpecialLinesDiv;f("div.ui-GanttTimeUnitBackground-unit",this.$GanttChartBackgroundDiv).height(a);f("div.rq-gc-specialLine",b).height(a);f("div.ui-customBackgroundRange-unit",c).height(a);f("div.rq-gc-chartArea-div",
this.element).height(a)},rowParentMarginTop:function(){return 1},initializeChartRow:function(){var a=this.$TaskBarContainer,c=this.$rowsParent=f('<div class="rq-gc-rowsParent rowsParent" style="position:absolute; overflow:hidden; height: inherit; width: inherit; margin-top:'+this.rowParentMarginTop()+'px;"></div>');f(a).empty().append(c);c[this.getChildWidgetName("GanttRows")]({Data:this.options.FlatItemsSource,TasksListProperty:this.options.TasksListProperty,ParentTasksListProperty:this.options.ParentTasksListProperty,
EnableOverlappedRenderingBindingProperty:this.options.EnableOverlappedRenderingBindingProperty,TaskTemplate:this.options.TaskItemTemplate,ParentTaskTemplate:this.options.ParentTaskItemTemplate,OverlappedTasksRenderingOptimization:this.options.OverlappedTasksRenderingOptimization,TaskStartTime:this.options.TaskStartTime,ParentTaskStartTime:this.options.ParentTaskStartTime,KnockoutObjectName:this.options.KnockoutObjectName,TaskEndTime:this.options.TaskEndTime,ParentTaskEndTime:this.options.ParentTaskEndTime,
GanttChart:this,RowHeight:this.options.RowHeight,TaskBarHeight:this.options.TaskBarHeight,ViewWidth:this.options.ViewWidth,TaskTooltipTemplate:this.options.TaskTooltipTemplate,ResizeInfoPopup:this.options.ResizeInfoPopup,MovingInfoPopup:this.options.MovingInfoPopup,FlexyGantt:this.options.Parent,TimeIndicatorLineOption:this.options.TimeIndicatorLineOption,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,
TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting,UseChartVirtualization:this.options.UseChartVirtualization,EnableCustomRowBackground:this.options.EnableCustomRowBackground,EnableCustomRowForeground:this.options.EnableCustomRowForeground,EnableAutoAdjustForSchedule:this.options.EnableAutoAdjustForSchedule,CustomOverlappingBlockFn:this.options.CustomOverlappingBlockFn,AreTasksOverlappingCallBack:this.options.AreTasksOverlappingCallBack,
CanDrawDependency:this.options.CanDrawDependency,ConnectingInfoPopup:this.options.ConnectingInfoPopup,MinimumWidthForParentBar:this.options.MinimumWidthForParentBar,ProgressPercentBinding:this.options.ProgressPercentBinding})},initializeGanttChartRows:function(){var a=this.$TaskBarContainer,c=this.$rowsParent=f('<div class="rq-gc-rowsParent rowsParent" style="position:absolute; overflow:hidden; height: inherit; margin-top:'+this.rowParentMarginTop()+'px;"></div>');f(a).empty().append(c);c[this.getChildWidgetName("GanttTaskItemsControl")]({Data:this.options.FlatItemsSource,
TaskTemplate:this.options.TaskItemTemplate,ParentTaskTemplate:this.options.ParentTaskItemTemplate,ProgressBarTemplate:this.options.ProgressBarTemplate,TaskBarBackgroundTemplate:this.options.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:this.options.TaskBarAdornerTemplate,GanttChart:this,MileStoneTemplate:this.options.MileStoneTemplate,RowHeight:this.options.RowHeight,TaskBarHeight:this.options.TaskBarHeight,KnockoutObjectName:this.options.KnockoutObjectName,ViewWidth:this.options.ViewWidth,TaskTooltipTemplate:this.options.TaskTooltipTemplate,
MovingInfoPopup:this.options.MovingInfoPopup,ResizeInfoPopup:this.options.ResizeInfoPopup,ConnectingInfoPopup:this.options.ConnectingInfoPopup,WorkTimeSchedule:this.options.WorkTimeSchedule,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting})},initializeSpecialLine:function(){this.$SpecialLinesDiv.empty()[this.getChildWidgetName("SpecialLines")]({ViewStartTime:this.options.ComputedStartTime.clone(),
ViewEndTime:this.options.ComputedEndTime.clone(),headerInfo:this.options.TimeScaleHeaders,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,WorkTimeSchedule:this.options.WorkTimeSchedule,Parent:this,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,SpecialLineInfos:this.options.SpecialLineInfos})},initializeGanttDependencyLine:function(a){var c=this.$TaskBarContainer,b=
f(".rq-gc-rowsParent",c).height(),g=f(".rq-gc-dependencysParent",c),d=f(".rq-gc-dependencyControl",g);0==g.length?(g=f('<div class="rq-gc-dependencysParent" id="dependencysParentDiv" style="position: absolute; overflow:hidden; width:100%; height:'+b+'px;"></div>'),g.css("display","none"),d=f("<div class='rq-gc-dependencyControl'></div>"),g.append(d),c.append(g)):d.empty();c=this.getChildWidgetName("GanttDependencyControl");d[c]({Data:this.options.FlatItemsSource,DependencyViews:a,GanttChart:this,
GanttModel:this.options.Parent.Model,UseChartVirtualization:this.options.UseChartVirtualization,DependencyTooltipTemplate:this.options.DependencyTooltipTemplate});this.DependenciesControl=d.data(c);!0==this.options.ShowDependencyLines?g.css("display","block"):g.css("display","none");a=this.options.Parent.getVirtualizedChartHeight(this.$rowsParent);d.css("height",a)},updateGanttDependencyLines:function(){this.DependenciesControl&&this.DependenciesControl.Refresh()},clearDepLines:function(){var a=f(".rq-gc-dependencysParent",
this.$TaskBarContainer);f(".rq-gc-dependencyControl",a).empty()},initializeTimeSpanHeader:function(){var a=this,c=this.options,b=this.$TimeSpanHeader;b.empty()[this.getChildWidgetName("TimeSpanHeaders")]({TimeScaleHeaders:c.TimeScaleHeaders,ComputedStartTime:c.ComputedStartTime,ComputedEndTime:c.ComputedEndTime,BaseTimeUnitWidth:c.BaseTimeUnitWidth,BaseTimeScaleType:c.BaseTimeScaleType,AnchorTime:c.AnchorTime,ViewWidth:c.ViewWidth,ResizeToFit:c.ResizeToFit,ZoomOptions:c.ZoomOptions,ScrollOptions:c.ScrollOptions,
CustomChartBackgroundRanges:c.CustomChartBackgroundRanges,BaseTimeUnitWidthMinimum:c.BaseTimeUnitWidthMinimum,BaseTimeUnitWidthMaximum:c.BaseTimeUnitWidthMaximum,MinTimeUnitWidthForHeaderVisibility:c.MinTimeUnitWidthForHeaderVisibility,WorkTimeSchedule:c.WorkTimeSchedule,TimeRangeHighlightBehavior:c.TimeRangeHighlightBehavior,GanttChart:this,AnchorTimeChanged:function(c,b){b.equals(a.options.AnchorTime)||a._setOption("AnchorTime",b)}});this._subscribeTimeLneEvents(b)},touchStart:!1,_startpx:0,startPoint:{},
currentPoint:{},_subscribeTimeLneEvents:function(a){var c=this,b=0,g=a.data("TimeSpanHeaders"),d=this.$GanttChart;a.bind("touchstart",function(a){1<a.originalEvent.touches.length||(c._timelineScrollStart(null,a,g),a.preventDefault())});a.bind("touchmove",function(a){b=a.originalEvent.touches.length;1<a.originalEvent.touches.length||c.options.ResizeToFit||c._timelineScrolling(null,a,g)});a.bind("touchend",function(a){1<b||(c.options.ResizeToFit&&c._timelineScrolling(null,a,g),c._timelineScrollEnd(a),
b=0)});d.bind("touchstart",function(a){c._timelineScrollStart(null,a,g)});d.bind("touchmove",function(a){c.options.ResizeToFit||c._timelineScrolling(null,a,g)});d.bind("touchend",function(a){c.options.ResizeToFit&&c._timelineScrolling(null,a,g);c._timelineScrollEnd(a)});a.mousedown(function(a){c._timelineScrollStart(a,null,g)});a.mousemove(function(a){c.options.ResizeToFit||c._timelineScrolling(a,null,g)});a.mouseup(function(a){c.options.ResizeToFit&&c._timelineScrolling(a,null,g);c._timelineScrollEnd(a)});
var m=f(document);m.mouseup(function(a){c._timelineScrollEnd(a)});m.bind("touchend",function(a){c._timelineScrollEnd(a)});a.bind("gesturestart",function(a){c._timelineZoomSart(a)});a.bind("gesturechange",function(a){});a.bind("gestureend",function(a){c._timelineZooming(a);c._timelineZoomEnd(a)});d.bind("gesturestart",function(a){c._timelineZoomSart(a)});d.bind("gesturechange",function(a){});d.bind("gestureend",function(a){c._timelineZooming(a);c._timelineZoomEnd(a)})},_getDirectionFromAngle:function(a){a=
{down:45<=a&&135>a,left:135<=a||-135>=a,up:-45>a&&-135<a,right:-45<=a&&45>=a};var c,b;for(b in a)if(a[b]){c=b;break}return c},_timelineScrollStart:function(a,c,b){!0!=this.options.Parent.PreventDefaultFns&&(null==c?(b.ShouldScrollWithLeftMouse(a)&&this.headerScrollTracker.StartDragging(a.pageX,b.options.BaseTimeUnitWidth,b),b.ShouldZoomWithLeftMouse(a)&&this.headerZoomTracker.StartDragging(a.pageX,b.options.BaseTimeUnitWidth)):(this._touchStart=!0,this._startpx=c.originalEvent.touches[0].pageX,this.headerScrollTracker.StartDragging(c.originalEvent.touches[0].pageX,
b.options.BaseTimeUnitWidth,b)))},_timelineScrolling:function(a,c,b){null==c?(this.headerZoomTracker.IsDragging()&&!this._touchStart&&this.headerZoomTracker.MouseMovedTo(a.pageX,b),this.headerScrollTracker.IsDragging()&&!this._touchStart&&this.headerScrollTracker.MouseMovedTo(a.pageX,b)):this.headerScrollTracker.IsDragging()&&(a=c.originalEvent.touches.length?c.originalEvent.touches:c.originalEvent.changedTouches,this._startpx!=a[0].pageX&&this.headerScrollTracker.MouseMovedTo(a[0].pageX,b))},_timelineScrollEnd:function(a,
c){this._touchStart=!1;this._startpx=0;this.headerZoomTracker.IsDragging(!1);this.headerScrollTracker.IsDragging(!1)},_timelineZoomSart:function(a){a=a.originalEvent;this.startPoint={x:a.pageX,y:a.pageY}},_timelineZooming:function(a){a=a.originalEvent;this.currentPoint={x:a.pageX,y:a.pageY};var c=180*Math.atan2(this.currentPoint.y-this.startPoint.y,this.currentPoint.x-this.startPoint.x)/Math.PI,c=this._getDirectionFromAngle(c);"left"!=c&&"right"!=c||this.options.Parent._ValidateAndSetBaseTimeUnitWidth(this.options.BaseTimeUnitWidth*
a.scale)},_timelineZoomEnd:function(a){this.startPoint={};this.currentPoint={}},TransformToVisual:function(a){return a+this.$GanttChart.scrollLeft()-this.element.offset().left},ConvertXToTime:function(a){a=b.ConvertTimeUnitsToTimeSpan(this.options.BaseTimeScaleType,a/this.options.BaseTimeUnitWidth);return this.options.ComputedStartTime.addTimeSpan(a)},GetScheduleToPlotWith:function(){if(null==this.ActivityView)return this.options.WorkTimeSchedule;var a=this.ActivityView.Activity_M().Assignments;return null==
a||0==a.length||1<a.length?this.options.WorkTimeSchedule:1==a.length&&null!=a[0].Resource.Schedule?a[0].Resource.Schedule:this.options.WorkTimeSchedule},ConvertTimeToX:function(a){return b.ConvertToUnitsOfBaseScaleType(this.options.BaseTimeScaleType,this.options.ComputedStartTime,a,this.options.WorkTimeSchedule)*this.options.BaseTimeUnitWidth},ConvertTimeToXBySchedule:function(a,c){return b.ConvertToUnitsOfBaseScaleType(this.options.BaseTimeScaleType,this.options.ComputedStartTime,a,c)*this.options.BaseTimeUnitWidth},
ConvertTimeToXFor:function(a,c,e,g){return b.ConvertToUnitsOfBaseScaleType(c||this.options.BaseTimeScaleType,this.options.ComputedStartTime,a,g)*(e||this.options.BaseTimeUnitWidth)},GetCurrentRightMostVisibleTime:function(){var a=this.HScrollBar,c=a.width();return this.ConvertXToTime(a[0].scrollLeft+c)},GetCurrentLeftMostVisibleTime:function(){return this.ConvertXToTime(this.HScrollBar[0].scrollLeft)},PageRight:function(a){if(!a&&(a=!1,null!=this.options.BeforePagingGanttChart&&(a=this.options.BeforePagingGanttChart("RightPagerButton",
null,this)),a))return;a=this.HScrollBar;var c=Math.round(a[0].scrollLeft),e=Math.round(a[0].scrollWidth-a.width());0<this.options.TimeScaleHeaders.length&&this.options.TimeScaleHeaders.getById(0);e<=c?(c=b.GetTimeSpan(this.options.ComputedStartTime.clone(),this.options.ComputedEndTime.clone()),c=this.options.AnchorTime.addTimeSpan(c),this._setOption("AnchorTime",c),a[0].scrollLeft=0):(c=new Date(this.GetCurrentRightMostVisibleTime()),c=this.ConvertTimeToX(c),a[0].scrollLeft=c)},PageLeft:function(a){if(!a&&
(a=!1,null!=this.options.BeforePagingGanttChart&&(a=this.options.BeforePagingGanttChart("LeftPagerButton",null,this)),a))return;a=this.HScrollBar[0];var c=a.scrollLeft,e=a.scrollWidth-this.HScrollBar.width();0<this.options.TimeScaleHeaders.length&&this.options.TimeScaleHeaders.getById(0);0==c?(c=b.GetTimeSpan(this.options.ComputedStartTime.clone(),this.options.ComputedEndTime.clone()),c=this.options.AnchorTime.addTimeSpan(c.getEqualNegative()),this._setOption("AnchorTime",c)):(e=this.GetCurrentLeftMostVisibleTime(),
c=this.GetCurrentRightMostVisibleTime(),c=b.GetTimeSpan(e,c),e=e.addTimeSpan(c.getEqualNegative()),e=this.ConvertTimeToX(e));a.scrollLeft=e},ViewSpanChanged:function(a){var c=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(this),b=RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert(this);this._setOption("ComputedStartTime",c);this._setOption("ComputedEndTime",b);this.CanUpdate()&&(!0==a&&(this.element.unbind(".GanttControlTaskBarRefreshUI"),this.element.unbind(".FlexyGanttTaskBarRefreshUI")),
this.TriggerRefreshUI({options:this.options,ForceToReDrawRows:a}),this.ScrollViewerElement_LayoutUpdated())},ResizeToFitChanged:function(){var a=this.element[0].clientWidth;this.optionViewWidth=this.optionViewWidth?this.optionViewWidth:2E3;this.options.ResizeToFit?this.options.ViewWidth!=a&&this._setOption("ViewWidth",a):(this.options.ViewWidth!=this.optionViewWidth&&this._setOption("ViewWidth",this.optionViewWidth),this.ScrollToAnchorTime())},_destroy:function(){this.element.data("GanttChart",null)},
destroy:function(){this.widgetBaseDestroy.apply(this,arguments);this.element.empty();this.widgetBaseSetOption.call(this);this.element.data("GanttChart",null)}};RadiantQ.Gantt.Widget.GanttChart=d})(jQuery);
(function(f,b){var d=RadiantQ.Gantt;RadiantQ.Gantt.lave={};RadiantQ.Gantt._ganttCount=0;RadiantQ.BeforeGanttInitialization=new ObjectEvent("BeforeGanttInitialization");RadiantQ.AfterGanttInitialization=new ObjectEvent("AfterGanttInitialization");b.fn.GetGanttChartInstance=function(){var a=this.data("GanttChart");if(a)return a;throw Error("Cannot call GetGanttChartInstance method before it is initialized");};var a={BottomTwoHeaders:null,options:{name:"GanttBase",ShowGridTable:!0,ForceToRecreateColumnHeader:!1,
TimeScaleHeaders:null,RowHeight:25,BaseTimeScaleType:null,ComputedGridHeaderHeight:null,SpecialLineInfos:null,BottomTwoHeaders:null,CustomChartBackgroundRanges:null,WorkingTimeBackground:null,NonWorkingTimeBackground:null,BaseTimeUnitWidth:null,BaseTimeUnitWidthMaximum:null,BaseTimeUnitWidthMinimum:10,IsDependencyLinesReadOnly:!1,ZoomOptions:null,ScrollOptions:null,MinTimeUnitWidthForHeaderVisibility:10,RoundTimeEditsTo:null,GanttTable:null,ShowGanttChart:!0,FlatItemsSource:null,TaskItemTemplate:null,
ProgressBarTemplate:null,ParentTaskItemTemplate:null,TaskStartTimeProperty:null,ParentTaskStartTimeProperty:null,TaskEndTimeProperty:null,ParentTaskEndTimeProperty:null,TasksListProperty:null,ParentTasksListProperty:null,EnableOverlappedRenderingBindingProperty:"",TaskTooltipTemplate:null,KnockoutObjectName:null,DependencyLineColor:null,DependencyListSource:null,UseChartVirtualization:!1,UseVirtualization:!1,WorkTimeSchedule:"",EnableAlternativeRowBackground:!0,TimeRangeHighlightBehavior:RadiantQ.Gantt.TimeRangeHighlightBehavior.None,
SelectionMode:RadiantQ.Gantt.SelectionMode.Multiple,GanttTableRowLoadedCallBack:null,GetPreferredIDCallBack:null,MovingInfoPopup:null,ResizeInfoPopup:null,CustomProgressCalculation:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsReadOnly:!1,IsEffortReadOnly:!1,IsStartTimesReadOnly:!1,IsProgressPercentReadOnly:!1,TouchTapAction:null,EnableDropAsChild:!1,OnTaskBarLoad:null,CanInsertPropertyChangeTriggeringPropertiesInData:!1,EnableColumnHeaderContextMenu:!1,OneInstance:null,
GanttTableOptions:{columns:[],editable:!0},LayoutOptions:{},SelectEvent:"mouseup",DependencyTooltipTemplate:null,RowDragBehavior:RadiantQ.Gantt.RowDragBehavior.DragRowHeader,IsPrinting:!1,SaveStateInCookie:!1,SaveStateInCookieOptions:{ZoomLevel:!1,TablePanelWidth:!1,TaskCollapsingState:!1},ShowDependencyLines:!0,ApplySelectionAndHoverEffect:!0,NowLineRefreshFrequency:null},ApplicationName:"",PreventDefaultFns:!1,HeaderHeight:null,headerChange:!1,SelectedRowsDrag:null,SelectedRowsDrop:null,SelectedRowsDropped:null,
BeforeRowsDragStart:null,GanttType:null,IsGanttTable:null,_roundTimeEditsTo:null,RoundTimeEditsTo:function(a){if(void 0==a){if(this._roundTimeEditsTo)return this._roundTimeEditsTo;this._roundTimeEditsTo=RadiantQ.Gantt.RoundToOptions.None}else this._roundTimeEditsTo=a},_ganttChartIsLoaded:!1,GanttChartIsLoaded:function(a){if(void 0==a){if(this._ganttChartIsLoaded)return this._ganttChartIsLoaded;this._ganttChartIsLoaded=!1}else this._ganttChartIsLoaded=a},_gridBindingResetEvent:new ObjectEvent("gridBindingResetEvent"),
_create:function(){RadiantQ.BeforeGanttInitialization&&RadiantQ.BeforeGanttInitialization.fn.length&&(RadiantQ.BeforeGanttInitialization.raise(this.options,this.GanttType,this.element),""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=null));this._gridBindingResetEvent=new ObjectEvent("gridBindingResetEvent");this.options.BaseTimeUnitWidth&&(this.options.BaseTimeUnitWidth=Math.round(1E3*this.options.BaseTimeUnitWidth)/1E3);this._validateOptions();this.SelectedRowsDrag=new ObjectEvent("SelectedRowsDrag");
this.SelectedRowsDrop=new ObjectEvent("SelectedRowsDrop");this.SelectedRowsDropped=new ObjectEvent("SelectedRowsDropped");this.BeforeRowsDragStart=new ObjectEvent("BeforeRowsDragStart");this.VerticalScrollEvent=new ObjectEvent("VerticalScrollEvent");this.options.ForceToRecreateColumnHeader=!1;this._roundTimeEditsTo=this.options.RoundTimeEditsTo?this.options.RoundTimeEditsTo:RadiantQ.Gantt.RoundToOptions.None;var a=this;this.GanttChartLoaded=new ObjectEvent("GanttChartLoaded");this._ganttChartIsLoaded=
!1;this.IsGanttTable=null!=this.options.GanttTable;""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=RadiantQ.Gantt.WorkTimeSchedule.Schedule8X5);this.element.addClass("rq-ganttBase radiantq-ui-GanttBase").data("GanttBase",this);var e=window.location.pathname.split("/");this.ApplicationName=e[e.length-1].split(".")[0];b(window).resize(function(){a.RefreshGanttHeight()});b(window).bind("unload",function(){if(a.options.SaveStateInCookie){if(a.options.SaveStateInCookieOptions.TaskCollapsingState){var e=
[];if("FlexyGantt"!=a.GanttType){var d=a.ActivityViews;for(i=0;i<d.length;i++)d[i].IsExpanded||e.push(d[i].activity.id)}b.cookie(a.ApplicationName+"_CollapsedTaskList",e,{expires:365})}a.options.SaveStateInCookieOptions.ZoomLevel&&b.cookie(a.ApplicationName+"_BaseTimeUnitWidth",a.options.BaseTimeUnitWidth,{expires:365})}});null==this.options.TimeScaleHeaders&&(this.options.TimeScaleHeaders=this.defaultTimeScaleHeaders());this.options.UseVirtualization&&(this.options.UseChartVirtualization=!0);this.initializeGanttBase();
this.IsTableCreated=!1;this._layoutGanttControls();this.initTable();this.IsTableCreated=!0;this.UpdateDatasource(!0);!0==this.options.ShowGanttChart?(this.initGanttChart(),this.GetGanttChartInstance().syncVerticalScrollBar()):(this.HideChart(),this.CanUpdateTable(this.CanUpdateTable()+1));RadiantQ.AfterGanttInitialization&&RadiantQ.AfterGanttInitialization.fn.length&&setTimeout(function(){RadiantQ.AfterGanttInitialization.raise(a.element,a)},0)},HideChart:function(){var a=b(this._getUniqueSelectorIdByID("TopDivContainer"),
this.$ganttWrapper).data("layout");a.open("west");b(".ui-layout-center",this.$ganttWrapper).css("display","none");b(".ui-layout-pane-west",this.$ganttWrapper).css("width","100%");a.sizePane("west","100%");b(".ui-layout-resizer",this.$ganttWrapper).css("display","none")},ShowChart:function(){var a=b(this._getUniqueSelectorIdByID("TopDivContainer"),this.$ganttWrapper).data("layout");a.open("west");b(".ui-layout-center",this.$ganttWrapper).css("display","block");a.sizePane("west","50%");b(".ui-layout-resizer",
this.$ganttWrapper).css("display","block")},GetScrollableContentHeight:function(a){if(a&&a.length){if(null==this.options.RowHeightBinding)return a.length*this.options.RowHeight;this.options.RowHeightBinding._scrollContentHeight&&!1!=this._scrollContentEdited||(this.options.RowHeightBinding._scrollContentHeight=a.length*this.options.RowHeight);return this.options.RowHeightBinding._scrollContentHeight}return 0},_scrollContentEdited:!1,AddToScrollableContentHeight:function(a){this.options.RowHeightBinding&&
(this.options.RowHeightBinding._scrollContentHeight||(this.options.RowHeightBinding._scrollContentHeight=0),this._scrollContentEdited=!0,this.options.RowHeightBinding._scrollContentHeight+=a)},GetStartRowIndexAndTop:function(a,b){var g=this.options.RowHeight;if(null!=this.options.RowHeightBinding){var d=0,f;for(f=0;f<a.length&&!(g=a[f].RowHeight||this.options.RowHeight,d+=g,d>b);f++);return{startPosition:f,top:g-(d-b)}}return{startPosition:Math.floor(b/g),top:b%g}},RefreshGanttHeight:function(){if(!this.IsTableCreated||
!0==this.options.ShowGridTable&&!this.GetGanttTable())return!1;this.UpdateChartHeight();this.UpdateHeight()},OnChartTemplateApplied:function(a){this.triggerEvent("GanttChartTemplateApplied",this,a)},IsTaskReadOnly:function(a){return this.triggerEvent("IsTaskReadOnlyCallback",this,a)},OnTableTemplateApplied:function(){this.triggerEvent("GanttTableTemplateApplied")},OnBaseTimeUnitWidthChanged:function(){this.triggerEvent("Zoomed")},HideGanttGrid:function(a){if(a){b(b(".ui-layout-resizer",this.element)).css("display",
"none");a=b("#gantt_container_GanttChart",this.element);b(a).css("left","0px");b(a).css("width",parseInt(b(a).width())+10+"px");var e=b("div.rq-gc-rowsParent",this.element),g=b("div.rq-gc-dependencysParent",this.element);e.css("width",this.GetGanttChartInstance().options.ViewWidth+"px");e.css("overflow-y","auto");b(e).scroll(function(){0<g.length&&(g[0].scrollTop=e[0].scrollTop)})}},defaultTimeScaleHeaders:function(){var a=new RadiantQ.Gantt.TimeScaleHeaderDefinition;a.name("days");a.Type=d.TimeScaleType.Days;
var b=new RadiantQ.Gantt.TimeScaleHeaderDefinition;b.name("weeks");b.Type=d.TimeScaleType.Weeks;var g=new RadiantQ.Gantt.TimeScaleHeaderDefinitions;g.add(b);g.add(a);return g},_workTimeSchedule:null,WorkTimeSchedule:function(a){if(void 0==a)return this._workTimeSchedule;a!=this._workTimeSchedule&&(this._workTimeSchedule=a,this.options.WorkTimeSchedule=a,this.OnWorkTimeScheduleChanged())},isTableCollapsed:function(){return b(this._getUniqueSelectorIdByID("TopDivContainer"),this.element).data("layout").state.west.isClosed},
getHScrollBarHeight:function(){return 0},getVirtualizedHeight:function(a){return b(".grid-body-actualContent",a).height()},getVirtualizedChartHeight:function(a){return b(".vsb-actualContent",a).height()},UpdateChartHeight:function(){this.getTableParent();this.getTable();var a=b("div.rq-gc-rowsParent",this.element),e=b("table",a),g=b("div.rq-gc-dependencysParent",this.element);if(0<g.length){var d=Math.min(a.height(),a[0].clientHeight);g.css("height",d-this.getHScrollBarHeight());a=this.getVirtualizedChartHeight(a);
this.options.UseChartVirtualization?g.children().height(a):g.children().css("height",a)}if(g=this.GetGanttChartInstance())g.element.css({height:"inherit",width:"inherit"}),g.updateChatBGHeight(),g.VSB&&(g.VSB.UpdateScrollContentHeight(),e.height(this.GetScrollableContentHeight())),g.refreshDockPanel()},RefreshGanttWidth:function(){var a=b(this._getUniqueSelectorIdByID("TopDivContainer"),this.element),e=this.GetGanttChart(),g=b(".ui-layout-resizer",this.element),d=b(".ui-layout-west",this.element);
a.data("layout").state.west.isClosed?e.width(a[0].clientWidth-g[0].clientWidth):e.width(a[0].clientWidth-(g[0].clientWidth+d[0].clientWidth))},OnWorkTimeScheduleChanged:function(){this.UpdateCalendarSettingInScaleHeaders()},UpdateCalendarSettingInScaleHeaders:function(){for(var a=0;a<this.options.TimeScaleHeaders.length;a++)this.options.TimeScaleHeaders[a].WorkTimeSchedule=this.options.WorkTimeSchedule},VerticalScrollEvent:new ObjectEvent("VerticalScrollEvent"),getTable:function(){return b("table.ui-grid-body-table",
this.getTableParent())},getTableParent:function(){return b("div.ui-grid-body",this.element)},ChartVerticalScrollSyncWithTable:function(){var a=this.getTableParent(),e=b("div.rq-gc-rowsParent",this.element);b("table.rq-gc-rowsParent-table",this.element);var g=b("div.rq-gc-dependencysParent",this.element);this.options.UseChartVirtualization||(0<g.length&&g.css("height",e.height()),0<g.length&&(this.options.UseChartVirtualization?b(g[0].children).height(a[0].scrollHeight):b(g[0].children).height(e.children().height())),
e.scrollTop()!=a.scrollTop()&&(this.options.UseChartVirtualization||e.scrollTop(a.scrollTop()),0<g.length&&b(g).scrollTop(e.scrollTop())))},_createUniqueID:function(a){return""==this.element[0].id?this.widgetName+this.uuid+"_"+a:this.element[0].id+"_"+a},_validateOptions:function(){var a=this.options;null==a.GanttTable&&(a.ShowGridTable=!1);window.console&&RadiantQ.CanUseDefineProperty&&(a.TaskTooltipTemplate&&"string"!=typeof a.TaskTooltipTemplate&&!1==(a.TaskTooltipTemplate.length?a.TaskTooltipTemplate[0]instanceof
HTMLElement:a.TaskTooltipTemplate instanceof HTMLElement)&&console.error("TaskTooltipTemplate is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),a.MovingInfoPopup&&"string"!=typeof a.MovingInfoPopup&&!1==(a.MovingInfoPopup.length?a.MovingInfoPopup[0]instanceof HTMLElement:a.MovingInfoPopup instanceof HTMLElement)&&console.error("MovingInfoPopup is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),
a.ResizeInfoPopup&&"string"!=typeof a.ResizeInfoPopup&&!1==(a.ResizeInfoPopup.length?a.ResizeInfoPopup[0]instanceof HTMLElement:a.ResizeInfoPopup instanceof HTMLElement)&&console.error("ResizeInfoPopup is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."))},getWindow:function(){var a=" >rb/< moc.qtnaidar@selas tcatnoc ro woleb knil kcilc esahcrup oT  >rb/< ttnaG yreuQj QtnaidaR gnitaulavE rof sknahT".split("").reverse().join(""),
e="nottub".split("").reverse().join(""),g="esneciL esahcruP".split("").reverse().join(""),d="lairT eunitnoC".split("").reverse().join(""),f=')"knalb_" ,"xpsa.sliateDredrO/moc.qtnaidar.redro//:ptth"(nepo.wodniw'.split("").reverse().join(""),k=b("<div> <div> <p>"+a+"<"+e+">"+d+" </"+e+"><"+e+">"+g+"</"+e+"> </p></div></div>"),a="0F4E3B#".split("").reverse().join(""),l=this;k.css({height:"80%",width:"80%","background-size":"100% 100%","background-color":a,"z-index":"100000",position:"absolute",color:"white",
top:"50px",left:"50px",border:"1px solid #DEDEDE"});var n=">/ gmi<".split("").reverse().join(""),a="gnp.gninraWesnecil/segamI/selytS/crS";window.__rqGanttInSP?a="gnp.gninraWesnecil/segamI/selytS/crS/eludoMweN/..":window.ng&&"object"==typeof window.ng&&(a="gnp.gninraWesnecil/segamI/selytS/crS/selpmaS/ppa");var p=b(n,{width:"100%",height:"100%"}).attr("src",a.split("").reverse().join("")).bind("load",function(){b(k).append(p);b(l._getUniqueSelectorIdByID("TopDivContainer"),l.element).append(k)}).bind("error",
function(){var a=b(n,{width:"100%",height:"100%"}).attr("src","gnp.gninraWesnecil/segamI/selytS/crS/../..".split("").reverse().join("")).bind("load",function(){this.complete&&(b(k).append(a),b(l._getUniqueSelectorIdByID("TopDivContainer"),l.element).append(k))}).bind("error",function(){b(l._getUniqueSelectorIdByID("TopDivContainer"),l.element).append(k)})}),a=k.children();a.css({height:"15%",width:"100%","font-size":"40px",position:"absolute",top:"40%"});a=a.children();a.css({width:"100%","font-size":"20px",
"margin-left":"5%",position:"relative",top:"-40%"});e=a.children(e);b(e[0]).css({"font-size":"20px",left:"50%","margin-left":"18%","margin-top":"2%"});b(e[1]).css({"font-size":"20px","margin-left":"1%","margin-top":"2%"});b(e[0]).click(function(a){k.remove();a.preventDefault()});b(e[1]).click(function(a){eval(f);k.remove();a.preventDefault()});k.click(function(a){k.remove();a.preventDefault()});return k},initializeGanttBase:function(){null==this.options.ZoomOptions&&(this.options.ZoomOptions=RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders|
RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart|RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag);null==this.options.ScrollOptions&&(this.options.ScrollOptions=RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag);this._validateBasebaseTimeUnitWidthMaximum();this._validateBasebaseTimeUnitWidth();this._validateMinTimeUnitWidthForHeaderVisibility();this.options.BaseTimeScaleType=RadiantQ.Gantt.TimeScaleType.Hours;if(null==this.options.BaseTimeUnitWidth||0==this.options.BaseTimeUnitWidth)this.options.BaseTimeUnitWidth=
25},subscribeHeaderCollectionChanged:function(){var a=this;null!=this.options.TimeScaleHeaders&&this.options.TimeScaleHeaders.CollectionChanged.subscribe(function(b,g){a.OnHeadersChanged(b,g)})},initTimeSpaneHeader:function(){this.OnHeadersChanged(null,null);this.subscribeHeaderCollectionChanged();var a=this;b(this.GetGanttChart()).mousewheel(function(e,g){if(!0!=a.PreventDefaultFns){var d=!1,f=b(e.target).closest(".timeSpanHeader");!1==d&&!RadiantQ.Gantt.isModifierKeyIsPresed(e)&&f.length&&(a.options.ZoomOptions&
RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders)==RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders&&(d=!0);!1==d&&e.ctrlKey&&(a.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart)==RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart&&(d=!0);d&&(a.ZoomBySteps(g),e.preventDefault());d||(a.IsGanttTable&&a.GetGanttTable()&&a.GetGanttTable().element.length&&(d=a.grid.uiGridBody.scrollTop(),0>g?a.grid.uiGridBody.scrollTop(d+50):a.grid.uiGridBody.scrollTop(d-
50)),e.preventDefault())}})},TrySetEndTime:function(a){this.GetGanttChartInstance().TrySetEndTime(a)},ScrollToAnchorTime:function(){this.GetGanttChartInstance().ScrollToAnchorTime()},SetStartTime:function(a){this.GetGanttChartInstance().SetStartTime(a)},ConvertXToTime:function(a){return this.GetGanttChartInstance().ConvertXToTime(a)},ConvertTimeToX:function(a){return this.GetGanttChartInstance().ConvertTimeToX(a)},RoundUp:function(a){return this.RoundTime(a,this.GetActualRoundToOption())},RoundUpDuration:function(a){var b=
RadiantQ.Gantt.Utils.TimeComputingUtils,g=Date.today();a=g.addTimeSpan(a);a=this.RoundTime(a,this.GetActualRoundToOption());return b.GetTimeSpan(g,a)},GetActualRoundToOption:function(){if(this.RoundTimeEditsTo()!=RadiantQ.Gantt.RoundToOptions.Auto)return this.RoundTimeEditsTo();var a=this.RoundTimeEditsTo();switch(this.options.BaseTimeScaleType){case RadiantQ.Gantt.TimeScaleType.Days:a=RadiantQ.Gantt.RoundToOptions.FifteenMinutes;break;case RadiantQ.Gantt.TimeScaleType.Minutes:a=RadiantQ.Gantt.RoundToOptions.None;
break;case RadiantQ.Gantt.TimeScaleType.Hours:a=RadiantQ.Gantt.RoundToOptions.Minute;break;case RadiantQ.Gantt.TimeScaleType.Months:a=RadiantQ.Gantt.RoundToOptions.Day;break;case RadiantQ.Gantt.TimeScaleType.Weeks:a=RadiantQ.Gantt.RoundToOptions.Day;break;case RadiantQ.Gantt.TimeScaleType.Years:a=RadiantQ.Gantt.RoundToOptions.Day}return a},RoundTime:function(a,b){var g=a.getHours(),d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);switch(b){case RadiantQ.Gantt.RoundToOptions.HalfDay:if(d<
a){var f=d.clone();if(d==a||f.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours())==a)break;return 12>g?d.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours()):d.addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())}return d;case RadiantQ.Gantt.RoundToOptions.Day:return d.isLessThan(a)&&12<a.getHours()?d.clone().addHours((new RQTimeSpan(1,0,0,0)).getTotalHours()):d;case RadiantQ.Gantt.RoundToOptions.Hour:return g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),g,0,0),g.isLessThan(a)?g.clone().addHours((new RQTimeSpan(0,
1,0,0)).getTotalHours()):g;case RadiantQ.Gantt.RoundToOptions.ThirtyMinutes:return d=a.getMinutes(),0==d?d=0:30>=d?d=30:59>=d&&(d=0,g++),23<g&&(g=0,a=a.clone().addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())),new Date(a.getFullYear(),a.getMonth(),a.getDate(),g,d,0);case RadiantQ.Gantt.RoundToOptions.FifteenMinutes:return d=a.getMinutes(),0==d?d=0:15>=d?d=15:30>=d?d=30:45>=d?d=45:59>=d&&(d=0,g++),23<g&&(g=0,a.addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())),new Date(a.getFullYear(),a.getMonth(),
a.getDate(),g,d,0);case RadiantQ.Gantt.RoundToOptions.Minute:return g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),g,a.getMinutes(),0),g<a?g.addMinutes((new RQTimeSpan(0,0,1,0)).getTotalMinutes()):g}return a},triggerChildWidgetsCreated:function(){this.triggerEvent("ChildWidgetsCreated")},BringTimeIntoView:function(a){this.GetGanttChartInstance().BringTimeIntoView(a)},OnHeadersChanged:function(a,b){if(0!=this.options.TimeScaleHeaders.length){var g=!1,d=this.options.TimeScaleHeaders,f=new RadiantQ.Gantt.BottomTwoHeaderDefinitions,
k=d.length-1,l=this.GetBaseScaleTypeLCD(d[k]);if(0<d.length){if(null!=d)for(;0<=k&&(!this.IsHeaderViewable(d[k],l)||(f.add(d[k]),2!=f.length));k--);f.IsContentEqual(this.BottomTwoHeaders)&&!0!=this.headerChanged||(this.BottomTwoHeaders=f,g=!0);for(k=0;k<d.length;k++)this.options.TimeScaleHeaders.getById(k).BaseTimeScaleType=l}g?this._updateGanttChartsBottomTwoHeader(l):"BaseUnitWidthChanges"==b?this._setOption("BottomTwoHeaders",this.BottomTwoHeaders):null!=b&&this._triggerHeaderCollectionschangedEvent(a,
b)}},_triggerHeaderCollectionschangedEvent:function(a,b){},IsHeaderViewable:function(a,b){var g=a.Type,f=1;if(g==d.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";g=a.CustomTimeScaleTypeHint.EquivalentType;f=a.CustomTimeScaleTypeHint.EquivalentUnits}return RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType(b,g,f)*this.options.BaseTimeUnitWidth<this.options.MinTimeUnitWidthForHeaderVisibility?
!1:!0},_updateGanttChartsBottomTwoHeader:function(a){this.updateGanttChart("BottomTwoHeaders",this.BottomTwoHeaders);this.updateGanttChart("BaseTimeScaleType",a)},GetBaseScaleTypeLCD:function(a){var b=a.Type;b==RadiantQ.Gantt.TimeScaleType.Custom&&(b=RadiantQ.Gantt.TimeScaleType.Days,null!=a.CustomTimeScaleTypeHint&&(b=a.CustomTimeScaleTypeHint.EquivalentType));return b=RadiantQ.Gantt.AdjustBaseScaleType(b)},_ValidateAndSetBaseTimeUnitWidth:function(a){var b=this.options,g=b.MinTimeUnitWidthForHeaderVisibility,
d=b.BaseTimeUnitWidthMinimum,f=b.BaseTimeUnitWidthMaximum,k=this.getCurrentTimeUnitsForBaseType(b.TimeScaleHeaders.getById(0));if(k*a<g){var l=!0;0!=this.CanAllowBTUW.fn.length&&(l={Allow:!1,NewBTUW:a},this.CanAllowBTUW.raise(this,l),l=!l.Allow);l&&(a=g/k)}a<d&&(a=d);a>f&&(a=f);b.BaseTimeUnitWidth!=a&&this._setOption("BaseTimeUnitWidth",a)},CanAllowBTUW:new ObjectEvent("CanAllowBTUW"),getCurrentTimeUnitsForBaseType:function(a){var b=a.Type,g=a.BaseTimeScaleType,f=1;if(b==d.TimeScaleType.Custom){if(null==
a.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";b=a.CustomTimeScaleTypeHint.EquivalentType;f=a.CustomTimeScaleTypeHint.EquivalentUnits}return RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType(g,b,f)},ZoomBySteps:function(a){var b=0>a;a=Math.abs(a);for(var g=this.options.BaseTimeUnitWidth,d=0;d<a;d++)g=b?g-0.1*g:g+0.1*g;this._ValidateAndSetBaseTimeUnitWidth(g)},_validateBasebaseTimeUnitWidthMaximum:function(){if(null!=
this.options.BaseTimeUnitWidthMaximum){if(this.options.BaseTimeUnitWidthMaximum<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidthMaximum cannot be less than the BaseTimeUnitWidthMinimum value.";}else this.options.BaseTimeUnitWidthMaximum=100;return 0},_validateBasebaseTimeUnitWidth:function(){if(null!=this.options.BaseTimeUnitWidth){if(this.options.BaseTimeUnitWidth<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidth cannot be less than "+this.options.BaseTimeUnitWidthMinimum+
".";if(this.options.BaseTimeUnitWidth>this.options.BaseTimeUnitWidthMaximum)throw"GanttBase.BaseTimeUnitWidth cannot be greater than "+this.options.BaseTimeUnitWidthMaximum+".";}else this.options.BaseTimeUnitWidth=25},_validateMinTimeUnitWidthForHeaderVisibility:function(){if(10>this.options.MinTimeUnitWidthForHeaderVisibility)throw"MinTimeUnitWidthForHeaderVisibility cannot be less than 10.";},GetGanttChart:function(){return b("div.rq-ganttChart",this.element)},GetGanttChartInstance:function(){var a=
this.GetGanttChart();return 0==a.length&&this.element.length?b("#"+this.element[0].id+"_GanttChart").data("GanttChart"):a.data("GanttChart")},GetLayoutElement:function(){return b(this._getUniqueSelectorIdByID("TopDivContainer"),this.element)},getTimeSpanHeader:function(){return b("div.rq-tsh-div",this.GetGanttChart())},createGanttWrapperElement:function(){this.$ganttWrapper=b('<div tabindex="0" id="'+this._createUniqueID("GanttWrapper")+'" style="height:100%;width:100%;" class="rq-ganttWrapper" ></div>').appendTo(this.element)},
_layoutGanttControls:function(){this.element.empty();this.createGanttWrapperElement();this.container=b('<div id="'+this._createUniqueID("TopDivContainer")+'" class="ui-layout-pane" style="height:100%; position:relative;" ></div>').appendTo(this.$ganttWrapper);this.options.ShowGridTable&&b('<div id="'+this._createUniqueID("TablePanal")+'" class="ui-layout-west" style="height:100%; position:relative;"></div>').appendTo(b(this._getUniqueSelectorIdByID("TopDivContainer"),this.element));b('<div id="'+
this._createUniqueID("GanttChart")+'" class="ui-layout-center" style="height:100%; width:100%; position:relative;"></div>').appendTo(b(this._getUniqueSelectorIdByID("TopDivContainer")));var a=b(this._getUniqueSelectorIdByID("TopDivContainer"),this.$ganttWrapper);this.CreateLayout(a)},HideGridTable:function(){},ShowGridTable:function(){},AfterSplitterResized:new ObjectEvent("AfterSplitterResized"),CreateLayout:function(a){function e(){for(var a=0,c=0;c<g.options.GanttTableOptions.columns.length;c++)a+=
g.options.GanttTableOptions.columns[c].width;!0==g.options.CanUserReorderRows&&(a+=25);return a+2}var g=this,d=null,f=0,k=window.RadiantQ_SplitterClose,l=window.RadiantQ_SplitterOpen,n=b.extend(!0,{},this.options.LayoutOptions);n.SpliterWidth&&(n.spacing_open=n.SpliterWidth,n.spacing_closed=n.SpliterWidth);k={west:{minSize:0,onclose_start:function(){}},enableCursorHotkey:!1,togglerTip_open:k,togglerTip_closed:l,resizerTip:window.RadiantQ_SplitterResize,west__size:b.cookie(g.ApplicationName+"_TablePanelWidth")?
b.cookie(g.ApplicationName+"_TablePanelWidth"):this.options.TablePanelWidth,center__onresize:function(){var e=d.state.west.size;g.options.SaveStateInCookie&&g.options.SaveStateInCookieOptions.TablePanelWidth&&b.cookie(g.ApplicationName+"_TablePanelWidth",e,{expires:365});g.options.TablePanelWidth=e;var k=g.GetGanttTable();k&&k.refreshScrollBsrVisibility&&k.refreshScrollBsrVisibility();a.trigger("layout.onresize");var l=setTimeout(function(){var a=g.GetGanttChartInstance();a&&(a.refreshDockPanel(),
!0==a.options.ResizeToFit&&a.ResizeToFitChanged());a=g.GetGanttTable();null!=a&&(!1==d.state.west.isVisible?(a.uiGridBody.scrollTop(1),e=g.options.TablePanelWidth=0):a.Refresh());clearTimeout(l);g.AfterSplitterResized.raise(d,{oldSize:f,currentSize:e});f=e},200);!1==g.options.ShowGanttChart&&g.HideChart()}};k=b.extend(!0,k,n);a.layout(k);d=a.data("layout");!1==this.options.ShowGridTable&&(this.options.TablePanelWidth=0);"string"==typeof this.options.TablePanelWidth&&-1!=this.options.TablePanelWidth.indexOf("%")?
d.sizePane("west",this.options.TablePanelWidth):(n=e(),n<d.state.west.size&&d.sizePane("west",n));f=d.state.west.size},UpdateLayout:function(){var a=b(".ui-layout-container",this.element);this.options.ShowGridTable&&a.data("layout").resizeAll();this.RefreshGanttHeight();!0==this.options.ShowGridTable&&this.options.UseVirtualization&&this.GetGanttTable().uiGridBody.trigger("scroll");this.options.UseChartVirtualization&&("ProjectGantt"==this.GanttType?(a=b(".rq-gc-rowsParent",this.element).data("GanttTaskItemsControl"))&&
a.Refresh(a.element,a.options.Data,a.$chartTable,a.options.ViewWidth,0):(a=b(".rq-gc-rowsParent",this.element).data("GanttRows"),a.Refresh(a.element,a.options.Data,a.table,a.options.ViewWidth)))},_canUpdateTable:0,CanUpdateTable:function(a){if(void 0==a)return this._canUpdateTable;a!=this._canUpdateTable&&(this._canUpdateTable=a,2==this._canUpdateTable||!1==this.options.ShowGridTable&&1==this._canUpdateTable)&&(this.updateTable(),this._canUpdateTable=0)},UpdateTaskState:function(a){if(a&&"FlexyGantt"!=
this.GanttType)for(var b=0;b<this.options.FlatItemsSource.length;b++){var g=this.options.FlatItemsSource[b];-1!=a.indexOf(g.Activity.id)&&(g.IsExpanded=!1)}},initGanttChart:function(){var a=this.options,e=new RadiantQ.Gantt.SpecialLineInfo;null==a.SpecialLineInfos&&(a.SpecialLineInfos=new RadiantQ.RQ_CollectionChangeNotifier,e.LineDateTime=Date.today(),e.ToolTipText="Today",a.SpecialLineInfos.add(e));if(null!=a.NowLineRefreshFrequency){var g=function(){a.SpecialLineInfos.remove(e);e=new RadiantQ.Gantt.SpecialLineInfo;
e.LineDateTime=new Date;e.ToolTipText="Now";e.LineColor="green";a.SpecialLineInfos.add(e)};g();RadiantQ.Gantt.Utils.setInterval(g,a.NowLineRefreshFrequency,0)}g=b.cookie(this.ApplicationName+"_CollapsedTaskList");this.options.SaveStateInCookie&&this.options.SaveStateInCookieOptions.TaskCollapsingState&&void 0!=g&&this.UpdateTaskState(g);var g=b(this._getUniqueSelectorIdByID("GanttChart")),d=this;if(window.__rqGanttInSP){var f=window.location.protocol+"//"+window.location.host;b.ajax({url:f+"/_catalogs/masterpage/RadiantQjQueryGanttWebPart/Domain.txt",
async:!1,type:"GET",success:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c)^129);a=String.fromCharCode.apply(String,b);f==a?RadiantQ.Gantt.lave.edcvafvfl=!0:d.getWindow()},error:function(a,b,c){d.getWindow()}})}g[this.getChildWidgetName("GanttChart")]({BottomTwoHeaders:a.BottomTwoHeaders,TimeScaleHeaders:a.TimeScaleHeaders,BaseTimeUnitWidth:b.cookie(d.ApplicationName+"_BaseTimeUnitWidth")?b.cookie(d.ApplicationName+"_BaseTimeUnitWidth"):a.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,
ZoomOptions:a.ZoomOptions,ScrollOptions:a.ScrollOptions,CustomChartBackgroundRanges:a.CustomChartBackgroundRanges,OverlappedTasksRenderingOptimization:a.OverlappedTasksRenderingOptimization,BaseTimeUnitWidthMinimum:a.BaseTimeUnitWidthMinimum,BaseTimeUnitWidthMaximum:a.BaseTimeUnitWidthMaximum,MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility,TaskItemTemplate:a.TaskItemTemplate,TaskBarBackgroundTemplate:a.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:a.TaskBarAdornerTemplate,
ParentTaskItemTemplate:a.ParentTaskItemTemplate,ProgressBarTemplate:a.ProgressBarTemplate,ProgressPercentBinding:a.ProgressPercentBinding,TaskStartTime:a.TaskStartTimeProperty,ParentTaskStartTime:a.ParentTaskStartTimeProperty,TaskEndTime:a.TaskEndTimeProperty,ParentTaskEndTime:a.ParentTaskEndTimeProperty,TasksListProperty:a.TasksListProperty,EnableOverlappedRenderingBindingProperty:a.EnableOverlappedRenderingBindingProperty,ParentTasksListProperty:a.ParentTasksListProperty,FlatItemsSource:a.FlatItemsSource,
RowHeight:a.RowHeight,TaskTooltipTemplate:a.TaskTooltipTemplate,SpecialLineInfos:a.SpecialLineInfos,DependencyLineColor:a.DependencyLineColor,DependencyListSource:a.DependencyListSource,WorkTimeSchedule:a.WorkTimeSchedule,GanttDependencyViews:this.DependencyViews,WorkingTimeBackground:a.WorkingTimeBackground,KnockoutObjectName:a.KnockoutObjectName,NonWorkingTimeBackground:a.NonWorkingTimeBackground,TimeRangeHighlightBehavior:a.TimeRangeHighlightBehavior,EnableAlternativeRowBackground:a.EnableAlternativeRowBackground,
Parent:this,GanttType:this.GanttType,ResizeInfoPopup:a.ResizeInfoPopup,MovingInfoPopup:a.MovingInfoPopup,ConnectingInfoPopup:a.ConnectingInfoPopup,TaskBarBrowseToCueLeftTemplate:a.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:a.TaskBarBrowseToCueRightTemplate,RowHeightBinding:a.RowHeightBinding,UseChartVirtualization:a.UseChartVirtualization,OnTaskBarLoad:a.OnTaskBarLoad,OnDependencyLineLoad:a.OnDependencyLineLoad,TouchTapAction:a.TouchTapAction,RowRenderingScheduleBinding:a.RowRenderingScheduleBinding,
ViewWidth:a.ViewWidth,EnableCustomRowBackground:a.EnableCustomRowBackground,EnableCustomRowForeground:a.EnableCustomRowForeground,MileStoneTemplate:a.MileStoneTemplate,DependencyTooltipTemplate:a.DependencyTooltipTemplate,ShowPreferredStartIndicator:a.ShowPreferredStartIndicator,ShowDependencyLines:a.ShowDependencyLines,CustomOverlappingBlockFn:a.CustomOverlappingBlockFn});this.initTimeSpaneHeader();this._triggerZoomedEvent(!0);g=this.GetGanttChartInstance();g.EndUpdate();g.initializeGanttComponents();
g=this.getTimeSpanHeader();this.getTimeSpanHeader().bind("heightChanged",function(a){a=d.element.find(".rq-gc-chartArea-div");var c=d.element.find(".rq-gc-topDiv");d.HeaderHeight=b(this).height();a.height(c.height()-d.HeaderHeight);d.UpdateHeight()});b(this.getTimeSpanHeader()).bind("timespanheaderszoomed",function(a,b){d._ValidateAndSetBaseTimeUnitWidth(b)});this.HeaderHeight=g.height();this.CanUpdateTable(this.CanUpdateTable()+1);this.GanttChartLoaded.raise(this);this.GanttChartIsLoaded=!0},initTable:function(){b('<div id="'+
this._createUniqueID("Table")+'" style="height:100%; width:100%; position:relative;"></div>').appendTo(b(this._getUniqueSelectorIdByID("TablePanal")))},_getUniqueSelectorIdByID:function(a){return"#"+this._createUniqueID(a)},BeginUpdate:function(){this.GetGanttChartInstance().BeginUpdate()},EndUpdate:function(){this.GetGanttChartInstance().EndUpdate()},_triggerZoomedEvent:function(a){this.triggerEvent("BeforeZooming",this,{ZoomedIn:a,Options:this.options})},GetTimeScaleHeadersInstance:function(){return b(this.getTimeSpanHeader(),
this.element).data("TimeSpanHeaders")},GetTimeScaleHeadersoptions:function(a){return this.GetTimeScaleHeadersInstance().options[a]},_setOption:function(a,e){if("BaseTimeUnitWidth"==a){var g=Math.round(1E3*e)/1E3;e=arguments[1]=g}if(this.options[a]!=e){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "DataSource":this._scrollContentEdited=!1;this.UpdateDatasource(!1);this.options.BeforeZooming&&this._triggerZoomedEvent(!0);this.ReCreateSelectableAndhoverable();g=b.cookie(this.ApplicationName+
"_CollapsedTaskList");this.options.SaveStateInCookie&&this.options.SaveStateInCookieOptions.TaskCollapsingState&&void 0!=g&&this.UpdateTaskState(g);break;case "BaseTimeUnitWidth":if(e<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidth cannot be less than to BaseTimeUnitWidthMinimum value = "+this.options.BaseTimeUnitWidthMinimum;if(e>this.options.BaseTimeUnitWidthMaximum)throw"GanttBase.BaseTimeUnitWidth cannot be greater than to BaseTimeUnitWidthMaximum value = "+this.options.BaseTimeUnitWidthMaximum;
this.OnHeadersChanged(null,"BaseUnitWidthChanges");g=this.GetTimeScaleHeadersoptions("BaseTimeUnitWidth")>=this.options.BaseTimeUnitWidth;this._triggerZoomedEvent(g);this.GetTimeScaleHeadersInstance().redraw();break;case "BaseTimeUnitWidthMinimum":if(0>=e)throw"GanttBase.BaseTimeUnitWidthMinimum cannot be less than or equal to 0.";this._validateBasebaseTimeUnitWidthMaximum();this.GetTimeScaleHeadersInstance().redraw();break;case "BaseTimeUnitWidthMaximum":this._validateBasebaseTimeUnitWidthMaximum();
this.GetTimeScaleHeadersInstance().redraw();break;case "MinTimeUnitWidthForHeaderVisibility":this._validateMinTimeUnitWidthForHeaderVisibility();g=this.GetTimeScaleHeadersInstance();this.updateGanttChart("MinTimeUnitWidthForHeaderVisibility",e);g.element[this.getChildWidgetName("TimeSpanHeaders")]({MinTimeUnitWidthForHeaderVisibility:e});this.GetTimeScaleHeadersInstance().redraw();break;case "UseTimeRangeFilteredTasksInRows":this.UseTimeRangeFilteredTasksInRows(arguments[1]);break;case "TimeRangeFilteredTasksTimeBuffer":this.TimeRangeFilteredTasksTimeBuffer(arguments[1]);
break;case "GanttTable":this._hookGanttTable();break;case "RowHeight":this._scrollContentEdited=!1;for(var d=this.FlatItemsSource.FlatItemsSource,g=0;g<d.length;g++)d[g].RowHeight&&(d[g].RowHeight=e);this.grid.setOptions(a,e);break;case "RowHeightBinding":this.grid.setOptions(a,e);this.UpdateRowHeightBinding(this.options.FlatItemsSource,!1);break;case "RoundTimeEditsTo":this.RoundTimeEditsTo(e);break;case "GanttTableOptions":this.updateGridOptions(e);d=this.element;g=this.GetGanttChartInstance();
d=g.getGridTBodyParent(d);g.VSB&&d&&g.SyncChartScrollBarWith(d,!0);this.ReCreateSelectableAndhoverable();break;case "GanttChartTemplateApplied":this.OnChartTemplateApplied(this.GetGanttChartInstance());break;case "TablePanelWidth":this.options.ShowGridTable&&b(".ui-layout-container",this.element).data("layout").sizePane("west",e);break;case "EnableDropAsChild":this.options.EnableDropAsChild=e;this.grid._dndTracker=null;this.grid.Refresh();break;case "UseVirtualization":this.options.UseVirtualization=
e;this.options.UseChartVirtualization=e;this.grid.setOptions("UseGridVirtualization",e);this.updateGanttChart("UseChartVirtualization",e);break;case "CanUserReorderRows":if(!1==this.options.ShowGridTable||this.grid.options.CanUserReorderRows==e)break;this.grid.options.CanUserReorderRows=e;for(var d=this.options.GanttTableOptions.columns,f=!1,g=0;g<d.length;g++)void 0!=d[g].cellClass&&-1!=d[g].cellClass.split(/\s+/).indexOf("rq-grid-column-rdnd")&&(f=!0);e&&null!=this.options.GanttTableOptions.columns&&
this.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader?(this.options.GanttTableOptions.columns.unshift({field:"",width:25,iseditable:!1,isRowHeader:!0,hidden:f,canUserReorderRows:!0,locked:!0}),this.grid._dndTracker=null,this.grid.setOptions("CanUserReorderRows",e),this._gridBindingResetEvent.raise()):(!0==this.options.GanttTableOptions.columns[0].isRowHeader&&this.options.GanttTableOptions.columns.shift(),this.grid.setOptions("CanUserReorderRows",e));this.options.ShowGridTable&&
this.options.ShowGanttChart&&(d=this.element,g=this.GetGanttChartInstance(),d=g.getGridTBodyParent(d),g.VSB&&d&&g.SyncChartScrollBarWith(d,!0));this.ReCreateSelectableAndhoverable();break;case "TaskBarBrowseToCueLeftTemplate":this.options.TaskBarBrowseToCueLeftTemplate=e;break;case "TaskBarBrowseToCueRightTemplate":this.options.TaskBarBrowseToCueRightTemplate=e;break;case "TaskBarAdornerTemplate":this.options.TaskBarAdornerTemplate=e;break;case "KnockoutObjectName":this.options.KnockoutObjectName=
e;break;case "GetPreferredIDCallBack":this.options.GetPreferredIDCallBack=e;this.grid.setOptions("GetPreferredIDCallBack",e);this.RedrawChartRows();d=this.element;g=this.GetGanttChartInstance();d=g.getGridTBodyParent(d);g.VSB&&d&&g.SyncChartScrollBarWith(d,!0);this.ReCreateSelectableAndhoverable();break;case "ClearPSTIndicator":if(e){d=this.ActivityViews;for(g=0;g<d.length;g++)d[g].activity.PreferredStartTime=this.options.ProjectStartDate;this.options.ShowPreferredStartIndicator.ApplyDependenciesOnClear&&
this.Model.ApplyDependencyConstraintsForAllDependencies()}break;case "EnablePSTIndicator":g=this.GetGanttChartInstance();if(g.options.ShowPreferredStartIndicator.Enabled==e)break;else g.options.ShowPreferredStartIndicator.Enabled=e,this.RedrawChartRows();break;case "ShowDependencyLines":e?b(".rq-gc-dependencysParent",this.GetGanttChart()).css("display","block"):b(".rq-gc-dependencysParent",this.GetGanttChart()).css("display","none")}this.updateGanttChart(a,e);"TimeScaleHeaders"==a&&(this.headerChanged=
!0,this.OnHeadersChanged(null,null),this.headerChanged=!1,this.subscribeHeaderCollectionChanged())}},updateGridOptions:function(a){if(a.columns){for(var b=a.columns,g=!1,d=0;d<b.length;d++)void 0!=b[d].cellClass&&-1!=b[d].cellClass.split(/\s+/).indexOf("rq-grid-column-rdnd")&&(g=!0);this.grid.options.CanUserReorderRows&&this.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&(!0!=a.columns[0].isRowHeader&&!0!=a.columns[0].locked||void 0==a.columns[0].canUserReorderRows)&&a.columns.unshift({field:"",
width:25,hidden:g,iseditable:!1,isRowHeader:!0,canUserReorderRows:!0,locked:!0});this.grid._dndTracker=null;this.grid.setOptions("columns",a.columns)}a.startEdit&&this.grid.setOptions("startEdit",a.startEdit);a.ColumnBehaviour&&this.grid.setOptions("ColumnBehaviour",a.ColumnBehaviour);this.ReCreateSelectableAndhoverable()},PrepareGanttTable:function(){var a=b("<div style='height: 100%;' class='ui-gridpanel' > </div>");if(this.options.GanttTable.parent().length){var e=this.options.GanttTable;a.append(e);
this.options.GanttTable=e}else a.append(this.options.GanttTable);return a},destroy:function(){this.triggerEvent("ondestroy");this.element.GanttRowselectable("destroy");this.element.hoverable("destroy");this.GetGanttChart().GanttChart("destroy");b(".ui-grid-body-table ",this.options.GanttTable).FlexyTable("destroy");var a=b(this._getUniqueSelectorIdByID("TopDivContainer"));a.layout().destroy();a.empty().remove();this.element.removeClass("rq-ganttBase radiantq-ui-GanttBase");this.widgetBaseDestroy.call(this)},
Print:function(a){RadiantQ.Gantt.Print(a,this)},ExportToImage:function(a){RadiantQ.Gantt.ExportToImage(a,this)},ScrollIntoView:function(a,e){if(a&&"function"==typeof a.TableRow){var g=this.GetGanttTable(),d=g.uiGridBody,f=g.GetDataFromRow(b("tr:last",g.uiGridBodyTable)),f=!0==b.isFunction(f.DisplayIndex)?f.DisplayIndex():f.DisplayIndex,k=d.scrollTop(),l=!0==b.isFunction(a.DisplayIndex)?a.DisplayIndex():a.DisplayIndex;"function"==typeof e&&g.AfterGridScroll.subscribe(p,this);var n=null,p=function(b){null!=
n&&clearTimeout(n);n=setTimeout(function(){setTimeout(function(){g.AfterGridScroll.unsubscribe(p,this);e(g.GetRowFromData(a),b)},0)},0)},q=this.options.RowHeight,r=d.scrollTop(),s=r/q+0,u=g.uiGridBody.height()/q,u=s+(u-2),s=!(s<l&&u>l);!0==this.options.UseVirtualization?!0==s&&d.scrollTop((l-(f-1))*this.options.RowHeight+k+g.renderHeight/2):!0==s&&d.scrollTop(r+(l-u)*q);e&&p(g)}},setHeight:function(a){this.SetWidthAndHeight(null,a)},SetWidthAndHeight:function(a,b){var g=this.GetLayoutElement();g.data("layout");
var d={};a&&(d.width=a+"px");b&&(d.height=b+"px");this.element.css(d);g.css(d);this.UpdateLayout()},_destroy:function(){this.element.data("GanttBase",null)}};f.GanttBase=a;window.TimesChangingEventArgs=function(a,b,g,d,f){this.DataSource=a;this.StartTime=b;this.EndTime=g;this.Type=d;f&&(this.FlexyNodeData=f)}})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){var d={DependencyViews:null,options:{name:"GanttControl",GanttTable:"",TablePanelWidth:"45%",ProjectStartDate:null,ProjectEndDate:null,ScheduleFrom:"ProjectStartDate",ValidateDependencySetting:!0,EnforceDependencyConstraints:!0,AutoCalculateSummaryTaskTimes:!0,AdjustDurationOnAssignment:!0,IDBinding:new RadiantQ.BindingOptions("ID"),SortOrderBinding:null,NameBinding:new RadiantQ.BindingOptions("Name"),IndentLevelBinding:new RadiantQ.BindingOptions("IndentLevel"),StartTimeBinding:new RadiantQ.BindingOptions("StartTime"),
PreferredStartTimeBinding:null,EffortBinding:new RadiantQ.BindingOptions("Effort"),EndTimeBinding:null,PredecessorIndicesBinding:new RadiantQ.BindingOptions("PredecessorIndices"),ProgressPercentBinding:new RadiantQ.BindingOptions("ProgressPercent"),DescriptionBinding:null,ResourceItemsSource:null,ResourceNameBinding:null,ResourceIDBinding:null,ResourceScheduleBinding:null,AssignedResourcesBinding:new RadiantQ.BindingOptions("Resources"),CanShiftInProgressTasks:!0,GanttResources:null,PropertyChanged:new ObjectEvent("PropertyChanged"),
LagStringUnitsInHours:1,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,FilterActivites:null,AutoExpandNodes:!0,CustomProgressCalculation:null,IsTaskReadOnlyBinding:null,CanUserReorderRows:!1,ProvideWBSID:null,WBSIDBinding:null,AssgnResourcesStringConverter:null,OnDependencyLineLoad:null,ActionManager:null,FilterOptions:null,ScheduleBinding:null,EnableMultipleSelection:!1},grid:null,SelectedItems:null,_selectedItem:null,SelectedActivities:null,SelectedActivity:null,ActivityViews:null,Model:null,
PropertyChanged:null,TaskContextMenu:null,ParentTaskContextMenu:null,TableContextMenu:null,DependencyContextMenu:null,RedrawChartRows:null,AddSelectedItem:function(a){var b=this.$ganttWrapper.data("GanttRowselectable");a instanceof RadiantQ.Gantt.View.IActivityView&&!1==b.selectedItems.contains(a)&&b.selectedItems.add(a)},RemoveSelectedItem:function(a){var b=this.$ganttWrapper.data("GanttRowselectable");a instanceof RadiantQ.Gantt.View.IActivityView&&b.selectedItems.contains(a)&&b.selectedItems.remove(a)},
RefreshRow:function(a){a&&a instanceof RadiantQ.Gantt.View.IActivityView&&(this.GetGanttTable().RefreshItem(a),(a=b("td",a.$chartRow).data("GanttTaskItemBar"))&&a.RedrawTaskBar(!1))},RedrawChartRow:function(a){a&&(a=this.ActivityViews.GetIActivityView(a))&&(a=b("td",a.$chartRow).data("GanttTaskItemBar"))&&a.RedrawTaskBar(!1)},GanttTaskItemBarCollection:[],ActivityTimeChanged:new ObjectEvent("ActivityTimeChanged"),ActivityTimeChanging:new ObjectEvent("ActivityTimeChanging"),CanShiftActivity:new ObjectEvent("CanShiftActivity"),
ActivityDragEnd:new ObjectEvent("ActivityDragEnd"),IsParentDraggable:!1,GetGanttTable:function(){if(null!=this.options.GanttTable&&""!=this.options.GanttTable)return this.options.GanttTable.data("VWGrid")},CanShiftActivityInternal:function(a){return 0<this.CanShiftActivity.fn.length?(a=new RadiantQ.Gantt.CancellableActivityEventArgs(a),this.CanShiftActivity.raise(this,a),!a.Cancel_M()):!0},FilterActivites:null,Filter:function(){if(null!=this.Model)if(this.IsSortingApplied){if(console.warn("Can't perform 'Filter' operation when Sorting is applied."),
this.options.GanttTableOptions.sortOptions){var a=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction;a&&"function"==typeof a&&!0==a("Filter")&&VW.Grid.GCSorter.remove(this.grid)}}else this.Model.Filter(this.options.FilterActivites,this.options.FilterOptions),this.UpdateViews(!1)},ResetFilters:function(){if(null!=this.Model)if(this.IsSortingApplied){if(console.warn("Can't perform 'ResetFilters' operation when Sorting is applied."),this.options.GanttTableOptions.sortOptions){var a=
this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction;a&&"function"==typeof a&&!0==a("ResetFilters")&&VW.Grid.GCSorter.remove(this.grid)}}else this.Model.Filter(null,null),this.UpdateViews(!1)},updateTable:function(){if(2==this.CanUpdateTable()||!1==this.options.ShowGridTable&&1==this._canUpdateTable){if(!1!=this.options.ShowGridTable){var a=this.GetGanttTable();a.updateGridHeight&&a.updateGridHeight()}this.CreateSelectableAndhoverable();this.UpdateHeight()}},ReCreateSelectableAndhoverable:function(){var a=
this.$ganttWrapper.data("GanttRowselectable");a&&a.destroy();(a=this.$ganttWrapper.data("hoverable"))&&a.destroy();this.CreateSelectableAndhoverable()},CreateSelectableAndhoverable:function(){var a=this;b(".grid-body-actualContent",this.element);this.$ganttWrapper[this.getChildWidgetName("GanttRowselectable")]({SelectionMode:this.options.SelectionMode,IsFlexyGantt:!1,SelectEvent:this.options.SelectEvent,selectedChange:function(b,e){void 0==e&&(e=b.args);a.SelectedActivities=[];a.SelectedItems=a.$ganttWrapper.data("GanttRowselectable").SelectedItems().slice(0);
1<a.SelectedItems.length&&(a.SelectedItems=a.SelectedItems.sort(function(a,b){return a.DisplayIndex_M()-b.DisplayIndex_M()}));for(var g=0;g<a.SelectedItems.length;g++){var d=a.SelectedItems[g].Activity_M();a.SelectedActivities.push(d)}0!=e.AddedItems.length?(jQuery.isArray(e.AddedItems.Data)?a._selectedItem=e.AddedItems.Data[0]:a._selectedItem=e.AddedItems.Data,a.SelectedActivity=a._selectedItem.Activity_M()):(g=a.SelectedItems.length,0<g?(a._selectedItem=a.SelectedItems[g-1],a.SelectedActivity=a.SelectedActivities[g-
1]):(a._selectedItem=null,a.SelectedActivity=null));a.triggerEvent("SelectionChanged",a,e)},onEnterKeyInLastRow:function(b){a.triggerEvent("onEnterKeyInLastRow",a)},EnableMultipleSelection:this.options.EnableMultipleSelection});this.$ganttWrapper[this.getChildWidgetName("hoverable")]();this.ChartVerticalScrollSyncWithTable()},_hookGanttTable:function(){b(this.options.GanttTable).css("height","100%");b(this._getUniqueSelectorIdByID("Table")).empty().append(this.options.GanttTable);this.CanUpdateTable(this.CanUpdateTable()+
1)},UpdateHeight:function(){if(this.options.ShowGridTable){var a=this.GetGanttTable();if(a.setOptions){var b=!0==this.options.ShowGanttChart?this.getTimeSpanHeader().height():a.options.headerHeight;a.setOptions("headerHeight",b)}}this.UpdateChartHeight()},_create:function(){""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=RadiantQ.Gantt.WorkTimeSchedule.Schedule8X5);this.GanttType="ProjectGantt";var a=this;this.options.ProjectStartDate instanceof Date||(this.options.ProjectStartDate=
Date.today());this.element.data("GanttControl",this);this.element.addClass("rq-GanttControl");RadiantQ.Gantt.GanttControlActionManager&&(this.ActionManager=new RadiantQ.Gantt.GanttControlActionManager,this.ActionManager.EnableRecordingActions=!1);this.options.ProjectEndDate=this.options.ProjectStartDate.clone().addDays(30);this.resourceIDBinding=this.options.ResourceIDBinding;this.ShouldEnforceDependencyConstraintsOnActivity=new ObjectEvent("ShouldEnforceDependencyConstraintsOnActivity");this.ReadOnlyPropertyChange=
new ObjectEvent("ReadOnlyPropertyChange");this.baseCreate.apply(this,arguments);this._isReadOnly=this.options.IsReadOnly;this._isEffortReadOnly=this.options.IsEffortReadOnly;this._isStartTimesReadOnly=this.options.IsStartTimesReadOnly;this._isProgressPercentReadOnly=this.options.IsProgressPercentReadOnly;this._isDependencyLinesReadOnly=this.options.IsDependencyLinesReadOnly;this.options.ResourceIDBinding_M=function(b){if(0==arguments.length)return null!=a.resourceIDBinding?a.resourceIDBinding:this.ResourceNameBinding;
a.resourceIDBinding=b};this.SelectedIndex_M=function(a){if(0==arguments.length){if(null==this._selectedItem||void 0==this._selectedItem)return-1;var b=this._selectedItem.DisplayIndex_M();return b?this._selectedItem?b:-1:this._selectedItem&&(b=this.GetGanttTable().GetRowFromData(this._selectedItem),null!=b)?b[0].rowIndex:-1}this.UpdateSectionByIndex(a)};this.SelectedItem_M=function(a){if(0==arguments.length)return this._selectedItem;this.UpdateSection(a)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(this.options,
"ResourceIDBinding",{get:function(){return null!=a.resourceIDBinding?a.resourceIDBinding:this.ResourceNameBinding},set:function(b){a.resourceIDBinding=b},enumerable:!0,configurable:!0}),Object.defineProperty(this,"SelectedIndex",{get:function(){return null==this._selectedItem||void 0==this._selectedItem?-1:this._selectedItem.DisplayIndex?this._selectedItem?this._selectedItem.DisplayIndex:-1:this._selectedItem?this.GetGanttTable().GetRowFromData(this._selectedItem)[0].rowIndex:-1},set:function(a){this.UpdateSectionByIndex(a)},
enumerable:!0,configurable:!0}),Object.defineProperty(this,"SelectedItem",{get:function(){return this._selectedItem},set:function(a){this.UpdateSection(a)},enumerable:!0,configurable:!0}))},OnPropertyChanged:function(a,b){this.options.PropertyChanged.raise(this,{PropertyName:a,value:b})},UpdateSectionByIndex:function(a){a=this.ActivityViews.length-1>=a?a:this.ActivityViews.length-1;this.UpdateSection(this.ActivityViews[a])},UpdateSection:function(a){this.$ganttWrapper.data("GanttRowselectable").selectItemByitem(a)},
GanttTableElement:null,AddNewItem:function(a,b){if(this.IsSortingApplied){if(console.warn("Can't perform 'AddNewItem' operation when Sorting is applied."),this.options.GanttTableOptions.sortOptions){var e=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction;e&&"function"==typeof e&&!0==e("AddNewItem")&&VW.Grid.GCSorter.remove(this.grid)}}else{e=this.ActivityViews.HoldtriggeringChange;!1==e&&(this.ActivityViews.HoldtriggeringChange=!0);void 0==b&&(b=!0);var g=this.Model.CreateNewActivity(a,
b);!1==e&&(this.ActivityViews.HoldtriggeringChange=!1);return g}},AddNewResourceItem:function(a){var c=this.options.ResourceItemsSource;if(null!=c)b.observable(c).insert(a);else return!1==b.isArray(a)&&(a=[a]),this.options.ResourceItemsSource=a,this.Model.AddNewResources(a)},RemoveResourceItem:function(a){var c=this.options.ResourceItemsSource;null!=c&&b.observable(c).remove(a)},InsertNewItemAsSiblingBelow:function(a,b,e){if(this.IsSortingApplied)console.warn("Can't perform 'InsertNewItemAsSiblingBelow' operation when Sorting is applied."),
this.options.GanttTableOptions.sortOptions&&(b=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction)&&"function"==typeof b&&!0==b("InsertNewItemAsSiblingBelow")&&VW.Grid.GCSorter.remove(this.grid);else if(void 0==b)window.console&&console.log&&console.log("undefined is not a valid index to insert as sibling below.");else{this.ActivityViews.HoldtriggeringChange=!0;void 0==e&&(e=!0);a=this.AddNewItem(a,e);e=null;var g=!0;-1!=b&&(e=this.ActivityViews[b],g=e._isExpanded,!0==
e._isParent&&e.IsExpanded_M(!1));this.GetGanttTable().MoveRows(this.ActivityViews.length-1,1,b);null!=e&&e.IsExpanded_M(g);this.ActivityViews.HoldtriggeringChange=!1;return a}},UpdateDatasource:function(a){var b=this.options;null==b.DataSource?this.Model instanceof RadiantQ.Gantt.Model.IGanttModel&&(this.Model.ShouldEnforceDependencyConstraintsOnActivity.unsubscribe(this.Model_ShouldEnforceDependencyConstraints,this),this.Model.ShouldEnforceDependencyConstraintsOnActivity.unsubscribe(this.Model_ShouldEnforceDependencyConstraints,
this.Model),this.Model.ProvideDefaultWBSID.unsubscribe(b.ProvideWBSID,this.Model),this.Model.Dispose(),this.Model=null):(this.Model=new RadiantQ.Gantt.Model.DataBoundGanttModel(b.DataSource,b.ProjectStartDate,b.ProjectEndDate,b.ScheduleFrom,b.ValidateDependencySetting,b.EnforceDependencyConstraints,b.AutoCalculateSummaryTaskTimes,b.AdjustDurationOnAssignment,b.LagStringUnitsInHours,b.IDBinding,b.SortOrderBinding,b.NameBinding,b.IndentLevelBinding,b.StartTimeBinding,b.PreferredStartTimeBinding,b.EffortBinding,
b.EndTimeBinding,b.PredecessorIndicesBinding,b.ProgressPercentBinding,b.ScheduleBinding,b.DescriptionBinding,b.ResourceItemsSource,b.ResourceNameBinding,b.ResourceIDBinding,b.ResourceScheduleBinding,b.AssignedResourcesBinding,b.WBSIDBinding,b.CustomProgressCalculation,b.WorkTimeSchedule,{Handler:this.Model_ShouldEnforceDependencyConstraints,Context:this},b.ProvideWBSID,b.CanInsertPropertyChangeTriggeringPropertiesInData,b.AutoExpandNodes,b.AssgnResourcesStringConverter,b.EnableMultipleSelection,b.DependencyFailedNotifierCallBack),
null!=this.options.FilterActivites&&this.Model.Filter(this.options.FilterActivites,this.options.FilterOptions),this.Model.CanShiftInProgressTasks_M(this.options.CanShiftInProgressTasks));this.triggerEvent("ModelCreated",this,void 0);this.UpdateViews(a)},Model_ShouldEnforceDependencyConstraints:function(a,b){0<this.ShouldEnforceDependencyConstraintsOnActivity.fn.length&&this.ShouldEnforceDependencyConstraintsOnActivity.raise(this,b)},_scheduleBinding:null,UpdateViews:function(a){this.ActivityViews&&
this.ActivityViews.Dispose();this.ActivityViews=new RadiantQ.Gantt.View.GanttFlatActivitiesList(this.Model,this);this.ActivityViews.RefreshDisplayIndexOfChildren();this.DependencyViews=this.GetGanttFlatDependenciesList();this._scheduleBinding&&this._scheduleBinding.Dispose();this.Model&&(this._scheduleBinding=new Binding(this.Model,"WorkTimeSchedule",this,"WorkTimeSchedule",null,null),this.options.GanttResources=this.Model.GanttResources_M());this.CreateGanttTable(a);this._setOption("FlatItemsSource",
this.ActivityViews);var b={};b.Source=this.ActivityViews;b.canUpdateTable=a;this.triggerEvent("FlatActivitiesListCreated",this,b)},CreateGanttTable:function(a){if(this.IsGanttTable&&this.options.ShowGridTable)if(a){""==this.options.GanttTable&&(this.options.GanttTable=b("<div class='rq-GanttTableBase' style='height:100%' id="+this._createUniqueID("grid")+"></div>"));a=this.options.GanttTable;var c=this.PrepareGanttTable();a.addClass("rq-GanttTable");for(var e=this.options.GanttTableOptions.columns,
g=!1,d=0;d<e.length;d++)void 0!=e[d].cellClass&&-1!=e[d].cellClass.split(/\s+/).indexOf("rq-grid-column-rdnd")&&(g=!0);this.options.CanUserReorderRows&&null!=this.options.GanttTableOptions.columns&&this.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&this.options.GanttTableOptions.columns.unshift({field:"",hidden:g,width:25,iseditable:!1,locked:!0,canUserReorderRows:!0,isRowHeader:!0});b(this._getUniqueSelectorIdByID("Table"),this.element).empty().append(c);this.grid=a.GanttTable({datasource:this.ActivityViews,
RowHeight:this.options.RowHeight,columns:this.options.GanttTableOptions.columns,editmode:this.options.GanttTableOptions.editmode,customPopup:this.options.GanttTableOptions.customPopup,startEdit:this.options.GanttTableOptions.startEdit,EnableHeaderMenu:this.options.GanttTableOptions.EnableHeaderMenu,HeaderMenuMode:this.options.GanttTableOptions.HeaderMenuMode,columnReorderable:this.options.GanttTableOptions.columnReorderable,AllowColumnFreezing:this.options.GanttTableOptions.AllowColumnFreezing,endEdit:this.options.GanttTableOptions.endEdit,
UseGridVirtualization:this.options.UseVirtualization,EnableColumnHeaderContextMenu:this.options.EnableColumnHeaderContextMenu,IsProjectGantt:!0,GetPreferredIDCallBack:this.options.GetPreferredIDCallBack,Parent:this,resizable:!1==this.options.GanttTableOptions.resizable?!1:!0,SaveColumnState:this.options.GanttTableOptions.SaveColumnState,table:this.options.GanttTableOptions.table,CanUserReorderRows:this.options.CanUserReorderRows,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,
GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,ColumnBehaviour:this.options.GanttTableOptions.ColumnBehaviour,enableSingleClickEdit:this.options.GanttTableOptions.enableSingleClickEdit,GridContextMenu:this.options.GanttTableOptions.GridContextMenu,sortable:this.options.GanttTableOptions.sortable,SortingMode:this.options.GanttTableOptions.SortingMode,allowUnsort:this.options.GanttTableOptions.allowUnsort,sortOptions:this.options.GanttTableOptions.sortOptions});a.bind("refresh",
b.proxy(function(){this.grid.uiGridBody.css("overflow-x","scroll");this.UpdateChartHeight()},this));this.grid.uiGridBody.css("overflow-x","scroll");this.GanttTableElement=a;this.CanUpdateTable(this.CanUpdateTable()+1)}else this.IsSortingApplied&&VW.Grid.GCSorter.remove(this.grid,!0),this.grid.setOptions("datasource",this.ActivityViews),this.$ganttWrapper.GanttRowselectable({Source:this.ActivityViews})},GetGanttFlatDependenciesList:function(){this.DependencyViews&&this.DependencyViews.Dispose(this.Model);
return new RadiantQ.Gantt.View.GanttFlatDependenciesList(this.Model,this.ActivityViews,this)},RefreshDisplayIndex:function(){this.ActivityViews.RefreshDisplayIndexOfChildren()},OnWorkTimeScheduleChanged:function(){this.UpdateCalendarSettingInScaleHeaders();null!=this.Model&&(this.Model.WorkTimeSchedule=this.options.WorkTimeSchedule)},RaiseActivityTimeChanged:function(a,b,e){this.OnActivityTimeChanged(a,b,e)},OnActivityTimeChanged:function(a,b,e){this.triggerEvent("ActivityTimeChanged",this,new RadiantQ.Gantt.ActivityTimeChangedEventArgs(a,
b,e))},updateGanttChart:function(a,b){},OnBeforeDragStart:function(a,b){for(var e=this.$ganttWrapper.data("GanttRowselectable"),g=[],d=100,f=0;f<b;f++)this.ActivityViews[a+f]._indentLevel<d&&(d=this.ActivityViews[a+f]._indentLevel);for(f=a+b;f<this.ActivityViews.length;f++){var k=this.ActivityViews[f];if(k._indentLevel>d)e.selectedItems.add(k),g.push(k);else break}1==b&&g.push(e.selectedItems[0]);return g},MoveRows:function(a,b,e,g,d,f){if(this.IsSortingApplied)console.warn("Can't perform 'Moving Rows' when Sorting is applied."),
this.options.GanttTableOptions.sortOptions&&(d=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction)&&"function"==typeof d&&!0==d("MoveRows")&&VW.Grid.GCSorter.remove(this.grid);else if(!(-1>a||-1>e)){d.value=0;f.value=e;if(a==e||f.value>=this.ActivityViews.length)return 0;f=new RadiantQ.Gantt.Utils.DelayUpdates;var k=null;-1<e&&(k=this.ActivityViews[e]);e=null;var l=-1;null!=g?(e=g,l=e.Activity_M().ChildActivities_M().length):null!=k&&(k.IsParent_M()&&k.IsExpanded_M()?
(e=k,l=0):(e=k.ParentView_M(),l=null!=e?e.Activity_M().ChildActivities_M().indexOf(k.Activity_M())+1:this.Model.Activities_M().indexOf(k.Activity_M())+1));g=new ObservableCollection;for(var n=this.ActivityViews[a]._indentLevel,k=0;k<b;k++){var p=this.ActivityViews[a+k];if(p._indentLevel<=n&&(g.add(p),d.value++,p._isParent&&p._isExpanded)){var q=this.GetVisibleChildCount(p.activity);d.value+=q;p._indentLevel<n&&(k+=q)}}if(null!=e)for(k=0;k<g.length;k++)a=g[k],a.ParentView_M()!=e&&this.Model.PrepareParenting(e.Activity_M(),
a.Activity_M()),l=this.ReparentActivity(a,e,l),a.ReparentView(e);else for(k=0;k<g.length;k++)a=g[k],l=this.ReparentActivity(a,null,l),a.ReparentView(null);f.Dispose();return d}},GetVisibleChildCount:function(a){var b=a.ChildActivities_M();if(0==b.length||!1==a._isExpanded)return 0;var e=0,b=a.ChildActivities_M();for(a=0;a<b.length;a++)e++,e+=this.GetVisibleChildCount(b[a]);return e},ReparentActivity:function(a,b,e){var g=-1,g=a.ParentActivity_M(),d=null!=g?g.ChildActivities_M():this.Model.Activities_M(),
g=d.indexOf(a.activity);d.remove(a.activity);this.Model.ApplyPreferredStartTimeOnActivity(a.activity,a.activity.PreferredStartTime_M());b==a.ParentView_M()&&e>g&&e--;if(null!=b){if(0>e)return d=b.Activity_M().ChildActivities_M(),d.add(a.Activity_M()),d.length;b.Activity_M().ChildActivities_M().insert(e,a.Activity_M());return e+1}0>e&&(e=0);this.Model._activities.insert(e,a.Activity_M());return e+1},GetIndexOfLastDescendant:function(a){if(0<a.Activity_M().ChildActivities_M().length&&a._isExpanded){var b=
this.GetLastUnfilteredOutActivity(a.Activity_M());if(null!=b)return a=this.ActivityViews.GetIActivityView(b),b=this.GetIndexOfLastDescendant(a),-1!=b?b:this.ActivityViews.indexOf(a)}return this.ActivityViews.indexOf(a)},GetLastUnfilteredOutActivity:function(a){for(var b=a.ChildActivities_M().length-1;0<=b;b--){var e=a.ChildActivities_M()[b];if(!e.IsFilteredOut_M())return e}return null},InsertNewItemAsChildOf:function(a,b,e){if(this.IsSortingApplied)return console.warn("Can't perform 'InsertNewItemAsChildOf' when Sorting is applied."),
this.options.GanttTableOptions.sortOptions&&(b=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction)&&"function"==typeof b&&!0==b("InsertNewItemAsChildOf")&&VW.Grid.GCSorter.remove(this.grid),!1;this.ActivityViews.HoldtriggeringChange=!0;a=this.AddNewItem(a,e);this.GetGanttTable().InsertRowsAsChild(this.ActivityViews.length-1,1,b);this.ActivityViews.HoldtriggeringChange=!1;return a},CanIndent:function(a){if(this.IsSortingApplied)return console.warn("Can't perform 'Indent' when Sorting is applied."),
this.options.GanttTableOptions.sortOptions&&(a=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction)&&"function"==typeof a&&!0==a("Indent")&&VW.Grid.GCSorter.remove(this.grid),!1;var b=this.ActivityViews.indexOf(a);return 0<b&&null!=this.GetParentableActivityView(b-1,a._indentLevel)?!0:!1},Indent:function(a){if(this.IsSortingApplied){if(console.warn("Can't perform 'Indent' when Sorting is applied."),this.options.GanttTableOptions.sortOptions){var b=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction;
b&&"function"==typeof b&&!0==b("Indent")&&VW.Grid.GCSorter.remove(this.grid)}}else{this.ActivityViews.HoldtriggeringChange=!0;var e=this.ActivityViews.indexOf(a);if(0<e){var g=this.GetParentableActivityView(e-1,a._indentLevel);if(null!=g){b=new RadiantQ.Gantt.Utils.DelayUpdates;this.Model.PrepareParenting(g.activity,a.activity);var d=this.Model._dependencies;if(null!=d&&d.IsActivityFinishDependentOnAnother(g.activity)){alert("New parent cannot have a FinishToFinish or StartToFinish dependency.");
return}var f=0;!1==g._isExpanded?f=g.Activity_M().ChildActivities_M().length:(e=this.LookForViewWithIndentLevel(a._indentLevel+1,e-1,!1),-1!=e&&(f=g.Activity_M().ChildActivities_M().indexOf(this.ActivityViews[e].activity)+1));this.ReparentActivity(a,g,f);a.ReparentView(g);if(null!=d&&0<d.length&&(a=d._fromActs[a.activity.id]))for(g=0;g<a.length;g++)a[g].PropertyChanged.raise(a[g],{PropertyName:"refreshView"});b.Dispose()}}this.ActivityViews.HoldtriggeringChange=!1}},GetParentableActivityView:function(a,
b){for(var e=a;0<=e;e--){if(this.ActivityViews[e].IndentLevel_M()==b)return this.ActivityViews[e];if(this.ActivityViews[e]._indentLevel<b)break}return null},LookForViewWithIndentLevel:function(a,b,e){if(e)for(;b<this.ActivityViews.lenght;b++){if(this.ActivityViews[b]._indentLevel==a)return b}else for(;0<=b;b--)if(this.ActivityViews[b]._indentLevel==a)return b;return-1},Outdent:function(a){if(this.IsSortingApplied)console.warn("Can't perform 'Outdent' when Sorting is applied."),this.options.GanttTableOptions.sortOptions&&
(a=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction)&&"function"==typeof a&&!0==a("Outdent")&&VW.Grid.GCSorter.remove(this.grid);else{this.ActivityViews.HoldtriggeringChange=!0;var b=new RadiantQ.Gantt.Utils.DelayUpdates,e=this.ActivityViews.indexOf(a),g=a._indentLevel;if(0<e&&0<g){if(1<g){var d=this.GetParentableActivityView(e-1,g-2);if(null!=d){var f=d.Activity_M().ChildActivities_M().indexOf(a.ParentActivity_M());-1!=f&&f++;this.ReparentActivity(a,d,f);a.ReparentView(d)}}else 1==
g&&(d=this.LookForViewWithIndentLevel(0,e-1,!1),d=this.Model.Activities_M().indexOf(this.ActivityViews[d].activity)+1,this.ReparentActivity(a,null,d),a.ReparentView(null));e=this.GetActivitiesToBeMadeChildren(e+1,g);g=this.ActivityViews.slice(0);for(d=0;d<e.length;d++)f=e[d],this.ReparentActivity(g[f],a,-1),g[f].ReparentView(a)}this.Model.ApplyPreferredStartTimeOnActivity(a.activity,a.activity.PreferredStartTime_M());b.Dispose();this.ActivityViews.HoldtriggeringChange=!1}},CollapseAllRecursive:function(a){if(this.ActivityViews.Contains(a)){a=
this.ActivityViews.GetIActivityView(a);for(var b=a.Activity_M().ChildActivities_M(),e=0;e<b.length;e++)this.CollapseAllRecursive(b[e]);a._isParent&&a.IsExpanded_M(!1)}},CollapseAll:function(){for(var a=0;a<this.Model._activities.length;a++)this.CollapseAllRecursive(this.Model._activities[a])},ExpandAllRecursive:function(a){if(this.ActivityViews.Contains(a)){a=this.ActivityViews.GetIActivityView(a);a._isParent&&a.IsExpanded_M(!0);a=a.Activity_M().ChildActivities_M();for(var b=0;b<a.length;b++)this.ExpandAllRecursive(a[b])}},
ExpandAll:function(){for(var a=0;a<this.Model._activities.length;a++)this.ExpandAllRecursive(this.Model._activities[a])},GetCriticalPathActivities:function(a){return null!=this.Model?this.Model.GetCriticalActivities(a):[]},LevelResources:function(a,b){null!=this.Model&&this.Model.LevelResources(a,b)},GetActivitiesToBeMadeChildren:function(a,b){for(var e=[],g=a;g<this.ActivityViews.length&&!(this.ActivityViews[g]._indentLevel<b);g++)this.ActivityViews[g]._indentLevel==b&&e.push(g);return e},RemoveActivity:function(a){if(this.IsSortingApplied){console.warn("Can't perform 'RemoveActivity' operation when Sorting is applied.");
if(this.options.GanttTableOptions.sortOptions){var b=this.options.GanttTableOptions.sortOptions.shouldClearSortingOnConflictingAction;b&&"function"==typeof b&&!0==b("RemoveActivity")&&VW.Grid.GCSorter.remove(this.grid)}return[]}var b=new RadiantQ.Gantt.Utils.DelayUpdates,e=this.Model.GetActivityById(a);if(null==e)throw"An activity corresponding to the specified id: "+a+", could not be found";a=[];this.BuildActivityHierarchyList(e,a);var g=e.Parent_M();if(this.ActivityViews.Contains(e)){var d=this.ActivityViews.GetIActivityView(e);
this.ActivityViews.indexOf(d);this.RecursivelyRemoveViews(d)}this.Model.RemoveActivity(g,e);this.Model.UpdateSortOrderFrom(g);b.Dispose();return a},BuildActivityHierarchyList:function(a,b){b.push(a);for(var e=a.ChildActivities_M(),g=0;g<e.length;g++)this.BuildActivityHierarchyList(e[g],b)},RecursivelyRemoveViews:function(a){if(a._isExpanded)for(var b=a.Activity_M().ChildActivities_M(),e=0;e<b.length;e++){var g=b[e];this.ActivityViews.Contains(g)&&(g=this.ActivityViews.GetIActivityView(g),this.RecursivelyRemoveViews(g))}a.ReparentView(null);
this.ActivityViews.RemoveAndDispose(a)},_destroy:function(){this.element.data("GanttControl",null)},destroy:function(){this.baseDestroy.apply(this,arguments)},_setOption:function(a,b){switch(a){case "ValidateDependencySetting":null!=this.Model&&(this.Model.ValidateDependencySetting=b);break;case "EnforceDependencyConstraints":null!=this.Model&&(this.Model.EnforceDependencyConstraints=b);break;case "IsReadOnly":this._isReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsReadOnly",Value:b});
break;case "IsEffortReadOnly":this._isEffortReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsEffortReadOnly",Value:b});break;case "IsStartTimesReadOnly":this._isStartTimesReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsStartTimesReadOnly",Value:b});break;case "IsProgressPercentReadOnly":this._isProgressPercentReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsProgressPercentReadOnly",Value:b});break;case "IsDependencyLinesReadOnly":this._isDependencyLinesReadOnly=
b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsDependencyLinesReadOnly",Value:b});break;case "WorkTimeSchedule":_workTimeSchedule=b;break;case "EnableMultipleSelection":if(null!=this.Model)this.$ganttWrapper[this.getChildWidgetName("GanttRowselectable")]({EnableMultipleSelection:b});break;case "ResourceItemsSource":if(null!=this.Model)for(var e=this.Model.GanttResources_M(),g=e.length-1;0<=g;g--)e.Remove(e[g]);this.options.ResourceItemsSource=b;e=this.options.DataSource;this._setOption("DataSource",
null);this._setOption("DataSource",e)}this.baseSetOption.apply(this,arguments)},baseCreate:function(){},baseSetOption:function(){},baseDestroy:function(){},triggerEvent:function(a,b,e){},getChildWidgetName:function(a){}};f.GanttControl=d})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){b.fn.GetFlexyGanttInstance=function(){var a=this.data("FlexyGantt");if(a)return a;throw Error("Cannot call GetFlexyGanttInstance method before it is initialized");};var d={DependencyViews:null,options:{name:"FlexyGantt",RowRenderingScheduleBinding:null,resolverFunction:function(){return null},dynamicResolverFunction:null,AutoExpandNodes:!0,RowHeightBinding:null,ForceParentTemplateEvenIfChildless:!0,OverlappedTasksRenderingOptimization:null,UseTimeRangeFilteredTasksInRows:!1,TimeRangeFilteredTasksTimeBuffer:null,
TablePanelWidth:"20%",CanUserReorderRows:!1,GanttTable:"",DependencyListSource:new RadiantQ.RQ_CollectionChangeNotifier,DependencyLineStartRowItemBinding:null,DependencyLineEndRowItemBinding:null,DependencyLineStartItemBinding:null,DependencyLineEndItemBinding:null,DependencyLineTypeBinding:null,DependencyLineStartItemPosAdjustmentBinding:null,DependencyLineEndItemPosAdjustmentBinding:null,ProgressPercentBinding:null,isStaticTaskBars:!1,EnableMultipleSelection:!1,CustomOverlappingBlockFn:null,AreTasksOverlappingCallBack:null,
EnableMultipleTaskSelector:!1,MultipleTaskSelectorKeyCode:null},grid:null,SelectedItems:null,_selectedItem:null,FlatItemsSource:null,FlatHierarchicalItemsList:null,RedrawChartRow:null,FilterTasksByTimeRange:null,TaskTimeChanging:null,TaskTimeChanged:null,DetermineShiftBehavior:new ObjectEvent("DetermineShiftBehavior"),AdjustLinkLineStartPosition:new ObjectEvent("AdjustLinkLineStartPosition"),OnTaskBarMouseDown:new ObjectEvent("OnTaskBarMouseDown"),OnDependencyDrag:new ObjectEvent("OnDependencyDrag"),
GanttTableElement:null,ReCreateSelectableAndhoverable:function(){var a=this.$ganttWrapper.data("GanttRowselectable");a&&a.destroy();(a=this.$ganttWrapper.data("hoverable"))&&a.destroy();this.CreateSelectableAndhoverable()},CreateSelectableAndhoverable:function(){var a=this;b(".grid-body-actualContent",this.element);this.$ganttWrapper[this.getChildWidgetName("GanttRowselectable")]({SelectionMode:this.options.SelectionMode,IsFlexyGantt:!0,SelectEvent:this.options.SelectEvent,selectedChange:function(c,
e){void 0==e&&(e=c.args);a.SelectedItems=b.makeArray(a.$ganttWrapper.data("GanttRowselectable").SelectedItems());1<a.SelectedItems.length&&(a.SelectedItems=a.SelectedItems.sort(function(a,b){return a.DisplayIndex()-b.DisplayIndex()}));0!=e.AddedItems.length?(jQuery.isArray(e.AddedItems.Data)?a._selectedItem=e.AddedItems.Data[0]:a._selectedItem=e.AddedItems.Data,!1==RadiantQ.CanUseDefineProperty&&(a.SelectedItem=a._selectedItem,a.SelectedIndex=a._selectedItem?a._selectedItem.DisplayIndex():-1)):(!1==
RadiantQ.CanUseDefineProperty&&(a.SelectedItem=null,a.SelectedIndex=-1),a._selectedItem=null);a.triggerEvent("SelectionChanged",a,e)},onEnterKeyInLastRow:function(b){a.triggerEvent("onEnterKeyInLastRow",a)},EnableMultipleSelection:this.options.EnableMultipleSelection});this.$ganttWrapper[this.getChildWidgetName("hoverable")]();this.ChartVerticalScrollSyncWithTable()},_canUpdateTable:0,updateTable:function(){if(2==this.CanUpdateTable()||!1==this.options.ShowGridTable&&1==this._canUpdateTable)!1==this.options.ShowGridTable?
setTimeout(function(){this.UpdateHeight();this.CreateSelectableAndhoverable()}.bind(this),0):(this.UpdateHeight(),this.CreateSelectableAndhoverable())},_hookGanttTable:function(){b(this.options.GanttTable).css("height","100%");b(this._getUniqueSelectorIdByID("Table")).empty().append(this.options.GanttTable);this.CanUpdateTable(this.CanUpdateTable()+1)},UpdateHeight:function(){if(this.options.ShowGridTable){var a=this.GetGanttTable(),b=!0==this.options.ShowGanttChart?this.getTimeSpanHeader().height():
a.options.headerHeight;a.setOptions&&a.setOptions("headerHeight",b)}this.UpdateChartHeight()},ConvertToValidTimes:function(a,b,e,g,d,f,k,l,n){"ResizeAtStart"!=f?null==n?(g.Value=b.clone(),d.Value=b.addMilliseconds(e.totalMilliseconds_M())):(g.Value=b.clone(),g.Value=RadiantQ.Gantt.Model.BaseGanttModel.AdjustStartTime(g.Value,e,n),d.Value=RadiantQ.Gantt.Model.BaseGanttModel.ComputeEndTime(g.Value,e,n)):null==n?(g.Value=b.clone(),d.Value=b.addMilliseconds(-e.totalMilliseconds_M())):(g.Value=b.clone(),
g.Value=RadiantQ.Gantt.Model.BaseGanttModel.AdjustEndTime(g.Value,n),d.Value=RadiantQ.Gantt.Model.BaseGanttModel.ComputeStartTime(g.Value,e,n));this.OnTaskTimeChanging(a,g,d,f,k,l)},OnTaskTimeChanging:function(a,b,e,g,d,f){0<this.TaskTimeChanging.fn.length&&(a=new TimesChangingEventArgs(a,b.Value,e.Value,g),a.shouldSyncDragCue=!1,a.row_index=d.row_index,a.element=f,this.TaskTimeChanging.raise(this,a),d.shouldSyncDragCue=a.shouldSyncDragCue,b.Value=a.StartTime,e.Value=a.EndTime)},GetGanttTable:function(){return this.options.GanttTable?
this.options.GanttTable.data("VWGrid"):null},UseTimeRangeFilteredTasksInRows:function(a){if(void 0==a||null==a)return this._useTimeRangeFilteredTasksInRows||(this._useTimeRangeFilteredTasksInRows=!1),this._useTimeRangeFilteredTasksInRows;this._useTimeRangeFilteredTasksInRows=a},TimeRangeFilteredTasksTimeBuffer:function(a){if(void 0==a||null==a){if(this._timeRangeFilteredTasksTimeBuffer)return this._timeRangeFilteredTasksTimeBuffer;this._timeRangeFilteredTasksTimeBuffer=null}else this._timeRangeFilteredTasksTimeBuffer=
a},_create:function(){""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=null);this._validateOptions();this.GanttType="FlexyGantt";this.element.data("FlexyGantt",this);this.element.addClass("rq-FlexyGantt");this._useTimeRangeFilteredTasksInRows=this.options.UseTimeRangeFilteredTasksInRows;this._timeRangeFilteredTasksTimeBuffer=this.options.TimeRangeFilteredTasksTimeBuffer;this.FilterTasksByTimeRange=new ObjectEvent("FilterTasksByTimeRange");this.TaskTimeChanging=new ObjectEvent("TaskTimeChanging");
this.TaskTimeChanged=new ObjectEvent("TaskTimeChanged");this.baseCreate.apply(this,arguments);this.SelectedItems=new ObservableCollection;this.SelecteIndex_M=function(a){if(0==arguments.length){if(null==this._selectedItem||void 0==this._selectedItem)return-1;var b=this._selectedItem.DisplayIndex;if(void 0==b||null==b)return this._selectedItem.TableRow()?this._selectedItem.TableRow()[0].rowIndex:-1;var e="function"==typeof b,b=e?this._selectedItem.DisplayIndex():b;-1==b&&(b=this.FlatHierarchicalItemsList.indexOf(this._selectedItem.HierarchicalItem),
-1!=b&&(e?this._selectedItem.DisplayIndex(b):this._selectedItem.DisplayIndex=b));return b}this.UpdateSectionByIndex(a)};this.SelectedItem_M=function(a){if(0==arguments.length)return this._selectedItem;this.UpdateSection(a)};RadiantQ.CanUseDefineProperty?(Object.defineProperty(this,"SelectedIndex",{get:function(){if(null==this._selectedItem||void 0==this._selectedItem)return-1;var a=this._selectedItem.DisplayIndex;if(void 0==a||null==a)return this._selectedItem.TableRow()?this._selectedItem.TableRow()[0].rowIndex:
-1;var b="function"==typeof a,a=b?this._selectedItem.DisplayIndex():a;-1==a&&(a=this.FlatHierarchicalItemsList.indexOf(this._selectedItem.HierarchicalItem),-1!=a&&(b?this._selectedItem.DisplayIndex(a):this._selectedItem.DisplayIndex=a));return a},set:function(a){this.UpdateSectionByIndex(a)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"SelectedItem",{get:function(){return this._selectedItem},set:function(a){this.UpdateSection(a)},enumerable:!0,configurable:!0})):(this.SelectedIndex=
-1,this.SelectedItem=null);RadiantQ.Gantt.Utils.MulipleTaskSelection&&this.options.EnableMultipleTaskSelector&&this.initMulipleTaskSelection()},initMulipleTaskSelection:function(){var a=this.options.BeforeNodeExpansionStateChangeFn,c=this.options.AfterNodeExpansionStateChangeFn;this.options.BeforeNodeExpansionStateChangeFn=function(){a&&a.apply(arguments)};this.options.AfterNodeExpansionStateChangeFn=function(){c&&c.apply(arguments)};var e=b(),g=new RadiantQ.Dictionary,e=new RadiantQ.Gantt.Utils.MulipleTaskSelection(e,
null!=this.options.MultipleTaskSelectorKeyCode?this.options.MultipleTaskSelectorKeyCode:null,function(a){a=b(a).data("TaskBar");return a.options&&a.options.Data&&a.options.Data.guid?a.options.Data.guid:a.uuid});e.onSelectionChange=function(a,c){var e=b(a).data("TaskBar"),d=b(a).attr("guid");e&&e.options&&e.options.Data&&void 0!==c&&(c?g.Add(d,e):g.Remove(d))};var d=!1;this.TaskTimeChanged.subscribe(function(a,c){var e=b(a.element).attr("guid");if(g[e]&&!d){d=!0;this.MulipleTaskSelector.taskTimeChanged=
!0;var f=a.options.StartTime,p=a.options.EndTime,q=c.StartTime,r=c.EndTime,s=g.keys.slice(),u=g.asArray.slice();if(void 0!=u&&0<u.length)for(var w=0;w<u.length;w++)if(e!=s[w]){var t=u[w];if("DragEnd"==c.Type){var v=q-f,z=t.options.StartTime.clone().addMilliseconds(v),v=t.options.EndTime.clone().addMilliseconds(v);t.DragEnd(t,{originalStart:z,originalEnd:v})}else"ResizeEnd"==c.Type?(v=r-p,v=t.options.EndTime.clone().addMilliseconds(v),v<t.options.StartTime&&(v=t.options.StartTime),t.ResizeEnd(t,{originalStart:t.options.StartTime,
originalEnd:v})):"ResizeStart"==c.Type&&(v=q-f,z=t.options.StartTime.clone().addMilliseconds(v),z>t.options.EndTime&&(z=t.options.EndTime),t.ResizeStart(t,{originalStart:z,originalEnd:t.options.EndTime}))}d=!1;var x=this;setTimeout(function(){x.MulipleTaskSelector.taskTimeChanged=!1},0)}},this);e.OnClear=function(){for(var a=g.asArray.slice(),b=0;b<a.length;b++);g.Clear()};this.MulipleTaskSelector=e},_validateOptions:function(){this.baseValidateOption.apply(this,arguments);var a=this.options;window.console&&
(a.TaskStartTimeProperty&&"string"==typeof a.TaskStartTimeProperty||console.error("TaskStartTimeProperty has to be a string referring a property name in the bound object."),a.TaskEndTimeProperty&&"string"==typeof a.TaskEndTimeProperty||console.error("TaskEndTimeProperty has to be a string referring a property name in the bound object."),a.ParentTaskStartTimeProperty&&"string"!=typeof a.ParentTaskStartTimeProperty&&console.error("ParentTaskStartTimeProperty has to be a string referring a property name in the bound object."),
a.ParentTaskEndTimeProperty&&"string"!=typeof a.ParentTaskEndTimeProperty&&console.error("ParentTaskEndTimeProperty has to be a string referring a property name in the bound object."))},UpdateSectionByIndex:function(a){a=this.FlatItemsSource.FlatItemsSource.length-1>=a?a:this.FlatItemsSource.FlatItemsSource.length-1;this.UpdateSection(this.FlatItemsSource.FlatItemsSource[a])},UpdateSection:function(a){this.$ganttWrapper.data("GanttRowselectable").selectItemByitem(a)},RaiseFilterTasksByTimeRange:function(a){if(null!=
jQuery._data(this.element[0],"events")[this.widgetName.toLowerCase()+"filtertasksbytimerange"]||this.options.FilterTasksByTimeRange){var b=this.GetGanttChartInstance();a=new RadiantQ.FlexyGantt.FilterTasksByTimeRangeEventArgs(a,b.options.ComputedStartTime,b.options.ComputedEndTime);a.GanttChart=b;this.triggerEvent("FilterTasksByTimeRange",this,a);return a.FilteredList}return null},FlatItemsSource:null,UpdateDatasource:function(a){var b=this,e=this.options,g=new RadiantQ.FlexyGantt.HierarchyToList(this.options.DataSource,
function(a,g){var d=b.options.resolverFunction.call(this,a,g);e.CanInsertPropertyChangeTriggeringPropertiesInData&&b._injectGetAndSetOnData(g,a,e,d);return d},this.options,function(a,e){return b.options.ExpansionStateHandler?b.options.ExpansionStateHandler(a,e):null});this.FlatItemsSource=g;this.FlatHierarchicalItemsList=this.FlatItemsSource.FlatHierarchicalItemsList;var d=this.GetGanttChartInstance();d&&d.VSB&&(d.VSB.ItemsSource=this.FlatHierarchicalItemsList,d.VSB.UpdateScrollContentHeight());this.options.DataSource&&
this.FlatItemsSource.UpdateDisplayIndex();d={};d.Source=g;d.canUpdateTable=a;this.CreateFlexyTable(g,a);this.triggerEvent("FlatItemsSourceCreated",this,d);this.UpdateRowHeightBinding(g,!0);void 0==g.FlatItemsSource&&(g.FlatItemsSource=null);this._setOption("FlatItemsSource",g.FlatItemsSource);g.dynamicResolver=this.options.dynamicResolverFunction},CreateFlexyTable:function(a,c){if(this.IsGanttTable&&this.options.ShowGridTable)if(c){""==this.options.GanttTable&&(this.options.GanttTable=b("<div class='rq-GanttTableBase' style='height:100%' id="+
this._createUniqueID("grid")+"></div>"));for(var e=this.options.GanttTable,g=this.PrepareGanttTable(),d=this.options.GanttTableOptions.columns,f=!1,k=0;k<d.length;k++)void 0!=d[k].cellClass&&-1!=d[k].cellClass.split(/\s+/).indexOf("rq-grid-column-rdnd")&&(f=!0);e.addClass("rq-FlexyTable");this.options.CanUserReorderRows&&null!=this.options.GanttTableOptions.columns&&this.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&this.options.GanttTableOptions.columns.unshift({field:"",
width:25,hidden:f,iseditable:!1,isRowHeader:!0,canUserReorderRows:!0,locked:!0});b(this._getUniqueSelectorIdByID("Table"),this.element).empty().append(g);this.grid=e.FlexyGrid({datasource:a.FlatItemsSource,RowHeight:this.options.RowHeight,table:this.options.GanttTableOptions.table,Parent:this,UseGridVirtualization:this.options.UseVirtualization,EnableHeaderMenu:this.options.GanttTableOptions.EnableHeaderMenu,columns:this.options.GanttTableOptions.columns,CanUserReorderRows:this.options.CanUserReorderRows,
columnReorderable:this.options.GanttTableOptions.columnReorderable,SaveColumnState:this.options.GanttTableOptions.SaveColumnState,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,startEdit:this.options.GanttTableOptions.startEdit,endEdit:this.options.GanttTableOptions.endEdit,ColumnBehaviour:this.options.GanttTableOptions.ColumnBehaviour,resizable:!1==this.options.GanttTableOptions.resizable?!1:!0,editmode:this.options.GanttTableOptions.editmode,
enableSingleClickEdit:this.options.GanttTableOptions.enableSingleClickEdit,GridContextMenu:this.options.GanttTableOptions.GridContextMenu});this.grid.uiGridBody.css("overflow-x","scroll");this.GanttTableElement=e;e.bind("refresh",b.proxy(function(){this.grid.uiGridBody.css("overflow-x","scroll");this.UpdateChartHeight()},this));this.CanUpdateTable(this.CanUpdateTable()+1)}else this.grid.uiGridBody.css("overflow-x","scroll"),this.grid.setOptions("datasource",a.FlatItemsSource),this.$ganttWrapper.GanttRowselectable({Source:a.FlatItemsSource})},
_injectGetAndSetOnData:function(a,b,e,g){function d(a,b){if(a&&b){a.PropertyChanged||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));var c=a[b];Object.defineProperty(a,b,{get:function(){return c},set:function(a){c!=a&&(c=a,this.PropertyChanged.raise(this,{PropertyName:b,Value:a}))},enumerable:!0,configurable:!0})}}var f=a=null;if(null!=g)a=e.ParentTaskStartTimeProperty,f=e.ParentTaskEndTimeProperty;else if(a=e.TaskStartTimeProperty,f=e.TaskEndTimeProperty,e.TasksListProperty&&b[e.TasksListProperty]){g=
b[e.TasksListProperty];for(var k=0;k<g.length;k++){var l=g[k];null!=a&&new d(l,a);null!=f&&new d(l,f)}a=e.ParentTaskStartTimeProperty;f=e.ParentTaskEndTimeProperty}null!=a&&new d(b,a);null!=f&&new d(b,f)},UpdateRowHeightBinding:function(a,b){if(a&&a.FlatItemsSource){var e=this,g=a.FlatItemsSource;this.isRowHeightBindingDefined=!1;null!=this.options.RowHeightBinding&&(this.options.RowHeightBinding.Converter?this.isRowHeightBindingDefined=!0:this.options.RowHeightBinding.Converter&&(this.isRowHeightBindingDefined=
!0));if(this.isRowHeightBindingDefined&&b){for(var d=0;d<g.length;d++)void 0!=this.options.RowHeightBinding.Property?e.SubscribeChangeNotifications(g[d]):this._updateRowHeightFromBinding(g[d],null);g.CollectionChanged.subscribe(function(a,b){if("insert"==a.type)for(var c=0;c<b.items.length;c++)this.AddToScrollableContentHeight(b.items[c].RowHeight||this.options.RowHeight),void 0!=this.options.RowHeightBinding.Property?e.SubscribeChangeNotifications(b.items[c]):this._updateRowHeightFromBinding(b.items[c],
null);else if("remove"==a.type||"remove"==e.type)for(c=0;c<b.items.length;c++)this.AddToScrollableContentHeight(-(b.items[c].RowHeight||this.options.RowHeight)),e.UnsubscribeChangeNotifications(b.items[c])},this)}}},SubscribeChangeNotifications:function(a){a.PropertyChanged.subscribe(this.notifyChange,this);a.HierarchicalItem.PropertyChanged.subscribe(this.notifyChange,this)},UnsubscribeChangeNotifications:function(a){a.PropertyChanged.unsubscribe(this.notifyChange,this);a.HierarchicalItem.PropertyChanged.unsubscribe(this.notifyChange,
this)},UpdateTableAndChartRowHeight:function(a,c){null!=this.GanttTableElement&&this.GetGanttTable().RefreshItem(a);var e=b(a.ChartRow());if(e.length){var g=b("td",e);g.height(c-1);g.css("height",c-1+"px");g[0]._isTriggered||(g[0]._isTriggered=!0,g.trigger("heightChange"));e.height(c);null!=this.options.RowHeightBinding&&this.GetGanttChartInstance().updateGanttDependencyLines()}},UpdateRowHeight:function(){var a=this.options.FlatItemsSource;if(a)for(var b=0;b<a.length;b++)this.UpdateTableAndChartRowHeight(a[b],
this.options.RowHeight);this.UpdateChartHeight()},tableHasScrollBar:!1,updateScrollBsrVisibility:function(){if(this.options.ShowGridTable){var a=this.GetGanttTable();a.updateGridHeight();a.updateScrollPadding();a.updateGridWidth()}},notifyChange:function(a,b){this.options.RowHeightBinding.Property==b.PropertyName&&this._updateRowHeightFromBinding(a,b.value)},_updateRowHeightFromBinding:function(a,b){var e=a.RowHeight||this.options.RowHeight,g;g=this.options.EnableOverlappedRenderingBindingProperty&&
!0!=a._data[this.options.EnableOverlappedRenderingBindingProperty]?this.options.RowHeight:this.options.RowHeightBinding.Converter.call(a,b);a.RowHeight=g;null!=g&&(this.AddToScrollableContentHeight(g-e),this.UpdateTableAndChartRowHeight(a,g),this.UpdateChartHeight(),this.updateScrollBsrVisibility(!0))},UpdateOverlappingRowHeightBinding:function(a){if(void 0!=this.options.RowHeightBinding){var c=b(a.ChartRow());c.length&&(c=b("td",c).data("TasksListControl"),this._updateRowHeightFromBinding(a,a.MaxOverlappingBlocksRowCount()),
c.RedrawTaskRow())}},CollapseAll:function(){for(var a=0;a<this.FlatHierarchicalItemsList.length;a++)this.FlatHierarchicalItemsList[a].CollapseAll()},ExpandAll:function(){for(var a=0;a<this.FlatHierarchicalItemsList.length;a++)this.FlatHierarchicalItemsList[a].isExpanded||this.FlatHierarchicalItemsList[a].ExpandAll()},RedrawChartRow:function(a){(a=!1==a instanceof RadiantQ.FlexyGantt.FlexyNodeData?a.corrFlexyNodeData?a.corrFlexyNodeData:this.FlatItemsSource.GetItemFromDataSource(a):a)&&null!=a.ChartRow()?
(a=a.ChartRow(),b("td",a).data("TasksListControl").RedrawTaskRow()):console.log("The provided data is not an FlexyNodeData while redrawing chart row")},updateGanttChart:function(a,b){},destroy:function(){this.baseDestroy.apply(this,arguments);this.element.empty()},_setOption:function(a,b){this.baseSetOption.apply(this,arguments);switch(a){case "EnableMultipleSelection":this.$ganttWrapper[this.getChildWidgetName("GanttRowselectable")]({EnableMultipleSelection:b})}},baseCreate:function(){},baseSetOption:function(){},
baseDestroy:function(){},triggerEvent:function(a,b,e){},getChildWidgetName:function(a){},baseValidateOption:function(){b.radiantq.GanttBase.prototype._validateOptions.call(this)},_destroy:function(){this.element.data("FlexyGantt",null)}};f.FlexyGantt=d})(RadiantQ.Gantt.Widget,jQuery);
(function(f){RadiantQ.FlexyGantt.RenderNonWorkingHours=function(b,d,a,c,e){if(void 0!=c){var g=a.options;e=e||g.RowHeight;computedStart=g.ComputedStartTime;computedEnd=g.ComputedEndTime;if(c&&0!=e){a:{e=[];var f=new TimeSpan(computedEnd-computedStart);if(f<=TimeSpan.Zero_M())e=!1;else{if(null!=c){g=c.ConvertToNextWorkingTime(computedStart)==computedStart?!0:!1;f=c.ConvertToNextWorkingTimeIntervals(computedStart,f,null);if(0==f.length){e.push(computedStart);e.push(computedEnd);break a}e.push(computedStart);
!g&&f[0].Start_M()<computedEnd&&e.push(f[0].Start_M());for(g=1;g<f.length;g++)if(f[g].Start_M()!=f[g-1].End_M()){if(f[g-1].End_M()>=computedEnd)break;e.push(f[g-1].End_M());if(f[g].Start_M()>=computedEnd)break;e.push(f[g].Start_M())}g==f.length&&f[g-1].End_M()<computedEnd&&e.push(f[g-1].End_M())}else e.push(computedStart);e.push(computedEnd)}}if(null!=e&&(f=c.ConvertToNextWorkingTime(computedStart)==computedStart?!0:!1,!1==f&&1==e.length&&e.push(computedEnd),1<e.length)){g=0;f&&(g=1);for(f="";g<e.length-
1;g++){if(!(c&&a.GetBTSTToRenderAgainst()>=RadiantQ.Gantt.TimeScaleType.Days&&864E5>e[g+1]-e[g])){var m=a.ConvertTimeToX(e[g]),k=a.ConvertTimeToX(e[g+1])-m,m="<div class="+d+' style="position: absolute; background-color:#DFDFDF; height: inherit; margin-left:'+m+"px; width:"+k+'px;"></div>';0!=k&&(f+=m)}g++}b.append(f)}}}}})(jQuery);
(function(f,b){function d(){this._cachedRowCont=b("<div id='cache'></div>");this._cachedRows={}}function a(a){if(a=e[a.eventNamespace])a._cachedRowCont.empty(),a._cachedRows={}}var c=RadiantQ.Gantt.DefaultStyles,e={};f.GanttTaskItemsControl={currentUniqueRowSuffix:0,options:{name:"GanttTaskItemsControl",Data:null,TaskTemplate:null,ProgressBarTemplate:null,ParentTaskTemplate:null,GanttChart:null,RowHeight:null,TaskBarHeight:null,ViewWidth:null,TaskTooltipTemplate:null,MovingInfoPopup:null,ResizeInfoPopup:null,
ConnectingInfoPopup:null,WorkTimeSchedule:null,KnockoutObjectName:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,MileStoneTemplate:null},ganttControlWidget:null,ganttChartWidget:null,ActivityViews:null,$chartTable:null,$chartTableBody:null,$Area:null,$tableBody:null,$gridTableBody:null,chartTableHeight:null,yPosition:0,knockoutObject:null,VSB:null,UseRQModelBinder:!1,updateModelBinderBool:function(){var a=/data-bind/g;
null!=this.options.TaskTemplate&&(this.UseRQModelBinder=a.test(this.options.TaskTemplate)&&null==this.options.KnockoutObjectName)},PSTContextMenu:null,_create:function(){this.updateModelBinderBool();this.TaskContextMenu=null;this.ganttChartWidget=this.options.GanttChart;this.ganttControlWidget=this.ganttChartWidget.options.Parent;this.$chartTableBody=b("<tbody style='overflow:hidden;'></tbody>");var g=this.$chartTable=b("<table class='chartRowsContainer rq-gc-rowsParent-table'></table>").append(this.$chartTableBody);
g[0].style.cssText=c.ZeroStyle;this.RowHeight=this.options.RowHeight;this.SCROLLBAR_MIN_SIZE=10;this.totalItems=[];this.listItems=[];e[this.eventNamespace]=new d;this.ganttControlWidget.GanttTaskItemBarCollection=[];var f=this.ganttChartWidget.element,m=this.ganttChartWidget.$rowsParent;this.$Area=b(".rq-gc-chartArea-div",f);this.$tableBody=b(".ui-grid-body",f.parent());this.$gridTableBody=b("tbody",this.$tableBody);var k=this.chartTableHeight=this.$Area.height();!1==this.ganttChartWidget.options.IsPrinting&&
(this._dataCollectionChangedHandler=this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,this),this._gridBindingResetEventHandler=this.ganttControlWidget._gridBindingResetEvent.subscribe(function(){var a=this.ganttChartWidget.getGridTBodyParent(this.ganttControlWidget.element);this.VSB&&a&&this.ganttChartWidget.SyncChartScrollBarWith(a,!0);this._dataCollectionChangedHandler&&this._dataCollectionChangedHandler.Dispose();this._dataCollectionChangedHandler=this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,
this)},this));f.bind("ganttchartrefreshui.TaskItemsRefreshUI",function(b,c){"ProjectGantt"==c.options.GanttType&&(this.options.WorkTimeSchedule=c.options.WorkTimeSchedule,this.options.TaskTemplate=c.options.TaskItemTemplate,this.options.ParentTaskTemplate=c.options.ParentTaskItemTemplate,this.options.ProgressBarTemplate=c.options.ProgressBarTemplate,this.ganttControlWidget.GanttTaskItemBarCollection=[],!0==c.ForceToReDrawRows&&(a(this),this.$chartTableBody.empty(),this._renderBars(c)))}.bind(this));
this.VSB=new RadiantQ.Gantt.VerticalScrollBar(g,m,this.options.Data,this.options.RowHeight,this.ganttControlWidget);this.options.GanttChart.VSB=this.VSB;if(!1==this.ganttChartWidget.options.IsPrinting){var l=this;if(null!=l.options.Data){var n=0,p=l.VSB.$scrollContainer.height(),q=l.VSB.$scrollContainer[0].scrollHeight;l._vsbScrollHandler=l.VSB.OnScroll.subscribe(function(a,c,e){a=l.VSB.$scrollContainer.height();c=l.VSB.$scrollContainer[0].scrollHeight;e=l.VSB.$scrollContainer.scrollTop();if(e!=n||
q!=c||p!=a){if(null==l.$dependencyDiv||0==l.$dependencyDiv.length)l.$dependencyDiv=b("div.rq-gc-dependencysParent",l.$Area);l.$dependencyDiv.scrollTop(e);l.ganttControlWidget.options.UseChartVirtualization&&l.Refresh(l.element,l.options.Data,l.$chartTable,l.options.ViewWidth,k)}q=c;p=a;n=e})}}this._renderBars({options:{FlatItemsSource:this.options.Data,ViewWidth:this.options.ViewWidth}});if(!1==this.ganttChartWidget.options.IsPrinting){f.bind("ganttchartsourceupdated",function(b,c){this.$chartTableBody.empty();
a(this);this.options.TaskTemplate=c.options.TaskItemTemplate;this.options.ParentTaskTemplate=c.options.ParentTaskItemTemplate;this.options.ProgressBarTemplate=c.options.ProgressBarTemplate;this.options.Data=c.options.FlatItemsSource;this._dataCollectionChangedHandler&&this._dataCollectionChangedHandler.Dispose();this._dataCollectionChangedHandler=this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,this);this.$dependencyDiv=null;this._renderBars(c);var e=this.options.GanttChart;
e.syncVerticalScrollBar&&e.syncVerticalScrollBar()}.bind(this));var r=null;b(window).resize(function(){null!=r&&clearTimeout(r);k=this.$Area.height();!0==this._areBarsRendered&&(r=setTimeout(function(){this.ganttChartWidget.options.UseChartVirtualization&&null!=this.options.Data&&this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,k)}.bind(this),0))}.bind(this))}b.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)&&this._createTaskContextMenu();this.ganttControlWidget.RedrawChartRows=
function(){null!=this.options.Data&&(this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,this.$Area.height(),!0),this.ganttChartWidget.DependenciesControl.Refresh())}.bind(this);this.element.data("GanttTaskItemsControl",this)},RefreshUI:function(){var a=this.$Area.height();this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,a)},_createTaskItemBar:function(a,b,c,e){a[this.getChildWidgetName("GanttTaskItemBar")]({ActivityView:b,UseRQModelBinder:this.UseRQModelBinder,
GanttChart:this.options.GanttChart,WorkTimeSchedule:this.options.WorkTimeSchedule,TaskBarHeight:this.options.TaskBarHeight,TaskTemplate:this.options.TaskTemplate,ProgressBarTemplate:this.options.ProgressBarTemplate,ParentTaskTemplate:this.options.ParentTaskTemplate,MileStoneTemplate:this.options.MileStoneTemplate,TaskBarBackgroundTemplate:this.options.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:this.options.TaskBarAdornerTemplate,TaskTooltipTemplate:this.options.TaskTooltipTemplate,MovingInfoPopup:this.options.MovingInfoPopup,
ResizeInfoPopup:this.options.ResizeInfoPopup,ConnectingInfoPopup:this.options.ConnectingInfoPopup,RowCount:this.currentUniqueRowSuffix,KnockoutObjectName:this.options.KnockoutObjectName,Parent:this,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate});this.UseRQModelBinder&&RadiantQ.Bind(a,b);this.ganttChartWidget.LoadingRow({Row:c,Data:b});!0==this.refreshTimeIndicatorLineAfterInitTaskBar&&this.taskBarInstances.push(a.data("GanttTaskItemBar"))},
refreshTimeIndicatorLineAfterInitTaskBar:!1,applayBindings:function(a,b){ko.applyBindingsToDescendants(a,b[0])},_timer:null,ignorecollectionChangs:!1,_bindCollectionChanged:function(a,b){var c=this;null!=c._timer&&clearTimeout(c._timer);if(!0!=c.ignorecollectionChangs)if(c.ganttChartWidget.options.UseChartVirtualization){if("remove"==a.type)for(var d=0;d<b.items.length;d++){var f=b.items[d].Activity_M().ID_M(),n=e[this.eventNamespace];n._cachedRows[f]&&(n._cachedRows[f].remove(),delete n._cachedRows[f])}c._timer=
setTimeout(function(){c.Refresh(c.element,a.target,c.$chartTable,c.options.ViewWidth,c.$Area.height());c.ganttControlWidget.UpdateChartHeight()}.bind(c),0)}else{if("insert"==a.type){c.InsertRow(c.element,b,c.$chartTable,c.options.ViewWidth);c.VSB.UpdateScrollContentHeight();c.knockoutObject=eval(c.options.KnockoutObjectName);try{if(c.options.KnockoutObjectName)for(d=0;d<b.items.length;d++)c.applayBindings(c.knockoutObject,b.items[d].$chartRow)}catch(p){window.console&&console.error(p+" :Error while inserting "+
b.index)}c.ganttControlWidget.UpdateChartHeight()}if("remove"==a.type){for(d=0;d<b.items.length;d++)c.RemoveRow(b.index,c.$chartTable);c.VSB.UpdateScrollContentHeight();c.ganttControlWidget.UpdateChartHeight()}}},_areBarsRendered:!1,_renderBars:function(a){this._areBarsRendered=!0;null!=a.options.FlatItemsSource&&(this.ActivityViews=a.options.FlatItemsSource,this.Refresh(this.element,a.options.FlatItemsSource,this.$chartTable,a.options.ViewWidth,this.$Area.height()))},_getVirtualizedTask:function(a,
c){var d=this.ActivityViews._dictActivityVsView[a],f=e[this.eventNamespace],l=this.options.GanttChart;if(f._cachedRows[a])return d.ChartRow(f._cachedRows[a]),f=f._cachedRows[a],!1==l.options.IsPrinting&&d.IsSelected()?f.addClass("rq-row-selected "+window.radiantQclasses.selectionClass):f.hasClass("rq-row-selected")&&f.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass),f;var n=b("<tr class='rq-grid-row' VirtualizationID="+a+"></tr>"),p=b("<td id='ChartRow'></td>");n.css("height",
this.RowHeight);var q=n.height();p.css("height",q);n.append(p);!1==l.options.IsPrinting&&(d.ChartRow(n),f._cachedRows[a]=n);this._createTaskItemBar(p,this.ActivityViews._dictActivityVsView[a],n,null);p.width(c);!1==l.options.IsPrinting&&d.IsSelected()&&n.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);return n},$dependencyDiv:null,getGridParent:function(){return b(".ui-grid-body",this.ganttChartWidget.element.parent())},getGridTBodyParent:function(a){return b("tbody",a)},guid:function(){var a=
"",b,c;for(b=0;32>b;b++){c=16*Math.random()|0;if(8==b||12==b||16==b||20==b)a+="-";a+=(12==b?4:16==b?c&3|8:c).toString(16)}return a},taskBarInstances:[],Refresh:function(c,d,f,k,l,n){this.updateModelBinderBool();var p=this.options.GanttChart;l=p.options.Parent;p.clearDepLines();this.refreshTimeIndicatorLineAfterInitTaskBar=0!=p.options.TimeIndicatorLineOption;this.taskBarInstances=[];if(!0==l.PreventDefaultFns)p.syncVerticalScrollBar&&p.syncVerticalScrollBar();else{p.ViewableDependencyViews=new RQArray;
this.$Area.height();f.css("height","auto");c.append(f);var q=this;this.VSB.CreateRow=function(a,c){void 0==c.uid&&(c.uid=q.guid());var g=null,d;null!=this.GC.options.GetPreferredIDCallBack&&"function"==typeof this.GC.options.GetPreferredIDCallBack&&(d=this.GC.options.GetPreferredIDCallBack(c));if(p.options.UseChartVirtualization){var f=c;if(f._parentView&&!1==f._parentView._isExpanded)return null;var g=f.activity.ID_M(),h=!1;e[q.eventNamespace]._cachedRows[g]&&(h=!0);g=q._getVirtualizedTask(g,k);
g[0]["data-grid-item"]=f;g.attr("data-uid",f.uid);d&&g.attr("id",d+"_Chart");h&&((d=b("#ChartRow",g).data().GanttTaskItemBar)&&b("#ChartRow",g).data().GanttTaskItemBar._OnRecomputeLocation(),!0==q.refreshTimeIndicatorLineAfterInitTaskBar&&q.taskBarInstances.push(d));!1==f.IsSelected()&&g.hasClass("rq-row-selected")&&g.removeClass("rq-row-selected "+window.radiantQclasses.selectionClass);q._updateViewableDependencyViews(f)}else f=c,q._updateViewableDependencyViews(f),g=b("<tr class='rq-grid-row' data-uid ="+
f.uid+" ></tr>"),d&&g.attr("id",d+"_Chart"),d=b("<td id='ChartRow'></td>"),g.css("height",q.options.RowHeight),h=g.height(),d.height(h),g.append(d),!1==p.options.IsPrinting&&f.ChartRow(g),q._createTaskItemBar(d,f,g,null),g[0]["data-grid-item"]=f,q.currentUniqueRowSuffix++,d.width(k),!1==p.options.IsPrinting&&f.IsSelected()&&g.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);return g};this.VSB.ClearCachedRows=function(){a(q)};!0==p.options.UseChartVirtualization?(c=e[this.eventNamespace],
l=this.$chartTableBody.children(),c._cachedRowCont.append(l),this.$chartTableBody.empty(),!0==n&&a(this)):this.$chartTableBody.empty();this.VSB.Refresh(d,p.options.UseChartVirtualization);if(!0==q.refreshTimeIndicatorLineAfterInitTaskBar)for(n=0;n<this.taskBarInstances.length;n++)this.taskBarInstances[n]._drawVerticalLines();this.taskBarInstances=[];f.width(k);0==d.length?(this.totalItems=[],this.listItems=[],a(this)):(p.AfterChartRowsRender.raise(),this._enableAlternativeRowBackground(),this.ApplyTooltip(b(".rq-gc-tooltip",
this.element)))}},ApplyTooltip:function(a){a.RQTooltip(function(a){a=a.parent().data("GanttTaskItemBar");if(null==a.options.TaskTooltipTemplate)return null;a.UpdateTemplateContent(a.Activity);return a.TooltipContent});b.fn.RQTooltip.CanShowTooltip=!0},_enableAlternativeRowBackground:function(){!0==this.options.EnableAlternativeRowBackground&&(b("td",this.$chartTable).removeClass("rq-grid-alternative-background"),b("td",this.$chartTable).addClass(function(){var a,c=b(this);c.parent()[0]["data-grid-item"]&&
(a=0!=c.parent()[0]["data-grid-item"].DisplayIndex_M()%2);if(!0==a)return"rq-grid-alternative-background"}))},_createTaskContextMenu:function(){var a="#"+this.ganttChartWidget.$GanttChart[0].id,c=[{keyName:"ConvertToMilestone",name:window.RadiantQ_ConvertToMilestoneString,icon:"Convert to Milestone"}],e=new RadiantQ.ContextMenuImpl.ContextMenu(a+" .rq-gc-taskbar, "+a+" .taskbar-style, "+a+" .rq-gc-commonTaskbar",b(a).parent());e.AddNewItems(c);e.ItemClicked.subscribe(function(a,c){var e=b(c[0].parentElement).data();
"ConvertToMilestone"==a&&null!=e&&e.GanttTaskItemBar.options.ActivityView.ConvertToMilestone(e.GanttTaskItemBar.options.ActivityView.Activity_M(),e.GanttTaskItemBar.GanttControl)});e.BeforeContextMenu.subscribe(function(a,b){e.Items&&e.Items.ConvertToMilestone&&(e.Items.ConvertToMilestone.disabled=this.ganttControlWidget.options.IsReadOnly||this.ganttControlWidget.options.IsEffortReadOnly?!0:!1)},this);var c=[{keyName:"ConverToNormalTask",name:window.RadiantQ_ConvertToNormalTaskString,icon:"Convert to normal Task"}],
d=new RadiantQ.ContextMenuImpl.ContextMenu(a+" .rq-gc-milestoneBar",b(a).parent().parent());d.AddNewItems(c);d.ItemClicked.subscribe(function(a,c){var e=b(c[0].parentElement).data();"ConverToNormalTask"==a&&e.GanttTaskItemBar.options.ActivityView.ConvertToNormalTask(e.GanttTaskItemBar.options.ActivityView.Activity_M(),e.GanttTaskItemBar.GanttControl)});d.BeforeContextMenu.subscribe(function(a,b){d.Items&&d.Items.ConverToNormalTask&&(d.Items.ConverToNormalTask.disabled=this.ganttControlWidget.options.IsReadOnly||
this.ganttControlWidget.options.IsEffortReadOnly?!0:!1)},this);this.ganttControlWidget.TaskContextMenu=e;this.ganttControlWidget.MilestoneContextMenu=d;!0==this.ganttChartWidget.options.ShowPreferredStartIndicator.Enabled&&(c=[{keyName:"ClearIcon",name:window.RadiantQ_ClearPSTIndicator,icon:"ClearIcon"}],a=new RadiantQ.ContextMenuImpl.ContextMenu(a+" .anchorIcon",b(a).parent()),a.AddNewItems(c),a.ItemClicked.subscribe(function(a,b){var c=b.parent().data().GanttTaskItemBar;c.Activity.PreferredStartTime=
this.ganttControlWidget.options.ProjectStartDate;!0==this.ganttChartWidget.options.ShowPreferredStartIndicator.ApplyDependenciesOnClear&&this.ganttControlWidget.Model.ApplyDependencyConstraints(c.Activity)},this),this.PSTContextMenu=a)},getItemAtIndex:function(a,c,e){if(0<=a&&a<this.options.Data.length){var d=a.toString();if(null===this.listItems[d]||void 0===this.listItems[d]||null===this.listItems[c[a].Activity_M().ID_M()-1]||void 0===this.listItems[c[a].Activity_M().ID_M()-1]&&this.listItems[d].attr("VirtualizationID")!=
c[a].Activity_M().ID_M()){var f=b("<tr class='rq-grid-row' VirtualizationID="+c[a].Activity_M().ID_M()+"data-uid="+c[a].uid+">  </tr>"),n=b("<td id='ChartRow'></td>");f.css("height",25);var p=f.height();n.css("height",p);f.append(n);!1==this.options.GanttChart.options.IsPrinting&&c[a].ChartRow(f);this._createTaskItemBar(n,c[a],f,null);this.currentUniqueRowSuffix++;n.width(e);!1==this.options.GanttChart.options.IsPrinting&&c[a].IsSelected()&&f.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);
null===this.listItems[d]||void 0===this.listItems[d]?this.listItems[d]=f:this.listItems[c[a].Activity_M().ID_M()-1]=f}else f=this.listItems[d].attr("VirtualizationID")!=c[a].Activity_M().ID_M()?this.listItems[c[a].Activity_M().ID_M()-1]:this.listItems[a],!1==this.options.GanttChart.options.IsPrinting&&c[a].ChartRow(f);f.attr("list-index",a);return f}},cleanupListItems:function(a){for(var b,c,e=0;e<this.totalItems.length;e++)b=this.totalItems[e],c=b.attr("list-index"),void 0!==this.processedItems[c]&&
this.processedItems[c].attr("VirtualizationID")==b.attr("VirtualizationID")||b.detach();b=[];if(this.processedItems)for(c in this.processedItems)b.push(this.processedItems[c]);this.totalItems=b;!0!==a&&this.ScrollBar.fadeTo(300,0)},InsertRow:function(a,c,e,d){a=this.options.GanttChart;for(var f=0;f<c.items.length;f++){var n=c.index+f,p=c.items[f],q=b("<tr class='rq-grid-row' data-uid="+p.uid+"></tr>"),r=b("<td id='ChartRow' ></td>");q.css("height",this.options.RowHeight);var s=q.height();r.css("height",
s);this._createTaskItemBar(r,p,q,n);q.append(r);this.currentUniqueRowSuffix++;p.ChartRow(q);s=e.find("tr.rq-grid-row");0==n?s.length?s.eq(0).before(q[0]):e.append(q):s.eq(n-1).after(q[0]);q[0]["data-grid-item"]=p;r.width(d);!1==a.options.IsPrinting&&p.IsSelected()&&q.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);this._updateViewableDependencyViews(p);this.ApplyTooltip(b(".rq-gc-tooltip",r))}this._enableAlternativeRowBackground()},RemoveRow:function(a,b){b.find("tr.rq-grid-row").eq(a);
b.find("tr.rq-grid-row").eq(a).remove();var c=e[this.eventNamespace];this.ActivityViews[a]&&delete c._cachedRows[this.ActivityViews[a].activity.ID_M()];this._removeTimer&&clearTimeout(this._removeTimer);this._removeTimer=setTimeout(function(){this._enableAlternativeRowBackground();this._removeTimer=!1}.bind(this),0)},_updateViewableDependencyViews:function(a){var b=this.options.GanttChart,c=b.options.Parent;if(c.DependencyViews&&(a=c.DependencyViews._depViewByActivity[a.Activity_M().ID_M()]))for(c=
0;c<a.length;c++){var e=a[c];e&&-1==b.ViewableDependencyViews.indexOf(e)&&b.ViewableDependencyViews.push(e)}},_setOption:function(a,c){this.widgetBaseSetOption.apply(this,arguments);b("td.rq-gc-row ",this.$chartTableBody).GanttTaskItemBar("option",a,c)},_destroy:function(){this._gridBindingResetEventHandler&&(this._gridBindingResetEventHandler.Dispose(),this._gridBindingResetEventHandler=null);this._dataCollectionChangedHandler&&(this._dataCollectionChangedHandler.Dispose(),this._dataCollectionChangedHandler=
null);this._ganttVerticalScrollEventHandler&&(this._ganttVerticalScrollEventHandler.Dispose(),this._ganttVerticalScrollEventHandler=null);var b=this.ganttChartWidget.element;b.unbind("ganttchartsourceupdated");b.unbind("ganttchartrefreshui.TaskItemsRefreshUI");a(this);this.element.empty();this.element.data("GanttTaskItemsControl",null)}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f,b){var d=RadiantQ.Gantt,a=RadiantQ.Gantt.Utils.TimeComputingUtils,c=RadiantQ.Gantt.Utils.TimeComputingUtils,e=RadiantQ.Template||kendo.template,g={options:{name:"GanttTaskItemBar",ActivityView:null,GanttChart:null,WorkTimeSchedule:null,TaskBarHeight:null,TaskTemplate:null,ProgressBarTemplate:null,ParentTaskTemplate:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,Data:null,ProgressTemplate:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,ConnectingInfoPopup:null,
IsParentTypeRow:null,RowCount:null,KnockoutObjectName:null,Parent:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,MileStoneTemplate:null},StartTime:function(){return this.Activity._startTime},EndTime:function(){return this.Activity.EndTime_M()},Effort:function(){return this.Activity.Effort_M()},IsParent:function(){return this.ActivityView._isParent},IsExpanded:function(){return this.ActivityView.IsExpanded_M()},IsMilestone:function(){return this.Activity._isMilestone},
IsRegularTask:function(){return this.ActivityView.IsRegularTask_M()},ProgressPercent:function(){return this.Activity.ProgressPercent_M()},ProgressEndTime:function(){return this.Activity.ProgressEndTime_M()},WorkTimeSchedule:function(){return this.GanttControl.options.WorkTimeSchedule},OriginalLeft:0,OriginalWidth:0,ActivityView:null,Activity:null,IsTemplateApplied:!1,taskStartAndEndTime:{},GanttControl:null,GanttChart:null,GanttChartRows:null,GanttTaskItemsControl:null,TaskBarRectangle:null,ProgressBarRectangle:null,
MileStoneBar:null,ParentBar:null,PropertyChanged:new ObjectEvent("PropertyChanged"),HasChanged:!1,TaskItemsControl:null,addToViewModel:function(a,b){this.KnockoutObject&&(this.KnockoutObject[a]=b)},PSTIndicator:null,_create:function(a){var b=this.options;this.TaskItemsControl=b.Parent;this.GanttChart=b.GanttChart;this.GanttControl=this.GanttChart.options.Parent;this.ActivityView=b.ActivityView;this.Activity=this.ActivityView.activity;this.KnockoutObject=eval(b.KnockoutObjectName);this.element.data("GanttTaskItemBar",
this);this.element.addClass("rq-gc-row");this._actViewPropertyChangedHandler&&this._actViewPropertyChangedHandler.Dispose();this._activityPropertyChangedHandler&&this._activityPropertyChangedHandler.Dispose();this._actAssgnsCollectionChangedHandler&&this._actAssgnsCollectionChangedHandler.Dispose();this._readOnlyPropertyChangedHandler&&this._readOnlyPropertyChangedHandler.Dispose();this._actViewPropertyChangedHandler=this.ActivityView.PropertyChanged.subscribe(this._actView_PropertyChanged,this);
this._activityPropertyChangedHandler=this.Activity.PropertyChanged.subscribe(this._activity_PropertyChanged,this);this._actAssgnsCollectionChangedHandler=this.Activity._assignments.CollectionChanged.subscribe(this._activity_Assignments_CollectionChanged,this);this.GanttChart.options.IsPrinting||(this._readOnlyPropertyChangedHandler=this.GanttControl.ReadOnlyPropertyChange.subscribe(this.ReadOnlyStateChangedCallback,this));try{var c=!1,e=null,d=this.Activity.DataSource_M();if(this.KnockoutObject)for(var g in this.KnockoutObject)if(/Task\d+/.test(g)&&
this.KnockoutObject[g]===d){e=g;c=!0;break}!1==c&&(e="Task"+b.RowCount,this.addToViewModel("Task"+b.RowCount,this.Activity.DataSource_M()))}catch(f){}this._renderElementsFromTemplate(e);this.element.append(this.TaskBarRectangle);this._listenForMouseEnterAndLeave();this._asyncShiftAndResizeTimer=this.asyncInitShiftAndResize();this._listenForTouchTap();this.UpdateResourceText();this._loadBrowseToCue();this._asyncTooltipTimer=this.asyncApplyToolTip();this._loadAdornerAndBgTemplate();this.taskStartAndEndTime=
{Name:this.options.ActivityView.activity.ActivityName_M(),OriginalStart:this.Activity.StartTime_M(),OriginalEnd:this.Activity.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:this.Activity.ProgressEndTime_M(),ProposedEnd:null,ProposedStart:null};this.IsTemplateApplied=!0;a||this._OnRecomputeLocation();b.GanttChart.element.bind("ganttcharttimeindicatorlineoptionchanged."+this.eventNamespace,function(a,b){this._OnRecomputeLocation()}.bind(this));
this._chartRefreshUIHandler&&this._chartRefreshUIHandler.Dispose();this._chartRefreshUIHandler=b.GanttChart.RefreshUIEvent.subscribe(this.OnChartRefreshUI,this);this._GanttChart_ViewportTimeRangeChanged(this,null);this.GanttChart._dirtyTaskItemControls&&(this.GanttChart._dirtyTaskItemControls.push(this),this.GanttChart._diryTaskItemByActs[this.Activity.id]=this);this.GanttChart.options.IsPrinting||(this.initValuesFromOptions(),this.UpdateThumbsReadOnlyStates())},asyncApplyToolTip:function(){var a=
this;return setTimeout(function(){a.ApplyTooltipSettings(a.TaskBarRectangle,a.options.Data);a.ApplyTooltipSettings(a.ParentBar,a.options.Data);a.ApplyTooltipSettings(a.MileStoneBar,a.options.Data)},0)},asyncInitShiftAndResize:function(){var a=this;return setTimeout(function(){!1==a.GanttChart.options.IsPrinting&&(a.TaskBarRectangle.ganttShiftTracker(a,a.DragEnd),a.TaskBarRectangle.ganttResizeTracker(a,a.ResizeEnd),a.ParentBar.ganttShiftTracker(a,a.DragEnd),a.MileStoneBar.ganttShiftTracker(a,a.DragEnd),
a.TaskBarRectangle.css("cursor","move"),a.UpdateThumbsReadOnlyStates())},0)},OnChartRefreshUI:function(a,b){"ProjectGantt"==b.options.GanttType&&(this.options.WorkTimeSchedule=b.options.WorkTimeSchedule,this._OnRecomputeLocation(),this._removeTooltip(this.TaskBarRectangle),this._removeTooltip(this.ParentBar),this._removeTooltip(this.MileStoneBar))},RedrawTaskBar:function(a){this._destroy();this._create(a);a=this.element.parent();a[0]["data-grid-item"]=this.ActivityView;this.KnockoutObject&&this.applayBindings(this.KnockoutObject,
this.element[0]);this.options.UseRQModelBinder&&RadiantQ.Bind(a,this.ActivityView)},applayBindings:function(a,b){ko.applyBindingsToDescendants(a,this.element)},KnockoutObject:null,ViewStartTime:function(){return this.GanttChart.options.ComputedStartTime},ViewEndTime:function(){return this.GanttChart.options.ComputedEndTime},ViewWidth:function(){return this.GanttChart.options.ViewWidth},GetScheduleToPlotWith:function(){return null==this.Activity?this.options.WorkTimeSchedule:this.Activity.GetScheduleToPlotWith(this.options.WorkTimeSchedule)},
_OnRecomputeLocation:function(){function a(b){return"<div>"+b.parent().data("GanttTaskItemBar").Activity.PreferredStartTime.toString("MM/dd/yyyy")+"</div>"}if(null!=this.ActivityView&&!0!=this.Activity._startTime.isGreaterThan(this.Activity.EndTime_M())&&!1!=this.IsTemplateApplied){var e=this.GetScheduleToPlotWith(),d=c.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,this.ViewStartTime(),this.StartTime(),e)*this.GanttChart.options.BaseTimeUnitWidth,e=c.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,
this.StartTime(),this.EndTime(),e)*this.GanttChart.options.BaseTimeUnitWidth;this.OriginalLeft=d;this.OriginalWidth=e;null!=this.ParentBar&&this.ParentBar.css("display","none");null!=this.MileStoneBar&&this.MileStoneBar.css("display","none");null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","none");if(this.ActivityView._isParent||this.Activity._isMilestone){this.CanvasLeft=d-7;if(this.ActivityView._isParent){var g=this.ParentBar.attr("auto-adjust");!1==g||"false"==g?this.ParentBar.css({width:e+
"px","margin-left":d+"px","margin-top":"2px"}):this.ParentBar.css({width:e+20+"px","margin-left":d-10+"px","margin-top":"2px"});this.BarPolygon=this.ParentBar;this.BarWidth=e;this.OriginalCompletedWidth=this.CompletedWidth=0;this.ParentBar&&this.element.append(this.ParentBar);g=b("div.label",this.ParentBar);0==g.length&&(g=b("div.rq-gc-taskbar-label",this.ParentBar));this.ParentBar&&0<g.length&&g.css("margin-left","30px")}else this.MileStoneBar.css("width","17px"),g=this.MileStoneBar.outerWidth(),
this.MileStoneBar.css("margin-left",d-g/2+"px"),this.MileStoneBar.css("margin-top","4px"),this.BarPolygon=this.MileStoneBar,this.BarWidth=14,this.OriginalCompletedWidth=this.CompletedWidth=0,this.MileStoneBar&&this.element.append(this.MileStoneBar),g=b("div.label",this.MileStoneBar),0==g.length&&(g=b("div.rq-gc-taskbar-label",this.MileStoneBar)),this.MileStoneBar&&0<g.length&&g.css("margin-left","18px");null!=this.BarPolygon&&(this.BarPolygon.css("display","block"),this.TaskItemsControl.ApplyTooltip(this.BarPolygon));
null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","none");null!=this.ProgressPercentResizeThumb&&this.ProgressPercentResizeThumb.hide()}else this.CanvasLeft=d,this.BarWidth=e,null!=this.ParentBar&&this.ParentBar.css("display","none"),null!=this.MileStoneBar&&this.MileStoneBar.css("display","none"),null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","block"),this._UpdateProgressBarPosition(d);this.CanvasRight=this.CanvasLeft+this.BarWidth;this.TaskBarRectangle.css("width",
e+"px");this.TaskBarRectangle.css("margin-left",d+"px");this.TaskBarRectangle.css("margin-top","3px");this.ProgressBarRectangle[0].style.width=(0>this.CompletedWidth?this.BarWidth:this.CompletedWidth).toString()+"px";this.ProgressBarRectangle.css("border-width","1px");this.ProgressBarRectangle.css("border-style","solid");1>=this.CompletedWidth&&this.ProgressBarRectangle.css("border-width","0px");!0!=this.GanttChart.options.ShowPreferredStartIndicator.Enabled||this.ActivityView._isParent||(this.PSTIndicator=
b(".anchorIcon",this.element),d=this.GanttChart.ConvertTimeToX(this.ActivityView.Activity.PreferredStartTime),0!=this.PSTIndicator.length?this.PSTIndicator.css("margin-left",d-8+"px"):(b(".rq-gc-taskbar",this.element).after("<div class='anchorIcon'  style='margin-left:"+(d-8)+"px;'></div>"),this.PSTIndicator=b(".anchorIcon",this.element)),this.GanttChart.options.ShowPreferredStartIndicator.initCallback&&(this._onInitCallbackTimer=setTimeout(function(){var a=this.GanttChart.options.ShowPreferredStartIndicator.initCallback;
null!=a&&"function"==typeof a&&a.call(this.PSTIndicator,this);this._onInitCallbackTimer=null}.bind(this),0)),this.PSTIndicator.RQTooltip(a));d=this.TaskBarRectangle.height();this.ProgressBarRectangle.css("margin-top",d/2-2.5+"px");this._loadAdornerAndBgTemplate();this._drawVerticalLines();this._updateTaskBarLabel();this._UpdateBrowseToTaskCuesStates();this.UpdateResourceText();var f=this.GanttChart.options.OnTaskBarLoad;f&&(this._onTaskBarLoadTimer=setTimeout(function(){null!=f&&null!=this.TaskBarRectangle&&
"function"==typeof f&&(this.ActivityView._isParent?f.call(this.ParentBar[0],this):this.Activity._isMilestone?f.call(this.MileStoneBar[0],this):f.call(this.TaskBarRectangle[0],this));this._onTaskBarLoadTimer=null}.bind(this),0))}},_drawVerticalLines:function(){var a=this.Activity._isMilestone,b=this.ActivityView._isParent,c=this.element,c=this.TaskBarRectangle;!0==b&&(c=this.ParentBar);!0==a&&!1==b&&(a=!0,c=this.MileStoneBar);if(null!=c){var e=c.find("div.rq-gc-start-verticalLine"),g=c.find("div.rq-gc-end-verticalLine");
if(0!=e.length||0!=g.length){var f=c.closest("tr");if(f.length){var q=parseInt(c.css("margin-top"));c.height();c=c.width();f=f[0].offsetTop;q={height:f+q+"px","margin-left":"0px","margin-top":-(f+q)+"px"};taskbarwidth=c;!0==a&&!1==b&&(taskbarwidth=this.MileStoneBar.outerWidth()/2,q["margin-left"]=taskbarwidth+"px");0!=e.length&&e.css(q);0!=g.length&&(q["margin-left"]=taskbarwidth+"px",g.css(q));a=this.options.GanttChart.options.TimeIndicatorLineOption;(a&d.TimeIndicatorLines.Always)!=d.TimeIndicatorLines.Always||
(a&d.TimeIndicatorLines.OnResize)==d.TimeIndicatorLines.OnResize?(e.hide(),g.hide()):(e.show(),g.show())}}}},_actView_PropertyChanged:function(a,b){"IsReadOnly"==b.PropertyName&&this.ReadOnlyStateChangedCallback(a,b)},UpdateUI:function(){var a=this.GanttChart._dirtyTaskItemControls,b=this.GanttChart._diryTaskItemByActs;this.GanttChart._dirtyTaskItemControls=[];for(var c=0;c<a.length;c++){var e=a[c],g=e.Activity.id;e.Activity&&void 0!=e.Activity.id&&b[g]&&(b[g]._OnRecomputeLocation(),delete b[g])}this.GanttChart._dirtyTasksTimer=
null;this.GanttChart._dirtyTaskItemControls=[];this.GanttChart._diryTaskItemByActs={}},_isActivityPropertyChanged:!1,_$parentMiddleBar:null,_activity_PropertyChanged:function(a,c){this._isActivityPropertyChanged=!0;void 0===this.GanttChart._dirtyTaskItemControls&&(this.GanttChart._dirtyTasksTimer=null,this.GanttChart._dirtyTaskItemControls=[],this.GanttChart._diryTaskItemByActs={});null==this._$parentMiddleBar&&(this._$parentMiddleBar=b(".rq-gc-parentBar-middle",this.ParentBar));0==this._$parentMiddleBar.length&&
(this._$parentMiddleBar=b(".parentMiddleBar-style",this.ParentBar));"IsExpanded"==c.PropertyName&&(!1==c.value?this._$parentMiddleBar.addClass("rq-gc-Parentbar-collapsed"):this._$parentMiddleBar.removeClass("rq-gc-Parentbar-collapsed"));var e=this.Activity.ID_M();void 0===this.GanttChart._diryTaskItemByActs[e]&&this.GanttChart._dirtyTaskItemControls.push(this);this.GanttChart._diryTaskItemByActs[e]=this;e=this.GanttChart._dirtyTasksTimer;null!=e&&clearTimeout(e);this.GanttChart._dirtyTasksTimer=setTimeout(function(){this.UpdateUI();
this.GanttChart._dirtyTasksTimer=null}.bind(this),0)},_AdjustOrigionalLeftAndWidth:function(){if(0>this.OriginalLeft+this.OriginalWidth||this.OriginalLeft>this.ViewWidth())left=-10,width=0;else{var a=this.GanttChart.GetBarRenderStartTime(this.StartTime()),b=this.GanttChart.GetBarRenderEndTime(this.EndTime());!1!=a.equals(this.StartTime())&&!1!=b.equals(this.EndTime())||!a.isLessThan(b)||(width=c.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,a,b,this.GanttChart.options.WorkTimeSchedule)*
this.GanttChart.options.BaseTimeUnitWidth,left=c.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,this.ViewStartTime(),a,this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth)}},_UpdateProgressBarPosition:function(a){var c=this.OriginalWidth*this.ProgressPercent()/100;0==this.BarWidth?this.OriginalCompletedWidth=this.CompletedWidth=0:0>c?this.OriginalCompletedWidth=this.CompletedWidth=0:(this.OriginalCompletedWidth=c,c-=a-this.OriginalLeft,0>c&&
(c=0),c>this.BarWidth?c=this.BarWidth:c==this.BarWidth&&(c-=2),this.CompletedWidth=c);this.ProgressPercentResizeThumb=b("div.rq-gc-progressbar-resizer",this.element);0==this.ProgressPercentResizeThumb.length&&(this.ProgressPercentResizeThumb=b("div.ui-progress-resizer",this.element));this.ProgressPercentResizeThumb.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));null!=this.ProgressPercentResizeThumb&&(10<this.BarWidth?
(this.ProgressPercentResizeThumb.show(),this.ProgressPercentResizeThumb.css("margin-left",this.CompletedWidth),this.ProgressPercentResizeThumb.css("height",b(this.TaskBarRectangle).css("height"))):this.ProgressPercentResizeThumb.hide())},$newLabel:null,_updateTaskBarLabel:function(){var a=this.options,c=this.TaskBarRectangle;this.ActivityView._isParent?c=this.ParentBar:this.Activity._isMilestone&&(c=this.MileStoneBar);c.width();var e=b("div.rq-gc-taskbar-label",c);0==e.length&&(e=b("div.label",c));
this.LabelTmpl&&!this.KnockoutObject&&(this.$newLabel=b(this.newLabel(a)),0<this.$newLabel.length&&this.$newLabel.text()&&(this.$newLabel.text(),this.$newLabel.css("margin-left",e.parent().width()+12+"px"),e.replaceWith(this.$newLabel)));c&&0<e.length&&e.css("margin-left",e.parent().width()+12+"px")},newLabel:function(a){return e(this.LabelTmpl,a.ActivityView.Activity_M())},UpdateResourceText:function(a){if(0<this.Activity._assignments.length){var c=b("div#GanttTaskBarLabel",this.TaskBarRectangle);
!0==this.IsParent()?c=b("div#GanttTaskBarLabel",this.ParentBar):this.IsMilestone()&&(c=b("div#GanttTaskBarLabel",this.MileStoneBar));if(c.length){var e=RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText(this.Activity._assignments,!1,!0);c[0].innerHTML=e;c[0].style.fontSize="12px";!1==this.ActivityView.IsParent_M()?c.css("margin-right",-(12*c[0].innerHTML.length/2+5)+"px"):c.css("margin-left","30px")}}!0==a&&0==this.Activity._assignments.length&&(b("div#GanttTaskBarLabel",this.TaskBarRectangle).html(""),
b("div#GanttTaskBarLabel",this.ParentBar).html(""),b("div#GanttTaskBarLabel",this.MileStoneBar).html(""))},_listenForShiftAndResizeTracker:function(){!1!=this.GanttChart.options.IsPrinting||this.IsReadOnly||this.TaskReadOnly||(this.TaskBarRectangle.ganttShiftTracker(this,this.DragEnd),this.TaskBarRectangle.ganttResizeTracker(this,this.ResizeEnd),this.ParentBar.ganttShiftTracker(this,this.DragEnd),this.MileStoneBar.ganttShiftTracker(this,this.DragEnd),this.TaskBarRectangle.css("cursor","move"))},CanShiftTask:function(a){return a.GanttControl.CanShiftActivityInternal(a.Activity)},
DragEnd:function(a,b){if(!this.StartTime().equals(this.taskStartAndEndTime.ProposedStart)||!this.EndTime().equals(this.taskStartAndEndTime.ProposedEnd)){var c={Cancel:!1};this.GanttControl.ActivityDragEnd&&0<this.GanttControl.ActivityDragEnd.fn.length&&(c=new TimesChangingEventArgs(this.ActivityView,this.taskStartAndEndTime.ProposedStart,this.taskStartAndEndTime.ProposedEnd,"DragEnd",this.Activity._boundObject),c.Cancel=!1,this.GanttControl.ActivityDragEnd.raise(a,c),this.taskStartAndEndTime.ProposedStart=
c.StartTime,this.taskStartAndEndTime.ProposedEnd=c.EndTime);!1==c.Cancel&&(c=new RadiantQ.Gantt.SetStartTimeAction(this.GanttControl,this.Activity,this.taskStartAndEndTime.ProposedStart,!1),this.GanttControl.ActionManager.RecordAction(c),this.ProgressEndTime(this.Activity.ProgressEndTime_M()),0<this.GanttControl.ActivityTimeChanged.fn.length&&(c=new TimesChangingEventArgs(this.Activity,this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.OriginalEnd,"DragEnd"),this.GanttControl.ActivityTimeChanged.raise(this,
c)))}this._isActivityPropertyChanged=!1;this.TaskBarRectangle.removeClass("rq-taskbar-shadow")},ResizeEnd:function(a,b,c){b.forProgressBar.isTrue?this.Activity.ProgressPercent_M(this.taskStartAndEndTime.ProgressPercent):(this.Activity.PreferredStartTime_M(this.Activity.StartTime_M()),this.Activity.EndTime_M(this.taskStartAndEndTime.OriginalEnd),0<this.GanttControl.ActivityTimeChanged.fn.length&&(a=new TimesChangingEventArgs(this.Activity,this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.OriginalEnd,
"ResizeEnd"),this.GanttControl.ActivityTimeChanged.raise(this,a)));this._isActivityPropertyChanged=!1;this.TaskBarRectangle.removeClass("rq-taskbar-shadow")},_listenForTouchTap:function(){var a=this.MileStoneBar;a.on("touchstart",this._onTouchstart.bind(this));a.on("touchend",this._onTouchend.bind(this));a.on("touchmove",this._onTouchMove.bind(this));a.on("MSPointerDown",this._onTouchstart.bind(this));a.on("MSPointerUp",this._onTouchend.bind(this));a.on("MSPointerMove",this._onTouchMove.bind(this))},
tapDownX:null,tapDownY:null,tapHoldTimer:null,canShowContextMenu:!1,timeOutFunctions:null,_onTouchstart:function(a){a=a.originalEvent.touches?a.originalEvent.touches[0]:a.originalEvent;var b=this;b.tapDownX=a.clientX;b.tapDownY=a.clientY;b.tapHoldTimer=setTimeout(function(){b.canShowContextMenu=!0},500)},_onTouchMove:function(){clearTimeout(this.tapHoldTimer)},_onTouchend:function(a){if("ShowContextMenu"==this.options.GanttChart.options.TouchTapAction||!0==this.canShowContextMenu){var b=a.originalEvent.changedTouches?
a.originalEvent.changedTouches[0]:a.originalEvent;if(this.tapDownX==b.clientX&&this.tapDownY==b.clientY){var c=this;clearTimeout(c.timeOutFunctions);c.timeOutFunctions=setTimeout(function(){c._showContextMenu(a.originalEvent,b)},40)}this.canShowContextMenu=!1}clearTimeout(this.tapHoldTimer)},_showContextMenu:function(a,c){if("mouse"!=a.pointerType&&4!=a.pointerType){var e=b.ui?b.ui.version||"1.5.2":null;e&&1.11<=parseFloat(e)&&b.isFunction(b.jQContextMenu)?b(a.target).jQContextMenu({x:c.clientX,y:c.clientY}):
b.isFunction(b.contextMenu)&&b(a.target).contextMenu({x:c.clientX,y:c.clientY})}},_listenForMouseEnterAndLeave:function(){this.TaskBarRectangle.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));this.ParentBar.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));this.MileStoneBar.bind("mouseover."+this.widgetName,this.TaskBarMouseHover.bind(this)).bind("mouseleave."+
this.widgetName,this.TaskBarMouseLeave.bind(this));this.TaskBarRectangle.bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this));this.MileStoneBar.bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this)).bind("mouseleave."+this.widgetName,this.TaskBarMouseLeave.bind(this))},TaskBarMouseHover:function(a,b){this.GanttChart.TaskOnMouseHover=this.ActivityView;this.GanttChart.TaskViewOnMouseHover=this.ActivityView;
var c=this.IsMilestone(),e=this.IsParent(),g=this.TaskBarRectangle;!0==e&&(g=this.ParentBar);!0==c&&!1==e&&(g=this.MileStoneBar);!1==c&&!1==e&&g.addClass("rq-taskbar-shadow");this.GanttChart.options.TimeIndicatorLineOption==d.TimeIndicatorLines.OnHover&&(g.find("div.rq-gc-start-verticalLine").show(),g.find("div.rq-gc-end-verticalLine").show())},TaskBarMouseLeave:function(a,b){var c=this.IsMilestone(),e=this.IsParent(),g=this.TaskBarRectangle;!0==e&&(g=this.ParentBar);!0==c&&!1==e&&(g=this.MileStoneBar);
!1==c&&!1==e&&g.removeClass("rq-taskbar-shadow");this.GanttChart.options.TimeIndicatorLineOption==d.TimeIndicatorLines.OnHover&&(g.find("div.rq-gc-start-verticalLine").hide(),g.find("div.rq-gc-end-verticalLine").hide());this.GanttChart.TaskOnMouseHover=null;this.GanttChart.TaskViewOnMouseHover=null},_updateElementsFromTemplate:function(){var a=this.TaskBarRectangle,b=this.MileStoneBar,c=this.ParentBar;this._renderElementsFromTemplate();a.replaceWith(this.TaskBarRectangle);b.replaceWith(this.MileStoneBar);
c.replaceWith(this.ParentBar)},_renderElementsFromTemplate:function(a){var b=this.options;this.renderTemplate(b,a);b.TaskBarHeight?(this.TaskBarRectangle.css("height",b.TaskBarHeight+"px"),this.ParentBar.css("height",b.TaskBarHeight+"px"),this.MileStoneBar.css("height",b.TaskBarHeight+"px")):(this.taskHeight=this.element.height(),this.TaskBarRectangle.css("height",this.taskHeight-8+"px"),this.ParentBar.css("height",this.taskHeight-8+"px"),this.MileStoneBar.css("height",this.taskHeight-8+"px"));this.TaskBarRectangle.addClass("rq-gc-commonTaskbar");
this.TaskBarRectangle.append(this.ProgressBarRectangle);this.element.css("position","absolute")},renderTemplate:function(a,c){a.TaskTemplate?(a.TaskTemplate=a.TaskTemplate.replace(/RQDataContext/g,c),this.TaskBarRectangle=e(this.options.TaskTemplate),this.TaskBarRectangle=b(this.TaskBarRectangle(this.Activity)).addClass("rq-gc-tooltip")):this.TaskBarRectangle=b("<div class='rq-gc-taskbar "+window.radiantQclasses.defaultClass+" rq-gc-tooltip'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div>");
a.ProgressBarTemplate?(a.ProgressBarTemplate=a.ProgressBarTemplate.replace(/RQDataContext/g,c),this.ProgressBarRectangle=e(this.options.ProgressBarTemplate),this.ProgressBarRectangle=b(this.ProgressBarRectangle(this.Activity))):this.ProgressBarRectangle=b("<div class='rq-gc-progressbar progressbarStyle'></div>");a.MileStoneTemplate?(a.MileStoneTemplate=a.MileStoneTemplate.replace(/RQDataContext/g,c),this.MileStoneBar=e(a.MileStoneTemplate),this.MileStoneBar=b(this.MileStoneBar(this.Activity)).addClass("rq-gc-tooltip")):
this.MileStoneBar=b("<div></div>").addClass("rq-gc-milestoneBar rq-gc-tooltip").html("<div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div>");a.ParentTaskTemplate?(a.ParentTaskTemplate=a.ParentTaskTemplate.replace(/RQDataContext/g,c),this.ParentBar=e(a.ParentTaskTemplate),this.ParentBar=b(this.ParentBar(this.Activity)).addClass("rq-gc-tooltip")):this.ParentBar=this.Activity.IsExpanded?
b("<div  class='rq-gc-parentBar rq-gc-tooltip'><div class='rq-gc-parentBar-leftCue'></div><div class='rq-gc-parentBar-middle'></div><div class='rq-gc-parentBar-rightCue'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>"):b("<div  class='rq-gc-parentBar rq-gc-tooltip'><div class='rq-gc-parentBar-leftCue'></div><div class='rq-gc-parentBar-middle rq-gc-Parentbar-collapsed'></div><div class='rq-gc-parentBar-rightCue'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>");
if(null!=this.GanttControl.options.GetPreferredIDCallBack&&"function"==typeof this.GanttControl.options.GetPreferredIDCallBack){var g=this.GanttControl.options.GetPreferredIDCallBack(this.ActivityView);g&&(this.TaskBarRectangle.attr("id",g+"_TaskBar"),this.MileStoneBar.attr("id",g+"_MileStoneBar"),this.ParentBar.attr("id",g+"_ParentBar"))}},taskBarBackgroundElement:null,taskBarAdornerElement:null,_loadAdornerAndBgTemplate:function(){var a=this.options,c=this.IsParent();this.adornerAndBgTemplate(c,
a);if(!this.KnockoutObject&&a.TaskTemplate){var c=a.TaskTemplate.indexOf("<div class='rq-gc-taskbar-label'>"),e=a.TaskTemplate.indexOf("</div>",c);this.LabelTmpl=a.TaskTemplate.slice(c,e)+"</div>"}a=b("div.rq-gc-taskbar-label",this.TaskBarRectangle);0==a.length&&(a=b("div.label",this.TaskBarRectangle));0<a.length&&a.css("margin-left",this.TaskBarRectangle.width()+12+"px")},adornerAndBgTemplate:function(a,c){!1==a&&c.TaskBarBackgroundTemplate&&(null!=this.taskBarackgroundElement&&this.taskBarackgroundElement.remove(),
this.taskBarackgroundElement=e(this.options.TaskBarBackgroundTemplate,c),this.taskBarBackgroundElement=this.taskBarackgroundElement=b(this.taskBarackgroundElement),this.element.append(this.taskBarackgroundElement));!1==a&&c.TaskBarAdornerTemplate&&(null!=this.taskBarAdornerElement&&this.taskBarAdornerElement.remove(),this.taskBarAdornerElement=e(c.TaskBarAdornerTemplate,c),this.taskBarAdornerElement=b(this.taskBarAdornerElement),this.element.append(this.taskBarAdornerElement.css({"z-index":"11"})));
!1!=a||c.TaskBarAdornerTemplate||null!=this.taskBarAdornerElement&&this.taskBarAdornerElement.remove()},_activity_Assignments_CollectionChanged:function(){this.UpdateResourceText(!0)},BrowseToCueLeft:0,BrowseToCueRight:0,BrowseToTaskCueLeftVisibility:"none",BrowseToTaskCueRightVisibility:"none",_GanttChart_ViewportTimeRangeChanged:function(a,b){this.BrowseToCueLeft=this.options.GanttChart.options.ResizeToFit?0:this.options.GanttChart.GanttChart.scrollLeft();this.BrowseToCueRight=this.BrowseToCueLeft+
this.options.GanttChart.GanttChart[0].clientWidth-30;this._UpdateBrowseToTaskCuesStates()},_GanttChart_BeforeChartHZScroll:function(a,b){this.BrowseToCueLeft+=b.diff;this.BrowseToCueRight+=b.diff;this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.css({"margin-left":this.BrowseToCueLeft});this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.css({"margin-left":this.BrowseToCueRight})},_UpdateBrowseToTaskCuesStates:function(){this.BrowseToTaskCueLeftVisibility=null!=this.options.TaskBarBrowseToCueLeftTemplate&&
this.EndTime()<this.options.GanttChart.VisualStartTime?"block":"none";this.BrowseToTaskCueRightVisibility=null!=this.options.TaskBarBrowseToCueRightTemplate&&this.StartTime()>this.options.GanttChart.VisualEndTime?"block":"none";this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.css({"margin-left":this.BrowseToCueRight,display:this.BrowseToTaskCueRightVisibility})},
_loadBrowseToCue:function(){var a=this.options;if(a.TaskBarBrowseToCueLeftTemplate||a.TaskBarBrowseToCueRightTemplate)this._viewPortChangedHandler&&this._viewPortChangedHandler.Dispose(),this._beforeChartHZScrollHandler&&this._beforeChartHZScrollHandler.Dispose(),this._viewPortChangedHandler=this.GanttChart.ViewportTimeRangeChanged.subscribe(this._GanttChart_ViewportTimeRangeChanged,this),this._beforeChartHZScrollHandler=this.GanttChart.BeforeChartHZScroll.subscribe(this._GanttChart_BeforeChartHZScroll,
this);a.TaskBarBrowseToCueLeftTemplate&&this._createBrowseToCueLeft(a);a.TaskBarBrowseToCueRightTemplate&&this._createBrowseToCueRight(a)},_createBrowseToCueLeft:function(a){this.TaskBarBrowseToCueLeft=b(a.TaskBarBrowseToCueLeftTemplate);this.element.append(this.TaskBarBrowseToCueLeft);this.TaskBarBrowseToCueLeft[0].ganttTaskItemBar=this;this.TaskBarBrowseToCueLeft[0].title=window.RadiantQ_ScrollToTask;this.TaskBarBrowseToCueLeft.addClass("rq-gc-browseCue-left").bind("touchstart."+this.widgetName+
" mousedown."+this.widgetName,this.BrowseToTaskCue_Click.bind(this))},_createBrowseToCueRight:function(a){this.TaskBarBrowseToCueRight=b(a.TaskBarBrowseToCueRightTemplate);this.element.append(this.TaskBarBrowseToCueRight);this.TaskBarBrowseToCueRight[0].ganttTaskItemBar=this;this.TaskBarBrowseToCueRight[0].title=window.RadiantQ_ScrollToTask;this.TaskBarBrowseToCueRight.addClass("rq-gc-browseCue-right").bind("touchstart."+this.widgetName+" mousedown."+this.widgetName,this.BrowseToTaskCue_Click.bind(this))},
BrowseToTaskCue_Click:function(a){a=this.StartTime();this.GanttChart._setOption("AnchorTime",a);return!1},_BrowseToCueTemplateChanged:function(){this._GanttChart_ViewportTimeRangeChanged()},TooltipContent:null,DragTooltipContent:null,ResizeTooltipContent:null,ApplyTooltipSettings:function(a){b(a).attr("title","");this.LoadDefaultTooltipStyle();this.UpdateTooltipContent(this.options.ActivityView)},closeToolTip:function(){},_removeTooltip:function(a){if(a){var c="#"+b(a).attr("aria-describedby");b(c).remove();
b(a).removeAttr("aria-describedby")}},UpdateTooltipContent:function(a){if(a.ProposedStart&&a.ProposedEnd){0==a.OriginalStart.compareTo(a.ProposedStart)&&0==a.OriginalEnd.compareTo(a.ProposedEnd)&&(a.HasChanged=!1);var b={Name:a.Name,StartTime:a.ProposedStart,EndTime:a.ProposedEnd,OriginalStart:a.OriginalStart,OriginalEnd:a.OriginalEnd,HasChanged:a.HasChanged,ProgressPercent:a.ProgressPercent};if(a.Duration){if(0>a.Duration.days)return;b.Duration=a.Duration}this.createPopup(b)}},UpdateTemplateContent:function(a){"function"!=
typeof this.options.TaskTooltipTemplate&&"string"==typeof this.options.TaskTooltipTemplate?(this.toolTipTemplate=e(this.options.TaskTooltipTemplate),this.TooltipContent=b('<div class="TaskTooltip" ></div>').append(this.toolTipTemplate(a))):this.TooltipContent=b('<div class="TaskTooltip" ></div>').append(this.options.TaskTooltipTemplate(a))},createPopup:function(a){!1==a instanceof RadiantQ.Gantt.Model.IActivity&&(a.StartTime_M=function(){return a.StartTime},a.EndTime_M=function(){return a.EndTime},
a.Duration_M=function(){return a.Duration},a.ProgressPercent_M=function(){return a.ProgressPercent});"function"!=typeof this.options.MovingInfoPopup&&"string"==typeof this.options.MovingInfoPopup&&(this.options.MovingInfoPopup=e(this.options.MovingInfoPopup));"function"!=typeof this.options.ResizeInfoPopup&&"string"==typeof this.options.ResizeInfoPopup&&(this.options.ResizeInfoPopup=e(this.options.ResizeInfoPopup));"function"!=typeof this.ProgressResizeContent&&"string"==typeof this.ProgressResizeContent&&
(this.ProgressResizeContent=e(this.ProgressResizeContent));"function"!=typeof this.options.ConnectingInfoPopup&&"string"==typeof this.options.ConnectingInfoPopup&&(this.options.ConnectingInfoPopup=e(this.options.ConnectingInfoPopup));this.DragTooltipContent=b("<div></div>").append(this.options.MovingInfoPopup(a));this.ResizeTooltipContent=b("<div></div>").append(this.options.ResizeInfoPopup(a));this.ProgressResizeContent=b("<div></div>").append(this.options.ProgressTemplate(a))},ConnectingInfo:function(a){this.DepConnContent=
this.options.ConnectingInfoPopup(a)},LoadDefaultTooltipStyle:function(){this.StartTime();this.EndTime();this.defaultTemplate()},defaultTemplate:function(){var a="{{if $item.data.Duration_M()}}${$item.data.Duration_M().days}d ${$item.data.Duration_M().hours_M()}h ${$item.data.Duration_M().minutes_M()}m{{/if}}",a="#if (data.Duration_M()){# #= data.Duration_M().days #d #= data.Duration_M().hours_M() #h #=data.Duration_M().minutes_M() #m #}#";this.options.TaskTooltipTemplate||(this.options.TaskTooltipTemplate=
e("<div align='left'><table class='TaskTooltip' style='white-space:nowrap;border:none;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString}</b></td></tr><tr><td><b>${ RadiantQ_NameString } :</b>&nbsp;${ data.ActivityName_M() }</td></tr><tr><td><b>${ RadiantQ_StartString }: </b>&nbsp;${ data.StartTime_M().toString('dd-MMM-yyyy') }</td><td><b>${ RadiantQ_DurationString } :</b>${ data.Duration_M().toString()}</td></tr><tr><td><b>${ RadiantQ_FinishString} : </b>&nbsp;${ data.EndTime_M().toString('dd-MMM-yyyy') }</td><td><b>${ RadiantQ_ProgressString } :</b>${ data.ProgressPercent_M() }%</td></tr></table></div>"));
this.options.MovingInfoPopup||(this.options.MovingInfoPopup=e("<div align='left'><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td style='float:right;'><b>${ RadiantQ_StartString}:&nbsp;&nbsp;&nbsp;</b></td><td>"+this._MakeItBoldWhenActualDate("${ data.StartTime_M().toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${ RadiantQ_FinishString }:&nbsp;</b> </td><td>"+
this._MakeItBoldWhenActualDate("${ data.EndTime_M().toString('yyyy-MM-dd HH:mm') } ")+"</td></tr></table></div>"));this.options.ResizeInfoPopup||(this.options.ResizeInfoPopup=e("<div align='left'><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td style='float:right;'><b>${ RadiantQ_DurationString } :</b></td><td align='left'>"+this._MakeItBoldWhenActualDate(a)+"</td></tr><tr><td style='float:right;'><b>${ RadiantQ_StartTimeString }:</b> </td><td>${ data.StartTime_M().toString('yyyy-MM-dd HH:mm') }</td></tr><tr><td style='float:right;'><b>${ RadiantQ_EndTimeString }:</b></td><td> ${ data.EndTime_M().toString('yyyy-MM-dd HH:mm')}</td></tr></table></div>"));
this.options.ProgressTemplate||(this.options.ProgressTemplate=e("<div><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td><b>${ RadiantQ_ProgressPercentString }:</td><td>${ data.ProgressPercent_M()}%</b></td></tr></table></div>"));this.options.ConnectingInfoPopup||(this.options.ConnectingInfoPopup=e("<div align='left'><table class='rq-gc-taskbar-popup  ui-widget-content'' style='white-space:nowrap;border:none;'><tr><td colspan='2' align='center'><b>${ RadiantQ_FinishToStartLinkString }</b></td></tr><tr align='left'><td><b>${ RadiantQ_FromFinishOfString }  :</b></td><td>&nbsp;${ data.ConnectingInfoFromTaskText }</td></tr><tr align='left'><td><b>${ RadiantQ_ToStartOfString } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</b></td><td>&nbsp;${ data.ConnectingInfoToTaskText }</td></tr></table></div> "))},
_MakeItBoldWhenActualDate:function(a){return"#if( data.HasChanged ){# "+a+"#}else {# <b>"+a+"</b>#}#"},IsDepLinesReadOnly:!1,IsEffortReadOnly:!1,IsTaskReadOnly:!1,IsProgressPercentReadOnly:!1,IsStartTimesReadOnly:!1,IsReadOnly:!1,initValuesFromOptions:function(){var a=this.GanttControl.options;this.IsDepLinesReadOnly=a.IsDependencyLinesReadOnly;this.IsEffortReadOnly=a.IsEffortReadOnly;this.IsTaskReadOnly=this.ActivityView.IsReadOnly_M();this.IsProgressPercentReadOnly=a.IsProgressPercentReadOnly;this.IsStartTimesReadOnly=
a.IsStartTimesReadOnly;this.IsReadOnly=a.IsReadOnly},ReadOnlyStateChangedCallback:function(a,b){var c=void 0!=b.value?b.value:b.Value;"IsDependencyLinesReadOnly"==b.PropertyName?this.IsDepLinesReadOnly=c:"IsEffortReadOnly"==b.PropertyName?this.IsEffortReadOnly=c:"IsTaskReadOnly"==b.PropertyName?this.IsTaskReadOnly=c:"IsProgressPercentReadOnly"==b.PropertyName?this.IsProgressPercentReadOnly=c:"IsStartTimesReadOnly"==b.PropertyName?this.IsStartTimesReadOnly=c:"IsReadOnly"==b.PropertyName&&(this.IsReadOnly=
c);this.UpdateThumbsReadOnlyStates()},UpdateThumbsReadOnlyStates:function(){var a=this.element,c=b(".rq-gc-progressbar-resizer",a);0==c.length&&(c=b(".ui-progress-resizer",a));if(0!=c.length){var e=!this.IsReadOnly&&!this.IsTaskReadOnly&&!this.IsProgressPercentReadOnly;e?c.css("visibility","visible"):c.css("visibility","collapse")}c=b(".rq-pg-gc-taskBarResizer",a);0==c.length&&(c=b(".PGresizer-style",a));0!=c.length&&((e=!this.IsReadOnly&&!this.IsTaskReadOnly&&!this.IsEffortReadOnly)?c.css("display",
"block"):c.css("display","none"))},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments);"TaskBarAdornerTemplate"!=a&&"TaskBarBackgroundTemplate"!=a||this.adornerAndBgTemplate(this.ActivityView.IsParent,this.options);"TaskBarBrowseToCueLeftTemplate"==a?(this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.remove(),this._createBrowseToCueLeft(this.options),this._BrowseToCueTemplateChanged()):"TaskBarBrowseToCueRightTemplate"==a&&(this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.remove(),
this._createBrowseToCueLeft(this.options),this._BrowseToCueTemplateChanged())},_destroy:function(){clearTimeout(this._asyncShiftAndResizeTimer);clearTimeout(this._asyncTooltipTimer);this._onTaskBarLoadTimer&&(clearTimeout(this._onTaskBarLoadTimer),this._onTaskBarLoadTimer=null);this.GanttChart.element.unbind("ganttcharttimeindicatorlineoptionchanged."+this.eventNamespace);this.options.UseRQModelBinder&&RadiantQ.Unbind(this.element);if(this.GanttChart._dirtyTaskItemControls&&this.GanttChart._diryTaskItemByActs[this.Activity.id]){var a=
this.GanttChart._dirtyTaskItemControls.indexOf(this);-1!=a&&(this.GanttChart._dirtyTaskItemControls.splice(a,1),delete this.GanttChart._diryTaskItemByActs[this.Activity.id])}this._actViewPropertyChangedHandler&&(this._actViewPropertyChangedHandler.Dispose(),this._actViewPropertyChangedHandler=null);this._activityPropertyChangedHandler&&(this._activityPropertyChangedHandler.Dispose(),this._activityPropertyChangedHandler=null);this._actAssgnsCollectionChangedHandler&&(this._actAssgnsCollectionChangedHandler.Dispose(),
this._actAssgnsCollectionChangedHandler=null);this._readOnlyPropertyChangedHandler&&(this._readOnlyPropertyChangedHandler.Dispose(),this._readOnlyPropertyChangedHandler=null);this._chartRefreshUIHandler&&(this._chartRefreshUIHandler.Dispose(),this._chartRefreshUIHandler=null);this._viewPortChangedHandler&&(this._viewPortChangedHandler.Dispose(),this._viewPortChangedHandler=null);this._beforeChartHZScrollHandler&&(this._beforeChartHZScrollHandler.Dispose(),this._beforeChartHZScrollHandler=null);a=
this.Activity;a.PropertyChanged&&a.PropertyChanged.unsubscribe(this.UpdateTemplateContent,this);this.TaskBarRectangle=this.ParentBar=this.ProgressPercentResizeThumb=this.MileStoneBar=null;this.element.empty();delete this.element.parent()[0]["data-grid-item"];this.element.data("GanttTaskItemBar",null)}};f.GanttTaskItemBar=g;b.fn.ganttShiftTracker=function(c,e){var g,f,n;function p(a,c,e,g){var d=L.GetOffsetDueToHScroll(),f=L.GetOffsetDueToVScroll();!0==g&&(e.pageX=e.originalEvent.touches[0].pageX,
e.pageY=e.originalEvent.touches[0].pageY);S=b("#rq-gc-dependencyCue-parent",this.GanttChart.element);0==b("#rq-gc-dependencyCue-arrow",this.GanttChart.element).length&&S.append("<div id='rq-gc-dependencyCue-arrow' class='rq-gc-dependencyCue-arrow "+window.radiantQclasses.defaultClass+"' style='width:0; height:0; z-index:2;  position:relative; border-top-width:5px; border-top-style:solid; border-right:5px solid transparent; border-left:5px solid transparent; border-bottom-width:0px; margin-left:-4px;'</div>");
$DeplinkInnerLineArrow=b("#rq-gc-dependencyCue",this.GanttChart.element);if(0<S.length){c.parents("div.rq-ganttChart");var h=this.GanttChart.VSB.$scrollContainer.scrollTop(),k=c.offset().left+S[0].offsetLeft-c[0].offsetLeft;a=S[0].offsetTop-(a*c[0].parentElement.offsetHeight+c[0].offsetTop)+h;h=c.offset().top+a;a=c=0;D?(a=k=0,!0==g?(k=e.originalEvent.touches[0].clientX,a=e.originalEvent.touches[0].clientY):(k=e.clientX,a=e.clientY),k+=d,a+=f,c=Math.sqrt((k-D.x)*(k-D.x)+(a-D.y)*(a-D.y)),a=180/3.1415*
Math.acos((a-D.y)/c),k>D.x&&(a*=-1)):(c=Math.sqrt((e.pageX-k)*(e.pageX-k)+(e.pageY-h)*(e.pageY-h)),a=180/3.1415*Math.acos((e.pageY-h)/c),e.pageX>k&&(a*=-1));$DeplinkInnerLineArrow.css({height:c-7,"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"});S.css({height:c-5,"-webkit-transform":"rotate("+a+"deg)",
"-moz-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"});C=this.GanttChart.TaskOnMouseHover;d={ConnectingInfoFromTaskText:this.Activity.ActivityName_M(),ConnectingInfoToTaskText:""};null!=C&&C.Activity_M()!=this.Activity&&(!1==this.Activity.Model.CanAddNewDependency(this.Activity,C.Activity_M(),RadiantQ.Gantt.Model.NewDependencyAddScenarioType.UserDragOver,
RadiantQ.Gantt.DependencyType.FinishToStart)?C=null:d={ConnectingInfoFromTaskText:this.Activity.ActivityName_M(),ConnectingInfoToTaskText:this.Activity!=C.Activity_M()?C.Activity_M().ActivityName_M():""});this.ConnectingInfo(d);var m=b(".dragPopup");m.empty();m.append(this.DepConnContent);!0==W&&(W=!1,e.originalEvent.touches&&(e.pageY=e.originalEvent.touches[0].pageY),m[0].refreshPostion=function(a){var c=b(".rq-gc-taskbar-popup",m).outerHeight(),d=e.pageY,f=m.parents(".radiantq-ui-GanttBase");a?
(d-=e.offsetY+c,d<f.offset().top&&(d+=2*e.offsetY)):(d+=e.offsetY,d+c>f.offset().top+f.height()&&(d-=2*(e.offsetY+c)));!0==g?m.css({left:e.originalEvent.touches[0].pageX,top:d}):m.css({top:d})});m.css("visibility","visible")}}function q(a){27==a.keyCode&&(b.fn.RQTooltip.CanShowTooltip=!0,L.EndTracking(),b(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName),b(this).RemoveDragOrResizeContent(r),r[0].uiTooltip&&(r[0].disableTooltip=!1),
b("#clone").remove(),b("#rq-gc-dependencyCue-parent",this.GanttChart.element).remove(),!0==x&&(x=!1),null!=C&&(C=null),!0==A&&(A=!1),!0==y&&(y=!1))}var r=this,s,u,w,t,v;new ObjectEvent("DragComplete");var z=0,x=!1,A=!1,y=!1,C=null,M=c.options.WorkTimeSchedule,B=null,F=null,D={x:0,y:0},H=0,N=!1,O=null;r.bind("touchstart."+c.widgetName,function(a){N=!0;if(!this.IsReadOnly&&!this.IsTaskReadOnly&&!b(a.target).hasClass("label")){a.stopPropagation();W=!0;var c=G.call(this,a,r,!0);t=function(a){return V.call(this,
a,c,r,!0)};v=function(a){return P.call(this,a,c,r,!0)};b(document).bind("touchmove."+this.widgetName,t.bind(this)).bind("touchend."+this.widgetName,v.bind(this))}}.bind(c));r.bind("mousedown."+c.widgetName,function(a){if(!(N||(document.mouseButtonPressed=!0,b.fn.RQTooltip.CanShowTooltip=!1,this.IsReadOnly||this.IsTaskReadOnly||b(a.target).hasClass("label")))){W=!0;var c=G.call(this,a,r,!1);!1!=c&&(t=function(a){return V.call(this,a,c,r,!1)},v=function(a){document.mouseButtonPressed=!1;b.fn.RQTooltip.CanShowTooltip=
!0;b.fn.RQTooltip.RemoveTooltip();return P.call(this,a,c,r,!1)},b(document).bind("mousemove."+this.widgetName,t.bind(this)).bind("mouseup."+this.widgetName,v.bind(this)))}}.bind(c));var L=null,Q=0,S,G=function(a,c,e){var g="true"==c.attr("preventShifting");this.taskStartAndEndTime={Name:this.Activity.ActivityName_M(),OriginalStart:this.Activity.StartTime_M(),OriginalEnd:this.Activity.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:null,
ProposedEnd:null,ProposedStart:null,ProgressPercent:this.Activity.ProgressPercent_M()};M=this.GetScheduleToPlotWith();L=new RadiantQ.FlexyGantt.AutoScrollTracker(this.GanttControl);var f=U(a,void 0,c,e);L.OnScroll.subscribe(function(b,g){da.call(this,a,$taskClone,c,e,f)},this);var h=c[0].getBoundingClientRect();L.prevDeltaStartX=h.left;L.prevDeltaEndX=h.right;W=!0;var h=a.srcElement,k=c.closest("tr"),m=k.attr("list-index");m||(m=k.index());if(!h||!b(h).hasClass("rq-pg-gc-taskBarResizer")){$taskClone=
b("<div id='clone' class='taskclone rq-taskbar-clone "+window.radiantQclasses.defaultClass+"'></div>");S=b("<div id='rq-gc-dependencyCue-parent' class='rq-gc-dependencyCue-parent "+window.radiantQclasses.defaultClass+"'><div id='rq-gc-dependencyCue' class='rq-gc-dependencyCue'></div></div>");m=c.parents("div.rq-ganttChart");h=this.GanttChart.VSB.$scrollContainer.scrollTop();k=c.parents("div.rq-ganttChart");a.offsetX=a.clientX-c.offset().left;a.offsetY=a.clientY-c.offset().top;Q=b("div.rq-tsh-div",
m).outerHeight(!0);m=c.height()/2;h=c.offset().top-k.offset().top-(Q-m)+h;k=c.offset();!0==e?(D={x:a.originalEvent.touches[0].clientX,y:a.originalEvent.touches[0].clientY},S.css({top:h,left:a.originalEvent.touches[0].pageX-k.left+c[0].offsetLeft})):(D={x:a.clientX,y:a.clientY},S.css({top:h,left:a.offsetX+c[0].offsetLeft}));$taskClone.css({width:c[0].offsetWidth-2+"px",height:c[0].offsetHeight-2+"px"});this.IsStartTimesReadOnly||$taskClone.appendTo(c);y=!1==this.CanShiftTask(this);!0==g&&(y=!0);I.call(this,
a,$taskClone,c,e,S);g=this.options.GanttChart.options.TimeIndicatorLineOption;if((g&d.TimeIndicatorLines.OnResize)==d.TimeIndicatorLines.OnResize||(g&d.TimeIndicatorLines.Always)==d.TimeIndicatorLines.Always)B=c.find("div.rq-gc-start-verticalLine").clone().show(),F=c.find("div.rq-gc-end-verticalLine").clone().show(),$taskClone.append(B),$taskClone.append(F);return $taskClone}},I=function(a,c,e,g,d){this.closeToolTip();e[0].uiTooltip&&(e[0].disableTooltip=!0);d=U(a,c,e,g);s=d.x;u=d.y;w=c[0].offsetLeft;
e.addClass("rq-taskbar-shadow");this.taskStartAndEndTime.OriginalStart=this.Activity.StartTime_M();this.taskStartAndEndTime.OriginalEnd=this.Activity.EndTime_M();M?(this.taskStartAndEndTime.ProposedStart=M.ConvertToNextWorkingTime(this.taskStartAndEndTime.OriginalStart),this.taskStartAndEndTime.ProposedEnd=M.GetEnd(this.taskStartAndEndTime.ProposedStart,this.Activity.Effort_M())):(this.taskStartAndEndTime.ProposedStart=this.GanttControl.RoundUp(this.taskStartAndEndTime.OriginalStart),this.taskStartAndEndTime.ProposedEnd=
this.GanttControl.RoundUp(this.taskStartAndEndTime.OriginalEnd));this.UpdateTooltipContent(this.taskStartAndEndTime);e.GetDragOrResizeContent(this.DragTooltipContent,a,e,g);O=b(".dragPopup");b(document).bind("keydown."+this.widgetName,q.bind(this))},V=function(a,c,e,d){e.addClass("rq-taskbar-shadow");if(!0==d){var h=document.elementFromPoint(a.originalEvent.touches[0].pageX,a.originalEvent.touches[0].pageY);mouseHoverActivity=b(h).parents(".rq-gc-row ").data();null!=mouseHoverActivity?(this.GanttChart.TaskOnMouseHover=
mouseHoverActivity.GanttTaskItemBar.ActivityView,this.GanttChart.TaskViewOnMouseHover=mouseHoverActivity.GanttTaskItemBar.ActivityView):(this.GanttChart.TaskOnMouseHover=null,this.GanttChart.TaskViewOnMouseHover=null)}g=this.taskStartAndEndTime.OriginalStart.clone();f=this.taskStartAndEndTime.OriginalEnd.clone();n=this.OriginalLeft;g<=f&&(h=U(a,c,e,d),H=h.x-s+w,da.call(this,a,c,e,d,h),L.MouseMovedTo({X:a.clientX,Y:a.clientY},x))},P=function(a,c,g,d){L.EndTracking();g.removeClass("rq-taskbar-shadow");
null==this.taskStartAndEndTime.ProposedStart||null==this.taskStartAndEndTime.ProposedEnd||this.IsStartTimesReadOnly||(g[0].uiTooltip&&(g[0].disableTooltip=!1),this.taskStartAndEndTime.OriginalStart=this.taskStartAndEndTime.ProposedStart,this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd,"function"==typeof e&&e.call(this,this,this.taskStartAndEndTime));null!=C&&(a=C.Activity_M(),this.Activity.Model.CanAddNewDependency(this.Activity,a,RadiantQ.Gantt.Model.NewDependencyAddScenarioType.UserDragDrop,
RadiantQ.Gantt.DependencyType.FinishToStart)&&(a=new RadiantQ.Gantt.CreateNewDependencyAction(this.GanttControl.Model,this.Activity,a,!1),this.GanttControl.ActionManager.RecordAction(a)),C=null);g.RemoveDragOrResizeContent(g);b("#clone").remove();b("#rq-gc-dependencyCue-parent",this.GanttChart.element).remove();if(!0==x||this.IsDepLinesReadOnly)x=!1;!0==A&&(A=!1);!0==y&&(y=!1);D={x:0,y:0};this.UpdateTooltipContent(this.ActivityView);b(document).unbind("touchmove."+this.widgetName).unbind("touchend."+
this.widgetName).unbind("keydown."+this.widgetName);b(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName)},U=function(a,b,c,e){if(!0==e)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var g=a.originalEvent.touches[0].pageX,d=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)g=a.originalEvent.touches[0].clientX,d=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)g=a.pageX,d=a.pageY;
else if(a.clientX||a.clientY)g=a.clientX,d=a.clientY;return{x:g,y:d}},W=!1,da=function(c,e,d,f,h){var m=L.GetOffsetDueToHScroll(),m=H+m;var l=h.x-s,q=h.y-u;z++;if(!(6>z)&&null!=d[0].parentElement){var r=d.closest("tr");(h=r.attr("list-index"))||(h=r.index());!1==x&&!1==A&&(4<=Math.abs(q)&&!this.IsDepLinesReadOnly&&!this.GanttControl.options.IsReadOnly?(x=!0,l=this.GanttChart._getUniqueSelectorIdByID("rq-gc-viewsContainer-div"),b(".rq-gc-dependencysParent",l).append(S)):4<=Math.abs(l)&&!0!=x&&!y&&
!this.GanttControl.options.IsStartTimesReadOnly&&(this.ActivityView._isParent&&!0!=this.GanttControl.options.IsParentDraggable||(A=!0)));if(x)p.call(this,h,d,c,f);else if(A){c=L.GetOffsetDueToHScroll();f=n;l=Date.MaxValue;h=Date.MinValue;q=this.GetScheduleToPlotWith();if(!0==this.GanttControl.Model.AdjustDurationOnAssignment&&0<this.ActivityView.Activity_M().Assignments.length)for(var r=this.ActivityView.Activity_M(),t=r.Assignments.length,v=0;v<t;v++){var w=r.Assignments[v];if(null!=w.Resource.Schedule){var U=
a.ConvertToEndTimeInBaseScaleType(this.GanttChart.options.BaseTimeScaleType,g.clone(),f/this.GanttChart.options.BaseTimeUnitWidth,(H+f+c)/this.GanttChart.options.BaseTimeUnitWidth,w.Resource.Schedule),U=w.Resource.Schedule.ConvertToNextWorkingTime(U);l.isGreaterThan(U)&&(l=U,w=RadiantQ.Gantt.Model.BaseGanttModel.ComputeEndTime(l,this.ActivityView.Activity_M().Effort_M(),w.Resource.Schedule),h.isLessThan(w)&&(h=w))}}l==Date.MaxValue&&(l=a.ConvertToEndTimeInBaseScaleType(this.GanttChart.options.BaseTimeScaleType,
g.clone(),f/this.GanttChart.options.BaseTimeUnitWidth,(H+f+c)/this.GanttChart.options.BaseTimeUnitWidth,q),null!=q&&(l=q.ConvertToNextWorkingTime(l)),h=RadiantQ.Gantt.Model.BaseGanttModel.ComputeEndTime(l,this.ActivityView.Activity_M().Effort_M(),q));this.taskStartAndEndTime.ProposedStart=this.GanttControl.RoundUp(l);this.taskStartAndEndTime.ProposedEnd=this.GanttControl.RoundUp(h);0==this.taskStartAndEndTime.ProposedStart.compareTo(this.taskStartAndEndTime.OriginalStart)&&0==this.taskStartAndEndTime.ProposedEnd.compareTo(this.taskStartAndEndTime.OriginalEnd)?
this.taskStartAndEndTime.HasChanged=!1:(c={Action:"Shifting",ProposedStartDate:this.taskStartAndEndTime.ProposedStart,ProposedEndDate:this.taskStartAndEndTime.ProposedEnd,Cancel:!1},this.taskStartAndEndTime.HasChanged=!0,this.GanttControl.ActivityTimeChanging.isSubscribed()&&this.GanttControl.ActivityTimeChanging.raise(this,c),!0==c.Cancel&&(this.taskStartAndEndTime.ProposedStart=this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd,this.taskStartAndEndTime.HasChanged=
!1));this.UpdateTooltipContent(this.taskStartAndEndTime);O.empty();O.append(this.DragTooltipContent);this.IsStartTimesReadOnly||O.css("visibility","visible");d[0].uiTooltip&&d[0].uiTooltip.hide()}}!0==A&&b(e).css("margin-left",m+"px")}};b.fn.ganttResizeTracker=function(c,e){function g(a){27==a.keyCode&&(b.fn.RQTooltip.CanShowTooltip=!0,D.EndTracking(),b(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown."+this.widgetName),b(document).unbind("touchmove."+
this.widgetName).unbind("touchend."+this.widgetName),f[0].uiTooltip?(f[0].disableTooltip=!1,f[0].uiTooltip.show()):f.parent()[0].uiTooltip&&(f.parent()[0].disableTooltip=!1,f.parent()[0].uiTooltip.show()),b(this).RemoveDragOrResizeContent(f),b("#clone").remove())}var f=this,n,p,q,r,s={isTrue:!1},u,w=0,t=!1,v=new ObjectEvent("ResizeComplete"),z=b("<div class='rq-pg-gc-taskBarResizer'></div>"),x=b("<div class='rq-gc-progressbar-resizer'></div>"),A=f.css("height");z.css("height",A);var y=f.find("div.rq-gc-parentBar-middle"),
C=f.find("div.progressbarStyle");0==y.length&&(y=f.find("div.parentMiddleBar-style"));0==C.length&&(C=f.find("div.rq-gc-progressbar"));var M=null,B=null,F=C.width();x.css("height",A);x.css("margin-left",F);0!=y.length?y.append(z):f.append(z);c.GanttControl.options.IsEffortReadOnly&&z.css("display","none");A=!1;0<f.parent("div.rq-gc-progressbar-resizer").length?A=!0:0<f.parent("div.ui-progress-resizer").length&&(A=!0);C&&!1==A&&f.append(x);z.bind("touchstart."+c.widgetName,function(a){t=!0;s={isTrue:!1};
var c=H.call(this,a,f,s,!0);q=function(a){s={isTrue:!1};return L.call(this,a,c,f,!0,s)};r=function(a){return Q.call(this,a,c,f,s,!0)};b(document).bind("touchmove."+this.widgetName,q.bind(this)).bind("touchend."+this.widgetName,r.bind(this))}.bind(c));z.bind("mousedown."+c.widgetName,function(a){if(!t){document.mouseButtonPressed=!0;b.fn.RQTooltip.CanShowTooltip=!1;s={isTrue:!1};var e=H.call(this,a,f,s,!1);q=function(a){s={isTrue:!1};return L.call(this,a,e,f,!1,s)};r=function(a){document.mouseButtonPressed=
!1;b.fn.RQTooltip.CanShowTooltip=!0;return Q.call(this,a,e,f,s,!1)};b(document).bind("mousemove."+c.widgetName,q.bind(this)).bind("mouseup."+c.widgetName,r.bind(this))}}.bind(c));var D=null,H=function(a,c,e,g){var f=this.options.ActivityView.Activity_M();this.taskStartAndEndTime={Name:f.ActivityName_M(),OriginalStart:f.StartTime_M(),OriginalEnd:f.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:f.ProgressEndTime_M(),ProposedEnd:null,
ProposedStart:null};D=new RadiantQ.FlexyGantt.AutoScrollTracker(this.GanttControl);D.OnScroll.subscribe(function(b,d){G.call(this,a,$taskClone,c,g,e)},this);$taskClone=b("<div id='clone' class='taskclone rq-taskbar-clone "+window.radiantQclasses.defaultClass+"'></div>");$taskClone.css({width:c[0].offsetWidth-2+"px",height:c[0].offsetHeight-3+"px"});!1==e.isTrue&&c.addClass("rq-taskbar-shadow");c.append($taskClone);O.call(this,a,$taskClone,c,e,g);a.stopPropagation();f=this.GanttChart.options.TimeIndicatorLineOption;
if((f&d.TimeIndicatorLines.OnResize)==d.TimeIndicatorLines.OnResize||(f&d.TimeIndicatorLines.Always)==d.TimeIndicatorLines.Always)M=c.find("div.rq-gc-start-verticalLine").clone().show(),B=c.find("div.rq-gc-end-verticalLine").clone().show(),$taskClone.append(M),$taskClone.append(B);return $taskClone};x.bind("touchstart."+c.widgetName,function(a){t=!0;var c=a.currentTarget;s={isTrue:!0};var e=N.call(this,a,f,C,s,!0);q=function(a){s={isTrue:!0};return L.call(this,a,e,C,!0,s)};r=function(a){s={isTrue:!0};
return Q.call(this,a,e,C,s,!0,c)};b(document).bind("touchmove."+this.widgetName,q.bind(this)).bind("touchend."+this.widgetName,r.bind(this))}.bind(c));x.bind("mousedown."+c.widgetName,function(a){if(!t){document.mouseButtonPressed=!0;b.fn.RQTooltip.CanShowTooltip=!1;var c=a.currentTarget;s={isTrue:!0};var e=N.call(this,a,f,C,s,!1);q=function(a){s={isTrue:!0};return L.call(this,a,e,C,!1,s)};r=function(a){document.mouseButtonPressed=!1;b.fn.RQTooltip.CanShowTooltip=!0;s={isTrue:!0};return Q.call(this,
a,e,C,s,!1,c)};b(document).bind("mousemove."+this.widgetName,q.bind(this)).bind("mouseup."+this.widgetName,r.bind(this))}}.bind(c));var N=function(a,c,e,g,d){var f=this.options.ActivityView.Activity_M();this.taskStartAndEndTime={Name:f.ActivityName_M(),OriginalStart:f.StartTime_M(),OriginalEnd:f.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:f.ProgressEndTime_M(),ProgressPercent:f.ProgressPercent_M(),ProposedEnd:null,ProposedStart:null};
$progressClone=b("<div id='clone' class='taskclone rq-taskbar-clone  "+window.radiantQclasses.defaultClass+"'></div>");D=new RadiantQ.FlexyGantt.AutoScrollTracker(this.GanttControl);D.OnScroll.subscribe(function(b,c){G.call(this,a,$progressClone,e,d,g)},this);$progressClone.css({width:e[0].offsetWidth-2+"px",height:c[0].offsetHeight-3+"px"});c.append($progressClone);O.call(this,a,$progressClone,e,g,d);a.stopPropagation();return $progressClone},O=function(a,c,e,d,f){this.GetScheduleToPlotWith();this.closeToolTip();
e[0].uiTooltip?e[0].disableTooltip=!0:e.parent()[0].uiTooltip&&(e.parent()[0].disableTooltip=!0);n=S(a,c,e,f).x;p=c[0].offsetWidth;this.taskStartAndEndTime.ProposedStart=this.taskStartAndEndTime.OriginalStart;this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime;u=this.Activity.ProgressPercent;this.taskStartAndEndTime.OriginalDuration=this.Activity.Duration_M();this.ProposedDuration=this.taskStartAndEndTime.OriginalDuration;
c=e.closest(".rq-gc-taskbar");0==c.length&&(c=e.closest(".taskbar-style"));!0==d.isTrue?b(this).GetDragOrResizeContent(this.ProgressResizeContent,a,c,f):b(this).GetDragOrResizeContent(this.ResizeTooltipContent,a,e,f);b(document).bind("keydown."+this.widgetName,g.bind(this))},L=function(a,b,c,e,g){w=S(a,b,c,e,g).x-n+p;G.call(this,a,b,c,e,g);D.MouseMovedTo({X:a.clientX,Y:a.clientY})},Q=function(a,c,g,d,f,h){D.EndTracking();document.mouseButtonPressed=!1;b.fn.RQTooltip.CanShowTooltip=!0;g[0].uiTooltip?
(g[0].disableTooltip=!1,g[0].uiTooltip.show()):g.parent()[0].uiTooltip&&(g.parent()[0].disableTooltip=!1,g.parent()[0].uiTooltip.show());b(this).RemoveDragOrResizeContent(g);b("#clone").remove();this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd?this.taskStartAndEndTime.ProposedEnd:this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.OriginalDuration=this.ProposedDuration;if(!0==d.isTrue){if(a=b(c).css("width"))g.css({width:a}),0!=parseInt(a)&&g.css({"border-width":"1px"}),
b(h).css("margin-left",parseInt(g.css("width"))+"px");h=new RadiantQ.Gantt.SetProgressValueAction(this.ActivityView.Activity_M(),u,!1)}else h=new RadiantQ.Gantt.SetDurationAction(this.GanttControl,this.ActivityView.Activity_M(),this.ProposedDuration);this.GanttControl.ActionManager.RecordAction(h);this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime>this.taskStartAndEndTime.OriginalEnd?this.taskStartAndEndTime.OriginalEnd:this.taskStartAndEndTime.ProgressEndTime;v.subscribe(e,
this);v.raise(this,{taskStartAndEndTime:this.taskStartAndEndTime,forProgressBar:d});this.UpdateTooltipContent(this.ActivityView);v.unsubscribe(e,this);g.removeClass("rq-taskbar-shadow");b(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown."+this.widgetName);b(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName)},S=function(a,b,c,e,g){if(!0==e)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var d=a.originalEvent.touches[0].pageX,
f=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)d=a.originalEvent.touches[0].clientX,f=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)d=a.pageX,f=a.pageY;else if(a.clientX||a.clientY)d=a.clientX,f=a.clientY;return{x:d,y:f}},G=function(c,e,g,d,f){c=D.GetOffsetDueToHScroll();c=w+c;d=g.parents(".rq-gc-commonTaskbar").width()||c;!0==f.isTrue&&(u=Math.round(100*(c/d)),0>u||0>c)&&(c=u=0,D.preventAutoscroll=!0);c>d?(f.isTrue&&
(D.preventAutoscroll=!0),w=d,b(e).css("width",w+"px")):(b(e).css("width",c+"px"),null!=B&&null!=B[0]&&(B[0].style["margin-left"]=c+"px"));!1==f.isTrue&&g.addClass("rq-taskbar-shadow");e=this.GetScheduleToPlotWith();this.taskStartAndEndTime.OriginalDuration.equals(this.ProposedDuration)?this.taskStartAndEndTime.HasChanged=!1:this.taskStartAndEndTime.HasChanged=!0;!0==f.isTrue&&(100<u?u=100:0>u&&(u=0),this.taskStartAndEndTime.ProgressPercent=u);c=a.ConvertUnitsInBaseScaleTypeToDurationInHours(this.GanttChart.options.BaseTimeScaleType,
this.taskStartAndEndTime.OriginalStart,this.OriginalLeft/this.GanttChart.options.BaseTimeUnitWidth,(this.OriginalLeft+c)/this.GanttChart.options.BaseTimeUnitWidth,null);c=new RQTimeSpan(0,c,0,0,0);c=f.isTrue?c:this.GanttControl.RoundUpDuration(c);d=RQTimeSpan.Zero_M();c<d&&(c=d);this.ProposedDuration=c;this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalStart.clone().addTimeSpan(c);e&&(this.ProposedDuration=e.GetEffort(this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd),
this.taskStartAndEndTime.ProposedEnd=e.GetEnd(this.taskStartAndEndTime.OriginalStart,this.ProposedDuration),this.ProposedDuration=e.GetEffort(this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd));this.taskStartAndEndTime.Duration=this.ProposedDuration;e={Action:"Resizing",ProposedStartDate:this.taskStartAndEndTime.ProposedStart,ProposedEndDate:this.taskStartAndEndTime.ProposedEnd,Cancel:!1};this.GanttControl.ActivityTimeChanging.isSubscribed()&&this.GanttControl.ActivityTimeChanging.raise(this,
e);!0==e.Cancel&&(this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd,this.taskStartAndEndTime.Duration=this.taskStartAndEndTime.OriginalDuration,this.taskStartAndEndTime.HasChanged=!1);this.UpdateTooltipContent(this.taskStartAndEndTime);e=b(".dragPopup");e.empty();!0==f.isTrue?e.append(this.ProgressResizeContent):e.append(this.ResizeTooltipContent);e.css("visibility","visible");g[0].uiTooltip?g[0].uiTooltip.hide():g.parent()[0].uiTooltip&&g.parent()[0].uiTooltip.hide()}}})(RadiantQ.Gantt.Widget,
jQuery);
(function(f){RadiantQ.Gantt.Widget.GanttDependencyControl={Visibility:null,options:{name:"GanttDependencyControl",Data:null,DependencyViews:null,UseChartVirtualization:!1,ToggleVisibilityForVirtualizationSetting:null,GanttChart:null,GanttModel:null,DependencyTooltipTemplate:null},_create:function(){this.element.data(this.options.name,this);var b=this.element.parents("div.rq-ganttChart");b.bind("ganttchartrefreshui.DependenciesRefreshUI",function(a,b){this.element.empty();this.Refresh()}.bind(this));this.element.parents("div.rq-ganttBase");
b.bind("ganttchartsourceupdated",function(a,b){this.options.Data&&this.options.Data.CollectionChanged.unsubscribe(this.ActivityViewsCollectionChange,this);this.options.DependencyViews&&this.options.DependencyViews.CollectionChanged.unsubscribe(this.DependencyViewsColletionChange,this);this.element.empty();this.options.Data=b.options.FlatItemsSource;this.options.DependencyViews=this.options.GanttChart.options.Parent.DependencyViews;this._actViewsCollectionChangeHandler&&this._actViewsCollectionChangeHandler.Dispose();
this.options.Data&&this.options.Data.CollectionChanged&&(this._actViewsCollectionChangeHandler=this.options.Data.CollectionChanged.subscribe(this.ActivityViewsCollectionChange,this));this._depViewsCollectionChangeHandler&&this._depViewsCollectionChangeHandler.Dispose();this.options.DependencyViews&&(this._depViewsCollectionChangeHandler=this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,this));this.Refresh();var e=f(".vsb-actualContent",this.options.GanttChart.$rowsParent).height();
f(".rq-gc-dependencyControl",this.options.GanttChart.$GanttChart).css("height",e)}.bind(this));this.options.Data&&this.options.Data.CollectionChanged&&(this._actViewsCollectionChangeHandler=this.options.Data.CollectionChanged.subscribe(this.ActivityViewsCollectionChange,this));this.UpdateVisibility();this.Refresh();this._depViewsCollectionChangeHandler=this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,this);if(f.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)&&
"FlexyGantt"!=this.options.GanttChart.options.GanttType){var b=[{keyName:"Delete",name:window.RadiantQ_Delete,icon:"Delete"},{keyName:"ChangeToFinishToStart",name:window.RadiantQ_ChangeToFinishToStart,icon:"Change to Finish to Start"},{keyName:"ChangeToFinishToFinish",name:window.RadiantQ_ChangetoFinishtoFinish,icon:"Change to Finish to Finish"},{keyName:"ChangeToStartToFinish",name:window.RadiantQ_ChangeToStartToFinish,icon:"Change to Start to Finish"},{keyName:"ChangeToStartToStart",name:window.RadiantQ_ChangeToStartToStart,
icon:"Change to Start to Start"}],d=new RadiantQ.ContextMenuImpl.ContextMenu("div.DependencyContainer div.rq-gc-dependencyLine, div.rq-gc-dependencyLine-arrow ",".rq-gc-dependencysParent");d.AddNewItems(b);d.ItemClicked.subscribe(this.itemClicked,this);d.BeforeContextMenu.subscribe(function(a,b){if(d.Items){var e=f(a[0].parentElement).data(),e=(e.GanttDependencyLine||e.radiantqGanttDependencyLine).options.DependencyView.DependencyType_M();this.hideDependencyMenuItem(d.Items.asArray,e)}},this);this.options.GanttChart.options.Parent.DependencyContextMenu=
d}this._afterChartRowsRenderHandler=this.options.GanttChart.AfterChartRowsRender.subscribe(function(){this.options.UseChartVirtualization&&!1==this.options.GanttChart.options.IsPrinting&&this.Refresh()},this);!1==this.options.GanttChart.options.IsPrinting&&this.options.GanttChart.options.Parent.element.bind("Resized",function(){setTimeout(function(){this.Refresh()}.bind(this),0)}.bind(this))},hideDependencyMenuItem:function(b,d){for(var a=0;a<b.length;a++)b[a].disabled=b[a].keyName=="ChangeTo"+d?
!0:this.options.GanttChart.options.Parent.options.IsReadOnly||this.options.GanttChart.options.Parent.options.IsDependencyLinesReadOnly?!0:!1},getGanttTableParent:function(b){return f(".ui-grid-body",b.parent())},itemClicked:function(b,d){var a=f(d[0].parentElement).data(),a=a.GanttDependencyLine;switch(b){case "Delete":for(var c=0;c<a.options.Parent.options.DependencyViews.length;c++){var e=a.options.Parent.options.DependencyViews[c];if(e.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&
e.EndRowIndex_M()==a.options.DependencyView.EndRowIndex_M()){var g=e.Dependency,h=new RadiantQ.Gantt.Utils.DelayUpdates,g=new RadiantQ.Gantt.DeleteDependencyAction(e.GanttControl.Model,g,!1);e.GanttControl.ActionManager.RecordAction(g);h.Dispose()}}f(a.options.Parent.element).empty();a.options.Parent.Refresh();break;case "ChangeToFinishToStart":for(c=0;c<a.options.Parent.options.DependencyViews.length;c++)e=a.options.Parent.options.DependencyViews[c],e.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&
e.EndRowIndex_M()==a.options.DependencyView.EndRowIndex_M()&&(g=e.Dependency,h="FinishToStart",g=new RadiantQ.Gantt.ChangeDependencyTypeAction(e.GanttControl.Model,g,h,!1),e.GanttControl.ActionManager.RecordAction(g));f(a.options.Parent.element).empty();a.options.Parent.Refresh();break;case "ChangeToFinishToFinish":for(c=0;c<a.options.Parent.options.DependencyViews.length;c++)if(e=a.options.Parent.options.DependencyViews[c],e.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&e.EndRowIndex_M()==
a.options.DependencyView.EndRowIndex_M()){g=e.Dependency;h="FinishToFinish";g=new RadiantQ.Gantt.ChangeDependencyTypeAction(e.GanttControl.Model,g,h,!1);e.GanttControl.ActionManager.RecordAction(g);break}f(a.options.Parent.element).empty();a.options.Parent.Refresh();break;case "ChangeToStartToStart":for(c=0;c<a.options.Parent.options.DependencyViews.length;c++)e=a.options.Parent.options.DependencyViews[c],e.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&e.EndRowIndex_M()==a.options.DependencyView.EndRowIndex_M()&&
(g=e.Dependency,h="StartToStart",g=new RadiantQ.Gantt.ChangeDependencyTypeAction(e.GanttControl.Model,g,h,!1),e.GanttControl.ActionManager.RecordAction(g));f(a.options.Parent.element).empty();a.options.Parent.Refresh();break;case "ChangeToStartToFinish":for(c=0;c<a.options.Parent.options.DependencyViews.length;c++)e=a.options.Parent.options.DependencyViews[c],e.StartRowIndex_M()==a.options.DependencyView.StartRowIndex_M()&&e.EndRowIndex_M()==a.options.DependencyView.EndRowIndex_M()&&(g=e.Dependency,
h="StartToFinish",g=new RadiantQ.Gantt.ChangeDependencyTypeAction(e.GanttControl.Model,g,h,!1),e.GanttControl.ActionManager.RecordAction(g));f(a.options.Parent.element).empty();a.options.Parent.Refresh()}},timer:null,DependencyViewsColletionChange:function(b,d){if("remove"==b.type){var a=this.options.GanttChart.ViewableDependencyViews.indexOf(d.items[0]);-1!=a&&this.options.GanttChart.ViewableDependencyViews.splice(a,1)}if("insert"==b.type)for(a=0;a<d.items.length;a++)this.options.GanttChart.ViewableDependencyViews.push(d.items[a]);
null!=this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.element.empty();this.Refresh()}.bind(this),0)},ActivityViewsCollectionChange:function(b,d){"FlexyGantt"==this.options.GanttChart.options.GanttType&&this._onFlatItemsSrcCollectionChanged(b,d);null!=this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.element.empty();this.Refresh()}.bind(this),0)},_onFlatItemsSrcCollectionChanged:function(b,d){var a=this.options.GanttChart;"insert"!=b.type&&"remove"!=
b.type||a.DependencyViews.UpdateList()},UpdateVisibility:function(){var b=this.options;this.Visibility=b.ToggleVisibilityForVirtualizationSetting?b.UseChartVirtualization?"Collapsed":"Visible":b.UseChartVirtualization?"Visible":"Collapsed"},_refreshTimer:null,Refresh:function(){this.element.empty();null!=this._refreshTimer&&clearTimeout(this._refreshTimer);this._refreshTimer=setTimeout(function(){this.element.empty();var b=this.options;"FlexyGantt"==b.GanttChart.options.GanttType&&this.UpdateViewableDependencyViewsForFG(b.GanttChart);
b=b.GanttChart.ViewableDependencyViews||[];if(0!=b.length)for(var d=0;d<b.length;d++)if(b[d].Visibility_M()){var a=f("<div class='DependencyContainer' style='position:absolute;'></div>");this.createGanttDependencyLine(a,b,d);a.children(":not(#depArrow)");a.hover(function(){f(this).children().addClass("dependencyShadow")});a.mouseleave(function(){f(this).children().removeClass("dependencyShadow")});this.element.append(a)}}.bind(this),0)},UpdateViewableDependencyViewsForFG:function(b){b.ViewableDependencyViews=
new RQArray;if(b.RenderedRows)for(var d={},a=0;a<b.RenderedRows.length;a++){var c=b.DependencyViews._dependencyViewsByRowId[b.RenderedRows[a]._guid];if(c)for(var e=0;e<c.length;e++){var g=c[e];d[g._guid]||(d[g._guid]=g,b.ViewableDependencyViews.push(g))}}},createGanttDependencyLine:function(b,d,a){b[this.getChildWidgetName("GanttDependencyLine")]({DependencyView:d[a],Visibility:"Visible",IsTemplateApplied:!0,GanttChart:this.options.GanttChart,StartTime:d[a].StartTime_M(),EndTime:d[a].EndTime_M(),
Parent:this,DependencyTooltipTemplate:this.options.DependencyTooltipTemplate})},_setOption:function(b,d){this.widgetBaseSetOption.apply(this,arguments);"DependencyViews"==b&&(this._depViewsCollectionChangeHandler&&this._depViewsCollectionChangeHandler.Dispose(),this.options.DependencyViews&&(this._depViewsCollectionChangeHandler=this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,this)),this.element.empty(),this.Refresh())},_destroy:function(){this._actViewsCollectionChangeHandler&&
(this._actViewsCollectionChangeHandler.Dispose(),this._actViewsCollectionChangeHandler=null);this._depViewsCollectionChangeHandler&&(this._depViewsCollectionChangeHandler.Dispose(),this._depViewsCollectionChangeHandler=null);this.StartTimeBinding&&this.StartTimeBinding.Dispose();this.EndTimeBinding&&this.EndTimeBinding.Dispose();var b=this.eventNamespace;f.observable(this.options.Data).unbind(b);this.element.parents("div.rq-ganttChart").unbind("ganttchartrefreshui.DependenciesRefreshUI");this.element.empty()}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.GanttDependencyLine={options:{name:"GanttDependencyLine",DependencyLineBarStroke:null,CustomColor:null,StartTime:null,EndTime:null,RowHeight:null,Visibility:null,PolylineGeometry:null,ArrowGeometry:null,HighlightEffect:null,IsTemplateApplied:null,DependencyView:null,GanttChart:null,DependencyTooltipTemplate:null,VirtualizationHeightOffset:null,Parent:null},_depStartTime:null,_isEndFixedShape:null,_isStartFixedShape:null,DepStartTime:function(b){if(void 0==b)return this._depStartTime;
b!=this._depStartTime?(this._depStartTime=b,this.OnPropertyChanged("StartTime",b),this.element.empty(),!1==this.IsInit&&this.OnRecomputeLocation(this.element)):this._fixedShapeChanged()},_depEndTime:null,DepEndTime:function(b){if(void 0==b)return this._depEndTime;b!=this._depEndTime?(this._depEndTime=b,this.OnPropertyChanged("EndTime",b),this.element.empty(),!1==this.IsInit&&this.OnRecomputeLocation(this.element)):this._fixedShapeChanged()},_fixedShapeChanged:function(){var b=this.options.DependencyView,
d=b.IsEndFixedShape_M(),b=b.IsStartFixedShape_M();this._isEndFixedShape!=d&&this._isStartFixedShape!=b&&(this.element.empty(),!1==this.IsInit&&this.OnRecomputeLocation(this.element))},_create:function(){this.IsInit=this._onInit=!0;var b=this.options;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.element.data("GanttDependencyLine",this);this.StartTimeBinding&&this.StartTimeBinding.Dispose();this.EndTimeBinding&&this.EndTimeBinding.Dispose();this.StartTimeBinding=new Binding(b.DependencyView,
"StartTime",this,"DepStartTime",null,RadiantQ.Gantt.BindingMode.TwoWay);this.EndTimeBinding=new Binding(b.DependencyView,"EndTime",this,"DepEndTime",null,RadiantQ.Gantt.BindingMode.TwoWay);null==b.VirtualizationHeightOffset&&(b.VirtualizationHeightOffset=0);this._depViewPropChangedHandler&&this._depViewPropChangedHandler.Dispose();this.IsInit&&(this.IsInit=!1,this.OnRecomputeLocation(this.element));this._depRecomputeTimer=null;this._onInit=!1},OnPropertyChanged:function(b,d){},timer:null,DependencyViewPropertyChange:function(b,
d){"Visibility"==d.PropertyName&&(this.options.Visibility=!0==d.value?"visible":"collapse")},CreateTooltip:function(b,d){var a=this;d.attr("title","");var c=this,e=f(document);d.tooltip({content:function(b){b=RadiantQ.Template||kendo.template;return null!=a.options.DependencyTooltipTemplate?b(a.options.DependencyTooltipTemplate,a.options.DependencyView):"<b>"+window.RadiantQ_TaskLinkString+":</b> "+window["RadiantQ_"+c.options.DependencyView.DependencyType_M()]+" <b>"+window.RadiantQ_LagString+":</b> "+
c.options.DependencyView.Dependency.Lag_M().toString()+"<br/><b>"+window.RadiantQ_FromString+": &nbsp;</b><b>(ID "+c.options.DependencyView.StartActivity.id+")</b> "+c.options.DependencyView.StartActivity.ActivityName_M()+"<br/><b>"+window.RadiantQ_ToXString+":  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b><b>(ID "+c.options.DependencyView.EndActivity.id+")</b> "+c.options.DependencyView.EndActivity.ActivityName_M()+""},open:function(a,b){document.mouseButtonPressed&&b.tooltip.remove();b.tooltip.addClass("dependencyLineTooltip");
e.bind("mousedown.divEvents mouseup.divEvents",function(){b.tooltip.remove();e.unbind(".divEvents")})},close:function(){e.unbind(".divEvents")},position:{my:"left top+15",at:"top",offset:"10"},track:!0});f(d).bind("mousedown.tooltipHandler blur.tooltipHandler",function(){if(this){var a="#"+f(this).attr("aria-describedby");f(a).remove();f(this).removeAttr("aria-describedby")}})},_depRecomputeTimer:null,OnRecomputeLocation:function(b){var d=this.options,a=d.DependencyView;b=d.GanttChart.options;var c=
this._depStartTime,e=this._depEndTime,g=!1;"FlexyGantt"==b.GanttType&&(g=!0);!1==g&&!0==d.DependencyView.EndActivity._isMilestone&&(this.isMilestone=!0);if(!(null==a||"collapse"==d.Visibility||!1==d.IsTemplateApplied||null==c||null==e||b.ComputedStartTime==b.ComputedEndTime||-1==a.StartRowIndex_M()&&-1==a.EndRowIndex_M()||!1==g&&a.StartRowIndex_M()==a.EndRowIndex_M())){var f;this.options.GanttChart.options.OnDependencyLineLoad&&(f=this.options.GanttChart.options.OnDependencyLineLoad);if(g)-1!=a.StartRowIndex_M()&&
-1!=a.EndRowIndex_M()&&(this._onInit?(this._drawRelatedDepLine(!0),null!=f&&"function"==typeof f&&f.call(this.element,this)):(null!=this._depRecomputeTimer&&clearTimeout(this._depRecomputeTimer),this._depRecomputeTimer=setTimeout(function(){this._drawRelatedDepLine(!0);this._depRecomputeTimer=null;null!=f&&"function"==typeof f&&f.call(this.element,this)}.bind(this),0)));else{var m=a.ActivityViewsCollection._dictActivityVsView[a.StartActivity.ID_M()],k=a.ActivityViewsCollection._dictActivityVsView[a.EndActivity.ID_M()];
m&&k&&(this._onInit?(a=m.ChartRow(),d=null==a?-1:a[0].rowIndex,a=k.ChartRow(),a=null==a?-1:a[0].rowIndex,-1==d&&-1==a&&!0!=b.IsPrinting||this._drawRelatedDepLine(!1),null!=f&&"function"==typeof f&&f.call(this.element,this)):(null!=this._depRecomputeTimer&&clearTimeout(this._depRecomputeTimer),this._depRecomputeTimer=setTimeout(function(){var a=m.ChartRow(),b=null==a?-1:a[0].rowIndex,a=k.ChartRow(),a=null==a?-1:a[0].rowIndex;-1==b&&-1==a||this._drawRelatedDepLine(!1);this._depRecomputeTimer=null;null!=
f&&"function"==typeof f&&f.call(this.element,this)}.bind(this),0)))}}},_getAdjustedStartPoint:function(b,d,a){b={X:b,Y:d};switch(a){default:b.X-=20;break;case RadiantQ.Gantt.DependencyType.StartToStart:b.X-=20;break;case RadiantQ.Gantt.DependencyType.FinishToFinish:b.X+=20;break;case RadiantQ.Gantt.DependencyType.StartToFinish:b.X+=20}return b},_getAdjustedEndPoint:function(b,d,a){b={X:b,Y:d};switch(a){default:b.X+=20;break;case RadiantQ.Gantt.DependencyType.StartToStart:b.X-=20;break;case RadiantQ.Gantt.DependencyType.FinishToFinish:b.X+=
20;break;case RadiantQ.Gantt.DependencyType.StartToFinish:b.X-=20}return b},isMilestone:!1,_drawRelatedDepLine:function(b){var d=this.options,a=d.DependencyView,c=d.GanttChart,e=c.options,g=e.RowHeight,h=this.element,m=this._depStartTime,k=this._depEndTime,l=a.StartRowIndex_M(),n=a.EndRowIndex_M(),p;null!=e.DependencyLineColor&&(p=e.DependencyLineColor);var e=a.DependencyType_M(),q=RadiantQ.Gantt.RQPrint.InternalPrintOptions,r=0<q.MaximumHeightPerPage?q.NoOfRenderedRows:q.NoOfRowsInPage;if(q.IsNewPrinting){if(l<
q.StartRowIndex&&n>q.StartRowIndex+r)return;l-=q.StartRowIndex;n-=q.StartRowIndex}var s=a.GetStartItemScheduleToPlotWith(d.GanttChart.options.WorkTimeSchedule),r=a.GetEndItemScheduleToPlotWith(d.GanttChart.options.WorkTimeSchedule),u=c.GetBTSTToRenderAgainst(),w=c.GetBTUWToRenderAgainst(),m=c.ConvertTimeToXFor(m,u,w,s),k=c.ConvertTimeToXFor(k,u,w,r),d=l*g+g/2+d.VirtualizationHeightOffset,r=d+(n-l)*g;if("FlexyGantt"==c.options.Parent.GanttType){var u=c.$rowsParent[0].getBoundingClientRect(),w=c.$rowsParent.scrollTop(),
s=c.TaskItemCtrlByData.GetItemByKey(a._startItem),t=c.TaskItemCtrlByData.GetItemByKey(a._endItem);if(null==s||null==t)return;var c=s.element,s=t.element,t=c[0].getBoundingClientRect(),v=s[0].getBoundingClientRect();0<c.parents(".rq-gc-chartArea").length?d=t.top-u.top+(t.bottom-t.top)/2+w:l>n&&d<u.bottom&&(d=u.bottom+20);0<s.parents(".rq-gc-chartArea").length?r=v.top-u.top+(v.bottom-v.top)/2+w:n>l&&r<u.bottom&&(r=u.bottom+20)}q.IsNewPrinting||(-1==l?(q=this._getAdjustedStartPoint(k,r,e),m=q.X,d=q.Y):
-1==n&&(q=this._getAdjustedEndPoint(m,d,e),k=q.X,r=q.Y));b||(a.StartItemXPosAdjustment_M&&(m+=a.StartItemXPosAdjustment_M()),e!=RadiantQ.Gantt.DependencyType.FinishToStart&&a.EndItemXPosAdjustment_M&&(k+=a.EndItemXPosAdjustment_M()),a.StartItemYPosAdjustment_M&&(d+=a.StartItemYPosAdjustment_M()),a.EndItemYPosAdjustment_M&&(r+=a.EndItemYPosAdjustment_M()));q={Start:{X:m,Y:d},End:{X:k,Y:r}};c=a.StartItemPosAdjustment_M?a.StartItemPosAdjustment_M():a.StartItemPosAdjustment;u=a.EndItemPosAdjustment_M?
a.EndItemPosAdjustment_M():a.EndItemPosAdjustment;c&&("function"==typeof c?c.call(a,q,e,"Start"):"object"==typeof c&&(q.Start.X+=c.X||0,q.Start.Y+=c.Y||0),m=q.Start.X,d=q.Start.Y);u&&("function"==typeof u?u.call(a,q,e,"End"):"object"==typeof u&&(q.End.X+=u.X||0,q.End.Y+=u.Y||0),k=q.End.X,r=q.End.Y);switch(e){default:this._drawFinishToStart(m,d,k,r,l,n,p,g,g,b,a);break;case RadiantQ.Gantt.DependencyType.StartToStart:this._drawStartToStart(m,d,k,r,l,n,p);break;case RadiantQ.Gantt.DependencyType.FinishToFinish:this._drawFinishToFinish(m,
d,k,r,l,n,p);break;case RadiantQ.Gantt.DependencyType.StartToFinish:this._drawStartToFinish(m,d,k,r,l,n,p,g,g)}a=f(".rq-gc-dependency",h);b||this.CreateTooltip(this,a)},_drawFinishToStart:function(b,d,a,c,e,g,f,m,k,l,n){d={X:b,Y:d};e={X:a,Y:c};g=this.element;l=[];l.push({X:d.X,Y:d.Y});e.Y>d.Y?e.Y-=k/2:e.Y<d.Y&&(e.Y+=k/2);e.Y!=d.Y?(!1==n.IsEndFixedShape_M()&&(e.X+=7),a>=b-7&&a<=b+7&&n.IsEndFixedShape_M()?(l.push({X:d.X+15,Y:d.Y}),l.push({X:d.X+15,Y:d.Y+10}),l.push({X:e.X,Y:d.Y+10})):e.X<d.X-7?this._insertPointsToGoAroundBarForFS(l,
d,e,m,k):l.push({X:e.X,Y:d.Y})):e.X<d.X&&this._insertPointsToGoAroundBarForFS(l,d,e,m,k);c==l[l.length-1].Y&&a==l[l.length-1].X||l.push({X:e.X,Y:e.Y});g.css({"margin-left":d.X,"margin-top":d.Y+"px"});this._drawDeplinesFromPts(l,g,d.X,d.Y,e.X,e.Y,f,RadiantQ.Gantt.DependencyType.FinishToStart)},_drawStartToStart:function(b,d,a,c,e,g,f){e=this.element;g=[];g.push({X:b,Y:d});c!=d&&(a<b?(g.push({X:a-10,Y:d}),g.push({X:a-10,Y:c})):(g.push({X:b-10,Y:d}),g.push({X:b-10,Y:c})));g.push({X:a,Y:c});e.css({"margin-left":b,
"margin-top":d+"px"});this._drawDeplinesFromPts(g,e,b,d,a,c,f,RadiantQ.Gantt.DependencyType.StartToStart)},_drawFinishToFinish:function(b,d,a,c,e,g,f){e=this.element;g=[];g.push({X:b,Y:d});c!=d&&(a<b?(g.push({X:b+20,Y:d}),g.push({X:b+20,Y:c})):(g.push({X:a+20,Y:d}),g.push({X:a+20,Y:c})));g.push({X:a+3,Y:c});e.css({"margin-left":b,"margin-top":d+"px"});this._drawDeplinesFromPts(g,e,b,d,a,c,f,RadiantQ.Gantt.DependencyType.FinishToFinish)},_drawStartToFinish:function(b,d,a,c,e,g,f,m,k){e=this.element;
g=[];g.push({X:b,Y:d});c!=d?a<=b?(g.push({X:a,Y:d}),g.push({X:a,Y:c>d?c-k/2:c+k/2})):(g.push({X:b-10,Y:d}),g.push({X:b-10,Y:d+m/2}),g.push({X:a+10,Y:d+m/2}),g.push({X:a+10,Y:c}),g.push({X:a+3,Y:c})):g.push({X:a,Y:c});e.css({"margin-left":b,"margin-top":d+"px"});this._drawDeplinesFromPts(g,e,b,d,a,c,f,RadiantQ.Gantt.DependencyType.StartToFinish,k)},_drawDeplinesFromPts:function(b,d,a,c,e,g,h,m,k){if(1!=b.length)for(var l="<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+
"' style='background-color:"+h+" !important;'></div>",n=0;n<b.length;n++){var p=b[n];if(n==b.length-1)this._drawDepArrow(d,a,c,e,g,h,m,b[n-1].X,k);else{var q=b[n+1],r=Math.abs(p.X-q.X)||1,s=Math.abs(p.Y-q.Y)||1,u=Math.min(p.X,q.X)-a,w=Math.min(p.Y,q.Y)-c;p.X==q.X&&(s+=1);p=f(l).css({"margin-left":u,"margin-top":w,width:r,height:s});d.append(p)}}},_drawDepArrow:function(b,d,a,c,e,g,h,m,k){var l=f("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+
"'></div> "),n=e-a,p=c-4-d;switch(h){default:a==e?(n-=5,m<c?(p-=1,l.addClass("rq-gc-dependencyLine-arrow-right")):(p+=6,l.addClass("rq-gc-dependencyLine-arrow-left"))):a>e?(n-=5,m<c?l.addClass("rq-gc-dependencyLine-arrow-right"):l.addClass("rq-gc-dependencyLine-arrow-up")):(n-=4,!0==this.isMilestone&&-4<=p&&3>=p&&(n+=4),e>a&&(m<c?l.addClass("rq-gc-dependencyLine-arrow-right"):l.addClass("rq-gc-dependencyLine-arrow-down")));break;case RadiantQ.Gantt.DependencyType.StartToStart:n-=5;c<d&&a==e?(p+=5,
l.addClass("rq-gc-dependencyLine-arrow-left")):l.addClass("rq-gc-dependencyLine-arrow-right");break;case RadiantQ.Gantt.DependencyType.FinishToFinish:d<c&&a==e?(p-=1,l.addClass("rq-gc-dependencyLine-arrow-right")):(p+=4,l.addClass("rq-gc-dependencyLine-arrow-left"));n-=5;break;case RadiantQ.Gantt.DependencyType.StartToFinish:a==e?d<c?(p-=1,n-=5,l.addClass("rq-gc-dependencyLine-arrow-right")):(p+=4,n-=5,l.addClass("rq-gc-dependencyLine-arrow-left")):d<c?(p+=4,n-=5,l.addClass("rq-gc-dependencyLine-arrow-left")):
a>e?(n+=k/2-5,l.addClass("rq-gc-dependencyLine-arrow-up")):(n-=k/2,l.addClass("rq-gc-dependencyLine-arrow-down"))}null!=g&&void 0!=g&&(l.hasClass("rq-gc-dependencyLine-arrow-up")?l[0].style.setProperty("border-bottom-color",g,"important"):l.hasClass("rq-gc-dependencyLine-arrow-down")?l[0].style.setProperty("border-top-color",g,"important"):l.hasClass("rq-gc-dependencyLine-arrow-left")&&l[0].style.setProperty("border-right-color",g,"important"),l.hasClass("rq-gc-dependencyLine-arrow-right")&&l[0].style.setProperty("border-left-color",
g,"important"));l.css({"margin-left":p,"margin-top":n});b.append(l)},_insertPointsToGoAroundBarForFS:function(b,d,a,c,e){a.Y==d.Y?(b.push({X:d.X+5,Y:d.Y}),b.push({X:d.X+5,Y:d.Y+c/2}),b.push({X:a.X-9,Y:d.Y+c/2}),b.push({X:a.X-9,Y:a.Y})):a.Y<d.Y?(a.X-=8,a.Y-=e/2,b.push({X:d.X+5,Y:d.Y}),b.push({X:d.X+5,Y:d.Y-c/2}),b.push({X:a.X-9,Y:d.Y-c/2}),b.push({X:a.X-9,Y:a.Y})):a.Y>d.Y&&(a.X-=8,a.Y+=e/2,b.push({X:d.X+5,Y:d.Y}),b.push({X:d.X+5,Y:d.Y+c/2}),b.push({X:a.X-9,Y:d.Y+c/2}),b.push({X:a.X-9,Y:a.Y}))},_destroy:function(){this.StartTimeBinding&&
this.StartTimeBinding.Dispose();this.EndTimeBinding&&this.EndTimeBinding.Dispose();this._depViewPropChangedHandler&&this._depViewPropChangedHandler.Dispose();f(".rq-gc-dependency",this.element).unbind(".tooltipHandler");this.element.data("GanttDependencyLine",null)}}})(jQuery);
(function(f,b){function d(){this._cachedRowCont=b("<div id='cache'></div>");this._cachedRows={}}function a(a){if(a=e[a.eventNamespace])a._cachedRowCont.empty(),a._cachedRows={}}var c=RadiantQ.Gantt.DefaultStyles,e={};f.GanttRows={currentUniqueRowSuffix:0,options:{name:"GanttRows",ProgressPercentBinding:null,Data:null,ParentTasksListProperty:null,TasksListProperty:null,EnableOverlappedRenderingBindingProperty:"",Expand:null,TaskTemplate:null,OverlappedTasksRenderingOptimization:null,ParentTaskTemplate:null,
TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,GanttChart:null,RowHeight:null,TaskBarHeight:null,KnockoutObjectName:null,ViewWidth:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,FlexyGantt:null,TimeIndicatorLineOption:null,UseChartVirtualization:!1,EnableAlternativeRowBackground:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,EnableAutoAdjustForSchedule:!0,CanDrawDependency:!1,ConnectingInfoPopup:null,MinimumWidthForParentBar:1},
cachedTaskListControlInstance:[],CreateTaskListControl:function(a,b,c){a[this.getChildWidgetName("TasksListControl")]({Data:b,ParentTasksListProperty:this.options.ParentTasksListProperty,ProgressPercentBinding:this.options.ProgressPercentBinding,TasksListProperty:this.options.TasksListProperty,EnableOverlappedRenderingBindingProperty:this.options.EnableOverlappedRenderingBindingProperty,TaskTemplate:this.options.TaskTemplate,ParentTaskTemplate:this.options.ParentTaskTemplate,OverlappedTasksRenderingOptimization:this.options.OverlappedTasksRenderingOptimization,
TaskStartTime:this.options.TaskStartTime,ParentTaskStartTime:this.options.ParentTaskStartTime,TaskEndTime:this.options.TaskEndTime,ParentTaskEndTime:this.options.ParentTaskEndTime,RowCount:this.currentUniqueRowSuffix,GanttChart:this.options.GanttChart,Parent:this,KnockoutObjectName:this.options.KnockoutObjectName,TaskTooltipTemplate:this.options.TaskTooltipTemplate,ResizeInfoPopup:this.options.ResizeInfoPopup,MovingInfoPopup:this.options.MovingInfoPopup,TaskBarHeight:this.options.TaskBarHeight,FlexyGantt:this.options.FlexyGantt,
UseChartVirtualization:this.options.UseChartVirtualization,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,TimeIndicatorLineOption:this.options.TimeIndicatorLineOption,UseRQModelBinder:this.UseRQModelBinder,EnableAutoAdjustForSchedule:this.options.EnableAutoAdjustForSchedule,CanDrawDependency:this.options.CanDrawDependency,ConnectingInfoPopup:this.options.ConnectingInfoPopup,MinimumWidthForParentBar:this.options.MinimumWidthForParentBar});
this.options.GanttChart.LoadingRow({Row:c,Data:b})},$tableBody:null,getGanttTableParent:function(a){return b(".ui-grid-body",a.parent())},VSB:null,_vsbScrollHandler:null,UseRQModelBinder:!1,updateModelBinderBool:function(){var a=/data-bind/g;null!=this.options.TaskTemplate&&(this.UseRQModelBinder=(a.test(this.options.TaskTemplate)||a.test(this.options.ParentTaskTemplate))&&null==this.options.KnockoutObjectName)},_create:function(){c.init();var g=this;this.itemHeight=this.options.RowHeight;this.SCROLLBAR_MIN_SIZE=
10;this.VirtualizationID=0;this.totalItems=[];this.listItems=[];this.updateModelBinderBool();e[this.eventNamespace]=new d;this.$chartTableBody=b("<tbody></tbody>");var f=this.table=b("<table class='chartRowsContainer rq-gc-rowsParent-table' style='overflow:hidden;'></table").append(this.$chartTableBody);f[0].style.cssText=c.ZeroStyle;f[0].style.height="auto";var m=eval(this.options.KnockoutObjectName),k=this.options.GanttChart,l=k.element,k=k.$rowsParent;this.$tableBody=this.getGanttTableParent(l);
var n=k.height();this.$Area=b(".rq-gc-chartArea-div",l);this.VSB=new RadiantQ.Gantt.VerticalScrollBar(f,k,this.options.Data,this.options.RowHeight,this.options.FlexyGantt,!0);this.options.GanttChart.VSB=this.VSB;this.bindDataCollectionChanged=function(){g.options.Data&&g.options.Data.CollectionChanged.subscribe(function(a,b){"insert"==a.type&&g.InsertRow(g.element,b,f,g.options.ViewWidth);"remove"==a.type&&g.RemoveRow(b,f);m&&g.applayBindings(m,g.element[0]);var c=g.options.GanttChart;c.syncVerticalScrollBar&&
c.syncVerticalScrollBar()})};this.bindDataCollectionChanged();this.element.append(f);null!=g.options.Data&&g.Refresh(g.element,g.options.Data,f,g.options.ViewWidth,n);g._vsbScrollHandler=g.VSB.OnScroll.subscribe(function(a,c,e){a=g.VSB.$scrollContainer.scrollTop();b("div.rq-gc-dependencysParent",g.$Area).scrollTop(a);g.options.UseChartVirtualization&&g.Refresh(g.element,g.options.Data,f,g.options.ViewWidth,n)});b(l).bind("ganttchartsourceupdated",function(c,e){this._unBindEventsToRefresh();b.extend(this.options,
e.options);this.options.Data=e.options.FlatItemsSource;this.options.ParentTaskTemplate=e.options.ParentTaskItemTemplate;this.options.TaskTemplate=e.options.TaskItemTemplate;this.VirtualizationID=0;this.totalItems=[];this.listItems=[];a(this);this.bindDataCollectionChanged();this.bindChartRefreshUI(l);this.renderBars(e);this._updateTimeIndicatorLine();var g=this.options.GanttChart;g.syncVerticalScrollBar&&g.syncVerticalScrollBar()}.bind(this));this.bindChartRefreshUI=function(c){b(c).bind("ganttchartrefreshui.RowsRefreshUI",
function(b,c){!0==g.options.GanttChart.options.ResizeToFit&&(width=g.options.GanttChart.element.width(),g.$chartTableBody.width(width));!0==c.ForceToReDrawRows&&(a(this),g.renderBars(c))}.bind(this))};this.bindChartRefreshUI(l);b(window).resize(function(){n=b(".rq-gc-chartArea-div",l).height();g.options.UseChartVirtualization&&(null!=g.options.Data&&g.Refresh(g.element,g.options.Data,f,g.options.ViewWidth,n),g._enableAlternativeRowBackground())});this.renderBars=function(a){this.$chartTableBody.empty();
null!=a.options.FlatItemsSource&&g.Refresh(g.element,a.options.FlatItemsSource,f,a.options.ViewWidth,n);g.knockoutObjectName&&g.applayBindings(g.knockoutObjectName,g.element[0]);this._enableAlternativeRowBackground()};this.element.data("GanttRows",this);this._updateTimeIndicatorLine();this._updateContextMenus()},applayBindings:function(a,b){ko.applyBindingsToDescendants(a,b)},_enableAlternativeRowBackground:function(){if(!1!=this.options.EnableAlternativeRowBackground){var a=this,c=this.table.find("td");
if(0!=c.length){var e=c[0].parentElement["data-grid-item"]._displayIndex;c.removeClass("rq-grid-alternative-background");c.addClass(function(){b(this);var c=!1;a.options.GanttChart.options.IsPrinting?c=0!=this.parentElement.rowIndex%2:(c=0!=e%2,e++);if(!0==c)return"rq-grid-alternative-background"})}}},getGanttTableHeight:function(){return b("div.grid-body-actualContent",this.$tableBody).height()},guid:function(){var a="",b,c;for(b=0;32>b;b++){c=16*Math.random()|0;if(8==b||12==b||16==b||20==b)a+="-";
a+=(12==b?4:16==b?c&3|8:c).toString(16)}return a},_refreshVSBTimer:null,Refresh:function(c,d,f,k,l){this.updateModelBinderBool();var n=this.options.GanttChart;this.cachedTaskListControlInstance=[];n.RenderedRows=[];var p=this;this.VSB.CreateRow=function(a,c){void 0==c.uid&&(c.uid=p.guid());var e=null;if(p.options.UseChartVirtualization)e=p.getItemAtIndex(a,d,k),e[0]["data-grid-item"]=c,p.totalItems.push(e),g=b("td",e),!1==n.options.IsPrinting&&!1==c.IsSelected()&&e.hasClass("rq-row-selected")&&e.removeClass("rq-row-selected "+
window.radiantQclasses.selectionClass),p.options.TimeIndicatorLineOption&&p.cachedTaskListControlInstance.push(g.data("TasksListControl")),p.cleanupListItems(!0);else{var e=c.RowHeight||p.options.RowHeight,e=b("<tr class='rq-grid-row' data-uid ="+c.uid+" style='height:"+e+"px;width:100%' > <td id='ChartRow' class='FlexyChartRow rq-fg-gc-row' style='height:"+(e-1)+"px;width:100%;border-top-width: 0;border-right-width: 0;'> </td> </tr>"),g=e.find("td");g[0].DataContext=c;e[0]["data-grid-item"]=d[a];
p.CreateTaskListControl(g,c,e);p.currentUniqueRowSuffix++;!1==n.options.IsPrinting&&c.IsSelected()&&e.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);p.options.TimeIndicatorLineOption&&p.cachedTaskListControlInstance.push(g.data("TasksListControl"))}p.raiseRowBgAndFgTemplate(p.options,g,n,c);f.css("height","auto");!1==n.options.IsPrinting&&n.RenderedRows.push(c);return e};this.VSB.ClearCachedRows=function(){a(p)};this._refreshVSBTimer&&clearTimeout(this._refreshVSBTimer);this._refreshVSBTimer=
setTimeout(function(){if(p.options.UseChartVirtualization){var a=e[p.eventNamespace],c=b("tr",p.element);b(".end-resizeMarker,.start-resizeMarker",c).css("display","none");a._cachedRowCont.append(c)}p.VSB.Refresh(d,p.options.UseChartVirtualization);f.width(k);p.options.KnockoutObjectName&&(a=eval(p.options.KnockoutObjectName),p.applayBindings(a,p.element[0]));p._enableAlternativeRowBackground();p.ApplyTooltip(b(".rq-gc-tooltip",p.element))},0)},ApplyTooltip:function(a){a.RQTooltip(function(a){a=a.data("TaskBar");
if(!a||null==a.options.TaskTooltipTemplate)return null;a.UpdateTemplateContent(a.options.Data);return a.TooltipContent});b.fn.RQTooltip.CanShowTooltip=!0},_updateTimeIndicatorLine:function(){if(this.options.TimeIndicatorLineOption)for(var a=0;a<this.cachedTaskListControlInstance.length;a++)this.cachedTaskListControlInstance[a].refreshVerticalLine()},_updateContextMenus:function(){var a=this.options.GanttChart;if(b.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)){var c="#"+a.$GanttChart[0].id,e=a.$GanttChart.parent(),
d=new RadiantQ.ContextMenuImpl.ContextMenu(c+" .rq-gc-taskbar, "+c+" .taskbar-style, "+c+" .taskbar",e),f=new RadiantQ.ContextMenuImpl.ContextMenu(c+" .rq-gc-parentBar, "+c+" .parentBar-style, "+c+" .parentBar",e),c=new RadiantQ.ContextMenuImpl.ContextMenu(c+" .rq-fg-gc-row",e.parent());a.options.Parent.TaskContextMenu=d;a.options.Parent.ParentTaskContextMenu=f;a.options.Parent.RowContextMenu=c}},_refreshUIEventHandler:null,raiseRowBgAndFgTemplate:function(a,c,e,d){d._refreshUIEventHandler&&d._refreshUIEventHandler.Dispose();
var f=this;d._refreshUIEventHandler=e.RefreshUIEvent.subscribe(function(){f.ApplyTooltip(b(".rq-gc-tooltip",f.element));this.raiseRefreshRowBgAndFgEvent(a,c,e,d)},this);this.raiseRefreshRowBgAndFgEvent(a,c,e,d)},raiseRefreshRowBgAndFgEvent:function(a,c,e,d){var f=d.RowHeight||a.RowHeight;if(a.EnableCustomRowBackground){var n=b("#bgContainer",c);0==n.length?(n=b('<div id="bgContainer" style="height:inherit; position:absolute; width:100%;"></div>'),c.prepend(n)):n.empty();e.RefreshRowBackground.raise(n,
{GanttChart:e,Data:d})}a.EnableCustomRowForeground&&(a=b("#fgContainer",c),0==a.length?(a=b('<div id="fgContainer" style="height:'+f+'px; position:absolute; width:100%; z-index:100; pointer-events:none;"></div>'),c.prepend(a)):a.empty(),e.RefreshRowForeground.raise(a,{GanttChart:e,Data:d}))},getItemAtIndex:function(a,c,d){if(0<=a&&a<this.options.Data.length){var f=this.options.Data[a],l,n=a.toString(),p=e[this.eventNamespace];if(void 0!=p._cachedRows[f._guid])l=p._cachedRows[f._guid];else{l=f.RowHeight||
this.options.RowHeight;l=b("<tr class='rq-grid-row' data-uid ="+c[a].uid+" style='height:"+l+"px;width:100%' > <td name="+c[a]._data.TName+" class='FlexyChartRow rq-fg-gc-row' style='height:"+l+"px;width:100%;border-top-width: 0; border-right-width: 0;'> </td> </tr>");var q=l.find("td");q.width(d);q[0].DataContext=c[a];this.CreateTaskListControl(q,c[a],l);l[0]["data-grid-item"]=c[a];this.currentUniqueRowSuffix++;c[a].IsSelected()&&l.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);
if(null===this.listItems[n]||void 0===this.listItems[n])this.listItems[n]=l;p._cachedRows[f._guid]=l}l.attr("list-index",a);return l}},cleanupListItems:function(a){var b,c=[];if(this.processedItems)for(b in this.processedItems)c.push(this.processedItems[b]);this.totalItems=c;!0!==a&&this.ScrollBar.fadeTo(300,0)},InsertRow:function(a,c,e,d){for(a=0;a<c.items.length;a++){var f=null,n=c.items[a];void 0==n.uid&&(n.uid=this.guid());var p=this.options.GanttChart,f=b("<tr class='rq-grid-row' data-uid="+
n.uid+" style='height:"+(n.RowHeight||this.options.RowHeight)+"px;width:100%' > <td class='FlexyChartRow rq-fg-gc-row' style='height:"+(this.options.RowHeight-1)+"px;width:100%;border-top-width: 0; border-right-width: 0;'> </td> </tr>"),q=f.find("td");q[0].DataContext=n;f[0]["data-grid-item"]=n;if(this.options.UseChartVirtualization)this.Refresh(this.element,this.options.Data,e,this.options.ViewWidth);else{this.raiseRowBgAndFgTemplate(this.options,q,p,n);this.CreateTaskListControl(q,n,f);if(0==c.index){var r=
e.find("tr.rq-grid-row");0==r.length?e.append(f):r.eq(0).before(f[0])}else e.find("tr.rq-grid-row").eq(c.index+a-1).after(f[0]);p.syncVerticalScrollBar();!1==p.options.IsPrinting&&p.RenderedRows.push(n)}q.width(d);this.currentUniqueRowSuffix++;!1==p.options.IsPrinting&&n.IsSelected()&&f.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);this.ApplyTooltip(b(".rq-gc-tooltip",q))}this._enableAlternativeRowBackground()},RemoveRow:function(a,c){var d=this.options.GanttChart;if(this.options.UseChartVirtualization){var f=
this.listItems.splice(a.index,1);this.itemindex=a.index;0<this.itemindex?this.totalItems.splice(a.index-this.itemindex-1,1):this.totalItems.splice(a.index-this.itemindex,1);d=e[this.eventNamespace];for(f=0;f<a.items.length;f++){var l=a.items[f];d._cachedRows[l._guid]&&(d._cachedRows[l._guid].remove(),delete d._cachedRows[l._guid])}this.Refresh(this.element,this.options.Data,c,this.options.ViewWidth)}else for(f=0;f<a.items.length;f++){var n=c.find("tr.rq-grid-row").eq(a.index);n.remove();b(c).css("height",
parseInt(b(c).css("height"))-parseInt(b(n).css("height")));!1==d.options.IsPrinting&&(n=RQArray.prototype.indexOf.call(d.RenderedRows,l),-1!=n&&d.RenderedRows.splice(n,1))}this._enableAlternativeRowBackground()},_unBindEventsToRefresh:function(){var c=this.element.parents("div").filter(".rq-ganttChart");b(c).unbind("ganttchartrefreshui.RowsRefreshUI");c=this.options.Data;if(null!=c){for(var e=0;e<c.length;e++){var d=c[e];d&&d._refreshUIEventHandler&&d._refreshUIEventHandler.Dispose()}b.observable(this.options.Data).unbind(this.eventNamespace)}a(this);
this.$chartTableBody.empty()},_destroy:function(){this._unBindEventsToRefresh();this.element.empty();this.options.GanttChart.RenderedRows=[];this.element.data("GanttRows",null)},_setOption:function(b,c){this.widgetBaseSetOption.apply(this,arguments);"RowHeight"==b&&(a(this),this.Refresh(this.element,this.options.Data,this.table,this.options.ViewWidth))}}})(RadiantQ.Gantt.Widget,jQuery);
(function(f){function b(a,b){this._fg=b;this.DataSource=a;this._endItemXPosAdjustment=0;this._startTimeBinding=this._endTimeBinding=null;this._guid=RadiantQ.Gantt.guidGenerator();this.VerticalPositionChanged=new ObjectEvent("VerticalPositionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");b=this._fg.options;this.EndFlexyNodeData=this.StartFlexyNodeData=null;null!=b.DependencyLineTypeBinding&&this.SetupBinding(b.DependencyLineTypeBinding,"DependencyType");null!=b.DependencyLineStartItemBinding&&
this.SetupBinding(b.DependencyLineStartItemBinding,"StartItem");null!=b.DependencyLineEndItemBinding&&this.SetupBinding(b.DependencyLineEndItemBinding,"EndItem");null!=b.DependencyLineIsStartFixedShapeBinding&&this.SetupBinding(b.DependencyLineIsStartFixedShapeBinding,"IsStartFixedShape");null!=b.DependencyLineIsEndFixedShapeBinding&&this.SetupBinding(b.DependencyLineIsEndFixedShapeBinding,"IsEndFixedShape");null!=b.DependencyLineStartRowItemBinding&&this.SetupBinding(b.DependencyLineStartRowItemBinding,
"StartRowItem");null!=b.DependencyLineEndRowItemBinding&&this.SetupBinding(b.DependencyLineEndRowItemBinding,"EndRowItem");null!=b.DependencyLineStartItemPosAdjustmentBinding&&this.SetupBinding(b.DependencyLineStartItemPosAdjustmentBinding,"StartItemPosAdjustment");null!=b.DependencyLineEndItemPosAdjustmentBinding&&this.SetupBinding(b.DependencyLineEndItemPosAdjustmentBinding,"EndItemPosAdjustment");this.SetupStartTimeBinding();this.SetupEndTimeBinding();b.FlatItemsSource.CollectionChanged.subscribe(this.FlatTreeItemsSource_CollectionChanged,
this)}var d=RadiantQ.Gantt;b.prototype.SetupStartTimeBinding=function(){this._startTimeBinding&&this._startTimeBinding.Dispose();var a=null,a=this._dependencyType==d.DependencyType.FinishToStart||this._dependencyType==d.DependencyType.FinishToFinish?this._fg.options.TaskEndTimeProperty:this._fg.options.TaskStartTimeProperty;null!=this._startItem?this._startTimeBinding=this.SetupBinding({Property:a},"StartTime",this._startItem):this.StartTime_M(Date.MinValue.clone())};b.prototype.SetupEndTimeBinding=
function(){this._endTimeBinding&&this._endTimeBinding.Dispose();var a=null,a=this._dependencyType==d.DependencyType.FinishToStart||this._dependencyType==d.DependencyType.StartToStart?this._fg.options.TaskStartTimeProperty:this._fg.options.TaskEndTimeProperty;null!=this._endItem?this._endTimeBinding=this.SetupBinding({Property:a},"EndTime",this._endItem):this.EndTime_M(Date.MinValue.clone())};b.prototype.SetupBinding=function(a,b,e){return a=new Binding(e||this.DataSource,a.Path||a.Property,this,b,
a.Converter,a.Mode,e)};b.prototype.FlatTreeItemsSource_CollectionChanged=function(a,b){if(null!=b.NewItems)for(var e=0;e<b.NewItems.length;e++){var d=b.NewItems[e];d._data==this._startRowItem&&this.OnStartRowItemChanged();d._data==this._endRowItem&&this.OnEndRowItemChanged()}if(null!=b.OldItems)for(e=0;e<b.OldItems.length;e++)d=b.OldItems[e],d._data==this._startRowItem&&this.OnStartRowItemChanged(),d._data==this._endRowItem&&this.OnEndRowItemChanged()};b.prototype.DependencyTypeChanged=function(){this.SetupStartTimeBinding();
this.SetupEndTimeBinding()};b.prototype.StartRowItemChanged=function(){this.OnStartRowItemChanged()};b.prototype.OnStartRowItemChanged=function(){this.UpdateStartAndEndFlexyNodeData()};b.prototype.SetupStartIndexBinding=function(){if(null!=this._startRowItem){null==this.StartFlexyNodeData&&(this.StartFlexyNodeData=this._fg.FlatItemsSource.GetItemFromDataSource(this._startRowItem));var a=this.StartFlexyNodeData;null==a?this.StartRowIndex_M(-1):new Binding(a,"DisplayIndex",this,"StartRowIndex")}};b.prototype.EndRowItemChanged=
function(){this.OnEndRowItemChanged()};b.prototype.OnEndRowItemChanged=function(){this.UpdateStartAndEndFlexyNodeData()};b.prototype.UpdateStartAndEndFlexyNodeData=function(){if(null!=this._startRowItem){null==this.StartFlexyNodeData&&(this.StartFlexyNodeData=this._fg.FlatItemsSource.GetItemFromDataSource(this._startRowItem));var a=this.StartFlexyNodeData;null==a?this.StartRowIndex_M(-1):new Binding(a,"DisplayIndex",this,"StartRowIndex")}null!=this._endRowItem&&(null==this.EndFlexyNodeData&&(this.EndFlexyNodeData=
this._fg.FlatItemsSource.GetItemFromDataSource(this._endRowItem)),a=this.EndFlexyNodeData,null==a?this.EndRowIndex_M(-1):new Binding(a,"DisplayIndex",this,"EndRowIndex"))};b.prototype.SetupEndIndexBinding=function(){if(null!=this._endRowItem){null==this.EndFlexyNodeData&&(this.EndFlexyNodeData=this._fg.FlatItemsSource.GetItemFromDataSource(this._endRowItem));var a=this.EndFlexyNodeData;null==a?this.EndRowIndex_M(-1):new Binding(a,"DisplayIndex",this,"EndRowIndex")}};b.prototype.DisplayIndexChanged=
function(){this.OnVerticalPositionChanged()};b.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this,"")};b.prototype.VerticalPositionChanged=new ObjectEvent("VerticalPositionChanged");b.prototype.GetStartItemScheduleToPlotWith=function(a){if(null!=this.StartFlexyNodeData){var b=this.StartFlexyNodeData.HierarchicalItem.ResourceSchedule_M();if(null!=b)return b}return a};b.prototype.GetEndItemScheduleToPlotWith=function(a){if(null!=
this.EndFlexyNodeData){var b=this.EndFlexyNodeData.HierarchicalItem.ResourceSchedule_M();if(null!=b)return b}return a};b.prototype.Visibility_M=function(){return!0};b.prototype._startRowIndex=-1;b.prototype._endRowIndex=-1;b.prototype._startItem=null;b.prototype._startTime=Date.MinValue.clone();b.prototype._endItem=null;b.prototype._endTime=Date.MinValue.clone();b.prototype._dependencyType=null;b.prototype._isHighlighted=!1;b.prototype._isRelatedItemHighlighted=!1;b.prototype._isEndFixedShape=!1;
b.prototype._isStartFixedShape=!1;b.prototype._startRowItem=null;b.prototype._endRowItem=null;b.prototype._startItemPosAdjustment={X:0,Y:0};b.prototype._endItemPosAdjustment={X:0,Y:0};b.prototype.StartRowIndex_M=function(a){if(0==arguments.length)return this._startRowIndex;this._startRowIndex=a;this.DisplayIndexChanged()};b.prototype.EndRowIndex_M=function(a){if(0==arguments.length)return this._endRowIndex;this._endRowIndex=a;this.DisplayIndexChanged()};b.prototype.StartItem_M=function(a){if(0==arguments.length)return this._startItem;
this._startItem=a;this.PropertyChanged.raise(this,{PropertyName:"StartItem"});this._startTimeBinding&&this._startTimeBinding.Dispose();a&&this.SetupStartTimeBinding()};b.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;this._startTime=a;this.PropertyChanged.raise(this,{PropertyName:"StartTime"})};b.prototype.EndItem_M=function(a){if(0==arguments.length)return this._endItem;this._endItem=a;this.PropertyChanged.raise(this,{PropertyName:"EndItem"});this._endTimeBinding&&
this._endTimeBinding.Dispose();a&&this.SetupEndTimeBinding()};b.prototype.EndTime_M=function(a){if(0==arguments.length)return this._endTime;this._endTime=a;this.PropertyChanged.raise(this,{PropertyName:"EndTime"})};b.prototype.DependencyType_M=function(a){if(0==arguments.length)return this._dependencyType;this._dependencyType=a;this.DependencyTypeChanged()};b.prototype.IsHighlighted_M=function(a){if(0==arguments.length)return this._isHighlighted;this._isHighlighted=a;this.PropertyChanged.raise(this,
{PropertyName:"IsHighlighted"})};b.prototype.IsRelatedItemHighlighted_M=function(a){if(0==arguments.length)return this._isRelatedItemHighlighted;this._isRelatedItemHighlighted=a;this.PropertyChanged.raise(this,{PropertyName:"IsRelatedItemHighlighted"})};b.prototype.IsEndFixedShape_M=function(a){if(0==arguments.length)return this._isEndFixedShape;this._isEndFixedShape=a;this.PropertyChanged.raise(this,{PropertyName:"IsEndFixedShape"})};b.prototype.IsStartFixedShape_M=function(a){if(0==arguments.length)return this._isStartFixedShape;
this._isStartFixedShape=a;this.PropertyChanged.raise(this,{PropertyName:"IsStartFixedShape"})};b.prototype.StartRowItem_M=function(a){if(0==arguments.length)return this._startRowItem;this._startRowItem=a;this.StartRowItemChanged()};b.prototype.EndRowItem_M=function(a){if(0==arguments.length)return this._endRowItem;this._endRowItem=a;this.EndRowItemChanged()};b.prototype.StartItemPosAdjustment_M=function(a){if(0==arguments.length)return this._startItemPosAdjustment;this._startItemPosAdjustment=a;this.DisplayIndexChanged()};
b.prototype.EndItemPosAdjustment_M=function(a){if(0==arguments.length)return this._endItemYPosAdjustment;this._endItemYPosAdjustment=a;this.DisplayIndexChanged()};b.prototype.EndItemXPosAdjustment_M=function(a){if(0==arguments.length)return this._endItemXPosAdjustment;this._endItemXPosAdjustment=a;this.notifyChange("EndItemXPosAdjustment",a)};b.prototype.Dispose=function(){};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(b.prototype,"StartRowIndex",{get:function(){return this.StartRowIndex_M()},
set:function(a){this.StartRowIndex_M(a)}}),Object.defineProperty(b.prototype,"EndRowIndex",{get:function(){return this.EndRowIndex_M()},set:function(a){this.EndRowIndex_M(a)}}),Object.defineProperty(b.prototype,"StartItem",{get:function(){return this.StartItem_M()},set:function(a){this.StartItem_M(a)}}),Object.defineProperty(b.prototype,"StartTime",{get:function(){return this.StartTime_M()},set:function(a){this.StartTime_M(a)}}),Object.defineProperty(b.prototype,"EndItem",{get:function(){return this.EndItem_M()},
set:function(a){this.EndItem_M(a)}}),Object.defineProperty(b.prototype,"EndTime",{get:function(){return this.EndTime_M()},set:function(a){this.EndTime_M(a)}}),Object.defineProperty(b.prototype,"DependencyType",{get:function(){return this.DependencyType_M()},set:function(a){this.DependencyType_M(a)}}),Object.defineProperty(b.prototype,"IsHighlighted",{get:function(){return this.IsHighlighted_M()},set:function(a){this.IsHighlighted_M(a)}}),Object.defineProperty(b.prototype,"IsRelatedItemHighlighted",
{get:function(){return this.IsRelatedItemHighlighted_M()},set:function(a){this.IsRelatedItemHighlighted_M(a)}}),Object.defineProperty(b.prototype,"IsEndFixedShape",{get:function(){return this.IsEndFixedShape_M()},set:function(a){this.IsEndFixedShape_M(a)}}),Object.defineProperty(b.prototype,"IsStartFixedShape",{get:function(){return this.IsStartFixedShape_M()},set:function(a){this.IsStartFixedShape_M(a)}}),Object.defineProperty(b.prototype,"StartRowItem",{get:function(){return this.StartRowItem_M()},
set:function(a){this.StartRowItem_M(a)}}),Object.defineProperty(b.prototype,"EndRowItem",{get:function(){return this.EndRowItem_M()},set:function(a){this.EndRowItem_M(a)}}),Object.defineProperty(b.prototype,"StartItemPosAdjustment",{get:function(){return this.StartItemPosAdjustment_M()},set:function(a){this.StartItemPosAdjustment_M(a)}}),Object.defineProperty(b.prototype,"EndItemPosAdjustment",{get:function(){return this.EndItemPosAdjustment_M()},set:function(a){this.EndItemPosAdjustment_M(a)}}),
Object.defineProperty(b.prototype,"EndItemXPosAdjustment",{get:function(){return this.EndItemXPosAdjustment_M()},set:function(a){this.EndItemXPosAdjustment_M(a)}}));RadiantQ.FlexyGantt.FGDependencyView=b})(jQuery);
(function(f){var b=RadiantQ.FlexyGantt.FGDependencyView;(function(a){var b=function(a){function b(c,d){a.apply(this);this._dataSource=null;this._collections=[];this.HiddenList=[];this._dependencyViewsByRowId=new RadiantQ.Dictionary;this._dependencyViewsById=new RadiantQ.Dictionary;this.fg=d;this.DataSource(c)}__extends(b,a);return b}(RadiantQ.RQ_CollectionChangeNotifier);a.FGDependencyViewList=b})(RadiantQ.FlexyGantt);var d=RadiantQ.FlexyGantt;d.FGDependencyViewList.prototype.DataSource=function(a){if(0==
arguments.length)return this._dataSource;this._dataSource!=a&&(null!=this._dataSource&&this.UnwireDataSourceEvents(),this._dataSource=a,null!=this._dataSource&&this.WireDataSourceEvents(),this.UpdateList())};d.FGDependencyViewList.prototype.UnwireDataSourceEvents=function(){var a=this._dataSource;null!=a&&a.CollectionChanged&&a.CollectionChanged.unsubscribe(this.NotifyingDataSource_CollectionChanged,this)};d.FGDependencyViewList.prototype.WireDataSourceEvents=function(){var a=this._dataSource;null!=
a&&(a.CollectionChanged?a.CollectionChanged.subscribe(this.NotifyingDataSource_CollectionChanged,this):f.observable(a).bind("insert remove replaceAll",this.NotifyingDataSource_CollectionChanged.bind(this)))};d.FGDependencyViewList.prototype.Dispose=function(){this.DataSource(null)};d.FGDependencyViewList.prototype.NotifyingDataSource_CollectionChanged=function(a,b){switch(a.type){case "insert":case "Add":this.OnItemsAdded(b.items);break;case "remove":case "Remove":this.OnItemsRemoved(b.items,b.index);
break;case "replaceAll":case "Reset":this.UpdateList()}};d.FGDependencyViewList.prototype.UpdateList=function(){for(var a=0;a<this.length;a++){var b=this[a];b.Dispose();b.VerticalPositionChanged.unsubscribe(this.depView_VerticalPositionChanged,this)}this._dependencyViewsByRowId=new RadiantQ.Dictionary;this._dependencyViewsById=new RadiantQ.Dictionary;this.splice(0,this.length);if(null!=this._dataSource)for(a=0;a<this._dataSource.length;a++)this.OnAddItem(this._dataSource[a])};d.FGDependencyViewList.prototype.OnItemsAdded=
function(a){for(var b=0;b<a.length;b++)this.OnAddItem(a[b])};d.FGDependencyViewList.prototype.OnAddItem=function(a){a=new b(a,this.fg);a.VerticalPositionChanged.subscribe(this.depView_VerticalPositionChanged,this);this.push(a);var c=this._dependencyViewsById[a._guid];if(null==c||void 0==c)a.StartFlexyNodeData&&((c=this._dependencyViewsByRowId[a.StartFlexyNodeData._guid])?c.push(a):this._dependencyViewsByRowId.Add(a.StartFlexyNodeData._guid,[a])),a.EndFlexyNodeData&&a.StartFlexyNodeData!=a.EndFlexyNodeData&&
((c=this._dependencyViewsByRowId[a.EndFlexyNodeData._guid])?c.push(a):this._dependencyViewsByRowId.Add(a.EndFlexyNodeData._guid,[a])),this._dependencyViewsById.Add(a._guid,a)};d.FGDependencyViewList.prototype.OnItemsRemoved=function(a,b){for(var e=0;e<a.length;e++)this.OnRemoveItem(a[e],b+e)};d.FGDependencyViewList.prototype.OnRemoveItem=function(a,b){var e=this[b];if(null!=e){if(e.StartFlexyNodeData){var d=this._dependencyViewsByRowId[e.StartFlexyNodeData._guid],f=d.indexOf(e);1<d.length&&-1!=f?
d.splice(f,1):this._dependencyViewsByRowId.Remove(e.StartFlexyNodeData._guid)}e.EndFlexyNodeData&&e.StartFlexyNodeData!=e.EndFlexyNodeData&&(d=this._dependencyViewsByRowId[e.EndFlexyNodeData._guid],f=d.indexOf(e),1<d.length&&-1!=f?d.splice(f,1):this._dependencyViewsByRowId.Remove(e.EndFlexyNodeData._guid));this._dependencyViewsById.Remove(e._guid);this.splice(b,1);e.VerticalPositionChanged.unsubscribe(this.depView_VerticalPositionChanged,this)}};d.FGDependencyViewList.prototype.depView_VerticalPositionChanged=
function(a,b){if(-1==a.StartRowIndex&&-1==a.EndRowIndex){this.HiddenList.push(a);var e=this.indexOf(a);RQArray.prototype.splice.call(this,e,1)}else e=this.HiddenList.indexOf(a),-1!=e&&(this.HiddenList.splice(e,1),RQArray.prototype.push.call(this,a))}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.timespinner={options:{step:1,page:60,change:null,start:new Date,minuteincrement:30,current:null},TimeFormat:/^([0][0-9]|[1][0-2]|\d)(((:[0-5]\d)(\s?[aApP][mM]))|(\s?[aApP][mM])|$)$/,TimeFormat24Hrs:/^([0-1]?[0-9]|2[0-3])(:[0-5][0-9])?$/,_parse:function(b){if("string"===typeof b&&Number(b)===b){b=this.GetHourAndMinute(b);var d=this.options.start;return new Date(d.getFullYear(),d.getMonth(),d.getDate(),+b.hour,+b.minute,0,0)}return this.options.start},disable:function(b){b?
(this.element.prop("disabled",b),this.uiSpinner.addClass("disableStyle"),f(".ui-spinner-button",this.element.parent()).css("display","none")):(this.element.prop("disabled",b),this.uiSpinner.removeClass("disableStyle"),f(".ui-spinner-button",this.element.parent()).css("display","block"))},_format:function(b){var d=Date.CultureInfo.formatPatterns.shortTime;this.options.current=b.toString(d);return(new Date(b)).toString(d)},_increment:function(b,d){this.options.start=b.addMinutes(this.options.minuteincrement*
d);return this.options.start},_setOption:function(b,d){f.Widget.prototype._setOption.apply(this,arguments)},_value:function(b,d){var a;""!==b&&(a=this._parse(b),null!==a&&(b=this._format(a)));this.element.val(b);this._refresh()},getTime:function(){return this.element.val().toString()},getRoundDate:function(b){var d=this.element.val(),a=this.GetHourAndMinute(d);!1==this.TimeFormat.test(d)&&!1==this.TimeFormat24Hrs.test(d)&&(a=this.GetHourAndMinute(this.options.current));return new Date(b.getFullYear(),
b.getMonth(),b.getDate(),+a.hour,+a.minute,this.options.start.getSeconds(),0)},setTime:function(b){this.options.start=null!=b?new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),0):new Date(0,0,0,0,0,0,0);this._refresh();this._value(b)},_spin:function(b,d){var a=this.value()||0;this.counter||(this.counter=1);"string"===typeof a||-1==b&&0==a.totalMilliseconds||(a=this._increment(a,b));this.spinning&&!1===this._trigger("spin",d,{value:a})||(this._value(a,!0),
this.counter++)},_events:{keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault();this.element.val()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.options.current=this.element.val()},blur:function(b){this._refresh();this.uiSpinner.removeClass("ui-state-active");var d=this.element.val(),a=!1;if(!0==this.TimeFormat.test(d)||!0==this.TimeFormat24Hrs.test(d)){var a=!0,c=this.GetHourAndMinute(d),e=this.options.start;this.options.start=new Date(e.getFullYear(),
e.getMonth(),e.getDate(),+c.hour,+c.minute,0,0)}!1==a&&this.element.val(this.options.current);this.options.current!==d&&this._trigger("change",b)}},GetHourAndMinute:function(b){var d=b.split(":"),a=parseInt(d[0],10),c=0;b=-1!=b.toLowerCase().indexOf("pm")?"pm":"am";2==d.length&&(c=parseInt(d[1]));return b&&"pm"==b&&12!=a?{hour:a+12,minute:c}:{hour:a,minute:c}},_destroy:function(){f.ui.spinner.prototype._destroy.apply(this,arguments);this._off(this._events)}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.DurationPicker={options:{minutes:30},TimeSapanWithDay:/^(\d*.\d{2}:\d{2}:\d{2})$/,TimeSapanWithoutday:/^(\d{2}:\d{2}:\d{2})$/,_create:function(){this.element.addClass("radiantq.DurationPicker");f.ui.spinner.prototype._create.apply(this,arguments)},_parse:function(b){return"string"===typeof b&&(this.TimeSapanWithDay.test(b)||this.TimeSapanWithoutday.test(b))?RQTimeSpan.parse(b):b},_increment:function(b,d){var a=RQTimeSpan.Zero_M();0==b&&(b=a);var c=b.addMinutes(this.options.minutes*
d);return c<a?a:c},_value:function(b,d){var a;""!==b&&(a=this._parse(b),null!==a&&(b=this._format(a)));this.element.val(b);this._refresh()},GetDuration:function(){return this._parse(this.element.val())},_spin:function(b,d){var a=this.value()||0;this.counter||(this.counter=1);"string"===typeof a||-1==b&&0==a.totalMilliseconds_M()||(a=this._increment(a,b));this.spinning&&!1===this._trigger("spin",d,{value:a})||(this._value(a,!0),this.counter++)},disable:function(b){b?(this.element.prop("disabled",b),
this.buttons.button("disable")):(this.element.prop("disabled",b),this.buttons.button("enable"))},_events:{click:function(b){""==this.element.val()&&this.element.val("00:00:00")},keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.previous=this.element.val()},blur:function(b){if(this.cancelBlur)delete this.cancelBlur;else{this._refresh();this.uiSpinner.removeClass("ui-state-active");var d=this.element.val(),
a=!1;!0==this.TimeSapanWithDay.test(d)&&!1==this.TimeSapanWithoutday.test(d)?a=!0:!1==this.TimeSapanWithDay.test(d)&&!0==this.TimeSapanWithoutday.test(d)&&(a=!0);!1==a&&this.element.val(this.previous);this.previous!==d&&this._trigger("change",b)}},mousewheel:function(b,d){if(d){if(!this.spinning&&!this._start(b))return!1;this._spin((0<d?1:-1)*this.options.step,b);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(b)},100);b.preventDefault()}},
"mousedown .ui-spinner-button":function(b){function d(){this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=a,this._delay(function(){this.previous=a}))}var a;a=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();d.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;d.call(this)});!1!==this._start(b)&&this._repeat(null,f(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop",
"mouseenter .ui-spinner-button":function(b){if(f(b.currentTarget).hasClass("ui-state-active")){if(!1===this._start(b))return!1;this._repeat(null,f(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_format:function(b){return b.toString()}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.DateTimePicker={options:{setdate:null,dateformat:"mm-dd-yy",minuteincrement:30,Visibility:"block"},wrapper:null,timePicker:null,activeElement:function(){try{return document.activeElement}catch(b){return document.documentElement.activeElement}},isInSameObject:function(b){b=b||f(this.activeElement());var d=b.parents(".datetimepicker");return d.length&&d[0]==this.wrapper[0]?!0:(d=this.element.data("datepicker"))&&b.closest(".ui-datepicker")[0]==d.dpDiv[0]?!0:!1},changeTime:null,
_create:function(){var b=this;this.element.data("DateTimePicker",this);var d=null,a=0;this.element.addClass("datetimepicker");this.wrapper=f('<div class="datetimepicker wrapper" style="height:inherit;width:inherit"></div>');this.timePicker=f('<input id="time" class="spinner" value="00:00 AM"/>');this.element.wrap(this.wrapper);this.wrapper=this.element.parent();this.wrapper.append(this.timePicker);var c=this.timePicker,e=this.element.attr("datepicker-dateformat")||this.element.attr("format");void 0==
e&&(e=this.options.dateformat);this.element.focusin(function(){b.docClickProxy||(b.docClickProxy=f.proxy(b._checkExternalClick,b),f(document).bind("mousedown",b.docClickProxy))});this.element.datepicker({dateFormat:e,onSelect:function(){d=a=f(this).datepicker("getDate");b.timePicker.focus()}}).on("change",function(a){RegExp(/\b\d{1,2}[\/-]\d{1,2}[\/-]\d{4}\b/).test(this.value)?b._trigger("onBlur"):(f(this).datepicker("setDate",new Date(d)),a.preventDefault())});this.timePicker.bind("blur.datetimepicker",
function(){b.element.is(":focus")||b._trigger("onBlur")}).focusin(function(){b.element.datepicker("hide")});b=this;c.timespinner({start:new Date(0,0,0,0,0,0,0),minuteincrement:b.options.minuteincrement});this.RefreshWidthandHeight()},_checkExternalClick:function(b){f.datepicker._curInst&&!1==this.isInSameObject(f(b.target))&&(this.element.datepicker("hide"),this._trigger("onBlur"),this.docClickProxy&&(f(document).unbind("mousedown",this.docClickProxy),this.docClickProxy=null))},getDate:function(){var b=
this.element.datepicker("getDate");return null!=b?this.timePicker.timespinner("getRoundDate",b):b},setDate:function(b){if(null!=b){var d=this.element.DateTimePicker("getDate");this.element.datepicker("setDate",new Date(b));this.timePicker.timespinner("setTime",new Date(b));null!=d?b.equals(d)||this._trigger("onBlur"):this._trigger("onBlur")}else this.element.datepicker("setDate",b),this.timePicker.timespinner("setTime",b)},disable:function(b){this.element.prop("disabled",b);this.timePicker.timespinner("disable",
b)},visibility:function(b){this.wrapper.css("display",b);this.options.Visibility=b},widget:function(){return this.element.parent()},RefreshWidthandHeight:function(){var b=this.element,d=this.timePicker.timespinner("widget"),a=d.find("input");b.css({margin:"0px",width:"46%"});d.css({"vertical-align":"top",width:"46%"});a.css({width:"inherit",margin:"2px",width:"80%","vertical-align":"top"})},_destroy:function(){this.element.datepicker("hide");f.Widget.prototype._destroy.apply(this,arguments);f(document).unbind("mousedown",
this.res);this.timePicker.unbind("blur.datetimepicker");this.element.unwrap();this.timePicker.remove()}}})(jQuery);
(function(f){RadiantQ.Gantt.Widget.ResourcePicker={version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},position:{my:"left top",at:"left bottom",collision:"none"},SelectedResources:null,delay:0,source:null,minLength:0,dropDownMinHeight:150,dropDownHeight:"auto",disabled:!1},overLay:null,_create:function(){function b(a,b){0<=a&&a<=$menuElemets.length-1?($menuElemets.removeClass("item-focus"),f($menuElemets[a]).addClass("item-focus"),
d.menu._scrollIntoView(f($menuElemets[a]))):!1==b?d.menu._scrollIntoView(f($menuElemets[$menuElemets.length-1])):d.menu._scrollIntoView(f($menuElemets[0]))}var d=this;d.uiGridTableBody=f(d.element).parents(".ui-grid-body-table tbody");d.VWGrid=d.uiGridTableBody.data("VWGrid");d.resourceContainer=f(d.element).parents(".editor");d.element.focus();d.element.attr("readonly",!0);d.changedItems=[];d.selectedItems=[];d._draw();d._on(this._events);d.selectedItems=[];var a=f("<ul class='multi-select-menu' style='overflow:auto'>").addClass("ui-autocomplete ui-front").appendTo(d._appendTo()).menu({role:null}).hide();
d.menu=a.data("uiMenu");d.menu||(d.menu=a.data("ui-menu"));d.menu._scrollIntoView=function(a){if(a.length){var b,g,h;d.menu._hasScroll()&&(b=parseFloat(f.css(d.menu.activeMenu[0],"borderTopWidth"))||0,g=parseFloat(f.css(d.menu.activeMenu[0],"paddingTop"))||0,b=a.offset().top-d.menu.activeMenu.offset().top-b-g,g=this.activeMenu.scrollTop(),h=this.activeMenu.height(),a=a.height(),0>b?d.menu.activeMenu.scrollTop(g+b):b+a>h&&d.menu.activeMenu.scrollTop(g+b-h+a))}};d.element.data("ResourcePicker",this);
d.element.addClass("ResourcePicker");d.updateSelectedItem();d.overLay=f('<div class="overlay" ></div>');f(".ui-spinner-button",d.element);d.resourceContainer.bind("keydown.keyEvents",function(a){var b=a.keyCode||a.which;if(13==a.keyCode){var b=d.element.parents("td"),g=d.wasOpen;d.hideMenu();g?(a.preventDefault(),a.stopPropagation()):d.close();b.mouseup()}else 9==a.keyCode?(b=d.element.parents("td"),g=b.parent(),a=g.parent(),b=b[0].cellIndex,g=g[0].rowIndex,d.close(),g=f("tr",a).eq(g),b=f("td:not(.rq-hierarchy-cell)",
g).eq(b),b.mouseup(function(a){d.VWGrid.prepareEdit(a)}).mouseup()):32==b&&(a.preventDefault(),a.stopPropagation(),f(".selectBox",f($menuElemets[d.selectedIndex])).click())});d.uiGridTableBody.bind("keydown.keyEvents",function(a){var e=a.keyCode||a.which;40==e?(a.preventDefault(),a.stopPropagation(),d.wasOpen?(d.selectedIndex++,d.selectedIndex>$menuElemets.length-1&&(d.selectedIndex=$menuElemets.length-1),b(d.selectedIndex,!1)):(d._trigger("open"),d.open())):38==e?(a.preventDefault(),a.stopPropagation(),
d.selectedIndex--,0>d.selectedIndex&&(d.selectedIndex=0),b(d.selectedIndex,!0)):32==e?(a.preventDefault(),a.stopPropagation(),f(".selectBox",f($menuElemets[d.selectedIndex])).click()):9==e&&d.hideMenu()});d._trigger("open");d._trigger("close")},setMenuHeight:function(){var b=this.options.dropDownHeight,d=this.options.dropDownMinHeight;this.menu.element.height()>=d&&(b=d);this.menu.element.css("height",b)},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?f(b):this.document.find(b).eq(0));
b&&b[0]||(b=this.element.closest(".ui-front"));b.length||(b=this.document[0].body);return b},selectedItems:null,changedItems:null,createAutoComplet:function(){this.updateSelectedItem()},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},guid:function(){var b="",d,a;for(d=0;32>d;d++){a=16*Math.random()|0;if(8==d||12==d||16==d||20==d)b+="-";b+=(12==d?4:16==d?a&3|8:a).toString(16)}return b},renderCondent:function(b){var d="",a=
this.guid;this.guids=[];for(var c=this.options.source,e=0;e<c.length;e++){var g=c[e],f=a();this.guids[f]=g;d+="<div style='height:20px' class='rq-grid-resourcepicker-item' aria-label ='"+g.toString()+"'><span><input class='selectBox' id='"+f+"' data-guid='"+f+"' type='checkbox' "+(-1!=RQArray.prototype.indexOf.call(this.selectedItems,g)?"checked":"")+" /> <label for='"+f+"'>"+g.toString()+"</label></span></div>"}b[0].innerHTML=d},guids:[],$menuElemets:null,selectedIndex:-1,open:function(){var b=this,
d=b.menu.element.empty();b.renderCondent(d);b.menu.refresh();b.setMenuHeight();b.changedItems=[];d.show();this._resizeMenu();d.position(f.extend({of:this.element},this.options.position));f(".multi-select-menu").height()+f("input.ResourcePicker").offset().top>f("#gantt_container").height()-50&&(d=f("input.ResourcePicker").offset().top-(f(".multi-select-menu").height()+3),f(".multi-select-menu").css({top:d+"px"}));b.wasOpen=!0;f("body").append(this.overLay);this.triggerCloseAndChangeCallback=f.proxy(this.triggerCloseAndChange,
this);this.overLay.bind("mousedown",this.triggerCloseAndChangeCallback);$menuElemets=f(".rq-grid-resourcepicker-item",b.menu.element);$menuElemets.click(function(){$menuElemets.removeClass("item-focus");b.selectedIndex=f(this).index();f($menuElemets[b.selectedIndex]).addClass("item-focus")});b.menu.element.find(".selectBox").bind("click",function(a){if(!0==b.wasOpen&&(a=f(a.target),a.hasClass("selectBox"))){var c=a.data("guid"),c=b.guids[c],e=RQArray.prototype.indexOf.call(b.selectedItems,c);!0==
a[0].checked&&-1==e?(a=RQArray.prototype.indexOf.call(b.changedItems,c),b.selectedItems.push(c),-1!=a?b.changedItems.splice(a,1):b.changedItems.push(c)):-1!=e&&(e=RQArray.prototype.indexOf.call(b.selectedItems,c),a=RQArray.prototype.indexOf.call(b.changedItems,c),b.selectedItems.splice(e,1),-1!=a?b.changedItems.splice(a,1):b.changedItems.push(c));b.updateDispalyText()}})},IsChanged:function(){return 0<this.changedItems.length},close:function(){this.hideMenu();this._trigger("destroy");f(document).unbind(".keyEvents");
this.selectedIndex=-1},hideMenu:function(){this.menu.element.empty();this.menu.element.hide();this.wasOpen=!1;this.overLay.unbind("mousedown",this.triggerCloseAndChangeCallback);this.overLay.remove();this.selectedIndex=-1;this._trigger("close");this.element.focus()},wasOpen:null,disable:function(b){b?this.element.prop("disabled",!1):this.element.prop("disabled",!0)},updateDispalyText:function(){for(var b=this.element,d=this.selectedItems.sort(),a="",c=0;c<d.length;c++)a+=d[c].toString()+",";b.val(a.replace(/\,$/,
""))},updateSelectedItem:function(){var b=this.options.SelectedResources;if(null!=b)for(var d=0;d<b.length;d++)this.selectedItems.push(b[d]);this.updateDispalyText()},selected:function(b,d){var a=b.data,c=f(this).closest(".rq-grid-resourcepicker-item").data("item"),e=-1,g=-1;!0==this.checked?(g=RQArray.prototype.indexOf.call(a.changedItems,c),a.selectedItems.push(c),-1!=g?a.changedItems.splice(g,1):a.changedItems.push(c)):(e=RQArray.prototype.indexOf.call(b.data.selectedItems,c),g=RQArray.prototype.indexOf.call(b.data.changedItems,
c),b.data.selectedItems.splice(e,1),-1!=g?b.data.changedItems.splice(g,1):b.data.changedItems.push(c));b.data.updateDispalyText()},_events:{"mousedown .ui-spinner-button":function(b){this.wasOpen=this.overLay.is(":visible")},"click .ui-spinner-button":function(){this.wasOpen?this.close():this.open()}},_draw:function(){var b=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(f(this._buttonHtml()).css("height","100%"));this.element.attr("role",
"spinbutton");this.buttons=b.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.options.disabled&&this.disable()},triggerCloseAndChange:function(b){this.close()},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_setOption:function(b,d){f.Widget.prototype._setOption.apply(this,
arguments);switch(b){case "SelectedResources":this.updateSelectedItem();break;case "source":this.changedItems=[],this.selectedItems=[]}},_destroy:function(){this.resourceContainer.unbind("keydown.keyEvents");this.uiGridTableBody.unbind("keydown.keyEvents");this.overLay.unbind("mousedown",this.triggerCloseAndChangeCallback);f(document).unbind(".keyEvents");this.overLay.remove();this.triggerCloseAndChangeCallback&&(f(this.document[0].documentElement).unbind("mousedown",this.triggerCloseAndChangeCallback),
this.triggerCloseAndChangeCallback=null);this.menu.element.remove();this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},widget:function(){return this.uiSpinner}}})(jQuery);
(function(f){var b,d;d=b=!1;RadiantQ.Gantt.RowDragDropTracker=function(a){function c(a,b){H.options.CanUserReorderRows&&!H._isReadOnly&&0!=D.element.width()&&0!=D.element.height()&&(A||0==H.SelectedItems.length?null!=_timer&&clearTimeout(_timer):(null!=_timer&&clearTimeout(_timer),_timer=setTimeout(function(){O||(O=!0,e());if(null!=B){f(B).unbind(".rowHeaderMouseEvents");if(H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragElement){var a=f(B).find(".row-dragger");a.length&&(a.unbind("mousedown.handleCueMouseDown"),
a.unbind("mouseup.handleCueMouseDown"))}H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow&&(f(B).unbind("mousedown.handleCueMouseDown"),f(B).unbind("mouseup.handleCueMouseDown"))}H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow&&(f(B).unbind(".handleCueMouseDown"),f(document).unbind(".handleCueMouseDown"),f(B).unbind(".handleCueMouseDown"));if(D.GetRowFromData(H.SelectedItems[0])&&(a=D.GetRowFromData(H.SelectedItems[0]))){H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&
(B=f("td.rq-grid-column-rdnd:not(.rq-column-width-readonly)",a),0==B.length&&(B=f(a)[0].firstChild),f(B).bind("mouseenter.rowHeaderMouseEvents",function(){!1!=_isRowsDraggable&&!0!=H.PreventDefaultFns&&(null!=_topSelectedIndex&&void 0!=_topSelectedIndex?A||w.css("display","block"):w.css("display","block"))}).bind("mouseleave.rowHeaderMouseEvents",function(){w.css("display","none")}).dblclick(function(a){a.preventDefault();a.stopPropagation()}));if(H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow||
H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragElement)B=a;0<H.SelectedItems.length&&h(null,H.SelectedItems)}}.bind(this),0)))}function e(){w=f('<div class="handleCue rq-dnd-handleCue"></div>');t=f('<div class="avoidCue rq-dnd-avoidCue" style="align:center; pointer-events:none;"></div>');$gridBody=f(".ui-grid-body",H.element);$lockedGridBody=f(".ui-body-frozen-div",H.element);v=f('<div style="display:none; pointer-events:none; width:100%; border:1.2px solid black; position:absolute;"></div>');
z=v.clone();$lockedGridBody.prepend(v);$gridBody.prepend(z);$gridBody.append(t);v=v.add(z);$lockedGridBody.append(t)}function g(a,b){if(!0==b)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var c=a.originalEvent.touches[0].pageX,e=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)c=a.originalEvent.touches[0].clientX,e=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)c=a.pageX,e=a.pageY;else if(a.clientX||
a.clientY)c=a.clientX,e=a.clientY;return{x:c,y:e}}function h(a,b){if(b&&!A){f(".ui-grid-body",N.element);G=b;var c=D.GetRowFromData(G[0]);_topSelectedIndex=N.options.UseVirtualization?G[0].DisplayIndex_M?G[0].DisplayIndex_M():G[0].DisplayIndex():c[0].rowIndex;-1!=_topSelectedIndex&&((_isRowsDraggable=n(_topSelectedIndex))&&_isRowHeaderClicked?w.css("display","block"):w.css("display","none"));$itempeer=V=c;H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragRowHeader&&(f(B).append(w),w.unbind(".handleCueMouseDown"),
w.bind("mousedown.handleCueMouseDown",function(a){k(a)}),w.bind("touchstart.handleCueMouseDown",function(a){k(a)}));if(H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragElement){var e=0,d=function(a){4<=Math.abs(g(a,!1).y-e)&&(f(document).unbind("mousemove.handleCueMouseDown"),m(a))},h=f(B).find(".row-dragger");h.length&&(h.bind("mousedown.handleCueMouseDown",function(a){e=g(a,!1).y;f(document).bind("mousemove.handleCueMouseDown",d)}),h.bind("mouseup.handleCueMouseDown",function(a){f(document).unbind(".handleCueMouseDown");
h.unbind(".handleCueMouseDown")}))}H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow&&(e=0,d=function(a){4<=Math.abs(g(a,!1).y-e)&&(f(document).unbind("mousemove.handleCueMouseDown"),m(a))},f(B).bind("mousedown.handleCueMouseDown",function(a){e=g(a,!1).y;f(document).bind("mousemove.handleCueMouseDown",d)}),f(B).bind("mouseup.handleCueMouseDown",function(a){f(document).unbind(".handleCueMouseDown");f(B).unbind(".handleCueMouseDown")}))}}function m(a){a=$itempeer.position().top;
v.css("top",a);b=d=_isRowsDraggable=A=!0;S=N.$ganttWrapper.data("GanttRowselectable");p();I.bind("mouseenter.RowDragDropTracker",function(a){_isRowsDraggable&&(b=!0,t.css("display","none"),y?v.css("display","none"):v.css("display","block"))});I.bind("mouseleave.RowDragDropTracker",function(a){if(_isRowsDraggable){b=!1;var c=f(a.target).closest("tr.rq-grid-row"),e=I[0].offsetTop+I.height();a.pageY>e||0==c.length?t.css({top:e}):t.css({top:c.position().top+4});v.css("display","none");t.css("display",
"block")}});I.bind("mousemove.RowDragDropTracker",function(a){l(a)});I.bind("touchmove.RowDragDropTracker",function(a){b=P=!0;var c;if(void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches)c=f(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr");c.hasClass("rq-grid-row")?l(a):(b=!1,t.css({top:V.position().top+4}),v.css("display","none"),t.css("display","block"));a.preventDefault();a.stopPropagation()});
f(document).unbind(".RowDragDropTracker");f(document).bind("mouseup.RowDragDropTracker",function(a){A=!1;P=!0;q()});f(document).bind("touchend.RowDragDropTracker",function(a){window.console&&console.log("end event");A=!1;P=!0;q();b=!1});f(document).bind("keyup.RowDragDropTracker",function(a){P=!0;27==a.keyCode&&(s(),x=!1)});f(document).bind("keydown.RowDragDropTracker",function(a){27==a.keyCode&&(y=x=!0)})}function k(a){a=$itempeer.position().top;v.css("top",a);b=d=_isRowsDraggable=A=!0;S=N.$ganttWrapper.data("GanttRowselectable");
p();I.bind("mouseenter.RowDragDropTracker",function(a){_isRowsDraggable&&(b=!0,t.css("display","none"),y?v.css("display","none"):v.css("display","block"))});I.bind("mouseleave.RowDragDropTracker",function(a){if(_isRowsDraggable){b=!1;var c=f(a.target).closest("tr.rq-grid-row"),e=I[0].offsetTop+I.height();a.pageY>e||0==c.length?t.css({top:e}):t.css({top:c.position().top+4});v.css("display","none");t.css("display","block")}});I.bind("mousemove.RowDragDropTracker",function(a){l(a)});I.bind("touchmove.RowDragDropTracker",
function(a){b=P=!0;var c;if(void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches)c=f(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr");c.hasClass("rq-grid-row")?l(a):(b=!1,t.css({top:V.position().top+4}),v.css("display","none"),t.css("display","block"));a.preventDefault();a.stopPropagation()});f(document).unbind(".RowDragDropTracker");f(document).bind("mouseup.RowDragDropTracker",function(a){A=!1;P=
!0;q()});f(document).bind("touchend.RowDragDropTracker",function(a){window.console&&console.log("end event");A=!1;P=!0;q();b=!1});f(document).bind("keyup.RowDragDropTracker",function(a){P=!0;27==a.keyCode&&(s(),x=!1)});f(document).bind("keydown.RowDragDropTracker",function(a){27==a.keyCode&&(y=x=!0)})}function l(a){if(A&&_isRowsDraggable){b=!0;var c=f(".ui-grid-body",N.element);c.prev();var e=c.offset().top,g=N.options.RowHeight;(a.pageY||a.originalEvent.changedTouches[0].pageY)<e+g/2&&b?(c=$gridBody[0].scrollHeight,
e=$gridBody[0].scrollTop,P=!1,u(-10,e,c)):(a.pageY||a.originalEvent.changedTouches[0].pageY)>e+c[0].clientHeight-g&&b?(c=$gridBody[0].scrollHeight,e=$gridBody[0].scrollTop,P=!1,u(20,e,c)):P=!0;L=void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches?V=f(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr.rq-grid-row"):f(a.target).closest("tr.rq-grid-row");null==L||void 0==L||0==L.length?d=!1:(c=D.GetDataFromRow(L[0]),
_destIndex=N.options.UseVirtualization&&null!=c?c.DisplayIndex_M?c.DisplayIndex_M():c.DisplayIndex():L[0].rowIndex,d=!0);_inChildRows=!1;c=_destIndex-_topSelectedIndex;ContainsValueInArray(N.SelectedItems,null!=N.ActivityViews&&void 0!=N.ActivityViews?N.ActivityViews[_destIndex]:N.FlatHierarchicalItemsList[_destIndex].corrFlexyNodeData)?_inChildRows=!0:c==N.SelectedItems.length&&(_enableDropAsChild&&C?_inChildRows=!0:_enableDropAsChild||M&&_isInLastRow||(_inChildRows=!0));null!=L&&void 0!=L&&0!=L.length&&
(c=N.options.RowHeight,e=L.position().top,void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches?(g=f(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr.rq-grid-row"),a=a.originalEvent.changedTouches[0].pageY-g.offset().top):a=void 0==a.offsetY?a.pageY-f(a.target).offset().top:a.offsetY,g=c/4,C=a<=g,M=a>=3*g,F=a>g&&a<3*g,Q.CanDrop(_destIndex,_enableDropAsChild&&F)||_destIndex==_topSelectedIndex||_inChildRows?
(y=!0,H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragElement||H.options.RowDragBehavior==RadiantQ.Gantt.RowDragBehavior.DragEntireRow?t.css({top:L.position().top-8,left:L.width()/2}):t.css({top:L.position().top+4}),v.css("display","none"),t.css("display","block"),w.css("display","none")):(y=!1,v.css("display","block"),t.css("display","none")),a=L.next(),_isInLastRow=!1,_enableDropAsChild?F?r(e,"1.5px",c+"px"):C?r(e,"1px","0px"):0<a.length?r(a.position().top,"1px","0px"):(_isInLastRow=
!0,r(L.position().top+c,"1px","0px")):0<a.length?r(L.position().top,"1px","0px"):M?(_isInLastRow=!0,r(L.position().top+c,"1px","0px")):0==a.length&&(_isInLastRow=!0,r(L.position().top,"1px","0px")))}}function n(a){a=Q.CanBeginDrag(a);!1==a?w.addClass("rq-prevent-dnd-handleCue"):w.removeClass("rq-prevent-dnd-handleCue");return a}function p(){Q.OnBeforeDragStart(_topSelectedIndex,G.length);!1==n(_topSelectedIndex)?(t.css("display","none"),v.css("display","none"),w.css("display","none"),A=_isRowsDraggable=
d=!1):G=S.selectedItems.slice(0)}function q(){if(null!=G&&null!=L){if(s()||!_isRowsDraggable)return;var a=D.GetDataFromRow(L[0]);if(b&&d){_destIndex=a.DisplayIndex_M?a.DisplayIndex_M():a.DisplayIndex();M&&_enableDropAsChild&&(_destIndex+=1);_isInLastRow&&(_destIndex=null!=N.ActivityViews&&void 0!=N.ActivityViews?N.ActivityViews.length-1:N.FlatHierarchicalItemsList.length-1);_isInLastRow&&M&&(_destIndex=-1);var c=!1;if(F&&_enableDropAsChild)a:{var a=H.options.FlatItemsSource[_topSelectedIndex],e=H.options.FlatItemsSource[_destIndex];
if("ProjectGantt"==H.GanttType&&(parentActivityIndex=null!=a._parentView&&void 0!=a._parentView?a._parentView._activity._displayIndex:a._activity._displayIndex,e.activity._displayIndex==parentActivityIndex)){c=!0;break a}c=!1}F&&_topSelectedIndex==_destIndex&&_enableDropAsChild&&(c=!0);var a=G.length,e=G.slice(0),g=Q.OnDrop(_topSelectedIndex,a,_destIndex,_enableDropAsChild&&F,_isInLastRow,M);if(!c&&!y&&g&&0<=_topSelectedIndex&&!_inChildRows){_isInLastRow&&M&&(_destIndex=null!=N.ActivityViews&&void 0!=
N.ActivityViews?N.ActivityViews.length:N.FlatHierarchicalItemsList.length);!1!=_enableDropAsChild&&F?Q.DoInsertRowsAsChild(_topSelectedIndex,a,_destIndex):Q.DoMoveRows(_topSelectedIndex,a,_destIndex-1);for(c=0;c<a;c++){g=e[c];if(Q.options.IsProjectGantt)g=e[c];else for(var h=H.options.FlatItemsSource,k=0;k<h.length;k++)if(h[k]._data==g._data){g=h[k];break}g&&!1==ContainsValueInArray(S.selectedItems,g)&&S.selectedItems.add(g)}Q.OnDropped(G)}}t.css("display","none");v.css("display","none");w.css("display",
"none");G=[];L=null}d=_isRowHeaderClicked=!1;f(document).unbind(".RowDragDropTracker");I.unbind(".RowDragDropTracker")}function r(a,b,c){v.css({top:a});v.height(c);v.css("border-width",b)}function s(){return x?(y=!0,A=d=!1,w.css("display","none"),t.css("display","none"),v.css("display","none"),I.unbind(".RowDragDropTracker"),f(document).unbind(".RowDragDropTracker"),!0):!1}function u(a,b,c){$gridBody.animate({scrollTop:b+a},1,"swing",function(){if(!1==P){var e=b+a;0>=e&&(P=!0,e=0);e>=c&&(P=!0);u(a,
b+a,c)}})}var w=null,t=null,v=null,z=null,x=!1,A=!1,y=!1,C=!1,M=!1,B=null,F=!1,D=a,H=D.options.Parent,N=H,O=!1,L=null,Q=D,S=null,G=[],I=D.uiGridBodyTable.add(D.frozenTable);_enableDropAsChild=H.options.EnableDropAsChild;_destIndex=_topSelectedIndex=null;_isRowHeaderClicked=_inChildRows=_isInLastRow=!1;_isRowsDraggable=!0;_timer=null;this.Source=D;var V=null;this.Dispose=function(){d=!1;y=!0;L=D=v=t=w=null;b=!1;_topSelectedIndex=null;A=!1;P=!0;null==B&&void 0==B||f(B).unbind(".rowHeaderMouseEvents");
null==w&&void 0==w||w.unbind(".handleCueMouseDown");null==H&&void 0==H||H.element.unbind("ganttcontrolselectionchanged.RowDragDropTracker");if(null!=I||void 0!=I)I.unbind(".popupHandler"),I.unbind(".RowDragDropTracker");f(document).unbind(".RowDragDropTracker")};I.unbind(".popupHandler");I.bind("mousedown.popupHandler",function(a){!1==A&&_rowHeaderMouseDown(a)});I.bind("touchstart.popupHandler",function(a){!1==A&&_rowHeaderMouseDown(a)});_rowHeaderMouseDown=function(a){f(a.target).hasClass("rq-grid-column-rdnd")?
(O||(O=!0,e()),_isRowHeaderClicked=!0):_isRowHeaderClicked=!1};H.element.unbind(".RowDragDropTracker");H.element.bind("ganttcontrolselectionchanged.RowDragDropTracker",function(a,b){c(a,b)});H.element.bind("flexyganttselectionchanged.RowDragDropTracker",function(a,b){c(a,b)});var P=!1};RadiantQ.Gantt.RowDragDropTracker.IsDragStarted_M=function(){return d};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.RowDragDropTracker,"IsDragStarted",{get:function(){return d}})})(jQuery);
RadiantQ.Gantt.themes=function(){this.defaultClass="ui-state-default";this.headerClass="ui-widget-header";this.hoveringClass="ui-state-hover";this.selectionClass="ui-state-active";this.highlightingClass="ui-state-highlight";this.chartBackground=""};window.radiantQclasses=new RadiantQ.Gantt.themes;
(function(f){f.widget("radiantq.ScaleRendererBase",RadiantQ.Gantt.Widget.ScaleRendererBase);f.widget("radiantq.TimeSpanHeader",f.radiantq.ScaleRendererBase,RadiantQ.Gantt.Widget.TimeSpanHeader);f.widget("radiantq.GanttChartBackground",RadiantQ.Gantt.Widget.GanttChartBackground);f.widget("radiantq.GanttChartCustomRangeBackground",RadiantQ.Gantt.Widget.GanttChartCustomRangeBackground);f.widget("radiantq.SpecialLines",f.radiantq.ScaleRendererBase,RadiantQ.Gantt.Widget.SpecialLines);f.widget("radiantq.ScalePanelRendererBase",
RadiantQ.Gantt.Widget.ScalePanelRendererBase);f.widget("radiantq.TimeSpanHeaders",f.radiantq.ScalePanelRendererBase,RadiantQ.Gantt.Widget.TimeSpanHeaders);f.widget("radiantq.taskbar",RadiantQ.Gantt.Widget.taskbar);f.widget("radiantq.TasksListControl",RadiantQ.Gantt.Widget.TasksListControl);f.widget("radiantq.GanttChart",RadiantQ.Gantt.Widget.GanttChart);f.widget("radiantq.GanttBase",RadiantQ.Gantt.Widget.GanttBase);f.widget("radiantq.GanttControl",f.radiantq.GanttBase,RadiantQ.Gantt.Widget.GanttControl);
f.widget("radiantq.FlexyGantt",f.radiantq.GanttBase,RadiantQ.Gantt.Widget.FlexyGantt);f.widget("radiantq.GanttTaskItemsControl",RadiantQ.Gantt.Widget.GanttTaskItemsControl);f.widget("radiantq.GanttTaskItemBar",RadiantQ.Gantt.Widget.GanttTaskItemBar);f.widget("radiantq.GanttDependencyControl",RadiantQ.Gantt.Widget.GanttDependencyControl);f.widget("radiantq.GanttDependencyLine",RadiantQ.Gantt.Widget.GanttDependencyLine);f.widget("radiantq.GanttRows",RadiantQ.Gantt.Widget.GanttRows);f.widget("radiantq.rowbase",
RadiantQ.Gantt.Widget.rowbase);f.widget("radiantq.GanttRowselectable",f.radiantq.rowbase,RadiantQ.Gantt.Widget.GanttRowselectable);f.widget("radiantq.hoverable",f.radiantq.rowbase,RadiantQ.Gantt.Widget.hoverable);void 0!=f.ui.spinner&&null!=f.ui.spinner?(f.widget("ui.timespinner",f.ui.spinner,RadiantQ.Gantt.Widget.timespinner),f.widget("radiatq.DurationPicker",f.ui.spinner,RadiantQ.Gantt.Widget.DurationPicker)):window.console&&console.log&&console.log('"jquery.ui.spinner" file is missing. So, gantt would not create "Timespinner" and "DurationPicker" widgets.');
f.widget("radiantq.DateTimePicker",RadiantQ.Gantt.Widget.DateTimePicker);f.widget("radiantq.ResourcePicker",RadiantQ.Gantt.Widget.ResourcePicker);var b={triggerEvent:function(a,b,d){return this._trigger(a,b,d)},getChildWidgetName:function(a){return a},widgetBaseSetOption:function(){f.Widget.prototype._setOption.apply(this,arguments)},widgetBaseDestroy:function(){f.Widget.prototype.destroy.apply(this,arguments)}};f.extend(f.radiantq.GanttBase.prototype,{_triggerHeaderCollectionschangedEvent:function(a,
b){f.radiantq.GanttBase.prototype.element=this.element;f.radiantq.GanttBase.prototype._trigger("HeaderCollectionschanged",a,{event:a,value:b,options:this.options})}},b);var d={baseCreate:function(){f.radiantq.GanttBase.prototype._create.apply(this,arguments)},baseSetOption:function(){f.radiantq.GanttBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){f.radiantq.GanttBase.prototype.destroy.apply(this,arguments)}},a=f.extend({},d,{updateGanttChart:function(a,b){var d=this.GetGanttChart();
0!=d.length&&a in d.GanttChart("option")&&(d.GanttChart("option",a)==b&&"BaseTimeScaleType"!=a||d.GanttChart("option",a,b))}},b),d=f.extend({},d,{updateGanttChart:function(a,b){var d=this.GetGanttChart();if(0!=d.length){switch(a){case "FlatItemsSource":return d.GanttChart("option","FlatItemsSource",b);case "TaskStartTimeProperty":return d.GanttChart("option","TaskStartTime",b);case "ParentTaskStartTimeProperty":return d.GanttChart("option","ParentTaskStartTime",b);case "TaskEndTimeProperty":return d.GanttChart("option",
"TaskEndTime",b);case "ParentTaskEndTimeProperty":return d.GanttChart("option","ParentTaskEndTime",b)}a in d.GanttChart("option")&&(d.GanttChart("option",a)==b&&"BaseTimeScaleType"!=a||d.GanttChart("option",a,b))}}},b);f.extend(f.radiantq.GanttControl.prototype,a);f.extend(f.radiantq.FlexyGantt.prototype,d);f.extend(f.radiantq.GanttChart.prototype,b);f.extend(f.radiantq.rowbase.prototype,b);a=f.extend({baseCreate:function(){f.radiantq.rowbase.prototype._create.apply(this,arguments)},baseSetOption:function(){f.radiantq.rowbase.prototype._setOption.apply(this,
arguments)},baseDestroy:function(){f.radiantq.rowbase.prototype.destroy.apply(this,arguments)}},b);f.extend(f.radiantq.hoverable.prototype,a);f.extend(f.radiantq.GanttRowselectable.prototype,a);f.extend(f.radiantq.GanttRows.prototype,b);f.extend(f.radiantq.GanttTaskItemBar.prototype,b);f.extend(f.radiantq.GanttTaskItemsControl.prototype,b);f.extend(f.radiantq.taskbar.prototype,b);f.extend(f.radiantq.TasksListControl.prototype,b);f.extend(f.radiantq.ScaleRendererBase.prototype,b);f.extend(f.radiantq.ScalePanelRendererBase.prototype,
b);a=f.extend({baseCreate:function(){f.radiantq.ScaleRendererBase.prototype._create.apply(this,arguments)},baseSetOption:function(){f.radiantq.ScaleRendererBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){f.radiantq.ScaleRendererBase.prototype.destroy.apply(this,arguments)},ScaleRendererBaseUpdateTimeUnits:function(){f.radiantq.ScaleRendererBase.prototype.UpdateTimeUnits.apply(this,arguments)}},b);f.extend(f.radiantq.TimeSpanHeader.prototype,a);d=f.extend({baseCreate:function(){f.radiantq.ScalePanelRendererBase.prototype._create.apply(this,
arguments)},baseSetOption:function(){f.radiantq.ScalePanelRendererBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){f.radiantq.ScalePanelRendererBase.prototype.destroy.apply(this,arguments)},ScaleRendererBaseUpdateTimeUnits:function(){f.radiantq.ScalePanelRendererBase.prototype.UpdateTimeUnits.apply(this,arguments)}},b);f.extend(f.radiantq.TimeSpanHeaders.prototype,d);f.extend(f.radiantq.SpecialLines.prototype,a);f.extend(f.radiantq.GanttDependencyControl.prototype,b);RadiantQ.Binder.ActivityTimeBinder=
function(a,b,d,f){a.DateTimePicker({onBlur:function(b){b=a.DateTimePicker("getDate");null!=b&&(f.Activity_M().PreferredStartTime_M(b),f.Activity_M().StartTime_M(b))}});a.DateTimePicker("setDate",d.getter(f))};RadiantQ.Binder.ResourcePickerBinder=function(a,b,d,h){b=[];d=h.activity.Assignments_M();for(var m=0;m<d.length;m++)b.push(d[m]._resource);a.ResourcePicker({source:h.activity.Model.GanttResources_M(),SelectedResources:b,open:function(){h.GC.PreventDefaultFns=!0},close:function(){h.GC.PreventDefaultFns=
!1},destroy:function(){var a=f(this).data("ResourcePicker");if(void 0!=a&&null!=a){var b=a.selectedItems;!0==a.IsChanged()&&RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments(b,h.activity.Assignments_M())}}})}})(jQuery);
(function(f){var b=function(){var a=RadiantQ.Template;VW.Grid.GridUI.apply(this,arguments);this.initFields=function(){this.fields=[];this.fields.push("Activity.IndentLevel");this.fields.push("Activity.CumulativeEffort");this.fields.push("Activity.IsExpanded");this.fields.push("IndentWidth")};this.Refresh=function(){if(this.InEditMode){var a=this.editedElement.closest("tr");a.data("uid");0<a.length&&a[0].scrollIntoView()}a=this.rowHtml();this.appendInnerHtml(this.$tbody,a);0!=this.FrozenColumnCount&&
(a=this.uiGridBody.scrollTop(),this.uiFrozenGridBody.scrollTop(a),a=this.rowHtml(null,!0),this.appendInnerHtml(this.$frozenTbody,a));this.Loaded();this.updateGridHeight(this.options.Parent.options.IsPrinting);this.updateScrollPadding();this.updateGridWidth();this.updateGridHeaderScrollLeft();!0==this.options.columnReorderable&&this.columnDragAndDrop();this.triggerRefresh();this.CreateColumnEnhancerplugIn();this._updateRowDragDropTracker()};this.triggerRefresh=function(){this.element.trigger("refresh")};
this.updateGridHeaderScrollLeft=function(){var a=this.uiGridBody.scrollLeft();this.uiGridHeadTableParent.scrollLeft(a)};this.OnDropped=function(a){this.options.Parent.SelectedRowsDropped.raise({DroppedItems:a})};this.CanBeginDrag=function(a){a={DragRowIndex:a,Cancel:!1};this.options.Parent.BeforeRowsDragStart.raise(a);return a.Cancel?!1:!0};this.CanDrop=function(a,b){var d={DragOverRowIndex:a,DropAsChildren:b,Cancel:!1};this.options.Parent.SelectedRowsDrag.raise(d);return!0==d.Cancel};this.OnDrop=
function(a,b,d,f){a={FirstSelectedItem:a,SelectedItemsCount:b,DestinationIndex:d,DropAsChildren:f,Cancel:!1};this.options.Parent.SelectedRowsDrop.raise(a);return!1==a.Cancel};null;this._updateRowDragDropTracker=function(){!1==this._loaded||this.options.Parent.IsSortingApplied?null!=this._dndTracker&&(this._dndTracker.Dispose(),this._dndTracker=null):this.options.CanUserReorderRows?null==this._dndTracker&&(this._dndTracker=new RadiantQ.Gantt.RowDragDropTracker(this)):null!=this._dndTracker&&(this._dndTracker.Dispose(),
this._dndTracker=null)};this.tmpl=function(a){var b=!0==a?this.generateTemplate(this.FrozenColumn,a):this.generateTemplate(this.Column),d="<tr class='${data._isSelected ? 'rq-row-selected "+window.radiantQclasses.selectionClass+" rq-grid-row' :'rq-grid-row'}' data-uid='${data.uid}'";null!=this.options.GetPreferredIDCallBack&&"function"==typeof this.options.GetPreferredIDCallBack&&(d=!0==a?d+" id='${data.GC.options.GetPreferredIDCallBack(data)}_frozen_table' ":d+" id='${data.GC.options.GetPreferredIDCallBack(data)}_table' ");
var d=d+(" style='height:"+this.options.RowHeight+"px;font-weight: ${data.IsParent_M() ? 'bold' :'normal' }'>"),d=d+b+"</tr>",f="<tr class='${data._isSelected ? 'rq-row-selected "+window.radiantQclasses.selectionClass+" rq-grid-row rq-grid-alternative-background' :'rq-grid-row  rq-grid-alternative-background'}' data-uid='${data.uid}' ";null!=this.options.GetPreferredIDCallBack&&"function"==typeof this.options.GetPreferredIDCallBack&&(f=!0==a?f+" id='${data.GC.options.GetPreferredIDCallBack(data)}_frozen_table' ":
f+" id='${data.GC.options.GetPreferredIDCallBack(data)}_table' ");f+=" style='height:"+this.options.RowHeight+"px;font-weight: ${data.IsParent_M() ? 'bold' :'normal' }'>";f=f+b+"</tr>";this.renderTemplate(d,f,a)};this.renderTemplate=function(b,e,d){d?(this.frozenRowTemplate=a(b),this.frozenAltRowTemplate=a(e)):(this.rowTemplate=a(b),this.altRowTemplate=a(e))};this.list=[];this.viewList=new RadiantQ.Gantt.Dictionary;this.sourceList=new RadiantQ.Gantt.Dictionary;this.dataPropertyChange=function(a,b){var d=
""!=this.PropertyName?this.PropertyName+"."+b.PropertyName:b.PropertyName;"refreshView"==b.PropertyName||"IsParent"==b.PropertyName?this.context.propertyChanged(this.View,b.PropertyName):-1!=f.inArray(d,this.context.fields)&&this.context.propertyChanged(this.View,d)};this.GetGC=function(){return this.element.parents("div.rq-ganttBase").data("GanttControl")};this.subscribeEvents=function(){var a=this,b=a.options,d=0,h=a.options,m=a.uiGridBody[0].scrollHeight,k=a.uiGridBody.height();a.uiGridBody.bind("mousewheel",
function(b,e){a.InEditMode&&(a.closeCell(),a.InEditMode=!1)});a.uiFrozenGridBody.bind("mousewheel",function(b,e){a.InEditMode&&(a.closeCell(),a.InEditMode=!1);var d=30*e,d=a.uiGridBody.scrollTop()-d;a.uiGridBody.scrollTop(d);b.preventDefault()});a.uiGridBody.scroll(function(l){var n=f(this).height(),p=a.uiGridBody.scrollLeft(),q=this.scrollTop;a.uiFrozenGridBody.scrollTop(q);if(b.UseGridVirtualization&&(q!=d||m!=this.scrollHeight||k!=n)){var r=a.rowHtml();a.appendInnerHtml(a.$tbody,r);0!=a.FrozenColumnCount&&
(r=a.rowHtml(null,!0),a.appendInnerHtml(a.$frozenTbody,r));a.Loaded()}a.uiGridBody.scrollLeft(p);q!=d&&0<h.Parent.VerticalScrollEvent.fn.length&&h.Parent.VerticalScrollEvent.raise(l);m=this.scrollHeight;k=n;d=q;0<a.AfterGridScroll.fn.length&&a.AfterGridScroll.raise(self)})};this.createContextMenu=function(a){if(f.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)){var b=[{keyName:"Indent",name:window.RadiantQ_IndentString,icon:"Indent"},{keyName:"Outdent",name:window.RadiantQ_OutdentString,icon:"Outdent"}],
d=null;this.options.Parent.TableContextMenu&&this.options.Parent.TableContextMenu.Dispose&&this.options.Parent.TableContextMenu.Dispose();this.options.GridContextMenu?(d=new RadiantQ.ContextMenuImpl.ContextMenu("#"+this.element[0].id,a[0].parentElement),d.ContextHandler.subscribe(function(a,b){b.target.parent().hasClass("rq-grid-row")&&(a.Context=b.target.parent())})):d=new RadiantQ.ContextMenuImpl.ContextMenu("#"+this.element[0].id+" table.ui-grid-body-table tr",a[0].parentElement);d.AddNewItems(b);
d.ItemClicked.subscribe(function(a,b){var c=this.element.parents(".rq-ganttBase").data("GanttControl"),e=c.SelectedItems;if(null!=e){if("Indent"==a)if(this.IsUndoEnabled()){var d=e[0];null!=d&&c.CanIndent(d)&&(d=new RadiantQ.Gantt.IndentAction(c,d.Activity_M()),c.ActionManager.RecordAction(d))}else for(d=0;d<e.length;d++)c.Indent(e[d]);if("Outdent"==a)if(this.IsUndoEnabled())d=e[0],null!=d&&0<d.IndentLevel_M()&&(e=new RadiantQ.Gantt.OutdentAction(c,d.Activity_M()),c.ActionManager.RecordAction(e));
else for(d=e.length-1;0<=d;d--)c.Outdent(e[d])}}.bind(this));var h=this;d.BeforeContextMenu.subscribe(function(a,b){var c=f(b.target);this.options.GridContextMenu&&0!=c.closest("tr").length&&(b.context=c.closest("tr"));if(c.hasClass("editor"))b.Cancel=!0;else if(d.Items&&d.Items.Indent&&d.Items.Outdent){var e=this.options.Parent;h.options.Parent.options.IsReadOnly||0==c.closest("tr").length||1<h.options.Parent.SelectedItems.length&&!0==e.ActionManager.EnableRecordingActions?(h._contextMenuDisabledByReadOnly=
!0,d.Items.Indent.disabled=!0,d.Items.Outdent.disabled=!0):!0==h._contextMenuDisabledByReadOnly&&(h._contextMenuDisabledByReadOnly=!1,d.Items.Indent.disabled=!1,d.Items.Outdent.disabled=!1)}},this);this.options.Parent.TableContextMenu=d}};this.closeCell=function(){if(this.editedElement){var b=this.activeElement();!0==f.contains(this.editedElement[0],b)&&this.element.focus();if(null==this.editedElement)return;b=f(".hasDatepicker",this.editedElement);null!=b&&void 0!=b&&b.length&&b.datepicker("hide");
for(var e=this.editedElement.index(),e=this.GetCellIndex(this.editedElement),d=this.editedElement.closest("tr"),b=this.GetDataFromRow(d),h=d[0].rowIndex,d=d.closest("table"),d=d.hasClass("ui-frozen-body-table")||d.hasClass("frozenGanttTable")?this.FrozenColumn[e]:this.Column[e],m=this.columnField(d),d=[],k=this.Column,l=this.FrozenColumn,n=0;n<k.length;n++)m==this.columnField(k[n])&&d.push(k[n]);for(n=0;n<l.length;n++)m==this.columnField(l[n])&&d.push(l[n]);for(n=0;n<d.length;n++){var m=d[n],e=this.createColumnTemplate(n,
m,!0),p=a(e)(b),e=RQArray.prototype.indexOf.call(k,m);-1==e?(e=l.indexOf(m),m=this.frozenTable.find("tr")):m=this.table.find("tr");this.replaceTmpl(m,e,h,p,b)}h=this.CreateAction(this.ccis);this.AddActionToManager(h);h=null;null!=this.editedElement&&(d=this.editedElement.closest("table"),h=d.hasClass("ui-frozen-body-table")||d.hasClass("frozenGanttTable")?this.FrozenColumn[e]:this.Column[e]);null!=this.options.endEdit&&this.options.endEdit(this.editedElement,b,h)}this.docClickEventProxy&&(f(document).unbind("mousedown",
this.docClickEventProxy),this.docClickEventProxy=null);this.editedCell=[];this.editedElement=null;this.InEditMode=!1};this.ccis;this.InEditMode=!1;this.editCell=function(a){var b=null,d=a.closest("tr"),h=d.data("uid"),h=this.GuidList[h];if(void 0==h)return!1;"incell"==this.options.editmode&&null!=this.editedElement&&this.closeCell();var b=this.GetCellIndex(a),m=a.closest("table"),b=m.hasClass("ui-frozen-body-table")||m.hasClass("frozenGanttTable")?this.FrozenColumn[b]:this.Column[b];if(null!=this.options.startEdit&&
!1==this.options.startEdit(a,h,b))return!1;if(!1==this.options.Parent.options.EnableMultipleSelection&&"popup"==this.options.editmode&&!0==h.IsSelected()&&void 0==b.command)return this.cacheValues(h),this.createPopupEditor(h),!0;if(this.isEditable(h,b))this.InEditMode=!0,this.cacheValues(h),this.ccis=new RadiantQ.Gantt.CellChangeInfo(b.field,h,b.field),this.editCellbyData(a,b,h,d);else return!1;null==this.docClickEventProxy&&this.editedElement&&"incell"==this.options.editmode&&(this.docClickEventProxy=
f.proxy(this.docClickEven,this),f(document).bind("mousedown",this.docClickEventProxy));return!0};this.isEditable=function(a,b){var d=this.options.Parent,f=d.$ganttWrapper.data("GanttRowselectable");if(b.command||!1==this.options.enableSingleClickEdit&&!1==a.IsSelected()||!0==d.options.EnableMultipleSelection&&0<f.selectedItems.length)return!1;d=this.columnField(b);-1!=d.indexOf("_M()")&&(d=d.replace(this.checkTag,""));return null!=this.options.startEdit&&(f=this.GetRowFromData(a).find("td:eq("+this.Column.indexOf(b)+
")"),!1==this.options.startEdit(f,a,b))?!1:b.beginEdit&&!1==b.beginEdit(a,b,this)||a._isParent&&("Activity.PredecessorIndexString"!=d&&"Activity.ActivityName"!=d&&"Activity.Assignments"!=d&&(void 0==b.isParentEditable||!1==b.isParentEditable)||!1==b.isParentEditable)||null==this.options.startEdit&&!0==a.IsReadOnly&&"Activity.ActivityName"!=d?!1:!1==b.iseditable?!1:!0};this.IsChangeTrackingEnabled=function(){return!0};this.CreateAction=function(a){var b=a.Source_M(),d=b,b=b.Activity_M?b.Activity_M():
b,f=a.Property_M(),m=this.GetGC(),k=RadiantQ.Gantt;return"StartTime"==f?new k.SetStartTimeAction(m,b,a.GetCurrentValue(),null==a.Tag?a.GetOldValue():a.Tag,a.GetOldValue(),!0):"EndTime"==f?new k.SetEndTimeAction(m,b,a.GetCurrentValue(),null==a.Tag?a.GetOldValue():a.Tag,a.GetOldValue(),!0):0==f.indexOf("Activity.")?new k.GenericActivityChangeActionInGrid(m.Model,b.ID_M(),f,a.GetOldValue(),a.GetCurrentValue(),!0,d):new k.GenericActivityViewChangeActionInGrid(m,m.Model,b.ID_M(),f,a.GetOldValue(),a.GetCurrentValue(),
!0,d)};this.AddActionToManager=function(a){this.GetGC().ActionManager.RecordAction(a)};this.OnBeforeDragStart=function(a,b){var d=this.options.Parent,f=d.$ganttWrapper.data("GanttRowselectable");this._flattenSelection();return d.OnBeforeDragStart(a,f.selectedItems.length)};this._flattenSelection=function(){var a=this.options.Parent,b=this.options,d=a.$ganttWrapper.data("GanttRowselectable"),f=a.SelectedItems,m=this.GetRowFromData(f[0]),k=this.GetRowFromData(f[f.length-1]);a.options.UseVirtualization?
(k=f[0].DisplayIndex_M(),m=f[f.length-1].DisplayIndex_M()):(k=k[0].rowIndex,m=m[0].rowIndex);a.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single&&window.console&&console.error("Dragging feature requires selecting multiple rows, but the SelectionMode is set to Single. This is not supported. Set SelectionMode to Multiple or turn off dragging feature.");if(f.length<k-m+1)for(a=m;a<=k;a++)!1==ContainsValueInArray(d.selectedItems,b.datasource[a])&&d.selectedItems.add(b.datasource[a])};this.MoveRows=
function(a,b,d){this.MoveRows(a,b,d,null,void 0,void 0)};this.DoMoveRows=function(a,b,d,f){var m=this.GetGC();a=new RadiantQ.Gantt.MoveRowsAction(m,a,b,d,f);m.ActionManager.RecordAction(a)};this.MoveRows=function(a,b,d,h,m,k){this.ignoreChangs=!0;var l=null;!0==this.options.UseGridVirtualization&&(m=this.GetGC(),l=f(".rq-gc-rowsParent",m.element).data("GanttTaskItemsControl"),this.ignorecollectionChangs=!0,l&&(l.ignorecollectionChangs=!0));var n=new RadiantQ.Gantt.Utils.DelayUpdates,p=this.GetGC();
m={value:0};k={value:0};p.MoveRows(a,b,d,h,m,k);0<m.value&&this.PostMove(a,m,k);n.Dispose();this.ignorecollectionChangs=this.ignoreChangs=!1;!0==this.options.UseGridVirtualization&&(l&&(l.ignorecollectionChangs=!1,l.RefreshUI()),this.Refresh())};this.PostMove=function(a,b,d){var f=this.options.datasource;d.value++;return f.Move(a,b.value,d.value)};this.InsertRowsAsChild=function(a,b,d){this.InsertRowsAsChildInternal(a,b,d,!1)};this.DoInsertRowsAsChild=function(a,b,d){this.InsertRowsAsChildInternal(a,
b,d,!0)};this.IsUndoEnabled=function(a){if(0==arguments.length){var b=this.GetGC();return null!=b.Model&&!0==b.ActionManager.EnableRecordingActions}};this.EnableDropAsChild=function(a){var b=this.GetGC();if(b){if(0==arguments.length)return this.IsUndoEnabled()?!1:b.options.EnableDropAsChild;b.options.EnableDropAsChild=a}};this.InsertRowsAsChildInternal=function(a,b,d,f){var m=new RadiantQ.Gantt.Utils.DelayUpdates,k=this.GetGC(),l={value:0},n={value:0},p=k.ActivityViews[d];if(p){if(0<p.Activity_M().ChildActivities_M().length&&
!0==p.IsExpanded_M()){d=k.GetIndexOfLastDescendant(p);if(d>=a&&d<=a+b-1)return;f?(k=p.Activity_M().DisplayIndex_M(),this.DoMoveRows(a,b,d,k)):(k.MoveRows(a,b,d,p,l,n),0<l.value&&this.PostMove(a,l,n))}else if(k.MoveRows(a,b,d,null,l,n),0<l.value){a=this.PostMove(a,l,n);b={};for(f=0;f<l.value;f++)b[f]=k.ActivityViews[f+a].IndentLevel_M();for(f=n=a;f<a+l.value;f++)p=k.ActivityViews.length,k.ActivityViews[n].IndentLevel_M()==b[f-a]?(k.Indent(k.ActivityViews[n]),p==k.ActivityViews.length?n++:f+=p-k.ActivityViews.length-
1):n++}m.Dispose()}};this.cancelChanges=function(b){for(var e in this.Cache)if(-1!=this.changeField.indexOf(e)){var d=a.getter(e,b);d&&d.AsText_M?d.AsText_M()!=this.Cache[e]&&d.AsText_M(this.Cache[e]):("Activity.StartTime"==e&&a.setter("Activity.PreferredStartTime",b,this.Cache[e]),d!=this.Cache[e]&&a.setter(e,b,this.Cache[e]))}this.changeField=[]};this.cacheValues=function(b){this.Cache={};for(var e=this.options.columns,d=0;d<e.length;d++){var f=e[d],m="";f.command||(m=this.columnField(f));f=a.getter(m,
b);null!=f&&f.AsText_M&&(f=f.AsText_M());this.Cache[m]=f;-1!=m.indexOf("_M()")&&(m=m.replace(this.checkTag,""),this.Cache[m]=f)}};this.renderRowHtml=function(a,b,d,h,m,k,l,n){var p=this.options.RowHeight,q=0,r=this.options.datasource,s=this.uiGridBody,u=this.options.UseGridVirtualization,w=0,t=RadiantQ.Gantt.RQPrint.InternalPrintOptions,v=t.IsNewPrinting,z={appendRowHtml:"",prependRowHtml:""};if(!r)return z;r instanceof VW.Grid.GridModel&&(r=r.data);var x=s.scrollTop();if(!a)if(this.InEditMode){var s=
f("tr",h),A=this.editedElement.closest("tr").data("uid");for(h=0;h<s.length;h++){var y=s.eq(h),C=y.data("uid");A==C?canRemoveWithoutCheck=!0:(y.remove(),n||delete this.GuidList[C],delete this.frozenGuidList[C])}}else h.empty();h=0;if(u&&!a||v)h=this.options.Parent.GetStartRowIndexAndTop(r,x),w=h.startPosition,s=h.top,h=x-s,q-=s,v&&(h=x);0<m.length&&(m[0].style.setProperty?m[0].style.setProperty("margin-top",h+"px","important"):m[0].style.setAttribute("margin-top",h+"px","important"));this.renderHeight=
l;m=this.guid;n=n?this.frozenGuidList:this.GuidList;null!=k&&(h=this.options.Parent.GetScrollableContentHeight(r),k.height(h));this.unsubscribeAllObjectChanges();x=t.NoOfRowsInPage;v?(w=t.StartRowIndex,k=t.EndRowIndex>=r.length?r.length:t.EndRowIndex+1):k=r.length;for(h=w;h<k;h++){s=h-w;if(v){if(0<t.MaximumHeightPerPage&&q>=t.MaximumHeightPerPage)break;if(s>=x)break}else if(u&&!a&&q>=l)break;t.NoOfRenderedRows=h<k?s:s+1;A=r[h];if(this.InEditMode&&n[r[h].uid]&&(s=this.GetRowFromData(A))&&1<=s.length){q+=
A.RowHeight?A.RowHeight:p;z.prependRowHtml+=z.appendRowHtml;z.appendRowHtml="";continue}this.subscribeObjectChanges(A);void 0==A.uid?(s=m(),A.uid=s,n[s]=A):n[A.uid]=A;z.appendRowHtml=this.options.EnableAlternativeRowBackground?0==h%2?z.appendRowHtml+b(A,h):z.appendRowHtml+d(A,h):z.appendRowHtml+b(A,h);q+=A.RowHeight?A.RowHeight:p}return z};return this};window["VW.Grid.GridUI"]&&(b.prototype=VW.Grid.GridUI);f.fn.GanttTable=function(a){a=new b(a);a._create(this);return a};var d=function(){var a=RadiantQ.Template;
VW.Grid.GridUI.apply(this,arguments);this.InEditMode=!1;this.Refresh=function(){if(this.InEditMode){var a=this.editedElement.closest("tr");a.data("uid");0<a.length&&a[0].scrollIntoView()}this.GuidList=[];this.frozenGuidList=[];a=this.rowHtml();this.appendInnerHtml(this.$tbody,a);0!=this.FrozenColumnCount&&(a=this.rowHtml(null,!0),this.appendInnerHtml(this.$frozenTbody,a));this.updateGridHeight(this.options.Parent.options.IsPrinting);this.updateScrollPadding();this.updateGridWidth();!0==this.options.columnReorderable&&
this.columnDragAndDrop();this.triggerRefresh();this.CreateColumnEnhancerplugIn();this._updateRowDragDropTracker();this.Loaded()};this.triggerRefresh=function(){this.element.trigger("refresh")};this.initFields=function(){this.fields=[];this.fields.push("HierarchicalItem.IsExpanded");this.fields.push("HierarchicalItem.CanShowCue")};this.list=[];this.viewList=new RadiantQ.Gantt.Dictionary;this.sourceList=new RadiantQ.Gantt.Dictionary;this.dataPropertyChange=function(a,b){var d=""!=this.PropertyName?
this.PropertyName+"."+b.PropertyName:b.PropertyName;-1!=f.inArray(d,this.context.fields)?this.context.propertyChanged(this.View,d):this.context.propertyChanged(a,d)};this.createContextMenu=function(a){f.isFunction(RadiantQ.ContextMenuImpl.ContextMenu)&&void 0==this.options.Parent.TableContextMenu&&(this.options.GridContextMenu?(a=new RadiantQ.ContextMenuImpl.ContextMenu("#"+a[0].id,f("#"+a[0].id).parent()),a.ContextHandler.subscribe(function(a,b){b.target.parents().hasClass("rq-grid-row")&&(a.Context=
b.target.parent())})):a=new RadiantQ.ContextMenuImpl.ContextMenu("#"+a[0].id+" table.ui-grid-body-table tr",f("#"+a[0].id).parent()),a.AddNewItems([]),this.options.Parent.TableContextMenu=a)};null;this._updateRowDragDropTracker=function(){!1==this._loaded||this.options.Parent.IsSortingApplied?null!=this._dndTracker&&(this._dndTracker.Dispose(),this._dndTracker=null):this.options.CanUserReorderRows?null==this._dndTracker&&(this._dndTracker=new RadiantQ.Gantt.RowDragDropTracker(this)):null!=this._dndTracker&&
(this._dndTracker.Dispose(),this._dndTracker=null)};this.OnDropped=function(a){this.options.Parent.SelectedRowsDropped.raise({DroppedItems:a})};this.CanBeginDrag=function(a){a={DragRowIndex:a,Cancel:!1};this.options.Parent.BeforeRowsDragStart.raise(a);return a.Cancel?!1:!0};this.CanDrop=function(a,b){var d={DragOverRowIndex:a,DropAsChildren:b,Cancel:!1};this.options.Parent.SelectedRowsDrag.raise(d);return!0==d.Cancel};this.OnDrop=function(a,b,d,f,m,k){a={FirstSelectedItem:a,SelectedItemsCount:b,DestinationIndex:d,
DropAsChildren:f,Cancel:!1,isInLastRow:m,isInLastQuarter:k};this.options.Parent.SelectedRowsDrop.raise(a);return!1==a.Cancel};this.DoInsertRowsAsChild=function(a,b,d){};this.OnBeforeDragStart=function(a,b){for(var d=this.options.Parent.$ganttWrapper.data("GanttRowselectable"),f=[],m=0;m<d.selectedItems.length;m++)f.push(d.selectedItems[m]);return f};this.IsChangeTrackingEnabled=function(){return!1};this.AddActionToManager=function(a){};this.DoMoveRows=function(a,b,d){};this.tmpl=function(a){var b=
null!=this.options.Parent.options.RowHeightBinding,d=!0==a?this.generateTemplate(this.FrozenColumn):this.generateTemplate(this.Column),f="<tr class='${data._isSelected ? 'rq-row-selected "+window.radiantQclasses.selectionClass+" rq-grid-row' :'rq-grid-row'}' data-uid='${data.uid}' style='height:",f=!1==b?f+this.options.RowHeight:f+("${data.RowHeight ? data.RowHeight :"+this.options.RowHeight+" }"),f=f+"px;font-weight: ${data.IsParentType() ? 'bold' :'normal' }'>"+d,f=f+"</tr>",m="<tr class='${data._isSelected ? 'rq-row-selected  "+
window.radiantQclasses.selectionClass+" rq-grid-row rq-grid-alternative-background' :'rq-grid-row  rq-grid-alternative-background'}' data-uid='${data.uid}' style='height:",m=!1==b?m+this.options.RowHeight:m+("${data.RowHeight ? data.RowHeight :"+this.options.RowHeight+" }"),m=m+"px;font-weight: ${data.IsParentType() ? 'bold' :'normal' }'>"+d,m=m+"</tr>";this.renderTemplate(f,m,a)};this.renderTemplate=function(b,d,g){g?(this.frozenRowTemplate=a(b),this.frozenAltRowTemplate=a(d)):(this.rowTemplate=
a(b),this.altRowTemplate=a(d))};this.subscribeEvents=function(){var a=this,b=a.options,d=0,h=a.options,m=a.uiGridBody[0].scrollHeight,k=a.uiGridBody.height();a.uiGridBody.bind("mousewheel",function(b,d){a.InEditMode&&(a.closeCell(),a.InEditMode=!1)});a.uiFrozenGridBody.bind("mousewheel",function(b,d){a.InEditMode&&(a.closeCell(),a.InEditMode=!1);var e=30*d,e=a.uiGridBody.scrollTop()-e;a.uiGridBody.scrollTop(e);b.preventDefault()});a.uiGridBody.scroll(function(l){var n=f(this).height(),p=a.uiGridBody.scrollLeft(),
q=this.scrollTop;a.uiFrozenGridBody.scrollTop(q);if(b.UseGridVirtualization&&(q!=d||m!=this.scrollHeight||k!=n)){var r=a.rowHtml();a.appendInnerHtml(a.$tbody,r);0!=a.FrozenColumnCount&&(r=a.rowHtml(null,!0),a.appendInnerHtml(a.$frozenTbody,r));a.Loaded()}a.uiGridBody.scrollLeft(p);q!=d&&0<h.Parent.VerticalScrollEvent.fn.length&&h.Parent.VerticalScrollEvent.raise(l);m=this.scrollHeight;k=n;d=q})};this.isEditable=function(a,b){return!1==this.options.enableSingleClickEdit&&!1==a.IsSelected()?!1:!1==
b.iseditable?!1:a.IsParentType()&&!1==b.isParentEditable?!1:!0};this.cancelChanges=function(b){for(var d in this.Cache)if(-1!=this.changeField.indexOf(d)){var g=a.getter(d,b);g.AsText_M?g.AsText_M()!=this.Cache[d]&&g.AsText_M(this.Cache[d]):("Activity.StartTime"==d&&a.setter("Activity.PreferredStartTime",b,this.Cache[d]),g!=this.Cache[d]&&a.setter(d,b,this.Cache[d]))}this.changeField=[]};this.cacheValues=function(b){this.Cache={};for(var d=this.options.columns,g=0;g<d.length;g++){var f=this.columnField(d[g]),
m=a.getter(f,b);null!=m&&m.AsText_M&&(m=m.AsText_M());this.Cache[f]=m;-1!=f.indexOf("_M()")&&(f=f.replace(this.checkTag,""),this.Cache[f]=m)}};this.renderRowHtml=function(a,b,d,h,m,k,l,n){var p=this.options.RowHeight,q=0,r=this.options.datasource,s=this.uiGridBody,u=this.options.UseGridVirtualization,w=0,t=RadiantQ.Gantt.RQPrint.InternalPrintOptions,v=t.IsNewPrinting,z={appendRowHtml:"",prependRowHtml:""};if(null!=k){var x=this.options.Parent.GetScrollableContentHeight(r);k.height(x)}if(!r)return z;
r instanceof VW.Grid.GridModel&&(r=r.data);if(!a)if(this.InEditMode)for(k=f("tr",h),x=this.editedElement.closest("tr").data("uid"),h=0;h<k.length;h++){var A=k.eq(h),y=A.data("uid");x==y?canRemoveWithoutCheck=!0:(A.remove(),n||delete this.GuidList[y],delete this.frozenGuidList[y])}else h.empty();h=0;if(u&&!a||v)k=s.scrollTop(),n&&(k=this.uiGridBody.scrollTop()),h=this.options.Parent.GetStartRowIndexAndTop(r,k),w=h.startPosition,s=h.top,h=k-s,q-=s,v&&(h=k);0<m.length&&(m[0].style.setProperty?m[0].style.setProperty("margin-top",
h+"px","important"):m[0].style.setAttribute("margin-top",h+"px","important"));this.renderHeight=l;m=this.guid;s=n?this.frozenGuidList:this.GuidList;this.unsubscribeAllObjectChanges();A=t.NoOfRowsInPage;v?(w=t.StartRowIndex,x=t.EndRowIndex>=r.length?r.length:t.EndRowIndex+1):x=r.length;for(h=w;h<x;h++){k=h-w;if(v){if(0<t.MaximumHeightPerPage&&q>=t.MaximumHeightPerPage)break;if(k>=A)break}else if(u&&!a&&q>=l)break;t.NoOfRenderedRows=h<x?k:k+1;y=r[h];if(this.InEditMode&&!n&&s[r[h].uid]&&(k=this.GetRowFromData(y))&&
1<=k.length){q+=y.RowHeight?y.RowHeight:p;z.prependRowHtml+=z.appendRowHtml;z.appendRowHtml="";continue}this.subscribeObjectChanges(y);y._data&&y._data.PropertyChanged&&(k=y._data.PropertyChanged.subscribe(function(a,b){b&&"refreshView"==b.PropertyName&&this.context.RefreshItem(this.data)},{context:this,data:y}),this.destroyList.Add(y,[k]));void 0==y.uid?(k=m(),y.uid=k,s[k]=y):s[y.uid]=y;z.appendRowHtml=this.options.EnableAlternativeRowBackground?0==h%2?z.appendRowHtml+b(y):z.appendRowHtml+d(y):z.appendRowHtml+
b(y);q+=y.RowHeight?y.RowHeight:p}return z};return this};window["VW.Grid.GridUI"]&&(d.prototype=VW.Grid.GridUI);f.fn.FlexyGrid=function(a){a=new d(a);a._create(this);return a};RadiantQ.Gantt.CellChangeInfo=function(a,b,d){this._changeLabel=a;this._bindingProp=d;this._dataSource=b;this._oldValue=this.GetPropValue(this._dataSource,this._bindingProp)};RadiantQ.Gantt.CellChangeInfo.prototype._oldValue=null;RadiantQ.Gantt.CellChangeInfo.prototype._bindingProp=null;RadiantQ.Gantt.CellChangeInfo.prototype._dataSource=
null;RadiantQ.Gantt.CellChangeInfo.prototype._changeLabel=null;RadiantQ.Gantt.CellChangeInfo.prototype.Tag=null;RadiantQ.Gantt.CellChangeInfo.prototype.Label_M=function(a){if(0==arguments.length)return this._changeLabel};RadiantQ.Gantt.CellChangeInfo.prototype.Source_M=function(a){if(0==arguments.length)return this._dataSource};RadiantQ.Gantt.CellChangeInfo.prototype.Property_M=function(a){if(0==arguments.length)return this._bindingProp};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.CellChangeInfo.prototype,
"Label",{get:function(){return this._changeLabel}}),Object.defineProperty(RadiantQ.Gantt.CellChangeInfo.prototype,"Source",{get:function(){return this._dataSource}}),Object.defineProperty(RadiantQ.Gantt.CellChangeInfo.prototype,"Property",{get:function(){return this._bindingProp}}));RadiantQ.Gantt.CellChangeInfo.prototype.GetCurrentValue=function(){return this.GetPropValue(this._dataSource,this._bindingProp)};RadiantQ.Gantt.CellChangeInfo.prototype.GetOldValue=function(){return this._oldValue};RadiantQ.Gantt.CellChangeInfo.prototype.GetPropValue=
function(a,b){if(void 0!=b){var d=b.split(".");if(2<d.length){for(var d=a,g=b.split("."),f,m=0;m<g.length;m++){var k=g[m].trim("()");f=d[k];d=f="function"==typeof f?d[k]():f}return f}f=d=1<d.length?d[1]:d[0];g=d.indexOf("_");-1!=g&&(f=d.slice(0,g),d=d.slice(0,g+2));g=a;"PredecessorIndexString"!=d&&"PredecessorIndexString_M"!=d&&(g=g.Activity_M?a.Activity_M():a);g=d="function"==typeof g[d]?g[d]():g._data?g._data[d]:g[d];"Assignments"==f&&(g=jQuery.extend(!0,{},d));return g}};RadiantQ.Gantt.CellChangeInfo.prototype.SetNestedPropValue=
function(a,b,d,g){a=a.Activity_M?a.Activity_M():a;var f=b.split(".");if(2<f.length){a=b.split(".");f=g;for(g=0;g<a.length-1;g++){b=a[g].trim("()");var m=f[b],f=m="function"==typeof m?f[b]():m}"function"==typeof f[a[a.length-1]]?f[a[a.length-1]](d):f[a[a.length-1]]=d}else g=f=1<f.length?f[1]:f[0],b=f.indexOf("_"),-1!=b&&(g=f.slice(0,b),f=f.slice(0,b+2)),"StartTime"==g&&a.PreferredStartTime_M(d),"Assignments"!=g?"function"==typeof a[f]?a[f](d):a._data?a._data[f]=d:a[f]=d:(d=d.AsText_M(),"function"==
typeof a[f]?a[f]().AsText_M(d):a[f].AsText_M(d))};RadiantQ.Gantt.CellChangeInfo.prototype.HasChanged=function(a,b,d){a=this.GetOldValue();b=this.GetCurrentValue();return null==a?null!=b:a!==b}})(jQuery);
(function(){RadiantQ.ProjectModel={};var f=RadiantQ.ProjectModel;f.Utils=function(){f.Utils=function(){};return f.Utils}();f.Utils.toString=function(b){switch(b){case RadiantQ.Gantt.DependencyType.FinishToFinish:return"0";case RadiantQ.Gantt.DependencyType.FinishToStart:return"1";case RadiantQ.Gantt.DependencyType.StartToFinish:return"2";case RadiantQ.Gantt.DependencyType.StartToStart:return"3";default:return"1"}};f.Utils.effortToString=function(b){var d="";if(b>=RQTimeSpan.Zero_M())var d=d+"PT",
a=parseInt(Math.floor(b.getTotalHours())),d=d+(a.toString()+"H"),d=d+(b.minutes_M().toString()+"M"),d=d+(b.seconds_M().toString()+"S");return d};f.Utils.toLagString=function(b){return(10*b.getTotalMinutes()).toString()};f.Utils.tenthOfAMinuteToHours=function(b){var d=0,d=parseFloat(b);return d/600};f.Utils.toDepType=function(b){switch(b.toString()){case "0":return RadiantQ.Gantt.DependencyType.FinishToFinish;case "1":return RadiantQ.Gantt.DependencyType.FinishToStart;case "2":return RadiantQ.Gantt.DependencyType.StartToFinish;
case "3":return RadiantQ.Gantt.DependencyType.StartToStart;default:return RadiantQ.Gantt.DependencyType.FinishToStart}};f.Utils.toTimeOfDay=function(b){b=b.split(":");return ts=new RQTimeSpan(0,parseInt(b[0]),parseInt(b[1]),parseInt(b[2]))};f.Utils.convertResourceTextToAssignments=function(b,d){var a=new f.AssignmentsList;if(null!=b.AssignedResources&&""!=b.AssignedResources)for(var c=b.AssignedResources.split(","),e=0;e<c.length;e++){var g=c[e],h=g,m=100;-1!=h.indexOf("[")&&(m=RadiantQ.Gantt.ValueConverters.ConverterUtils.ParseAllocUnitsString(h.substring(g.indexOf("["))),
h=g.substring(0,h.indexOf("[")),h=h.Trim());g=d.ResourceList.getResourceByName(h);null==g&&(h=parseInt(h),null!=h&&void 0!=h&&(g=d.ResourceList.getResourceByID(h)));null!=g&&(0==a.getAssignmentByResourceID(g.ID).length?(h=d.createAssignment(),h.ResourceUID=g.ID,h.TaskUID=b.ID,h.AllocationUnits=parseInt(m),a.push(h)):a.push(a.getAssignmentByResourceID(g.ID)[0]))}return a}})();
(function(){var f=RadiantQ.ProjectModel,b=RadiantQ.Gantt;f.Project=function(a){if(0!=arguments.length){this.Model=null;this.usedtaskid=0;this._calendarCollection=new f.ProjectCalendarCollection;this.names=new f.XElementSubElementNames;this.names.IDField="UID";this.names.TaskNameField="Name";this.names.IndentLevelField="OutlineLevel";this.names.StartDateField="Start";this.names.EndDateField="Finish";this.names.EffortField="Work";this.names.DurationField="Duration";this.names.PredecessorIndicesField=
"PredecessorLink";this.names.PreferredStartTimeField="ConstraintDate";this.names.ProgressPercentField="PercentComplete";this.names.TypeField="Type";this.names.WBSField="WBS";a.Project["@xmlns"]=a.Project.xmlns;delete a.Project.xmlns;this.xmlObject=a;this.projectElem=this.xmlObject.Project;this.tasksElem=this.projectElem.Tasks;this.assgnsElem=this.projectElem.Assignments;this._resourcesElem=this.projectElem.Resources;this.assgnsElem||(this.assgnsElem={});if(!this.assgnsElem.Assignment)this.assgnsElem.Assignment=
[];else if(this.assgnsElem.Assignment&&!this.assgnsElem.Assignment.length){var b=this.assgnsElem.Assignment;this.assgnsElem.Assignment=[];this.assgnsElem.Assignment.push(b)}this.doc=this.projectElem;this._baseCalendarID=parseInt(this.projectElem.CalendarUID);this.ReadWBSIDsAsManual=!0;b=this.tasksElem;void 0!=b.Task&&void 0==b.Task.length&&(this.projectElem.Tasks={},this.projectElem.Tasks.Task=[],this.projectElem.Tasks.Task.push(b.Task));this.tasksElem=this.projectElem.Tasks;this._list=new f.ProjectTaskList(this);
this._assgnList=new f.AssignmentsList;this._resList=new f.ResourceList;var d=this._list;if(void 0!=this.tasksElem.Task)for(var b=0,g=this.tasksElem.Task;b<g.length;b++){var h=g[b];0==b?this.topProjectTask=new f.TopProjectTask(h,this.names,this.projectElem,this):(h=this.constructTask(h,this.names,this.projectElem,this),d.push(h),h.ID>this.usedtaskid&&(this.usedtaskid=h.ID))}if(void 0!=this._resourcesElem)for(d=this._resourcesElem.Resource,b=0;b<d.length;b++)g=new f.ProjectResource(d[b],this.doc),this._resList.push(g);
if(void 0!=this.assgnsElem&&void 0!=this.assgnsElem.Assignment)for(d=this.assgnsElem.Assignment,b=0;b<d.length;b++)if(g=new f.ProjectAssignment(this,d[b],this.projectElem),h=g.TaskUID,-1!=h&&null!=this.Tasks.GetTaskByID(h)){var h=this.Tasks.GetTaskByID(h),m=g.ResourceUID;0>m||null==this.ResourceList.getResourceByID(m)||(h.AssignedResources=this._assgnList.addResourceString(h.AssignedResources,g),this._assgnList.push(g))}for(b=0;b<this.Tasks.length;b++)this.Tasks[b].IsInit=!0;this.Tasks.CollectionChanged.subscribe(this.Tasks_CollectionChanged,
this);this._assgnList.CollectionChanged.subscribe(this._assgnList_CollectionChanged,this);this.ResourceList.CollectionChanged.subscribe(this.ResourceList_CollectionChanged,this);d=this.projectElem.Calendars.Calendar;if(!0==d instanceof Array)for(b=0;b<d.length;b++)g=d[b],g=new f.ProjectCalendar(g),this._calendarCollection.push(g);else d&&(g=new f.ProjectCalendar(d),this._calendarCollection.push(g));this._defaultElems={};null!=this.TopProjectTask&&(this.TopProjectTask.IsDirty=!1)}};f.Project.prototype.getDefaultNode=
function(a){var b;void 0!=this._defaultElems?b=this._defaultElems[a]:this._defaultElems={};b||(this._defaultElems[a]="");return b};f.Project.prototype.Tasks_CollectionChanged=function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var g=b.NewItems[d],f=this.Tasks.indexOf(g);f!=this.Tasks.length-1&&0!=this.Tasks.length||-1!=this.tasksElem.Task.indexOf(g.Element)?-1==this.tasksElem.Task.indexOf(g.Element)&&this.tasksElem.Task.splice(f,0,g.Element):this.tasksElem.Task.push(g.Element)}else if("Remove"==
b.Action)for(d=0;d<b.OldItems.length;d++)g=this.tasksElem.Task.indexOf(b.OldItems[d].Element),0<=g&&this.tasksElem.Task.splice(g,1)};f.Project.prototype.ResourceList_CollectionChanged=function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var g=b.NewItems[d],f=this.ResourceList.indexOf(g);f!=this.ResourceList.length-1&&0!=this.ResourceList.length||-1!=this.ResourcesElem.Resource.indexOf(g.Element)?-1==this.ResourcesElem.Resource.indexOf(g.Element)&&this.ResourcesElem.Resource.splice(f,
0,g.Element):this.ResourcesElem.Resource.push(g.Element)}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)g=this.ResourcesElem.Resource.indexOf(b.OldItems[d].Element),this.ResourcesElem.Resource.splice(g,1)};f.Project.prototype._assgnList_CollectionChanged=function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var g=b.NewItems[d],f=this._assgnList.indexOf(g);f!=this._assgnList.length-1&&0!=this._assgnList.length||-1!=this.assgnsElem.Assignment.indexOf(g.Element)?-1==this.assgnsElem.Assignment.indexOf(g.Element)&&
this.assgnsElem.Assignment.splice(f,0,g.Element):this.assgnsElem.Assignment.push(g.Element)}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)f=this.assgnsElem.Assignment.indexOf(b.OldItems[d].Element),this.assgnsElem.Assignment.splice(f,1)};f.Project.prototype.getNextUsableID=function(){return++this.usedtaskid};f.Project.prototype.calculateTasksEndTime=function(){for(var a=this.Tasks,b=0;b<a.length;b++)a[b].EndDate=this.BaseCalendar.Schedule.GetEnd(a[b].StartDate,a[b].Effort)};RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(f.Project.prototype,"ResourcesElem",{get:function(){null==this._resourcesElem&&(this._resourcesElem=[],this.projectElem.Resources={},this.projectElem.Resources.Resource=this._resourcesElem);return this._resourcesElem},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"BaseCalendarID",{get:function(){return this._baseCalendarID},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"TopProjectTask",{get:function(){return this.topProjectTask},
enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"Document",{get:function(){return this.doc},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"BaseCalendar",{get:function(){return this._calendarCollection.getCalendarById(this.BaseCalendarID)},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"Tasks",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(f.Project.prototype,"ResourceList",{get:function(){return this._resList},
set:function(a){this._resList!=a&&(this._resList=a)},enumerable:!0,configurable:!0}));f.Project.prototype.initFrom=function(a){this.Model=a;this.ResourceList.splice(0,this.ResourceList.length);for(var b=0;b<a.GanttResources.length;b++){var d=a.GanttResources[b],g=this.createResource();g.ID=this.getResourceID(d.ResourceID);g.ResourceName=d.ResourceName;this.ResourceList.push(g)}};f.Project.prototype.getResourceID=function(a){return this.tryParseInt(a,0)?void 0:this.ResourceList.length+1};f.Project.prototype.tryParseInt=
function(a,b){var d=b;null!=a&&0<a.length&&NaN!=a&&(d=parseInt(a));return d};f.Project.prototype.createTask=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");var a={},b=this.constructTask(a,this.names,this.projectElem);b.TaskName="New Task";b.StartDate=this.TopProjectTask.StartDate;b.Effort=RQTimeSpan.FromDays(1);b.ID=this.getNextUsableID();b.PreferredStartTime=this.TopProjectTask.StartDate;var d=Date.today().clone().toString("yyyy-MM-ddTHH:mm:ss");
a.CreateDate=d;a.IsNull="0";b.IsInit=!0;return b};f.Project.prototype.constructTask=function(a,b,d,g){return new f.ProjectTask(a,this.names,d,g||this)};f.Project.prototype.createResource=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");return new f.ProjectResource({},this.projectElem)};f.Project.prototype.createAssignment=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");
return new f.ProjectAssignment(this,{},this.projectElem)};f.Project.prototype.fromStream=function(a){var b=null;$.ajax({type:"GET",url:a,dataType:"xml text",async:!1,converters:{"xml text":function(a){return XML2jsobj(a)}},success:function(a){b=new RadiantQ.ProjectModel.Project(a);b=Object.create(b)},error:function(){}});return b};f.Project.prototype.validateAssignmentEntries=function(a){for(var b=this._assgnList.getAssignmentByTaskID(a.ID),d=f.Utils.convertResourceTextToAssignments(a,this),g=0;g<
b.length;g++){var h=b[0],m=d.getAssignmentByResourceID(h.ResourceUID);0==m.length?(h=this._assgnList.indexOf(h),this._assgnList.splice(h,1)):(m=m[0],h.AllocationUnits=m.AllocationUnits,h=d.indexOf(m),d.splice(h,1))}for(g=0;g<d.length;g++)this._assgnList.push(d[g]);this.updateAssignmentWorks(a)};f.Project.prototype.updateAssignmentWorks=function(a){var b=this._assgnList.getAssignmentByTaskID(a.ID);this.removeDummyAssignment(b);null==a.AssignedResources||void 0==a.AssignedResources||""==a.AssignedResources?
this.insertDummyAssignment(a):(this.updateAssignmentTotalWorks(a,b),this.updateAssignmentRemainingWorks(a,b))};f.Project.prototype.insertDummyAssignment=function(a){var b=this.createAssignment();b.ResourceUID=d;b.TaskUID=a.ID;b.AllocationUnits=100;b.Work=a.Effort;b.ActualWork=new RQTimeSpan(a.Effort-a.RemainingWork);b.RemainingWork=a.RemainingWork;b.Start=a.StartDate;b.Stop=null==this.Model||null==this.Model.WorkTimeSchedule?a.StartDate.addTimeSpan(b.ActualWork):this.Model.WorkTimeSchedule.GetEnd(b.Start,
b.ActualWork);b.Finish=a.EndDate;this._assgnList.push(b)};var d=-65535;f.Project.prototype.removeDummyAssignment=function(a){for(var b=a.length,e=0;e<b;e++){var g=a[e];if(g.ResourceUID==d){this._assgnList.remove(g);break}}};f.Project.prototype.updateAssignmentTotalWorks=function(a,b){for(var d=a.Effort,g=RQTimeSpan.Zero,f=b.length,m=0;m<f;m++){var k=b[m];if(k.Work==RQTimeSpan.Zero){g=RQTimeSpan.Zero;break}g=new RQTimeSpan(g+k.Work)}if(g!=d)for(var m=0,l=RQTimeSpan.Zero,n=0;n<f;n++){k=b[n];m++;var p=
1/f;g>RQTimeSpan.Zero&&(p=k.Work.Ticks/g.Ticks);k.Work=m==f?new RQTimeSpan(d-l):RQTimeSpan.fromTicks(parseInt(d.Ticks*p));l=new RQTimeSpan(l+k.Work)}};f.Project.prototype.updateAssignmentRemainingWorks=function(a,b){for(var d=a.RemainingWork,g=RQTimeSpan.Zero,f=b.length,m=0;m<f;m++){var k=b[m];k.Start=a.StartDate;k.ActualWork=k.Work;if(k.RemainingWork==RQTimeSpan.Zero||null==k.RemainingWork){g=RQTimeSpan.Zero;break}g=new RQTimeSpan(g+k.RemainingWork)}if(!g.equals(d))for(var m=0,l=RQTimeSpan.Zero,
n=0;n<f;n++){k=b[n];m++;var p=1/f;g>RQTimeSpan.Zero&&(p=k.RemainingWork.Ticks/g.Ticks);k.RemainingWork=m==f?new RQTimeSpan(d-l):RQTimeSpan.fromTicks(parseInt(d.Ticks*p));k.ActualWork=new RQTimeSpan(k.Work-k.RemainingWork);k.Start=a.StartDate;k.Stop=null==this.Model||null==this.Model.WorkTimeSchedule?a.StartDate.addTimeSpan(k.ActualWork):this.Model.WorkTimeSchedule.GetEnd(k.Start,k.ActualWork);k.Resume=DateTime.MinValue;k.Finish=a.EndDate;l=new RQTimeSpan(l+k.RemainingWork)}};f.Project.prototype.SortOrderToListIndex=
function(a){return a-1};f.ProjectTask=function(a,b,d,g){this._project=null;this._id=0;this._duration=this._effort=this._endTime=this._startTime=this._taskName=null;this._sortOrder=0;this._preferredStartTime=null;this._indendLevel=0;this._predecessorIndices=this._type=null;this._progressPercent=0;this._WBS=this._description=this._assignedResources=null;this.IsInit=!1;this.SubElemNames=b;this.Element=a;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.SortOrderChanged=new ObjectEvent("SortOrderChanged");
this.IsDirty=!1;if(a,b,g)this._project=g,this._doc=d,this._id=this.getIntDescendantValue(this.SubElemNames.IDField,0),this._taskName=this.getDescendantValue(this.SubElemNames.TaskNameField),this._startTime=this.getDateDescendantValue(this.SubElemNames.StartDateField),this._endTime=this.getDateDescendantValue(this.SubElemNames.EndDateField),this._effort=this.getTimeSpanDescendantValue(this.SubElemNames.EffortField),this._duration=this.getTimeSpanDescendantValue(this.SubElemNames.DurationField),this._sortOrder=
this.getIntDescendantValue(this.SubElemNames.SortOrderField,0),this._preferredStartTime=this.getDateDescendantValue(this.SubElemNames.PreferredStartTimeField),this._indendLevel=this.getIntDescendantValue(this.SubElemNames.IndentLevelField,0)-1,this._type=this.getIntDescendantValue(this.SubElemNames.TypeField,0),this._predecessorIndices=this.preparePredIndicesString(),this._progressPercent=this.getDoubleDescendantValue(this.SubElemNames.ProgressPercentField,0),this._assignedResources=this.Element.AssignedResources,
this._description=this.getDescendantValue(this.SubElemNames.DescriptionField),this._WBS=this.getDescendantValue(this.SubElemNames.WBSField)};f.ProjectTask.prototype.UpdateFinish=function(){this.EndDate=this.Project.BaseCalendar.Schedule.GetEnd(this.StartDate,this.Effort)};f.ProjectTask.prototype.onSortOrderChanged=function(a){null!=this.SortOrderChanged&&this.SortOrderChanged.raise(this,a)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.ProjectTask.prototype,"Project",{get:function(){return this._project},
enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"ID",{get:function(){return this._id},set:function(a){if(this._id!=a){var b=this._id;this._id=a;this.Element[this.SubElemNames.IDField]=a.toString();this.OnPropertyChanged("ID",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"TaskName",{get:function(){return this._taskName},set:function(a){if(this._taskName!=a){var b=this._taskName;this._taskName=a;this.Element[this.SubElemNames.TaskNameField]=
a.toString();this.OnPropertyChanged("TaskName",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"StartDate",{get:function(){return this._startTime},set:function(a){if(this._startTime!=a){var b=this._startTime;this._startTime=a;this.Element[this.SubElemNames.StartDateField]=a.toString("yyyy-MM-ddTHH:mm:ss");this.OnPropertyChanged("StartDate",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"EndDate",
{get:function(){return this._endTime},set:function(a){if(this._endTime!=a){var b=this._endTime;this._endTime=a;this.Element[this.SubElemNames.EndDateField]=a.toString("yyyy-MM-ddTHH:mm:ss");this.OnPropertyChanged("EndDate",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"Effort",{get:function(){var a=this._effort;return RQTimeSpan.Zero.equals(a)||a==RQTimeSpan.Zero?this.Duration:a},set:function(a){if(this._effort.equals&&!1==this._effort.equals(a)||
this._effort!=a){var b=this._effort;this._effort=a;this.Element[this.SubElemNames.EffortField]=f.Utils.effortToString(a);this.OnPropertyChanged("Effort",b,a);this.IsDirty=!0}this.Duration=a},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"Duration",{get:function(){return this._duration},set:function(a){if(this._duration!=a){var b=this._duration;this._duration=a;this.Element[this.SubElemNames.DurationField]=f.Utils.effortToString(a);this.OnPropertyChanged("Duration",
b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"SortOrder",{get:function(){return this._sortOrder},set:function(a){if(this._sortOrder!=a){var b=this._sortOrder;this._sortOrder=a;this.Element[this.SubElemNames.SortOrderField]=a.toString();this.OnPropertyChanged("SortOrder",b,a);this.onSortOrderChanged(a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"WBS",{get:function(){return this.Project.ReadWBSIDsAsManual?
"*"+this._WBS:this._WBS},set:function(a){var b=this.stringTrimStart(a,"*");if(this._WBS!=b){var d=this._WBS;this._WBS=b;this.Element[this.SubElemNames.WBSField]=b.toString();this.OnPropertyChanged("WBS",d,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"PreferredStartTime",{get:function(){return 4==(null==this.Element.ConstraintType||void 0==this.Element.ConstraintType?0:this.Element.ConstraintType)?this._preferredStartTime:Date.today().clone()},
set:function(a){if(this._preferredStartTime!=a){var b=this._preferredStartTime;this._preferredStartTime=a;this.Element.ConstraintType=4;this.Element[this.SubElemNames.PreferredStartTimeField]=a.toString("yyyy-MM-ddTHH:mm:ss");this.OnPropertyChanged("PreferredStartTime",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"IndentLevel",{get:function(){return this._indendLevel},set:function(a){if(this._indendLevel!=a){var b=this._indendLevel;this._indendLevel=
a;this.Element[this.SubElemNames.IndentLevelField]=(a+1).toString();this.OnPropertyChanged("IndentLevel",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"Type",{get:function(){return this._type},set:function(a){if(this._type!=a){var b=this._type;this._type=a;this.Element[this.SubElemNames.TypeField]=a.toString();this.OnPropertyChanged("Type",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"RemainingWork",
{get:function(){return new RQTimeSpan(this.Effort-RQTimeSpan.fromTicks(parseFloat(this.Effort.Ticks*(this.ProgressPercent/100))))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"PredecessorIndices",{get:function(){return this._predecessorIndices},set:function(a){if(this._predecessorIndices!=a){var b=this._predecessorIndices;this._predecessorIndices=a;this.updatePredIndicesString(a);this.OnPropertyChanged("PredecessorIndices",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),
Object.defineProperty(f.ProjectTask.prototype,"ProgressPercent",{get:function(){return this._progressPercent},set:function(a){if(this._progressPercent!=a){var b=this._progressPercent;this._progressPercent=a;this.Element[this.SubElemNames.ProgressPercentField]=a.toString();this.OnPropertyChanged("ProgressPercent",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"AssignedResources",{get:function(){var a=this._assignedResources;return null!=a&&void 0!=
a?a:""},set:function(a){if(this._assignedResources!=a){var b=this._assignedResources;this._assignedResources=a;this.OnPropertyChanged("AssignedResources",b,a);this.IsDirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectTask.prototype,"Description",{get:function(){return this._description},set:function(a){if(this._description!=a){var b=this._description;this._description=a;this.Element[this.SubElemNames.DescriptionField]=a.toString();this.OnPropertyChanged("Description",b,a);this.IsDirty=
!0}},enumerable:!0,configurable:!0}));f.ProjectTask.prototype.stringTrimStart=function(a,b){if(!b)return a;for(var d=a;d.substr(0,b.length)==b;)d=d.substr(b.length);return d};f.ProjectTask.prototype.preparePredIndicesString=function(){var a=this.Element[this.SubElemNames.PredecessorIndicesField],c="";if(void 0==a)return c;!1==$.isArray(a)&&(a=[a]);$.each(a,function(a,d){c+=d.PredecessorUID.toString();var h=b.DependencyType.FinishToStart,h=d.Type,h=f.Utils.toDepType(h.toString());switch(h){case b.DependencyType.FinishToFinish:c+=
"FF";break;case b.DependencyType.StartToFinish:c+="SF";break;case b.DependencyType.StartToStart:c+="SS"}h=0;h=d.LinkLag;h=f.Utils.tenthOfAMinuteToHours(h.toString());0<h?c+="+ "+h:0>h&&(c+="- "+-h);c+=","});return c.slice(0,-1)};f.ProjectTask.prototype.updatePredIndicesString=function(a){var c=this.Element.PredecessorLink;null!=c&&void 0!=c&&delete this.Element.PredecessorLink;if(null!=a&&""!=a){var c=[],d=[],g=[],h=this._project.Tasks;b.Model.DataBoundGanttModel.ProcessPredecessorString(a,1,c,d,
g,void 0);for(a=0;a<c.length;a++){var m=c[a];h.ContainsTask(m)&&(m=h.GetTaskByID(c[a]).ID);var k={};k.PredecessorUID=m;k.Type=f.Utils.toString(d[a]);k.LinkLag=f.Utils.toLagString(g[a]);this.Element.PredecessorLink=k}}};f.ProjectTask.prototype.appendChildNode=function(a,b,d){a=this._doc.createElementNS(this._project.projectElem.documentElement.namespaceURI,a);var g=this._doc.createTextNode("");g.nodeValue=b;a.appendChild(g);b=this._doc.createTextNode("");d.appendChild(b);d.appendChild(a)};f.ProjectTask.prototype.ToString=
function(){return"TaskName: "+this.TaskName+", ID: "+this.ID+", Start: "+this.StartDate+", End: "+this.EndDate};f.ProjectTask.prototype.getDescendantValue=function(a){if(null==a)return null;a=this.Element[a];return null==a||void 0==a?"":a};f.ProjectTask.prototype.getIntDescendantValue=function(a,b){var d=this.Element[a];return null==a||null==d||void 0==d||null==d?b:parseInt(Math.floor(parseFloat(d)))};f.ProjectTask.prototype.getDoubleDescendantValue=function(a,b){var d=this.Element[a];return null==
a||null==d||void 0==d?b:null==d?0:parseFloat(d)};f.ProjectTask.prototype.getDateDescendantValue=function(a){var b=Date.today().clone();a=this.Element[a];null!=a&&(b=new Date(a));return b};f.ProjectTask.prototype.getTimeSpanDescendantValue=function(a){var b=this.Element[a];return null==a||null==b||void 0==b||null==b?RQTimeSpan.Zero:RQTimeSpan.parse(b)};f.ProjectTask.prototype.setDescendantValue=function(a,b){this.Element[a]=b.toString()};f.ProjectTask.prototype.OnPropertyChanged=function(a,b,d){this.PropertyChanged&&
0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:a,OldValue:b,value:d})};f.ProjectResource=function(){f.ProjectResource=function(a,b){this.Element=a;this._doc=b;this._id=this.getID();this._resourceName=this.getResourceName()};return f.ProjectResource}();RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.ProjectResource.prototype,"ID",{get:function(){return this._id},set:function(a){this._id!=a&&(this._id=a,this.Element.UID=a.toString(),this.IsDirty=!0)},enumerable:!0,
configurable:!0}),Object.defineProperty(f.ProjectResource.prototype,"ResourceName",{get:function(){return this._resourceName},set:function(a){this._resourceName!=a&&(this._resourceName=a,this.Element.Name=a.toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}));f.ProjectResource.prototype.toString=function(){return"Name: "+this.ResourceName+", ID:"+this.ID};f.ProjectResource.prototype.getID=function(){var a=this.Element.UID;return null==a||void 0==a?0:parseInt(Math.floor(parseFloat(a)))};f.ProjectResource.prototype.getResourceName=
function(){var a=this.Element.Name;return null!=a&&void 0!=a?a:""};f.ResourceList=function(){new RadiantQ.RQ_ObservableCollection(this);this.resourcesByID=new b.Dictionary;this.resourcesByName=new b.Dictionary;this.CollectionChanged.subscribe(function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var g=b.NewItems[d];this.resourcesByID.Add(g.ID,g);this.resourcesByName.Add(g.ResourceName,g)}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)g=b.OldItems[d],this.resourcesByID.Remove(g.ID),
this.resourcesByName.Remove(g.ResourceName)}.bind(this))};f.ResourceList.prototype=[];f.ResourceList.prototype.getResourceByID=function(a){return this.resourcesByID.Contains(a)?this.resourcesByID[a]:null};f.ResourceList.prototype.getResourceByName=function(a){return this.resourcesByName.Contains(a)?this.resourcesByName[a]:null};f.ProjectAssignment=function(a,b,d){NotifyPropertyChanged.apply(this,arguments);this.Project=null;this.Project=a;this.Element=b;this._doc=d;this._taskUID=this.getTaskUID();
this._resourceUID=this.getResourceUID();this._allocationUnits=this.getUnits();this._remainingWork=this.getRemainingWork();this._actualWork=this.getTimeSpanDescendantValue("ActualWork");this._work=this.getTimeSpanDescendantValue("Work");this._start=this.getDateDescendantValue("Start");this._stop=this.getDateDescendantValue("Stop");this._finish=this.getDateDescendantValue("Finish");this._resume=this.getDateDescendantValue("Resume")};f.ProjectAssignment.prototype=new NotifyPropertyChanged;RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(f.ProjectAssignment.prototype,"TaskUID",{get:function(){return this._taskUID},set:function(a){this._taskUID!=a&&(this._taskUID=a,this.Element.TaskUID=a.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"ResourceUID",{get:function(){return this._resourceUID},set:function(a){this._resourceUID!=a&&(this._resourceUID=a,this.Element.ResourceUID=a.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,
"AllocationUnits",{get:function(){return parseInt(Math.floor(100*this._allocationUnits))},set:function(a){this._allocationUnits!=a&&(this._allocationUnits=a,this.Element.Units=(a/100).toString())},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"RemainingWork",{get:function(){return this._remainingWork},set:function(a){this._remainingWork!=a&&(this._remainingWork=a,this.Element.RemainingWork=f.Utils.effortToString(a))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,
"ActualWork",{get:function(){return this._actualWork},set:function(a){this._actualWork!=a&&(this._actualWork=a,this.Element.ActualWork=f.Utils.effortToString(a))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Work",{get:function(){return this._work},set:function(a){this._work!=a&&(this._work=a,this.Element.Work=f.Utils.effortToString(a))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Start",{get:function(){return this._start},
set:function(a){this._start!=a&&(this._start=a,this.Element.Start=a.toString("yyyy-MM-ddTHH:mm:ss"))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Stop",{get:function(){return this._stop},set:function(a){this._stop!=a&&(this._stop=a,this.Element.Stop=a.toString("yyyy-MM-ddTHH:mm:ss"))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Finish",{get:function(){return this._finish},set:function(a){this._finish!=a&&(this._finish=
a,this.Element.Finish=a.toString("yyyy-MM-ddTHH:mm:ss"))},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectAssignment.prototype,"Resume",{get:function(){return this._resume},set:function(a){this._resume!=a&&(this._resume=a,this.Element.Resume=a.toString("yyyy-MM-ddTHH:mm:ss"))},enumerable:!0,configurable:!0}));f.ProjectAssignment.prototype.toString=function(){return"TaskID: "+this.TaskUID+", ResourceUID: "+this.ResourceUID};f.ProjectAssignment.prototype.setDescendantValue=function(a,
b){this.Element[a]=b.toString()};f.ProjectAssignment.prototype.getTaskUID=function(){var a=this.Element.TaskUID;return null!=a&&void 0!=a?parseInt(a):0};f.ProjectAssignment.prototype.getResourceUID=function(){var a=this.Element.ResourceUID;return null!=a&&void 0!=a?parseInt(a):0};f.ProjectAssignment.prototype.getUnits=function(){var a=this.Element.Units;return null!=a&&void 0!=a?parseInt(a):null};f.ProjectAssignment.prototype.getRemainingWork=function(){var a=this.Element.RemainingWork;return null!=
a&&void 0!=a?a:null};f.ProjectAssignment.prototype.getDateDescendantValue=function(a){var b=Date.today().clone();a=this.Element[a];null!=a&&(b=new Date(a));return b};f.ProjectAssignment.prototype.getTimeSpanDescendantValue=function(a){var b=this.Element[a];return null==a||null==b||void 0==b||null==b?RQTimeSpan.Zero:RQTimeSpan.parse(b)};f.AssignmentsList=function(){var a=this;new RadiantQ.RQ_ObservableCollection(a);a.assignmentsByTaskID=new b.Dictionary;a.assignmentsByResID=new b.Dictionary;a.CollectionChanged.subscribe(function(b,
d){if("Add"==d.Action)for(var g=0;g<d.NewItems.length;g++){var f=d.NewItems[g];!1==a.assignmentsByTaskID.Contains(f.TaskUID)&&a.assignmentsByTaskID.Add(f.TaskUID,[]);!1==a.assignmentsByResID.Contains(f.ResourceUID)&&a.assignmentsByResID.Add(f.ResourceUID,[]);a.assignmentsByTaskID[f.TaskUID].push(f);a.assignmentsByResID[f.ResourceUID].push(f)}else if("Remove"==d.Action)for(g=0;g<d.OldItems.length;g++){var f=d.OldItems[g],m=a.assignmentsByTaskID[f.TaskUID].indexOf(f);a.assignmentsByTaskID[f.TaskUID].splice(m,
1);m=a.assignmentsByResID[f.ResourceUID].indexOf(f);a.assignmentsByResID[f.ResourceUID].splice(m,1)}})};f.AssignmentsList.prototype=[];f.AssignmentsList.prototype.getAssignmentByTaskID=function(a){return this.assignmentsByTaskID.Contains(a)?this.assignmentsByTaskID[a]:new f.AssignmentsList};f.AssignmentsList.prototype.getAssignmentByResourceID=function(a){return this.assignmentsByResID.Contains(a)?this.assignmentsByResID[a]:new f.AssignmentsList};f.AssignmentsList.prototype.convertResourceToString=
function(a){a=""+(a.Project.ResourceList.getResourceByID(a.ResourceUID).ResourceName+" "+this.allocationUnitText(a));return a=a.trimEnd()};f.AssignmentsList.prototype.addResourceString=function(a,b){var d=a;null!=d&&""!=d&&(d+=",");return d+=this.convertResourceToString(b)};f.AssignmentsList.prototype.allocationUnitText=function(a){return 100==a.AllocationUnits?"":"["+parseFloat(a.AllocationUnits/100).toString()+"%]"};f.XElementSubElementNames=function(){this.WBSField=this.TypeField=this.SortOrderField=
this.DescriptionField=this.AssignedResourcesField=this.ProgressPercentField=this.PreferredStartTimeField=this.DurationField=this.EffortField=this.EndDateField=this.PredecessorIndicesField=this.StartDateField=this.IndentLevelField=this.TaskNameField=this.IDField=null};f.ProjectTaskList=function(a){new RadiantQ.RQ_ObservableCollection(this);this.tasksByID=new b.Dictionary;this._project=a;this.CollectionChanged.subscribe(function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var f=b.NewItems[d];
f.SortOrderChanged.subscribe(this.item_SortOrderChanged,this);f.PropertyChanged.subscribe(this.item_PropertyChanged,this);this.tasksByID.Add(f.ID,f);this._project.TopProjectTask.IsDirty=!0}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)f=b.OldItems[d],f.SortOrderChanged.unsubscribe(this.item_SortOrderChanged,this),f.PropertyChanged&&f.PropertyChanged.unsubscribe(this.item_PropertyChanged,this),this.tasksByID.Remove(f.ID)},this)};f.ProjectTaskList.prototype=[];f.ProjectTaskList.prototype.item_PropertyChanged=
function(a,b){if("StartDate"==b.PropertyName||"EndDate"==b.PropertyName||"Effort"==b.PropertyName)this._project.TopProjectTask.IsDirty=!0;if("Effort"==b.PropertyName){var d=a;d.IsInit&&this._project.updateAssignmentWorks(d)}"AssignedResources"==b.PropertyName&&(d=a,d.IsInit&&this._project.validateAssignmentEntries(d))};f.ProjectTaskList.prototype.item_SortOrderChanged=function(a,b){var d=this.indexOf(a),g=this._project.SortOrderToListIndex(b);d!=g&&(this.splice(d,1),this.length<=g?this.push(a):this.splice(g,
0,a))};f.ProjectTaskList.prototype.GetTaskByID=function(a){return this.tasksByID[a]};f.ProjectTaskList.prototype.ContainsTask=function(a){return this.tasksByID.Contains(a)};f.TopProjectTask=function(a,b,d,g){this.constructor(a,b,d,g);this._validating=this.IsDirty=null};f.TopProjectTask.prototype=new f.ProjectTask;RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.TopProjectTask.prototype,"StartDate",{get:function(){this.IsDirty&&this.validateDates();return this._startTime},set:function(a){this._startTime=
a},enumerable:!0,configurable:!0}),Object.defineProperty(f.TopProjectTask.prototype,"EndDate",{get:function(){this.IsDirty&&this.validateDates();return this._endTime},set:function(a){this._endTime=a},enumerable:!0,configurable:!0}));f.TopProjectTask.prototype.validateDates=function(){if(!this._validating)try{if(this._validating=!0,this.IsDirty){var a=this.StartDate,b=this.EndDate,d;for(d in this.Project.Tasks)d.StartDate<a&&(a=d.StartDate),d.EndDate>b&&(b=d.EndDate);this.StartDate=a;this.EndDate=
b;this.IsDirty=!1}}finally{this._validating=!1}};f.ProjectCalendarCollection=function(){new RadiantQ.RQ_ObservableCollection(this);this._dictCalendarsById=new b.Dictionary;this.CollectionChanged.subscribe(function(a,b){if("Add"==b.Action)for(var d=0;d<b.NewItems.length;d++){var g=b.NewItems[d];this._dictCalendarsById.Add(g.ID,g)}else if("Remove"==b.Action)for(d=0;d<b.OldItems.length;d++)this._dictCalendarsById.Remove(b.OldItems[d].ID)},this)};f.ProjectCalendarCollection.prototype=[];f.ProjectCalendarCollection.prototype.getCalendarById=
function(a){return!1==this._dictCalendarsById.Contains(a)?null:this._dictCalendarsById[a]};f.ProjectCalendar=function(a){this._calendarElem=a;this._schedule=this._calWithExceptions=null;this.ID=this.getUID(this._calendarElem);if(this.IsBaseCalendar){var c=this._calendarElem.WeekDays.WeekDay,d=[];a=new RadiantQ.Gantt.Dictionary;for(var g=new RadiantQ.Gantt.Dictionary,h=0;h<c.length;h++){var m=c[h];if(0<this.getWeekDay(m))m=new f.ProjectWeekDay(c[h]),d.push(m);else for(var k=f.ProjectWeekDay.isDayWorking(m),
l=this.getDaysRangeInWeekDay(m),n=[],p=0;p<l.length;p++){var q=l[p];f.ProjectWeekDay.parseWorkingTimes(m.WorkingTimes,n);q=new RadiantQ.Gantt.ExceptionDay(q.Date().toShortDateString(),q,n);k?a.Add(q):g.Add(q)}}c=new b.Calendar(this.ID,d,"Calendar ID: "+this.ID);d=[];for(h=0;7>h;h++)d.push(RadiantQ.Gantt.WeekDay.Undefined);this._calWithExceptions=new RadiantQ.Gantt.CalendarWithExceptions(c,d,a,g)}};f.ProjectCalendar.prototype.getUID=function(a){a=this._calendarElem.UID;return null==a?-1:parseInt(a)};
f.ProjectCalendar.prototype.getWeekDay=function(a){a=a.DayType;return null==a?0:parseInt(a)};f.ProjectCalendar.prototype.getDaysRangeInWeekDay=function(a){var b=[],d=a.TimePeriod;if(null==d)return b;a=new Date(d.ToDate);d=new Date(d.FromDate);do b.push(d),d+=TimeSpan.FromDays(1);while(d.Date<a.Date);return b};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.ProjectCalendar.prototype,"Schedule",{get:function(){null==this._schedule&&(this._schedule=RadiantQ.Gantt.CalendarWithExceptions.CreateWorkTimeSchedule(this._calWithExceptions));
return this._schedule},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectCalendar.prototype,"IsBaseCalendar",{get:function(){var a=this._calendarElem.IsBaseCalendar;return null==a?!0:0<parseInt(a)?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(f.ProjectCalendar.prototype,"BaseCalendarID",{get:function(){var a=this._calendarElem.BaseCalendarUID;return null==a?-1:parseInt(a)},enumerable:!0,configurable:!0}));f.ProjectWeekDay=function(a){this.base=b.WeekDay;this.base();this._weekDay=
a;this.IsWorkingDay=f.ProjectWeekDay.isDayWorking(this._weekDay);elem=this._weekDay.WorkingTimes;f.ProjectWeekDay.parseWorkingTimes(elem,this.WorkingTimes)};f.ProjectWeekDay.prototype=new b.WeekDay;f.ProjectWeekDay.isDayWorking=function(a){a=a.DayWorking;return null==a?!0:Boolean(parseInt(a))};f.ProjectWeekDay.parseWorkingTimes=function(a,c){if(null!=a)for(var d=a.WorkingTime,g=RQTimeSpan.Zero,h=0;h<d.length;h++){var m=new f.ProjectWorkDayWorkingTime(d[h]);m.From==g&&m.From==m.To&&(m=new b.WorkDayWorkingTime(g,
new RQTimeSpan(24,0,0)));c.push(m)}};f.ProjectWorkDayWorkingTime=function(a){this.From=f.Utils.toTimeOfDay(a.FromTime.toString());this.To=f.Utils.toTimeOfDay(a.ToTime.toString())}})();RadiantQ.ExcelModel={};
(function(){var f=RadiantQ.ExcelModel;f.ExcelModel=function(){};f.ExcelModel.prototype.saveTo=function(b){var d=new f.Workbook;d.Worksheet=new f.Worksheet;var a=new f.Style;a.IsBold=!0;a.ID="headerColumnStyle";d.Styles.push(a);a=new f.Style;a.Format="M-d-yyyy";a.ID="startTimeColumnStyle";d.Styles.push(a);var a=[],c=new f.Row;c.StyleID="headerColumnStyle";var e=new f.Cell;e.Text="ID";c.Cells.push(e);e=new f.Cell;e.Text="Task Name";c.Cells.push(e);e=new f.Cell;e.Text="WBSID";c.Cells.push(e);e=new f.Cell;
e.Text="Start Date";c.Cells.push(e);e=new f.Cell;e.Text="Effort";c.Cells.push(e);e=new f.Cell;e.Text="PredecessorIndices";c.Cells.push(e);e=new f.Cell;e.Text="SortOrder";c.Cells.push(e);e=new f.Cell;e.Text="Description";c.Cells.push(e);a.push(c);var g=[],c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=100;g.push(c);c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=50;g.push(c);c=new f.Column;c.Width=50;g.push(c);
c=new f.Column;c.Width=230;g.push(c);for(var h=b.length,m=0;m<h;m++){var k=b[m],c=new f.Row,e=new f.Cell;e.Text=k.TaskID;c.Cells.push(e);e=new f.Cell;e.Text=k.TaskName;c.Cells.push(e);e=new f.Cell;e.Text=k.WBSID;c.Cells.push(e);e=new f.Cell;e.DateTime=k.StartTime;e.StyleID="startTimeColumnStyle";c.Cells.push(e);e=new f.Cell;e.Text=RadiantQ.ProjectModel.Utils.effortToString(k.CompletedEffort);c.Cells.push(e);e=new f.Cell;e.Text=k.PredecessorIndices;c.Cells.push(e);e=new f.Cell;e.Number=k.SortOrder;
c.Cells.push(e);e=new f.Cell;e.Text=k.Description;c.Cells.push(e);a.push(c)}d.Worksheet.Columns=g;d.Worksheet.Rows=a;return d.writeXml()};f.Workbook=function(){this.Worksheet=null;this.Styles=[];this.XMLElement=null};f.Workbook.prototype.writeXml=function(){var b=this.XMLElement,b={"ss:Workbook":{}};b["ss:Workbook"]["@xmlns:ss"]="urn:schemas-microsoft-com:office:spreadsheet";b["ss:Workbook"]["ss:Styles"]={};b["ss:Workbook"]["ss:Styles"]["ss:Style"]=[];for(var d=this.Styles.length,a=0;a<d;a++){var c=
this.Styles[a].writeXml();b["ss:Workbook"]["ss:Styles"]["ss:Style"].push(c)}this.Worksheet.writeXml(b["ss:Workbook"]);return b};f.Style=function(){this.IsBold=!1;this.ID="";this.FontSize=0;this.Format=this.FontName=""};f.Style.prototype.writeXml=function(){var b={};b["@ss:ID"]=this.ID;b["ss:Font"]={};b["ss:Font"]["@ss:FontName"]=this.FontName;b["ss:Font"]["@ss:FontSize"]=this.FontSize.toString();b["ss:Font"]["@ss:Bold"]=this.IsBold.toString();b["ss:NumberFormat"]={};b["ss:NumberFormat"]["@ss:Format"]=
this.Format;return b};f.Worksheet=function(){this.Name="sheet1";this.Columns=[];this.Rows=[]};f.Worksheet.prototype.writeXml=function(b){b["ss:Worksheet"]={};b["ss:Worksheet"]["@ss:Name"]=this.Name;b["ss:Worksheet"]["ss:Table"]={};b["ss:Worksheet"]["ss:Table"]["ss:Column"]=[];for(var d=this.Columns.length,a=0;a<d;a++){var c=this.Columns[a].writeXml();b["ss:Worksheet"]["ss:Table"]["ss:Column"].push(c)}d=this.Rows.length;b["ss:Worksheet"]["ss:Table"]["ss:Row"]=[];for(a=0;a<d;a++)c=this.Rows[a].writeXml(),
b["ss:Worksheet"]["ss:Table"]["ss:Row"].push(c)};f.Column=function(){this.Width=100};f.Column.prototype.writeXml=function(){var b={};b["@ss:Width"]=this.Width;return b};f.Row=function(){this.Cells=[];this.StyleID=null};f.Row.prototype.writeXml=function(){var b={};b["@ss:StyleID"]=this.StyleID;b["ss:Cell"]=[];for(var d=this.Cells.length,a=0;a<d;a++){var c=this.Cells[a].writeXml();b["ss:Cell"].push(c)}return b};f.Cell=function(){this.StyleID=this.Formate=this.DateTime=this.Number=this.Text=null};f.Cell.prototype.writeXml=
function(){var b={};b["@ss:StyleID"]=this.StyleID;b["ss:Data"]={};this.DateTime?(b["ss:Data"]["@ss:Type"]="DateTime",b["ss:Data"]["#text"]=this.DateTime.toString("yyyy-MM-ddTHH:mm:ss")):this.Number?(b["ss:Data"]["@ss:Type"]="Number",b["ss:Data"]["#text"]=this.Number):(b["ss:Data"]["@ss:Type"]="String",b["ss:Data"]["#text"]=this.Text);return b};f.ExcelTask=function(){this._taskID=0;this._compEffort=this._startTime=this._taskName=null;this._sortOrder=0;this._WBSID=this._description=this._predIndices=
null;this.PropertyChanged=new ObjectEvent("PropertyChanged")};f.ExcelTask.prototype.onSortOrderChanged=function(b){null!=this.SortOrderChanged&&this.SortOrderChanged.raise(this,b)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.ExcelTask.prototype,"TaskID",{get:function(){return this._taskID},set:function(b){if(this._taskID!=b){var d=this._taskID;this._taskID=b;this.OnPropertyChanged("TaskID",d,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"TaskName",{get:function(){return this._taskName},
set:function(b){if(this._taskName!=b){var d=this._taskName;this._taskName=b;this.OnPropertyChanged("TaskName",d,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"StartTime",{get:function(){return this._startTime},set:function(b){if(this._startTime!=b){var d=this._startTime;this._startTime=b;this.OnPropertyChanged("StartTime",d,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"CompletedEffort",{get:function(){return this._compEffort},
set:function(b){if(this._compEffort!=b){var d=this._compEffort;this._compEffort=b;this.OnPropertyChanged("CompletedEffort",d,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"SortOrder",{get:function(){return this._sortOrder},set:function(b){if(this._sortOrder!=b){var d=this._sortOrder;this._sortOrder=b;this.OnPropertyChanged("SortOrder",d,b);this.onSortOrderChanged(b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"WBSID",{get:function(){return this._WBSID},
set:function(b){if(this._WBSID!=b){var d=this._WBSID;this._WBSID=b;this.OnPropertyChanged("WBSID",d,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"PredecessorIndices",{get:function(){return this._predIndices},set:function(b){if(this._predIndices!=b){var d=this._predIndices;this._predIndices=b;this.OnPropertyChanged("PredecessorIndices",d,b)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.ExcelTask.prototype,"Description",{get:function(){return this._description},
set:function(b){if(this._description!=b){var d=this._description;this._description=b;this.OnPropertyChanged("Description",d,b)}},enumerable:!0,configurable:!0}));f.ExcelTask.prototype.OnPropertyChanged=function(b,d,a){this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:b,OldValue:d,value:a})}})();
(function(f,b,d,a){function c(a,b){this.element=a;this.settings=f.extend({},h,b);this._defaults=h;this._name=g;this.init()}function e(a){return(a.filename?a.filename:"table2excel")+(a.fileext?a.fileext:".xlsx")}var g="table2excel",h={exclude:".noExl",name:"Table2Excel"};c.prototype={init:function(){var a=this;a.template={head:'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><meta http-equiv="content-type" content="application/vnd.ms-excel; charset=UTF-8"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets>',
sheet:{head:"<x:ExcelWorksheet><x:Name>",tail:"</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet>"},mid:"</x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>",table:{head:"<table>",tail:"</table>"},foot:"</body></html>"};a.tableRows=[];f(a.element).each(function(b,c){var d="";f(c).find("tr").not(a.settings.exclude).each(function(a,b){d+="<tr>"+f(b).html()+"</tr>"});a.tableRows.push(d)});a.tableToExcel(a.tableRows,a.settings.name,a.settings.sheetName)},
tableToExcel:function(a,c,g){var h="",p;this.uri="data:application/vnd.ms-excel;base64,";this.base64=function(a){return b.btoa(unescape(encodeURIComponent(a)))};this.format=function(a,b){return a.replace(/{(\w+)}/g,function(a,c){return b[c]})};g="undefined"===typeof g?"Sheet":g;this.ctx={worksheet:c||"Worksheet",table:a,sheetName:g};h=this.template.head;if(f.isArray(a))for(p in a)h+=this.template.sheet.head+g+p+this.template.sheet.tail;h+=this.template.mid;if(f.isArray(a))for(p in a)h+=this.template.table.head+
"{table"+p+"}"+this.template.table.tail;h+=this.template.foot;for(p in a)this.ctx["table"+p]=a[p];delete this.ctx.table;"undefined"!==typeof msie&&0<msie||navigator.userAgent.match(/Trident.*rv\:11\./)?(a=d.createElement("iframe"),a.id="__RQ_iframe",a.width="100%",a.height="100%",f("#__RQ_iframeCont").remove(),c=f("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(a),f(d.body).append(c),a.contentWindow.document.open("text/html","replace"),a.contentWindow.document.write(this.format(h,
this.ctx)),a.contentWindow.document.execCommand("SaveAs",!0,e(this.settings)),a.contentWindow.document.close()):(a=this.uri+this.base64(this.format(h,this.ctx)),h=d.createElement("a"),h.download=e(this.settings),h.href=a,d.body.appendChild(h),h.click||(a=d.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,b),h.dispatchEvent(a)),h.click(),d.body.removeChild(h));return!0}};f.fn[g]=function(a){var b=this;b.each(function(){f.data(b,"plugin_"+g,new c(this,a))});return b}})(jQuery,window,document);
(function(f){var b=null,d=0;createSVG=function(a,c){var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("version","1.1");d.setAttribute("viewBox","0 0 1 1");d.setAttribute("preserveAspectRatio","none");d.setAttribute("height","21px");void 0!=a.y2?(b=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),b.setAttribute("id","gradient"),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("x1",""+a.x1+"%"),b.setAttribute("y1",""+a.y1+"%"),b.setAttribute("x2",
""+a.x2+"%"),b.setAttribute("y2",""+a.y2+"%")):void 0==a.y2&&(b=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),b.setAttribute("id","gradient"),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("cx",""+a.x1+"%"),b.setAttribute("cy",""+a.y1+"%"),b.setAttribute("r",""+a.x2+"%"));for(var g=0;g<c.length;g++){var f=c[g],m=document.createElementNS("http://www.w3.org/2000/svg","stop"),k;for(k in f)f.hasOwnProperty(k)&&m.setAttribute(k,f[k]);b.appendChild(m)}d.appendChild(b);
g=document.createElementNS("http://www.w3.org/2000/svg","rect");g.setAttribute("x","0");g.setAttribute("y","0");g.setAttribute("height","21px");g.setAttribute("width","100%");g.setAttribute("fill","url(#gradient)");d.appendChild(g);return d};getGradientImageURL=function(a,b){if(void 0===window.canvg)window.console?console.error("canvg.js file is not found."):alert("canvg.js file is not found.");else{var d=createSVG(a,b),d=(new XMLSerializer).serializeToString(d),g=f('<canvas id="canvas" style="display:none;"></canvas>');
canvg(g[0],d);return g[0].toDataURL()}};window.RadiantQ&&RadiantQ.Gantt&&(RadiantQ.Gantt.GetGradientImageURL=getGradientImageURL);setGradientAsBackground=function(a,b,d){b=getGradientImageURL(b,d);d=f("<style></style>");d.append(""+a+"{background-image:url("+b+") !important;}");f(document.head).append(d)};f.fn.setGradientAsBackground=function(a,b){if(0==f("script[src*=canvg]",document).length||void 0===canvg)window.console?console.error("canvg.js file is not found."):alert("canvg.js file is not found.");
else{var e=this.selector;if(""===e){var g="dynamicGradient"+d,e="."+g;this.addClass(g);d++}setGradientAsBackground(e,a,b)}}})(jQuery);void 0==window.RadiantQ&&(window.RadiantQ={});RadiantQ.IAction=function(){this.AllowToMergeWithPrevious=!1};RadiantQ.IAction.prototype.Execute=function(){};RadiantQ.IAction.prototype.UnExecute=function(){};RadiantQ.IAction.prototype.CanExecute=function(){};RadiantQ.IAction.prototype.CanUnExecute=function(){};RadiantQ.IAction.prototype.TryToMerge=function(f){};
void 0==window.RadiantQ&&(window.RadiantQ={});(function(f){var b=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(Array);f.IActionHistory=b})(RadiantQ);RadiantQ.IActionHistory.prototype.CanMoveBack=!1;RadiantQ.IActionHistory.prototype.CanMoveForward=!1;RadiantQ.IActionHistory.prototype.CurrentState=null;RadiantQ.IActionHistory.prototype.CollectionChanged=null;RadiantQ.IActionHistory.prototype.AppendAction=function(f){};RadiantQ.IActionHistory.prototype.Clear=function(){};
RadiantQ.IActionHistory.prototype.MoveBack=function(){};RadiantQ.IActionHistory.prototype.MoveForward=function(){};RadiantQ.IActionHistory.prototype.EnumUndoableActions=function(){};RadiantQ.IActionHistory.prototype.CanMoveBack_M=function(){};RadiantQ.IActionHistory.prototype.CanMoveForward_M=function(){};RadiantQ.IActionHistory.prototype.CurrentState_M=function(){};void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.LimitActionCount=a;this.Init=function(){this.Head=new RadiantQ.SimpleHistoryNode;this.CurrentState_M(new RadiantQ.SimpleHistoryNode)};this.Init();this.CollectionChanged=new ObjectEvent("CollectionChanged");this._mCurrentState=new RadiantQ.SimpleHistoryNode;this.LastAction=this.Head=null;this.Length=0;this.FirstAction=null}__extends(a,b);return a}(RadiantQ.IActionHistory);f.SampleHistory=b})(RadiantQ);
RadiantQ.SampleHistory.prototype.CurrentState_M=function(f){if(0==arguments.length)return this._mCurrentState;null!=f?this._mCurrentState=f:window.console&&console.error&&console.error("ArgumentNullException on CurrentState.")};RadiantQ.SampleHistory.prototype.CanMoveForward_M=function(f){if(0==arguments.length)return null!=this.CurrentState_M().NextAction&&null!=this.CurrentState_M().NextNode};
RadiantQ.SampleHistory.prototype.CanMoveBack_M=function(f){if(0==arguments.length)return null!=this.CurrentState_M().PreviousAction&&null!=this.CurrentState_M().PreviousNode};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.SampleHistory.prototype,"CurrentState",{get:function(){return this._mCurrentState},set:function(f){null!=f?this._mCurrentState=f:window.console&&console.error&&console.error("ArgumentNullException on CurrentState.")}}),Object.defineProperty(RadiantQ.SampleHistory.prototype,"CanMoveForward",{get:function(){return null!=this.CurrentState.NextAction&&null!=this.CurrentState.NextNode}}),Object.defineProperty(RadiantQ.SampleHistory.prototype,
"CanMoveBack",{get:function(){return null!=this.CurrentState.PreviousAction&&null!=this.CurrentState.PreviousNode}}));RadiantQ.SampleHistory.prototype.RaiseUndoBufferChanged=function(){0<this.CollectionChanged.fn.length&&this.CollectionChanged.raise(this)};
RadiantQ.SampleHistory.prototype.AppendAction=function(f){if(null!=this.CurrentState_M().PreviousAction&&this.CurrentState_M().PreviousAction.TryToMerge(f))return this.RaiseUndoBufferChanged(),!1;this.CurrentState_M().NextAction=f;this.CurrentState_M().NextNode=new RadiantQ.SimpleHistoryNode(f,this.CurrentState_M());return!0};
RadiantQ.SampleHistory.prototype.Clear=function(){this.CollectionChanged.Dispose();this._mCurrentState=new RadiantQ.SimpleHistoryNode;this.LastAction=this.Head=null;this.Length=0;this.FirstAction=null;this.Init();this.RaiseUndoBufferChanged()};RadiantQ.SampleHistory.prototype.EnumUndoableActions=function(){for(var f=this.Head,b={};null!=f&&f!=this.CurrentState_M()&&null!=f.NextAction;)b.push(f.NextAction),f=f.NextNode;return b};
RadiantQ.SampleHistory.prototype.EnumRedoableActions=function(){for(var f=this.CurrentState_M(),b={};null!=f&&null!=f.NextAction;)b.push(f.NextAction),f=f.NextNode;return b};
RadiantQ.SampleHistory.prototype.MoveForward=function(){if(!this.CanMoveForward_M())throw new InvalidOperationException("History.MoveForward() cannot execute because CanMoveForward returned false (the current state is the last state in the undo buffer.");var f=this.CurrentState_M();f.NextAction.Execute();this.CurrentState_M(f.NextNode);0==this.Length?this.FirstAction=f:void 0!=this.LimitActionCount&&null!=this.LimitActionCount&&-1!=this.LimitActionCount&&this.Length==this.LimitActionCount&&(null!=
this.FirstAction&&(f=this.FirstAction.NextNode,null!=f&&(f.PreviousAction=null,f.PreviousNode=null),this.FirstAction.NextAction=null,this.FirstAction.NextNode=null,this.FirstAction=f),this.Length-=1);this.Length+=1;this.RaiseUndoBufferChanged()};
RadiantQ.SampleHistory.prototype.MoveBack=function(){if(!this.CanMoveBack_M())throw new InvalidOperationException("History.MoveBack() cannot execute because CanMoveBack returned false (the current state is the last state in the undo buffer.");this.CurrentState_M().PreviousAction.UnExecute();this.CurrentState_M().PreviousNode?(this.CurrentState_M(this.CurrentState_M().PreviousNode),this.Length-=1,this.RaiseUndoBufferChanged()):window.console&&console.error&&console.error("There is no previous recoreded action and could unable to process.")};
RadiantQ.SampleHistory.prototype.GetEnumerator=function(){return this.EnumUndoableActions().GetEnumerator()};void 0==window.RadiantQ&&(window.RadiantQ={});RadiantQ.SimpleHistoryNode=function(f,b){this.PreviousAction=f;this.PreviousNode=b};RadiantQ.SimpleHistoryNode.prototype.PreviousAction=null;RadiantQ.SimpleHistoryNode.prototype.PreviousNode=null;RadiantQ.SimpleHistoryNode.prototype.NextAction=null;RadiantQ.SimpleHistoryNode.prototype.NextNode=null;void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){var b=function(b){function a(){b.apply(this,arguments);this.IsDelayed=!1}__extends(a,b);return a}(RadiantQ.RQ_CollectionChangeNotifier);f.IMultiAction=b})(RadiantQ);void 0==window.RadiantQ&&(window.RadiantQ={});RadiantQ.ITransaction=function(){};RadiantQ.ITransaction.prototype.AccumulatingAction=null;RadiantQ.ITransaction.prototype.IsDelayed=!1;void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){var b=function(b){function a(){b.apply(this,arguments);this.IsDelayed=!0;this.Execute=function(){if(this.IsDelayed)for(var a=0;a<this.length;a++)this[a].Execute();else this.IsDelayed=!0};this.UnExecute=function(){this.reverse();for(var a=0;a<this.length;a++)this[a].UnExecute()};this.CanExecute=function(){for(var a=0;a<this.length;a++)if(!action.CanExecute())return!1;return!0};this.CanUnExecute=function(){for(var a=0;a<this.length;a++)if(!action.CanUnExecute())return!1;return!0};this.TryToMerge=
function(a){return!1};this.AllowToMergeWithPrevious=null}__extends(a,b);return a}(RadiantQ.IMultiAction);f.MultiAction=b})(RadiantQ);RadiantQ.MultiAction.prototype.Execute=function(){if(IsDelayed)for(var f=0;f<this.length;f++)action.Execute();else IsDelayed=!0};RadiantQ.MultiAction.prototype.UnExecute=function(){this.reverse();for(var f=0;f<this.length;f++)action.UnExecute()};RadiantQ.MultiAction.prototype.CanExecute=function(){for(var f=0;f<this.length;f++)if(!action.CanExecute())return!1;return!0};
RadiantQ.MultiAction.prototype.CanUnExecute=function(){for(var f=0;f<this.length;f++)if(!action.CanUnExecute())return!1;return!0};RadiantQ.MultiAction.prototype.TryToMerge=function(f){return!1};void 0==window.RadiantQ&&(window.RadiantQ={});
(function(f){var b=function(b){function a(a,e){b.apply(this,arguments);this.ActionManager=a;null!=a&&a.OpenTransaction(this);this.IsDelayed=!0;this.IsDelayed=e;this.accumulatingAction;this.AccumulatingAction_M=function(a){if(0==arguments.length)return this.accumulatingAction};RadiantQ.CanUseDefineProperty&&Object.defineProperty(this,"AccumulatingAction",{get:function(){return this.accumulatingAction}})}__extends(a,b);return a}(RadiantQ.ITransaction);f.TransactionBase=b})(RadiantQ);
RadiantQ.TransactionBase.prototype=new RadiantQ.ITransaction;RadiantQ.TransactionBase.prototype.ActionManager=null;RadiantQ.TransactionBase.prototype.Aborted=!1;RadiantQ.TransactionBase.prototype.Commit=function(){null!=this.ActionManager&&this.ActionManager.CommitTransaction()};RadiantQ.TransactionBase.prototype.Rollback=function(){null!=this.ActionManager&&(this.ActionManager.RollBackTransaction(),this.Aborted=!0)};RadiantQ.TransactionBase.prototype.Dispose=function(){this.Aborted||this.Commit()};
void 0==window.RadiantQ&&(window.RadiantQ={});(function(f){var b=function(b){function a(a,e){b.apply(this,arguments);this.accumulatingAction=new RadiantQ.MultiAction;this.Commit=function(){this.AccumulatingAction.IsDelayed=this.IsDelayed;RadiantQ.TransactionBase.prototype.Commit.apply(this)}}__extends(a,b);return a}(RadiantQ.TransactionBase);f.Transaction=b})(RadiantQ);RadiantQ.Transaction.Create=function(f,b){return void 0!=b||null!=b?new RadiantQ.Transaction(f,b):new RadiantQ.Transaction(f,!0)};
void 0==window.RadiantQ&&(window.RadiantQ={});(function(f){var b=function(b){function a(){b.apply(this,arguments);this.mAllowToMergeWithPrevious=!0;this.ExecuteCount=0}__extends(a,b);return a}(Array);f.AbstractAction=b})(RadiantQ);RadiantQ.AbstractAction.prototype.AllowToMergeWithPrevious_M=function(f){if(0==arguments.length)return this.mAllowToMergeWithPrevious;this.mAllowToMergeWithPrevious=f};
RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.AbstractAction.prototype,"AllowToMergeWithPrevious",{get:function(){return this.mAllowToMergeWithPrevious},set:function(f){this.mAllowToMergeWithPrevious=f}});RadiantQ.AbstractAction.prototype.Execute=function(){this.CanExecute()&&(this.ExecuteCore(),this.ExecuteCount++)};RadiantQ.AbstractAction.prototype.UnExecute=function(){this.CanUnExecute()&&(this.UnExecuteCore(),this.ExecuteCount--)};
RadiantQ.AbstractAction.prototype.ExecuteCore=function(){};RadiantQ.AbstractAction.prototype.UnExecuteCore=function(){};RadiantQ.AbstractAction.prototype.CanExecute=function(){return 0==this.ExecuteCount};RadiantQ.AbstractAction.prototype.CanUnExecute=function(){return!this.CanExecute()};RadiantQ.AbstractAction.prototype.TryToMerge=function(f){return!1};void 0==window.RadiantQ&&(window.RadiantQ={});
RadiantQ.ActionManager=function(f){History=this._mHistory=new RadiantQ.SampleHistory(f);this.CollectionChanged=new ObjectEvent("CollectionChanged");this.RaiseUndoBufferChanged=function(b,d){null!=this.CollectionChanged&&this.CollectionChanged.raise(this,d)};this.CurrentAction=null;this.EnableRecordingActions=this.ActionIsExecuting=!1;this.RecordAction=function(b){null==b&&window.console&&console.error&&console.error("ArgumentNullException - ActionManager.RecordAction: the existingAction argument is null");
this.CheckNotRunningBeforeRecording(b);if(!this.EnableRecordingActions&&b.CanExecute())b.Execute();else{var d=this.RecordingTransaction_M();null!=d?(d.AccumulatingAction_M().push(b),d.IsDelayed||b.Execute()):this.RunActionDirectly(b)}};this.CheckNotRunningBeforeRecording=function(b){null!=this.CurrentAction&&window.console&&console.error&&console.error("InvalidOperationException :ActionManager.RecordActionDirectly: the ActionManager is currently running or undoing an action ({0}), and this action (while being executed) attempted to recursively record another action ({1}), which is not allowed. You can examine the stack trace of this exception to see what the executing action did wrong and change this action not to influence the Undo stack during its execution. Checking if ActionManager.ActionIsExecuting == true before launching another transaction might help to avoid the problem. Thanks and sorry for the inconvenience.",
this.CurrentAction.toString())};this.recordActionLock={};this.RunActionDirectly=function(b){this.CheckNotRunningBeforeRecording(b);this.CurrentAction=b;this._mHistory.AppendAction(b)&&this._mHistory.MoveForward();this.CurrentAction=null};this.CreateTransaction=function(){return Transaction.Create(this)};this.CreateTransaction=function(b){return Transaction.Create(this,b)};this.mTransactionStack=[];this.History_M=function(b){if(0==arguments.length)return this.mHistory;null!=this.mHistory&&mHistory.CollectionChanged.subscribe(this.RaiseUndoBufferChanged,
this);this.mHistory=b;null!=this.mHistory&&this.mHistory.CollectionChanged.unsubscribe(this.RaiseUndoBufferChanged,this)};this.TransactionStack_M=function(b){if(0==arguments.length)return this.mTransactionStack;this.mTransactionStack=b};this.RecordingTransaction_M=function(b){if(0==arguments.length)return 0<this.TransactionStack_M().length?this.TransactionStack_M()[0]:null};this.CanUndo_M=function(b){if(0==arguments.length)return this._mHistory.CanMoveBack_M()};this.CanRedo_M=function(b){if(0==arguments.length)return this._mHistory.CanMoveForward_M()};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(this,"History",{get:function(){return this.mHistory},set:function(b){null!=this.mHistory&&mHistory.CollectionChanged.subscribe(this.RaiseUndoBufferChanged,this);this.mHistory=b;null!=this.mHistory&&this.mHistory.CollectionChanged.unsubscribe(this.RaiseUndoBufferChanged,this)}}),Object.defineProperty(this,"TransactionStack",{get:function(){return this.mTransactionStack},set:function(b){this.mTransactionStack=b}}),Object.defineProperty(this,"RecordingTransaction",
{get:function(){return 0<this.TransactionStack_M().length?this.TransactionStack_M()[0]:null}}),Object.defineProperty(this,"CanUndo",{get:function(){return this._mHistory.CanMoveBack}}),Object.defineProperty(this,"CanRedo",{get:function(){return this._mHistory.CanMoveForward}}));this.OpenTransaction=function(b){this.TransactionStack_M().push(b)};this.CommitTransaction=function(){0==this.TransactionStack_M().length&&window.console&&console.error&&console.error("nvalidOperationExceptionActionManager.CommitTransaction was called when there is no open transaction (TransactionStack is empty). Please examine the stack trace of this exception to find code which called CommitTransaction one time too many. Normally you don't call OpenTransaction and CommitTransaction directly, but use using(var t = Transaction.Create(Root)) instead.");
var b=this.TransactionStack_M().pop();0<b.AccumulatingAction_M().length&&this.RecordAction(b.AccumulatingAction_M())};this.RollBackTransaction=function(){if(0!=this.TransactionStack_M().length){var b=this.TransactionStack_M()[0];null!=b&&null!=b.AccumulatingAction_M()&&b.AccumulatingAction_M().UnExecute();this.TransactionStack_M().splice()}};this.Undo=function(){this.CanUndo_M()&&(this.ActionIsExecuting&&window.console&&console.error&&console.error("InvalidOperationExceptionActionManager is currently busy executing a transaction ({0}). This transaction has called Undo() which is not allowed until the transaction ends. Please examine the stack trace of this exception to see what part of your code called Undo.",
this.CurrentAction),this.CurrentAction=this._mHistory.CurrentState_M().PreviousAction,this._mHistory.MoveBack(),this.CurrentAction=null)};this.Redo=function(){this.CanRedo_M()&&(this.ActionIsExecuting&&window.console&&console.error&&console.error("InvalidOperationExceptionActionManager is currently busy executing a transaction ({0}). This transaction has called Redo() which is not allowed until the transaction ends. Please examine the stack trace of this exception to see what part of your code called Redo.",
this.CurrentAction),this.CurrentAction=this._mHistory.CurrentState_M().NextAction,this._mHistory.MoveForward(),this.CurrentAction=null)};this.Clear=function(){this._mHistory.Clear();this.CurrentAction=null};this.EnumUndoableActions=function(){return this._mHistory.EnumUndoableActions()};this.EnumRedoableActions=function(){return this._mHistory.EnumRedoableActions()}};void 0==window.RadiantQ?window.RadiantQ={}:void 0==window.RadiantQ.Gantt&&(window.RadiantQ.Gantt={});
(function(f){var b=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(RadiantQ.ActionManager);f.GanttControlActionManager=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.IgnoreFirst=arguments[arguments.length-1];this.callCount=0;this.ExecuteCore=function(){this.callCount++;!0==this.IgnoreFirst&&1==this.callCount||this.OnExecuteCore()};this.OnExecuteCore=function(){}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.IgnoreFirstAbstractAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.IgnoreFirstAbstractAction.prototype.IgnoreFirst=null;
(function(f){var b=function(b){function a(a,e,g,f,m,k){b.apply(this,arguments);a&&(this.GC=a);e&&(this.ActivityID=e.ID_M(),this.OldPrefTime=f||e.PreferredStartTime_M(),this.OldTime=m||e.StartTime_M());g&&(this.NewTime=g)}__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.SetTimeActionBase=b})(RadiantQ.Gantt);RadiantQ.Gantt.SetTimeActionBase.prototype.GetActivity=function(){return this.GC.Model.GetActivityById(this.ActivityID)};
RadiantQ.Gantt.SetTimeActionBase.prototype.ActivityID=null;RadiantQ.Gantt.SetTimeActionBase.prototype.NewTime=null;RadiantQ.Gantt.SetTimeActionBase.prototype.GC=null;RadiantQ.Gantt.SetTimeActionBase.prototype.OldTime=null;RadiantQ.Gantt.SetTimeActionBase.prototype.OldPrefTime=null;
(function(f){var b=function(b){function a(a,e,g,f,m,k){b.apply(this,arguments);this.Name='Set StartTime on Task: "{0}"'+e.ActivityName_M();this.OnExecuteCore=function(){var a=this.GetActivity();a.PreferredStartTime_M(this.NewTime);a.StartTime_M(this.NewTime);this.GC.RaiseActivityTimeChanged(a,RadiantQ.Gantt.ActivityTimeChangeType.StartTimeChanged,this.NewTime)};this.UnExecuteCore=function(){var a=this.GetActivity();a.PreferredStartTime_M(this.OldPrefTime);a.StartTime_M(this.OldTime);this.GC.RaiseActivityTimeChanged(a,
RadiantQ.Gantt.ActivityTimeChangeType.StartTimeChanged,this.OldTime)}}__extends(a,b);return a}(RadiantQ.Gantt.SetTimeActionBase);f.SetStartTimeAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a,e,g,f,m,k){b.apply(this,arguments);this.Name='Set EndTime on Task: "{0}"'+e.ActivityName_M();this.OnExecuteCore=function(){var a=this.GetActivity();a.EndTime_M(this.NewTime);this.GC.RaiseActivityTimeChanged(a,RadiantQ.Gantt.ActivityTimeChangeType.DurationResized,this.NewTime)};this.UnExecuteCore=function(){var a=this.GetActivity();a.PreferredStartTime_M(this.OldPrefTime);a.EndTime_M(this.OldTime);this.GC.RaiseActivityTimeChanged(a,RadiantQ.Gantt.ActivityTimeChangeType.DurationResized,
this.OldTime)}}__extends(a,b);return a}(RadiantQ.Gantt.SetTimeActionBase);f.SetEndTimeAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a,e,g){b.apply(this,arguments);this._gc=a;this.ActivityID=e.ID_M();this._oldDuration=e.Duration_M();this._newDuration=g;this.Name='Set Duration on Task: "{0}"'+e.ActivityName_M();this.ExecuteCore=function(){this.GetActivity(this.ActivityID).Duration_M(this._newDuration)};this.UnExecuteCore=function(){this.GetActivity(this.ActivityID).Duration_M(this._oldDuration)}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.SetDurationAction=b})(RadiantQ.Gantt);
RadiantQ.Gantt.SetDurationAction.prototype._oldDuration=null;RadiantQ.Gantt.SetDurationAction.prototype._newDuration=null;RadiantQ.Gantt.SetDurationAction.prototype._gc=null;RadiantQ.Gantt.SetDurationAction.prototype.GetActivity=function(){return this._gc.Model.GetActivityById(this.ActivityID)};RadiantQ.Gantt.SetDurationAction.prototypeActivityID=null;
(function(f){var b=function(b){function a(a,e,g,f){b.apply(this,arguments);this._model=a;this._fromActID=e.ID_M();this._toActID=g.ID_M();this.Name='Create new Dependency from: "{0}" to: "{1}"'+e.ActivityName_M()+"  "+g.ActivityName_M();this.OnExecuteCore=function(){this._model.CreateNewDependency(this._model.GetActivityById(this._fromActID),this._model.GetActivityById(this._toActID))};this.UnExecuteCore=function(){RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency(this._model,this._fromActID,
this._toActID)}}__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.CreateNewDependencyAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.CreateNewDependencyAction.prototype._model=null;RadiantQ.Gantt.CreateNewDependencyAction.prototype._fromActID=null;RadiantQ.Gantt.CreateNewDependencyAction.prototype._toActID=null;
RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency=function(f,b,d){d=f.Dependencies_M().GetPredecessors(f.GetActivityById(d));for(var a=0;a<d.length;a++){var c=d[a];if(c.FromActivity_M().ID_M()==b){f.Dependencies_M().remove(c);break}}};
(function(f){var b=function(b){function a(a,e,g){b.apply(this,arguments);this._model=a;this._fromActID=e.FromActivity_M().ID_M();this._toActID=e.ToActivity_M().ID_M();this._lag=e.Lag;this._type=e.Type;this.OnExecuteCore=function(){RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency(this._model,this._fromActID,this._toActID)};this.UnExecuteCore=function(){this._model.CreateNewDependency(this._model.GetActivityById(this._fromActID),this._model.GetActivityById(this._toActID),this._type,this._lag)}}
__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.DeleteDependencyAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.DeleteDependencyAction.prototype._model=null;RadiantQ.Gantt.DeleteDependencyAction.prototype._fromActID=null;RadiantQ.Gantt.DeleteDependencyAction.prototype._toActID=null;RadiantQ.Gantt.DeleteDependencyAction.prototype._lag=null;RadiantQ.Gantt.DeleteDependencyAction.prototype._type=null;
(function(f){var b=function(b){function a(a,e,g,f){b.apply(this,arguments);this._model=a;this._fromActID=e.FromActivity_M().ID_M();this._toActID=e.ToActivity_M().ID_M();this._lag=e.Lag_M();this._newType=g;this._oldtype=e.Type;this.OnExecuteCore=function(){RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency(this._model,this._fromActID,this._toActID);var a=this._model.GetActivityById(this._fromActID),b=this._model.GetActivityById(this._toActID);!0==this._model.CanAddNewDependency(a,b,RadiantQ.Gantt.Model.NewDependencyAddScenarioType.None,
this._newType)?this._model.CreateNewDependencyInternal(a,b,this._newType,this._lag,!0):this._model.CreateNewDependencyInternal(a,b,this._oldtype,this._lag,!0)};this.UnExecuteCore=function(){RadiantQ.Gantt.CreateNewDependencyAction.DeleteDependency(this._model,this._fromActID,this._toActID);this._model.CreateNewDependency(this._model.GetActivityById(this._fromActID),this._model.GetActivityById(this._toActID),this._oldtype,this._lag)}}__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);
f.ChangeDependencyTypeAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._model=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._fromActID=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._toActID=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._lag=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._newType=null;RadiantQ.Gantt.ChangeDependencyTypeAction.prototype._oldtype=null;
(function(f){var b=function(b){function a(a,e,g){b.apply(this,arguments);this._act=a;this._oldPP=a.ProgressPercent_M();this._newPP=e;this.Name='Change Progress on Task: "{0}"'+a.ActivityName_M();this.OnExecuteCore=function(){this._act.ProgressPercent_M(this._newPP)};this.UnExecuteCore=function(){this._act.ProgressPercent_M(this._oldPP)}}__extends(a,b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.SetProgressValueAction=b})(RadiantQ.Gantt);
RadiantQ.Gantt.SetProgressValueAction.prototype._act=null;RadiantQ.Gantt.SetProgressValueAction.prototype._oldPP=null;RadiantQ.Gantt.SetProgressValueAction.prototype._newPP=null;(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.AffectedActivityDependencies=new RadiantQ.Gantt.Dictionary;this._actDeps=new RadiantQ.Gantt.Dictionary;a&&(this.GC=a,this.Model=a.Model)}__extends(a,b);return a}(RadiantQ.AbstractAction);f.AffectedDependenciesTrackingAction=b})(RadiantQ.Gantt);
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.GC=null;RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.Model=null;RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.AffectedActivityDependencies=new RadiantQ.Gantt.Dictionary;RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype._actDeps=new RadiantQ.Gantt.Dictionary;
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.CacheDependencies=function(){this.AffectedActivityDependencies.Clear();for(var f=1;f<=this.Model.AllActivities_M().length;f++){var b=this.Model.AllActivities_M()[f];b&&(null!=b.PredecessorIndexString_M()&&void 0!=b.PredecessorIndexString_M()?this._actDeps.Add(b.ID_M(),b.PredecessorIndexString_M()):this._actDeps.Add(b.ID_M(),""))}};
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.TrackAffectedDependenciesFromCache=function(){this.AffectedActivityDependencies.Clear();for(var f=0;f<this._actDeps.keys.length;f++){var b=this.Model.GetActivityById(this._actDeps.keys[f]);!1==(b.PredecessorIndexString_M()===this._actDeps[b.ID_M()])&&this.AffectedActivityDependencies.Add(b.ID_M(),this._actDeps[b.ID_M()])}};
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.ReapplyAffectedActivityDependencies=function(){for(var f=0;f<this.AffectedActivityDependencies.keys.length;f++){var b=this.AffectedActivityDependencies.keys[f],d=this.Model.GetActivityById(b);View.GanttActivityView.prototype.UpdateActivityDependency(this.Model,d,this.AffectedActivityDependencies[b],RadiantQ.Gantt.Model.NewDependencyAddScenarioType.None)}this.AffectedActivityDependencies.Clear()};
RadiantQ.Gantt.AffectedDependenciesTrackingAction.prototype.GetActivityView=function(f){return null==this.GC.Model.GetActivityById(f)?null:this.GC.ActivityViews.GetActivityViewByID(f)};(function(f){var b=function(b){function a(a,e){b.apply(this,arguments);void 0!=e&&null!=e&&(this.ActivityID=e.ID_M())}__extends(a,b);return a}(RadiantQ.Gantt.AffectedDependenciesTrackingAction);f.IndentOutdentBase=b})(RadiantQ.Gantt);RadiantQ.Gantt.IndentOutdentBase.prototype.ActivityID=null;
(function(f){var b=function(b){function a(a,e){b.apply(this,arguments);this.Name='Indented task "{0}"'+e.ActivityName_M();this.ExecuteCore=function(){var a=this.GetActivityView(this.ActivityID);if(null!=a){a.Activity_M();var b=this.GC.ActivityViews.indexOf(a);0<b&&(b=this.GC.GetParentableActivityView(b-1,a.IndentLevel_M()),null!=b?(this.CacheDependencies(),this.oldParentStart=b.Activity_M().StartTime_M(),this.oldParentEffort=b.Activity_M().Effort_M(),this.GC.Indent(a),this.TrackAffectedDependenciesFromCache()):
window.console&&console.error&&console.error("IndentAction called on an activity that cannot be indented. Use GanttControl.CanIndent to check first."))}};this.UnExecuteCore=function(){var a=this.GetActivityView(this.ActivityID);if(null!=a){var b=a.Activity_M().Parent_M();this.GC.Outdent(a);this.ReapplyAffectedActivityDependencies();null!=b&&0==b.ChildActivities_M().length&&(b.StartTime_M(this.oldParentStart),b.Effort_M(this.oldParentEffort))}}}__extends(a,b);return a}(RadiantQ.Gantt.IndentOutdentBase);
f.IndentAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.IndentAction.prototype.oldParentStart=null;RadiantQ.Gantt.IndentAction.prototype.oldParentEffort=null;
(function(f){var b=function(b){function a(a,e){b.apply(this,arguments);this.Name='Outdented Task: "{0}"'+e.ActivityName_M();this.ExecuteCore=function(){var a=this.GetActivityView(this.ActivityID);if(null!=a){var b=a.Activity_M(),c=this.GC.ActivityViews[0]==a,d=a.IndentLevel_M();if(!c&&0<d){this.CacheDependencies();this.oldStart=b.StartTime_M();this.oldEffort=b.Effort_M();this.originalNextSiblingId=-1;for(b=this.GC.ActivityViews.indexOf(a)+1;b<this.GC.ActivityViews.length;b++)if(c=this.GC.ActivityViews[b],
c.IndentLevel_M()==a.IndentLevel_M()){this.originalNextSiblingId=c.Activity_M().ID_M();break}this.GC.Outdent(a);this.TrackAffectedDependenciesFromCache()}}};this.UnExecuteCore=function(){var a=this.GetActivityView(this.ActivityID);if(null!=a){a.Activity_M().Parent_M();this.GC.Indent(a);if(-1!=this.originalNextSiblingId){for(var b=-1,c=this.GC.ActivityViews.indexOf(a)+1;c<this.GC.ActivityViews.length;c++){var d=this.GC.ActivityViews[c];if(d.Activity_M().ID_M()==this.originalNextSiblingId){b=c;break}}this.originalNextSiblingId=
-1;if(-1!=b){for(var e=new RadiantQ.Gantt.Dictionary,c=b;c<this.GC.ActivityViews.length;c++){d=this.GC.ActivityViews[c];if(d.IndentLevel_M()<=a.IndentLevel_M())break;d.IndentLevel_M()==a.IndentLevel_M()+1&&e.Add(d,d.PredecessorIndexString_M())}for(b=0;b<e.keys.length;b++)this.GC.Outdent(e.keys[b]);for(b=0;b<e.keys.length;b++)c=e.keys[b],c.PredecessorIndexString_M()!=e[c]&&c.PredecessorIndexString_M(e[c])}}this.ReapplyAffectedActivityDependencies();a.Activity_M().StartTime_M(this.oldStart);a.Activity_M().Effort_M(this.oldEffort)}}}
__extends(a,b);return a}(RadiantQ.Gantt.IndentOutdentBase);f.OutdentAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.OutdentAction.prototype.oldStart=null;RadiantQ.Gantt.OutdentAction.prototype.oldEffort=null;RadiantQ.Gantt.OutdentAction.prototype.originalNextSiblingId=-1;
(function(f){var b=function(b){function a(a,e,g){b.apply(this,arguments);this.GC=a;this.actID=void 0!=e.Activity_M?e.Activity_M().ID_M():e.ID_M();this.Name=(this._expand=g)?'Activity "{0}" expanded'+e.Activity_M().ActivityName_M():'Activity "{0}" collapsed'+e.Activity_M().ActivityName_M();this.ExecuteCore=function(){var a=this.GC.ActivityViews.GetActivityViewByID(this.actID);null!=a&&a.IsExpanded_M(this._expand)};this.UnExecuteCore=function(){var a=this.GC.ActivityViews.GetActivityViewByID(this.actID);
null!=a&&a.IsExpanded_M(!this._expand)}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.ExpandCollapseActivityViewAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.ExpandCollapseActivityViewAction.prototype.GC=null;RadiantQ.Gantt.ExpandCollapseActivityViewAction.prototype.actID=null;RadiantQ.Gantt.ExpandCollapseActivityViewAction.prototype._expand=null;
(function(f){var b=function(b){function a(a,e){b.apply(this,arguments);this.newtask=e;this.gc=a;"object"!==typeof a.options.DataSource&&window.console&&console.error&&console.error("Exception on The GanttControl's ItemsSource should be an IList so that the bound task object can be added/deleted on redo/undo.");this.Name="Added new task.";this.ExecuteCore=function(){this.newActivityID=this.gc.AddNewItem(this.newtask).ID_M()};this.UnExecuteCore=function(){var a=this.gc.RemoveActivity(this.newActivityID);
RemoveInArray(this.gc.options.DataSource,a[0].DataSource_M())}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.AddAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.AddAction.prototype.gc=null;RadiantQ.Gantt.AddAction.prototype.newtask=null;RadiantQ.Gantt.AddAction.prototype.newActivityID=null;
(function(f){var b=function(b){function a(a,e,g,f,m){b.apply(this,arguments);this.source=a;this._newValue=f;this._oldValue=g;this.propName=e;this.Name='Changed property "{0}" in grid'+e;this.OnExecuteCore=function(){RadiantQ.Gantt.CellChangeInfo.prototype.SetNestedPropValue(this.Source_M(),this.propName,this._newValue,this.DataSource)};this.UnExecuteCore=function(){RadiantQ.Gantt.CellChangeInfo.prototype.SetNestedPropValue(this.Source_M(),this.propName,this._oldValue,this.DataSource)}}__extends(a,
b);return a}(RadiantQ.Gantt.IgnoreFirstAbstractAction);f.GenericCellChangeActionInGrid=b})(RadiantQ.Gantt);RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.source=null;RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.propName=null;RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype._oldValue=null;RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype._newValue=null;RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.Source_M=function(f){if(0==arguments.length)return this.source};
RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.PropName_M=function(f){if(0==arguments.length)return this.propName};RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.OldValue_M=function(f){if(0==arguments.length)return this._oldValue};RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype.NewValue_M=function(f){if(0==arguments.length)return this._newValue};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype,"Source",{get:function(){return this.source}}),Object.defineProperty(RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype,"PropName",{get:function(){return this.propName}}),Object.defineProperty(RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype,"OldValue",{get:function(){return this._oldValue}}),Object.defineProperty(RadiantQ.Gantt.GenericCellChangeActionInGrid.prototype,"NewValue",
{get:function(){return this._newValue}}));
(function(f){var b=function(b){function a(a,e,g,f,m,k,l){b.apply(this,[a,g,f,m,k]);this._model=a;this.actId=e;this.DataSource=l;this.Source_M=function(a){if(0==arguments.length)return this._model.GetActivityById(this.actId)};RadiantQ.CanUseDefineProperty&&Object.defineProperty(this,"Source",{get:function(){return this._model.GetActivityById(this.actId)}})}__extends(a,b);return a}(RadiantQ.Gantt.GenericCellChangeActionInGrid);f.GenericActivityChangeActionInGrid=b})(RadiantQ.Gantt);RadiantQ.Gantt.GenericActivityChangeActionInGrid.prototype._model;
RadiantQ.Gantt.GenericActivityChangeActionInGrid.prototype.actId;
(function(f){var b=function(b){function a(a,e,g,f,m,k,l,n){b.apply(this,[e,f,m,k,l]);this._model=e;this.actId=g;this.DataSource=n;this._gc=a;this.Source_M=function(a){if(0==arguments.length)return"ProjectGantt"==this._gc.GanttType?this._gc.ActivityViews.GetActivityViewByID(this.actId):this.DataSource};RadiantQ.CanUseDefineProperty&&Object.defineProperty(this,"Source",{get:function(){return"ProjectGantt"==this._gc.GanttType?this._gc.ActivityViews.GetActivityViewByID(this.actId):this.DataSource}})}
__extends(a,b);return a}(RadiantQ.Gantt.GenericCellChangeActionInGrid);f.GenericActivityViewChangeActionInGrid=b})(RadiantQ.Gantt);RadiantQ.Gantt.GenericActivityViewChangeActionInGrid.prototype._model=null;RadiantQ.Gantt.GenericActivityViewChangeActionInGrid.prototype.actId=null;RadiantQ.Gantt.GenericActivityViewChangeActionInGrid.prototype._gc=null;
(function(f){var b=function(b){function a(a,e,g,f,m){b.apply(this,arguments);if(1==arguments.length){var k=this.GC;this._idlByActId=new RadiantQ.Gantt.Dictionary;if(null!=k.SelectedItem_M()){for(var l=Number.MAX_VALUE,n=k.SelectedItems,p=0;p<n.length;p++){var q=n[p],q=q._activity._displayIndex;this._selIndices.push(q);q<l&&(l=q)}this.selTopIndex=l;k.OnBeforeDragStart(this.selTopIndex,k.SelectedItems.length);this.toMoveCount=k.SelectedItems.length;this.toMoveDest=this.GetBeforeMoveDest(this.selTopIndex,
this.toMoveCount);this.CanMoveToDest(this.selTopIndex,this.toMoveDest)?this.CommonInit():this.selTopIndex=-1}else throw new Exception("This Move Action cannot be created when there are no selected items in the gantt.");}else if(5==arguments.length){k=this.GC;this._idlByActId=new RadiantQ.Gantt.Dictionary;if(null==m||void 0==m)m=f;l=0;-1<m&&(l=k.ActivityViews[m].Activity_M().ChildActivities_M().length);if(f>=e-1&&f<e+g&&0==l)throw new Exception("MoveSelectedItemsBase constructor called with invalid destination index.");
n=k.SelectedItems;for(p=0;p<n.length;p++)q=n[p],q=q._activity._displayIndex,this._selIndices.push(q);this.selTopIndex=e;this.toMoveCount=g;this.toMoveDest=f;this.CommonInit()}this.ExecuteCore=function(){var a=this.GC;if(-1!=this.selTopIndex){this.CacheDependencies();a.SelectedItems.splice();a.GetGanttTable().MoveRows(this.selTopIndex,this.toMoveCount,this.toMoveDest,null,void 0,void 0);this.TrackAffectedDependenciesFromCache();for(var b=this.GetAfterMoveDest(),c=0;c<this.toMoveCount;c++)a.SelectedItems.push(a.ActivityViews.GetActivityViewByID(b+
c))}};this.UnExecuteCore=function(){var a=this.GC;if(-1!=this.selTopIndex){a.SelectedItems.splice();var b=this.GetAfterMoveDest();a.GetGanttTable().MoveRows(b,this.toMoveCount,this.GetUndoDest(b,this.toMoveCount),null,void 0,void 0);for(var c=b=this.selTopIndex;c<b+this.toMoveCount;c++){var d=a.ActivityViews[c],e=this._idlByActId[d.Activity_M().ID_M()];e!=d.IndentLevel_M()&&this.AdjustIndent(d,e)}this.ReapplyAffectedActivityDependencies();for(c=0;c<this._selIndices;c++)a.SelectedItems.push(a.ActivityViews[c])}}}
__extends(a,b);return a}(RadiantQ.Gantt.AffectedDependenciesTrackingAction);f.MoveSelectedItemsBase=b})(RadiantQ.Gantt);RadiantQ.Gantt.MoveSelectedItemsBase.prototype._selIndices=[];RadiantQ.Gantt.MoveSelectedItemsBase.prototype.selTopIndex=null;RadiantQ.Gantt.MoveSelectedItemsBase.prototype.toMoveCount=1;RadiantQ.Gantt.MoveSelectedItemsBase.prototype.toMoveDest=-1;RadiantQ.Gantt.MoveSelectedItemsBase.prototype._idlByActId=new RadiantQ.Gantt.Dictionary;
RadiantQ.Gantt.MoveSelectedItemsBase.prototype.CommonInit=function(){for(var f=this.selTopIndex;f<this.selTopIndex+this.toMoveCount;f++){var b=this.GC.ActivityViews[f];this._idlByActId.Add(b.Activity_M().ID_M(),b.IndentLevel_M())}};RadiantQ.Gantt.MoveSelectedItemsBase.prototype.AdjustIndent=function(f,b){for(var d=b-f.IndentLevel_M();0>d;)d++,this.GC.Outdent(f);for(;0<d;)d--,this.GC.Indent(f)};RadiantQ.Gantt.MoveSelectedItemsBase.prototype.GetBeforeMoveDest=function(f,b){};
RadiantQ.Gantt.MoveSelectedItemsBase.prototype.GetAfterMoveDest=function(){return this.selTopIndex<this.toMoveDest?this.toMoveDest-this.toMoveCount+1:this.toMoveDest+1};RadiantQ.Gantt.MoveSelectedItemsBase.prototype.GetUndoDest=function(f,b){return this.selTopIndex<this.toMoveDest?this.selTopIndex-1:this.selTopIndex+b-1};RadiantQ.Gantt.MoveSelectedItemsBase.prototype.CanMoveToDest=function(f,b){};
(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.Name="Moved Selected Items down"}__extends(a,b);a.prototype.GetBeforeMoveDest=function(a,b){return a+b};a.prototype.CanMoveToDest=function(a,b){return b<this.GC.ActivityViews.length?!0:!1};return a}(RadiantQ.Gantt.MoveSelectedItemsBase);f.MoveSelectedItemsDownAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a){b.apply(this,arguments);this.Name="Moved selected items up."}__extends(a,b);a.prototype.GetBeforeMoveDest=function(a,b){return a-2};a.prototype.CanMoveToDest=function(a,b){return 0<a?!0:!1};return a}(RadiantQ.Gantt.MoveSelectedItemsBase);f.MoveSelectedItemsUpAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a,e,f,h,m){b.apply(this,arguments);this.Name="Moved rows from index {0}, count: {1}, to index {2}"+e+f+h;this.GetBeforeMoveDest=function(a,b){throw new NotImplementedException;};this.CanMoveToDest=function(a,b){return!0}}__extends(a,b);return a}(RadiantQ.Gantt.MoveSelectedItemsBase);f.MoveRowsAction=b})(RadiantQ.Gantt);
(function(f){var b=function(b){function a(a,e,f,h){b.apply(this,arguments);this.asChild=h;this.basedOnActivityId=e.Activity_M().ID_M();this.cachedTask=f;this.ganttControl=a;this.Name='Inserted new Activity based on "{0}"'+e.Activity_M().ActivityName_M();this.ExecuteCore=function(){var a=this.ganttControl.ActivityViews.GetActivityViewByID(this.basedOnActivityId);this.parentEndBeforeInsertAsChild=DateTime.MinValue;this.asChild?(a.IsParent_M()||(this.parentEndBeforeInsertAsChild=a.Activity_M().EndTime_M()),
this.insertedActivityID=RadiantQ.Gantt.InsertAction.InsertAsChildCommon(this.ganttControl,this.basedOnActivityId,this.cachedTask)):this.insertedActivityID=this.ganttControl.InsertNewItemAsSiblingBelow(this.cachedTask,this.ganttControl.ActivityViews.indexOf(a),!0).ID_M()};this.UnExecuteCore=function(){RadiantQ.Gantt.DeleteAction.DeleteCommon(this.ganttControl,this.insertedActivityID);if(this.parentEndBeforeInsertAsChild!=DateTime.MinValue){var a=this.ganttControl.ActivityViews.GetActivityViewByID(this.basedOnActivityId);
!1==a.IsParent_M()&&a.Activity_M().EndTime_M()!=this.parentEndBeforeInsertAsChild&&a.Activity_M().EndTime_M(this.parentEndBeforeInsertAsChild)}}}__extends(a,b);return a}(RadiantQ.AbstractAction);f.InsertAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.InsertAction.prototype.cachedTask;RadiantQ.Gantt.InsertAction.prototype.ganttControl;RadiantQ.Gantt.InsertAction.prototype.basedOnActivityId;RadiantQ.Gantt.InsertAction.prototype.insertedActivityID;RadiantQ.Gantt.InsertAction.prototype.asChild;
RadiantQ.Gantt.InsertAction.prototype.parentEndBeforeInsertAsChild=new Date;RadiantQ.Gantt.InsertAction.InsertAsChildCommon=function(f,b,d){b=-1!=b?f.Model.GetActivityById(b):null;var a=f.ActivityViews.GetActivityViewByID(b.ID_M());d=f.InsertNewItemAsChildOf(d,f.ActivityViews.indexOf(a),!0);var a=f.ActivityViews.GetActivityViewByID(d.ID_M()),c=d.ID_M();for(null!=a&&(c=a.Activity_M().ID_M());d.Parent_M()!=b;)f.Outdent(a);return c};
(function(f){var b=function(b){function a(a,e){b.apply(this,arguments);if("object"!=typeof a.options.DataSource)throw new Exception("The GanttControl's ItemsSource should be an IList so that the bound task object can be deleted/added on redo/undo.");this._predByID=new RadiantQ.Gantt.Dictionary;this.removedActivityId=e.ID_M();this.ganttControl=a;this.cachedTask=e.DataSource_M();if(0<e.ChildActivities_M().length)throw new Exception("All child activities must be deleted before deleting the parent.");
var f=a.Model.Dependencies_M().GetSuccessors(e);e.PredecessorIndexString_M()&&this._predByID.Add(e.ID_M(),e.PredecessorIndexString_M());for(var h=0;h<f.length;h++){var m=f[h];this._predByID.Add(m.ToActivity_M().ID_M(),m.ToActivity_M().PredecessorIndexString_M())}null!=e.Parent_M()?(this.parentID=e.Parent_M().ID_M(),this.childIndex=e.Parent_M().ChildActivities_M().indexOf(e)):this.childIndex=a.Model.Activities_M().indexOf(e);this.Name='Deleted Activity "{0}"'+e.ActivityName_M();this.ExecuteCore=function(){RadiantQ.Gantt.DeleteAction.DeleteCommon(this.ganttControl,
this.removedActivityId)};this.UnExecuteCore=function(){var a=-1!=this.parentID?this.ganttControl.Model.GetActivityById(this.parentID):null,b=null;if(null!=a){var c=this.ganttControl.ActivityViews.GetActivityViewByID(a.ID_M());if(this.childIndex==a.ChildActivities_M().length)RadiantQ.Gantt.InsertAction.InsertAsChildCommon(this.ganttControl,this.parentID,this.cachedTask);else if(0==this.childIndex){var a=RadiantQ.Gantt.InsertAction.InsertAsChildCommon(this.ganttControl,this.parentID,this.cachedTask),
d=this.ganttControl.ActivityViews.GetActivityViewByID(a),a=c.DisplayIndex_M(),d=d.DisplayIndex_M();this.ganttControl.GetGanttTable().MoveRows(d,1,a,c,void 0,void 0)}else b=c.Activity_M().ChildActivities_M()[this.childIndex-1]}else 0==this.childIndex?(a=this.ganttControl.AddNewItem(this.cachedTask).ID_M(),d=this.ganttControl.ActivityViews.GetActivityViewByID(a),d=d.DisplayIndex_M(),this.ganttControl.GetGanttTable().MoveRows(d,1,-1,null,void 0,void 0)):b=this.ganttControl.Model.Activities_M()[this.childIndex-
1];null!=b&&(b=this.ganttControl.ActivityViews.GetActivityViewByID(b.ID_M()),this.ganttControl.InsertNewItemAsSiblingBelow(this.cachedTask,this.ganttControl.ActivityViews.indexOf(b),!0));for(b=0;b<this._predByID.keys.length;b++)a=this._predByID.keys[b],this._predByID[a]&&(c=this.ganttControl.ActivityViews.GetActivityViewByID(a).Activity_M(),View.GanttActivityView.prototype.UpdateActivityDependency(this.ganttControl.Model,c,this._predByID[a],RadiantQ.Gantt.Model.NewDependencyAddScenarioType.None))}}
__extends(a,b);return a}(RadiantQ.AbstractAction);f.DeleteAction=b})(RadiantQ.Gantt);RadiantQ.Gantt.DeleteAction.prototype.ganttControl;RadiantQ.Gantt.DeleteAction.prototype.removedActivityId;RadiantQ.Gantt.DeleteAction.prototype.parentID=-1;RadiantQ.Gantt.DeleteAction.prototype.childIndex;RadiantQ.Gantt.DeleteAction.prototype.cachedTask;RadiantQ.Gantt.DeleteAction.prototype._predByID=new RadiantQ.Gantt.Dictionary;
RadiantQ.Gantt.DeleteAction.DeleteCommon=function(f,b){var d=f.RemoveActivity(b);RemoveInArray(f.options.DataSource,d[0].DataSource_M())};
(function(f){function b(b,a,c,e,g){this.element=f(b);this.ItemsSource=c;this.RowHeight=e;this.GC=g;this.$scrollContainer=f(a);this.$actualContent=f(".vsb-actualContent",this.$scrollContainer);0==this.$actualContent.length&&(this.$actualContent=f("<div class='vsb-actualContent' style='float:left;'></div>"),this.$scrollContainer.append(this.$actualContent));this.OnScroll=new ObjectEvent("OnScroll");this._isOnScroll=!1;this.subscribeEvents()}b.prototype.subscribeEvents=function(){var b=this,a=b.$scrollContainer.scrollTop();
this.$scrollContainer.bind("scroll.vsbHandler",function(c){var e=b.$scrollContainer.scrollTop();a!=e&&(a=e,b._isOnScroll=!0,e={element:this,CanRefresh:!1},!0==e.CanRefresh&&b.Refresh(b.ItemsSource),0<b.OnScroll.fn.length&&b.OnScroll.raise(b,c,e),b._isOnScroll=!1)})};b.prototype.GetViewHeight=function(){var b=this.$scrollContainer.height();this.GC.element&&(b=this.GC.element.height());return b};b.prototype.CreateRow=function(b,a){return f("<tr><td>"+b+"</td></tr>")};b.prototype.Refresh=function(b,
a,c){c=c||this.element;var e=f("tbody",c),g=0,h=this.RowHeight,m=this.GetViewHeight(),k=this.$scrollContainer.scrollTop(),l=0;this.ItemsSource=b;var n=RadiantQ.Gantt.RQPrint.InternalPrintOptions,p=n.IsNewPrinting;this.UpdateScrollContentHeight();if(!b)return"";var q=0;0<c.length&&a&&(q=k%h,this.GC&&this.GC.options&&null!=this.GC.options.RowHeightBinding?(q=this.GC.GetStartRowIndexAndTop(b,k),l=q.startPosition,q=q.top):l=Math.floor(k/h),g-=q,q=k-q,p&&(q=k));var k=f("<div></div>"),r,s=n.NoOfRowsInPage;
p?(l=n.StartRowIndex,r=n.EndRowIndex>=b.length?b.length:n.EndRowIndex+1):r=b.length;for(var u=l;u<r;u++){var w=u-l;if(p){if(0<n.MaximumHeightPerPage&&g>=n.MaximumHeightPerPage)break;if(w>=s)break}else if(a&&g>=m)break;var t=b[u],v=this.CreateRow(u,t);v&&(k.append(v),g+=t.RowHeight?t.RowHeight:h)}n.NoOfRenderedRows=u<r?w:w+1;e.empty();e.append(k.children());0<c.length&&(c[0].style.setProperty?c[0].style.setProperty("margin-top",q+"px","important"):c[0].style.setAttribute("margin-top",q+"px","important"));
this.GC.GetGanttChartInstance&&this.GC.GetGanttChartInstance().AfterChartRowsRender.raise()};b.prototype.UpdateScrollContentHeight=function(b){var a=this.ItemsSource||[],c=this.RowHeight;0==arguments.length&&(b=this.GC&&this.GC.GetScrollableContentHeight?this.GC.GetScrollableContentHeight(a):a.length*c);this.$actualContent.height(b)};b.prototype.SyncScrollEventWith=function(b,a,c){if(b instanceof jQuery){if(0==b.length)return}else if(null==b.nodeName){window.console&&console.log&&console.log("You couldn't sync with non HTML elements.");
return}var e=this.$scrollContainer,g=f(b);this.UpdateScrollContentHeight(g[0].scrollHeight);var h=0,m=0,k=this;this._scrollElemIsHovered=!1;this.OnScroll.subscribe(function(){h=e.scrollTop();this._scrollElemIsHovered||h!=m&&g.scrollTop(h)},this);a&&(g.hover(function(){k._scrollElemIsHovered=!0},function(){k._scrollElemIsHovered=!1}),c&&c instanceof ObjectEvent?c.subscribe(function(){m=g.scrollTop();e.scrollTop(m)},this):g.bind("scroll.syncVSBHandler",function(){m=g.scrollTop();h!=m&&e.scrollTop(m)}.bind(this)))};
b.prototype.ClearCachedRows=function(){};RadiantQ.Gantt.VerticalScrollBar=b})(jQuery);
(function(){RadiantQ.Culture={};RadiantQ.SupportedCultures=[];RadiantQ.CurrentCulture=navigator.language||navigator.userLanguage;RadiantQ.Culture.Load=function(f){f&&(RadiantQ.CurrentCulture=f);if(void 0==window.RadiantQ_ConvertToMilestoneString){RadiantQ.SupportedCultures.push("en-US");RadiantQ.SupportedCultures.push("fr-FR");RadiantQ.SupportedCultures.push("de-DE");RadiantQ.SupportedCultures.push("es-ES");RadiantQ.SupportedCultures.push("ru-RU");RadiantQ.SupportedCultures.push("nb-NO");RadiantQ.SupportedCultures.push("ja-JP");
RadiantQ.SupportedCultures.push("zh-CN");void 0==RadiantQ.localizationPath&&(RadiantQ.LocalizationPath="Src/ResourceStrings/");void 0==RadiantQ.DateLocalizationPath&&(RadiantQ.DateLocalizationPath="Src/Scripts/Utils/globalization/");f=$("head",document);var b=document.createElement("script");b.type="text/javascript";b.src=RadiantQ.DateLocalizationPath+RadiantQ.CurrentCulture+".js";f.prepend(b);b=RadiantQ.CurrentCulture;-1==RadiantQ.SupportedCultures.indexOf(RadiantQ.CurrentCulture)&&(b="en-US");var d=
document.createElement("script");d.type="text/javascript";d.src=RadiantQ.LocalizationPath+b+".js";f.prepend(d)}}})();
(function(f){RadiantQ.Gantt.Utils.EndResizeable=function(b,d,a,c){if(!1!=b instanceof jQuery){var e=null;if(!0==d instanceof jQuery)e=d.width();else if(null!=d)return;var g=b.width(),h=f(".rq-utils-resizeable",b);0==h.length&&(h=f("<div class='rq-utils-resizeable'></div>"),b.append(h));h.css({"margin-left":g+"px"});var m=f("<div class='resizeClone'></div>");h.unbind("mousedown.rq-utils-resizeable");h.bind("mousedown.rq-utils-resizeable",function(d){d.stopPropagation();var l=d.pageX;g=b.width();b.append(m);
m.css({width:g+"px"});_ganttMouseMoveDelegate=function(a){_endResizeMouseMove(a,m,l,g,e)};_ganttMouseUpDelegate=function(d){document.mouseButtonPressed=!1;d=m.width();_endResizeMouseUp(d,m,h,b,c);if(void 0!=a||null!=a)"function"==typeof a?a.call(b,d,c):console.error("onResizeEndCallback should be an function")};f(document).bind("mousemove.rq-utils-resizeable",_ganttMouseMoveDelegate).bind("mouseup.rq-utils-resizeable",_ganttMouseUpDelegate)});_endResizeMouseMove=function(a,b,c,d,e){a=d+a.pageX-c;
null!=e&&a>=e?b.width(e):0>a?b.width(0):b.width(a);return b};_endResizeMouseUp=function(a,b,c,d){d.width(a);c.css({"margin-left":a+"px"});f(document).unbind("mousemove.rq-utils-resizeable").unbind("mouseup.rq-utils-resizeable");b.remove()}}}})(jQuery);
(function(f){function b(b,a,c,e){function g(a,b){return"Invalid Date"==a||"Invalid Date"==b||a&&!1==a instanceof Date||b&&!1==b instanceof Date?(alert("Please provide valid ViewStartTime and ViewEndTime for printing"),!1):a>b?(alert("ViewStartTime should not be greater than ViewEndTime"),!1):!0}function h(a){a=b.options.RowHeightBinding?l.GetGanttTable().uiGridBodyTable.height():a*l.options.RowHeight;var c=(0<ya?ya:Ka)+a;n.height(c).parent().height(c);f(".ui-layout-pane-west",n).height(c);f(".ui-grid-body",
n).height(a);f(".rq-gc-rowsParent",n).height(a);f(".ui-layout-pane.ui-layout-container",n).css("height","100%");c=f(".rq-tsh-div",n).height();f(".rq-gc-chartArea-div",n).height(a+c)}function m(a){var b=RadiantQ.Gantt.RQPrint.InternalPrintOptions;b.IsNewPrinting=a.IsNewPrinting;b.NoOfRowsInPage=a.NoOfRowsInPage;b.StartRowIndex=a.StartRowIndex;b.EndRowIndex=a.EndRowIndex;b.ShowGanttTableOnly=a.ShowGanttTableOnly;b.ShowGanttChartOnly=a.ShowGanttChartOnly;b.MaximumHeightPerPage=a.MaximumHeightPerPage}
function k(b,c){function d(){function g(){var a=document.createElement("canvas");a.width=n.width();a.height=n.height();document.body.appendChild(a);var d=a.getContext("2d");html2canvas(n,{allowTaint:!0,useCORS:!0,onrendered:function(h){var l=h.getContext("2d");d.putImageData(l.getImageData(0,0,n.width(),n.height()),0,0);l=h.toDataURL("image/png");L+="<img class='printableImg' src="+l+"></img>";ra.push(h);h=0<m.MaximumHeightPerPage?m.NoOfRenderedRows:m.NoOfRowsInPage;C&&b+h<m.EndRowIndex?k(b+h,c):
!1==C?e(g,k):c(L,ra);f(a).remove()}})}l.options.RowHeightBinding&&h(l.options.FlatItemsSource.length-b);if(a&&0<a.VisibleColumnIndices.length){var p=f("table.ui-grid-body-table",ia),p=p.eq(0).width()+p.eq(1).width(),q=ka+(p-Ga);ia.parent().parent().width(p);aa.css("left",p+"px");x.element.css("left",p+"px");n.parent().width(q)}a&&a.BeforePrint&&a.BeforePrint.raise(n);M&&!0==y?(C=!1,e(g)):g()}function e(a,d){function g(a){var b=a.ConvertTimeToX(O.viewStart);O.printWidth=a.element.width();b=a.ConvertXToTime(b+
O.printWidth);O.viewEnd||(O.viewEnd=b);if(b.equals(O.viewEnd))O.stopChartHorzScroll=!0;else if(b.isGreaterThan(O.viewEnd)){b=O.viewEnd;O.stopChartHorzScroll=!0;var c=Math.ceil((O.viewEnd-O.viewStart)/864E5+1);180==a.options.BaseTimeScaleType?c=Math.ceil((O.viewEnd-O.viewStart)/36E5):90==a.options.BaseTimeScaleType&&(c=Math.ceil((O.viewEnd-O.viewStart)/6E4));a.element.width(c*a.options.BaseTimeUnitWidth);f("#gantt_container_TopDivContainer").css("border","none")}a=O.viewStart;O.viewStart=b;return a}
0==O.horzScrollPages&&l.GetGanttChart().bind("ganttchartanchortimechanged.RQPrint",function(b,c){M&&a()});var h=0<m.MaximumHeightPerPage?m.NoOfRenderedRows:m.NoOfRowsInPage;!1==O.stopChartHorzScroll?(O.horzScrollPages++,h=g(x),x.SetStartTime(h.clone())):b+h<m.EndRowIndex?(l.GetGanttChart().unbind("ganttchartanchortimechanged.RQPrint"),M=!0,O={horzScrollPages:0,viewStart:B.clone(),viewEnd:F,stopChartHorzScroll:!1,printWidth:H,lastPageWidth:0},d(b+h,c)):(l.GetGanttChart().unbind("ganttchartanchortimechanged.RQPrint"),
c(L,ra))}function g(){ea=a.VisibleColumnIndices;if(!0==z&&ea&&(la=Q.Column,0<ea.length&&ea.length!=la.length))for(var b=0;b<la.length;b++)-1==ea.indexOf(""+b)&&-1==ea.indexOf(b)&&Q.hideColumn(b)}var m=RadiantQ.Gantt.RQPrint.InternalPrintOptions;m.StartRowIndex=b;b+(0<m.MaximumHeightPerPage?m.NoOfRenderedRows:m.NoOfRowsInPage)>l.options.FlatItemsSource.length&&h(l.options.FlatItemsSource.length-b);a&&g();var p=0;l.options.GanttTableRowLoadedCallBack&&(p=100);Q.Refresh();x.ViewableDependencyViews=[];
var q=x.AfterChartRowsRender.subscribe(function(){na.css("height","inherit");Ha.css("height","inherit");G.Refresh();setTimeout(d,p);q.Dispose()});x.VSB.ClearCachedRows();x.VSB.Refresh(l.options.FlatItemsSource,!0)}var l=b,n=l.element,p=RadiantQ.Gantt.RQPrint.InternalPrintOptions,q;a&&(q=jQuery.extend(!0,{},p),void 0==a.IsNewPrinting&&(a=jQuery.extend(p,a)));var r=a||p,s=r.ShowGanttTableOnly,u=r.ShowGanttChartOnly,p=l.options.FlatItemsSource.length,w=0>r.EndRowIndex||r.EndRowIndex>p?p:r.EndRowIndex;
r.StartRowIndex=!r.StartRowIndex||0>=r.StartRowIndex||r.StartRowIndex>p||r.StartRowIndex>w?0:r.StartRowIndex;r.EndRowIndex=w;var t=!1,v=!1,z=a?!1==a.IsGridVisible?(v=!0,u=!0):!0:!0,x=l.GetGanttChartInstance(),A=f("#gantt_container_TopDivContainer",n).css("border"),y=!0,C=!0,M=a?a.IsGanttChartHorzScroll:!1,B=a?a.ViewStartTime:null,F=a?a.ViewEndTime:null,D=n.width(),H=a?0<a.PrintWidth?a.PrintWidth:D:D;if(300>H)alert("Print width should be greater than 300");else if(!(M&&B&&F)||g(B,F)){!M||B||F||(B=
x.options.AnchorTime);if(M&&!B&&F){var N=x.options.AnchorTime;if(F.isGreaterThan(N))B=N;else{alert("Please provide valid ViewStartTime for printing");return}}var O={horzScrollPages:0,viewStart:B,viewEnd:F,stopChartHorzScroll:!1,printWidth:H,lastPageWidth:0},L="",Q=l.GetGanttTable(),S;Q&&Q.options&&(S=Q.options.headerHeight);var G=f(".rq-gc-dependencyControl",n).data("GanttDependencyControl"),I=x.options.ViewWidth;x.options.ComputedStartTime.clone();x.options.ComputedEndTime.clone();var V=a?a.Title?
a.Title:document.title:document.title,P=a?a.EnableCustomTableCol:!1;if(s&&u)alert("please enable either ShowGanttTableOnly or ShowGanttChartOnly option"),e.remove(),v&&(u=!1),q&&(RadiantQ.Gantt.RQPrint.InternalPrintOptions=q);else{var N=x.options.AnchorTime.clone(),U=x.HScrollBar.scrollLeft();x.options.AnchorTime=x.VisualStartTime.clone();if(P)t=!0;else if(s&&a){if(!a.VisibleColumnIndices){alert("please select any one of the column header");e.remove();return}}else a&&!1==(s||u)&&!a.VisibleColumnIndices&&
(t=u=!0);s?(z=!0,y=!1):u?(y=!0,z=!1):y=z=!0;r.IsNewPrinting=!0;a&&m(a);var W=l.GetLayoutElement().data("layout"),da=f(".ui-layout-center"),ba=f(".ui-layout-pane-west",n).width(),aa=f(".ui-layout-resizer",n),ja=f(".ui-layout-pane-center",n).width(),fa=f(".ui-layout-pane-center",n)[0].style.left,oa=n.height(),Y=n.parent().height(),ua=f(".ui-layout-pane-west",n).height(),va=f(".ui-grid-body",n).height(),Ea=f(".rq-gc-rowsParent",n).height(),ya=f(".rq-grid-head-parent",n).height(),Ka=f(".rq-tsh-div",n).height(),
Ma=f(".ui-layout-pane.ui-layout-container",n).height(),ta=f(".rq-gc-chartArea-div",n).height(),na=f(".rq-gc-dependencysParent",n),Ha=f(".rq-gc-dependencyControl",n),Fa=na.height(),Da=Ha.height(),Ia=l.options.UseVirtualization,za=l.options.UseChartVirtualization,ia=f(".ui-gridpanel",n),ma=ia.parent().parent().width(),Na=aa.css("left"),ga=x.element.css("left"),Ba=l.options.TablePanelWidth,ka=n.parent().width(),Ga=ia.parent().parent().width(),p=0<r.MaximumHeightPerPage?Math.ceil(r.MaximumHeightPerPage/
l.options.RowHeight):r.NoOfRowsInPage;h(p);"ProjectGantt"==b.GanttType?n.GanttControl({IsPrinting:!0,UseVirtualization:!0,UseChartVirtualization:!0}):n.FlexyGantt({IsPrinting:!0,UseVirtualization:!0,UseChartVirtualization:!0});f(".rq-gc-pager-container",n).css("display","none");s?(W.open("west"),da.css("display","none"),f(".ui-layout-pane-west",n).css("width","100% !important"),W.sizePane("west","100%"),aa.css("display","none !important"),l.UpdateLayout()):u&&("ProjectGantt"==b.GanttType?n.GanttControl({IsPrinting:!1}):
n.FlexyGantt({IsPrinting:!1}),W.close("west"),f(".ui-layout-pane-west").css("display","none"),f(".ui-layout-resizer").css("display","none"),W.sizePane("west","100%"),f(".ui-layout-pane-west",n).css("display","none !important"),f(".ui-layout-pane-center",n).css({width:"100% !important",left:"0px !important",display:"block !important"}),l.UpdateLayout());!0==y&&(x._setOption("ResizeToFit",!0),a&&!M?(a.ViewStartTime?x.SetStartTime(a.ViewStartTime.clone()):a.ViewEndTime||x.SetStartTime(x.VisualStartTime.clone()),
a.ViewEndTime&&x.TrySetEndTime(a.ViewEndTime.clone())):M&&!0==y&&H!=D&&(n.width(H),l.UpdateLayout()));k(r.StartRowIndex,function(g,h,k){var p=r.AfterPrintComplete;r.AfterPrintComplete=new ObjectEvent("InternalAfterPrintCompleteEvent");var w=r.AfterPrintComplete.subscribe(function(){function c(){W.open("west");da.css("display","block");f(".ui-layout-pane-west",n).width(ba);W.sizePane("west","50%");aa.css("display","block !important");l.UpdateLayout();var a=k.data("GanttChart");a&&(a.options.ResizeToFit?
k.GanttChart({AnchorTime:N}):k.GanttChart({AnchorTime:N.clone()}),a.HScrollBar&&a.HScrollBar.scrollLeft(U))}function g(){if(!0==z){if(ea.length!=la.length)for(var b=0;b<la.length;b++)-1!=ea.indexOf(""+b)&&-1!=ea.indexOf(b)||!Q.Column[b].hidden||Q.showColumn(b);0<a.VisibleColumnIndices.length&&(ia.parent().parent().width(ma),n.parent().width(ka),aa.css("left",Na+"px"),x.element.css("left",ga+"px"),l.UpdateLayout())}}l.grid.options.headerHeight=S;P=!1;r.IsNewPrinting=!1;a?m(a):(r.StartRowIndex=0,r.EndRowIndex=
-1);q&&(RadiantQ.Gantt.RQPrint.InternalPrintOptions=q);C=!0;var h=n.width();M&&h!=D&&(n.width(D),l.UpdateLayout(),f("#gantt_container_TopDivContainer").css("border",A));"ProjectGantt"==b.GanttType?n.GanttControl({IsPrinting:!1,ViewWidth:I,UseVirtualization:Ia,UseChartVirtualization:za}):n.FlexyGantt({IsPrinting:!1,ViewWidth:I,UseVirtualization:Ia,UseChartVirtualization:za});var k=l.GetGanttChart();0==k.length&&l.element.length&&(k=f("#"+l.element[0].id+"_GanttChart"));k.data("GanttChart")._canUpdate=
!1;n.height(oa).parent().height(Y);f(".rq-gc-pager-container",n).css("display","block");f(".ui-layout-pane-west",n).height(ua);f(".ui-grid-body",n).height(va);f(".rq-gc-rowsParent",n).height(Ea);f(".rq-tsh-div",n).height(Ka);f(".ui-layout-pane.ui-layout-container",n).height(Ma);f(".rq-gc-chartArea-div",n).height(ta);na.height(Fa);Ha.height(Da);s?c():u&&(W.open("west"),f(".ui-layout-pane-west").css("display","block"),f(".ui-layout-resizer").css("display","block !important"),W.sizePane("west","50%"),
f(".ui-layout-pane-west",n).css("display","none !important"),f(".ui-layout-pane-center",n).css({width:ja,left:fa,display:"block !important"}),l.UpdateLayout(),k.data().GanttChart.options.ResizeToFit?k.GanttChart({AnchorTime:N}):k.GanttChart({AnchorTime:N.clone()}),k.data("GanttChart").HScrollBar.scrollLeft(U));a&&(a.VisibleColumnIndices&&g(),l._setOption("TablePanelWidth",Ba));z=y=!1;v&&(r.ShowGanttChartOnly=!1);t&&(u=!1,t=r.ShowGanttChartOnly=!1);f(".ui-grid-body",n).scrollTop(0);Q.Refresh();(function(){var a=
f(".rq-ganttWrapper",n).data("radiantqHoverable");a&&a.chartTable&&(a.chartTable=f());k.GanttChart("destroy");l.options.BottomTwoHeaders=x.options.BottomTwoHeaders;l.initGanttChart();k.data().GanttChart.options.ResizeToFit?k.GanttChart({AnchorTime:N}):k.GanttChart({AnchorTime:N.clone()});k.data().GanttChart.HScrollBar.scrollLeft(U)})();w.Dispose();e.remove();p&&p.raise()}),B=!0;"function"==typeof c&&(B=c(h));!1===B?r.AfterPrintComplete.raise():null==h?(k.save("Test.pdf"),r.AfterPrintComplete.raise()):
RadiantQ.Gantt.PrintImageUsingIframe(g,V,r)});var ea,la,ra=[];new jsPDF("p","pt","letter")}}}RadiantQ.Gantt.PrintOptions=function(){this.MaximumHeightPerPage=-1;this.IsNewPrinting=!1;this.NoOfRowsInPage=25;this.ShowGanttChartOnly=this.ShowGanttTableOnly=!1;this.StartRowIndex=0;this.EndRowIndex=-1;this.Title=null;this.VisibleColumnIndices=[];this.ViewEndTime=this.ViewStartTime=null;this.IsGanttChartHorzScroll=!1;this.PrintWidth=0;this.BeforePrint=new ObjectEvent("BeforePrint");this.AfterPrintComplete=
new ObjectEvent("AfterPrintComplete")};RadiantQ.Gantt.RQPrint=function(d,a,c){var e=f('<div class="rq-busyIndicator" id="rq-busyIndicator"><div class="progressPanel"><span class="progressText">Printing...</span><div id="spinLoader" style="margin-top: 10px; margin-left: -30px"></div></div></div>');d&&d.element?f(d.element).parent().append(e):f(document.body).append(e);setTimeout(function(){b(d,a,c,e)},10)};RadiantQ.Gantt.RQPrint.InternalPrintOptions={MaximumHeightPerPage:-1,NoOfRenderedRows:-1,NoOfRowsInPage:25,
StartRowIndex:0,EndRowIndex:-1,IsNewPrinting:!1,ShowGanttTableOnly:!1,ShowGanttChartOnly:!1,Title:null,VisibleColumnIndices:[],ViewStartTime:null,ViewEndTime:null,IsGanttChartHorzScroll:!1,PrintWidth:0,AfterPrintComplete:new ObjectEvent("AfterPrintComplete")}})(jQuery);
(function(){var f=function(b){var d=$('<div class="ui-tooltip ui-widget ui-corner-all ui-widget-content" style="display: block; position: absolute; max-width: none !important;"></div>');this.unbind(".rq-tooltip");this.bind("mousemove.rq-tooltip",function(a){if(!1==f.CanShowTooltip)$(".ui-tooltip").remove();else{var c=b($(this),a);if(null!=c){d.empty();d.append(c);$(document.body).append(d);var c=a.pageX,e=a.pageY,c=$(document).width()<c+d.outerWidth()+10?c-d.outerWidth():a.pageX,e=$(document).height()<
e+d.outerHeight()+20?e-d.outerHeight()-15:a.pageY+15;d.css({top:e+"px",left:c+"px"})}}}).bind("mouseleave.rq-tooltip",function(a){$(".ui-tooltip").remove()})};f.CanShowTooltip=!0;f.RemoveTooltip=function(){setTimeout(function(){$(".ui-tooltip").remove()},0,this)};$.fn.RQTooltip=f})();
(function(f,b){f.Gantt.BusyIndicator=new function(){var d=!1,a=b('<div id="rq-busyIndicator"></div>');this.show=function(b,e){a.empty();d&&a.show();b||(b="Loading...");a.append('<div class="progressPanel" ><span class="progressText" unselectable="on">'+b+'</span><div id="spinLoader" style="margin-top: 10px; margin-left: -30px"></div></div>');setTimeout(function(){e&&"function"==typeof e&&e()},0)};this.hide=function(){a.empty().hide()};b(window).bind("load",function(){d=!0;b(document.body).append(a)})}})(RadiantQ,
jQuery);
(function(){function f(a,c,d,f,h,m,k){this.min=Date.MaxValue;this.max=Date.MinValue;var l=(this.parent=a)?a.parent:null;this.childUtils=childs=[];this.updateTimes=function(b){var c=!0;b.min&&0>b.min.compareTo(this.min)&&(this.min=b.min,c=!0);b.max&&0<b.max.compareTo(this.max)&&(this.max=b.max,c=!0);c&&(l&&l.updateTimes(this),a&&a.dataSource&&this.updateData(a.dataSource))};this.updateData=function(a){a[m]=this.min;a[k]=this.max};for(var n=0;n<c.length;n++){var p=new b(this,c[n],d,f,h,m,k);this.childUtils.push(p)}this.recalculateTimes=
function(){this.min=Date.MaxValue;this.max=Date.MinValue;if(l)l.recalculateTimes(this);else for(var b=0;b<this.childUtils.length;b++)this.childUtils[b].recalculateTimes();a&&a.dataSource&&this.updateData(a.dataSource)};var q=this;$.observable(c).bind("insert remove replaceAll",function(a,c){var l=a.type;if("insert"==l)for(var n=c.items,l=0;l<n.length;l++){var p=new b(q,n[l],d,f,h,m,k);q.childUtils.push(p)}else if("remove"==l)for(n=c.items,l=n.length-1;0<=l;l--)n=c.index+l,p=q.childUtils[n],q.childUtils.splice(n,
1),p.remove()})}function b(a,b,e,g,h,m,k){this.parent=a;this.dataSource=b;var l=null,l="function"==typeof e?e(b):b[e];null==l?(a.updateTimes({min:b[g],max:b[h]}),d(b,g,h,function(b){a.updateTimes({min:b[g],max:b[h]})})):(e=new f(this,l,e,g,h,m,k),e.data=b,this.childTracker=e);this.recalculateTimes=function(){if(null==l)a.updateTimes({min:b[g],max:b[h]});else if(null!=this.childTracker)for(var d=0;d<this.childTracker.childUtils.length;d++)this.childTracker.childUtils[d].recalculateTimes()};this.remove=
function(){a.recalculateTimes()}}function d(a,b,d,f){a.PropertyChanged&&!1!=a.PropertyChanged instanceof ObjectEvent||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));var h=a[b];Object.defineProperty(a,b,{get:function(){return h},set:function(a){h=a;f(this,b,h);this.PropertyChanged.raise(this,{PropertyName:b,Value:h})}});var m=a[d];Object.defineProperty(a,d,{get:function(){return m},set:function(a){m=a;f(this,d,m);this.PropertyChanged.raise(this,{PropertyName:d,Value:m})}})}RadiantQ.Gantt.Utils.TasksTimeTracker=
function(a,b,d,g,h,m){h||(h=d);m||(m=g);return new f(null,a,b,d,g,h,m)}})();
(function(f){function b(a,b,c){this.dictKeyHandlerFn=c;this.selectedElementByKey=new RadiantQ.Dictionary;this.ElementsDict=new RadiantQ.Dictionary;this.SelectionChanged=new ObjectEvent("SelectionChanged");this.taskTimeChanged=!1;this._updateDict(a);Object.defineProperty(this,"elements",{get:function(){return this.ElementsDict._asArray}});Object.defineProperty(this,"SelectedTasks",{get:function(){return this.selectedElementByKey._asArray}});this.unbindEvents(this.elements);this.bindEvents(this.elements);
this.bindGlobalEvents(b)}function d(a,b,c){var d=a.dictKeyHandlerFn(b),k=!1;!0==c?(f(b).addClass("selected-bar"),a.selectedElementByKey[d]||(k=!0),a.selectedElementByKey.Add(d,b)):(f(b).removeClass("selected-bar"),a.selectedElementByKey[d]&&(a.selectedElementByKey.Remove(d),k=!0));if(a.onSelectionChange)a.onSelectionChange(b,c);k&&a.SelectionChanged.raise(a,c,b)}function a(a){for(var b=a.selectedElementByKey._asArray,c=0;c<b.length;c++)f(b[c]).removeClass("selected-bar"),a.SelectionChanged.raise(a,
!1,b[c]);a.selectedElementByKey.Clear();a.OnClear()}var c;b.prototype._updateDict=function(a){for(var b=0;b<a.length;b++)if(this.dictKeyHandlerFn&&"function"==typeof this.dictKeyHandlerFn)if(this.dictKeyHandlerFn(a[b]))this.ElementsDict.Add(this.dictKeyHandlerFn(a[b]),a[b]);else throw console.error("Key should be provided"),alert("Key should be provided"),Error("Key should be provided");};b.prototype.bindGlobalEvents=function(b){var d=f(document),h=this;d.bind("keydown.rqMultiSelection",function(a){null!=
b?a.which==b&&(c=!0):a.ctrlKey&&(c=!0)});d.bind("keyup.rqMultiSelection",function(a){null!=b?a.which==b&&(c=!1):"17"==a.which&&(c=!1)});f(".radiantq-ui-GanttBase").bind("click.rqMultiSelection",function(b){h.taskTimeChanged||!1==c&&(f(b.target).hasClass("selected-bar")||a(h));h.taskTimeChanged=!1})};b.prototype.bindEvents=function(b){self=this;f(b).unbind("click.rqMultiSelection").bind("click.rqMultiSelection",function(b){b=self.dictKeyHandlerFn(this);var e=!0;self.selectedElementByKey[b]&&(e=!1);
c?d(self,this,e):a(self)})};b.prototype.unbindEvents=function(a){f(a).unbind("click.rqMultiSelection")};b.prototype.selectElement=function(a,b){for(var c=f(a),m=0;m<c.length;m++){if(!b){var k=this.dictKeyHandlerFn(c[m]);b=void 0!=this.selectedElementByKey[k]?!0:!1}d(this,c[m],b)}};b.prototype._includeElements=function(a,b){this._updateDict(a);this.selectElement(a,b);this.unbindEvents(a);this.bindEvents(a)};b.prototype._excludeElements=function(a){a=f(a);for(var b=0;b<a.length;b++){var c=this.dictKeyHandlerFn(a[b]);
this.ElementsDict.Remove(c)}this.unbindEvents(a)};b.prototype.ExcludeElements=function(a){a=f(a);for(var b=0;b<a.length;b++){var c=this.dictKeyHandlerFn(a[b]),m=this.ElementsDict[c]||this.selectedElementByKey[c];this.ElementsDict.Remove(c);this.selectedElementByKey.Remove(c);m&&(d(this,a[b],!1),this.SelectionChanged.raise(this,!1,a[b]))}this.unbindEvents(a)};b.prototype.Dispose=function(a){f(a).removeClass("selected-bar");this.ElementsDict.Dispose();this.selectedElementByKey.Clear();this.OnClear()};
RadiantQ.Gantt.Utils.MulipleTaskSelection=b})(jQuery);
$.widget("radiantq.shiftTask",{options:{value:0,ganttTaskItemBar:null,Data:null,StartDateProperty:"",EffortProperty:"",EndDateProperty:"",WorkTimeSchedule:"",AllowResizing:!0,MovingInfoPopup:null,ResizeInfoPopup:null},$taskClone:null,DragTooltipContent:null,_MakeItBoldWhenActualDate:function(f){return"#if( data.HasChanged ){# "+f+"#}else {# <b>"+f+"</b>#}#"},_create:function(){this._updateValues();this.listenEvents();this.initPopupTemplate();this.options.AllowResizing&&this.element.resizeTask(this.options)},
initPopupTemplate:function(){var f=RadiantQ.Template||kendo.template;this.options.MovingInfoPopup="function"!=typeof this.options.MovingInfoPopup&&"string"==typeof this.options.MovingInfoPopup?f(this.options.MovingInfoPopup):f("<div align='left'><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td style='float:right;'><b>${ RadiantQ_StartString}:&nbsp;&nbsp;&nbsp;</b></td><td>"+this._MakeItBoldWhenActualDate("${ data.ProposedStart.toString('yyyy-MM-dd HH:mm')}")+
"</td></tr><tr><td style='float:right;'><b>${ RadiantQ_FinishString}:&nbsp;&nbsp;&nbsp;</b></td><td>"+this._MakeItBoldWhenActualDate("${ data.ProposedEnd.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>")},UpdateTooltipContent:function(f){this.DragTooltipContent=$("<div></div>").append(this.options.MovingInfoPopup(this.times))},_getChildObject:function(f,b,d,a){if("function"==typeof b)return 4==arguments.length?b(f,this,a):b(f,this);for(var c=b.split("."),e=f,g=0;g<c.length;g++){var h=c[g],
m=e;if(g==c.length-1&&4==arguments.length)if(e[h+"_M"])e[h+"_M"](a);else if("function"==typeof e[h]){if(!1!=d)e[h](a)}else e[h]=a;else e=e[h+"_M"]?e[h+"_M"]():e[h],"function"==typeof e&&!1!=d&&(e=e.call(m))}return e},_updateValues:function(){if(""!==this.options.StartDateProperty)if("function"==typeof this.options.StartDateProperty){var f=this.options.StartDateProperty(this.options.Data,this);this.times.Start=f}else"string"==typeof this.options.StartDateProperty&&(f=this._getChildObject(this.options.Data,
this.options.StartDateProperty,!0),this.times.Start=f);""!==this.options.EffortProperty&&("function"==typeof this.options.EffortProperty?(f=this.options.EffortProperty(this.options.Data,this),this.times.Effort=f):"string"==typeof this.options.EffortProperty&&(f=this._getChildObject(this.options.Data,this.options.EffortProperty,!0),this.times.Effort=f));""!==this.options.EndDateProperty&&("function"==typeof this.options.EndDateProperty?(f=this.options.EndDateProperty(this.options.Data,this),this.times.End=
f):"string"==typeof this.options.EndDateProperty&&(f=this._getChildObject(this.options.Data,this.options.EndDateProperty,!0),this.times.End=f));this.times.ProposedStart=this.times.Start;this.times.ProposedEnd=this.times.End},times:{Start:null,Effort:null,End:null,ProposedStart:null,ProposedEnd:null},listenEvents:function(){var f=this;$(this.element).bind("mousedown.shiftTask",function(b){if(1==b.which){f._updateValues();var d=$(this),a=$("<div id='clone' class='taskclone rq-taskbar-clone "+window.radiantQclasses.defaultClass+
"'></div>");$(this).append(a);var c=a[0].offsetLeft,e=f._getGanttDragMousePosition(b,void 0),g=e.x,h=e.x-g+c;a.css({width:d.width(),height:d.height()});f.UpdateTooltipContent(f.times);d.GetDragOrResizeContent(f.DragTooltipContent,b,d,void 0);$(document).bind("mousemove.shiftTask",function(e){h=f._getGanttDragMousePosition(e,void 0).x-g+c;f.shiftElement(d,h,b,void 0);a.css("margin-left",h+"px");f.UpdateTooltipContent(f.times);e=$(".dragPopup");e.empty();e.append(f.DragTooltipContent);e.css("visibility",
"visible")}).bind("mouseup.shiftTask",function(){f.DragEnd(d,f.options.ganttTaskItemBar);$(document).unbind("mousemove.shiftTask mouseup.shiftTask keydown.shiftTask");a.remove();$(".dragPopup").remove()}).bind("keydown.shiftTask",function(){27==event.keyCode&&($(document).unbind("mousemove.shiftTask mouseup.shiftTask keydown.shiftTask"),a.remove())})}})},_getGanttDragMousePosition:function(f,b){var d=0,a=0;if(!0==b)if(f.originalEvent.touches[0].pageX||f.originalEvent.touches[0].pageY)d=f.originalEvent.touches[0].pageX,
a=f.originalEvent.touches[0].pageY;else{if(f.originalEvent.touches[0].clientX||f.originalEvent.touches[0].clientY)d=f.originalEvent.touches[0].clientX,a=f.originalEvent.touches[0].clientY}else if(f.pageX||f.pageY)d=f.pageX,a=f.pageY;else if(f.clientX||f.clientY)d=f.clientX,a=f.clientY;return{x:d,y:a}},shiftElement:function(f,b,d,a){d=f[0].offsetLeft;a=Date.MaxValue;var c=Date.MinValue,e=null;f=this.options.ganttTaskItemBar;""!==this.options.WorkTimeSchedule&&void 0!==this.options.WorkTimeSchedule?
e=this.options.WorkTimeSchedule:this.options.ganttTaskItemBar&&(e=f.GetScheduleToPlotWith());a==Date.MaxValue&&(a=rqTCUtils.ConvertToEndTimeInBaseScaleType(f.GanttChart.options.BaseTimeScaleType,this.times.Start.clone(),d/f.GanttChart.options.BaseTimeUnitWidth,(b+d+0)/f.GanttChart.options.BaseTimeUnitWidth,e),null!=e&&(a=e.ConvertToNextWorkingTime(a)),c=RadiantQ.Gantt.Model.BaseGanttModel.ComputeEndTime(a,this.times.Effort,e));this.times.ProposedStart=f.GanttControl.RoundUp(a);this.times.ProposedEnd=
f.GanttControl.RoundUp(c);0==this.times.ProposedStart.compareTo(this.times.Start)?this.times.HasChanged=!1:(b={Action:"Shifting",Data:this.options.Data,ProposedStartDate:this.times.ProposedStart,ProposedEndDate:this.times.ProposedEnd,Cancel:!1},this.times.HasChanged=!0,f.GanttControl.ActivityTimeChanging.isSubscribed()&&f.GanttControl.ActivityTimeChanging.raise(f,b),!0==b.Cancel?(this.times.ProposedStart=this.times.Start,this.times.ProposedEnd=this.times.End,this.times.HasChanged=!1):(this.times.ProposedStart=
b.ProposedStartDate,this.times.ProposedEnd=b.ProposedEndDate))},DragEnd:function(f,b){if(!this.times.Start.equals(this.times.ProposedStart)||!this.times.End.equals(this.times.ProposedEnd)){var d={Cancel:!1};b.GanttControl.ActivityDragEnd&&0<b.GanttControl.ActivityDragEnd.fn.length&&(d=new TimesChangingEventArgs(this.options.Data,this.times.ProposedStart,this.times.ProposedEnd,"DragEnd",b.Activity._boundObject),d.Cancel=!1,b.GanttControl.ActivityDragEnd.raise(b,d),this.times.ProposedStart=d.StartTime,
this.times.ProposedEnd=d.EndTime);if(!1==d.Cancel){this._getChildObject(this.options.Data,this.options.StartDateProperty,!0,this.times.ProposedStart);this._getChildObject(this.options.Data,this.options.EndDateProperty,!0,this.times.ProposedEnd);var a=b.options.GanttChart.options,c=a.ComputedStartTime,e=RadiantQ.Gantt.Utils.TimeComputingUtils,d=e.ConvertTimeSpanToTimeUnits(a.BaseTimeScaleType,new RQTimeSpan(this.times.ProposedStart-c))*a.BaseTimeUnitWidth,a=e.ConvertTimeSpanToTimeUnits(a.BaseTimeScaleType,
new RQTimeSpan(this.times.ProposedEnd-c))*a.BaseTimeUnitWidth;f.css("margin-left",d+"px");f.width(a-d);0<b.GanttControl.ActivityTimeChanged.fn.length&&(d=new TimesChangingEventArgs(this.options.Data,this.times.ProposedStart,this.times.ProposedEnd,"DragEnd"),b.GanttControl.ActivityTimeChanged.raise(this,d))}}}});
$.widget("radiantq.resizeTask",{options:{value:0,ganttTaskItemBar:null,Data:null,StartDateProperty:null,EffortProperty:null,EndDateProperty:null,WorkTimeSchedule:"",ResizeEnd:null,ResizeInfoPopup:null},$taskClone:null,ResizeTooltipContent:null,_MakeItBoldWhenActualDate:function(f){return"#if( data.HasChanged ){# "+f+"#}else {# <b>"+f+"</b>#}#"},_create:function(){var f=$("<div class='rq-pg-gc-taskBarResizer'></div>"),b=this.element.css("height");f.css("height",b);this.element.append(f);this.listenEvents(f);
this.initPopupTemplate()},initPopupTemplate:function(){var f=RadiantQ.Template||kendo.template;this.options.ResizeInfoPopup="function"!=typeof this.options.ResizeInfoPopup&&"string"==typeof this.options.ResizeInfoPopup?f(this.options.ResizeInfoPopup):f("<div align='left'><table class='rq-gc-taskbar-popup  ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${ RadiantQ_TaskString }</b></td></tr><tr><td style='float:right;'><b>${ RadiantQ_DurationString } :</b></td><td align='left'>"+
this._MakeItBoldWhenActualDate("#if (data.ProposedDuration){# #= data.ProposedDuration.days_M() #d #= data.ProposedDuration.hours_M() #h #}#")+"</td></tr><tr><td style='float:right;'><b>${ RadiantQ_StartString}:&nbsp;&nbsp;&nbsp;</b></td><td>${ data.ProposedStart.toString('yyyy-MM-dd HH:mm')} </td></tr><tr><td style='float:right;'><b>${ RadiantQ_FinishString}:&nbsp;&nbsp;&nbsp;</b></td><td>${ data.ProposedEnd.toString('yyyy-MM-dd HH:mm')}</td></tr></table></div>")},UpdateTooltipContent:function(f){this.ResizeTooltipContent=
$("<div></div>").append(this.options.ResizeInfoPopup(this.times))},_getChildObject:function(f,b,d,a){if("function"==typeof b)return 4==arguments.length?b(f,this,a):b(f,this);for(var c=b.split("."),e=f,g=0;g<c.length;g++){var h=c[g],m=e;if(g==c.length-1&&4==arguments.length)if(e[h+"_M"])e[h+"_M"](a);else if("function"==typeof e[h]){if(!1!=d)e[h](a)}else e[h]=a;else e=e[h+"_M"]?e[h+"_M"]():e[h],"function"==typeof e&&!1!=d&&(e=e.call(m))}return e},_updateValues:function(){var f=null;null!==this.options.WorkTimeSchedule&&
void 0!==this.options.WorkTimeSchedule?f=this.options.WorkTimeSchedule:this.options.ganttTaskItemBar&&(f=this.options.ganttTaskItemBar.GetScheduleToPlotWith());if(""!==this.options.StartDateProperty)if("function"==typeof this.options.StartDateProperty){var b=this.options.StartDateProperty(this.options.Data,this);this.times.Start=b}else"string"==typeof this.options.StartDateProperty&&(b=this._getChildObject(this.options.Data,this.options.StartDateProperty,!0),this.times.Start=b);""!==this.options.EffortProperty&&
("function"==typeof this.options.EffortProperty?(b=this.options.EffortProperty(this.options.Data,this),this.times.Effort=b):"string"==typeof this.options.EffortProperty&&(b=this._getChildObject(this.options.Data,this.options.EffortProperty,!0),this.times.Effort=b));""!==this.options.EndDateProperty&&("function"==typeof this.options.EndDateProperty?(b=this.options.EndDateProperty(this.options.Data,this),this.times.End=b):"string"==typeof this.options.EndDateProperty&&(b=this._getChildObject(this.options.Data,
this.options.EndDateProperty,!0),this.times.End=b));this.times.ProposedStart=this.times.Start;this.times.ProposedEnd=this.times.End;this.times.ProposedDuration=f.GetEffort(this.times.Start,this.times.ProposedEnd)},times:{Start:null,Effort:null,End:null,ProposedStart:null,ProposedEnd:null,ProposedDuration:null},listenEvents:function(f){var b=this,d=b.element;f.bind("mousedown.resizeTask",function(a){a.stopPropagation();b._updateValues();var c=$("<div id='clone' class='taskclone rq-taskbar-clone "+
window.radiantQclasses.defaultClass+"'></div>"),e=d[0].offsetWidth;c.css({width:e-2+"px",height:d[0].offsetHeight-3+"px"});d.addClass("rq-taskbar-shadow");d.append(c);var f=b._getGanttMousePosition(a,void 0).x,h=e,m=d[0].offsetLeft;b.UpdateTooltipContent(b.times);d.GetDragOrResizeContent(b.ResizeTooltipContent,a,d,void 0);$(document).bind("mousemove.resizeTask",function(a){h=b._getGanttMousePosition(a,void 0).x-f+e;b._ganttRoundDur(h,m);c.css("width",h+"px");b.UpdateTooltipContent(b.times);a=$(".dragPopup");
a.empty();a.append(b.ResizeTooltipContent);a.css("visibility","visible")}).bind("mouseup.resizeTask",function(a){$(document).unbind("mousemove.resizeTask mouseup.resizeTask keydown.resizeTask");b.ResizeEnd(b.options.ganttTaskItemBar,h,m);c.remove();$(".dragPopup").remove()}).bind("keydown.resizeTask",function(){27==a.keyCode&&$(document).unbind("mousemove.resizeTask mouseup.resizeTask keydown.resizeTask")})})},_getGanttMousePosition:function(f,b){var d=0,a=0;if(!0==b)if(f.originalEvent.touches[0].pageX||
f.originalEvent.touches[0].pageY)d=f.originalEvent.touches[0].pageX,a=f.originalEvent.touches[0].pageY;else{if(f.originalEvent.touches[0].clientX||f.originalEvent.touches[0].clientY)d=f.originalEvent.touches[0].clientX,a=f.originalEvent.touches[0].clientY}else if(f.pageX||f.pageY)d=f.pageX,a=f.pageY;else if(f.clientX||f.clientY)d=f.clientX,a=f.clientY;return{x:d,y:a}},_ganttRoundDur:function(f,b){var d=this.options.ganttTaskItemBar,a=null;""!==this.options.WorkTimeSchedule&&void 0!==this.options.WorkTimeSchedule?
a=this.options.WorkTimeSchedule:this.options.ganttTaskItemBar&&(a=d.GetScheduleToPlotWith());var c=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(d.GanttChart.options.BaseTimeScaleType,this.times.Start,b/d.GanttChart.options.BaseTimeUnitWidth,(b+f)/d.GanttChart.options.BaseTimeUnitWidth,null),c=new RQTimeSpan(0,c,0,0,0),c=d.GanttControl.RoundUpDuration(c),e=RQTimeSpan.Zero_M();c<e&&(c=e);this.times.ProposedDuration=c;this.times.ProposedEnd=this.times.Start.clone().addTimeSpan(c);a&&(this.times.ProposedDuration=
a.GetEffort(this.times.Start,this.times.ProposedEnd),this.times.ProposedEnd=a.GetEnd(this.times.Start,this.times.ProposedDuration),this.times.ProposedDuration=a.GetEffort(this.times.Start,this.times.ProposedEnd));a={Action:"Resizing",Data:this.options.Data,ProposedStartDate:this.times.ProposedStart,ProposedEndDate:this.times.ProposedEnd,ProposedDuration:this.times.ProposedDuration,Cancel:!1};d.GanttControl.ActivityTimeChanging.isSubscribed()&&d.GanttControl.ActivityTimeChanging.raise(this,a);!0==
a.Cancel?(this.times.ProposedStart=this.times.Start,this.times.ProposedEnd=this.times.End,this.times.ProposedDuration=this.times.Effort,this.times.HasChanged=!1):(this.times.ProposedStart=a.ProposedStartDate,this.times.ProposedEnd=a.ProposedEndDate,this.times.ProposedDuration=a.ProposedDuration,this.times.Effort.equals(a.ProposedDuration)?this.times.HasChanged=!1:this.times.HasChanged=!0)},ResizeEnd:function(f,b,d){b={Action:"Resizing",Data:this.options.Data,ProposedStartDate:this.times.ProposedStart,
ProposedEndDate:this.times.ProposedEnd,ProposedDuration:this.times.ProposedDuration,Cancel:!1};f.GanttControl.ActivityTimeChanging.isSubscribed()&&f.GanttControl.ActivityTimeChanging.raise(this,b);!1==b.Cancel?(this._getChildObject(this.options.Data,this.options.StartDateProperty,!0,this.times.ProposedStart),this._getChildObject(this.options.Data,this.options.EndDateProperty,!0,this.times.ProposedEnd),this._getChildObject(this.options.Data,this.options.EffortProperty,!0,this.times.ProposedDuration),
b=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeSpanToTimeUnits(f.GanttChart.options.BaseTimeScaleType,new RQTimeSpan(this.times.ProposedEnd-this.times.ProposedStart))*f.GanttChart.options.BaseTimeUnitWidth,this.element.width(b),0<f.GanttControl.ActivityTimeChanged.fn.length&&(b=new TimesChangingEventArgs(this.options.Data,this.times.ProposedStart,this.times.ProposedEnd,"ResizeEnd"),f.GanttControl.ActivityTimeChanged.raise(this,b))):(this.times.ProposedStart=this.times.Start,this.times.ProposedEnd=
this.times.End,this.times.ProposedDuration=this.times.Effort,this.times.HasChanged=!1)}});
